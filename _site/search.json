[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Schedule",
    "section": "",
    "text": "Here’s your roadmap for the semester! Each day, follow the general process outlined below:\n\nEnjoy the notes / text \nAttend class, review the  worksheet and solutions if you have any questions after working on it during class.  Slides from class are linked below.\nDiscuss the reflection questions  and ethics considerations  (see the  class notes) with your classmates and professor.\nThe textbooks are  Modern Data Science with R (MDSR), 3rd edition by Baumer, Kaplan, and Horton and  R for Data Science (R4DS), 2nd edition by Wickham, Çetinkaya-Rundel, and Grolemund.\nHomework assignments are found at the GitHub course organization. Due dates are provided on each assignment (roughly every other week). See the course GitHub page for more information on how to find, complete, and submit assignments.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ndate\ntopic\nclass materials\ndue dates\nresources\n\n\n\n\nWeek 1  1.22.25\nintro +  R + RStudio +  GitHub\n Introduction    MDSR Prologue   Why Git? + monsters    Introduction   WS 1 - DS project\n\n NSSD - Compromised Shoe Situation\n\n\nWeek 2  1.27.25\nData Viz\n  R4DS Visualize   graphics   ggplot    Data Viz   WS 2 - R   WS 3 - Tufte\n HW 1 - due 1.30.25 (Thursday!)\n Tufte. 1997. Visual and Statistical Thinking: Displays of Evidence for Making Decisions\n\n\nWeek 3  2.3.25\nData Viz\n  R4DS Visualize   graphics   ggplot    Data Viz    Data Verbs   WS 4 - ggplot   WS 5 - Verbs\n HW 2 - due 2.3.25 (Monday going forward)\n\n\n\nWeek 4  2.10.25\nData Wrangling\n  R4DS Transform   wrangling    Data Verbs    Pivot + Join   WS 6 - Joining\n HW 3 - due 2.10.25  Quiz 1 2.12.25\n\n\n\nWeek 5  2.17.25\nData Types\n  R4DS Factors    R4DS Strings   Text analysis   Data Types   WS 7 - String Variables   WS 8 - Factor Variables\n Project 1 - due 2.19.25\n\n\n\nWeek 6  2.24.25\nRegular Expressions\n  R4DS Regular expressions   Regular expressions   Regular expressions   WS 9 - Regular Expressions\n HW 4 - due 2.25.25 (Tuesday going forward)  Quiz 2 2.26.25\n\n\n\nWeek 7  3.3.25\nfunctions +  iteration\n  R4DS Fuctions    R4DS Iteration   Functions + Iteration   functions + iteration   WS 10 - Functions   WS 11 - map\n Project 2 - due 3.5.25\n\n\n\nWeek 8  3.10.25\ncode review +  reprex\n  reproducible examples    Tidyverse style guide   Reproducible examples   help me help you   WS 12 - help me help you   WS 13 - probability sim\n HW 5 - due 3.11.25\n\n\n\n3.17.25\nSpring Break\n\n\n\n\n\nWeek 9  3.24.25\niterations +  simulations\n  MDSR Simulations   Iterations   Iterations   WS 14 - model simulation   WS 15 - helper & hinderer\n HW 6 - due 3.25.25  Quiz 3 3.26.25\n\n\n\nWeek 10  3.31.25\npermutation tests\n Permutation tests   Permutation tests   Data Science Ethics   WS 16 - permutation test   WS 17 - ethics\n Project 3 - due 4.2.25\n\n\n\nWeek 11  4.7.25\nweb scraping\n R4DS Web scraping   Web scraping   Web scraping   WS 18 - css selectors\n HW 7 - due 4.8.25  Quiz 4 4.9.25\n\n\n\nWeek 12  4.14.25\nSQL\n R4DS Databases   MDSR Database querying   SQL   SQL DBMS   SQL clauses\n Project 4 - due 4.16.25\n\n\n\nWeek 13  4.21.25\nSQL\n R4DS Databases   MDSR Database querying   SQL joins   SQL joins\n HW 8 - due 4.22.25  Quiz 5 4.23.25\n\n\n\nWeek 14  4.28.25\nShiny\n Matering Shiny   MDSR Interactive web apps with Shiny   Shiny   Shiny\n Project 5 - due 4.30.25\n\n\n\nWeek 15  5.5.25\n\n Fin\nQuiz 6 5.7.25\npresentations (?) 5.8.25\n\n\nWeek 16  5.13.25\n\n\n Project 6 - due 5.13.25  + presentations (?)\n\n\n\n\n\n\n\n\n\n\n\nReuseCC BY 4.0"
  },
  {
    "objectID": "clicker_study.html",
    "href": "clicker_study.html",
    "title": "Clicker Questions",
    "section": "",
    "text": "to go along with \nModern Data Science with R, 3rd edition by Baumer, Kaplan, and Horton\nR for Data Science, 2nd edition by Wickham, Çetinkaya-Rundel, and Grolemund\n\n\n\n\nR / R Studio / Quarto1\n\nall good\nstarted, progress is slow and steady\nstarted, very stuck\nhaven’t started yet\nwhat do you mean by “R”?\n\n\n\n\nGit / GitHub2\n\nall good\nstarted, progress is slow and steady\nstarted, very stuck\nhaven’t started yet\nwhat do you mean by “Git”?\n\n\n\n\nWhere can I get feedback on my HW assignments / quizzes?3\n\nprof will return paper versions\non Gradescope\non Canvas\non GitHub\n\n\n\n\nWhich of the following includes talking to the remote version of GitHub?4\n\nchanging your name (updating the YAML)\ncommitting the file(s)\npushing the file(s)\nsome of the above\nall of the above\n\n\n\n\nWhat is the error?5\n\npoor assignment operator\nunmatched quotes\nimproper syntax for function argument\ninvalid object name\nno mistake\n\n\n\nshup2 &lt;-- \"Hello to you!\"\n\n\n\nWhat is the error?6\n\npoor assignment operator\nunmatched quotes\nimproper syntax for function argument\ninvalid object name\nno mistake\n\n\n\n3shup &lt;-  \"Hello to you!\"\n\n\n\nWhat is the error?7\n\npoor assignment operator\nunmatched quotes\nimproper syntax for function argument\ninvalid object name\nno mistake\n\n\n\nshup4 &lt;-  \"Hello to you!\n\n\n\nWhat is the error?8\n\npoor assignment operator\nunmatched quotes\nimproper syntax for function argument\ninvalid object name\nno mistake\n\n\n\nshup5 &lt;-  date()\n\n\n\nWhat is the error?9\n\npoor assignment operator\nunmatched quotes\nimproper syntax for function argument\ninvalid object name\nno mistake\n\n\n\nshup6 &lt;-  sqrt 10\n\n\n\nDo you keep a calendar / schedule / planner?10\n\nYes\nNo\n\n\n\n\nDo you keep a calendar / schedule / planner? If you answered “Yes” …11\n\nYes, on Google Calendar\nYes, on Calendar for macOS\nYes, on Outlook for Windows\nYes, in some other app\nYes, by hand\n\n\n\n\nWhere should I put things I’ve created for the HW (e.g., data, .ics file, etc.)12\n\nUpload into remote GitHub directory\nIn the local folder which also has the R project\nIn my Downloads\nSomewhere on my Desktop\nIn my Home directory\n\n\n\n\nThe goal of making a figure is…13\n\nTo draw attention to your work.\nTo facilitate comparisons.\nTo provide as much information as possible.\n\n\n\n\nA good reason to make a particular choice of a graph is:14\n\nBecause the journal / field has particular expectations for how the data are presented.\nBecause some variables naturally fit better on some graphs (e.g., numbers on scatter plots).\nBecause that graphic displays the message you want as optimally as possible.\n\n\n\n\nWhat are the visual cues on this plot?15\n\n\n\n\nposition\nlength\nshape\narea/volume\nshade/color\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nWhat are the visual cues on this plot?16\n\n\n\n\nposition\nlength\nshape\narea/volume\nshade/color\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nWhat are the visual cues on this plot?17\n\n\n\n\nposition\nlength\nshape\narea/volume\nshade/color\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nWhy are the points orange?18\n\nR translates “navy” into orange.\ncolor must be specified in geom_point()\ncolor must be specified outside the aes() function\nthe default plot color is orange\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot(data = Births78, \n       aes(x = date, y = births, color = \"navy\")) + \n  geom_point() +          \n  labs(title = \"US Births in 1978\")\n\n\n\n\n\nWhy are the dots blue and the lines colored?19\n\ndot color is given as “navy”, line color is given as wday.\nboth colors are specified in the ggplot() function.\ndot coloring takes precedence over line coloring.\nline coloring takes precedence over dot coloring.\n\n\n\n\n\n\n\n\n\n\n\n\n\nSetting vs. Mapping. If I want information to be passed to all data points (not variable):20\n\nmap the information inside the aes() function.\nset the information outside the aes() function\n\n\n\n\nThe Snow figure was most successful at:21\n\nmaking the data stand out\nfacilitating comparison\nputting the work in context\nsimplifying the story\n\n\n\n\nThe Challenger figure(s) was(were) least successful at:22\n\nmaking the data stand out\nfacilitating comparison\nputting the work in context\nsimplifying the story\n\n\n\n\nThe biggest difference between Snow and the Challenger was:23\n\nThe amount of information portrayed.\nOne was better at displaying cause.\nOne showed the relevant comparison better.\nOne was more artistic.\n\n\n\n\nCaffeine and Calories. What was the biggest concern over the average value axes?24\n\nIt isn’t at the origin.\nThey should have used all the data possible to find averages.\nThere wasn’t a random sample.\nThere wasn’t a label explaining why the axes were where they were.\n\n\n\n\nWhat is wrong with the following code?25\n\nshould only be one =\nSidney should be lower case\nname should not be in quotes\nuse mutate instead of filter\nbabynames in wrong place\n\n\n\nResult &lt;- |&gt; filter(babynames,\n        name == “Sidney”)\n\n\n\nWhich data represents the ideal format for ggplot2 and dplyr?26\n\n\n\n\n\n\n\ntable a\n\n\nyear\nAlgeria\nBrazil\nColumbia\n\n\n\n\n2000\n7\n12\n16\n\n\n2001\n9\n14\n18\n\n\n\n\n\n\n\n\n\n\n\n\n\ntable b\n\n\ncountry\nY2000\nY2001\n\n\n\n\nAlgeria\n7\n9\n\n\nBrazil\n12\n14\n\n\nColumbia\n16\n18\n\n\n\n\n\n\n\n\n\n\n\n\n\ntable c\n\n\ncountry\nyear\nvalue\n\n\n\n\nAlgeria\n2000\n7\n\n\nAlgeria\n2001\n9\n\n\nBrazil\n2000\n12\n\n\nBrazil\n2001\n14\n\n\nColumbia\n2000\n16\n\n\nColumbia\n2001\n18\n\n\n\n\n\n\n\n\n\nEach of the statements except one will accomplish the same calculation. Which one does not match?27\n\n\n#(a) \nbabynames |&gt; \n  group_by(year, sex) |&gt; \n  summarize(totalBirths = sum(n))\n\n#(b) \ngroup_by(babynames, year, sex) |&gt; \n  summarize(totalBirths = sum(n))\n\n#(c)\ngroup_by(babynames, year, sex) |&gt; \n  summarize(totalBirths = mean(n))\n\n#(d)\ntemp &lt;- group_by(babynames, year, sex)\n\nsummarize(temp, totalBirths = sum(n))\n\n#(e)\nsummarize(group_by(babynames, year, sex), \n          totalBirths = sum(n))\n\n\n\nFill in Q1.28\n\nfilter()\narrange()\nselect()\nmutate()\ngroup_by()\n\n\n\nresult &lt;- babynames |&gt;\n  Q1(name %in% c(\"Jane\", \"Mary\")) |&gt; \n  # just the Janes and Marys\n  group_by(Q2, Q2) |&gt; \n  summarize(total = Q3)\n\n\n\nFill in Q2.29\n\n(year, sex)\n(year, name)\n(year, n)\n(sex, name)\n(sex, n)\n\n\n\nresult &lt;- babynames |&gt;\n  Q1(name %in% c(\"Jane\", \"Mary\")) |&gt; \n  group_by(Q2, Q2) |&gt; \n  # for each year for each name\n  summarize(total = Q3)\n\n\n\nFill in Q3.30\n\nn_distinct(name)\nn_distinct(n)\nsum(name)\nsum(n)\nmean(n)\n\n\n\nresult &lt;- babynames |&gt;\n  Q1(name %in% c(\"Jane\", \"Mary\")) |&gt; \n  group_by(Q2, Q2) |&gt; \n  summarize(total = Q3)\n  # number of babies (each year, each name)\n\n\n\nRunning the code.31\n\n\nlibrary(babynames)\nbabynames |&gt;\n  filter(name %in% c(\"Jane\", \"Mary\")) |&gt; \n  # just the Janes and Marys\n  group_by(name, year) |&gt; \n  # for each year for each name\n  summarize(total = sum(n))\n\n# A tibble: 276 × 3\n# Groups:   name [2]\n   name   year total\n   &lt;chr&gt; &lt;dbl&gt; &lt;int&gt;\n 1 Jane   1880   215\n 2 Jane   1881   216\n 3 Jane   1882   254\n 4 Jane   1883   247\n 5 Jane   1884   295\n 6 Jane   1885   330\n 7 Jane   1886   306\n 8 Jane   1887   288\n 9 Jane   1888   446\n10 Jane   1889   374\n# ℹ 266 more rows\n\n\n\nbabynames |&gt;\n  filter(name %in% c(\"Jane\", \"Mary\")) |&gt; \n  group_by(name, year) |&gt; \n  summarize(number = sum(n))\n\n# A tibble: 276 × 3\n# Groups:   name [2]\n   name   year number\n   &lt;chr&gt; &lt;dbl&gt;  &lt;int&gt;\n 1 Jane   1880    215\n 2 Jane   1881    216\n 3 Jane   1882    254\n 4 Jane   1883    247\n 5 Jane   1884    295\n 6 Jane   1885    330\n 7 Jane   1886    306\n 8 Jane   1887    288\n 9 Jane   1888    446\n10 Jane   1889    374\n# ℹ 266 more rows\n\nbabynames |&gt;\n  filter(name %in% c(\"Jane\", \"Mary\")) |&gt; \n  group_by(name, year) |&gt; \n  summarize(n_distinct(name))\n\n# A tibble: 276 × 3\n# Groups:   name [2]\n   name   year `n_distinct(name)`\n   &lt;chr&gt; &lt;dbl&gt;              &lt;int&gt;\n 1 Jane   1880                  1\n 2 Jane   1881                  1\n 3 Jane   1882                  1\n 4 Jane   1883                  1\n 5 Jane   1884                  1\n 6 Jane   1885                  1\n 7 Jane   1886                  1\n 8 Jane   1887                  1\n 9 Jane   1888                  1\n10 Jane   1889                  1\n# ℹ 266 more rows\n\nbabynames |&gt;\n  filter(name %in% c(\"Jane\", \"Mary\")) |&gt; \n  group_by(name, year) |&gt; \n  summarize(n_distinct(n))\n\n# A tibble: 276 × 3\n# Groups:   name [2]\n   name   year `n_distinct(n)`\n   &lt;chr&gt; &lt;dbl&gt;           &lt;int&gt;\n 1 Jane   1880               1\n 2 Jane   1881               1\n 3 Jane   1882               1\n 4 Jane   1883               1\n 5 Jane   1884               1\n 6 Jane   1885               1\n 7 Jane   1886               1\n 8 Jane   1887               1\n 9 Jane   1888               1\n10 Jane   1889               1\n# ℹ 266 more rows\n\nbabynames |&gt;\n  filter(name %in% c(\"Jane\", \"Mary\")) |&gt; \n  group_by(name, year) |&gt; \n  summarize(sum(name))\n\nError in `summarize()`:\nℹ In argument: `sum(name)`.\nℹ In group 1: `name = \"Jane\"` and `year = 1880`.\nCaused by error in `base::sum()`:\n! invalid 'type' (character) of argument\n\nbabynames |&gt;\n  filter(name %in% c(\"Jane\", \"Mary\")) |&gt; \n  group_by(name, year) |&gt; \n  summarize(mean(n))\n\n# A tibble: 276 × 3\n# Groups:   name [2]\n   name   year `mean(n)`\n   &lt;chr&gt; &lt;dbl&gt;     &lt;dbl&gt;\n 1 Jane   1880       215\n 2 Jane   1881       216\n 3 Jane   1882       254\n 4 Jane   1883       247\n 5 Jane   1884       295\n 6 Jane   1885       330\n 7 Jane   1886       306\n 8 Jane   1887       288\n 9 Jane   1888       446\n10 Jane   1889       374\n# ℹ 266 more rows\n\nbabynames |&gt;\n  filter(name %in% c(\"Jane\", \"Mary\")) |&gt; \n  group_by(name, year) |&gt; \n  summarize(median(n))\n\n# A tibble: 276 × 3\n# Groups:   name [2]\n   name   year `median(n)`\n   &lt;chr&gt; &lt;dbl&gt;       &lt;dbl&gt;\n 1 Jane   1880         215\n 2 Jane   1881         216\n 3 Jane   1882         254\n 4 Jane   1883         247\n 5 Jane   1884         295\n 6 Jane   1885         330\n 7 Jane   1886         306\n 8 Jane   1887         288\n 9 Jane   1888         446\n10 Jane   1889         374\n# ℹ 266 more rows\n\n\n\n\nWhere can I get feedback on my HW assignments / quizzes?32\n\nprof will return paper versions\non Gradescope\non Canvas\non GitHub\n\n\n\n\nWhere can I get feedback on my projects?33\n\nprof will return paper versions\non Gradescope\non Canvas\non GitHub\n\n\n\n\nFill in Q1.34\n\ngdp\nyear\ngdpval\ncountry\n–country\n\n\n\nGDP |&gt;  \n  select(country = starts_with(\"Income\"), everything()) |&gt; \n       pivot_longer(cols = Q1, \n                    names_to = Q2, \n                    values_to = Q3)\n\n\n\nFill in Q2.35\n\ngdp\nyear\ngdpval\ncountry\n–country\n\n\n\nGDP |&gt;  \n  select(country = starts_with(\"Income\"), everything()) |&gt; \n       pivot_longer(cols = Q1, \n                    names_to = Q2, \n                    values_to = Q3)\n\n\n\nFill in Q3.36\n\ngdp\nyear\ngdpval\ncountry\n–country\n\n\n\nGDP |&gt;  \n  select(country = starts_with(\"Income\"), everything()) |&gt; \n       pivot_longer(cols = Q1, \n                    names_to = Q2, \n                    values_to = Q3)\n\n\n\nYou’d like to use the data to make a plot with Midterm score on the x-axis and Final score on the y-axis using the following ggplot() code. Which data frame should you use?37\n\nuse raw data\nuse pivot_wider() on raw data\nuse pivot_longer() on raw data\n\n\n\nggplot(___, aes(x = ___, y = ___, color = ___)) + \n  geom_point()\n\n\n\n# A tibble: 4 × 3\n  student test    score\n  &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;\n1 Alice   Midterm    85\n2 Alice   Final      90\n3 Bob     Midterm    78\n4 Bob     Final      82\n\n\n\n\ngrades |&gt; \n  pivot_wider(names_from = test, values_from = score)\n\n# A tibble: 2 × 3\n  student Midterm Final\n  &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;\n1 Alice        85    90\n2 Bob          78    82\n\n\n\n\nResponse to stimulus (in ms) after only 3 hrs of sleep for 9 days. You want to make a plot with the subject’s reaction time (y-axis) vs the number of days of sleep restriction (x-axis) using the following ggplot() code. Which data frame should you use?38\n\nuse raw data\nuse pivot_wider() on raw data\nuse pivot_longer() on raw data\n\n\n\nggplot(___, aes(x = ___, y = ___, color = ___)) + \n  geom_line()\n\n\n\n# A tibble: 18 × 11\n   Subject day_0 day_1 day_2 day_3 day_4 day_5 day_6 day_7 day_8 day_9\n     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n 1     308  250.  259.  251.  321.  357.  415.  382.  290.  431.  466.\n 2     309  223.  205.  203.  205.  208.  216.  214.  218.  224.  237.\n 3     310  199.  194.  234.  233.  229.  220.  235.  256.  261.  248.\n 4     330  322.  300.  284.  285.  286.  298.  280.  318.  305.  354.\n 5     331  288.  285   302.  320.  316.  293.  290.  335.  294.  372.\n 6     332  235.  243.  273.  310.  317.  310   454.  347.  330.  254.\n 7     333  284.  290.  277.  300.  297.  338.  332.  349.  333.  362.\n 8     334  265.  276.  243.  255.  279.  284.  306.  332.  336.  377.\n 9     335  242.  274.  254.  271.  251.  255.  245.  235.  236.  237.\n10     337  312.  314.  292.  346.  366.  392.  404.  417.  456.  459.\n11     349  236.  230.  239.  255.  251.  270.  282.  308.  336.  352.\n12     350  256.  243.  256.  256.  269.  330.  379.  363.  394.  389.\n13     351  251.  300.  270.  281.  272.  305.  288.  267.  322.  348.\n14     352  222.  298.  327.  347.  349.  353.  354.  360.  376.  389.\n15     369  272.  268.  257.  278.  315.  317.  298.  348.  340.  367.\n16     370  225.  235.  239.  240.  268.  344.  281.  348.  365.  372.\n17     371  270.  272.  278.  282.  279.  285.  259.  305.  351.  369.\n18     372  269.  273.  298.  311.  287.  330.  334.  343.  369.  364.\n\n\n\n\nsleep_long &lt;- sleep_wide |&gt;\n  pivot_longer(cols = -Subject,\n               names_to = \"day\",\n               names_prefix = \"day_\",\n               values_to = \"reaction_time\")\n\nsleep_long\n\n# A tibble: 180 × 3\n   Subject day   reaction_time\n     &lt;dbl&gt; &lt;chr&gt;         &lt;dbl&gt;\n 1     308 0              250.\n 2     308 1              259.\n 3     308 2              251.\n 4     308 3              321.\n 5     308 4              357.\n 6     308 5              415.\n 7     308 6              382.\n 8     308 7              290.\n 9     308 8              431.\n10     308 9              466.\n# ℹ 170 more rows\n\n\n\n\nConsider band members from the Beatles and the Rolling Stones. Who is removed in a right_join()?39\n\n\nMick\nJohn\nPaul\nKeith\nImpossible to know\n\n\nband_members |&gt; \n  right_join(band_instruments, by = \"name\")\n\n\n\nConsider band members from the Beatles and the Rolling Stones. Which variables are removed in a right_join()?40\n\n\nname\nband\nplays\nnone of them \n\n\n\n\nband_members\n\n# A tibble: 3 × 2\n  name  band   \n  &lt;chr&gt; &lt;chr&gt;  \n1 Mick  Stones \n2 John  Beatles\n3 Paul  Beatles\n\n\n\n\nband_instruments\n\n# A tibble: 3 × 2\n  name  plays \n  &lt;chr&gt; &lt;chr&gt; \n1 John  guitar\n2 Paul  bass  \n3 Keith guitar\n\n\n\n\n\nband_members |&gt; \n  right_join(band_instruments, by = \"name\")\n\n\n\nWhat happens to Mick’s plays variable in a full_join()?41\n\n\nMick is removed\nchanges to guitar\nchanges to bass\nNA\nNULL \n\n\n\n\nband_members\n\n# A tibble: 3 × 2\n  name  band   \n  &lt;chr&gt; &lt;chr&gt;  \n1 Mick  Stones \n2 John  Beatles\n3 Paul  Beatles\n\n\n\n\nband_instruments\n\n# A tibble: 3 × 2\n  name  plays \n  &lt;chr&gt; &lt;chr&gt; \n1 John  guitar\n2 Paul  bass  \n3 Keith guitar\n\n\n\n\n\nband_members |&gt; \n  full_join(band_instruments, by = \"name\")\n\n\n\nWhat is the output of the following R code?42\n\n\n“a 1” “b 2” “c 3”\n“a, 1” “b, 2” “c, 3”\n“a1” “b2” “c3”\n“a b c” “1 2 3”\n“abc” “123”\n\n\nstr_c(letters = c(\"a\", \"b\", \"c\"),\n      numbers = c(1, 2, 3))\n\n\n\nWhat is the output of the following R code?43\n\n\n“a 1” “b 2” “c 3”\n“a, 1” “b, 2” “c, 3”\n“a1” “b2” “c3”\n“a b c” “1 2 3”\n“abc” “123”\n\n\nstr_c(letters = c(\"a\", \"b\", \"c\"),\n      numbers = c(1, 2, 3), sep = \" \")\n\n\n\nWhat is the output of the following R code?44\n\n“abc” “hifg”\n“ab” “hifg”\n“ab” “ifg”\n“abc” “ifg”\n\n\n\nx &lt;- c(\"abcde\", \"ghifgh\")\nstr_sub(x, start = c(1, 3), end = c(2, 5))\n\n\n\nWhat is the output of the following R code?45\n\n\n“one -pple” “two p-ars” “three bananas”\n“on- -ppl-” “two p–rs” “thr– b-n-n-s”\n“on- apple” “two p-ars” “thr-e bananas”\n\n\nfruits &lt;- c(\"one apple\", \"two pears\", \"three bananas\")\nstr_replace(fruits, c(\"a\", \"e\", \"i\"), \"-\")\n\n\n\nWhat is the output of the following R code?46\n\n\nTRUE\nTRUE TRUE TRUE TRUE\nTRUE FALSE FALSE FALSE\nFALSE\n\n\nfruit &lt;- c(\"apple\", \"banana\", \"pear\", \"pineapple\")\nstr_detect(fruit, \"a\")\n\n\n\nIf unspecified, the levels of a factor variable will be ordered:47\n\nin the order that they first show up in the dataset\nfrom shortest to longest in terms of characters\nfrom longest to shortest in terms of characters\nalphabetically, from a to z\nalphabetically, from z to a\n\n\n\n\nWhat does this code do?48\n\nNew variable which is the average of the calories\nNew variable which is the average of the type\nChanges the values of type\nChanges the levels of type\nChanges the order of the levels of type\n\n\n\nstarbucks |&gt; \n  mutate(type = fct_reorder(type, calories, .fun = \"mean\", .desc = TRUE))\n\n\n\nWhat does fct_recode() do here?49\n\nCreates a new variable\nChanges the values of x\nChanges the levels of x\nChanges the order of the levels of x\nSome of the above\nAll of the above\n\n\n\nx &lt;- factor(c(\"apple\", \"bear\", \"dear\", \"banana\"))\nx\nfct_recode(x, fruit = \"apple\", fruit = \"banana\")\n\n\n\nWhat is January 31 + one month?50\n\nFebruary 31\nMarch 3\nFebruary 28 (assuming no leap year)\nI don’t want to answer the question\n\n\n\n\nWhat is the difference between code lines 3 and 4 below?51\n\nsame thing\ndifferent months\ndifferent output formatting\ndifferent input\ndifferent calculation\n\n\n\nlibrary(lubridate)\ntoday &lt;- ymd(\"2025-02-19\")\nmonth(today)\nmonth(today, label = TRUE)\n\n\n\nWhat does this number mean?52\n\nToday is the 8th day of the month.\nToday is the 8th day of the year.\nToday is the 8th week of the month.\nToday is the 8th week of the year.\n\n\n\ntoday &lt;- ymd(\"2025-02-19\")\nweek(today)\n\n[1] 8\n\n\n\n\nWhat is the difference in these two functions?53\n\n\nDay of month and day of year.\nDay of month and day of week.\nDay of week and day of year.\nDay of weekend and day of month.\n\n\nmday(today)\n\n[1] 19\n\nyday(today)\n\n[1] 50\n\n\n\n\nmday(today)\n\n[1] 19\n\nyday(today)\n\n[1] 50\n\n\n\n\nWhat is the result of the code?54\n\nTRUE\nFALSE\n“2025-09-01”\n“2025-02-19”\n\n\n\ntoday &gt; ymd(\"2025-09-01\")\n\n\n\nstr_subset(\"q[^u]\", very.large.word.list) would not match which of the following?55\n\nIraqi\nIraqian\nIraq\nzaqqun (tree that “springs out of the bottom of Hell”, in the Quran)\nQantas (the Australian airline)\n\n\n\n\nWhich of the following regex would match to both “grey” and “gray”?56\n\n“gr[ae]y”\n“gr(a|e)y”\n“gray | grey”\n“gr[a|e]y”\nsome / all of the above – which ones?\n\n\n\n\nWhat will the result be for the following code?57\n\n10\n1\n0\nNA\n\n\n\nstr_extract(\"My dog is 10 years old\", \"\\\\d\")\n\n\n\nWhat will the result be for the following code?58\n\n10\n1\n0\nNA\n\n\n\nstr_extract(\"My dog is 10 years old\", \"\\\\d+\")\n\n\n\nWhat will the result be for the following code?59\n\n.\nEpisode 2: The pie whisperer. (4 August 2015)\nEpisode\nE\n\n\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \".\")\n\n\n\nWhat will the result be for the following code?60\n\n.\nEpisode 2: The pie whisperer. (4 August 2015)\nEpisode\nE\n\n\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \".+\")\n\n\n\nWhat will the result be for the following code?61\n\n.\nEpisode 2: The pie whisperer. (4 August 2015)\nEpisode\nE\n\n\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \"\\\\.\")\n\n\n\nWhat is the difference between the output for the two regular expressions below?62\n\nThey give the same result.\nThe first is not case sensitive.\nThe second allow for all the variants.\nThe first includes Jane.\n\n\n\nstring &lt;- c(\"Mary\", \"Mar\", \"Janet\", \"jane\", \"Susan\", \"Sue\")\nstr_extract(string, \"\\\\bMary|Jane|Sue\\\\b\")\nstr_extract(string, \"\\\\b(Mary|Jane|Sue)\\\\b\")\n\n\n\nHow can I pull out just the numerical information in “$47”?63\n\n\"(?&lt;=\\\\$)\\\\d\"\n\"(?&lt;=\\\\$)\\\\d+\"\n\"\\\\d(?=\\\\$)\"\n\"\\\\d+(?=\\\\$)\"\n\n\n\n\nYou want to know all the types of pies in the text strings. They are written as, for example “apple pie”.64\n\n\"\\\\w+(?!pie)\"\n\"\\\\w+(?! pie)\"\n\"\\\\w+(?=pie)\"\n\"\\\\w+(?= pie)\"\n\n\n\n\nstr_extract(c(\"apple pie\", \"chocolate pie\", \"peach pie\"), \"\\\\w+(?= pie)\")\n\n[1] \"apple\"     \"chocolate\" \"peach\"    \n\n\n\nstr_extract(c(\"apple pie\", \"chocolate pie\", \"peach pie\"), \"\\\\w+(?=pie)\")\n\n[1] NA NA NA\n\n\n\n\nWe say that lookarounds are “zero-lenghth assertions”. What does that mean?65\n\nwe return the string in the lookaround\nwe replace the string in the lookaround\nwe return the string at the lookaround\nwe replace the string at the lookaround\n\n\n\n\nWhat will happen when I run the following code?66\n\n0\n3\n9\nNA\nerror (code will fail)\n\n\n\nmy_power &lt;- function(x, y){\n  return(x^y)\n}\nmy_power(3)\n\n\n\nWhat will happen when I run the following code?67\n\n0\n3\n9\nNA\nerror (code will fail)\n\n\n\nmy_power &lt;- function(x, y = 2){\n  return(x^y)\n}\nmy_power(3)\n\n\n\nWhat will happen when I run the following code?68\n\n4\n8\n9\nNA\nerror (code will fail)\n\n\n\nmy_power &lt;- function(x, y = 2){\n  return(x^y)\n}\nmy_power(2, 3)\n\n\n\nWhat will happen when I run the following code?69\n\n4\n8\n9\nNA\nerror (code will fail)\n\n\n\nmy_power &lt;- function(x = 2, y = 3){\n  return(x^y)\n}\nmy_power( )\n\n\n\nConsider the addTen() function. The following output is a result of which map_*() call?70\n\n\nmap(c(1,4,7), addTen)\nmap_dbl(c(1,4,7), addTen)\nmap_chr(c(1,4,7), addTen)\nmap_lgl(c(1,4,7), addTen)\n\n\naddTen &lt;- function(wow) {\n  return(wow + 10)\n}\n\n\n\n[1] \"11.000000\" \"14.000000\" \"17.000000\"\n\n\n\n\nWhich of the following input is allowed?71\n\nmap(c(1, 4, 7), addTen)\nmap(list(1, 4, 7), addTen)\nmap(data.frame(a=1, b=4, c=7), addTen)\nsome of the above\nall of the above\n\n\n\n\nWhich of the following produces a different output?72\n\nmap(c(1, 4, 7), addTen)\nmap(c(1, 4, 7), ~addTen(.x))\nmap(c(1, 4, 7), ~addTen)\nmap(c(1, 4, 7), function(hi) (hi + 10))\nmap(c(1, 4, 7), ~(.x + 10))\n\n\n\n\nWhat will the following code output?73\n\n3 random normals\n6 random normals\n18 random normals\n\n\n\ninput\n\n# A tibble: 3 × 3\n      n  mean    sd\n  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1     1     1     3\n2     2     3     1\n3     3    47    10\n\n\n\ninput |&gt; \n  pmap(rnorm)\n\n\n\nWhat is the following error telling me?74\n\n\nI haven’t loaded lubridate.\nI can’t add months and days.\nThere is no object called jan31.\nmonths() is not a function.\nThere is no error\n\n\njan31 + months(0:11) + days(31)\n#&gt; Error in eval(expr, envir, enclos): object 'jan31' not found\n\n\n\nWhat is the following error telling me?75\n\n\nI haven’t loaded lubridate.\nI can’t add months and days.\nThere is no object called jan31.\nymd() is not a function.\nThere is no error.\n\n\n  jan31 &lt;- ymd(\"2021-01-31\")\n#&gt; Error in ymd(\"2021-01-31\"): could not find function \"ymd\"\n  jan31 + months(0:11) + days(31)\n#&gt; Error in eval(expr, envir, enclos): object 'jan31' not found\n\n\n\nWhat is the following error telling me?76\n\n\nI haven’t loaded lubridate.\nI can’t add months and days.\nThere is no object called jan31.\nymd() is not a function.\nThere is no error.\n\n\n  library(lubridate)\n#&gt; \n#&gt; Attaching package: 'lubridate'\n#&gt; The following objects are masked from 'package:base':\n#&gt; \n#&gt;     date, intersect, setdiff, union\n  jan31 &lt;- ymd(\"2021-01-31\")\n  jan31 + months(0:11) + days(31)\n#&gt;  [1] \"2021-03-03\" NA           \"2021-05-01\" NA           \"2021-07-01\"\n#&gt;  [6] NA           \"2021-08-31\" \"2021-10-01\" NA           \"2021-12-01\"\n#&gt; [11] NA           \"2022-01-31\"\n\n\n\nRank these in order of bad to best.77\n\n1, 2, 3\n1, 3, 2\n2, 1, 3\n3, 2, 1\n3, 1, 2\n\n\n\n# 1\nday_one\nday_1\n\n# 2\nDayOne\ndayone\n\n# 3\nT &lt;- FALSE\nc &lt;- 10\nmean &lt;- function(x) sum(x)\n\n\n\nWhich is better?78\n\n1\n2\n\n\n\n# 1\nmean(x, na.rm = TRUE)\n\n# 2\nmean (x, na.rm = TRUE)\nmean( x, na.rm = TRUE )\n\n\n\nWhich is better?79\n\n1\n2\n\n\n\n# 1\nheight&lt;-feet*12+inches\nmean(x, na.rm=TRUE)\n\n# 2\nheight &lt;- (feet * 12) + inches\nmean(x, na.rm = TRUE)\n\n\n\nWhich is better?80\n\n1\n2\n\n\n\n# 1\ndo_something_very_complicated(\n  something = \"that\",\n  requires = many,\n  arguments = \"some of which may be long\"\n)\n\n# 2\ndo_something_very_complicated(\"that\", requires, many, arguments,\n                              \"some of which may be long\"\n                              )\n\n\n\nWhich is better?81\n\n1\n2\n\n\n\n# 1\niris |&gt;\n  summarise(Sepal.Length = mean(Sepal.Length), Sepal.Width = mean(Sepal.Width), .by = Species)\n\n# 2\niris |&gt;\n  summarise(\n    Sepal.Length = mean(Sepal.Length),\n    Sepal.Width = mean(Sepal.Width),\n    .by = Species\n  )\n\n\n\nWhich one do you like best?82\n\n1\n2\n3\n\n\n\n# 1\nx |&gt;\n  semi_join(y |&gt; filter(is_valid))\n\n# 2\nx |&gt;\n  select(a, b, w) |&gt;\n  left_join(y |&gt; select(a, b, v), join_by(a, b))\n\n# 3\nx_join &lt;- x |&gt; select(a, b, w)\ny_join &lt;- y |&gt; select(a, b, v)\nleft_join(x_join, y_join, join_by(a, b))\n\n\n\nIn R the ifelse() function takes the arguments:83\n\n\nquestion, yes, no\nquestion, no, yes\nstatement, yes, no\nstatement, no, yes\noption1, option2, option3\n\n\n\nWhat is the output of the following:84\n\n“cat”, 30, “cat”, “cat”, 6\n“cat”, “30”, “cat”, “cat”, “6”\n1, “cat”, 5, “cat”, “cat”\n1, “cat”, 5, NA, “cat”\n“1”, “cat”, “5”, NA, “cat”\n\n\n\ndata &lt;- c(1, 30, 5, NA, 6)\n\nifelse(data &gt; 5, \"cat\", data)\n\n\n\nWhere can I get feedback on my HW assignments / quizzes?85\n\nprof will return paper versions\non Gradescope\non Canvas\non GitHub\n\n\n\n\nWhere can I get feedback on my projects?86\n\nprof will return paper versions\non Gradescope\non Canvas\non GitHub\n\n\n\n\nIn R, the set.seed() function87\n\n\nmakes your computations go faster\nkeeps track of your computation time\nprovides an important parameter\nrepeats the function\nmakes your results reproducible\n\n\n\nWhat could the following code give us?88\n\n\n[1] “a” “b” “c” “d” “e” “f” “g” “h” “i” “j”\n[1] “i” “b” “g” “d” “a”\n[1] “j” “g” “f” “i” “f”\n[1] “f” “h” “i” “e” “g” “d” “c” “j” “b” “a”\n[1] “e” “j” “e” “b” “e” “c” “f” “a” “e” “a”\n\n\n# shuffle\nset.seed(47)\nalph &lt;- letters[1:10]\nsample(alph, 10, replace = FALSE)\n\n\n\nWhat could the following code give us?89\n\n\n[1] “a” “b” “c” “d” “e” “f” “g” “h” “i” “j”\n[1] “i” “b” “g” “d” “a”\n[1] “j” “g” “f” “i” “f”\n[1] “f” “h” “i” “e” “g” “d” “c” “j” “b” “a”\n[1] “e” “j” “e” “b” “e” “c” “f” “a” “e” “a”\n\n\n# resample\nset.seed(47)\nalph &lt;- letters[1:10]\nsample(alph, 10, replace = TRUE)\n\n\n\nWhat could the following code give us?90\n\n\n[1] “a” “b” “c” “d” “e” “f” “g” “h” “i” “j”\n[1] “i” “b” “g” “d” “a”\n[1] “j” “g” “f” “i” “f”\n[1] “f” “h” “i” “e” “g” “d” “c” “j” “b” “a”\n[1] “e” “j” “e” “b” “e” “c” “f” “a” “e” “a”\n\n\n# sample from an infinite population\nset.seed(47)\nalph &lt;- letters[1:10]\nsample(alph, 10, replace = TRUE)\n\n\n\nWhat could the following code give us?91\n\n\n[1] “a” “b” “c” “d” “e” “f” “g” “h” “i” “j”\n[1] “i” “b” “g” “d” “a”\n[1] “j” “g” “f” “i” “f”\n[1] “f” “h” “i” “e” “g” “d” “c” “j” “b” “a”\n[1] “e” “j” “e” “b” “e” “c” “f” “a” “e” “a”\n\n\n# sample from  finite population\nset.seed(47)\nalph &lt;- letters[1:10]\nsample(alph, 10, replace = FALSE)\n\n\n\nWhat does the following give us?92\n\n\nthe number of hats that match\nthe number of hats that don’t match\nthe proportion of hats that match\nthe proportion of hats that don’t match\nwhether or not at least one hat matches\n\n\nsum(hats == random_hats)\n\n[1] 2\n\n\n\n\nWhat does the following give us?93\n\n\nthe number of hats that match\nthe number of hats that don’t match\nthe proportion of hats that match\nthe proportion of hats that don’t match\nwhether or not at least one hat matches\n\n\nmean(hats == random_hats)\n\n[1] 0.2\n\n\n\n\nWhat does the following give us?94\n\n\nthe number of hats that match\nthe number of hats that don’t match\nthe proportion of hats that match\nthe proportion of hats that don’t match\nwhether or not at least one hat matches\n\n\nsum(hats == random_hats) &gt; 0\n\n[1] TRUE\n\n\n\n\nWhat is the magic number?95\n\n\n10\n10, the number of overall hats\n10, the number of hats we select\n0\n0, the number of matching hats\n\n\nhats &lt;- c(1:10)\nrandom_hats &lt;- sample(hats, size = 10, replace = FALSE)\nsum(hats == random_hats) &gt; 0\n\n\n\nIn the SAT example, we ran a single iteration and found that the false positive and false negative rates were problematic. What should we do next?96\n\n\nRepeat for many iterations.\nChange the initial settings.\nBring this analysis to the people with power.\nAlways use two models.\nAlways use only one model.\n\n\n\nIn the SAT example, what types of things might we vary?97\n\n\nproportion to red vs blue\nhow variable the values are: N(talent, 15)\ndifferent number of times blues get to take the test\nhow close grades and SAT are to talent (bias?)\n\n\n\nWhat would you want to know from the investment allocation plots?98\n\nWhat is the average rate of return?\nWhat is the maximum rate of return?\nWhat is the minimum rate of return?\nHow often do I lose money?\n\n\n\n\nIf 16 infants with no genuine preference choose 16 toys, what is the most likely number of “helping” toys that will be chosen?99\n\n\n4\n7\n8\n9\n10\n\n\n\nHow likely is it that exactly 8 helpers will be chosen (if there is no preference)?100\n\n\n0-15%\n16-30%\n31-49%\n50%\n51-100%\n\n\n\nWhat if we flipped a coin 160 times? What percent of the time will the simulation flip exactly 80 heads?101\n\n\n0-15%\n16-30%\n31-49%\n50%\n51-100%\n\n\n\nIs our actual result of 14 (under the coin model)…102\n\n\nvery surprising?\nsomewhat surprising?\nnot very surprising?\n\n\n\nHypothesis: the number of hours that grade-school children spend doing homework predicts their future success on standardized tests.103\n\nnull, one sided\nnull, two sided\nalternative, one sided\nalternative, two sided\n\n\n\n\nHypothesis: king cheetahs on average run the same speed as standard spotted cheetahs.104\n\nnull, one sided\nnull, two sided\nalternative, one sided\nalternative, two sided\n\n\n\n\nHypothesis: the mean length of African elephant tusks has changed over the last 100 years.105\n\nnull, one sided\nnull, two sided\nalternative, one sided\nalternative, two sided\n\n\n\n\nHypothesis: the risk of facial clefts is equal for babies born to mothers who take folic acid supplements compared with those from mothers who do not.106\n\nnull, one sided\nnull, two sided\nalternative, one sided\nalternative, two sided\n\n\n\n\nHypothesis: caffeine intake during pregnancy affects mean birth weight.107\n\nnull, one sided\nnull, two sided\nalternative, one sided\nalternative, two sided\n\n\n\n\nIn this class, the word parameter means:108\n\nThe values in a model\nNumbers that need to be tuned\nA number which is calculated from a sample of data.\nA number which (is almost always unknown and) describes a population.\n\n\n\n\nTo run a two-sample permutation test, should you permute the variable with or without replacement?109\n\nwith replacement (replace = TRUE)\nwithout replacement (replace = FALSE)\n\n\n\n\nThe histogram is a null sampling distribution for the difference in two means. The red line is the observed value from the data. To compute the p-value, which area should be considered?110\n\n\n\n\nThe area to the left.\nThe area to the right.\nDouble the area to the left.\nIt depends.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nThe histogram is a null sampling distribution for the difference in two means. The red line is the observed value from the data. The alternative hypothesis is \\(H_A: \\mu_1 - \\mu_2 \\ne 0\\). To compute the p-value, which area should be considered?111\n\n\n\n\nThe area to the left.\nThe area to the right.\nDouble the area to the left.\nIt depends.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nWhat is misleading here?112\n\nVery low data-to-ink ratio?113\nNon-intuitive sorting?\nWrong / changing scales?\n1-dim information in 2-D or 3-d?\nInconsistent labeling\n\n\n\n\n\n\n\nReproduction of a data graphic reporting the number of gun deaths in Florida over time. The original image was published by Reuters. [@MDSR]\n\n\n\n\n\n\nWhat is misleading here?114\n\nVery low data-to-ink ratio?115\nNon-intuitive sorting?\nWrong / changing scales?\n1-dim information in 2-D or 3-d?\nInconsistent labeling\n\n\n\n\n\n\n\nA tweet by National Review on December 14, 2015 showing the change in global temperature over time. [@MDSR]\n\n\n\n\n\n\nWhat is misleading here?116\n\nVery low data-to-ink ratio?117\nNon-intuitive sorting?\nWrong / changing scales?\n1-dim information in 2-D or 3-d?\nInconsistent labeling\n\n\n\n\n\n\n\nMay 10, 2020, Georgia Department of Health, COVID-19 cases for 5 counties across time. https://dph.georgia.gov/covid-19-daily-status-report\n\n\n\n\n\n\nWhat is misleading here?118\n\nVery low data-to-ink ratio?119\nNon-intuitive sorting?\nWrong / changing scales?\n1-dim information in 2-D or 3-d?\nInconsistent labeling\n\n\n\n\n\n\n\n\n\nJuly 2, 2020, Georgia Department of Health, COVID-19 cases per 100K\n\n\n\n\n\n\n\n\n\n\nJuly 17, 2020, https://dph.georgia.gov/covid-19-daily-status-report\n\n\n\n\n\n\n\n\nHow often do you read The Student Life?120\n\nEvery day\n3-5 times a week\nOnce a week\nRarely\n\n\n\n\nWhat do you think is the most common word in the titles of the Student Life opinion articles?121\n\nstop\nhealth\nPomona\nCMC\nstudents\n\n\n\n\nHow can you tell the difference between an element and an attribute?122\n\nthe elements have .\nthe elements have #\nthe elements have &lt; &gt;\nthe elements have [ ]\n\n\n\n\nHow do I find all the instances of the &lt;img&gt; (image) element?123\n\nuse selector: &lt;img&gt;\nuse selector: .img\nuse selector: #img\nuse selector: [img]\nuse selector: img\n\n\n\n\nHow do I find all the instances of the href= (URL) attribute?124\n\nuse selector: &lt;href&gt;\nuse selector: href\nuse selector: #href\nuse selector: [href]\nuse selector: href\n\n\n\n\nWhat is the difference between an attribute and an element?125\n\n\nan attribute describes an element\nan element describes an attribute\nan attribute is the parent of an element\nan element is the parent of an attribute\n\n\n\nWhat is a SQL server?126\n\n\nA relational database management system.\nA software program whose main purpose is to store and retrieve data.\nA highly secure server that does not allow any database file manipulation during execution.\nAll of the above.\n\n\n\nWhen was SQL created?127\n\n1960s\n1970s\n1980s\n1990s\n2000s\n\n\n\n\nWhat type of databases is SQL designed for?128\n\n\nhierarchical database management systems.\nnetwork database management systems.\nobject-oriented database management systems.\nrelational database management systems.\n\n\n\nWhich is bigger:129\n\ncomputer’s hard drive / storage\ncomputer’s memory / RAM\n\n\n\n\nWhere are each stored?130\n\n\nSQL tbl and R tibble both in storage\nSQL tbl and R tibble both in memory\nSQL tbl in storage and R tibble in memory\nSQL tbl in memory and R tibble in storage\n\n\n\nWhich SQL clause is used to extract data from a database?131\n\n\nOPEN\nEXTRACT\nSELECT\nGET\n\n\n\nWith SQL, how to you retrieve a column named “FirstName” from a table named “Persons”?132\n\n\nSELECT Persons.FirstName\nEXTRACT FIRSTNAME FROM Persons\nSELECT FirstName FROM Persons\nSELECT “FirstName” FROM “Persons”\n\n\n\nWith SQL, how do you select all the columns from a table named “Persons”?133\n\n\nSELECT Persons\nSELECT * FROM Persons\nSELECT [all] FROM Persons\nSELECT *.Persons\n\n\n\nWith SQL, how can you return the number of records in the “Persons” table?134\n\n\nSELECT COLUMNS(*) FROM Persons\nSELECT COUNT(*) FROM Persons\nSELECT NO(*) FROM Persons\nSELECT LEN(*) FROM Persons\n\n\n\nWith SQL, how do you select all the records from a table named “Persons” where the value of the column “FirstName” is “Peter”?135\n\n\nSELECT * FROM Persons WHERE FirstName &lt;&gt; ‘Peter’\nSELECT * FROM Persons WHERE FirstName = ‘Peter’\nSELECT * FROM Persons WHERE FirstName == ‘Peter’\nSELECT * FROM Persons WHERE FirstName LIKE ‘Peter’\nSELECT [all] FROM Persons WHERE FirstName = ‘Peter’\n\n\n\nWith SQL, how do you select all the records from a table named “Persons” where the “FirstName” is “Peter” and the “LastName” is “Jackson”?136\n\n\nSELECT FirstName = ‘Peter’, LastName = ‘Jackson’ FROM Persons\nSELECT * FROM Persons WHERE FirstName = Peter’ & LastName = Jackson’\nSELECT * FROM Persons WHERE FirstName = ‘Peter’ AND LastName = ‘Jackson’\nSELECT * FROM Persons WHERE FirstName = Peter’ | LastName = Jackson’\n\n\n\nWhich operator selects values within a range?137\n\nBEWTEEN\nWITHIN\nRANGE\n\n\n\n\nWith SQL, how do you select all the records from a table named “Persons” where the “LastName” is alphabetically between (and including) “Hansen” and “Pettersen”?138\n\nSELECT LastName &gt; ‘Hansen’ AND LastName &lt; ‘Pettersen’ FROM Persons\nSELECT * FROM Persons WHERE LastName BETWEEN ‘Hansen’ AND ‘Pettersen’\nSELECT * FROM Persons WHERE LastName &gt; ‘Hansen’ AND LastName &lt; ‘Pettersen’\n\n\n\n\nWhich SQL statement returns only different values?139\n\nSELECT UNIQUE\nSELECT DISTINCT\nSELECT DIFFERENT\n\n\n\n\nWhich SQL keyword is used to sort the result-set?140\n\nORDER BY\nORDER\nSORT\nSORT BY\n\n\n\n\nWith SQL, how can you return all the records from a table named “Persons” sorted descending by “FirstName”?141\n\nSELECT * FROM Persons ORDER FirstName DESC\nSELECT * FROM Persons SORT ‘FirstName’ DESC\nSELECT * FROM Persons ORDER BY FirstName DESC\nSELECT * FROM Persons SORT BY ‘FirstName’ DESC\n\n\n\n\nThe OR operator displays a record if ANY conditions listed are true. The AND operator displays a record if ALL of the conditions listed are true.142\n\nTRUE\nFALSE\n\n\n\n\nIn order to SELECT the records with foods that are either green or yellow fruit:143\n\n… WHERE type = ‘fruit’ AND color = ‘yellow’ OR color = ‘green’\n\n… WHERE (type = ‘fruit’ AND color = ‘yellow’) OR color = ‘green’\n\n… WHERE type = ‘fruit’ AND (color = ‘yellow’ OR color = ‘green’)\n\n… WHERE type = ‘fruit’ AND color = ‘yellow’ AND color = ‘green’\n\n… WHERE type = ‘fruit’ AND (color = ‘yellow’ AND color = ‘green’)\n\n\n\n\nWhat is the purpose of a JOIN?144\n\nit filters the rows returned by the SELECT statement.\nit specifies the columns to be retrieved.\nit combines rows from two or more tables based on a related column.\nit orders the results in ascending or descending order.\n\n\n\n\nWhat is the purpose of the UNION operator in SQL?145\n\nit combines the results of two or more SELECT statements.\nit performs a pattern match on a string.\nit retrieves the maximum value in a column.\nit filters the rows returned by the SELECT statement.\n\n\n\n\nWhat is the purpose of the INNER JOIN in SQL?146\n\nit retrieves the maximum value in a column.\nit combines rows from two or more tables based on a related column.\nit filters the rows returned by the SELECT statement.\nit performs a pattern match on a string.\n\n\n\n\nWhat is the purpose of the LEFT JOIN in SQL?147\n\nit combines rows from two or more tables based on a related column.\nit retrieves the maximum value in a column.\nit filters the rows returned by the SELECT statement.\nit performs a pattern match on a string.\n\n\n\n\nRIGHT JOIN keeps all the rows in …?148\n\nthe first table.\nthe second table.\nboth tables.\nneither table\n\n\n\n\nWho is removed in a RIGHT JOIN?149\n\nMick\nJohn\nPaul\nKeith\n\n\n\n\n\n\n\n\n\n\n\n\n\nWhich variable(s) are removed in a RIGHT JOIN?150\n\nname\nband\nplays\nnone of them\n\n\n\n\n\n\n\n\n\n\n\n\n\nIn SQL, what happens to Mick’s “plays” variables in a FULL JOIN?151\n\nMick is removed\nguitar\nbass\nNA\nNULL\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nWith SQL, how do you select all the records from a table named “Persons” where the value of the column “FirstName” starts with an “a”?152\n\nSELECT * FROM Persons WHERE FirstName = ’a.*’\nSELECT * FROM Persons WHERE FirstName = ’a*’\nSELECT * FROM Persons WHERE FirstName REGEXP ’a.*’\nSELECT * FROM Persons WHERE FirstName REGEXP ’a*’\nSELECT * FROM Persons WHERE FirstName REGEXP ’(?i)a.*’\n\n\n\n\nWhat is the main way to absolutely recognize a record within a database?153\n\nForeign key\nPrimary key\nUnique key\nNatural key\nAlternate key\n\n\n\n\nWhat does a foreign key do?154\n\nDirectly identifies another table\nDirectly identifies another column\nGives access to another entire database\nTranslates the database into another language\n\n\n\n\nWhich of these would likely be used as a foreign key between a table on student enrollment and student grades?155\n\ngrades\ntuition\nstudent_name\nstudent_hometown\n\n\n\n\nFor the student records (for two tables: enrollment and grades), which is the most likely combination?156\n\nname as primary key to both\nname as foreign to both\nname as primary in enrollment and foreign in grades\nname as foreign in enrollment and primary in grades\n\n\n\n\nWhich of the following is the primary function used to create a Shiny app?157\n\nshinyApp()\ncreateApp()\nrunApp()\nstartShinyApp()\n\n\n\n\nWhich of the following Shiny components contains the code for handling user inputs and generating outputs?158\n\nui\nserver\nrunApp()\nshinyApp()\n\n\n\n\nWhich of the following Shiny UI elements is used to allow users to select a single option from a list of choices?159\n\n\nselectInput()\nradioButtons()\ncheckboxGroupInput()\ntextInput()\n\n\n\nIn Shiny, what is the purpose of the renderText() function?160\n\n\nTo display a plot as text\nTo generate text output based on reactive inputs\nTo create a text input field\nTo render HTML elements\n\n\n\nWhat does the ui component in a Shiny app represent?161\n\n\nThe logic of the application\nThe server-side calculations\nThe user interface elements\nThe global settings for the app\n\n\n\nWhich Shiny function is used to handle reactive expressions in the server function?162\n\n\nreactive()\nrender()\nobserve()\nupdateInput()\n\n\n\nWhat is the default output type for renderPlot() in Shiny?163\n\nplotly chart\nggplot2 plot\nbase R plot\nHTML table\n\n\n\n\nWhich of the following is the correct way to create a slider input in Shiny?164\n\nsliderInput(\"slider\", \"Slider\", min = 1, max = 100, value = 50)\ninputSlider(\"slider\", min = 1, max = 100)\nsliderControl(\"slider\", 1, 100)\ninput_slider(\"slider\", 1, 100)"
  },
  {
    "objectID": "syllabus.html",
    "href": "syllabus.html",
    "title": "syllabus",
    "section": "",
    "text": "Jo Hardin 2351 Estella jo.hardin@pomona.edu\nClass: Mondays & Wednesday, 11-12:15pm\nOffice Hours: (Estella 2351)\nMonday: 2:30-4:30pm\nTuesday: 9-11am\nThursday: 1:15-3pm\nMentor Sessions:\nSunday & Tuesday 6-8pm\nEstella 2141\nMentors: Maren Rusk & Taha Disbudak\n\n\n\n\n\nArtwork by @allison_horst.\n\n\n\n\n\n\n\nFoundations of Data Science in R is a first course in data science. Data play an increasingly important role in many fields. Being able to understand data and the ethical implications in data driven decisions is paramount to being an informed member of society. As an introduction to data science with R, this course will introduce students to basic data science concepts. Prerequisite: CSCI004 or CSCI005 or CSCI051 or equivalent experience in programming.\n\n\n\n\n\n\nAnonymous Feedback\n\n\n\nAs someone who is, myself, constantly learning and growing in many ways, I welcome your feedback about the course, the classroom dynamics, or anything else you’d like me to know. There is a link on Canvas to an anonymous feedback form. Please feel free to provide me with feedback at any time!\n\n\n\n\n\nBy the end of the term, students will be able to:\n\nscrape, process, and clean data from the web\nwrangle data in a variety of formats\ncontextualize variation in data\nconstruct point and interval estimates using resampling techniques\ndesign accurate, clear and appropriate data graphics\nquery large relational databases (using SQL)\nwork fluently with regular expression\ncommunicate data-driven decisions\n\n\n\n\nIn an ideal world, science would be objective. However, much of science is subjective and is historically built on a small subset of privileged voices. In this class, we will make an effort to recognize how science (and data science!) has played a role in both understanding diversity as well as in promoting systems of power and privilege. I acknowledge that there may be both overt and covert biases in the material due to the lens with which it was written, even though the material is primarily of a scientific nature. Integrating a diverse set of experiences is important for a more comprehensive understanding of science. I would like to discuss issues of diversity in statistics as part of the course from time to time.\nPlease contact me if you have any suggestions to improve the quality of the course materials.\nFurthermore, I would like to create a learning environment for my students that supports a diversity of thoughts, perspectives and experiences, and honors your identities (including race, gender, class, sexuality, religion, ability, etc.) To help accomplish this:\n\nIf you have a name and/or set of pronouns that differ from those that appear in your official records, please let me know!\nIf you feel like your performance in the class is being impacted by your experiences outside of class, please don’t hesitate to come and talk with me. You can also relay information to me via your mentors. I want to be a resource for you.\n\nI (like many people) am still in the process of learning about diverse perspectives and identities. If something was said in class (by anyone) that made you feel uncomfortable, please talk to me about it. As a participant in course discussions, you should also strive to honor the diversity of your classmates.\n\n\n\n\n\n Modern Data Science with R, 3rd edition by Baumer, Kaplan, and Horton.\nR for Data Science, 2nd edition by Wickham, Çetinkaya-Rundel, and Grolemund.\n\n\n\n\n\n\nDates\n\n\n\n\nQuizzes on Feb 12, Feb 26, March 26, April 9, April 23, May 7 (in class)\n2.19.25 Project 1 due\n3.5.25 Project 2 due\n4.2.25 Project 3 due\n4.16.25 Project 4 due\n4.30.25 Project 5 due\n5.8.25 (Thursday) or 5.13.25 (Tuesday) Project Presentations (9am-noon)\n5.13.25 Project 6 write-up due (on GitHub by midnight)\n\n\n\n\n\n\n\n\n\n\n\nBest and most comprehensive Git help: http://happygitwithr.com/\nVersion control with Git\nMore on Git\nOnline Git book with lots of info\n\n\n\n\n\n\n\n\nA fantastic ggplot2 tutorial\nGreat tutorials through the Coding Club\nGoogle for R\nIncredibly helpful cheatsheets from RStudio.\n\ndata wrangling\nggplot2\nShiny\nQuarto\nRStudio IDE\n\n\n\n\n\n\n\n\nW3 schools Introduction to SQL\nW3 schools SQL Exercises, Practice, Solution\nR packages for working with databases\nIntroduction to dbplyr\n\n\n\n\n\n\n\nstringr vignette\nstringr package\nJenny Bryan et al.’s STAT 545 notes\nregexpal\n\nRegExr\nRegexOne\n\n\n\n\nHomework assignments will be graded out of 5 points, which are based on a combination of accuracy and effort. Below are rough guidelines for grading.\n[5] All problems completed with detailed solutions provided and 75% or more of the problems are fully correct. Additionally, there are no extraneous messages, warnings, or printed lists of numbers.\n[4] All problems completed with detailed solutions and 50-75% correct; OR close to all problems completed and 75%-100% correct. Or all problems are completed and there are extraneous messages, warnings, or printed lists of numbers. [Here is an example of extraneous messages and printed lists of numbers.]\n[3] Close to all problems completed with less than 75% correct. OR an assignment that didn’t make it all the way to Canvas as the correctly rendered pdf.\n[2] More than half but fewer than all problems completed and &gt; 75% correct.\n[1] More than half but fewer than all problems completed and &lt; 75% correct; OR less than half of problems completed.\n[0] No work submitted, OR half or less than half of the problems submitted and without any detail/work shown to explain the solutions. You will get a zero if your file is not compiled and submitted on GitHub.\n\n\n\n\n\nThere will be 5 mini-projects (due roughly every other week). You will also compile the projects, reflect on the process, and present your work to your classrmates. Project information is available here: DS 002R Projects\n\n\n\n\nGitHub will be used as a way to practice reproducible and collaborative science. There may be a slight learning curve, but knowing Git will be an extremely useful skill as you venture beyond this class.\nR will be used for all homework assignments. R is freely available at http://www.r-project.org/ and is already installed on college computers. Additionally, you need to install R Studio in order to use Quarto, https://posit.co/downloads/. If you are not already familiar with R, please work through some of the materials provided ASAP.\nYou are welcome to use Pomona’s R Studio server at https://rstudio.campus.pomona.edu/ (or https://rstudio.pomona.edu if you are off campus). If you use the server, you can connect directly to your Git account without installing Git locally on your own computer. [If you are not a Pomona student, you will need to get an account from Pomona’s ITS. Go to ITS, tell them that you are taking a Pomona course, and ask for an account for using RStudio.]\n\n\n\n\n\nThis class will be interactive, and your engagement is expected (every day in class). Although notes will be posted, your engagement is an integral part of the in-class learning process.\nIn class: after answering one question, wait until 5 other people have spoken before answering another question. [Feel free to ask as many questions as often as you like!]\nTo get full participation points, you will be expected to contribute at least one R tip of the day, sometime during the semester.\n\n\n\n\nYou are on your honor to present only your work as part of your course assessments. Below, I’ve provided Pomona’s academic honesty policy. But before the policy, I’ve given some thoughts on cheating which I have taken from Nick Ball’s CHEM 147 Collective (thank you, Prof Ball!). Prof Ball gives us all something to think about when we are learning in a classroom as well as on our journey to become scientists and professionals:\nThere are many known reasons why we may feel the need to “cheat” on problem sets or exams:\n\n\nAn academic environment that values grades above learning.\nFinancial aid is critical for remaining in school that places undue pressure on maintaining a high GPA.\nNavigating school, work, and/or family obligations that have diverted focus from class.\nChallenges balancing coursework and mental health.\nBalancing academic, family, peer, or personal issues.\n\n\nBeing accused of cheating – whether it has occurred or not – can be devastating for students. The college requires me to respond to potential academic dishonesty with a process that is very long and damaging. As your instructor, I care about you and want to offer alternatives to prevent us from having to go through this process. If you find yourself in a situation where “cheating” seems like the only option:\nPlease come talk to me. We will figure this out together.\nPomona College is an academic community, all of whose members are expected to abide by ethical standards both in their conduct and in their exercise of responsibilities toward other members of the community. The college expects students to understand and adhere to basic standards of honesty and academic integrity. These standards include, but are not limited to, the following:\n\n\nIn projects and assignments prepared independently, students never represent the ideas or the language of others as their own.\nStudents do not destroy or alter either the work of other students or the educational resources and materials of the College.\nStudents neither give nor receive assistance in examinations.\nStudents do not take unfair advantage of fellow students by representing work completed for one course as original work for another or by deliberately disregarding course rules and regulations.\nIn laboratory or research projects involving the collection of data, students accurately report data observed and do not alter these data for any reason.\n\n\n\n\n\nPlease email and / or set up a time to talk if you have any questions about or difficulty with the material, the computing, or the course. Talk to me as soon as possible if you find yourself struggling. The material will build on itself, so it will be much easier to catch up if the concepts get clarified earlier rather than later. This semester is going to be fun. Let’s do it.\n\n\n\n\n\n\nGrading\n\n\n\n\n30% Homework\n30% Quizzes\n30% Projects & Final Presentation\n10% Class engagement"
  },
  {
    "objectID": "syllabus.html#math-150-spring-2023",
    "href": "syllabus.html#math-150-spring-2023",
    "title": "syllabus",
    "section": "",
    "text": "Class: Tuesdays & Thursdays, 1:15-2:30pm\nJo Hardin\n2351 Estella\njo.hardin@pomona.edu\n\n\nMondays 1:30-3pm\nTuesdays 2:30-3:30pm\nWednesday 9-11am\nThursday 3-4pm\nor by appointment\n\n\nMonday 6-8pm\nWednesday 8-10pm\nEstella 2131\n\n\n\n\n\nArtwork by @allison_horst."
  },
  {
    "objectID": "syllabus.html#the-course",
    "href": "syllabus.html#the-course",
    "title": "syllabus",
    "section": "",
    "text": "Foundations of Data Science in R is a first course in data science. Data play an increasingly important role in many fields. Being able to understand data and the ethical implications in data driven decisions is paramount to being an informed member of society. As an introduction to data science with R, this course will introduce students to basic data science concepts. Prerequisite: CSCI004 or CSCI005 or CSCI051 or equivalent experience in programming.\n\n\n\n\n\n\nAnonymous Feedback\n\n\n\nAs someone who is, myself, constantly learning and growing in many ways, I welcome your feedback about the course, the classroom dynamics, or anything else you’d like me to know. There is a link on Canvas to an anonymous feedback form. Please feel free to provide me with feedback at any time!"
  },
  {
    "objectID": "syllabus.html#student-learning-outcomes",
    "href": "syllabus.html#student-learning-outcomes",
    "title": "syllabus",
    "section": "",
    "text": "By the end of the semester, students will be able to do the following:\n\nevaluate quantitative information with regards to clinical and biological data. We’ll be sure to keep in mind:\n\nCareful presentation of data\nConsideration of variability\nMeaningful comparisons\n\ncritically evaluate the medical literature with respect to design, analysis, and interpretation of results.\nunderstand the role of inherent variability and keep it in perspective when inferring results to a population.\ncritically evaluate medical results given in the mainstream media.\nread published studies with skepticism. Some people (in all fields!) wrongly believe that all studies published in a peer review publication must be 100% accurate and/or well designed studies. In this course, you will learn the tools to recognize, interpret, and critique statistical results in medical literature."
  },
  {
    "objectID": "syllabus.html#inclusion-goals",
    "href": "syllabus.html#inclusion-goals",
    "title": "syllabus",
    "section": "",
    "text": "In an ideal world, science would be objective. However, much of science is subjective and is historically built on a small subset of privileged voices. In this class, we will make an effort to recognize how science (and data science!) has played a role in both understanding diversity as well as in promoting systems of power and privilege. I acknowledge that there may be both overt and covert biases in the material due to the lens with which it was written, even though the material is primarily of a scientific nature. Integrating a diverse set of experiences is important for a more comprehensive understanding of science. I would like to discuss issues of diversity in statistics as part of the course from time to time.\nPlease contact me if you have any suggestions to improve the quality of the course materials.\nFurthermore, I would like to create a learning environment for my students that supports a diversity of thoughts, perspectives and experiences, and honors your identities (including race, gender, class, sexuality, religion, ability, etc.) To help accomplish this:\n\nIf you have a name and/or set of pronouns that differ from those that appear in your official records, please let me know!\nIf you feel like your performance in the class is being impacted by your experiences outside of class, please don’t hesitate to come and talk with me. You can also relay information to me via your mentors. I want to be a resource for you.\n\nI (like many people) am still in the process of learning about diverse perspectives and identities. If something was said in class (by anyone) that made you feel uncomfortable, please talk to me about it. As a participant in course discussions, you should also strive to honor the diversity of your classmates."
  },
  {
    "objectID": "syllabus.html#technical-details",
    "href": "syllabus.html#technical-details",
    "title": "syllabus",
    "section": "",
    "text": "Modern Data Science with R, 3rd edition by Baumer, Kaplan, and Horton.\nR for Data Science, 2nd edition by Wickham, Çetinkaya-Rundel, and Grolemund.\n\n\n\n\n\n\nDates\n\n\n\n\nQuizzes on Feb 12, Feb 26, March 26, April 9, April 23, May 7 (in class)\n2.19.25 Project 1 due\n3.5.25 Project 2 due\n4.2.25 Project 3 due\n4.16.25 Project 4 due\n4.30.25 Project 5 due\n5.8.25 (Thursday) or 5.13.25 (Tuesday) Project Presentations (9am-noon)\n5.13.25 Project 6 write-up due (on GitHub by midnight)"
  },
  {
    "objectID": "syllabus.html#important-features",
    "href": "syllabus.html#important-features",
    "title": "syllabus",
    "section": "",
    "text": "The prerequisite for this class is some computer science.\n\n\n\nLabs will take place on most days with the lab write-up due just before the following class period. See instructions for using GitHub on the course website for how to turn in assignments.\n\n\n\nThe class expectations are that you show up for class and labs and turn in a final project. A successful final project is required to pass the class. Additionally, you should not miss more than 1 or 2 classes nor should you miss turning in more than 1 or 2 labs.\n\n:::"
  },
  {
    "objectID": "syllabus.html#footnotes",
    "href": "syllabus.html#footnotes",
    "title": "syllabus",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nadapted from Monica Linden, Brown University↩︎"
  },
  {
    "objectID": "notes.html",
    "href": "notes.html",
    "title": "Class Notes",
    "section": "",
    "text": "Class notes can be found at http://st47s.com/DS002R/Notes/.\n\n\n\n\n\n\n\n\n\nReuseCC BY 4.0"
  },
  {
    "objectID": "clicker.html",
    "href": "clicker.html",
    "title": "Clicker Questions",
    "section": "",
    "text": "to go along with \nModern Data Science with R, 3rd edition by Baumer, Kaplan, and Horton\nR for Data Science, 2nd edition by Wickham, Çetinkaya-Rundel, and Grolemund\n\n\n\n\nR / R Studio / Quarto1\n\nall good\nstarted, progress is slow and steady\nstarted, very stuck\nhaven’t started yet\nwhat do you mean by “R”?\n\n\n\n\nGit / GitHub2\n\nall good\nstarted, progress is slow and steady\nstarted, very stuck\nhaven’t started yet\nwhat do you mean by “Git”?\n\n\n\n\nWhere can I get feedback on my HW assignments / quizzes?3\n\nprof will return paper versions\non Gradescope\non Canvas\non GitHub\n\n\n\n\nWhich of the following includes talking to the remote version of GitHub?4\n\nchanging your name (updating the YAML)\ncommitting the file(s)\npushing the file(s)\nsome of the above\nall of the above\n\n\n\n\nWhat is the error?5\n\npoor assignment operator\nunmatched quotes\nimproper syntax for function argument\ninvalid object name\nno mistake\n\n\n\nshup2 &lt;-- \"Hello to you!\"\n\n\n\nWhat is the error?6\n\npoor assignment operator\nunmatched quotes\nimproper syntax for function argument\ninvalid object name\nno mistake\n\n\n\n3shup &lt;-  \"Hello to you!\"\n\n\n\nWhat is the error?7\n\npoor assignment operator\nunmatched quotes\nimproper syntax for function argument\ninvalid object name\nno mistake\n\n\n\nshup4 &lt;-  \"Hello to you!\n\n\n\nWhat is the error?8\n\npoor assignment operator\nunmatched quotes\nimproper syntax for function argument\ninvalid object name\nno mistake\n\n\n\nshup5 &lt;-  date()\n\n\n\nWhat is the error?9\n\npoor assignment operator\nunmatched quotes\nimproper syntax for function argument\ninvalid object name\nno mistake\n\n\n\nshup6 &lt;-  sqrt 10\n\n\n\nDo you keep a calendar / schedule / planner?10\n\nYes\nNo\n\n\n\n\nDo you keep a calendar / schedule / planner? If you answered “Yes” …11\n\nYes, on Google Calendar\nYes, on Calendar for macOS\nYes, on Outlook for Windows\nYes, in some other app\nYes, by hand\n\n\n\n\nWhere should I put things I’ve created for the HW (e.g., data, .ics file, etc.)12\n\nUpload into remote GitHub directory\nIn the local folder which also has the R project\nIn my Downloads\nSomewhere on my Desktop\nIn my Home directory\n\n\n\n\nThe goal of making a figure is…13\n\nTo draw attention to your work.\nTo facilitate comparisons.\nTo provide as much information as possible.\n\n\n\n\nA good reason to make a particular choice of a graph is:14\n\nBecause the journal / field has particular expectations for how the data are presented.\nBecause some variables naturally fit better on some graphs (e.g., numbers on scatter plots).\nBecause that graphic displays the message you want as optimally as possible.\n\n\n\n\nWhat are the visual cues on this plot?15\n\n\n\n\nposition\nlength\nshape\narea/volume\nshade/color\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nWhat are the visual cues on this plot?16\n\n\n\n\nposition\nlength\nshape\narea/volume\nshade/color\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nWhat are the visual cues on this plot?17\n\n\n\n\nposition\nlength\nshape\narea/volume\nshade/color\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nWhy are the points orange?18\n\nR translates “navy” into orange.\ncolor must be specified in geom_point()\ncolor must be specified outside the aes() function\nthe default plot color is orange\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot(data = Births78, \n       aes(x = date, y = births, color = \"navy\")) + \n  geom_point() +          \n  labs(title = \"US Births in 1978\")\n\n\n\n\n\nWhy are the dots blue and the lines colored?19\n\ndot color is given as “navy”, line color is given as wday.\nboth colors are specified in the ggplot() function.\ndot coloring takes precedence over line coloring.\nline coloring takes precedence over dot coloring.\n\n\n\n\n\n\n\n\n\n\n\n\n\nSetting vs. Mapping. If I want information to be passed to all data points (not variable):20\n\nmap the information inside the aes() function.\nset the information outside the aes() function\n\n\n\n\nThe Snow figure was most successful at:21\n\nmaking the data stand out\nfacilitating comparison\nputting the work in context\nsimplifying the story\n\n\n\n\nThe Challenger figure(s) was(were) least successful at:22\n\nmaking the data stand out\nfacilitating comparison\nputting the work in context\nsimplifying the story\n\n\n\n\nThe biggest difference between Snow and the Challenger was:23\n\nThe amount of information portrayed.\nOne was better at displaying cause.\nOne showed the relevant comparison better.\nOne was more artistic.\n\n\n\n\nCaffeine and Calories. What was the biggest concern over the average value axes?24\n\nIt isn’t at the origin.\nThey should have used all the data possible to find averages.\nThere wasn’t a random sample.\nThere wasn’t a label explaining why the axes were where they were.\n\n\n\n\nWhat is wrong with the following code?25\n\nshould only be one =\nSidney should be lower case\nname should not be in quotes\nuse mutate instead of filter\nbabynames in wrong place\n\n\n\nResult &lt;- |&gt; filter(babynames,\n        name == “Sidney”)\n\n\n\nWhich data represents the ideal format for ggplot2 and dplyr?26\n\n\n\n\n\n\n\ntable a\n\n\nyear\nAlgeria\nBrazil\nColumbia\n\n\n\n\n2000\n7\n12\n16\n\n\n2001\n9\n14\n18\n\n\n\n\n\n\n\n\n\n\n\n\n\ntable b\n\n\ncountry\nY2000\nY2001\n\n\n\n\nAlgeria\n7\n9\n\n\nBrazil\n12\n14\n\n\nColumbia\n16\n18\n\n\n\n\n\n\n\n\n\n\n\n\n\ntable c\n\n\ncountry\nyear\nvalue\n\n\n\n\nAlgeria\n2000\n7\n\n\nAlgeria\n2001\n9\n\n\nBrazil\n2000\n12\n\n\nBrazil\n2001\n14\n\n\nColumbia\n2000\n16\n\n\nColumbia\n2001\n18\n\n\n\n\n\n\n\n\n\nEach of the statements except one will accomplish the same calculation. Which one does not match?27\n\n\n#(a) \nbabynames |&gt; \n  group_by(year, sex) |&gt; \n  summarize(totalBirths = sum(n))\n\n#(b) \ngroup_by(babynames, year, sex) |&gt; \n  summarize(totalBirths = sum(n))\n\n#(c)\ngroup_by(babynames, year, sex) |&gt; \n  summarize(totalBirths = mean(n))\n\n#(d)\ntemp &lt;- group_by(babynames, year, sex)\n\nsummarize(temp, totalBirths = sum(n))\n\n#(e)\nsummarize(group_by(babynames, year, sex), \n          totalBirths = sum(n))\n\n\n\nFill in Q1.28\n\nfilter()\narrange()\nselect()\nmutate()\ngroup_by()\n\n\n\nresult &lt;- babynames |&gt;\n  Q1(name %in% c(\"Jane\", \"Mary\")) |&gt; \n  # just the Janes and Marys\n  group_by(Q2, Q2) |&gt; \n  summarize(total = Q3)\n\n\n\nFill in Q2.29\n\n(year, sex)\n(year, name)\n(year, n)\n(sex, name)\n(sex, n)\n\n\n\nresult &lt;- babynames |&gt;\n  Q1(name %in% c(\"Jane\", \"Mary\")) |&gt; \n  group_by(Q2, Q2) |&gt; \n  # for each year for each name\n  summarize(total = Q3)\n\n\n\nFill in Q3.30\n\nn_distinct(name)\nn_distinct(n)\nsum(name)\nsum(n)\nmean(n)\n\n\n\nresult &lt;- babynames |&gt;\n  Q1(name %in% c(\"Jane\", \"Mary\")) |&gt; \n  group_by(Q2, Q2) |&gt; \n  summarize(total = Q3)\n  # number of babies (each year, each name)\n\n\n\nRunning the code.31\n\n\nlibrary(babynames)\nbabynames |&gt;\n  filter(name %in% c(\"Jane\", \"Mary\")) |&gt; \n  # just the Janes and Marys\n  group_by(name, year) |&gt; \n  # for each year for each name\n  summarize(total = sum(n))\n\n# A tibble: 276 × 3\n# Groups:   name [2]\n   name   year total\n   &lt;chr&gt; &lt;dbl&gt; &lt;int&gt;\n 1 Jane   1880   215\n 2 Jane   1881   216\n 3 Jane   1882   254\n 4 Jane   1883   247\n 5 Jane   1884   295\n 6 Jane   1885   330\n 7 Jane   1886   306\n 8 Jane   1887   288\n 9 Jane   1888   446\n10 Jane   1889   374\n# ℹ 266 more rows\n\n\n\nbabynames |&gt;\n  filter(name %in% c(\"Jane\", \"Mary\")) |&gt; \n  group_by(name, year) |&gt; \n  summarize(number = sum(n))\n\n# A tibble: 276 × 3\n# Groups:   name [2]\n   name   year number\n   &lt;chr&gt; &lt;dbl&gt;  &lt;int&gt;\n 1 Jane   1880    215\n 2 Jane   1881    216\n 3 Jane   1882    254\n 4 Jane   1883    247\n 5 Jane   1884    295\n 6 Jane   1885    330\n 7 Jane   1886    306\n 8 Jane   1887    288\n 9 Jane   1888    446\n10 Jane   1889    374\n# ℹ 266 more rows\n\nbabynames |&gt;\n  filter(name %in% c(\"Jane\", \"Mary\")) |&gt; \n  group_by(name, year) |&gt; \n  summarize(n_distinct(name))\n\n# A tibble: 276 × 3\n# Groups:   name [2]\n   name   year `n_distinct(name)`\n   &lt;chr&gt; &lt;dbl&gt;              &lt;int&gt;\n 1 Jane   1880                  1\n 2 Jane   1881                  1\n 3 Jane   1882                  1\n 4 Jane   1883                  1\n 5 Jane   1884                  1\n 6 Jane   1885                  1\n 7 Jane   1886                  1\n 8 Jane   1887                  1\n 9 Jane   1888                  1\n10 Jane   1889                  1\n# ℹ 266 more rows\n\nbabynames |&gt;\n  filter(name %in% c(\"Jane\", \"Mary\")) |&gt; \n  group_by(name, year) |&gt; \n  summarize(n_distinct(n))\n\n# A tibble: 276 × 3\n# Groups:   name [2]\n   name   year `n_distinct(n)`\n   &lt;chr&gt; &lt;dbl&gt;           &lt;int&gt;\n 1 Jane   1880               1\n 2 Jane   1881               1\n 3 Jane   1882               1\n 4 Jane   1883               1\n 5 Jane   1884               1\n 6 Jane   1885               1\n 7 Jane   1886               1\n 8 Jane   1887               1\n 9 Jane   1888               1\n10 Jane   1889               1\n# ℹ 266 more rows\n\nbabynames |&gt;\n  filter(name %in% c(\"Jane\", \"Mary\")) |&gt; \n  group_by(name, year) |&gt; \n  summarize(sum(name))\n\nError in `summarize()`:\nℹ In argument: `sum(name)`.\nℹ In group 1: `name = \"Jane\"` and `year = 1880`.\nCaused by error in `base::sum()`:\n! invalid 'type' (character) of argument\n\nbabynames |&gt;\n  filter(name %in% c(\"Jane\", \"Mary\")) |&gt; \n  group_by(name, year) |&gt; \n  summarize(mean(n))\n\n# A tibble: 276 × 3\n# Groups:   name [2]\n   name   year `mean(n)`\n   &lt;chr&gt; &lt;dbl&gt;     &lt;dbl&gt;\n 1 Jane   1880       215\n 2 Jane   1881       216\n 3 Jane   1882       254\n 4 Jane   1883       247\n 5 Jane   1884       295\n 6 Jane   1885       330\n 7 Jane   1886       306\n 8 Jane   1887       288\n 9 Jane   1888       446\n10 Jane   1889       374\n# ℹ 266 more rows\n\nbabynames |&gt;\n  filter(name %in% c(\"Jane\", \"Mary\")) |&gt; \n  group_by(name, year) |&gt; \n  summarize(median(n))\n\n# A tibble: 276 × 3\n# Groups:   name [2]\n   name   year `median(n)`\n   &lt;chr&gt; &lt;dbl&gt;       &lt;dbl&gt;\n 1 Jane   1880         215\n 2 Jane   1881         216\n 3 Jane   1882         254\n 4 Jane   1883         247\n 5 Jane   1884         295\n 6 Jane   1885         330\n 7 Jane   1886         306\n 8 Jane   1887         288\n 9 Jane   1888         446\n10 Jane   1889         374\n# ℹ 266 more rows\n\n\n\n\nWhere can I get feedback on my HW assignments / quizzes?32\n\nprof will return paper versions\non Gradescope\non Canvas\non GitHub\n\n\n\n\nWhere can I get feedback on my projects?33\n\nprof will return paper versions\non Gradescope\non Canvas\non GitHub\n\n\n\n\nFill in Q1.34\n\ngdp\nyear\ngdpval\ncountry\n–country\n\n\n\nGDP |&gt;  \n  select(country = starts_with(\"Income\"), everything()) |&gt; \n       pivot_longer(cols = Q1, \n                    names_to = Q2, \n                    values_to = Q3)\n\n\n\nFill in Q2.35\n\ngdp\nyear\ngdpval\ncountry\n–country\n\n\n\nGDP |&gt;  \n  select(country = starts_with(\"Income\"), everything()) |&gt; \n       pivot_longer(cols = Q1, \n                    names_to = Q2, \n                    values_to = Q3)\n\n\n\nFill in Q3.36\n\ngdp\nyear\ngdpval\ncountry\n–country\n\n\n\nGDP |&gt;  \n  select(country = starts_with(\"Income\"), everything()) |&gt; \n       pivot_longer(cols = Q1, \n                    names_to = Q2, \n                    values_to = Q3)\n\n\n\nYou’d like to use the data to make a plot with Midterm score on the x-axis and Final score on the y-axis using the following ggplot() code. Which data frame should you use?37\n\nuse raw data\nuse pivot_wider() on raw data\nuse pivot_longer() on raw data\n\n\n\nggplot(___, aes(x = ___, y = ___, color = ___)) + \n  geom_point()\n\n\n\n# A tibble: 4 × 3\n  student test    score\n  &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;\n1 Alice   Midterm    85\n2 Alice   Final      90\n3 Bob     Midterm    78\n4 Bob     Final      82\n\n\n\n\ngrades |&gt; \n  pivot_wider(names_from = test, values_from = score)\n\n# A tibble: 2 × 3\n  student Midterm Final\n  &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;\n1 Alice        85    90\n2 Bob          78    82\n\n\n\n\nResponse to stimulus (in ms) after only 3 hrs of sleep for 9 days. You want to make a plot with the subject’s reaction time (y-axis) vs the number of days of sleep restriction (x-axis) using the following ggplot() code. Which data frame should you use?38\n\nuse raw data\nuse pivot_wider() on raw data\nuse pivot_longer() on raw data\n\n\n\nggplot(___, aes(x = ___, y = ___, color = ___)) + \n  geom_line()\n\n\n\n# A tibble: 18 × 11\n   Subject day_0 day_1 day_2 day_3 day_4 day_5 day_6 day_7 day_8 day_9\n     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n 1     308  250.  259.  251.  321.  357.  415.  382.  290.  431.  466.\n 2     309  223.  205.  203.  205.  208.  216.  214.  218.  224.  237.\n 3     310  199.  194.  234.  233.  229.  220.  235.  256.  261.  248.\n 4     330  322.  300.  284.  285.  286.  298.  280.  318.  305.  354.\n 5     331  288.  285   302.  320.  316.  293.  290.  335.  294.  372.\n 6     332  235.  243.  273.  310.  317.  310   454.  347.  330.  254.\n 7     333  284.  290.  277.  300.  297.  338.  332.  349.  333.  362.\n 8     334  265.  276.  243.  255.  279.  284.  306.  332.  336.  377.\n 9     335  242.  274.  254.  271.  251.  255.  245.  235.  236.  237.\n10     337  312.  314.  292.  346.  366.  392.  404.  417.  456.  459.\n11     349  236.  230.  239.  255.  251.  270.  282.  308.  336.  352.\n12     350  256.  243.  256.  256.  269.  330.  379.  363.  394.  389.\n13     351  251.  300.  270.  281.  272.  305.  288.  267.  322.  348.\n14     352  222.  298.  327.  347.  349.  353.  354.  360.  376.  389.\n15     369  272.  268.  257.  278.  315.  317.  298.  348.  340.  367.\n16     370  225.  235.  239.  240.  268.  344.  281.  348.  365.  372.\n17     371  270.  272.  278.  282.  279.  285.  259.  305.  351.  369.\n18     372  269.  273.  298.  311.  287.  330.  334.  343.  369.  364.\n\n\n\n\nsleep_long &lt;- sleep_wide |&gt;\n  pivot_longer(cols = -Subject,\n               names_to = \"day\",\n               names_prefix = \"day_\",\n               values_to = \"reaction_time\")\n\nsleep_long\n\n# A tibble: 180 × 3\n   Subject day   reaction_time\n     &lt;dbl&gt; &lt;chr&gt;         &lt;dbl&gt;\n 1     308 0              250.\n 2     308 1              259.\n 3     308 2              251.\n 4     308 3              321.\n 5     308 4              357.\n 6     308 5              415.\n 7     308 6              382.\n 8     308 7              290.\n 9     308 8              431.\n10     308 9              466.\n# ℹ 170 more rows\n\n\n\n\nConsider band members from the Beatles and the Rolling Stones. Who is removed in a right_join()?39\n\n\nMick\nJohn\nPaul\nKeith\nImpossible to know\n\n\nband_members |&gt; \n  right_join(band_instruments, by = \"name\")\n\n\n\nConsider band members from the Beatles and the Rolling Stones. Which variables are removed in a right_join()?40\n\n\nname\nband\nplays\nnone of them \n\n\n\n\nband_members\n\n# A tibble: 3 × 2\n  name  band   \n  &lt;chr&gt; &lt;chr&gt;  \n1 Mick  Stones \n2 John  Beatles\n3 Paul  Beatles\n\n\n\n\nband_instruments\n\n# A tibble: 3 × 2\n  name  plays \n  &lt;chr&gt; &lt;chr&gt; \n1 John  guitar\n2 Paul  bass  \n3 Keith guitar\n\n\n\n\n\nband_members |&gt; \n  right_join(band_instruments, by = \"name\")\n\n\n\nWhat happens to Mick’s plays variable in a full_join()?41\n\n\nMick is removed\nchanges to guitar\nchanges to bass\nNA\nNULL \n\n\n\n\nband_members\n\n# A tibble: 3 × 2\n  name  band   \n  &lt;chr&gt; &lt;chr&gt;  \n1 Mick  Stones \n2 John  Beatles\n3 Paul  Beatles\n\n\n\n\nband_instruments\n\n# A tibble: 3 × 2\n  name  plays \n  &lt;chr&gt; &lt;chr&gt; \n1 John  guitar\n2 Paul  bass  \n3 Keith guitar\n\n\n\n\n\nband_members |&gt; \n  full_join(band_instruments, by = \"name\")\n\n\n\nWhat is the output of the following R code?42\n\n\n“a 1” “b 2” “c 3”\n“a, 1” “b, 2” “c, 3”\n“a1” “b2” “c3”\n“a b c” “1 2 3”\n“abc” “123”\n\n\nstr_c(letters = c(\"a\", \"b\", \"c\"),\n      numbers = c(1, 2, 3))\n\n\n\nWhat is the output of the following R code?43\n\n\n“a 1” “b 2” “c 3”\n“a, 1” “b, 2” “c, 3”\n“a1” “b2” “c3”\n“a b c” “1 2 3”\n“abc” “123”\n\n\nstr_c(letters = c(\"a\", \"b\", \"c\"),\n      numbers = c(1, 2, 3), sep = \" \")\n\n\n\nWhat is the output of the following R code?44\n\n“abc” “hifg”\n“ab” “hifg”\n“ab” “ifg”\n“abc” “ifg”\n\n\n\nx &lt;- c(\"abcde\", \"ghifgh\")\nstr_sub(x, start = c(1, 3), end = c(2, 5))\n\n\n\nWhat is the output of the following R code?45\n\n\n“one -pple” “two p-ars” “three bananas”\n“on- -ppl-” “two p–rs” “thr– b-n-n-s”\n“on- apple” “two p-ars” “thr-e bananas”\n\n\nfruits &lt;- c(\"one apple\", \"two pears\", \"three bananas\")\nstr_replace(fruits, c(\"a\", \"e\", \"i\"), \"-\")\n\n\n\nWhat is the output of the following R code?46\n\n\nTRUE\nTRUE TRUE TRUE TRUE\nTRUE FALSE FALSE FALSE\nFALSE\n\n\nfruit &lt;- c(\"apple\", \"banana\", \"pear\", \"pineapple\")\nstr_detect(fruit, \"a\")\n\n\n\nIf unspecified, the levels of a factor variable will be ordered:47\n\nin the order that they first show up in the dataset\nfrom shortest to longest in terms of characters\nfrom longest to shortest in terms of characters\nalphabetically, from a to z\nalphabetically, from z to a\n\n\n\n\nWhat does this code do?48\n\nNew variable which is the average of the calories\nNew variable which is the average of the type\nChanges the values of type\nChanges the levels of type\nChanges the order of the levels of type\n\n\n\nstarbucks |&gt; \n  mutate(type = fct_reorder(type, calories, .fun = \"mean\", .desc = TRUE))\n\n\n\nWhat does fct_recode() do here?49\n\nCreates a new variable\nChanges the values of x\nChanges the levels of x\nChanges the order of the levels of x\nSome of the above\nAll of the above\n\n\n\nx &lt;- factor(c(\"apple\", \"bear\", \"dear\", \"banana\"))\nx\nfct_recode(x, fruit = \"apple\", fruit = \"banana\")\n\n\n\nWhat is January 31 + one month?50\n\nFebruary 31\nMarch 3\nFebruary 28 (assuming no leap year)\nI don’t want to answer the question\n\n\n\n\nWhat is the difference between code lines 3 and 4 below?51\n\nsame thing\ndifferent months\ndifferent output formatting\ndifferent input\ndifferent calculation\n\n\n\nlibrary(lubridate)\ntoday &lt;- ymd(\"2025-02-19\")\nmonth(today)\nmonth(today, label = TRUE)\n\n\n\nWhat does this number mean?52\n\nToday is the 8th day of the month.\nToday is the 8th day of the year.\nToday is the 8th week of the month.\nToday is the 8th week of the year.\n\n\n\ntoday &lt;- ymd(\"2025-02-19\")\nweek(today)\n\n[1] 8\n\n\n\n\nWhat is the difference in these two functions?53\n\n\nDay of month and day of year.\nDay of month and day of week.\nDay of week and day of year.\nDay of weekend and day of month.\n\n\nmday(today)\n\n[1] 19\n\nyday(today)\n\n[1] 50\n\n\n\n\nmday(today)\n\n[1] 19\n\nyday(today)\n\n[1] 50\n\n\n\n\nWhat is the result of the code?54\n\nTRUE\nFALSE\n“2025-09-01”\n“2025-02-19”\n\n\n\ntoday &gt; ymd(\"2025-09-01\")\n\n\n\nstr_subset(\"q[^u]\", very.large.word.list) would not match which of the following?55\n\nIraqi\nIraqian\nIraq\nzaqqun (tree that “springs out of the bottom of Hell”, in the Quran)\nQantas (the Australian airline)\n\n\n\n\nWhich of the following regex would match to both “grey” and “gray”?56\n\n“gr[ae]y”\n“gr(a|e)y”\n“gray | grey”\n“gr[a|e]y”\nsome / all of the above – which ones?\n\n\n\n\nWhat will the result be for the following code?57\n\n10\n1\n0\nNA\n\n\n\nstr_extract(\"My dog is 10 years old\", \"\\\\d\")\n\n\n\nWhat will the result be for the following code?58\n\n10\n1\n0\nNA\n\n\n\nstr_extract(\"My dog is 10 years old\", \"\\\\d+\")\n\n\n\nWhat will the result be for the following code?59\n\n.\nEpisode 2: The pie whisperer. (4 August 2015)\nEpisode\nE\n\n\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \".\")\n\n\n\nWhat will the result be for the following code?60\n\n.\nEpisode 2: The pie whisperer. (4 August 2015)\nEpisode\nE\n\n\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \".+\")\n\n\n\nWhat will the result be for the following code?61\n\n.\nEpisode 2: The pie whisperer. (4 August 2015)\nEpisode\nE\n\n\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \"\\\\.\")\n\n\n\nWhat is the difference between the output for the two regular expressions below?62\n\nThey give the same result.\nThe first is not case sensitive.\nThe second allow for all the variants.\nThe first includes Jane.\n\n\n\nstring &lt;- c(\"Mary\", \"Mar\", \"Janet\", \"jane\", \"Susan\", \"Sue\")\nstr_extract(string, \"\\\\bMary|Jane|Sue\\\\b\")\nstr_extract(string, \"\\\\b(Mary|Jane|Sue)\\\\b\")\n\n\n\nHow can I pull out just the numerical information in “$47”?63\n\n\"(?&lt;=\\\\$)\\\\d\"\n\"(?&lt;=\\\\$)\\\\d+\"\n\"\\\\d(?=\\\\$)\"\n\"\\\\d+(?=\\\\$)\"\n\n\n\n\nYou want to know all the types of pies in the text strings. They are written as, for example “apple pie”.64\n\n\"\\\\w+(?!pie)\"\n\"\\\\w+(?! pie)\"\n\"\\\\w+(?=pie)\"\n\"\\\\w+(?= pie)\"\n\n\n\n\nstr_extract(c(\"apple pie\", \"chocolate pie\", \"peach pie\"), \"\\\\w+(?= pie)\")\n\n[1] \"apple\"     \"chocolate\" \"peach\"    \n\n\n\nstr_extract(c(\"apple pie\", \"chocolate pie\", \"peach pie\"), \"\\\\w+(?=pie)\")\n\n[1] NA NA NA\n\n\n\n\nWe say that lookarounds are “zero-lenghth assertions”. What does that mean?65\n\nwe return the string in the lookaround\nwe replace the string in the lookaround\nwe return the string at the lookaround\nwe replace the string at the lookaround\n\n\n\n\nWhat will happen when I run the following code?66\n\n0\n3\n9\nNA\nerror (code will fail)\n\n\n\nmy_power &lt;- function(x, y){\n  return(x^y)\n}\nmy_power(3)\n\n\n\nWhat will happen when I run the following code?67\n\n0\n3\n9\nNA\nerror (code will fail)\n\n\n\nmy_power &lt;- function(x, y = 2){\n  return(x^y)\n}\nmy_power(3)\n\n\n\nWhat will happen when I run the following code?68\n\n4\n8\n9\nNA\nerror (code will fail)\n\n\n\nmy_power &lt;- function(x, y = 2){\n  return(x^y)\n}\nmy_power(2, 3)\n\n\n\nWhat will happen when I run the following code?69\n\n4\n8\n9\nNA\nerror (code will fail)\n\n\n\nmy_power &lt;- function(x = 2, y = 3){\n  return(x^y)\n}\nmy_power( )\n\n\n\nConsider the addTen() function. The following output is a result of which map_*() call?70\n\n\nmap(c(1,4,7), addTen)\nmap_dbl(c(1,4,7), addTen)\nmap_chr(c(1,4,7), addTen)\nmap_lgl(c(1,4,7), addTen)\n\n\naddTen &lt;- function(wow) {\n  return(wow + 10)\n}\n\n\n\n[1] \"11.000000\" \"14.000000\" \"17.000000\"\n\n\n\n\nWhich of the following input is allowed?71\n\nmap(c(1, 4, 7), addTen)\nmap(list(1, 4, 7), addTen)\nmap(data.frame(a=1, b=4, c=7), addTen)\nsome of the above\nall of the above\n\n\n\n\nWhich of the following produces a different output?72\n\nmap(c(1, 4, 7), addTen)\nmap(c(1, 4, 7), ~addTen(.x))\nmap(c(1, 4, 7), ~addTen)\nmap(c(1, 4, 7), function(hi) (hi + 10))\nmap(c(1, 4, 7), ~(.x + 10))\n\n\n\n\nWhat will the following code output?73\n\n3 random normals\n6 random normals\n18 random normals\n\n\n\ninput\n\n# A tibble: 3 × 3\n      n  mean    sd\n  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1     1     1     3\n2     2     3     1\n3     3    47    10\n\n\n\ninput |&gt; \n  pmap(rnorm)\n\n\n\nWhat is the following error telling me?74\n\n\nI haven’t loaded lubridate.\nI can’t add months and days.\nThere is no object called jan31.\nmonths() is not a function.\nThere is no error\n\n\njan31 + months(0:11) + days(31)\n#&gt; Error in eval(expr, envir, enclos): object 'jan31' not found\n\n\n\nWhat is the following error telling me?75\n\n\nI haven’t loaded lubridate.\nI can’t add months and days.\nThere is no object called jan31.\nymd() is not a function.\nThere is no error.\n\n\n  jan31 &lt;- ymd(\"2021-01-31\")\n#&gt; Error in ymd(\"2021-01-31\"): could not find function \"ymd\"\n  jan31 + months(0:11) + days(31)\n#&gt; Error in eval(expr, envir, enclos): object 'jan31' not found\n\n\n\nWhat is the following error telling me?76\n\n\nI haven’t loaded lubridate.\nI can’t add months and days.\nThere is no object called jan31.\nymd() is not a function.\nThere is no error.\n\n\n  library(lubridate)\n#&gt; \n#&gt; Attaching package: 'lubridate'\n#&gt; The following objects are masked from 'package:base':\n#&gt; \n#&gt;     date, intersect, setdiff, union\n  jan31 &lt;- ymd(\"2021-01-31\")\n  jan31 + months(0:11) + days(31)\n#&gt;  [1] \"2021-03-03\" NA           \"2021-05-01\" NA           \"2021-07-01\"\n#&gt;  [6] NA           \"2021-08-31\" \"2021-10-01\" NA           \"2021-12-01\"\n#&gt; [11] NA           \"2022-01-31\"\n\n\n\nRank these in order of bad to best.77\n\n1, 2, 3\n1, 3, 2\n2, 1, 3\n3, 2, 1\n3, 1, 2\n\n\n\n# 1\nday_one\nday_1\n\n# 2\nDayOne\ndayone\n\n# 3\nT &lt;- FALSE\nc &lt;- 10\nmean &lt;- function(x) sum(x)\n\n\n\nWhich is better?78\n\n1\n2\n\n\n\n# 1\nmean(x, na.rm = TRUE)\n\n# 2\nmean (x, na.rm = TRUE)\nmean( x, na.rm = TRUE )\n\n\n\nWhich is better?79\n\n1\n2\n\n\n\n# 1\nheight&lt;-feet*12+inches\nmean(x, na.rm=TRUE)\n\n# 2\nheight &lt;- (feet * 12) + inches\nmean(x, na.rm = TRUE)\n\n\n\nWhich is better?80\n\n1\n2\n\n\n\n# 1\ndo_something_very_complicated(\n  something = \"that\",\n  requires = many,\n  arguments = \"some of which may be long\"\n)\n\n# 2\ndo_something_very_complicated(\"that\", requires, many, arguments,\n                              \"some of which may be long\"\n                              )\n\n\n\nWhich is better?81\n\n1\n2\n\n\n\n# 1\niris |&gt;\n  summarise(Sepal.Length = mean(Sepal.Length), Sepal.Width = mean(Sepal.Width), .by = Species)\n\n# 2\niris |&gt;\n  summarise(\n    Sepal.Length = mean(Sepal.Length),\n    Sepal.Width = mean(Sepal.Width),\n    .by = Species\n  )\n\n\n\nWhich one do you like best?82\n\n1\n2\n3\n\n\n\n# 1\nx |&gt;\n  semi_join(y |&gt; filter(is_valid))\n\n# 2\nx |&gt;\n  select(a, b, w) |&gt;\n  left_join(y |&gt; select(a, b, v), join_by(a, b))\n\n# 3\nx_join &lt;- x |&gt; select(a, b, w)\ny_join &lt;- y |&gt; select(a, b, v)\nleft_join(x_join, y_join, join_by(a, b))\n\n\n\nIn R the ifelse() function takes the arguments:83\n\n\nquestion, yes, no\nquestion, no, yes\nstatement, yes, no\nstatement, no, yes\noption1, option2, option3\n\n\n\nWhat is the output of the following:84\n\n“cat”, 30, “cat”, “cat”, 6\n“cat”, “30”, “cat”, “cat”, “6”\n1, “cat”, 5, “cat”, “cat”\n1, “cat”, 5, NA, “cat”\n“1”, “cat”, “5”, NA, “cat”\n\n\n\ndata &lt;- c(1, 30, 5, NA, 6)\n\nifelse(data &gt; 5, \"cat\", data)\n\n\n\nWhere can I get feedback on my HW assignments / quizzes?85\n\nprof will return paper versions\non Gradescope\non Canvas\non GitHub\n\n\n\n\nWhere can I get feedback on my projects?86\n\nprof will return paper versions\non Gradescope\non Canvas\non GitHub\n\n\n\n\nIn R, the set.seed() function87\n\n\nmakes your computations go faster\nkeeps track of your computation time\nprovides an important parameter\nrepeats the function\nmakes your results reproducible\n\n\n\nWhat could the following code give us?88\n\n\n[1] “a” “b” “c” “d” “e” “f” “g” “h” “i” “j”\n[1] “i” “b” “g” “d” “a”\n[1] “j” “g” “f” “i” “f”\n[1] “f” “h” “i” “e” “g” “d” “c” “j” “b” “a”\n[1] “e” “j” “e” “b” “e” “c” “f” “a” “e” “a”\n\n\n# shuffle\nset.seed(47)\nalph &lt;- letters[1:10]\nsample(alph, 10, replace = FALSE)\n\n\n\nWhat could the following code give us?89\n\n\n[1] “a” “b” “c” “d” “e” “f” “g” “h” “i” “j”\n[1] “i” “b” “g” “d” “a”\n[1] “j” “g” “f” “i” “f”\n[1] “f” “h” “i” “e” “g” “d” “c” “j” “b” “a”\n[1] “e” “j” “e” “b” “e” “c” “f” “a” “e” “a”\n\n\n# resample\nset.seed(47)\nalph &lt;- letters[1:10]\nsample(alph, 10, replace = TRUE)\n\n\n\nWhat could the following code give us?90\n\n\n[1] “a” “b” “c” “d” “e” “f” “g” “h” “i” “j”\n[1] “i” “b” “g” “d” “a”\n[1] “j” “g” “f” “i” “f”\n[1] “f” “h” “i” “e” “g” “d” “c” “j” “b” “a”\n[1] “e” “j” “e” “b” “e” “c” “f” “a” “e” “a”\n\n\n# sample from an infinite population\nset.seed(47)\nalph &lt;- letters[1:10]\nsample(alph, 10, replace = TRUE)\n\n\n\nWhat could the following code give us?91\n\n\n[1] “a” “b” “c” “d” “e” “f” “g” “h” “i” “j”\n[1] “i” “b” “g” “d” “a”\n[1] “j” “g” “f” “i” “f”\n[1] “f” “h” “i” “e” “g” “d” “c” “j” “b” “a”\n[1] “e” “j” “e” “b” “e” “c” “f” “a” “e” “a”\n\n\n# sample from  finite population\nset.seed(47)\nalph &lt;- letters[1:10]\nsample(alph, 10, replace = FALSE)\n\n\n\nWhat does the following give us?92\n\n\nthe number of hats that match\nthe number of hats that don’t match\nthe proportion of hats that match\nthe proportion of hats that don’t match\nwhether or not at least one hat matches\n\n\nsum(hats == random_hats)\n\n[1] 2\n\n\n\n\nWhat does the following give us?93\n\n\nthe number of hats that match\nthe number of hats that don’t match\nthe proportion of hats that match\nthe proportion of hats that don’t match\nwhether or not at least one hat matches\n\n\nmean(hats == random_hats)\n\n[1] 0.2\n\n\n\n\nWhat does the following give us?94\n\n\nthe number of hats that match\nthe number of hats that don’t match\nthe proportion of hats that match\nthe proportion of hats that don’t match\nwhether or not at least one hat matches\n\n\nsum(hats == random_hats) &gt; 0\n\n[1] TRUE\n\n\n\n\nWhat is the magic number?95\n\n\n10\n10, the number of overall hats\n10, the number of hats we select\n0\n0, the number of matching hats\n\n\nhats &lt;- c(1:10)\nrandom_hats &lt;- sample(hats, size = 10, replace = FALSE)\nsum(hats == random_hats) &gt; 0\n\n\n\nIn the SAT example, we ran a single iteration and found that the false positive and false negative rates were problematic. What should we do next?96\n\n\nRepeat for many iterations.\nChange the initial settings.\nBring this analysis to the people with power.\nAlways use two models.\nAlways use only one model.\n\n\n\nIn the SAT example, what types of things might we vary?97\n\n\nproportion to red vs blue\nhow variable the values are: N(talent, 15)\ndifferent number of times blues get to take the test\nhow close grades and SAT are to talent (bias?)\n\n\n\nWhat would you want to know from the investment allocation plots?98\n\nWhat is the average rate of return?\nWhat is the maximum rate of return?\nWhat is the minimum rate of return?\nHow often do I lose money?\n\n\n\n\nIf 16 infants with no genuine preference choose 16 toys, what is the most likely number of “helping” toys that will be chosen?99\n\n\n4\n7\n8\n9\n10\n\n\n\nHow likely is it that exactly 8 helpers will be chosen (if there is no preference)?100\n\n\n0-15%\n16-30%\n31-49%\n50%\n51-100%\n\n\n\nWhat if we flipped a coin 160 times? What percent of the time will the simulation flip exactly 80 heads?101\n\n\n0-15%\n16-30%\n31-49%\n50%\n51-100%\n\n\n\nIs our actual result of 14 (under the coin model)…102\n\n\nvery surprising?\nsomewhat surprising?\nnot very surprising?\n\n\n\nHypothesis: the number of hours that grade-school children spend doing homework predicts their future success on standardized tests.103\n\nnull, one sided\nnull, two sided\nalternative, one sided\nalternative, two sided\n\n\n\n\nHypothesis: king cheetahs on average run the same speed as standard spotted cheetahs.104\n\nnull, one sided\nnull, two sided\nalternative, one sided\nalternative, two sided\n\n\n\n\nHypothesis: the mean length of African elephant tusks has changed over the last 100 years.105\n\nnull, one sided\nnull, two sided\nalternative, one sided\nalternative, two sided\n\n\n\n\nHypothesis: the risk of facial clefts is equal for babies born to mothers who take folic acid supplements compared with those from mothers who do not.106\n\nnull, one sided\nnull, two sided\nalternative, one sided\nalternative, two sided\n\n\n\n\nHypothesis: caffeine intake during pregnancy affects mean birth weight.107\n\nnull, one sided\nnull, two sided\nalternative, one sided\nalternative, two sided\n\n\n\n\nIn this class, the word parameter means:108\n\nThe values in a model\nNumbers that need to be tuned\nA number which is calculated from a sample of data.\nA number which (is almost always unknown and) describes a population.\n\n\n\n\nTo run a two-sample permutation test, should you permute the variable with or without replacement?109\n\nwith replacement (replace = TRUE)\nwithout replacement (replace = FALSE)\n\n\n\n\nThe histogram is a null sampling distribution for the difference in two means. The red line is the observed value from the data. To compute the p-value, which area should be considered?110\n\n\n\n\nThe area to the left.\nThe area to the right.\nDouble the area to the left.\nIt depends.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nThe histogram is a null sampling distribution for the difference in two means. The red line is the observed value from the data. The alternative hypothesis is \\(H_A: \\mu_1 - \\mu_2 \\ne 0\\). To compute the p-value, which area should be considered?111\n\n\n\n\nThe area to the left.\nThe area to the right.\nDouble the area to the left.\nIt depends.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nWhat is misleading here?112\n\nVery low data-to-ink ratio?113\nNon-intuitive sorting?\nWrong / changing scales?\n1-dim information in 2-D or 3-d?\nInconsistent labeling\n\n\n\n\n\n\n\nReproduction of a data graphic reporting the number of gun deaths in Florida over time. The original image was published by Reuters. [@MDSR]\n\n\n\n\n\n\nWhat is misleading here?114\n\nVery low data-to-ink ratio?115\nNon-intuitive sorting?\nWrong / changing scales?\n1-dim information in 2-D or 3-d?\nInconsistent labeling\n\n\n\n\n\n\n\nA tweet by National Review on December 14, 2015 showing the change in global temperature over time. [@MDSR]\n\n\n\n\n\n\nWhat is misleading here?116\n\nVery low data-to-ink ratio?117\nNon-intuitive sorting?\nWrong / changing scales?\n1-dim information in 2-D or 3-d?\nInconsistent labeling\n\n\n\n\n\n\n\nMay 10, 2020, Georgia Department of Health, COVID-19 cases for 5 counties across time. https://dph.georgia.gov/covid-19-daily-status-report\n\n\n\n\n\n\nWhat is misleading here?118\n\nVery low data-to-ink ratio?119\nNon-intuitive sorting?\nWrong / changing scales?\n1-dim information in 2-D or 3-d?\nInconsistent labeling\n\n\n\n\n\n\n\n\n\nJuly 2, 2020, Georgia Department of Health, COVID-19 cases per 100K\n\n\n\n\n\n\n\n\n\n\nJuly 17, 2020, https://dph.georgia.gov/covid-19-daily-status-report\n\n\n\n\n\n\n\n\nHow often do you read The Student Life?120\n\nEvery day\n3-5 times a week\nOnce a week\nRarely\n\n\n\n\nWhat do you think is the most common word in the titles of the Student Life opinion articles?121\n\nstop\nhealth\nPomona\nCMC\nstudents\n\n\n\n\nHow can you tell the difference between an element and an attribute?122\n\nthe elements have .\nthe elements have #\nthe elements have &lt; &gt;\nthe elements have [ ]\n\n\n\n\nHow do I find all the instances of the &lt;img&gt; (image) element?123\n\nuse selector: &lt;img&gt;\nuse selector: .img\nuse selector: #img\nuse selector: [img]\nuse selector: img\n\n\n\n\nHow do I find all the instances of the href= (URL) attribute?124\n\nuse selector: &lt;href&gt;\nuse selector: href\nuse selector: #href\nuse selector: [href]\nuse selector: href\n\n\n\n\nWhat is the difference between an attribute and an element?125\n\n\nan attribute describes an element\nan element describes an attribute\nan attribute is the parent of an element\nan element is the parent of an attribute\n\n\n\nWhat is a SQL server?126\n\n\nA relational database management system.\nA software program whose main purpose is to store and retrieve data.\nA highly secure server that does not allow any database file manipulation during execution.\nAll of the above.\n\n\n\nWhen was SQL created?127\n\n1960s\n1970s\n1980s\n1990s\n2000s\n\n\n\n\nWhat type of databases is SQL designed for?128\n\n\nhierarchical database management systems.\nnetwork database management systems.\nobject-oriented database management systems.\nrelational database management systems.\n\n\n\nWhich is bigger:129\n\ncomputer’s hard drive / storage\ncomputer’s memory / RAM\n\n\n\n\nWhere are each stored?130\n\n\nSQL tbl and R tibble both in storage\nSQL tbl and R tibble both in memory\nSQL tbl in storage and R tibble in memory\nSQL tbl in memory and R tibble in storage\n\n\n\nWhich SQL clause is used to extract data from a database?131\n\n\nOPEN\nEXTRACT\nSELECT\nGET\n\n\n\nWith SQL, how to you retrieve a column named “FirstName” from a table named “Persons”?132\n\n\nSELECT Persons.FirstName\nEXTRACT FIRSTNAME FROM Persons\nSELECT FirstName FROM Persons\nSELECT “FirstName” FROM “Persons”\n\n\n\nWith SQL, how do you select all the columns from a table named “Persons”?133\n\n\nSELECT Persons\nSELECT * FROM Persons\nSELECT [all] FROM Persons\nSELECT *.Persons\n\n\n\nWith SQL, how can you return the number of records in the “Persons” table?134\n\n\nSELECT COLUMNS(*) FROM Persons\nSELECT COUNT(*) FROM Persons\nSELECT NO(*) FROM Persons\nSELECT LEN(*) FROM Persons\n\n\n\nWith SQL, how do you select all the records from a table named “Persons” where the value of the column “FirstName” is “Peter”?135\n\n\nSELECT * FROM Persons WHERE FirstName &lt;&gt; ‘Peter’\nSELECT * FROM Persons WHERE FirstName = ‘Peter’\nSELECT * FROM Persons WHERE FirstName == ‘Peter’\nSELECT * FROM Persons WHERE FirstName LIKE ‘Peter’\nSELECT [all] FROM Persons WHERE FirstName = ‘Peter’\n\n\n\nWith SQL, how do you select all the records from a table named “Persons” where the “FirstName” is “Peter” and the “LastName” is “Jackson”?136\n\n\nSELECT FirstName = ‘Peter’, LastName = ‘Jackson’ FROM Persons\nSELECT * FROM Persons WHERE FirstName = Peter’ & LastName = Jackson’\nSELECT * FROM Persons WHERE FirstName = ‘Peter’ AND LastName = ‘Jackson’\nSELECT * FROM Persons WHERE FirstName = Peter’ | LastName = Jackson’\n\n\n\nWhich operator selects values within a range?137\n\nBEWTEEN\nWITHIN\nRANGE\n\n\n\n\nWith SQL, how do you select all the records from a table named “Persons” where the “LastName” is alphabetically between (and including) “Hansen” and “Pettersen”?138\n\nSELECT LastName &gt; ‘Hansen’ AND LastName &lt; ‘Pettersen’ FROM Persons\nSELECT * FROM Persons WHERE LastName BETWEEN ‘Hansen’ AND ‘Pettersen’\nSELECT * FROM Persons WHERE LastName &gt; ‘Hansen’ AND LastName &lt; ‘Pettersen’\n\n\n\n\nWhich SQL statement returns only different values?139\n\nSELECT UNIQUE\nSELECT DISTINCT\nSELECT DIFFERENT\n\n\n\n\nWhich SQL keyword is used to sort the result-set?140\n\nORDER BY\nORDER\nSORT\nSORT BY\n\n\n\n\nWith SQL, how can you return all the records from a table named “Persons” sorted descending by “FirstName”?141\n\nSELECT * FROM Persons ORDER FirstName DESC\nSELECT * FROM Persons SORT ‘FirstName’ DESC\nSELECT * FROM Persons ORDER BY FirstName DESC\nSELECT * FROM Persons SORT BY ‘FirstName’ DESC\n\n\n\n\nThe OR operator displays a record if ANY conditions listed are true. The AND operator displays a record if ALL of the conditions listed are true.142\n\nTRUE\nFALSE\n\n\n\n\nIn order to SELECT the records with foods that are either green or yellow fruit:143\n\n… WHERE type = ‘fruit’ AND color = ‘yellow’ OR color = ‘green’\n\n… WHERE (type = ‘fruit’ AND color = ‘yellow’) OR color = ‘green’\n\n… WHERE type = ‘fruit’ AND (color = ‘yellow’ OR color = ‘green’)\n\n… WHERE type = ‘fruit’ AND color = ‘yellow’ AND color = ‘green’\n\n… WHERE type = ‘fruit’ AND (color = ‘yellow’ AND color = ‘green’)\n\n\n\n\nWhat is the purpose of a JOIN?144\n\nit filters the rows returned by the SELECT statement.\nit specifies the columns to be retrieved.\nit combines rows from two or more tables based on a related column.\nit orders the results in ascending or descending order.\n\n\n\n\nWhat is the purpose of the UNION operator in SQL?145\n\nit combines the results of two or more SELECT statements.\nit performs a pattern match on a string.\nit retrieves the maximum value in a column.\nit filters the rows returned by the SELECT statement.\n\n\n\n\nWhat is the purpose of the INNER JOIN in SQL?146\n\nit retrieves the maximum value in a column.\nit combines rows from two or more tables based on a related column.\nit filters the rows returned by the SELECT statement.\nit performs a pattern match on a string.\n\n\n\n\nWhat is the purpose of the LEFT JOIN in SQL?147\n\nit combines rows from two or more tables based on a related column.\nit retrieves the maximum value in a column.\nit filters the rows returned by the SELECT statement.\nit performs a pattern match on a string.\n\n\n\n\nRIGHT JOIN keeps all the rows in …?148\n\nthe first table.\nthe second table.\nboth tables.\nneither table\n\n\n\n\nWho is removed in a RIGHT JOIN?149\n\nMick\nJohn\nPaul\nKeith\n\n\n\n\n\n\n\n\n\n\n\n\n\nWhich variable(s) are removed in a RIGHT JOIN?150\n\nname\nband\nplays\nnone of them\n\n\n\n\n\n\n\n\n\n\n\n\n\nIn SQL, what happens to Mick’s “plays” variables in a FULL JOIN?151\n\nMick is removed\nguitar\nbass\nNA\nNULL\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nWith SQL, how do you select all the records from a table named “Persons” where the value of the column “FirstName” starts with an “a”?152\n\nSELECT * FROM Persons WHERE FirstName = ’a.*’\nSELECT * FROM Persons WHERE FirstName = ’a*’\nSELECT * FROM Persons WHERE FirstName REGEXP ’a.*’\nSELECT * FROM Persons WHERE FirstName REGEXP ’a*’\nSELECT * FROM Persons WHERE FirstName REGEXP ’(?i)a.*’\n\n\n\n\nWhat is the main way to absolutely recognize a record within a database?153\n\nForeign key\nPrimary key\nUnique key\nNatural key\nAlternate key\n\n\n\n\nWhat does a foreign key do?154\n\nDirectly identifies another table\nDirectly identifies another column\nGives access to another entire database\nTranslates the database into another language\n\n\n\n\nWhich of these would likely be used as a foreign key between a table on student enrollment and student grades?155\n\ngrades\ntuition\nstudent_name\nstudent_hometown\n\n\n\n\nFor the student records (for two tables: enrollment and grades), which is the most likely combination?156\n\nname as primary key to both\nname as foreign to both\nname as primary in enrollment and foreign in grades\nname as foreign in enrollment and primary in grades\n\n\n\n\nWhich of the following is the primary function used to create a Shiny app?157\n\nshinyApp()\ncreateApp()\nrunApp()\nstartShinyApp()\n\n\n\n\nWhich of the following Shiny components contains the code for handling user inputs and generating outputs?158\n\nui\nserver\nrunApp()\nshinyApp()\n\n\n\n\nWhich of the following Shiny UI elements is used to allow users to select a single option from a list of choices?159\n\n\nselectInput()\nradioButtons()\ncheckboxGroupInput()\ntextInput()\n\n\n\nIn Shiny, what is the purpose of the renderText() function?160\n\n\nTo display a plot as text\nTo generate text output based on reactive inputs\nTo create a text input field\nTo render HTML elements\n\n\n\nWhat does the ui component in a Shiny app represent?161\n\n\nThe logic of the application\nThe server-side calculations\nThe user interface elements\nThe global settings for the app\n\n\n\nWhich Shiny function is used to handle reactive expressions in the server function?162\n\n\nreactive()\nrender()\nobserve()\nupdateInput()\n\n\n\nWhat is the default output type for renderPlot() in Shiny?163\n\nplotly chart\nggplot2 plot\nbase R plot\nHTML table\n\n\n\n\nWhich of the following is the correct way to create a slider input in Shiny?164\n\nsliderInput(\"slider\", \"Slider\", min = 1, max = 100, value = 50)\ninputSlider(\"slider\", min = 1, max = 100)\nsliderControl(\"slider\", 1, 100)\ninput_slider(\"slider\", 1, 100)"
  },
  {
    "objectID": "clicker_slides.html",
    "href": "clicker_slides.html",
    "title": "Clicker Questions",
    "section": "",
    "text": "Clicker Questions\nto go with Modern Data Science wi\n\n\n\n\nReusehttps://creativecommons.org/licenses/by/4.0/"
  },
  {
    "objectID": "project.html",
    "href": "project.html",
    "title": "Project",
    "section": "",
    "text": "Artwork by @allison_horst.\n\n\n\n\nThroughout the semester, you will complete a series of mini-projects. The first project is the creation of a website connected to your GitHub account. Subsequent projects will be posted onto the website you create.\nEach individual project has instructions that are given separately, and will be graded according to the specific instructions. However, I encourage you to consider the overall project as a potential deliverable that you could include on a resume, show to future employers, discuss in graduate school interviews, etc. That is, approach the assignment as an opportunity for you to take something away from the class which is bigger than just a grade.\n\n\n\nReuseCC BY 4.0"
  },
  {
    "objectID": "project.html#building-a-database",
    "href": "project.html#building-a-database",
    "title": "Final Project",
    "section": "Building a Database",
    "text": "Building a Database\nbuild a database using the skills we’ve covered in the two week course.\n\nData\nYou will need to find your own (large!) data with at least 3 publicly available tables that have keys connecting them. Additionally, the data should have some strings that need parsing.\n\nuse the rvest package to scrape html data… it will be messy!\n\n\n\nDue Dates\n\nTuesday, January 16. Email prof with dataset idea for project. Include the following:\n\nHolistic description of the dataset (a few sentences).\nExplanation of keys that link the data tables.\nDescription of the observational units and columns in each data table.\nFull reference for data citation.\nLink to the resources.\n\nEnd of week 2. We will have some time in class to work on the project.\nTuesday, January 23. Completed project is due."
  },
  {
    "objectID": "project.html#assignment",
    "href": "project.html#assignment",
    "title": "Final Project",
    "section": "Assignment",
    "text": "Assignment\n\nInput data\nDescribe creation / construction / changing of the DB using DuckDB or MySQL.\nSome data wrangling in SQL and R (comparison). Should include some joining.\nSomething with regular expressions\nSome analysis (probably in R). Must include at least one visualization. For fun, you could make a Shiny App (not required)."
  },
  {
    "objectID": "project.html#something-new",
    "href": "project.html#something-new",
    "title": "Final Project",
    "section": "",
    "text": "Each individual should have some analysis that goes beyond a Cox PH model. For your analysis, you should give details of what is going on, how it is relevant, what are the technical conditions, what are the conclusions, etc. Your analysis should indicate a sense that you understand and that you can communicate the results to a possible client. Some possible topics to investigate include:\n\nInvestigation of the proportional hazards assumption (what does the R function cox.zph() do?)\nExponential or Weibull PH regression (parametric survival model)\nDeriving / detailing AIC & BIC for model selection on Cox PH\nPower analysis (a simulation?)\nDerivation of the sample size calculation for the log rank test (and application to the data)\nAn analysis of the Schoenfeld residuals (how are they calculated and why is that calculation relevant?)\nBootstrapping the survival model (what are the assumptions? what do you conclude?)\nAn analysis of possible time dependent covariates (what should you see? what do you see? do transformations help?)\nAn analysis / understanding / simulation of the multiple comparisons issues for assessing many different models (or other exploratory hypotheses).\nAndersen-Gill extension of the Cox PH model for time-varying covariates (available in rms R package). [Note: A-G isn’t meant to test PH, per se, but rather it allows for variables that are time varying.]\nAnother topic related to survival analysis that you find interesting."
  },
  {
    "objectID": "project.html#r-thoughts",
    "href": "project.html#r-thoughts",
    "title": "Final Project",
    "section": "",
    "text": "Use R Markdown to create a reproducible analysis. Anyone should be able to run your analysis using only the .Rmd file.\nTurn in both .Rmd and .pdf files for your final analysis.\nIf you are working in pairs, the project is extended in two ways. 1. You must both be able to work on the files. Ideally, you will share your work via GitHub or other software which tracks changes and coordinates work. 2. You must do two new items (one each).\nNote that the event of interest is “visit to primary care physician.”\nBe as creative as possible trying to think about how you might like to graphically display the data. If you come up with a cool idea for a graph but don’t know how to implement it, please let me know, and I will write the code for you!!\nPlease do not re-code the variables or change the variable names outside of R. You may, however, transform (mutate()) the variables within your R code (that is, for example, if you wanted to divide months by 12 to have years, or square a variable, etc.).\n\n\n\n\nYour primary assessment will be based on the above items (modeling, understanding of new topic, additional analysis, interpretation).\nAdditionally there will be two competitions. Winning either will add 5 points (out of 100) to your score.\n\nGraphic: the class will vote on who has the best graphic.\nModel: using a holdout sample (I only gave you part of the data), I will assess your final model. The group whose model best describes the holdout sample (as measured by the c-index) will win the model prize."
  },
  {
    "objectID": "project.html#footnotes",
    "href": "project.html#footnotes",
    "title": "Final Project",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nmeasured by the \\(c\\) index↩︎"
  },
  {
    "objectID": "clicker_study.html#footnotes",
    "href": "clicker_study.html#footnotes",
    "title": "Clicker Questions",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nwherever you are, make sure you are communicating with me when you have questions!↩︎\nwherever you are, make sure you are communicating with me when you have questions!↩︎\n\non Gradescope\n\n↩︎\n\npushing the file(s)\n\n↩︎\n\npoor assignment operator\n\n↩︎\n\ninvalid object name\n\n↩︎\n\nunmatched quotes\n\n↩︎\n\nno mistake\n\n↩︎\n\nimproper syntax for a function argument\n\n↩︎\n\nI mean, the right answer has to be Yes, right!??!\n\n↩︎\nno right answer here!↩︎\n\nIn the local folder which also has the R project. It could be on the Desktop or the Home directory, but it must be in the same place as the R project. Do not upload files to the remote GitHub directory or you will find yourself with two different copies of the files.\n\n↩︎\nYes! All the responses are reasons to make a figure.↩︎\n\nBecause that graphic displays the message you want as optimally as possible.\n\n↩︎\n\nlength, definitely. Maybe also a. position.\n\n↩︎\n\nposition, definitely, also e. color. Maybe also b. length.\n\n↩︎\n\ncolor, definitely. Also probably d. area.\n\n↩︎\n\ncolor must be specified outside the aes() function\n\n↩︎\n\ndot color is specified as “navy”, line color is specified as wday.\n\n↩︎\n\nset the information outside the aes() function\n\n↩︎\nanswers may vary. I’d say c. putting the work in context. Others might say b. facilitating comparison or d. simplifying the story. However, I don’t think a correct answer is a. making the data stand out.↩︎\n\nmaking the data stand out\n\n↩︎\n\nOne showed the relevant comparison better.\n\n↩︎\n\nIt isn’t at the origin. in combination with d. There wasn’t a label explaining why the axes were where they were. The story associated with the average value axes is not clear to the reader.\n\n↩︎\n\nbabynames in wrong place\n\n↩︎\n\nTable c is best because the columns allow us to work with each of the variable separately.\n\n↩︎\n\ndoes something different because it takes the mean() (average) instead of the sum(). The other commands compute the total number of births broken down by year and sex.\n\n↩︎\n\nfilter()\n\n↩︎\n\n(year, name)\n\n↩︎\n\nsum(n)\n\n↩︎\nrunning the different code chunks with relevant output.↩︎\n\non Gradescope\n\n↩︎\n\non Canvas\n\n↩︎\n\n-country\n\n↩︎\n\nyear\n\n↩︎\n\ngdpval (if possible, good idea to name variables something different from the name of the data frame)\n\n↩︎\n\nuse pivot_wider() on raw data\n\n↩︎\n\nuse pivot_longer() on raw data. The reference to the study is: Gregory Belenky, Nancy J. Wesensten, David R. Thorne, Maria L. Thomas, Helen C. Sing, Daniel P. Redmond, Michael B. Russo and Thomas J. Balkin (2003) Patterns of performance degradation and restoration during sleep restriction and subsequent recovery: a sleep dose-response study. Journal of Sleep Research 12, 1–12.\n\n↩︎\n\nMick\n\n↩︎\n\nnone of them (the default is to retain all the variables)\n\n↩︎\n\nNA (it would be NULL in SQL)\n\n↩︎\n\n“a1” “b2” “c3”\n\n↩︎\n\n“a 1” “b 2” “c 3”\n\n↩︎\n\n“ab” “ifg” Again, str_sub() is vectorized. So the subset of string one is from 1 to 2. The subset of string two is from 3 to 5.\n\n↩︎\n\n“one -pple” “two p-ars” “three bananas” (because str_replace() is vectorized)\n\n↩︎\n\nTRUE TRUE TRUE TRUE\n\n↩︎\n\nalphabetically, from a to z\n\n↩︎\n\nChanges the order of the levels of type\n\n↩︎\n\nSome of the above (b. Changes the values of x and c. Changes the levels of x and sort of d. Changes the order of the levels of x, jut by the nature of c.)\n\n↩︎\nI don’t know what the answer is. Ill-defined question.↩︎\n\ndifferent output formatting (the first produces 9 the second produces Sep)\n\n↩︎\n\nToday is the 8th week of the year.\n\n↩︎\n\nDay of month and day of year. (Day of year is often called the “Julian Day”.)\n\n↩︎\n\nFALSE\n\n↩︎\nneither c. nor e. would match. Inside the bracket “[^u]” matches anything other than a “u”, but it has to match something.↩︎\n\nsome of the above. d. Inside a character class | is a normal character and would therefore match “grey” and “gray” and “gr|y”. Which is not what we want, but would work to match both “grey” and “gray”. c. would not match with str_extract() (but might match in other parsers that ignored spaces).\n\n↩︎\n\n1 (because \\d matches only a single digit).\n\n↩︎\n\n10 (because \\d+ matches at least one digit).\n\n↩︎\n\nE (because . matches anything, and returns only a single character).\n\n↩︎\n\nEpisode 2: The pie whisperer. (4 August 2015) (because . matches anything, and with the + it returns multiple characters).\n\n↩︎\n\n. (because \\. matches the period, .).\n\n↩︎\n\nThe first includes Jane.\n\n↩︎\n\n\"(?&lt;=\\\\$)\\\\d+\"\n\n↩︎\n\n\"\\\\w+(?= pie)\"\n\n↩︎\n\nwe return the string at the lookaround\n\n↩︎\n\nerror (code will fail)\n\n↩︎\n\n9\n\n↩︎\n\n8\n\n↩︎\n\n8\n\n↩︎\n\nmap_chr(c(1,4,7), addTen) because the output is in quotes, the values are strings, not numbers.\n\n↩︎\n\nall of the above. The map() function allows vectors, lists, and data frames as input.\n\n↩︎\n\nmap(c(1, 4, 7), ~addTen). The ~ acts on functions that do not have their own name or that are defined by function(...). By adding the argument (.x) we’ve expanded the addTen() function, and so it needs a ~. The addTen() function all alone does not use a ~.\n\n↩︎\n\n6 random normals (1 with mean 1, sd 3; 2 with mean 3, sd 1; 3 with mean 47, sd 10)\n\n↩︎\n\nThere is no object called jan31.\n\n↩︎\n\nI haven’t loaded lubridate (which is why it doesn’t recognize that ymd() is not a function).\n\n↩︎\n\nThere is no error.\n\n↩︎\n\n3, 2, 1\n\n↩︎\n\n1\n\n↩︎\n\n2\n\n↩︎\n\n1\n\n↩︎\n\n2\n\n↩︎\nMaybe c. 3? a. 1? They are all okay, but you have to think carefully to read any of them!↩︎\n\nquestion, yes, no\n\n↩︎\n\n“1”, “cat”, “5”, NA, “cat” (Note that the numbers were converted to character strings!)\n\n↩︎\n\non Gradescope\n\n↩︎\n\non Canvas\n\n↩︎\n\nmakes your results reproducible\n\n↩︎\n\n[1] “f” “h” “i” “e” “g” “d” “c” “j” “b” “a”\n\n↩︎\n\n[1] “e” “j” “e” “b” “e” “c” “f” “a” “e” “a”\n\n↩︎\n\n[1] “j” “g” “f” “i” “f” (could have also been b.)\n\n↩︎\n\n[1] “i” “b” “g” “d” “a”\n\n↩︎\n\nthe number of hats that match\n\n↩︎\n\nthe proportion of hats that match\n\n↩︎\n\nwhether or not at least one hat matches\n\n↩︎\n\n10 (it represents both the number of overall hats and the number of hats we select)\n\n↩︎\n\nRepeat for many iterations. (The next step needs to gather information on how the FP and FN results hold, it might have just been something odd in my simulation… )\n\n↩︎\nall of the above↩︎\nIt totally depends on your personality and your finances. b. doesn’t make much sense. But a., c., and d. are all very reasonable questions to ask about your investments.↩︎\n\n8\n\n↩︎\n\n0.196 (19.6% of the time)\n\n↩︎\n\n0.063 (6.3% of the time)\n\n↩︎\n\nvery surprising (prob of 14 or more is 0.0021)\n\n↩︎\n\nalternative, one sided (because probably we are studying that it increases their success rate)\n\n↩︎\n\nnull, two sided (because I have no idea which cheetah might run faster)\n\n↩︎\n\nalternative, two sided (because I have no idea whether they’ve increased or decreased)\n\n↩︎\n\nnull, one sided (because I happen to know that folic acid is thought to prevent facial clefts)\n\n↩︎\n\nalternative, one sided (because I happen to know that caffeine is thought to decrease baby’s birth weight)\n\n↩︎\n\nA number which (is almost always unknown and) describes a population.\n\n↩︎\n\nwithout replacement (replace = FALSE)\n\n↩︎\n\nIt depends. a. would be the correct answer if the alternative hypothesis is \\(\\mu_1 - \\mu_2 &lt; 0\\), b. would be the right answer if the alternative hypothesis is \\(\\mu_1 - \\mu_2 &gt; 0\\) and c. would be the right answer if the alternative hypothesis is \\(\\mu_1 - \\mu_2 \\ne 0\\).\n\n↩︎\n\nDouble the area to the left.\n\n↩︎\n\nThe scale of the y-axis is upside down.\n\n↩︎\ndata-to-ink ratio measures how much ink is being used for the data (data-ink) as compared to how much ink is because used on the entire plot (labels, etc.)↩︎\n\nThe scale of the y-axis is way too zoomed in.\n\n↩︎\ndata-to-ink ratio measures how much ink is being used for the data (data-ink) as compared to how much ink is because used on the entire plot (labels, etc.)↩︎\n\nNon-intuitive sorting (sorted in decreasing order instead of by time)\n\n↩︎\ndata-to-ink ratio measures how much ink is being used for the data (data-ink) as compared to how much ink is because used on the entire plot (labels, etc.)↩︎\n\nInconsistent labeling (the colors mean different things for the two plots)\n\n↩︎\ndata-to-ink ratio measures how much ink is being used for the data (data-ink) as compared to how much ink is because used on the entire plot (labels, etc.)↩︎\nthere can’t possibly be a right answer here.↩︎\n\nstudents (is the top word over the last 500 opinion articles)\n\n↩︎\n\nthe elements have &lt; &gt;\n\n↩︎\n\nuse selector: img\n\n↩︎\n\nuse selector: [href]\n\n↩︎\n\nan attribute describes an element\n\n↩︎\n\nA relational database management system.\n\n↩︎\n\nThe first versions were created in the 1970s and called SEQUEL (Structured English QUEry Language). c. SQL came about in particular systems in the 1980s.\n\n↩︎\n\nrelational database management systems.\n\n↩︎\n\ncomputer’s hard drive / storage\n\n↩︎\n\nSQL tbl in storage and R tibble in memory\n\n↩︎\n\nSELECT\n\n↩︎\n\nSELECT FirstName FROM Persons\n\n↩︎\n\nSELECT * FROM Persons\n\n↩︎\n\nSELECT COUNT(*) FROM Persons\n\n↩︎\n\nSELECT * FROM Persons WHERE FirstName = ‘Peter’ (d. would also work.)\n\n↩︎\n\nSELECT * FROM Persons WHERE FirstName = ‘Peter’ AND LastName = ‘Jackson’\n\n↩︎\n\nBEWTEEN\n\n↩︎\n\nSELECT * FROM Persons WHERE LastName BETWEEN ‘Hansen’ AND ‘Pettersen’\n\n↩︎\n\nSELECT DISTINCT\n\n↩︎\n\nORDER BY\n\n↩︎\n\nSELECT * FROM Persons ORDER BY FirstName DESC\n\n↩︎\n\nTRUE\n\n↩︎\n\n… WHERE type = ‘fruit’ AND (color = ‘yellow’ OR color = ‘green’)\n\n↩︎\n\nit combines rows from two or more tables based on a related column.\n\n↩︎\n\nit combines the results of two or more SELECT statements.\n\n↩︎\n\nit combines rows from two or more tables based on a related column.\n\n↩︎\n\nit combines rows from two or more tables based on a related column.\n\n↩︎\n\nthe first table\n\n↩︎\n\nMick\n\n↩︎\n\nnone of them (all variables are kept in all joins)\n\n↩︎\n\nNULL (it would be NA in R)\n\n↩︎\n\nSELECT * FROM Persons WHERE FirstName REGEXP ’(?i)a.*’ (n.b., the LIKE function will give you a similar result, with % as a wildcard: SELECT*FROMPersonsWHERE` FirstName LIKE ‘a%’)\n\n↩︎\n\nPrimary key\n\n↩︎\n\nDirectly identifies another column\n\n↩︎\n\nstudent_name\n\n↩︎\n\nname as primary in enrollment and foreign in grades (the primary key must uniquely identify the records, and name is unlikely to do that in a grades database.)\n\n↩︎\n\nshinyApp()\n\n↩︎\n\nserver\n\n↩︎\n\nselectInput()\n\n↩︎\n\nTo generate text output based on reactive inputs\n\n↩︎\n\nThe user interface elements\n\n↩︎\n\nreactive()\n\n↩︎\n\nbase R plot\n\n↩︎\n\nsliderInput(\"slider\", \"Slider\", min = 1, max = 100, value = 50)\n\n↩︎"
  },
  {
    "objectID": "clicker_slides.html#footnotes",
    "href": "clicker_slides.html#footnotes",
    "title": "Foundations of Data Science in R",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nwherever you are, make sure you are communicating with me when you have questions!\nwherever you are, make sure you are communicating with me when you have questions!\n\non Gradescope\n\n\n\npushing the file(s)\n\n\n\npoor assignment operator\n\n\n\ninvalid object name\n\n\n\nunmatched quotes\n\n\n\nno mistake\n\n\n\nimproper syntax for a function argument\n\n\n\nI mean, the right answer has to be Yes, right!??!\n\n\nno right answer here!\n\nIn the local folder which also has the R project. It could be on the Desktop or the Home directory, but it must be in the same place as the R project. Do not upload files to the remote GitHub directory or you will find yourself with two different copies of the files.\n\n\nYes! All the responses are reasons to make a figure.\n\nBecause that graphic displays the message you want as optimally as possible.\n\n\n\nlength, definitely. Maybe also a. position.\n\n\n\nposition, definitely, also e. color. Maybe also b. length.\n\n\n\ncolor, definitely. Also probably d. area.\n\n\n\ncolor must be specified outside the aes() function\n\n\n\ndot color is specified as “navy”, line color is specified as wday.\n\n\n\nset the information outside the aes() function\n\n\nanswers may vary. I’d say c. putting the work in context. Others might say b. facilitating comparison or d. simplifying the story. However, I don’t think a correct answer is a. making the data stand out.\n\nmaking the data stand out\n\n\n\nOne showed the relevant comparison better.\n\n\n\nIt isn’t at the origin. in combination with d. There wasn’t a label explaining why the axes were where they were. The story associated with the average value axes is not clear to the reader.\n\n\n\nbabynames in wrong place\n\n\n\nTable c is best because the columns allow us to work with each of the variable separately.\n\n\n\ndoes something different because it takes the mean() (average) instead of the sum(). The other commands compute the total number of births broken down by year and sex.\n\n\n\nfilter()\n\n\n\n(year, name)\n\n\n\nsum(n)\n\n\nrunning the different code chunks with relevant output.\n\non Gradescope\n\n\n\non Canvas\n\n\n\n-country\n\n\n\nyear\n\n\n\ngdpval (if possible, good idea to name variables something different from the name of the data frame)\n\n\n\nuse pivot_wider() on raw data\n\n\n\nuse pivot_longer() on raw data. The reference to the study is: Gregory Belenky, Nancy J. Wesensten, David R. Thorne, Maria L. Thomas, Helen C. Sing, Daniel P. Redmond, Michael B. Russo and Thomas J. Balkin (2003) Patterns of performance degradation and restoration during sleep restriction and subsequent recovery: a sleep dose-response study. Journal of Sleep Research 12, 1–12.\n\n\n\nMick\n\n\n\nnone of them (the default is to retain all the variables)\n\n\n\nNA (it would be NULL in SQL)\n\n\n\n“a1” “b2” “c3”\n\n\n\n“a 1” “b 2” “c 3”\n\n\n\n“ab” “ifg” Again, str_sub() is vectorized. So the subset of string one is from 1 to 2. The subset of string two is from 3 to 5.\n\n\n\n“one -pple” “two p-ars” “three bananas” (because str_replace() is vectorized)\n\n\n\nTRUE TRUE TRUE TRUE\n\n\n\nalphabetically, from a to z\n\n\n\nChanges the order of the levels of type\n\n\n\nSome of the above (b. Changes the values of x and c. Changes the levels of x and sort of d. Changes the order of the levels of x, jut by the nature of c.)\n\n\nI don’t know what the answer is. Ill-defined question.\n\ndifferent output formatting (the first produces 9 the second produces Sep)\n\n\n\nToday is the 8th week of the year.\n\n\n\nDay of month and day of year. (Day of year is often called the “Julian Day”.)\n\n\n\nFALSE\n\n\nneither c. nor e. would match. Inside the bracket “[^u]” matches anything other than a “u”, but it has to match something.\n\nsome of the above. d. Inside a character class | is a normal character and would therefore match “grey” and “gray” and “gr|y”. Which is not what we want, but would work to match both “grey” and “gray”. c. would not match with str_extract() (but might match in other parsers that ignored spaces).\n\n\n\n1 (because \\d matches only a single digit).\n\n\n\n10 (because \\d+ matches at least one digit).\n\n\n\nE (because . matches anything, and returns only a single character).\n\n\n\nEpisode 2: The pie whisperer. (4 August 2015) (because . matches anything, and with the + it returns multiple characters).\n\n\n\n. (because \\. matches the period, .).\n\n\n\nThe first includes Jane.\n\n\n\n\"(?&lt;=\\\\$)\\\\d+\"\n\n\n\n\"\\\\w+(?= pie)\"\n\n\n\nwe return the string at the lookaround\n\n\n\nerror (code will fail)\n\n\n\n9\n\n\n\n8\n\n\n\n8\n\n\n\nmap_chr(c(1,4,7), addTen) because the output is in quotes, the values are strings, not numbers.\n\n\n\nall of the above. The map() function allows vectors, lists, and data frames as input.\n\n\n\nmap(c(1, 4, 7), ~addTen). The ~ acts on functions that do not have their own name or that are defined by function(...). By adding the argument (.x) we’ve expanded the addTen() function, and so it needs a ~. The addTen() function all alone does not use a ~.\n\n\n\n6 random normals (1 with mean 1, sd 3; 2 with mean 3, sd 1; 3 with mean 47, sd 10)\n\n\n\nThere is no object called jan31.\n\n\n\nI haven’t loaded lubridate (which is why it doesn’t recognize that ymd() is not a function).\n\n\n\nThere is no error.\n\n\n\n3, 2, 1\n\n\n\n1\n\n\n\n2\n\n\n\n1\n\n\n\n2\n\n\nMaybe c. 3? a. 1? They are all okay, but you have to think carefully to read any of them!\n\nquestion, yes, no\n\n\n\n“1”, “cat”, “5”, NA, “cat” (Note that the numbers were converted to character strings!)\n\n\n\non Gradescope\n\n\n\non Canvas\n\n\n\nmakes your results reproducible\n\n\n\n[1] “f” “h” “i” “e” “g” “d” “c” “j” “b” “a”\n\n\n\n[1] “e” “j” “e” “b” “e” “c” “f” “a” “e” “a”\n\n\n\n[1] “j” “g” “f” “i” “f” (could have also been b.)\n\n\n\n[1] “i” “b” “g” “d” “a”\n\n\n\nthe number of hats that match\n\n\n\nthe proportion of hats that match\n\n\n\nwhether or not at least one hat matches\n\n\n\n10 (it represents both the number of overall hats and the number of hats we select)\n\n\n\nRepeat for many iterations. (The next step needs to gather information on how the FP and FN results hold, it might have just been something odd in my simulation… )\n\n\nall of the above\nIt totally depends on your personality and your finances. b. doesn’t make much sense. But a., c., and d. are all very reasonable questions to ask about your investments.\n\n8\n\n\n\n0.196 (19.6% of the time)\n\n\n\n0.063 (6.3% of the time)\n\n\n\nvery surprising (prob of 14 or more is 0.0021)\n\n\n\nalternative, one sided (because probably we are studying that it increases their success rate)\n\n\n\nnull, two sided (because I have no idea which cheetah might run faster)\n\n\n\nalternative, two sided (because I have no idea whether they’ve increased or decreased)\n\n\n\nnull, one sided (because I happen to know that folic acid is thought to prevent facial clefts)\n\n\n\nalternative, one sided (because I happen to know that caffeine is thought to decrease baby’s birth weight)\n\n\n\nA number which (is almost always unknown and) describes a population.\n\n\n\nwithout replacement (replace = FALSE)\n\n\n\nIt depends. a. would be the correct answer if the alternative hypothesis is \\(\\mu_1 - \\mu_2 &lt; 0\\), b. would be the right answer if the alternative hypothesis is \\(\\mu_1 - \\mu_2 &gt; 0\\) and c. would be the right answer if the alternative hypothesis is \\(\\mu_1 - \\mu_2 \\ne 0\\).\n\n\n\nDouble the area to the left.\n\n\n\nThe scale of the y-axis is upside down.\n\n\ndata-to-ink ratio measures how much ink is being used for the data (data-ink) as compared to how much ink is because used on the entire plot (labels, etc.)\n\nThe scale of the y-axis is way too zoomed in.\n\n\ndata-to-ink ratio measures how much ink is being used for the data (data-ink) as compared to how much ink is because used on the entire plot (labels, etc.)\n\nNon-intuitive sorting (sorted in decreasing order instead of by time)\n\n\ndata-to-ink ratio measures how much ink is being used for the data (data-ink) as compared to how much ink is because used on the entire plot (labels, etc.)\n\nInconsistent labeling (the colors mean different things for the two plots)\n\n\ndata-to-ink ratio measures how much ink is being used for the data (data-ink) as compared to how much ink is because used on the entire plot (labels, etc.)\nthere can’t possibly be a right answer here.\n\nstudents (is the top word over the last 500 opinion articles)\n\n\n\nthe elements have &lt; &gt;\n\n\n\nuse selector: img\n\n\n\nuse selector: [href]\n\n\n\nan attribute describes an element\n\n\n\nA relational database management system.\n\n\n\nThe first versions were created in the 1970s and called SEQUEL (Structured English QUEry Language). c. SQL came about in particular systems in the 1980s.\n\n\n\nrelational database management systems.\n\n\n\ncomputer’s hard drive / storage\n\n\n\nSQL tbl in storage and R tibble in memory\n\n\n\nSELECT\n\n\n\nSELECT FirstName FROM Persons\n\n\n\nSELECT * FROM Persons\n\n\n\nSELECT COUNT(*) FROM Persons\n\n\n\nSELECT * FROM Persons WHERE FirstName = ‘Peter’ (d. would also work.)\n\n\n\nSELECT * FROM Persons WHERE FirstName = ‘Peter’ AND LastName = ‘Jackson’\n\n\n\nBEWTEEN\n\n\n\nSELECT * FROM Persons WHERE LastName BETWEEN ‘Hansen’ AND ‘Pettersen’\n\n\n\nSELECT DISTINCT\n\n\n\nORDER BY\n\n\n\nSELECT * FROM Persons ORDER BY FirstName DESC\n\n\n\nTRUE\n\n\n\n… WHERE type = ‘fruit’ AND (color = ‘yellow’ OR color = ‘green’)\n\n\n\nit combines rows from two or more tables based on a related column.\n\n\n\nit combines the results of two or more SELECT statements.\n\n\n\nit combines rows from two or more tables based on a related column.\n\n\n\nit combines rows from two or more tables based on a related column.\n\n\n\nthe first table\n\n\n\nMick\n\n\n\nnone of them (all variables are kept in all joins)\n\n\n\nNULL (it would be NA in R)\n\n\n\nSELECT * FROM Persons WHERE FirstName REGEXP ’(?i)a.*’ (n.b., the LIKE function will give you a similar result, with % as a wildcard: SELECT*FROMPersonsWHERE` FirstName LIKE ‘a%’)\n\n\n\nPrimary key\n\n\n\nDirectly identifies another column\n\n\n\nstudent_name\n\n\n\nname as primary in enrollment and foreign in grades (the primary key must uniquely identify the records, and name is unlikely to do that in a grades database.)\n\n\n\nshinyApp()\n\n\n\nserver\n\n\n\nselectInput()\n\n\n\nTo generate text output based on reactive inputs\n\n\n\nThe user interface elements\n\n\n\nreactive()\n\n\n\nbase R plot\n\n\n\nsliderInput(\"slider\", \"Slider\", min = 1, max = 100, value = 50)"
  },
  {
    "objectID": "clicker.html#footnotes",
    "href": "clicker.html#footnotes",
    "title": "Clicker Questions",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nwherever you are, make sure you are communicating with me when you have questions!↩︎\nwherever you are, make sure you are communicating with me when you have questions!↩︎\n\non Gradescope\n\n↩︎\n\npushing the file(s)\n\n↩︎\n\npoor assignment operator\n\n↩︎\n\ninvalid object name\n\n↩︎\n\nunmatched quotes\n\n↩︎\n\nno mistake\n\n↩︎\n\nimproper syntax for a function argument\n\n↩︎\n\nI mean, the right answer has to be Yes, right!??!\n\n↩︎\nno right answer here!↩︎\n\nIn the local folder which also has the R project. It could be on the Desktop or the Home directory, but it must be in the same place as the R project. Do not upload files to the remote GitHub directory or you will find yourself with two different copies of the files.\n\n↩︎\nYes! All the responses are reasons to make a figure.↩︎\n\nBecause that graphic displays the message you want as optimally as possible.\n\n↩︎\n\nlength, definitely. Maybe also a. position.\n\n↩︎\n\nposition, definitely, also e. color. Maybe also b. length.\n\n↩︎\n\ncolor, definitely. Also probably d. area.\n\n↩︎\n\ncolor must be specified outside the aes() function\n\n↩︎\n\ndot color is specified as “navy”, line color is specified as wday.\n\n↩︎\n\nset the information outside the aes() function\n\n↩︎\nanswers may vary. I’d say c. putting the work in context. Others might say b. facilitating comparison or d. simplifying the story. However, I don’t think a correct answer is a. making the data stand out.↩︎\n\nmaking the data stand out\n\n↩︎\n\nOne showed the relevant comparison better.\n\n↩︎\n\nIt isn’t at the origin. in combination with d. There wasn’t a label explaining why the axes were where they were. The story associated with the average value axes is not clear to the reader.\n\n↩︎\n\nbabynames in wrong place\n\n↩︎\n\nTable c is best because the columns allow us to work with each of the variable separately.\n\n↩︎\n\ndoes something different because it takes the mean() (average) instead of the sum(). The other commands compute the total number of births broken down by year and sex.\n\n↩︎\n\nfilter()\n\n↩︎\n\n(year, name)\n\n↩︎\n\nsum(n)\n\n↩︎\nrunning the different code chunks with relevant output.↩︎\n\non Gradescope\n\n↩︎\n\non Canvas\n\n↩︎\n\n-country\n\n↩︎\n\nyear\n\n↩︎\n\ngdpval (if possible, good idea to name variables something different from the name of the data frame)\n\n↩︎\n\nuse pivot_wider() on raw data\n\n↩︎\n\nuse pivot_longer() on raw data. The reference to the study is: Gregory Belenky, Nancy J. Wesensten, David R. Thorne, Maria L. Thomas, Helen C. Sing, Daniel P. Redmond, Michael B. Russo and Thomas J. Balkin (2003) Patterns of performance degradation and restoration during sleep restriction and subsequent recovery: a sleep dose-response study. Journal of Sleep Research 12, 1–12.\n\n↩︎\n\nMick\n\n↩︎\n\nnone of them (the default is to retain all the variables)\n\n↩︎\n\nNA (it would be NULL in SQL)\n\n↩︎\n\n“a1” “b2” “c3”\n\n↩︎\n\n“a 1” “b 2” “c 3”\n\n↩︎\n\n“ab” “ifg” Again, str_sub() is vectorized. So the subset of string one is from 1 to 2. The subset of string two is from 3 to 5.\n\n↩︎\n\n“one -pple” “two p-ars” “three bananas” (because str_replace() is vectorized)\n\n↩︎\n\nTRUE TRUE TRUE TRUE\n\n↩︎\n\nalphabetically, from a to z\n\n↩︎\n\nChanges the order of the levels of type\n\n↩︎\n\nSome of the above (b. Changes the values of x and c. Changes the levels of x and sort of d. Changes the order of the levels of x, jut by the nature of c.)\n\n↩︎\nI don’t know what the answer is. Ill-defined question.↩︎\n\ndifferent output formatting (the first produces 9 the second produces Sep)\n\n↩︎\n\nToday is the 8th week of the year.\n\n↩︎\n\nDay of month and day of year. (Day of year is often called the “Julian Day”.)\n\n↩︎\n\nFALSE\n\n↩︎\nneither c. nor e. would match. Inside the bracket “[^u]” matches anything other than a “u”, but it has to match something.↩︎\n\nsome of the above. d. Inside a character class | is a normal character and would therefore match “grey” and “gray” and “gr|y”. Which is not what we want, but would work to match both “grey” and “gray”. c. would not match with str_extract() (but might match in other parsers that ignored spaces).\n\n↩︎\n\n1 (because \\d matches only a single digit).\n\n↩︎\n\n10 (because \\d+ matches at least one digit).\n\n↩︎\n\nE (because . matches anything, and returns only a single character).\n\n↩︎\n\nEpisode 2: The pie whisperer. (4 August 2015) (because . matches anything, and with the + it returns multiple characters).\n\n↩︎\n\n. (because \\. matches the period, .).\n\n↩︎\n\nThe first includes Jane.\n\n↩︎\n\n\"(?&lt;=\\\\$)\\\\d+\"\n\n↩︎\n\n\"\\\\w+(?= pie)\"\n\n↩︎\n\nwe return the string at the lookaround\n\n↩︎\n\nerror (code will fail)\n\n↩︎\n\n9\n\n↩︎\n\n8\n\n↩︎\n\n8\n\n↩︎\n\nmap_chr(c(1,4,7), addTen) because the output is in quotes, the values are strings, not numbers.\n\n↩︎\n\nall of the above. The map() function allows vectors, lists, and data frames as input.\n\n↩︎\n\nmap(c(1, 4, 7), ~addTen). The ~ acts on functions that do not have their own name or that are defined by function(...). By adding the argument (.x) we’ve expanded the addTen() function, and so it needs a ~. The addTen() function all alone does not use a ~.\n\n↩︎\n\n6 random normals (1 with mean 1, sd 3; 2 with mean 3, sd 1; 3 with mean 47, sd 10)\n\n↩︎\n\nThere is no object called jan31.\n\n↩︎\n\nI haven’t loaded lubridate (which is why it doesn’t recognize that ymd() is not a function).\n\n↩︎\n\nThere is no error.\n\n↩︎\n\n3, 2, 1\n\n↩︎\n\n1\n\n↩︎\n\n2\n\n↩︎\n\n1\n\n↩︎\n\n2\n\n↩︎\nMaybe c. 3? a. 1? They are all okay, but you have to think carefully to read any of them!↩︎\n\nquestion, yes, no\n\n↩︎\n\n“1”, “cat”, “5”, NA, “cat” (Note that the numbers were converted to character strings!)\n\n↩︎\n\non Gradescope\n\n↩︎\n\non Canvas\n\n↩︎\n\nmakes your results reproducible\n\n↩︎\n\n[1] “f” “h” “i” “e” “g” “d” “c” “j” “b” “a”\n\n↩︎\n\n[1] “e” “j” “e” “b” “e” “c” “f” “a” “e” “a”\n\n↩︎\n\n[1] “j” “g” “f” “i” “f” (could have also been b.)\n\n↩︎\n\n[1] “i” “b” “g” “d” “a”\n\n↩︎\n\nthe number of hats that match\n\n↩︎\n\nthe proportion of hats that match\n\n↩︎\n\nwhether or not at least one hat matches\n\n↩︎\n\n10 (it represents both the number of overall hats and the number of hats we select)\n\n↩︎\n\nRepeat for many iterations. (The next step needs to gather information on how the FP and FN results hold, it might have just been something odd in my simulation… )\n\n↩︎\nall of the above↩︎\nIt totally depends on your personality and your finances. b. doesn’t make much sense. But a., c., and d. are all very reasonable questions to ask about your investments.↩︎\n\n8\n\n↩︎\n\n0.196 (19.6% of the time)\n\n↩︎\n\n0.063 (6.3% of the time)\n\n↩︎\n\nvery surprising (prob of 14 or more is 0.0021)\n\n↩︎\n\nalternative, one sided (because probably we are studying that it increases their success rate)\n\n↩︎\n\nnull, two sided (because I have no idea which cheetah might run faster)\n\n↩︎\n\nalternative, two sided (because I have no idea whether they’ve increased or decreased)\n\n↩︎\n\nnull, one sided (because I happen to know that folic acid is thought to prevent facial clefts)\n\n↩︎\n\nalternative, one sided (because I happen to know that caffeine is thought to decrease baby’s birth weight)\n\n↩︎\n\nA number which (is almost always unknown and) describes a population.\n\n↩︎\n\nwithout replacement (replace = FALSE)\n\n↩︎\n\nIt depends. a. would be the correct answer if the alternative hypothesis is \\(\\mu_1 - \\mu_2 &lt; 0\\), b. would be the right answer if the alternative hypothesis is \\(\\mu_1 - \\mu_2 &gt; 0\\) and c. would be the right answer if the alternative hypothesis is \\(\\mu_1 - \\mu_2 \\ne 0\\).\n\n↩︎\n\nDouble the area to the left.\n\n↩︎\n\nThe scale of the y-axis is upside down.\n\n↩︎\ndata-to-ink ratio measures how much ink is being used for the data (data-ink) as compared to how much ink is because used on the entire plot (labels, etc.)↩︎\n\nThe scale of the y-axis is way too zoomed in.\n\n↩︎\ndata-to-ink ratio measures how much ink is being used for the data (data-ink) as compared to how much ink is because used on the entire plot (labels, etc.)↩︎\n\nNon-intuitive sorting (sorted in decreasing order instead of by time)\n\n↩︎\ndata-to-ink ratio measures how much ink is being used for the data (data-ink) as compared to how much ink is because used on the entire plot (labels, etc.)↩︎\n\nInconsistent labeling (the colors mean different things for the two plots)\n\n↩︎\ndata-to-ink ratio measures how much ink is being used for the data (data-ink) as compared to how much ink is because used on the entire plot (labels, etc.)↩︎\nthere can’t possibly be a right answer here.↩︎\n\nstudents (is the top word over the last 500 opinion articles)\n\n↩︎\n\nthe elements have &lt; &gt;\n\n↩︎\n\nuse selector: img\n\n↩︎\n\nuse selector: [href]\n\n↩︎\n\nan attribute describes an element\n\n↩︎\n\nA relational database management system.\n\n↩︎\n\nThe first versions were created in the 1970s and called SEQUEL (Structured English QUEry Language). c. SQL came about in particular systems in the 1980s.\n\n↩︎\n\nrelational database management systems.\n\n↩︎\n\ncomputer’s hard drive / storage\n\n↩︎\n\nSQL tbl in storage and R tibble in memory\n\n↩︎\n\nSELECT\n\n↩︎\n\nSELECT FirstName FROM Persons\n\n↩︎\n\nSELECT * FROM Persons\n\n↩︎\n\nSELECT COUNT(*) FROM Persons\n\n↩︎\n\nSELECT * FROM Persons WHERE FirstName = ‘Peter’ (d. would also work.)\n\n↩︎\n\nSELECT * FROM Persons WHERE FirstName = ‘Peter’ AND LastName = ‘Jackson’\n\n↩︎\n\nBEWTEEN\n\n↩︎\n\nSELECT * FROM Persons WHERE LastName BETWEEN ‘Hansen’ AND ‘Pettersen’\n\n↩︎\n\nSELECT DISTINCT\n\n↩︎\n\nORDER BY\n\n↩︎\n\nSELECT * FROM Persons ORDER BY FirstName DESC\n\n↩︎\n\nTRUE\n\n↩︎\n\n… WHERE type = ‘fruit’ AND (color = ‘yellow’ OR color = ‘green’)\n\n↩︎\n\nit combines rows from two or more tables based on a related column.\n\n↩︎\n\nit combines the results of two or more SELECT statements.\n\n↩︎\n\nit combines rows from two or more tables based on a related column.\n\n↩︎\n\nit combines rows from two or more tables based on a related column.\n\n↩︎\n\nthe first table\n\n↩︎\n\nMick\n\n↩︎\n\nnone of them (all variables are kept in all joins)\n\n↩︎\n\nNULL (it would be NA in R)\n\n↩︎\n\nSELECT * FROM Persons WHERE FirstName REGEXP ’(?i)a.*’ (n.b., the LIKE function will give you a similar result, with % as a wildcard: SELECT*FROMPersonsWHERE` FirstName LIKE ‘a%’)\n\n↩︎\n\nPrimary key\n\n↩︎\n\nDirectly identifies another column\n\n↩︎\n\nstudent_name\n\n↩︎\n\nname as primary in enrollment and foreign in grades (the primary key must uniquely identify the records, and name is unlikely to do that in a grades database.)\n\n↩︎\n\nshinyApp()\n\n↩︎\n\nserver\n\n↩︎\n\nselectInput()\n\n↩︎\n\nTo generate text output based on reactive inputs\n\n↩︎\n\nThe user interface elements\n\n↩︎\n\nreactive()\n\n↩︎\n\nbase R plot\n\n↩︎\n\nsliderInput(\"slider\", \"Slider\", min = 1, max = 100, value = 50)\n\n↩︎"
  },
  {
    "objectID": "handout/lab1_db_sds261_j24.html",
    "href": "handout/lab1_db_sds261_j24.html",
    "title": "Lab 1 - working with Databases",
    "section": "",
    "text": "Today’s lab will provide practice working with the different tools we can use to implement SQL code. We haven’t covered much SQL syntax, so the focus will be more on the tools than on writing code. You should, however, be trying to understand the SQL code as you go along.\nThe goals for lab 1 include:"
  },
  {
    "objectID": "syllabus.html#sds-261-januar-2024",
    "href": "syllabus.html#sds-261-januar-2024",
    "title": "syllabus",
    "section": "",
    "text": "Class: daily 10-11:30am Lab: daily (not Fridays) 1:30-3pm Office hours: daily 11:30-1:30pm\nJo Hardin\njo.hardin@pomona.edu\n\n\n\n\n\nArtwork by @allison_horst."
  },
  {
    "objectID": "syllabus.html#student-learning-outcomes.",
    "href": "syllabus.html#student-learning-outcomes.",
    "title": "syllabus",
    "section": "",
    "text": "By the end of the term, students will be able to:\n\nscrape, process, and clean data from the web\nwrangle data in a variety of formats\ncontextualize variation in data\nconstruct point and interval estimates using resampling techniques\ndesign accurate, clear and appropriate data graphics\nquery large relational databases (using SQL)\nwork fluently with regular expression\ncommunicate data-driven decisions"
  },
  {
    "objectID": "handout/lab4_regexp_sds261_j24.html",
    "href": "handout/lab4_regexp_sds261_j24.html",
    "title": "Lab 4 - regular expressions",
    "section": "",
    "text": "do something with chatgpt. ask chat gpt how to answer the question. then ask using SQL then ask using stringr.\nSolution: ^(?([0-9]{3}))?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$\nTest your solution on the following potential phone numbers:\nSolution: 1?[0-9]/[0-3]?[0-9]/([0-9]{2})?[0-9]{2}\nTest your solution on the following potential dates:\nSolution: ^(1|t(rue)?|y(es)?|ok(ay)?)$\n–&gt;&gt; need to figure out about lower and upper case in R / grep()\nTest your solution on the following potential responses:\nSolution: 2{1,3}(,[0-9]{3})*.[0-9]+$\nTest your solution on the following potential values:"
  },
  {
    "objectID": "syllabus.html#sds-261-january-2024",
    "href": "syllabus.html#sds-261-january-2024",
    "title": "syllabus",
    "section": "",
    "text": "Class: daily 10-11:30am\nLab: daily (not Fridays) 1:30-3pm\nOffice hours: daily 11:30-1:30pm\n\n\n\n\n\nArtwork by @allison_horst."
  },
  {
    "objectID": "handout/lab2_R_SQL_sds261_j24.html",
    "href": "handout/lab2_R_SQL_sds261_j24.html",
    "title": "Lab2 - SQL in R",
    "section": "",
    "text": "do something with NA / NULL. see hadley’s comments in the where section. https://r4ds.hadley.nz/databases#where\ndo something with distinct()\n\n\n\nReusehttps://creativecommons.org/licenses/by/4.0/"
  },
  {
    "objectID": "handout/lab4_joins_sds261_j24.html",
    "href": "handout/lab4_joins_sds261_j24.html",
    "title": "Lab4 - joins",
    "section": "",
    "text": "according to Ben: Yelp data does not have referential integrity, and you can find reviews written by users who don’t exist and/or about restaurants that aren’t in the other table.\n\n\n\nReusehttps://creativecommons.org/licenses/by/4.0/"
  },
  {
    "objectID": "github.html",
    "href": "github.html",
    "title": "Working on assignments with GitHub",
    "section": "",
    "text": "In DS002R, we will use GitHub + Gradescope to access and submit assignments. Here is the basic structure of how it will work:\n\nGet the assignment materials from GitHub.\nClone the repository to any machine you are using.\nWork on the assignment and push back to GitHub.\nSubmit the assignment on Gradescope.\n\n\n\n\n\n\n\nimage credit: https://xkcd.com/1597/,\n\n\n\n\n\nThe following diagram lays out the process, and the rest of the document provides a more detailed set of instructions.\n\n\n\n\n\nFlowchart of assignment process."
  },
  {
    "objectID": "github.html#pull",
    "href": "github.html#pull",
    "title": "Working on assignments with GitHub",
    "section": "pull",
    "text": "pull\nIf you are working with a colleague or on different machines it is so incredibly important to get in the habit of immediately clicking on pull when you start your work. (If you are working alone on a single machine pull won’t hurt! You’ll just be told that your files are already up to date.)\n\n\n\n\n\nAlways pull before you start. pull-work-save-commit-push"
  },
  {
    "objectID": "github.html#knit-your-work",
    "href": "github.html#knit-your-work",
    "title": "Working on assignments with GitHub",
    "section": "knit your work",
    "text": "knit your work\nDon’t forget to put your name on the assignment. Also, make sure that you knit to pdf. Knit early and often. The more often you knit, the fewer headaches you will have.\n\n\n\n\n\nAlways pull before you start. pull-work-knit-commit-push"
  },
  {
    "objectID": "github.html#commit-your-work",
    "href": "github.html#commit-your-work",
    "title": "Working on assignments with GitHub",
    "section": "commit your work",
    "text": "commit your work\nYou don’t need to commit every file, but you do need to commit files that are integral to the analysis (always commit .qmd, .pdf, data files, images that created the pdf, etc.).\n\n\n\n\n\npull-work-render-commit-push"
  },
  {
    "objectID": "github.html#push-your-work-to-github",
    "href": "github.html#push-your-work-to-github",
    "title": "Working on assignments with GitHub",
    "section": "push your work to GitHub",
    "text": "push your work to GitHub\nIt is good practice to use meaningful commit messages to help your future self figure out your past work.\n\n\n\n\n\npull-work-render-commit-push"
  },
  {
    "objectID": "github.html#check-your-work-on-github",
    "href": "github.html#check-your-work-on-github",
    "title": "Working on assignments with GitHub",
    "section": "check your work on GitHub",
    "text": "check your work on GitHub\nTo make sure that the work went through, always check your GitHub repo online to confirm any changes you made.\n\n\n\n\n\nCheck that your changes are correct."
  },
  {
    "objectID": "project.html#big-picture",
    "href": "project.html#big-picture",
    "title": "Project",
    "section": "Big picture",
    "text": "Big picture\nYour project is meant to answer a question using data. The vast majority of the work will be on the data wrangling side, but you might hope to have a plot or two at the end to help tie together your ideas.\n\nTopics\nThe topics above are meant to direct the project productively. They are not meant to limit you. If you have an idea for a project that doesn’t quite fit into what is outlined above (but is related to the course content), let’s talk about it! Most likely, your idea will fit into the project goals.\nExpanding on the topics above to get you started…\n\n1. SQL queries\nThroughout the course, we’ve seen a few different databases. There are more available in the R mdsr package, and you also have access to some additional MySQL server databases through Smith. Additionally, the professor has access to a MySQL server that contains all of the Stanford Open Policing data, and you are welcome to work with it (just ask for login information). So many interesting questions to consider!\n\n\n2. Regular expressions\nYou might think about web scraping to retrieve data (probably using the rvest R package). For example, you might scrape details about every Taylor Swift song and use regular expressions to format the information in a way that allows easy question asking.\nOr you might find a dataset on the Gilmore Girls and scrape IMDb to match the ratings for each episode.\n\n\n3. Creating SQL database\nYou can use any of a variety of platforms to create a SQL database. As in the class notes and labs, you can create a database using DuckDB. Alternatively, you can use Smith’s MySQL server. Or, you can use SQLite to create a database (in a similar way to DuckDB).\nFor example, you might create a database using the Saturday Night Live data and update all of the files with more recent episodes.\nOr you might look for a TidyTuesday dataset to upload. For example, consider data on cats in the UK which references similar datasets in the US, Australia, and New Zealand.\nIf you are creating a new SQL database, make sure that your database has three or more tables that link to one another."
  },
  {
    "objectID": "project.html#technical-details",
    "href": "project.html#technical-details",
    "title": "Project",
    "section": "Technical details",
    "text": "Technical details\n\nYou may work alone or in pairs.\nThere must be a narrative to accompany all technical products including code, output tables, visualizations, etc. No naked code or graphs. (Figures and Tables should have captions.)\nThe expectation is that you turn in a reproducible Quarto file and accompanying pdf or html file. If you plan to turn in the project in a different format, please check with the professor in advance.\n\n\nDue Dates\n\nTuesday, January 16. Email prof with dataset details and idea for project. Include the following:\n\nQuestion of interest that you hope to address.\nHolistic description of the dataset(s) (a few sentences).\nDescription of the observational units and columns in each data table.\nFull reference for data citation.\nLink to the resources.\n\nEnd of week 2. We will have some time in class to work on the project.\nTuesday, January 23. Completed project is due.\n\n\n:::"
  },
  {
    "objectID": "slides/2024-01-08-db.html#what-is-a-database",
    "href": "slides/2024-01-08-db.html#what-is-a-database",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "What is a database?",
    "text": "What is a database?\n\nstructured collection of data organized with\n\nefficient storage\neasy retrieval\nconsistent management\n\ndata stored in tables which are linked to one another via keys"
  },
  {
    "objectID": "slides/2024-01-08-db.html#tidy-data",
    "href": "slides/2024-01-08-db.html#tidy-data",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "Tidy data",
    "text": "Tidy data\n\ndata frame (R) or table (SQL)\ncolumns of variables\nrows of observational units"
  },
  {
    "objectID": "slides/2024-01-08-db.html#differences-between-r-and-sql",
    "href": "slides/2024-01-08-db.html#differences-between-r-and-sql",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "Differences between R and SQL",
    "text": "Differences between R and SQL\n\ntables in SQL databases can be arbitrarily large\n\nlive in storage, computer’s hard drive (usually remote)\n\ndata frames in R\n\nlive in memory (RAM) on your personal computer\n\ntables in a database are linked via a key."
  },
  {
    "objectID": "slides/2024-01-08-db.html#sql-connection",
    "href": "slides/2024-01-08-db.html#sql-connection",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "SQL connection",
    "text": "SQL connection\nTo set up a SQL connection, you need the location of the server (host) as well as a username and password.\n\ncon_air &lt;- DBI::dbConnect(\n  RMariaDB::MariaDB(),\n  dbname = \"airlines\",\n  host = Sys.getenv(\"MDSR_HOST\"),\n  user = Sys.getenv(\"MDSR_USER\"),\n  password = Sys.getenv(\"MDSR_PWD\")\n)\n\nHadley Wickham discusses how to use Sys.getenv: https://cran.r-project.org/web/packages/httr/vignettes/secrets.html"
  },
  {
    "objectID": "slides/2024-01-08-db.html#sql-tables-as-tbl",
    "href": "slides/2024-01-08-db.html#sql-tables-as-tbl",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "SQL tables as tbl",
    "text": "SQL tables as tbl\n\ncarriers &lt;- dplyr::tbl(con_air, \"carriers\")\ndim(carriers)\n\n[1] NA  2\n\nhead(carriers)\n\n# Source:   SQL [6 x 2]\n# Database: mysql  [mdsr_public@mdsr.cdc7tgkkqd0n.us-east-1.rds.amazonaws.com:NA/airlines]\n  carrier name                         \n  &lt;chr&gt;   &lt;chr&gt;                        \n1 02Q     Titan Airways                \n2 04Q     Tradewind Aviation           \n3 05Q     Comlux Aviation, AG          \n4 06Q     Master Top Linhas Aereas Ltd.\n5 07Q     Flair Airlines Ltd.          \n6 09Q     Swift Air, LLC"
  },
  {
    "objectID": "slides/2024-01-08-db.html#sql-tables-as-tibble",
    "href": "slides/2024-01-08-db.html#sql-tables-as-tibble",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "SQL tables as tibble",
    "text": "SQL tables as tibble\nThe function collect() copies a SQL table from it’s server location on disk to your local memory location in R.\n\ncarriers_tibble &lt;- carriers |&gt;\n  dplyr::collect()\n\ndim(carriers_tibble)\n\n[1] 1610    2\n\nhead(carriers_tibble)\n\n# A tibble: 6 × 2\n  carrier name                         \n  &lt;chr&gt;   &lt;chr&gt;                        \n1 02Q     Titan Airways                \n2 04Q     Tradewind Aviation           \n3 05Q     Comlux Aviation, AG          \n4 06Q     Master Top Linhas Aereas Ltd.\n5 07Q     Flair Airlines Ltd.          \n6 09Q     Swift Air, LLC"
  },
  {
    "objectID": "slides/2024-01-08-db.html#how-much-space-does-carriers-take-up",
    "href": "slides/2024-01-08-db.html#how-much-space-does-carriers-take-up",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "How much space does carriers take up?",
    "text": "How much space does carriers take up?\nThe data frame in R takes up 2 orders of magnitude of memory more than the table which just points to the object in SQL.\n\ncarriers |&gt;\n  object.size() |&gt;\n  print(units = \"Kb\")\n\n5.2 Kb\n\ncarriers_tibble |&gt;\n  object.size() |&gt;\n  print(units = \"Kb\")\n\n234.8 Kb"
  },
  {
    "objectID": "slides/2024-01-08-db.html#what-is-sql-structured-query-language",
    "href": "slides/2024-01-08-db.html#what-is-sql-structured-query-language",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "What is SQL (Structured Query Language) ?",
    "text": "What is SQL (Structured Query Language) ?\n\nSQL is a programming language for working with relational databases.\nSQL has been around since the 1970s, but has, unfortunately, many different dialects.\nTo connect to the Smith and mdsr databases (via R and DBeaver), we will use MySQL.\nTo connect to DuckDB, we will use the dialect native to DuckDB."
  },
  {
    "objectID": "slides/2024-01-08-db.html#translating-dplyr-code-into-sql",
    "href": "slides/2024-01-08-db.html#translating-dplyr-code-into-sql",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "1. Translating dplyr code into SQL",
    "text": "1. Translating dplyr code into SQL\nThe function dbListTables() in the DBI package will tell us what tables exist in the airlines database.\n\nDBI::dbListTables(con_air)\n\n[1] \"airports\" \"carriers\" \"flights\"  \"planes\"  \n\nflights &lt;- dplyr::tbl(con_air, \"flights\")\ncarriers &lt;- dplyr::tbl(con_air, \"carriers\")"
  },
  {
    "objectID": "slides/2024-01-08-db.html#translating-dplyr-code-into-sql-1",
    "href": "slides/2024-01-08-db.html#translating-dplyr-code-into-sql-1",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "1. Translating dplyr code into SQL",
    "text": "1. Translating dplyr code into SQL\n\nOver what years is the flights data taken?\n\n\nyrs &lt;- flights |&gt;\n  summarize(min_year = min(year), max_year = max(year))\n\nyrs\n\n# Source:   SQL [1 x 2]\n# Database: mysql  [mdsr_public@mdsr.cdc7tgkkqd0n.us-east-1.rds.amazonaws.com:NA/airlines]\n  min_year max_year\n     &lt;int&gt;    &lt;int&gt;\n1     2010     2017"
  },
  {
    "objectID": "slides/2024-01-08-db.html#translating-dplyr-code-into-sql-2",
    "href": "slides/2024-01-08-db.html#translating-dplyr-code-into-sql-2",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "1. Translating dplyr code into SQL",
    "text": "1. Translating dplyr code into SQL\nBecause flights is not actually a data.frame in R (but instead a tbl in SQL), the work that was done above was actually performed in SQL. To see the SQL code, we can use the function show_query.\n\ndplyr::show_query(yrs)\n\n&lt;SQL&gt;\nSELECT MIN(`year`) AS `min_year`, MAX(`year`) AS `max_year`\nFROM `flights`"
  },
  {
    "objectID": "slides/2024-01-08-db.html#translating-dplyr-code-into-sql-3",
    "href": "slides/2024-01-08-db.html#translating-dplyr-code-into-sql-3",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "1. Translating dplyr code into SQL",
    "text": "1. Translating dplyr code into SQL\n\nCreate a data set containing only flights between LAX and BOS in 2012.\n\n\nla_bos &lt;- flights |&gt;\n  filter(year == 2012 & ((origin == \"LAX\" & dest == \"BOS\") | \n           (origin == \"BOS\" & dest == \"LAX\"))) \n\ndplyr::show_query(la_bos)\n\n&lt;SQL&gt;\nSELECT *\nFROM `flights`\nWHERE (`year` = 2012.0 AND ((`origin` = 'LAX' AND `dest` = 'BOS') OR (`origin` = 'BOS' AND `dest` = 'LAX')))"
  },
  {
    "objectID": "slides/2024-01-08-db.html#translating-dplyr-code-into-sql-4",
    "href": "slides/2024-01-08-db.html#translating-dplyr-code-into-sql-4",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "1. Translating dplyr code into SQL",
    "text": "1. Translating dplyr code into SQL\n\ndbplyr doesn’t translate every R command into SQL.\nSQL is not a statistical software and doesn’t, for example, have a mechanism for creating data visualizations.\ntrack which R commands are connected to SQL at the dbplyr reference sheet."
  },
  {
    "objectID": "slides/2024-01-08-db.html#sql-queries-through-the-dbi-package",
    "href": "slides/2024-01-08-db.html#sql-queries-through-the-dbi-package",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "2. SQL queries through the DBI package",
    "text": "2. SQL queries through the DBI package\n\nLook at the first few rows of the flights data.\n\n\nDBI::dbGetQuery(con_air,\n                \"SELECT * FROM flights LIMIT 8;\")\n\n  year month day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n1 2010    10   1        1           2100       181      159           2320\n2 2010    10   1        1           1920       281      230           2214\n3 2010    10   1        3           2355         8      339            334\n4 2010    10   1        5           2200       125       41           2249\n5 2010    10   1        7           2245        82      104           2347\n6 2010    10   1        7             10        -3      451            500\n7 2010    10   1        7           2150       137      139           2337\n8 2010    10   1        8             15        -7      538            537\n  arr_delay carrier tailnum flight origin dest air_time distance cancelled\n1       159      XE  N11137   2558    EWR  OMA      162     1133         0\n2       256      B6  N659JB    562    FLL  SWF      131     1119         0\n3         5      B6  N563JB    701    JFK  SJU      196     1597         0\n4       112      XE  N16559   5982    IAD  BNA       82      542         0\n5        77      OO  N908SW   6433    LAX  FAT       37      209         0\n6        -9      AA  N3FRAA    700    LAX  DFW      150     1235         0\n7       122      DL  N347NW   1752    ATL  IAD       70      533         0\n8         1      CO  N73283   1740    SMF  IAH      193     1609         0\n  diverted hour minute           time_hour\n1        0   21      0 2010-10-01 21:00:00\n2        0   19     20 2010-10-01 19:20:00\n3        0   23     55 2010-10-01 23:55:00\n4        0   22      0 2010-10-01 22:00:00\n5        0   22     45 2010-10-01 22:45:00\n6        0    0     10 2010-10-01 00:10:00\n7        0   21     50 2010-10-01 21:50:00\n8        0    0     15 2010-10-01 00:15:00"
  },
  {
    "objectID": "slides/2024-01-08-db.html#sql-queries-through-the-dbi-package-1",
    "href": "slides/2024-01-08-db.html#sql-queries-through-the-dbi-package-1",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "2. SQL queries through the DBI package",
    "text": "2. SQL queries through the DBI package\n\nHow many flights per year are in the flights table?\n\n\ndbGetQuery(con_air, \n  \"SELECT year, count(*) AS num_flights FROM flights GROUP BY year ORDER BY num_flights;\")\n\n  year num_flights\n1 2016     5617658\n2 2017     5674621\n3 2015     5819079\n4 2014     5819811\n5 2011     6085281\n6 2012     6096762\n7 2013     6369482\n8 2010     6450117"
  },
  {
    "objectID": "slides/2024-01-08-db.html#direct-sql-queries-through-a-sql-chunk",
    "href": "slides/2024-01-08-db.html#direct-sql-queries-through-a-sql-chunk",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "3. Direct SQL queries through a sql chunk",
    "text": "3. Direct SQL queries through a sql chunk\nSQL queries can be written directly inside a sql chunk in RStudio.\n\n```{sql}\n#| connection: con_air\n\nSELECT * FROM flights LIMIT 8;\n```\n\n\n\n\n8 records\n\n\n\n\nyear\n\n\nmonth\n\n\nday\n\n\ndep_time\n\n\nsched_dep_time\n\n\ndep_delay\n\n\narr_time\n\n\nsched_arr_time\n\n\narr_delay\n\n\ncarrier\n\n\ntailnum\n\n\nflight\n\n\norigin\n\n\ndest\n\n\nair_time\n\n\ndistance\n\n\ncancelled\n\n\ndiverted\n\n\nhour\n\n\nminute\n\n\ntime_hour\n\n\n\n\n\n\n2010\n\n\n10\n\n\n1\n\n\n1\n\n\n2100\n\n\n181\n\n\n159\n\n\n2320\n\n\n159\n\n\nXE\n\n\nN11137\n\n\n2558\n\n\nEWR\n\n\nOMA\n\n\n162\n\n\n1133\n\n\n0\n\n\n0\n\n\n21\n\n\n0\n\n\n2010-10-01 21:00:00\n\n\n\n\n2010\n\n\n10\n\n\n1\n\n\n1\n\n\n1920\n\n\n281\n\n\n230\n\n\n2214\n\n\n256\n\n\nB6\n\n\nN659JB\n\n\n562\n\n\nFLL\n\n\nSWF\n\n\n131\n\n\n1119\n\n\n0\n\n\n0\n\n\n19\n\n\n20\n\n\n2010-10-01 19:20:00\n\n\n\n\n2010\n\n\n10\n\n\n1\n\n\n3\n\n\n2355\n\n\n8\n\n\n339\n\n\n334\n\n\n5\n\n\nB6\n\n\nN563JB\n\n\n701\n\n\nJFK\n\n\nSJU\n\n\n196\n\n\n1597\n\n\n0\n\n\n0\n\n\n23\n\n\n55\n\n\n2010-10-01 23:55:00\n\n\n\n\n2010\n\n\n10\n\n\n1\n\n\n5\n\n\n2200\n\n\n125\n\n\n41\n\n\n2249\n\n\n112\n\n\nXE\n\n\nN16559\n\n\n5982\n\n\nIAD\n\n\nBNA\n\n\n82\n\n\n542\n\n\n0\n\n\n0\n\n\n22\n\n\n0\n\n\n2010-10-01 22:00:00\n\n\n\n\n2010\n\n\n10\n\n\n1\n\n\n7\n\n\n2245\n\n\n82\n\n\n104\n\n\n2347\n\n\n77\n\n\nOO\n\n\nN908SW\n\n\n6433\n\n\nLAX\n\n\nFAT\n\n\n37\n\n\n209\n\n\n0\n\n\n0\n\n\n22\n\n\n45\n\n\n2010-10-01 22:45:00\n\n\n\n\n2010\n\n\n10\n\n\n1\n\n\n7\n\n\n10\n\n\n-3\n\n\n451\n\n\n500\n\n\n-9\n\n\nAA\n\n\nN3FRAA\n\n\n700\n\n\nLAX\n\n\nDFW\n\n\n150\n\n\n1235\n\n\n0\n\n\n0\n\n\n0\n\n\n10\n\n\n2010-10-01 00:10:00\n\n\n\n\n2010\n\n\n10\n\n\n1\n\n\n7\n\n\n2150\n\n\n137\n\n\n139\n\n\n2337\n\n\n122\n\n\nDL\n\n\nN347NW\n\n\n1752\n\n\nATL\n\n\nIAD\n\n\n70\n\n\n533\n\n\n0\n\n\n0\n\n\n21\n\n\n50\n\n\n2010-10-01 21:50:00\n\n\n\n\n2010\n\n\n10\n\n\n1\n\n\n8\n\n\n15\n\n\n-7\n\n\n538\n\n\n537\n\n\n1\n\n\nCO\n\n\nN73283\n\n\n1740\n\n\nSMF\n\n\nIAH\n\n\n193\n\n\n1609\n\n\n0\n\n\n0\n\n\n0\n\n\n15\n\n\n2010-10-01 00:15:00"
  },
  {
    "objectID": "slides/2024-01-08-db.html#direct-sql-queries-through-a-sql-chunk-1",
    "href": "slides/2024-01-08-db.html#direct-sql-queries-through-a-sql-chunk-1",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "3. Direct SQL queries through a sql chunk",
    "text": "3. Direct SQL queries through a sql chunk\nSQL queries can be written directly inside a sql chunk in RStudio.\n\n```{sql}\n#| connection: con_air\n\nSELECT year, count(*) AS num_flights \n       FROM flights \n       GROUP BY year \n       ORDER BY num_flights;\n```\n\n\n\n\n8 records\n\n\n\n\nyear\n\n\nnum_flights\n\n\n\n\n\n\n2016\n\n\n5617658\n\n\n\n\n2017\n\n\n5674621\n\n\n\n\n2015\n\n\n5819079\n\n\n\n\n2014\n\n\n5819811\n\n\n\n\n2011\n\n\n6085281\n\n\n\n\n2012\n\n\n6096762\n\n\n\n\n2013\n\n\n6369482\n\n\n\n\n2010\n\n\n6450117"
  },
  {
    "objectID": "slides/2024-01-08-db.html#sql-queries-via-the-dbi-package",
    "href": "slides/2024-01-08-db.html#sql-queries-via-the-dbi-package",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "2. SQL queries via the DBI package",
    "text": "2. SQL queries via the DBI package\n\nLook at the first few rows of the flights data.\n\n\nDBI::dbGetQuery(con_air,\n                \"SELECT * FROM flights LIMIT 8;\")\n\n  year month day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n1 2010    10   1        1           2100       181      159           2320\n2 2010    10   1        1           1920       281      230           2214\n3 2010    10   1        3           2355         8      339            334\n4 2010    10   1        5           2200       125       41           2249\n5 2010    10   1        7           2245        82      104           2347\n6 2010    10   1        7             10        -3      451            500\n7 2010    10   1        7           2150       137      139           2337\n8 2010    10   1        8             15        -7      538            537\n  arr_delay carrier tailnum flight origin dest air_time distance cancelled\n1       159      XE  N11137   2558    EWR  OMA      162     1133         0\n2       256      B6  N659JB    562    FLL  SWF      131     1119         0\n3         5      B6  N563JB    701    JFK  SJU      196     1597         0\n4       112      XE  N16559   5982    IAD  BNA       82      542         0\n5        77      OO  N908SW   6433    LAX  FAT       37      209         0\n6        -9      AA  N3FRAA    700    LAX  DFW      150     1235         0\n7       122      DL  N347NW   1752    ATL  IAD       70      533         0\n8         1      CO  N73283   1740    SMF  IAH      193     1609         0\n  diverted hour minute           time_hour\n1        0   21      0 2010-10-01 21:00:00\n2        0   19     20 2010-10-01 19:20:00\n3        0   23     55 2010-10-01 23:55:00\n4        0   22      0 2010-10-01 22:00:00\n5        0   22     45 2010-10-01 22:45:00\n6        0    0     10 2010-10-01 00:10:00\n7        0   21     50 2010-10-01 21:50:00\n8        0    0     15 2010-10-01 00:15:00"
  },
  {
    "objectID": "slides/2024-01-08-db.html#sql-queries-via-the-dbi-package-1",
    "href": "slides/2024-01-08-db.html#sql-queries-via-the-dbi-package-1",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "2. SQL queries via the DBI package",
    "text": "2. SQL queries via the DBI package\n\nHow many flights per year are in the flights table?\n\n\nDBI::dbGetQuery(con_air, \n  \"SELECT year, count(*) AS num_flights FROM flights GROUP BY year ORDER BY num_flights;\")\n\n  year num_flights\n1 2016     5617658\n2 2017     5674621\n3 2015     5819079\n4 2014     5819811\n5 2011     6085281\n6 2012     6096762\n7 2013     6369482\n8 2010     6450117"
  },
  {
    "objectID": "slides/2024-01-08-db.html#direct-sql-queries-via-sql-chunks",
    "href": "slides/2024-01-08-db.html#direct-sql-queries-via-sql-chunks",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "3. Direct SQL queries via sql chunks",
    "text": "3. Direct SQL queries via sql chunks\nSQL queries can be written directly inside a sql chunk in RStudio.\n\n```{sql}\n#| connection: con_air\n\nSELECT * FROM flights LIMIT 8;\n```\n\n\n\n\n8 records\n\n\n\n\nyear\n\n\nmonth\n\n\nday\n\n\ndep_time\n\n\nsched_dep_time\n\n\ndep_delay\n\n\narr_time\n\n\nsched_arr_time\n\n\narr_delay\n\n\ncarrier\n\n\ntailnum\n\n\nflight\n\n\norigin\n\n\ndest\n\n\nair_time\n\n\ndistance\n\n\ncancelled\n\n\ndiverted\n\n\nhour\n\n\nminute\n\n\ntime_hour\n\n\n\n\n\n\n2010\n\n\n10\n\n\n1\n\n\n1\n\n\n2100\n\n\n181\n\n\n159\n\n\n2320\n\n\n159\n\n\nXE\n\n\nN11137\n\n\n2558\n\n\nEWR\n\n\nOMA\n\n\n162\n\n\n1133\n\n\n0\n\n\n0\n\n\n21\n\n\n0\n\n\n2010-10-01 21:00:00\n\n\n\n\n2010\n\n\n10\n\n\n1\n\n\n1\n\n\n1920\n\n\n281\n\n\n230\n\n\n2214\n\n\n256\n\n\nB6\n\n\nN659JB\n\n\n562\n\n\nFLL\n\n\nSWF\n\n\n131\n\n\n1119\n\n\n0\n\n\n0\n\n\n19\n\n\n20\n\n\n2010-10-01 19:20:00\n\n\n\n\n2010\n\n\n10\n\n\n1\n\n\n3\n\n\n2355\n\n\n8\n\n\n339\n\n\n334\n\n\n5\n\n\nB6\n\n\nN563JB\n\n\n701\n\n\nJFK\n\n\nSJU\n\n\n196\n\n\n1597\n\n\n0\n\n\n0\n\n\n23\n\n\n55\n\n\n2010-10-01 23:55:00\n\n\n\n\n2010\n\n\n10\n\n\n1\n\n\n5\n\n\n2200\n\n\n125\n\n\n41\n\n\n2249\n\n\n112\n\n\nXE\n\n\nN16559\n\n\n5982\n\n\nIAD\n\n\nBNA\n\n\n82\n\n\n542\n\n\n0\n\n\n0\n\n\n22\n\n\n0\n\n\n2010-10-01 22:00:00\n\n\n\n\n2010\n\n\n10\n\n\n1\n\n\n7\n\n\n2245\n\n\n82\n\n\n104\n\n\n2347\n\n\n77\n\n\nOO\n\n\nN908SW\n\n\n6433\n\n\nLAX\n\n\nFAT\n\n\n37\n\n\n209\n\n\n0\n\n\n0\n\n\n22\n\n\n45\n\n\n2010-10-01 22:45:00\n\n\n\n\n2010\n\n\n10\n\n\n1\n\n\n7\n\n\n10\n\n\n-3\n\n\n451\n\n\n500\n\n\n-9\n\n\nAA\n\n\nN3FRAA\n\n\n700\n\n\nLAX\n\n\nDFW\n\n\n150\n\n\n1235\n\n\n0\n\n\n0\n\n\n0\n\n\n10\n\n\n2010-10-01 00:10:00\n\n\n\n\n2010\n\n\n10\n\n\n1\n\n\n7\n\n\n2150\n\n\n137\n\n\n139\n\n\n2337\n\n\n122\n\n\nDL\n\n\nN347NW\n\n\n1752\n\n\nATL\n\n\nIAD\n\n\n70\n\n\n533\n\n\n0\n\n\n0\n\n\n21\n\n\n50\n\n\n2010-10-01 21:50:00\n\n\n\n\n2010\n\n\n10\n\n\n1\n\n\n8\n\n\n15\n\n\n-7\n\n\n538\n\n\n537\n\n\n1\n\n\nCO\n\n\nN73283\n\n\n1740\n\n\nSMF\n\n\nIAH\n\n\n193\n\n\n1609\n\n\n0\n\n\n0\n\n\n0\n\n\n15\n\n\n2010-10-01 00:15:00"
  },
  {
    "objectID": "slides/2024-01-08-db.html#direct-sql-queries-via-sql-chunks-1",
    "href": "slides/2024-01-08-db.html#direct-sql-queries-via-sql-chunks-1",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "3. Direct SQL queries via sql chunks",
    "text": "3. Direct SQL queries via sql chunks\nSQL queries can be written directly inside a sql chunk in RStudio.\n\n```{sql}\n#| connection: con_air\n\nSELECT year, count(*) AS num_flights \n       FROM flights \n       GROUP BY year \n       ORDER BY num_flights;\n```\n\n\n\n\n8 records\n\n\n\n\nyear\n\n\nnum_flights\n\n\n\n\n\n\n2016\n\n\n5617658\n\n\n\n\n2017\n\n\n5674621\n\n\n\n\n2015\n\n\n5819079\n\n\n\n\n2014\n\n\n5819811\n\n\n\n\n2011\n\n\n6085281\n\n\n\n\n2012\n\n\n6096762\n\n\n\n\n2013\n\n\n6369482\n\n\n\n\n2010\n\n\n6450117"
  },
  {
    "objectID": "handout/lab1_db_sds261_j24.html#advice-for-turning-in-the-assignment",
    "href": "handout/lab1_db_sds261_j24.html#advice-for-turning-in-the-assignment",
    "title": "Lab 1 - working with Databases",
    "section": "Advice for turning in the assignment",
    "text": "Advice for turning in the assignment\n\nrender early and often. In fact, go ahead and render your .qmd file right now. Maybe set a timer so that you render every 5 minutes. Do not wait until you are done with the assignment to render\nsave the .Rproj file somewhere you can find it. Don’t keep everything in your downloads folder. Maybe make a folder called SDS261 or something. That folder could live on your Desktop. Or maybe in your Dropbox."
  },
  {
    "objectID": "github.html#render-your-work",
    "href": "github.html#render-your-work",
    "title": "Working on assignments with GitHub",
    "section": "Render your work",
    "text": "Render your work\nDon’t forget to put your name on the assignment. Also, make sure that you Render to pdf. Render early and often. The more often you Render, the fewer headaches you will have.\n\n\n\n\n\nAlways pull before you start. pull-work-render-commit-push"
  },
  {
    "objectID": "slides/2024-01-08-db.html#steps-for-weekly-homework",
    "href": "slides/2024-01-08-db.html#steps-for-weekly-homework",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "Steps for weekly homework",
    "text": "Steps for weekly homework\n\nReceive a link to the new assignment (clicking on the link will create a new private repo)\n\nUse RStudio\n\nNew Project, version control, Git\n\nClone the repo using SSH\n\n\nCreate a new file sds261-lab#-lname-fname.qmd. (If the .qmd file already exists, rename the file to sds261-lab#-lname-fname.qmd.)\nDo the assignment\n\ncommit and push after every problem\n\n\nFor work done in DBeaver (.sql files), use the same naming convention: sds261-lab#-lname-fname.sql.\nAll necessary files must be in the same folder (e.g., data, .sql files, etc.)"
  },
  {
    "objectID": "handout/lab1_db_sds261_j24.html#assignment",
    "href": "handout/lab1_db_sds261_j24.html#assignment",
    "title": "Lab 1 - working with Databases",
    "section": "Assignment",
    "text": "Assignment\nPreliminary: You’ll need to create a quarto document. To do so click on: New file -&gt; quarto document.\n\nThe document should be saved in the R Project as lab1-sds261-yourlastname-yourfirstname.qmd.\nThe yaml at the top of the file should look like this (change the author and date fields):\n\n---\ntitle: 'Lab 1 - working with Databases'\nauthor: 'your name goes here'\ndate: 'due 10am Tuesday, January 9, 2024'\nexecute:\n  echo: true\n  warning: false\n  message: false\n---\nFor much of the assignment, Consider the task of figuring out how many flights came into or flew out of Bradley International Airport (BDL) last year.\n\nSet up a connection within an R chunk. See the README file.\n\n\nPull in the flights table as a tbl (do not use collect()!). Use dplyr commands to calculate the number of flights that flew into or out of BDL in 2012. Then use dplyr::show_query() to output the SQL query. (All done inside an R chunk.)\n\n\nAgain, inside an R chunk, use DBI::dbGetQuery() to run the SQL code calculated in the previous question.\n\n\nNow, inside a SQL chunk, use the SQL commands directly (same task: how many flights in and out of BDL in 2012).\n\n\nRerun all three scenarios, using the tictoc R package to see which method calculates the desired number most quickly. Below is an example of how to use tictoc. For the SQL chunk, you’ll need to place tic() in an R chunk before the SQL chunk and toc() in an R chunk after the SQL chunk. Write 1-2 sentences describing the results.\n\n\nlibrary(tictoc)\n\ntic()\nrand_numbers &lt;- rnorm(1000000)\nquantile(rand_numbers)\n\n           0%           25%           50%           75%          100% \n-4.7441954424 -0.6750814407  0.0006767307  0.6734974364  5.6445201338 \n\ntoc()\n\n0.097 sec elapsed\n\n\n\nUsing R on the tbl.\n\n\nUsing dbGetQuery().\n\n\nUsing SQL chunk.\n\n\nNow create a tibble (not a tbl) that includes only flights in 2012 either to or from BDL (use collect()). After you have created the tibble, summarize the observations to get the count. Use tictoc to evaluate how long the process takes. Write 1-2 sentences describing the results.\n\n\nDBeaver: open DBeaver from your applications. Following the instructions in the DBeaver online notes, set up a connection to the mdsr SQL server. Create a file called lab1-sds261-yourlastname-yourfirstname.sql and SAVE THE FILE in the lab1 R Project folder. Run the same SQL code as above. Did you get the same result? Were there any adjustments to the SQL code from above? Explain in a few sentences.\n\n\nReflect on at least 3 things that you learned during this lab. It could be about technical aspects. It could be about understanding databases. It could be about the difference between R and SQL. Anything you learned while doing the lab.\n\n\nAlways a good idea to terminate the SQL connection when you are done with it.\n\n\ndbDisconnect(con_air, shutdown = TRUE)\n\n\nrender - commit - push to GitHub. You should push three files, those with extensions .qmd, .html, and .sql. In a browser, look at your GitHub website to make sure that all three files were successfully pushed to the correct repo (yours for lab1)."
  },
  {
    "objectID": "slides/2024-01-08-db.html#good-practice",
    "href": "slides/2024-01-08-db.html#good-practice",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "Good practice",
    "text": "Good practice\nAlways a good idea to terminate the SQL connection when you are done with it.\n\ndbDisconnect(con_air, shutdown = TRUE)"
  },
  {
    "objectID": "handout/lab1_db_sds261_j24_sol.html",
    "href": "handout/lab1_db_sds261_j24_sol.html",
    "title": "Lab 1 - working with Databases",
    "section": "",
    "text": "Solution\n\n\n\n\n\n\nlibrary(tidyverse)\nlibrary(DBI)\nlibrary(RMariaDB)\nlibrary(dbplyr)\nlibrary(mdsr)\nToday’s lab will provide practice working with the different tools we can use to implement SQL code. We haven’t covered much SQL syntax, so the focus will be more on the tools than on writing code. You should, however, be trying to understand the SQL code as you go along.\nThe goals for lab 1 include:"
  },
  {
    "objectID": "handout/lab1_db_sds261_j24_sol.html#advice-for-turning-in-the-assignment",
    "href": "handout/lab1_db_sds261_j24_sol.html#advice-for-turning-in-the-assignment",
    "title": "Lab 1 - working with Databases",
    "section": "Advice for turning in the assignment",
    "text": "Advice for turning in the assignment\n\nrender early and often. In fact, go ahead and render your .qmd file right now. Maybe set a timer so that you render every 5 minutes. Do not wait until you are done with the assignment to render\nsave the .Rproj file somewhere you can find it. Don’t keep everything in your downloads folder. Maybe make a folder called SDS261 or something. That folder could live on your Desktop. Or maybe in your Dropbox."
  },
  {
    "objectID": "handout/lab1_db_sds261_j24_sol.html#assignment",
    "href": "handout/lab1_db_sds261_j24_sol.html#assignment",
    "title": "Lab 1 - working with Databases",
    "section": "Assignment",
    "text": "Assignment\nPreliminary: You’ll need to create a quarto document. To do so click on: New file -&gt; quarto document.\n\nThe document should be saved in the R Project as lab1-sds261-yourlastname-yourfirstname.qmd.\nThe yaml at the top of the file should look like this (change the author and date fields):\n\n---\ntitle: 'Lab 1 - working with Databases'\nauthor: 'your name goes here'\ndate: 'due 10am Tuesday, January 9, 2024'\nexecute:\n  echo: true\n  warning: false\n  message: false\n---\nFor much of the assignment, Consider the task of figuring out how many flights came into or flew out of Bradley International Airport (BDL) last year.\n\nSet up a connection within an R chunk. See the README file.\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\ncon_air &lt;- DBI::dbConnect(\n  RMariaDB::MariaDB(),\n  dbname = \"airlines\",\n  host = Sys.getenv(\"MDSR_HOST\"),\n  user = Sys.getenv(\"MDSR_USER\"),\n  password = Sys.getenv(\"MDSR_PWD\")\n)\n\n\n\n\n\nPull in the flights table as a tbl (do not use collect()!). Use dplyr commands to calculate the number of flights that flew into or out of BDL in 2012. Then use dplyr::show_query() to output the SQL query. (All done inside an R chunk.)\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nflights &lt;- tbl(con_air, \"flights\")\nnames(flights)\n\n [1] \"year\"           \"month\"          \"day\"            \"dep_time\"      \n [5] \"sched_dep_time\" \"dep_delay\"      \"arr_time\"       \"sched_arr_time\"\n [9] \"arr_delay\"      \"carrier\"        \"tailnum\"        \"flight\"        \n[13] \"origin\"         \"dest\"           \"air_time\"       \"distance\"      \n[17] \"cancelled\"      \"diverted\"       \"hour\"           \"minute\"        \n[21] \"time_hour\"     \n\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nbdl_query &lt;- flights |&gt;\n  filter(year == 2012 & (dest == \"BDL\" | origin == \"BDL\")) |&gt;\n  summarize(count = n())\n\nshow_query(bdl_query)\n\n&lt;SQL&gt;\nSELECT COUNT(*) AS `count`\nFROM `flights`\nWHERE (`year` = 2012.0 AND (`dest` = 'BDL' OR `origin` = 'BDL'))\n\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nThere were 41,949 flights to or from BDL in 2012.\n\n\n\n\n\nAgain, inside an R chunk, use DBI::dbGetQuery() to run the SQL code calculated in the previous question.\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nDBI::dbGetQuery(con_air, \"SELECT COUNT(*) AS `count`\nFROM `flights`\nWHERE (`year` = 2012 AND (`dest` = 'BDL' OR `origin` = 'BDL'))\")\n\n  count\n1 41949\n\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nThere were 41,949 flights to or from BDL in 2012.\n\n\n\n\n\nNow, inside a SQL chunk, use the SQL commands directly (same task: how many flights in and out of BDL in 2012).\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\n```{sql}\n#| connection: con_air\n#| unilur-solution: true\n\nSELECT COUNT(*) AS `count`\nFROM `flights`\nWHERE (`year` = 2012 AND (`dest` = 'BDL' OR `origin` = 'BDL'))\n```\n\n\n1 records\n\n\ncount\n\n\n\n\n41949\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nThere were 41,949 flights to or from BDL in 2012.\n\n\n\n\n\nRerun all three scenarios, using the tictoc R package to see which method calculates the desired number most quickly. Below is an example of how to use tictoc. For the SQL chunk, you’ll need to place tic() in an R chunk before the SQL chunk and toc() in an R chunk after the SQL chunk. Write 1-2 sentences describing the results.\n\n\nlibrary(tictoc)\n\ntic()\nrand_numbers &lt;- rnorm(1000000)\nquantile(rand_numbers)\n\n           0%           25%           50%           75%          100% \n-4.7441954424 -0.6750814407  0.0006767307  0.6734974364  5.6445201338 \n\ntoc()\n\n0.097 sec elapsed\n\n\n\nUsing R on the tbl.\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\ntic()\n\nflights &lt;- tbl(con_air, \"flights\")\n\nflights |&gt;\n  filter(year == 2012 & (dest == \"BDL\" | origin == \"BDL\")) |&gt;\n  summarize(count = n())\n\n# Source:   SQL [1 x 1]\n# Database: mysql  [mdsr_public@mdsr.cdc7tgkkqd0n.us-east-1.rds.amazonaws.com:NA/airlines]\n    count\n  &lt;int64&gt;\n1   41949\n\ntoc()\n\n5.526 sec elapsed\n\n\n\n\n\n\nUsing dbGetQuery().\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\ntic()\n\nDBI::dbGetQuery(con_air, \"SELECT COUNT(*) AS `count`\nFROM `flights`\nWHERE (`year` = 2012 AND (`dest` = 'BDL' OR `origin` = 'BDL'))\")\n\n  count\n1 41949\n\ntoc()\n\n5.258 sec elapsed\n\n\n\n\n\n\nUsing SQL chunk.\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\ntic()\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\n```{sql}\n#| connection: con_air\n#| unilur-solution: true\n\nSELECT COUNT(*) AS `count`\nFROM `flights`\nWHERE (`year` = 2012 AND (`dest` = 'BDL' OR `origin` = 'BDL'))\n```\n\n\n1 records\n\n\ncount\n\n\n\n\n41949\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\ntoc()\n\n5.515 sec elapsed\n\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nRunning the SQL code (either directly through a SQL chunk or by using DBI::dbGetQuery()) is faster than when dbplyr is used to translate R code into SQL queries.\n\n\n\n\n\nNow create a tibble (not a tbl) that includes only flights in 2012 either to or from BDL (use collect()). After you have created the tibble, summarize the observations to get the count. Use tictoc to evaluate how long the process takes. Write 1-2 sentences describing the results.\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\ntic()\n\nflights_BDL &lt;- flights |&gt;\n  filter(year == 2012 & (dest == \"BDL\" | origin == \"BDL\")) |&gt;\n  collect()\n\nflights_BDL |&gt;\n  summarize(count = n())\n\n# A tibble: 1 × 1\n  count\n  &lt;int&gt;\n1 41949\n\ntoc()\n\n5.538 sec elapsed\n\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nPulling the table into R as a dataframe slows down the calculations quite a bit.\n\n\n\n\n\nDBeaver: open DBeaver from your applications. Following the instructions in the DBeaver online notes, set up a connection to the mdsr SQL server. Create a file called lab1-sds261-yourlastname-yourfirstname.sql and SAVE THE FILE in the lab1 R Project folder. Run the same SQL code as above. Did you get the same result? Were there any adjustments to the SQL code from above? Explain in a few sentences.\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nYes, there were still 41,949 flights to and from BDL in 2012. Whew! It would have been very odd if there had been a different number because the database itself hasn’t changed at all, we are just sending the query using a different client.\nI needed to remove the back ticks from the table and variable names. R uses backticks but DBeaver does not. Good to remember.\nI had set up my connection to the entire mdsr database, so I needed to add the line USE airlines; to the top of my SQL query so that it would be able to find the flights table. I could have also specified where flights lives using: ... FROM airlines.flights....\n\n\n\n\n\nReflect on at least 3 things that you learned during this lab. It could be about technical aspects. It could be about understanding databases. It could be about the difference between R and SQL. Anything you learned while doing the lab.\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\n\nthere are different ways to run the same SQL commands\nsome approaches are more efficient than other approaches\nthe RStudio IDE is flexible in that it allows both R and SQL code\nDBeaver is a more typical SQL client in that many lines of SQL code can be written simultaneously, and the SQL connection says in tact for the entire set of queries.\nthe airlines database has a ginormous about of information which exists in four tables: airports, carriers, flights, and planes\n\n\n\n\n\n\nAlways a good idea to terminate the SQL connection when you are done with it.\n\n\ndbDisconnect(con_air, shutdown = TRUE)\n\n\nrender - commit - push to GitHub. You should push three files, those with extensions .qmd, .html, and .sql. In a browser, look at your GitHub website to make sure that all three files were successfully pushed to the correct repo (yours for lab1)."
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#nyc-taxis",
    "href": "slides/2024-01-09-clauses.html#nyc-taxis",
    "title": "SQL clauses",
    "section": "NYC Taxis",
    "text": "NYC Taxis\nConsider a database of taxi rides from the Yellow Cab company in NYC in March of 2014.\n\nFigure 1: image credit: Mariordo (Mario Roberto Durán Ortiz), CC BY-SA 3.0"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#establishing-a-sql-connection",
    "href": "slides/2024-01-09-clauses.html#establishing-a-sql-connection",
    "title": "SQL clauses",
    "section": "Establishing a SQL connection",
    "text": "Establishing a SQL connection\n\ncon_taxi &lt;- DBI::dbConnect(\n  RMariaDB::MariaDB(),\n  dbname = \"nyctaxi\",\n  host = Sys.getenv(\"MDSR_HOST\"),\n  user = Sys.getenv(\"MDSR_USER\"),\n  password = Sys.getenv(\"MDSR_PWD\")\n)"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#what-is-a-database",
    "href": "slides/2024-01-09-clauses.html#what-is-a-database",
    "title": "SQL clauses",
    "section": "What is a database?",
    "text": "What is a database?\n\nstructured collection of data organized with\n\nefficient storage\neasy retrieval\nconsistent management\n\ndata stored in tables which are linked to one another via keys"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#tidy-data",
    "href": "slides/2024-01-09-clauses.html#tidy-data",
    "title": "SQL clauses",
    "section": "Tidy data",
    "text": "Tidy data\n\ndata frame (R) or table (SQL)\ncolumns of variables\nrows of observational units"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#differences-between-r-and-sql",
    "href": "slides/2024-01-09-clauses.html#differences-between-r-and-sql",
    "title": "SQL clauses",
    "section": "Differences between R and SQL",
    "text": "Differences between R and SQL\n\ntables in SQL databases can be arbitrarily large\n\nlive in storage, computer’s hard drive (usually remote)\n\ndata frames in R\n\nlive in memory (RAM) on your personal computer\n\ntables in a database are linked via a key."
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#sql-connection",
    "href": "slides/2024-01-09-clauses.html#sql-connection",
    "title": "SQL clauses",
    "section": "SQL connection",
    "text": "SQL connection\nTo set up a SQL connection, you need the location of the server (host) as well as a username and password.\n\ncon_air &lt;- DBI::dbConnect(\n  RMariaDB::MariaDB(),\n  dbname = \"airlines\",\n  host = Sys.getenv(\"MDSR_HOST\"),\n  user = Sys.getenv(\"MDSR_USER\"),\n  password = Sys.getenv(\"MDSR_PWD\")\n)\n\nHadley Wickham discusses how to use Sys.getenv: https://cran.r-project.org/web/packages/httr/vignettes/secrets.html"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#sql-tables-as-tbl",
    "href": "slides/2024-01-09-clauses.html#sql-tables-as-tbl",
    "title": "SQL clauses",
    "section": "SQL tables as tbl",
    "text": "SQL tables as tbl\n\ncarriers &lt;- dplyr::tbl(con_air, \"carriers\")\ndim(carriers)\n\n[1] NA  2\n\nhead(carriers)\n\n# Source:   SQL [6 x 2]\n# Database: mysql  [mdsr_public@mdsr.cdc7tgkkqd0n.us-east-1.rds.amazonaws.com:NA/airlines]\n  carrier name                         \n  &lt;chr&gt;   &lt;chr&gt;                        \n1 02Q     Titan Airways                \n2 04Q     Tradewind Aviation           \n3 05Q     Comlux Aviation, AG          \n4 06Q     Master Top Linhas Aereas Ltd.\n5 07Q     Flair Airlines Ltd.          \n6 09Q     Swift Air, LLC"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#sql-tables-as-tibble",
    "href": "slides/2024-01-09-clauses.html#sql-tables-as-tibble",
    "title": "SQL clauses",
    "section": "SQL tables as tibble",
    "text": "SQL tables as tibble\nThe function collect() copies a SQL table from it’s server location on disk to your local memory location in R.\n\ncarriers_tibble &lt;- carriers |&gt;\n  dplyr::collect()\n\ndim(carriers_tibble)\n\n[1] 1610    2\n\nhead(carriers_tibble)\n\n# A tibble: 6 × 2\n  carrier name                         \n  &lt;chr&gt;   &lt;chr&gt;                        \n1 02Q     Titan Airways                \n2 04Q     Tradewind Aviation           \n3 05Q     Comlux Aviation, AG          \n4 06Q     Master Top Linhas Aereas Ltd.\n5 07Q     Flair Airlines Ltd.          \n6 09Q     Swift Air, LLC"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#how-much-space-does-carriers-take-up",
    "href": "slides/2024-01-09-clauses.html#how-much-space-does-carriers-take-up",
    "title": "SQL clauses",
    "section": "How much space does carriers take up?",
    "text": "How much space does carriers take up?\nThe data frame in R takes up 2 orders of magnitude of memory than the table which just points to the object in SQL.\n\ncarriers |&gt;\n  object.size() |&gt;\n  print(units = \"Kb\")\n\n5.2 Kb\n\ncarriers_tibble |&gt;\n  object.size() |&gt;\n  print(units = \"Kb\")\n\n234.8 Kb"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#what-is-sql-structured-query-language",
    "href": "slides/2024-01-09-clauses.html#what-is-sql-structured-query-language",
    "title": "SQL clauses",
    "section": "What is SQL (Structured Query Language) ?",
    "text": "What is SQL (Structured Query Language) ?\n\nSQL is a programming language for working with relational databases.\nSQL has been around since the 1970s, but has, unfortunately, many different dialects.\nTo connect to the Smith and mdsr databases (via R and DBeaver), we will use MySQL.\nTo connect to DuckDB, we will use the dialect native to DuckDB."
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#translating-dplyr-code-into-sql",
    "href": "slides/2024-01-09-clauses.html#translating-dplyr-code-into-sql",
    "title": "SQL clauses",
    "section": "1. Translating dplyr code into SQL",
    "text": "1. Translating dplyr code into SQL\nThe function dbListTables() in the DBI package will tell us what tables exist in the airlines database.\n\nDBI::dbListTables(con_air)\n\n[1] \"airports\" \"carriers\" \"flights\"  \"planes\"  \n\nflights &lt;- dplyr::tbl(con_air, \"flights\")\ncarriers &lt;- dplyr::tbl(con_air, \"carriers\")"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#translating-dplyr-code-into-sql-1",
    "href": "slides/2024-01-09-clauses.html#translating-dplyr-code-into-sql-1",
    "title": "SQL clauses",
    "section": "1. Translating dplyr code into SQL",
    "text": "1. Translating dplyr code into SQL\n\nOver what years is the flights data taken?\n\n\nyrs &lt;- flights |&gt;\n  summarize(min_year = min(year), max_year = max(year))\n\nyrs\n\n# Source:   SQL [1 x 2]\n# Database: mysql  [mdsr_public@mdsr.cdc7tgkkqd0n.us-east-1.rds.amazonaws.com:NA/airlines]\n  min_year max_year\n     &lt;int&gt;    &lt;int&gt;\n1     2010     2017"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#translating-dplyr-code-into-sql-2",
    "href": "slides/2024-01-09-clauses.html#translating-dplyr-code-into-sql-2",
    "title": "SQL clauses",
    "section": "1. Translating dplyr code into SQL",
    "text": "1. Translating dplyr code into SQL\nBecause flights is not actually a data.frame in R (but instead a tbl in SQL), the work that was done above was actually performed in SQL. To see the SQL code, we can use the function show_query.\n\ndplyr::show_query(yrs)\n\n&lt;SQL&gt;\nSELECT MIN(`year`) AS `min_year`, MAX(`year`) AS `max_year`\nFROM `flights`"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#translating-dplyr-code-into-sql-3",
    "href": "slides/2024-01-09-clauses.html#translating-dplyr-code-into-sql-3",
    "title": "SQL clauses",
    "section": "1. Translating dplyr code into SQL",
    "text": "1. Translating dplyr code into SQL\n\nCreate a data set containing only flights between LAX and BOS in 2012.\n\n\nla_bos &lt;- flights |&gt;\n  filter(year == 2012 & ((origin == \"LAX\" & dest == \"BOS\") | \n           (origin == \"BOS\" & dest == \"LAX\"))) \n\ndplyr::show_query(la_bos)\n\n&lt;SQL&gt;\nSELECT *\nFROM `flights`\nWHERE (`year` = 2012.0 AND ((`origin` = 'LAX' AND `dest` = 'BOS') OR (`origin` = 'BOS' AND `dest` = 'LAX')))"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#translating-dplyr-code-into-sql-4",
    "href": "slides/2024-01-09-clauses.html#translating-dplyr-code-into-sql-4",
    "title": "SQL clauses",
    "section": "1. Translating dplyr code into SQL",
    "text": "1. Translating dplyr code into SQL\n\ndbplyr doesn’t translate every R command into SQL.\nSQL is not a statistical software and doesn’t, for example, have a mechanism for creating data visualizations.\ntrack which R commands are connected to SQL at the dbplyr reference sheet."
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#sql-queries-via-the-dbi-package",
    "href": "slides/2024-01-09-clauses.html#sql-queries-via-the-dbi-package",
    "title": "SQL clauses",
    "section": "2. SQL queries via the DBI package",
    "text": "2. SQL queries via the DBI package\n\nLook at the first few rows of the flights data.\n\n\nDBI::dbGetQuery(con_air,\n                \"SELECT * FROM flights LIMIT 8;\")\n\n  year month day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n1 2010    10   1        1           2100       181      159           2320\n2 2010    10   1        1           1920       281      230           2214\n3 2010    10   1        3           2355         8      339            334\n4 2010    10   1        5           2200       125       41           2249\n5 2010    10   1        7           2245        82      104           2347\n6 2010    10   1        7             10        -3      451            500\n7 2010    10   1        7           2150       137      139           2337\n8 2010    10   1        8             15        -7      538            537\n  arr_delay carrier tailnum flight origin dest air_time distance cancelled\n1       159      XE  N11137   2558    EWR  OMA      162     1133         0\n2       256      B6  N659JB    562    FLL  SWF      131     1119         0\n3         5      B6  N563JB    701    JFK  SJU      196     1597         0\n4       112      XE  N16559   5982    IAD  BNA       82      542         0\n5        77      OO  N908SW   6433    LAX  FAT       37      209         0\n6        -9      AA  N3FRAA    700    LAX  DFW      150     1235         0\n7       122      DL  N347NW   1752    ATL  IAD       70      533         0\n8         1      CO  N73283   1740    SMF  IAH      193     1609         0\n  diverted hour minute           time_hour\n1        0   21      0 2010-10-01 21:00:00\n2        0   19     20 2010-10-01 19:20:00\n3        0   23     55 2010-10-01 23:55:00\n4        0   22      0 2010-10-01 22:00:00\n5        0   22     45 2010-10-01 22:45:00\n6        0    0     10 2010-10-01 00:10:00\n7        0   21     50 2010-10-01 21:50:00\n8        0    0     15 2010-10-01 00:15:00"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#sql-queries-via-the-dbi-package-1",
    "href": "slides/2024-01-09-clauses.html#sql-queries-via-the-dbi-package-1",
    "title": "SQL clauses",
    "section": "2. SQL queries via the DBI package",
    "text": "2. SQL queries via the DBI package\n\nHow many flights per year are in the flights table?\n\n\nDBI::dbGetQuery(con_air, \n  \"SELECT year, count(*) AS num_flights FROM flights GROUP BY year ORDER BY num_flights;\")\n\n  year num_flights\n1 2016     5617658\n2 2017     5674621\n3 2015     5819079\n4 2014     5819811\n5 2011     6085281\n6 2012     6096762\n7 2013     6369482\n8 2010     6450117"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#direct-sql-queries-via-sql-chunks",
    "href": "slides/2024-01-09-clauses.html#direct-sql-queries-via-sql-chunks",
    "title": "SQL clauses",
    "section": "3. Direct SQL queries via sql chunks",
    "text": "3. Direct SQL queries via sql chunks\nSQL queries can be written directly inside a sql chunk in RStudio.\n\n```{sql}\n#| connection: con_air\n\nSELECT * FROM flights LIMIT 8;\n```\n\n\n\n\n8 records\n\n\n\n\nyear\n\n\nmonth\n\n\nday\n\n\ndep_time\n\n\nsched_dep_time\n\n\ndep_delay\n\n\narr_time\n\n\nsched_arr_time\n\n\narr_delay\n\n\ncarrier\n\n\ntailnum\n\n\nflight\n\n\norigin\n\n\ndest\n\n\nair_time\n\n\ndistance\n\n\ncancelled\n\n\ndiverted\n\n\nhour\n\n\nminute\n\n\ntime_hour\n\n\n\n\n\n\n2010\n\n\n10\n\n\n1\n\n\n1\n\n\n2100\n\n\n181\n\n\n159\n\n\n2320\n\n\n159\n\n\nXE\n\n\nN11137\n\n\n2558\n\n\nEWR\n\n\nOMA\n\n\n162\n\n\n1133\n\n\n0\n\n\n0\n\n\n21\n\n\n0\n\n\n2010-10-01 21:00:00\n\n\n\n\n2010\n\n\n10\n\n\n1\n\n\n1\n\n\n1920\n\n\n281\n\n\n230\n\n\n2214\n\n\n256\n\n\nB6\n\n\nN659JB\n\n\n562\n\n\nFLL\n\n\nSWF\n\n\n131\n\n\n1119\n\n\n0\n\n\n0\n\n\n19\n\n\n20\n\n\n2010-10-01 19:20:00\n\n\n\n\n2010\n\n\n10\n\n\n1\n\n\n3\n\n\n2355\n\n\n8\n\n\n339\n\n\n334\n\n\n5\n\n\nB6\n\n\nN563JB\n\n\n701\n\n\nJFK\n\n\nSJU\n\n\n196\n\n\n1597\n\n\n0\n\n\n0\n\n\n23\n\n\n55\n\n\n2010-10-01 23:55:00\n\n\n\n\n2010\n\n\n10\n\n\n1\n\n\n5\n\n\n2200\n\n\n125\n\n\n41\n\n\n2249\n\n\n112\n\n\nXE\n\n\nN16559\n\n\n5982\n\n\nIAD\n\n\nBNA\n\n\n82\n\n\n542\n\n\n0\n\n\n0\n\n\n22\n\n\n0\n\n\n2010-10-01 22:00:00\n\n\n\n\n2010\n\n\n10\n\n\n1\n\n\n7\n\n\n2245\n\n\n82\n\n\n104\n\n\n2347\n\n\n77\n\n\nOO\n\n\nN908SW\n\n\n6433\n\n\nLAX\n\n\nFAT\n\n\n37\n\n\n209\n\n\n0\n\n\n0\n\n\n22\n\n\n45\n\n\n2010-10-01 22:45:00\n\n\n\n\n2010\n\n\n10\n\n\n1\n\n\n7\n\n\n10\n\n\n-3\n\n\n451\n\n\n500\n\n\n-9\n\n\nAA\n\n\nN3FRAA\n\n\n700\n\n\nLAX\n\n\nDFW\n\n\n150\n\n\n1235\n\n\n0\n\n\n0\n\n\n0\n\n\n10\n\n\n2010-10-01 00:10:00\n\n\n\n\n2010\n\n\n10\n\n\n1\n\n\n7\n\n\n2150\n\n\n137\n\n\n139\n\n\n2337\n\n\n122\n\n\nDL\n\n\nN347NW\n\n\n1752\n\n\nATL\n\n\nIAD\n\n\n70\n\n\n533\n\n\n0\n\n\n0\n\n\n21\n\n\n50\n\n\n2010-10-01 21:50:00\n\n\n\n\n2010\n\n\n10\n\n\n1\n\n\n8\n\n\n15\n\n\n-7\n\n\n538\n\n\n537\n\n\n1\n\n\nCO\n\n\nN73283\n\n\n1740\n\n\nSMF\n\n\nIAH\n\n\n193\n\n\n1609\n\n\n0\n\n\n0\n\n\n0\n\n\n15\n\n\n2010-10-01 00:15:00"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#direct-sql-queries-via-sql-chunks-1",
    "href": "slides/2024-01-09-clauses.html#direct-sql-queries-via-sql-chunks-1",
    "title": "SQL clauses",
    "section": "3. Direct SQL queries via sql chunks",
    "text": "3. Direct SQL queries via sql chunks\nSQL queries can be written directly inside a sql chunk in RStudio.\n\n```{sql}\n#| connection: con_air\n\nSELECT year, count(*) AS num_flights \n       FROM flights \n       GROUP BY year \n       ORDER BY num_flights;\n```\n\n\n\n\n8 records\n\n\n\n\nyear\n\n\nnum_flights\n\n\n\n\n\n\n2016\n\n\n5617658\n\n\n\n\n2017\n\n\n5674621\n\n\n\n\n2015\n\n\n5819079\n\n\n\n\n2014\n\n\n5819811\n\n\n\n\n2011\n\n\n6085281\n\n\n\n\n2012\n\n\n6096762\n\n\n\n\n2013\n\n\n6369482\n\n\n\n\n2010\n\n\n6450117"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#good-practice",
    "href": "slides/2024-01-09-clauses.html#good-practice",
    "title": "SQL clauses",
    "section": "Good practice",
    "text": "Good practice\nAlways a good idea to terminate the SQL connection when you are done with it.\n\ndbDisconnect(con_taxi, shutdown = TRUE)"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#steps-for-weekly-homework",
    "href": "slides/2024-01-09-clauses.html#steps-for-weekly-homework",
    "title": "SQL clauses",
    "section": "Steps for weekly homework",
    "text": "Steps for weekly homework\n\nReceive a link to the new assignment (clicking on the link will create a new private repo)\n\nUse R Studio\n\nNew Project, version control, Git\n\nClone the repo using SSH\n\n\nCreate a new file sds261-lab#-lname-fname.qmd. (If the .qmd file already exists, rename the file to sds261-lab#-lname-fname.qmd.)\nDo the assignment\n\ncommit and push after every problem\n\n\nFor work done in DBeaver (.sql files), use the same naming convention: sds261-lab#-lname-fname.sql.\nAll necessary files must be in the same folder (e.g., data, .sql files, etc.)"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#show-tables",
    "href": "slides/2024-01-09-clauses.html#show-tables",
    "title": "SQL clauses",
    "section": "SHOW TABLES",
    "text": "SHOW TABLES\nThere is only one table in the nyctaxi database. It is called yellow_old.\n\n```{sql}\n#| connection: con_taxi\n\nSHOW TABLES;\n```\n\n\n\n\n1 records\n\n\n\n\nTables_in_nyctaxi\n\n\n\n\n\n\nyellow_old"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#describe-tables",
    "href": "slides/2024-01-09-clauses.html#describe-tables",
    "title": "SQL clauses",
    "section": "DESCRIBE tables",
    "text": "DESCRIBE tables\nStill using a {sql} chunk. The DESCRIBE command shows the 18 field names (variables) in the yellow_old table. Some of the variables are characters (text) and some are numeric (either double or bigint)\n\nDESCRIBE yellow_old;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\nField\n\n\nType\n\n\nNull\n\n\nKey\n\n\nDefault\n\n\nExtra\n\n\n\n\n\n\nvendor_id\n\n\ntext\n\n\nYES\n\n\n\n\n\n\n\n\n\n\npickup_datetime\n\n\ntext\n\n\nYES\n\n\n\n\n\n\n\n\n\n\ndropoff_datetime\n\n\ntext\n\n\nYES\n\n\n\n\n\n\n\n\n\n\npassenger_count\n\n\nbigint(20)\n\n\nYES\n\n\n\n\n\n\n\n\n\n\ntrip_distance\n\n\ndouble\n\n\nYES\n\n\n\n\n\n\n\n\n\n\npickup_longitude\n\n\ndouble\n\n\nYES\n\n\n\n\n\n\n\n\n\n\npickup_latitude\n\n\ndouble\n\n\nYES\n\n\n\n\n\n\n\n\n\n\nrate_code\n\n\nbigint(20)\n\n\nYES\n\n\n\n\n\n\n\n\n\n\nstore_and_fwd_flag\n\n\ntext\n\n\nYES\n\n\n\n\n\n\n\n\n\n\ndropoff_longitude\n\n\ndouble\n\n\nYES"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#order-of-clauses",
    "href": "slides/2024-01-09-clauses.html#order-of-clauses",
    "title": "SQL clauses",
    "section": "Order of clauses",
    "text": "Order of clauses\nQueries in SQL start with the SELECT keyword and consist of several clauses, which must be written in the following order:\n\n\n\nSELECT\nFROM\nJOIN\nWHERE\n\n\n\nGROUP BY\nHAVING\nORDER BY\nLIMIT\n\n\n\nThe clauses are similar to data wrangling verbs in R."
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#select-from",
    "href": "slides/2024-01-09-clauses.html#select-from",
    "title": "SQL clauses",
    "section": "SELECT … FROM",
    "text": "SELECT … FROM\n\nstart with a SELECT, include a corresponding FROM\ncolumns may be specified or * returns every column\n\nThe shortest SQL query is the following SELECT command. Do not run this command!!! The yellow_old table has 15 million rows, and we do not want to look at them simultaneously.\n\nDO NOT RUN:  SELECT * FROM yellow_old;"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#select-from-1",
    "href": "slides/2024-01-09-clauses.html#select-from-1",
    "title": "SQL clauses",
    "section": "SELECT … FROM",
    "text": "SELECT … FROM\nMuch better for big tables:\n\nSELECT * FROM yellow_old LIMIT 0, 14;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\nvendor_id\n\n\npickup_datetime\n\n\ndropoff_datetime\n\n\npassenger_count\n\n\ntrip_distance\n\n\npickup_longitude\n\n\npickup_latitude\n\n\nrate_code\n\n\nstore_and_fwd_flag\n\n\ndropoff_longitude\n\n\ndropoff_latitude\n\n\npayment_type\n\n\nfare_amount\n\n\nsurcharge\n\n\nmta_tax\n\n\ntip_amount\n\n\ntolls_amount\n\n\ntotal_amount\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCMT\n\n\n2014-03-01 01:07:38\n\n\n2014-03-01 01:16:26\n\n\n1\n\n\n2.0\n\n\n-74.0\n\n\n40.7\n\n\n1\n\n\nN\n\n\n-73.9\n\n\n40.7\n\n\nCRD\n\n\n9.0\n\n\n0.5\n\n\n0.5\n\n\n2.0\n\n\n0\n\n\n12.0\n\n\n\n\nCMT\n\n\n2014-03-01 01:08:03\n\n\n2014-03-01 01:12:51\n\n\n2\n\n\n1.2\n\n\n-74.0\n\n\n40.7\n\n\n1\n\n\nN\n\n\n-74.0\n\n\n40.7\n\n\nCRD\n\n\n6.0\n\n\n0.5\n\n\n0.5\n\n\n1.0\n\n\n0\n\n\n8.0\n\n\n\n\nCMT\n\n\n2014-03-01 01:08:51\n\n\n2014-03-01 01:13:18\n\n\n3\n\n\n0.5\n\n\n-73.9\n\n\n40.7\n\n\n1\n\n\nN\n\n\n-74.0\n\n\n40.7\n\n\nCRD\n\n\n5.0\n\n\n0.5\n\n\n0.5\n\n\n1.2\n\n\n0\n\n\n7.2\n\n\n\n\nCMT\n\n\n2014-03-01 01:09:20\n\n\n2014-03-01 01:24:18\n\n\n3\n\n\n3.5\n\n\n-74.0\n\n\n40.7\n\n\n1\n\n\nN\n\n\n-74.0\n\n\n40.8\n\n\nCRD\n\n\n14.0\n\n\n0.5\n\n\n0.5\n\n\n3.0\n\n\n0\n\n\n18.0\n\n\n\n\nCMT\n\n\n2014-03-01 01:09:46\n\n\n2014-03-01 01:22:34\n\n\n1\n\n\n1.8\n\n\n-74.0\n\n\n40.7\n\n\n1\n\n\nN\n\n\n-74.0\n\n\n40.7\n\n\nCRD\n\n\n10.5\n\n\n0.5\n\n\n0.5\n\n\n1.0\n\n\n0\n\n\n12.5\n\n\n\n\nCMT\n\n\n2014-03-01 01:12:41\n\n\n2014-03-01 01:15:38\n\n\n1\n\n\n0.5\n\n\n-74.0\n\n\n40.7\n\n\n1\n\n\nN\n\n\n-74.0\n\n\n40.7\n\n\nCRD\n\n\n4.0\n\n\n0.5\n\n\n0.5\n\n\n0.5\n\n\n0\n\n\n5.5\n\n\n\n\nCMT\n\n\n2014-03-01 01:12:11\n\n\n2014-03-01 01:27:38\n\n\n2\n\n\n3.7\n\n\n-74.0\n\n\n40.8\n\n\n1\n\n\nN\n\n\n-74.0\n\n\n40.7\n\n\nCRD\n\n\n14.5\n\n\n0.5\n\n\n0.5\n\n\n3.1\n\n\n0\n\n\n18.6\n\n\n\n\nCMT\n\n\n2014-03-01 01:13:55\n\n\n2014-03-01 01:34:54\n\n\n1\n\n\n5.4\n\n\n-74.0\n\n\n40.8\n\n\n1\n\n\nN\n\n\n-74.0\n\n\n40.7\n\n\nCRD\n\n\n20.0\n\n\n0.5\n\n\n0.5\n\n\n3.0\n\n\n0\n\n\n24.0\n\n\n\n\nCMT\n\n\n2014-03-01 01:14:06\n\n\n2014-03-01 01:28:25\n\n\n1\n\n\n3.5\n\n\n-74.0\n\n\n40.7\n\n\n1\n\n\nN\n\n\n-74.0\n\n\n40.8\n\n\nCRD\n\n\n13.5\n\n\n0.5\n\n\n0.5\n\n\n2.9\n\n\n0\n\n\n17.4"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#select-from-2",
    "href": "slides/2024-01-09-clauses.html#select-from-2",
    "title": "SQL clauses",
    "section": "SELECT … FROM",
    "text": "SELECT … FROM\nHow do we know how many taxi rides are recorded? Two different ways of counting the rows:\n\nSELECT COUNT(*), SUM(1) FROM yellow_old LIMIT 0, 14;\n\n\n\n\n1 records\n\n\n\n\nCOUNT(*)\n\n\nSUM(1)\n\n\n\n\n\n\n15428128\n\n\n15428128\n\n\n\n\n\n\n\nYikes, more than 15 million taxi rides!"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#select-from-3",
    "href": "slides/2024-01-09-clauses.html#select-from-3",
    "title": "SQL clauses",
    "section": "SELECT … FROM",
    "text": "SELECT … FROM\nWhat is the length of a taxi ride (in time)? … unfortunately, pickup_datetime and dropoff_datetime are saved as character strings instead of in DateTime format.\n\nSELECT\n      pickup_datetime, dropoff_datetime,\n      STR_TO_DATE(pickup_datetime, \"%Y-%m-%d %T\") AS pickup,\n      STR_TO_DATE(dropoff_datetime, \"%Y-%m-%d %T\") AS dropoff\n   FROM yellow_old\n   LIMIT 0, 10;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\npickup_datetime\n\n\ndropoff_datetime\n\n\npickup\n\n\ndropoff\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n2014-03-01 01:07:38\n\n\n2014-03-01 01:16:26\n\n\n2014-03-01 01:07:38\n\n\n2014-03-01 01:16:26\n\n\n\n\n2014-03-01 01:08:03\n\n\n2014-03-01 01:12:51\n\n\n2014-03-01 01:08:03\n\n\n2014-03-01 01:12:51\n\n\n\n\n2014-03-01 01:08:51\n\n\n2014-03-01 01:13:18\n\n\n2014-03-01 01:08:51\n\n\n2014-03-01 01:13:18\n\n\n\n\n2014-03-01 01:09:20\n\n\n2014-03-01 01:24:18\n\n\n2014-03-01 01:09:20\n\n\n2014-03-01 01:24:18\n\n\n\n\n2014-03-01 01:09:46\n\n\n2014-03-01 01:22:34\n\n\n2014-03-01 01:09:46\n\n\n2014-03-01 01:22:34\n\n\n\n\n2014-03-01 01:12:41\n\n\n2014-03-01 01:15:38\n\n\n2014-03-01 01:12:41\n\n\n2014-03-01 01:15:38\n\n\n\n\n2014-03-01 01:12:11\n\n\n2014-03-01 01:27:38\n\n\n2014-03-01 01:12:11\n\n\n2014-03-01 01:27:38\n\n\n\n\n2014-03-01 01:13:55\n\n\n2014-03-01 01:34:54\n\n\n2014-03-01 01:13:55\n\n\n2014-03-01 01:34:54\n\n\n\n\n2014-03-01 01:14:06\n\n\n2014-03-01 01:28:25\n\n\n2014-03-01 01:14:06\n\n\n2014-03-01 01:28:25"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#select-from-4",
    "href": "slides/2024-01-09-clauses.html#select-from-4",
    "title": "SQL clauses",
    "section": "SELECT … FROM",
    "text": "SELECT … FROM\nWhy can’t we find the difference between the new two time variables?\n\nSELECT\n      pickup_datetime, dropoff_datetime,\n      STR_TO_DATE(pickup_datetime, \"%Y-%m-%d %T\") AS pickup,\n      STR_TO_DATE(dropoff_datetime, \"%Y-%m-%d %T\") AS dropoff,\n      TIMEDIFF(pickup, dropoff) AS length_time\n   FROM yellow_old\n   LIMIT 0, 10;\n\nError: Unknown column 'pickup' in 'field list' [1054]"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#select-from-5",
    "href": "slides/2024-01-09-clauses.html#select-from-5",
    "title": "SQL clauses",
    "section": "SELECT … FROM",
    "text": "SELECT … FROM\nSolution 1: two layers of SELECT\n\nfirst SELECT (i.e., inside) layer creates the new variables\nsecond SELECT (i.e., outside) layer subtracts the two times\n\n\nSELECT \n   pickup,\n   dropoff, \n   TIMEDIFF(pickup, dropoff) AS length_time \nFROM (\n   SELECT\n      STR_TO_DATE(pickup_datetime, \"%Y-%m-%d %T\") AS pickup,\n      STR_TO_DATE(dropoff_datetime, \"%Y-%m-%d %T\") AS dropoff\n   FROM yellow_old)\n   AS subquery_table\nLIMIT 0, 20;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\npickup\n\n\ndropoff\n\n\nlength_time\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n2014-03-01 01:07:38\n\n\n2014-03-01 01:16:26\n\n\n00:08:48\n\n\n\n\n2014-03-01 01:08:03\n\n\n2014-03-01 01:12:51\n\n\n00:04:48\n\n\n\n\n2014-03-01 01:08:51\n\n\n2014-03-01 01:13:18\n\n\n00:04:27\n\n\n\n\n2014-03-01 01:09:20\n\n\n2014-03-01 01:24:18\n\n\n00:14:58\n\n\n\n\n2014-03-01 01:09:46\n\n\n2014-03-01 01:22:34\n\n\n00:12:48\n\n\n\n\n2014-03-01 01:12:41\n\n\n2014-03-01 01:15:38\n\n\n00:02:57\n\n\n\n\n2014-03-01 01:12:11\n\n\n2014-03-01 01:27:38\n\n\n00:15:27\n\n\n\n\n2014-03-01 01:13:55\n\n\n2014-03-01 01:34:54\n\n\n00:20:59\n\n\n\n\n2014-03-01 01:14:06\n\n\n2014-03-01 01:28:25\n\n\n00:14:19"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#select-from-6",
    "href": "slides/2024-01-09-clauses.html#select-from-6",
    "title": "SQL clauses",
    "section": "SELECT … FROM",
    "text": "SELECT … FROM\nSolution 2: apply the STR_TO_DATE() function inside the TIMEDIFF() function\n\nSELECT \n   pickup_datetime,\n   dropoff_datetime, \n   TIMEDIFF(STR_TO_DATE(pickup_datetime, \"%Y-%m-%d %T\"), \n            STR_TO_DATE(dropoff_datetime, \"%Y-%m-%d %T\")) AS length_time \nFROM yellow_old\nLIMIT 0, 20;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\npickup_datetime\n\n\ndropoff_datetime\n\n\nlength_time\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n2014-03-01 01:07:38\n\n\n2014-03-01 01:16:26\n\n\n00:08:48\n\n\n\n\n2014-03-01 01:08:03\n\n\n2014-03-01 01:12:51\n\n\n00:04:48\n\n\n\n\n2014-03-01 01:08:51\n\n\n2014-03-01 01:13:18\n\n\n00:04:27\n\n\n\n\n2014-03-01 01:09:20\n\n\n2014-03-01 01:24:18\n\n\n00:14:58\n\n\n\n\n2014-03-01 01:09:46\n\n\n2014-03-01 01:22:34\n\n\n00:12:48\n\n\n\n\n2014-03-01 01:12:41\n\n\n2014-03-01 01:15:38\n\n\n00:02:57\n\n\n\n\n2014-03-01 01:12:11\n\n\n2014-03-01 01:27:38\n\n\n00:15:27\n\n\n\n\n2014-03-01 01:13:55\n\n\n2014-03-01 01:34:54\n\n\n00:20:59\n\n\n\n\n2014-03-01 01:14:06\n\n\n2014-03-01 01:28:25\n\n\n00:14:19"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#important-note",
    "href": "slides/2024-01-09-clauses.html#important-note",
    "title": "SQL clauses",
    "section": "Important note:",
    "text": "Important note:\nThere is a distinction between clauses that operate on the variables of the original table versus those that operate on the variables of the results set.\npickup_datetime and dropoff_datetime are columns in the original table - they are written to disk on the SQL server.\npickup, dropoff, and length_time exist only in the results set, which is passed from the server (SQL server) to the client (e.g., RStudio or DBeaver) and is not written to disk."
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#where",
    "href": "slides/2024-01-09-clauses.html#where",
    "title": "SQL clauses",
    "section": "WHERE",
    "text": "WHERE\nThe WHERE clause is analogous to the filter() function in dplyr. However, keep in mind that there are two SQL commands that resemble the dplyr filter() function. WHERE operates on the original data in the table and HAVING operates on the result set."
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#where-1",
    "href": "slides/2024-01-09-clauses.html#where-1",
    "title": "SQL clauses",
    "section": "WHERE",
    "text": "WHERE\nWhat was the fare for those taxi rides where the tip_amount was more than $10 and the person used cash?\nNote that in SQL the equality logical is = and in R the equality logical is ==.\n\nSELECT payment_type, fare_amount, tip_amount, total_amount\nFROM yellow_old\nWHERE tip_amount &gt; 10\n   AND payment_type = \"CSH\"\nLIMIT 0, 10;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\npayment_type\n\n\nfare_amount\n\n\ntip_amount\n\n\ntotal_amount\n\n\n\n\n\n\nCSH\n\n\n65.5\n\n\n15.3\n\n\n91.8\n\n\n\n\nCSH\n\n\n52.0\n\n\n11.6\n\n\n69.4\n\n\n\n\nCSH\n\n\n52.0\n\n\n11.6\n\n\n69.4\n\n\n\n\nCSH\n\n\n55.0\n\n\n16.2\n\n\n81.2\n\n\n\n\nCSH\n\n\n71.5\n\n\n20.0\n\n\n103.5\n\n\n\n\nCSH\n\n\n70.0\n\n\n16.2\n\n\n97.1\n\n\n\n\nCSH\n\n\n95.0\n\n\n21.9\n\n\n131.2\n\n\n\n\nCSH\n\n\n62.5\n\n\n15.5\n\n\n93.0\n\n\n\n\nCSH\n\n\n66.0\n\n\n15.0\n\n\n90.0\n\n\n\n\nCSH\n\n\n65.0\n\n\n13.2\n\n\n79.2"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#where-2",
    "href": "slides/2024-01-09-clauses.html#where-2",
    "title": "SQL clauses",
    "section": "WHERE",
    "text": "WHERE\nBETWEEN can be used to specify a range of values for a numeric value. BETWEEN is inclusive.\n\nSELECT payment_type, fare_amount, tip_amount, total_amount\nFROM yellow_old\nWHERE tip_amount BETWEEN 10 and 12\n   AND payment_type = \"CSH\"\nLIMIT 0, 10;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\npayment_type\n\n\nfare_amount\n\n\ntip_amount\n\n\ntotal_amount\n\n\n\n\n\n\nCSH\n\n\n52.0\n\n\n11.6\n\n\n69.4\n\n\n\n\nCSH\n\n\n52.0\n\n\n11.6\n\n\n69.4\n\n\n\n\nCSH\n\n\n88.0\n\n\n10.0\n\n\n107.0\n\n\n\n\nCSH\n\n\n72.0\n\n\n10.0\n\n\n94.0\n\n\n\n\nCSH\n\n\n64.5\n\n\n10.0\n\n\n85.5\n\n\n\n\nCSH\n\n\n66.0\n\n\n12.0\n\n\n93.0\n\n\n\n\nCSH\n\n\n52.0\n\n\n11.6\n\n\n69.4\n\n\n\n\nCSH\n\n\n69.0\n\n\n10.0\n\n\n88.0\n\n\n\n\nCSH\n\n\n90.0\n\n\n10.0\n\n\n100.0\n\n\n\n\nCSH\n\n\n52.0\n\n\n11.6\n\n\n69.4"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#where-3",
    "href": "slides/2024-01-09-clauses.html#where-3",
    "title": "SQL clauses",
    "section": "WHERE",
    "text": "WHERE\nIN is similar to the dplyr %in% function which specifies distinct values for the variable.\n\nSELECT payment_type, fare_amount, tip_amount, total_amount\nFROM yellow_old\nWHERE tip_amount IN (10, 12)\n   AND payment_type = \"CSH\"\nLIMIT 0, 10;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\npayment_type\n\n\nfare_amount\n\n\ntip_amount\n\n\ntotal_amount\n\n\n\n\n\n\nCSH\n\n\n88.0\n\n\n10\n\n\n107.0\n\n\n\n\nCSH\n\n\n72.0\n\n\n10\n\n\n94.0\n\n\n\n\nCSH\n\n\n64.5\n\n\n10\n\n\n85.5\n\n\n\n\nCSH\n\n\n66.0\n\n\n12\n\n\n93.0\n\n\n\n\nCSH\n\n\n69.0\n\n\n10\n\n\n88.0\n\n\n\n\nCSH\n\n\n90.0\n\n\n10\n\n\n100.0\n\n\n\n\nCSH\n\n\n74.5\n\n\n10\n\n\n90.3\n\n\n\n\nCSH\n\n\n89.0\n\n\n10\n\n\n118.1\n\n\n\n\nCSH\n\n\n52.0\n\n\n10\n\n\n67.8\n\n\n\n\nCSH\n\n\n66.0\n\n\n12\n\n\n90.0"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#where-4",
    "href": "slides/2024-01-09-clauses.html#where-4",
    "title": "SQL clauses",
    "section": "WHERE",
    "text": "WHERE\nAND takes precedent over OR in the order of operations, when there are no parentheses.\n\nSELECT payment_type, fare_amount, tip_amount, total_amount\nFROM yellow_old\nWHERE tip_amount BETWEEN 10 and 12 OR \n      total_amount BETWEEN 100 and 112 AND \n      payment_type = \"CSH\"\nLIMIT 0, 10;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\npayment_type\n\n\nfare_amount\n\n\ntip_amount\n\n\ntotal_amount\n\n\n\n\n\n\nCRD\n\n\n52.0\n\n\n10.5\n\n\n63.0\n\n\n\n\nCRD\n\n\n35.0\n\n\n10.2\n\n\n51.0\n\n\n\n\nCRD\n\n\n52.0\n\n\n11.6\n\n\n69.4\n\n\n\n\nCRD\n\n\n30.5\n\n\n10.8\n\n\n47.2\n\n\n\n\nCRD\n\n\n52.0\n\n\n10.5\n\n\n63.0\n\n\n\n\nCRD\n\n\n52.0\n\n\n10.5\n\n\n63.0\n\n\n\n\nCRD\n\n\n52.0\n\n\n11.6\n\n\n69.4\n\n\n\n\nCRD\n\n\n52.0\n\n\n11.6\n\n\n69.4\n\n\n\n\nCRD\n\n\n52.0\n\n\n11.6\n\n\n69.4\n\n\n\n\nCRD\n\n\n52.0\n\n\n11.6\n\n\n69.4"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#where-5",
    "href": "slides/2024-01-09-clauses.html#where-5",
    "title": "SQL clauses",
    "section": "WHERE",
    "text": "WHERE\nParentheses take precedent over AND and OR.\n\nSELECT payment_type, fare_amount, tip_amount, total_amount\nFROM yellow_old\nWHERE (tip_amount BETWEEN 10 and 12 OR \n      total_amount BETWEEN 100 and 112 ) AND \n      payment_type = \"CSH\"\nLIMIT 0, 10;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\npayment_type\n\n\nfare_amount\n\n\ntip_amount\n\n\ntotal_amount\n\n\n\n\n\n\nCSH\n\n\n107.0\n\n\n0.0\n\n\n108.0\n\n\n\n\nCSH\n\n\n92.5\n\n\n0.0\n\n\n103.5\n\n\n\n\nCSH\n\n\n99.5\n\n\n0.0\n\n\n105.3\n\n\n\n\nCSH\n\n\n92.0\n\n\n0.0\n\n\n106.3\n\n\n\n\nCSH\n\n\n103.0\n\n\n0.0\n\n\n109.3\n\n\n\n\nCSH\n\n\n107.0\n\n\n0.0\n\n\n107.0\n\n\n\n\nCSH\n\n\n104.5\n\n\n0.0\n\n\n105.5\n\n\n\n\nCSH\n\n\n112.0\n\n\n0.0\n\n\n112.0\n\n\n\n\nCSH\n\n\n52.0\n\n\n11.6\n\n\n69.4\n\n\n\n\nCSH\n\n\n52.0\n\n\n11.6\n\n\n69.4"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#group-by",
    "href": "slides/2024-01-09-clauses.html#group-by",
    "title": "SQL clauses",
    "section": "GROUP BY",
    "text": "GROUP BY\nThe GROUP BY clause will direct SQL to carry out the query separately for each category in the grouped variable.\n\naggregate functions include COUNT(), SUM(), MAX(), MIN(), and AVG().\n\n\nSELECT COUNT(*) AS num_transactions, \n       SUM(1) AS num_transactions_also,\n       SUM(2) AS double_transactions,\n       payment_type \nFROM yellow_old\nWHERE tip_amount BETWEEN 10 and 20\nGROUP BY payment_type;\n\n\n\n\n5 records\n\n\n\n\nnum_transactions\n\n\nnum_transactions_also\n\n\ndouble_transactions\n\n\npayment_type\n\n\n\n\n\n\n213872\n\n\n213872\n\n\n427744\n\n\nCRD\n\n\n\n\n78\n\n\n78\n\n\n156\n\n\nCSH\n\n\n\n\n3\n\n\n3\n\n\n6\n\n\nDIS\n\n\n\n\n7\n\n\n7\n\n\n14\n\n\nNOC\n\n\n\n\n609\n\n\n609\n\n\n1218\n\n\nUNK"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#group-by-1",
    "href": "slides/2024-01-09-clauses.html#group-by-1",
    "title": "SQL clauses",
    "section": "GROUP BY",
    "text": "GROUP BY\nFor those people who tipped between $10 and $20, what was the lowest and highest fare for each of the types of payments?\n\nSELECT COUNT(*) AS num_transactions, \n       MIN(fare_amount) AS lowest_fare,\n       MAX(fare_amount) AS highest_fare,\n       payment_type \nFROM yellow_old\nWHERE tip_amount BETWEEN 10 and 20\nGROUP BY payment_type;\n\n\n\n\n5 records\n\n\n\n\nnum_transactions\n\n\nlowest_fare\n\n\nhighest_fare\n\n\npayment_type\n\n\n\n\n\n\n213872\n\n\n0.0\n\n\n370.0\n\n\nCRD\n\n\n\n\n78\n\n\n52.0\n\n\n102.0\n\n\nCSH\n\n\n\n\n3\n\n\n52.0\n\n\n79.5\n\n\nDIS\n\n\n\n\n7\n\n\n58.0\n\n\n94.0\n\n\nNOC\n\n\n\n\n609\n\n\n4.5\n\n\n147.0\n\n\nUNK"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#group-by-2",
    "href": "slides/2024-01-09-clauses.html#group-by-2",
    "title": "SQL clauses",
    "section": "GROUP BY",
    "text": "GROUP BY\nGROUP BY will work applied to multiple columns.\nWhat is wday?\n\nSELECT COUNT(*) AS num_transactions, \n       MIN(fare_amount) AS lowest_fare,\n       MAX(fare_amount) AS highest_fare,\n       payment_type,\n       DAYNAME(STR_TO_DATE(pickup_datetime, \"%Y-%m-%d %T\")) AS wday\nFROM yellow_old\nGROUP BY payment_type, wday;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\nnum_transactions\n\n\nlowest_fare\n\n\nhighest_fare\n\n\npayment_type\n\n\nwday\n\n\n\n\n\n\n1\n\n\n\n\n\n\n\n\n\n\n\n\n1247397\n\n\n2.5\n\n\n477\n\n\nCRD\n\n\nFriday\n\n\n\n\n1278362\n\n\n-612.4\n\n\n500\n\n\nCRD\n\n\nMonday\n\n\n\n\n1533796\n\n\n2.5\n\n\n420\n\n\nCRD\n\n\nSaturday\n\n\n\n\n1324394\n\n\n2.5\n\n\n480\n\n\nCRD\n\n\nSunday\n\n\n\n\n1258098\n\n\n2.5\n\n\n500\n\n\nCRD\n\n\nThursday\n\n\n\n\n1121081\n\n\n2.5\n\n\n500\n\n\nCRD\n\n\nTuesday\n\n\n\n\n1192892\n\n\n2.5\n\n\n400\n\n\nCRD\n\n\nWednesday\n\n\n\n\n860920\n\n\n2.5\n\n\n444\n\n\nCSH\n\n\nFriday\n\n\n\n\n918653\n\n\n0.0\n\n\n873\n\n\nCSH\n\n\nMonday"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#order-by",
    "href": "slides/2024-01-09-clauses.html#order-by",
    "title": "SQL clauses",
    "section": "ORDER BY",
    "text": "ORDER BY\nORDER BY allows us to look at interesting aspects of the data by sorting the data.\n\nSELECT COUNT(*) AS num_transactions, \n       MIN(fare_amount) AS lowest_fare,\n       MAX(fare_amount) AS highest_fare,\n       payment_type,\n       DAYNAME(STR_TO_DATE(pickup_datetime, \"%Y-%m-%d %T\")) AS wday\nFROM yellow_old\nGROUP BY payment_type, wday\nORDER BY lowest_fare ASC;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\nnum_transactions\n\n\nlowest_fare\n\n\nhighest_fare\n\n\npayment_type\n\n\nwday\n\n\n\n\n\n\n1\n\n\n\n\n\n\n\n\n\n\n\n\n1278362\n\n\n-612.4\n\n\n500\n\n\nCRD\n\n\nMonday\n\n\n\n\n918653\n\n\n0.0\n\n\n873\n\n\nCSH\n\n\nMonday\n\n\n\n\n5440\n\n\n0.0\n\n\n950\n\n\nNOC\n\n\nMonday\n\n\n\n\n1537\n\n\n0.0\n\n\n102\n\n\nDIS\n\n\nMonday\n\n\n\n\n1533796\n\n\n2.5\n\n\n420\n\n\nCRD\n\n\nSaturday\n\n\n\n\n1121081\n\n\n2.5\n\n\n500\n\n\nCRD\n\n\nTuesday\n\n\n\n\n1192892\n\n\n2.5\n\n\n400\n\n\nCRD\n\n\nWednesday\n\n\n\n\n1258098\n\n\n2.5\n\n\n500\n\n\nCRD\n\n\nThursday\n\n\n\n\n1247397\n\n\n2.5\n\n\n477\n\n\nCRD\n\n\nFriday\n\n\n\n\n\n\n\nWHAT?!?!! How in the world was one of the fares -$612.40?"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#order-by-1",
    "href": "slides/2024-01-09-clauses.html#order-by-1",
    "title": "SQL clauses",
    "section": "ORDER BY",
    "text": "ORDER BY\n\nSELECT COUNT(*) AS num_transactions, \n       MIN(fare_amount) AS lowest_fare,\n       MAX(fare_amount) AS highest_fare,\n       payment_type,\n       DAYNAME(STR_TO_DATE(pickup_datetime, \"%Y-%m-%d %T\")) AS wday\nFROM yellow_old\nGROUP BY payment_type, wday\nORDER BY highest_fare DESC;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\nnum_transactions\n\n\nlowest_fare\n\n\nhighest_fare\n\n\npayment_type\n\n\nwday\n\n\n\n\n\n\n5440\n\n\n0.0\n\n\n950\n\n\nNOC\n\n\nMonday\n\n\n\n\n918653\n\n\n0.0\n\n\n873\n\n\nCSH\n\n\nMonday\n\n\n\n\n1278362\n\n\n-612.4\n\n\n500\n\n\nCRD\n\n\nMonday\n\n\n\n\n1121081\n\n\n2.5\n\n\n500\n\n\nCRD\n\n\nTuesday\n\n\n\n\n1258098\n\n\n2.5\n\n\n500\n\n\nCRD\n\n\nThursday\n\n\n\n\n1324394\n\n\n2.5\n\n\n480\n\n\nCRD\n\n\nSunday\n\n\n\n\n1247397\n\n\n2.5\n\n\n477\n\n\nCRD\n\n\nFriday\n\n\n\n\n1222\n\n\n2.5\n\n\n475\n\n\nDIS\n\n\nTuesday\n\n\n\n\n813813\n\n\n2.5\n\n\n475\n\n\nCSH\n\n\nThursday\n\n\n\n\n860920\n\n\n2.5\n\n\n444\n\n\nCSH\n\n\nFriday\n\n\n\n\n\n\n\n$950 is a lot to pay for a cab ride! But in NYC, I’d believe it."
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#order-by-2",
    "href": "slides/2024-01-09-clauses.html#order-by-2",
    "title": "SQL clauses",
    "section": "ORDER BY",
    "text": "ORDER BY\n\nSELECT COUNT(*) AS num_transactions, \n       MIN(fare_amount) AS lowest_fare,\n       MAX(fare_amount) AS highest_fare,\n       payment_type,\n       DAYNAME(STR_TO_DATE(pickup_datetime, \"%Y-%m-%d %T\")) AS wday\nFROM yellow_old\nGROUP BY payment_type, wday\nORDER BY wday, payment_type;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\nnum_transactions\n\n\nlowest_fare\n\n\nhighest_fare\n\n\npayment_type\n\n\nwday\n\n\n\n\n\n\n1\n\n\n\n\n\n\n\n\n\n\n\n\n1247397\n\n\n2.5\n\n\n477\n\n\nCRD\n\n\nFriday\n\n\n\n\n860920\n\n\n2.5\n\n\n444\n\n\nCSH\n\n\nFriday\n\n\n\n\n1592\n\n\n2.5\n\n\n255\n\n\nDIS\n\n\nFriday\n\n\n\n\n5252\n\n\n2.5\n\n\n229\n\n\nNOC\n\n\nFriday\n\n\n\n\n10131\n\n\n2.5\n\n\n130\n\n\nUNK\n\n\nFriday\n\n\n\n\n1278362\n\n\n-612.4\n\n\n500\n\n\nCRD\n\n\nMonday\n\n\n\n\n918653\n\n\n0.0\n\n\n873\n\n\nCSH\n\n\nMonday\n\n\n\n\n1537\n\n\n0.0\n\n\n102\n\n\nDIS\n\n\nMonday\n\n\n\n\n5440\n\n\n0.0\n\n\n950\n\n\nNOC\n\n\nMonday"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#order-by-3",
    "href": "slides/2024-01-09-clauses.html#order-by-3",
    "title": "SQL clauses",
    "section": "ORDER BY",
    "text": "ORDER BY\n\n\n\nNote that both GROUP BY and ORDER BY evaluate the data after it has been retrieved. Therefore, the functions operate on the results set, not the original rows of the data.\n\n\n\nWe are able to GROUP BY and ORDER BY on the new variables we had created, wday."
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#having",
    "href": "slides/2024-01-09-clauses.html#having",
    "title": "SQL clauses",
    "section": "HAVING",
    "text": "HAVING\nRecall that WHERE acts only on the original data. If we are interested in rides that took place on Friday, we need to use the derived variable wday instead of the raw variable pickup_datetime. Fortunately, HAVING works on the results set."
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#having-1",
    "href": "slides/2024-01-09-clauses.html#having-1",
    "title": "SQL clauses",
    "section": "HAVING",
    "text": "HAVING\n\nSELECT COUNT(*) AS num_transactions, \n       MIN(fare_amount) AS lowest_fare,\n       MAX(fare_amount) AS highest_fare,\n       payment_type,\n       DAYNAME(STR_TO_DATE(pickup_datetime, \"%Y-%m-%d %T\")) AS wday\nFROM yellow_old\nGROUP BY payment_type, wday\nHAVING wday = 'Friday';\n\n\n\n\n5 records\n\n\n\n\nnum_transactions\n\n\nlowest_fare\n\n\nhighest_fare\n\n\npayment_type\n\n\nwday\n\n\n\n\n\n\n1247397\n\n\n2.5\n\n\n477\n\n\nCRD\n\n\nFriday\n\n\n\n\n860920\n\n\n2.5\n\n\n444\n\n\nCSH\n\n\nFriday\n\n\n\n\n1592\n\n\n2.5\n\n\n255\n\n\nDIS\n\n\nFriday\n\n\n\n\n5252\n\n\n2.5\n\n\n229\n\n\nNOC\n\n\nFriday\n\n\n\n\n10131\n\n\n2.5\n\n\n130\n\n\nUNK\n\n\nFriday"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#having-2",
    "href": "slides/2024-01-09-clauses.html#having-2",
    "title": "SQL clauses",
    "section": "HAVING",
    "text": "HAVING\nWhile it worked out quite well for us that HAVING was able to filter the data based on the results set, the use of HAVING was quite onerous because the entire data set was considered before the filter was applied. That is, if the filter can be done on the original data using WHERE, the query will be much faster and more efficient.\nNote: HAVING requires a GROUP BY clause. And the variable(s) used in HAVING must also be part of the GROUP BY clause."
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#limit",
    "href": "slides/2024-01-09-clauses.html#limit",
    "title": "SQL clauses",
    "section": "LIMIT",
    "text": "LIMIT\nLIMIT truncates the query to specified rows. The first number is the offset (i.e., the number of rows to skip), the second number is the (maximum) number of rows to return. Here, we return rows 15428119 through 15428128.\nThe first number is optional.\n\nSELECT * FROM yellow_old LIMIT 15428118, 10;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\nvendor_id\n\n\npickup_datetime\n\n\ndropoff_datetime\n\n\npassenger_count\n\n\ntrip_distance\n\n\npickup_longitude\n\n\npickup_latitude\n\n\nrate_code\n\n\nstore_and_fwd_flag\n\n\ndropoff_longitude\n\n\ndropoff_latitude\n\n\npayment_type\n\n\nfare_amount\n\n\nsurcharge\n\n\nmta_tax\n\n\ntip_amount\n\n\ntolls_amount\n\n\ntotal_amount\n\n\n\n\n\n\nCMT\n\n\n2014-03-18 14:35:21\n\n\n2014-03-18 14:52:01\n\n\n1\n\n\n2.7\n\n\n0\n\n\n0.0\n\n\n1\n\n\nN\n\n\n0\n\n\n0.0\n\n\nCRD\n\n\n13.0\n\n\n0\n\n\n0.5\n\n\n2.50\n\n\n0.00\n\n\n16.0\n\n\n\n\nCMT\n\n\n2014-03-18 14:08:23\n\n\n2014-03-18 14:19:29\n\n\n2\n\n\n1.3\n\n\n0\n\n\n0.0\n\n\n1\n\n\nN\n\n\n0\n\n\n0.0\n\n\nCRD\n\n\n9.0\n\n\n0\n\n\n0.5\n\n\n1.90\n\n\n0.00\n\n\n11.4\n\n\n\n\nCMT\n\n\n2014-03-18 09:18:38\n\n\n2014-03-18 09:19:41\n\n\n1\n\n\n0.2\n\n\n-74\n\n\n40.8\n\n\n1\n\n\nN\n\n\n-74\n\n\n40.8\n\n\nCRD\n\n\n3.0\n\n\n0\n\n\n0.5\n\n\n1.00\n\n\n0.00\n\n\n4.5\n\n\n\n\nCMT\n\n\n2014-03-18 06:28:12\n\n\n2014-03-18 06:49:49\n\n\n1\n\n\n9.9\n\n\n0\n\n\n0.0\n\n\n1\n\n\nN\n\n\n0\n\n\n0.0\n\n\nCRD\n\n\n30.0\n\n\n0\n\n\n0.5\n\n\n7.16\n\n\n5.33\n\n\n43.0\n\n\n\n\nCMT\n\n\n2014-03-18 17:39:28\n\n\n2014-03-18 17:53:01\n\n\n1\n\n\n4.9\n\n\n-74\n\n\n40.8\n\n\n1\n\n\nN\n\n\n-74\n\n\n40.7\n\n\nCRD\n\n\n16.5\n\n\n1\n\n\n0.5\n\n\n3.00\n\n\n0.00\n\n\n21.0\n\n\n\n\nCMT\n\n\n2014-03-18 18:14:19\n\n\n2014-03-18 18:27:22\n\n\n1\n\n\n0.3\n\n\n-74\n\n\n40.7\n\n\n1\n\n\nN\n\n\n-74\n\n\n40.7\n\n\nCRD\n\n\n3.5\n\n\n1\n\n\n0.5\n\n\n6.00\n\n\n0.00\n\n\n11.0\n\n\n\n\nCMT\n\n\n2014-03-18 10:12:33\n\n\n2014-03-18 10:28:09\n\n\n1\n\n\n3.3\n\n\n-74\n\n\n40.8\n\n\n1\n\n\nN\n\n\n-74\n\n\n40.8\n\n\nCRD\n\n\n13.5\n\n\n0\n\n\n0.5\n\n\n4.20\n\n\n0.00\n\n\n18.2\n\n\n\n\nCMT\n\n\n2014-03-18 09:02:37\n\n\n2014-03-18 09:16:29\n\n\n1\n\n\n6.2\n\n\n-74\n\n\n40.8\n\n\n1\n\n\nN\n\n\n-74\n\n\n40.7\n\n\nCRD\n\n\n19.5\n\n\n0\n\n\n0.5\n\n\n1.00\n\n\n0.00\n\n\n21.0\n\n\n\n\nCMT\n\n\n2014-03-18 10:10:19\n\n\n2014-03-18 10:19:25\n\n\n1\n\n\n1.7\n\n\n-74\n\n\n40.8\n\n\n1\n\n\nN\n\n\n-74\n\n\n40.8\n\n\nCRD\n\n\n8.5\n\n\n0\n\n\n0.5\n\n\n1.80\n\n\n0.00\n\n\n10.8\n\n\n\n\nCMT\n\n\n2014-03-18 15:24:53\n\n\n2014-03-18 15:42:42\n\n\n1\n\n\n1.7\n\n\n-74\n\n\n40.8\n\n\n1\n\n\nN\n\n\n-74\n\n\n40.7\n\n\nCRD\n\n\n12.5\n\n\n0\n\n\n0.5\n\n\n2.60\n\n\n0.00\n\n\n15.6"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#saving-sql-queries-as-r-objects",
    "href": "slides/2024-01-09-clauses.html#saving-sql-queries-as-r-objects",
    "title": "SQL clauses",
    "section": "Saving SQL queries as R objects",
    "text": "Saving SQL queries as R objects\nIf you are working in R to run SQL commands, you may want to use the query output for further analysis or visualizations.\n\nuse #|output.var: \"name_of_variable\" inside the {sql} chunk.\nname_of_variable will then be available to be used in the R environment.\n\n\n```{sql}\n#| connection: con_taxi\n#| label: new-table\n#| output.var: \"new_table\"\n\nSELECT *, DAYNAME(STR_TO_DATE(pickup_datetime, \"%Y-%m-%d %T\")) AS wday\nFROM yellow_old \nLIMIT 0, 1000;\n```"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#saving-sql-queries-as-r-objects-1",
    "href": "slides/2024-01-09-clauses.html#saving-sql-queries-as-r-objects-1",
    "title": "SQL clauses",
    "section": "Saving SQL queries as R objects",
    "text": "Saving SQL queries as R objects\n\n```{r}\nnew_table |&gt;\n  drop_na(wday) |&gt;\n  ggplot(aes(x = fare_amount, y = tip_amount, color = wday)) + \n  geom_point() \n```"
  },
  {
    "objectID": "slides/2024-01-08-db.html#the-airlines-database",
    "href": "slides/2024-01-08-db.html#the-airlines-database",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "The airlines database",
    "text": "The airlines database\nConsider a database of US flights between 2010 and 2017. The flights are downloaded from the Bureau of Transportation Statistics, US Department of Transportation. The database is a superset of the nycflights13 R package that tracks only flights in and out of airports serving New York City in 2013."
  },
  {
    "objectID": "handout/ws4_sds261_j24.html",
    "href": "handout/ws4_sds261_j24.html",
    "title": "WS4 - regular expressions I",
    "section": "",
    "text": "Your Name: __________________________________\nNames of people you worked with: __________________________________\n\nIntroduce yourself. What is the most challenging thing you have to do in the next 10 days?\nWhat classes are you taking in the spring? How many of them are SDS?\n\nTask:\nThe Jewish Festival of Lights is written as ה כ נ ח in Hebrew and translated to many different spellings in English. The correct English spelling of the holiday can be given in any of the following thirteen variants, according to https://www.holidays.net/chanukah/spelling.htm.\n\nlights &lt;- c(\"Chanuka\", \"Chanukah\", \"Chanukkah\", \"Channukah\", \"Hanukah\", \"Hannukah\",\n            \"Hanukkah\", \"Hanuka\", \"Hanukka\", \"Hanaka\", \"Haneka\", \"Hanika\", \"Khanukkah\")\n\nlights\n\n [1] \"Chanuka\"   \"Chanukah\"  \"Chanukkah\" \"Channukah\" \"Hanukah\"   \"Hannukah\" \n [7] \"Hanukkah\"  \"Hanuka\"    \"Hanukka\"   \"Hanaka\"    \"Haneka\"    \"Hanika\"   \n[13] \"Khanukkah\"\n\n\nProvide a regular expression which will capture all thirteen variants.\n\nSolution:\n[CHK]h?ann?[aeiu]kk?ah?\n\ngrepl(\"[CHK]h?ann?[aeiu]kk?ah?\", lights)\n\n [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n\n\n\n\n\nReusehttps://creativecommons.org/licenses/by/4.0/"
  },
  {
    "objectID": "handout/lab2_clauses_sds261_j24.html",
    "href": "handout/lab2_clauses_sds261_j24.html",
    "title": "Lab 2 - SQL clauses",
    "section": "",
    "text": "Today’s lab will provide practice working with SQL clauses in DBeaver. Don’t forget the importance of the order of the SQL clauses.\nThe goals for lab 2 include:"
  },
  {
    "objectID": "handout/lab2_clauses_sds261_j24.html#advice-for-turning-in-the-assignment",
    "href": "handout/lab2_clauses_sds261_j24.html#advice-for-turning-in-the-assignment",
    "title": "Lab 2 - SQL clauses",
    "section": "Advice for turning in the assignment",
    "text": "Advice for turning in the assignment\n\nBe sure to indicate (in the .sql file) which problem is being answered with which SQL code. Use the following syntax to comment within a .sql file: /* here is where comments go */. Indeed, feel free to copy the question into the .sql file so that you have it for your own records.\nsave the .Rproj file somewhere you can find it. Don’t keep everything in your downloads folder. Maybe make a folder called SDS261 or something. That folder could live on your Desktop. Or maybe in your Dropbox.\nThe SQL document should be saved in the R Project as lab2-sds261-yourlastname-yourfirstname.sql. You will have to navigate to the R Project to save the DBeaver file in the correct place.\nConnect to the nyctaxi database, which contains the yellow_old table. See README file (or lab 1) for connection details."
  },
  {
    "objectID": "handout/lab2_clauses_sds261_j24.html#assignment",
    "href": "handout/lab2_clauses_sds261_j24.html#assignment",
    "title": "Lab 2 - SQL clauses",
    "section": "Assignment",
    "text": "Assignment\n\nSelect the trip_distance and total_amount columns from the yellow_old table. For safety (i.e., not crashing your computer), only return the first 5 rows.\n\n\nUsing the AVG() function, find the average total_amount paid in the yellow_old table.\n\n\nWhich type of payment_type had the highest total_amount? How much was it?\n\n\nHow many taxi trips happened on each day of the week? Sort your results so that the day of the week with the fewest rides is at the top of the output.\n\n\nWhich day of the week had the longest trip_distance? Sort the results to have the day of the week with the longest rides at the top of the output.\n\n\nHow many different rate_codes are given in the dataset?\n\n\nStart with the following lines of query:\n\n\nSELECT AVG(trip_distance) AS avg_trip, \n       DAYNAME(STR_TO_DATE(pickup_datetime, \"%Y-%m-%d %T\")) AS wday\n\n\nCan you use WHERE to subset only Saturday and Sunday to find the average trip distance across the weekend? Why or why not?\nCan you use HAVING to subset only Saturday and Sunday to find the average trip distance across the weekend? Why or why not?"
  },
  {
    "objectID": "handout/lab3_joins_sds261_j24.html",
    "href": "handout/lab3_joins_sds261_j24.html",
    "title": "Lab 3 - SQL joins",
    "section": "",
    "text": "Today’s lab will provide practice working with SQL clauses in DBeaver. Don’t forget the importance of the order of the SQL clauses.\nThe goals for lab 3 include:"
  },
  {
    "objectID": "slides/2024-01-11-regex1.html#regular-expressions",
    "href": "slides/2024-01-11-regex1.html#regular-expressions",
    "title": "Regular Expressions I",
    "section": "Regular Expressions",
    "text": "Regular Expressions\n\nA regular expression … is a sequence of characters that define a search pattern. Usually such patterns are used by string searching algorithms for “find” or “find and replace” operations on strings, or for input validation. It is a technique developed in theoretical computer science and formal language theory."
  },
  {
    "objectID": "slides/2024-01-11-regex1.html#escape-sequences",
    "href": "slides/2024-01-11-regex1.html#escape-sequences",
    "title": "Regular Expressions I",
    "section": "Escape sequences",
    "text": "Escape sequences\nJust to scratch the surface, here are a few special characters that cannot be directly coded. Therefore, they are escaped with a backslash, \\.\n\n\\': single quote.\n\n\\\": double quote.\n\n\\n: newline.\n\n\\r: carriage return.\n\n\\t: tab character."
  },
  {
    "objectID": "slides/2024-01-11-regex1.html#quantifiers",
    "href": "slides/2024-01-11-regex1.html#quantifiers",
    "title": "Regular Expressions I",
    "section": "Quantifiers",
    "text": "Quantifiers\nQuantifiers specify how many repetitions of the pattern.\n\n*: matches at least 0 times.\n\n+: matches at least 1 times.\n\n?: matches at most 1 times.\n\n{n}: matches exactly n times.\n\n{n,}: matches at least n times.\n\n{n,m}: matches between n and m times."
  },
  {
    "objectID": "slides/2024-01-11-regex1.html#examples-of-quantifiers",
    "href": "slides/2024-01-11-regex1.html#examples-of-quantifiers",
    "title": "Regular Expressions I",
    "section": "Examples of quantifiers",
    "text": "Examples of quantifiers\n\nstrings &lt;- c(\"a\", \"ab\", \"acb\", \"accb\", \"acccb\", \"accccb\")\ngrep(\"ac*b\", strings, value = TRUE)\ngrep(\"ac*b\", strings, value = FALSE)\ngrep(\"ac+b\", strings, value = TRUE)\ngrep(\"ac?b\", strings, value = TRUE)\ngrep(\"ac{2}b\", strings, value = TRUE)\ngrep(\"ac{2,}b\", strings, value = TRUE)\ngrep(\"ac{2,3}b\", strings, value = TRUE)\n\ngrep() stands for “global regular expression print”. grep() returns a character vector containing the selected elements, grepl() returns a logical vector of TRUE/FALSE for whether or not there was a match."
  },
  {
    "objectID": "slides/2024-01-11-regex1.html#position-of-pattern-within-the-string",
    "href": "slides/2024-01-11-regex1.html#position-of-pattern-within-the-string",
    "title": "Regular Expressions I",
    "section": "Position of pattern within the string",
    "text": "Position of pattern within the string\n\n^: matches the start of the string.\n\n$: matches the end of the string.\n\n\\b: matches the boundary of a word. Don’t confuse it with ^ $ which marks the edge of a string.\n\n\\B: matches the empty string provided it is not at an edge of a word."
  },
  {
    "objectID": "slides/2024-01-11-regex1.html#examples-of-positions",
    "href": "slides/2024-01-11-regex1.html#examples-of-positions",
    "title": "Regular Expressions I",
    "section": "Examples of positions",
    "text": "Examples of positions\n\nstrings &lt;- c(\"abcd\", \"cdab\", \"cabd\", \"c abd\")\ngrep(\"ab\", strings, value = TRUE)\ngrep(\"^ab\", strings, value = TRUE)\ngrep(\"ab$\", strings, value = TRUE)\ngrep(\"\\\\bab\", strings, value = TRUE)"
  },
  {
    "objectID": "slides/2024-01-11-regex1.html#examples-of-quantifiers---solution",
    "href": "slides/2024-01-11-regex1.html#examples-of-quantifiers---solution",
    "title": "Regular Expressions I",
    "section": "Examples of quantifiers - solution",
    "text": "Examples of quantifiers - solution\n\nstrings &lt;- c(\"a\", \"ab\", \"acb\", \"accb\", \"acccb\", \"accccb\")\ngrep(\"ac*b\", strings, value = TRUE)\n\n[1] \"ab\"     \"acb\"    \"accb\"   \"acccb\"  \"accccb\"\n\ngrep(\"ac*b\", strings, value = FALSE)\n\n[1] 2 3 4 5 6\n\ngrep(\"ac+b\", strings, value = TRUE)\n\n[1] \"acb\"    \"accb\"   \"acccb\"  \"accccb\"\n\ngrep(\"ac?b\", strings, value = TRUE)\n\n[1] \"ab\"  \"acb\"\n\ngrep(\"ac{2}b\", strings, value = TRUE)\n\n[1] \"accb\"\n\ngrep(\"ac{2,}b\", strings, value = TRUE)\n\n[1] \"accb\"   \"acccb\"  \"accccb\"\n\ngrep(\"ac{2,3}b\", strings, value = TRUE)\n\n[1] \"accb\"  \"acccb\"\n\n\ngrep() stands for “global regular expression print”. grep() returns a character vector containing the selected elements, grepl() returns a logical vector of TRUE/FALSE for whether or not there was a match."
  },
  {
    "objectID": "slides/2024-01-11-regex1.html#examples-of-positions---solution",
    "href": "slides/2024-01-11-regex1.html#examples-of-positions---solution",
    "title": "Regular Expressions I",
    "section": "Examples of positions - solution",
    "text": "Examples of positions - solution\n\nstrings &lt;- c(\"abcd\", \"cdab\", \"cabd\", \"c abd\")\ngrep(\"ab\", strings, value = TRUE)\n\n[1] \"abcd\"  \"cdab\"  \"cabd\"  \"c abd\"\n\ngrep(\"^ab\", strings, value = TRUE)\n\n[1] \"abcd\"\n\ngrep(\"ab$\", strings, value = TRUE)\n\n[1] \"cdab\"\n\ngrep(\"\\\\bab\", strings, value = TRUE)\n\n[1] \"abcd\"  \"c abd\""
  },
  {
    "objectID": "slides/2024-01-11-regex1.html#operators",
    "href": "slides/2024-01-11-regex1.html#operators",
    "title": "Regular Expressions I",
    "section": "Operators",
    "text": "Operators\n\n.: matches any single character,\n[...]: a character list, matches any one of the characters inside the square brackets. A - inside the brackets specifies a range of characters.\n\n[^...]: an inverted character list, similar to [...], but matches any characters except those inside the square brackets.\n\n\\: suppress the special meaning of metacharacters in regular expression, i.e. $ * + . ? [ ] ^ { } | ( ) \\. Since \\ itself needs to be escaped in R, we need to escape metacharacters with double backslash like \\\\$.\n\n|: an “or” operator, matches patterns on either side of the |.\n\n(...): grouping in regular expressions. This allows you to retrieve the bits that matched various parts of your regular expression so you can alter them or use them for building up a new string."
  },
  {
    "objectID": "slides/2024-01-11-regex1.html#examples-of-operators",
    "href": "slides/2024-01-11-regex1.html#examples-of-operators",
    "title": "Regular Expressions I",
    "section": "Examples of operators",
    "text": "Examples of operators\n\nstrings &lt;- c(\"^ab\", \"ab\", \"abc\", \"abd\", \"abe\", \"ab 12\", \"a|b\")\ngrep(\"ab.\", strings, value = TRUE)\ngrep(\"ab[c-e]\", strings, value = TRUE)\ngrep(\"ab[^c]\", strings, value = TRUE)\ngrep(\"^ab\", strings, value = TRUE)\ngrep(\"\\\\^ab\", strings, value = TRUE)\ngrep(\"abc|abd\", strings, value = TRUE)\ngrep(\"a[b|c]\", strings, value = TRUE)\nstr_extract(strings, \"a[b|c]\")"
  },
  {
    "objectID": "slides/2024-01-11-regex1.html#examples-of-operators---solution",
    "href": "slides/2024-01-11-regex1.html#examples-of-operators---solution",
    "title": "Regular Expressions I",
    "section": "Examples of operators - solution",
    "text": "Examples of operators - solution\n\nstrings &lt;- c(\"^ab\", \"ab\", \"abc\", \"abd\", \"abe\", \"ab 12\", \"a|b\")\ngrep(\"ab.\", strings, value = TRUE)\n\n[1] \"abc\"   \"abd\"   \"abe\"   \"ab 12\"\n\ngrep(\"ab[c-e]\", strings, value = TRUE)\n\n[1] \"abc\" \"abd\" \"abe\"\n\ngrep(\"ab[^c]\", strings, value = TRUE)\n\n[1] \"abd\"   \"abe\"   \"ab 12\"\n\ngrep(\"^ab\", strings, value = TRUE)\n\n[1] \"ab\"    \"abc\"   \"abd\"   \"abe\"   \"ab 12\"\n\ngrep(\"\\\\^ab\", strings, value = TRUE)\n\n[1] \"^ab\"\n\ngrep(\"abc|abd\", strings, value = TRUE)\n\n[1] \"abc\" \"abd\"\n\ngrep(\"a[b|c]\", strings, value = TRUE)\n\n[1] \"^ab\"   \"ab\"    \"abc\"   \"abd\"   \"abe\"   \"ab 12\" \"a|b\"  \n\nstr_extract(strings, \"a[b|c]\")\n\n[1] \"ab\" \"ab\" \"ab\" \"ab\" \"ab\" \"ab\" \"a|\""
  },
  {
    "objectID": "slides/2024-01-11-regex1.html#character-classes",
    "href": "slides/2024-01-11-regex1.html#character-classes",
    "title": "Regular Expressions I",
    "section": "Character classes",
    "text": "Character classes\nCharacter classes allow specifying entire classes of characters, such as numbers, letters, etc. There are two flavors of character classes, one uses [: and :] around a predefined name inside square brackets and the other uses \\ and a special character. They are sometimes interchangeable.\n\n(?i) before the string indicates that the match should be case insensitive.\n[:digit:] or \\d: digits, 0 1 2 3 4 5 6 7 8 9, equivalent to [0-9].\n\n\\D: non-digits, equivalent to [^0-9].\n\n[:lower:]: lower-case letters, equivalent to [a-z].\n\n[:upper:]: upper-case letters, equivalent to [A-Z].\n\n[:alpha:]: alphabetic characters, equivalent to [[:lower:][:upper:]] or [A-z].\n\n[:alnum:]: alphanumeric characters, equivalent to [[:alpha:][:digit:]] or [A-z0-9].\n\n\\w: word characters, equivalent to [[:alnum:]_] or [A-z0-9_] (letter, number, or underscore).\n\n\\W: not word, equivalent to [^A-z0-9_].\n\n[:blank:]: blank characters, i.e. space and tab.\n\n[:space:]: space characters: tab, newline, vertical tab, form feed, carriage return, space.\n\\s: space, .\n\n\\S: not space.\n\n[:punct:]: punctuation characters, ! ” # $ % & ’ ( ) * + , - . / : ; &lt; = &gt; ? @ [  ] ^ _ ` { | } ~.\n[:graph:]: graphical (human readable) characters: equivalent to [[:alnum:][:punct:]].\n[:print:]: printable characters, equivalent to [[:alnum:][:punct:]\\\\s]."
  },
  {
    "objectID": "handout/lab4_regexp_sds261_j24.html#footnotes",
    "href": "handout/lab4_regexp_sds261_j24.html#footnotes",
    "title": "Lab 4 - regular expressions",
    "section": "Footnotes",
    "text": "Footnotes\n\n\n0-1↩︎\n0-9↩︎"
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#lookaround",
    "href": "slides/2024-01-12-regex2.html#lookaround",
    "title": "Regular Expressions II",
    "section": "Lookaround",
    "text": "Lookaround\nA lookaround specifies a place in the regular expression that will anchor the string you’d like to match.\n\n“x(?=y)” – positive lookahead (matches ‘x’ when it is followed by ‘y’)\n“x(?!y)” – negative lookahead (matches ‘x’ when it is not followed by ‘y’)\n“(?&lt;=y)x” – positive lookbehind (matches ‘x’ when it is preceded by ‘y’)\n“(?&lt;!y)x” – negative lookbehind (matches ‘x’ when it is not preceded by ‘y’)"
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#example---taskmaster",
    "href": "slides/2024-01-12-regex2.html#example---taskmaster",
    "title": "Regular Expressions II",
    "section": "Example - Taskmaster",
    "text": "Example - Taskmaster\nData scraped from the wiki site for the TV series, Taskmaster.\n\nFigure 2: Taskmaster Wiki https://taskmaster.fandom.com/wiki/Series_11"
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#goal-taskmaster-information",
    "href": "slides/2024-01-12-regex2.html#goal-taskmaster-information",
    "title": "Regular Expressions II",
    "section": "Goal: Taskmaster information",
    "text": "Goal: Taskmaster information\nOur goal is to scrape the Taskmaster wiki to create a dataframe which includes the task, description, episode, episode name, air date, contestant, score, and series.1\n\n   Task  Description     episode episode_name air_date contestant score series\n 1 1     Prize: Best th… 1       \"It's not y… 18 Marc… Charlotte… 1         11\n 2 1     Prize: Best th… 1       \"It's not y… 18 Marc… Jamali Ma… 2         11\n 3 1     Prize: Best th… 1       \"It's not y… 18 Marc… Lee Mack   4         11\n 4 1     Prize: Best th… 1       \"It's not y… 18 Marc… Mike Wozn… 5         11\n 5 1     Prize: Best th… 1       \"It's not y… 18 Marc… Sarah Ken… 3         11\n 6 2     Do the most im… 1       \"It's not y… 18 Marc… Charlotte… 2         11\n 7 2     Do the most im… 1       \"It's not y… 18 Marc… Jamali Ma… 3         11\n 8 2     Do the most im… 1       \"It's not y… 18 Marc… Lee Mack   3         11\n 9 2     Do the most im… 1       \"It's not y… 18 Marc… Mike Wozn… 5         11\n10 2     Do the most im… 1       \"It's not y… 18 Marc… Sarah Ken… 4         11\n\nThanks to Ciaran Evans at Wake Forest University for example and code, https://sta279-f23.github.io/"
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#scraping-and-wrangling-taskmaster-data",
    "href": "slides/2024-01-12-regex2.html#scraping-and-wrangling-taskmaster-data",
    "title": "Regular Expressions II",
    "section": "Scraping and wrangling Taskmaster data",
    "text": "Scraping and wrangling Taskmaster data\nOur goal is to scrape the Taskmaster wiki to create a dataframe which includes the task, description, episode, episode name, air date, contestant, score, and series.1\n\nresults &lt;- read_html(\"https://taskmaster.fandom.com/wiki/Series_11\") |&gt;\n  html_element(\".tmtable\") |&gt; \n  html_table() |&gt;\n  mutate(episode = ifelse(startsWith(Task, \"Episode\"), Task, NA)) |&gt;\n  fill(episode, .direction = \"down\") |&gt;\n  filter(!startsWith(Task, \"Episode\"), \n         !(Task %in% c(\"Total\", \"Grand Total\"))) |&gt;\n  pivot_longer(cols = -c(Task, Description, episode),\n               names_to = \"contestant\",\n               values_to = \"score\") |&gt;\n  mutate(series = 11)\n\nThanks to Ciaran Evans at Wake Forest University for example and code, https://sta279-f23.github.io/"
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#scraping-and-wrangling-taskmaster-data---results",
    "href": "slides/2024-01-12-regex2.html#scraping-and-wrangling-taskmaster-data---results",
    "title": "Regular Expressions II",
    "section": "Scraping and wrangling Taskmaster data - results",
    "text": "Scraping and wrangling Taskmaster data - results\n\nresults |&gt; \n  select(Task, Description, episode, contestant, score, series) |&gt;\n  head(10)\n\n# A tibble: 10 × 6\n  Task  Description                              episode contestant score series\n  &lt;chr&gt; &lt;chr&gt;                                    &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;  &lt;dbl&gt;\n1 1     Prize: Best thing you can carry, but on… Episod… Charlotte… 1         11\n2 1     Prize: Best thing you can carry, but on… Episod… Jamali Ma… 2         11\n3 1     Prize: Best thing you can carry, but on… Episod… Lee Mack   4         11\n4 1     Prize: Best thing you can carry, but on… Episod… Mike Wozn… 5         11\n5 1     Prize: Best thing you can carry, but on… Episod… Sarah Ken… 3         11\n6 2     Do the most impressive thing under the … Episod… Charlotte… 2         11\n# ℹ 4 more rows"
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#more-succinct-results",
    "href": "slides/2024-01-12-regex2.html#more-succinct-results",
    "title": "Regular Expressions II",
    "section": "more succinct results",
    "text": "more succinct results\n\n   Task  Description         episode   contestant score series\n  1     Prize: Best thing…  Episode 1… Charlotte… 1         11\n  1     Prize: Best thing…  Episode 1… Jamali Ma… 2         11\n  1     Prize: Best thing…  Episode 1… Lee Mack   4         11\n  1     Prize: Best thing…  Episode 1… Mike Wozn… 5         11\n  1     Prize: Best thing…  Episode 1… Sarah Ken… 3         11\n  2     Do the most…        Episode 1… Charlotte… 2         11\n  2     Do the most…        Episode 1… Jamali Ma… 3[1]      11\n  2     Do the most…        Episode 1… Lee Mack   3         11\n  2     Do the most…        Episode 1… Mike Wozn… 5         11\n  2     Do the most…        Episode 1… Sarah Ken… 4         11\n\nCurrently, the episode column contains entries like\n\n\"Episode 1: It's not your fault. (18 March 2021)\""
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#cleaning-the-score-column",
    "href": "slides/2024-01-12-regex2.html#cleaning-the-score-column",
    "title": "Regular Expressions II",
    "section": "Cleaning the score column",
    "text": "Cleaning the score column\n\ntable(results$score)\n\n\n   –    ✔    ✘    0    1    2    3 3[1] 3[2]    4 4[2]    5   DQ \n   7    1    1   11   37   42   48    1    3   50    1   55   13 \n\n\nHow should the scores be stored? What is the cleaning task?\n\nFigure 3: Taskmaster Wiki https://taskmaster.fandom.com/wiki/Series_11"
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#extracting-numeric-information",
    "href": "slides/2024-01-12-regex2.html#extracting-numeric-information",
    "title": "Regular Expressions II",
    "section": "Extracting numeric information",
    "text": "Extracting numeric information\nSuppose we have the following string:\n\n\"3[1]\"\n\nAnd we want to extract just the number “3”:\n\nstr_extract(\"3[1]\", \"3\")\n\n[1] \"3\""
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#extracting-numeric-information-1",
    "href": "slides/2024-01-12-regex2.html#extracting-numeric-information-1",
    "title": "Regular Expressions II",
    "section": "Extracting numeric information",
    "text": "Extracting numeric information\nWhat if we don’t know which number to extract?\n\nstr_extract(\"3[1]\", \"\\\\d\")\n\n[1] \"3\"\n\n\n\nstr_extract(\"4[1]\", \"\\\\d\")\n\n[1] \"4\"\n\n\n\nstr_extract(\"10[1]\", \"\\\\d\")\n\n[1] \"1\"\n\n\n\nstr_extract(\"10[1]\", \"\\\\d+\")\n\n[1] \"10\"\n\n\n\nstr_extract(\"DQ\", \"\\\\d\")\n\n[1] NA"
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#str_extract",
    "href": "slides/2024-01-12-regex2.html#str_extract",
    "title": "Regular Expressions II",
    "section": "str_extract()",
    "text": "str_extract()\nstr_extract() is an R function in the stringr package which finds regular expressions in strings of text.\n\nstr_extract(\"My cat is 3 years old\", \"cat\")\n\n[1] \"cat\"\n\n\n\nstr_extract(\"My cat is 3 years old\", \"3\")\n\n[1] \"3\""
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#matching-multiple-options",
    "href": "slides/2024-01-12-regex2.html#matching-multiple-options",
    "title": "Regular Expressions II",
    "section": "Matching multiple options",
    "text": "Matching multiple options\nstr_extract() returns the first match; str_extract_all() allows more than one match.\n\nstr_extract(\"My cat is 3 years old\", \"cat|dog\")\n\n[1] \"cat\"\n\nstr_extract(\"My dog is 10 years old\", \"cat|dog\")\n\n[1] \"dog\"\n\nstr_extract(\"My dog is 10 years old, my cat is 3 years old\", \n            \"cat|dog\")\n\n[1] \"dog\"\n\nstr_extract_all(\"My dog is 10 years old, my cat is 3 years old\", \n                \"cat|dog\")\n\n[[1]]\n[1] \"dog\" \"cat\""
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#matching-groups-of-characters",
    "href": "slides/2024-01-12-regex2.html#matching-groups-of-characters",
    "title": "Regular Expressions II",
    "section": "Matching groups of characters",
    "text": "Matching groups of characters\nWhat if I want to extract a number?\n\nstr_extract(\"My cat is 3 years old\", \"\\\\d\")\n\n[1] \"3\"\n\n\nWhat will the result be for the following code?\n\nstr_extract(\"My dog is 10 years old\", \"\\\\d\")"
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#matching-groups-of-characters-1",
    "href": "slides/2024-01-12-regex2.html#matching-groups-of-characters-1",
    "title": "Regular Expressions II",
    "section": "Matching groups of characters",
    "text": "Matching groups of characters\nWhat if I want to extract a number?\n\nstr_extract(\"My cat is 3 years old\", \"\\\\d\")\n\n[1] \"3\"\n\n\nWhat will the result be for the following code?\n\nstr_extract(\"My dog is 10 years old\", \"\\\\d\")\n\n[1] \"1\""
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#matching-groups-of-characters-2",
    "href": "slides/2024-01-12-regex2.html#matching-groups-of-characters-2",
    "title": "Regular Expressions II",
    "section": "Matching groups of characters",
    "text": "Matching groups of characters\nWhat if I want to extract a number?\n\nstr_extract(\"My cat is 3 years old\", \"\\\\d\")\n\n[1] \"3\"\n\n\nWhat will the result be for the following code?\n\nstr_extract(\"My dog is 10 years old\", \"\\\\d\")\n\n[1] \"1\"\n\n\nThe + symbol in a regular expression means “repeated one or more times”\n\nstr_extract(\"My dog is 10 years old\", \"\\\\d+\")\n\n[1] \"10\""
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#extracting-from-multiple-strings",
    "href": "slides/2024-01-12-regex2.html#extracting-from-multiple-strings",
    "title": "Regular Expressions II",
    "section": "Extracting from multiple strings",
    "text": "Extracting from multiple strings\n\nstrings &lt;- c(\"My cat is 3 years old\", \"My dog is 10 years old\")\nstr_extract(strings, \"\\\\d+\")\n\n[1] \"3\"  \"10\""
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#extracting-episode-information",
    "href": "slides/2024-01-12-regex2.html#extracting-episode-information",
    "title": "Regular Expressions II",
    "section": "Extracting episode information",
    "text": "Extracting episode information\nCurrently, the episode column contains entries like:\n\n\"Episode 2: The pie whisperer. (4 August 2015)\"\n\nHow would I extract just the episode number?"
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#extracting-episode-information-1",
    "href": "slides/2024-01-12-regex2.html#extracting-episode-information-1",
    "title": "Regular Expressions II",
    "section": "Extracting episode information",
    "text": "Extracting episode information\nCurrently, the episode column contains entries like:\n\n\"Episode 2: The pie whisperer. (4 August 2015)\"\n\nHow would I extract just the episode number?\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \"\\\\d+\")\n\n[1] \"2\""
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#extracting-episode-information-2",
    "href": "slides/2024-01-12-regex2.html#extracting-episode-information-2",
    "title": "Regular Expressions II",
    "section": "Extracting episode information",
    "text": "Extracting episode information\nCurrently, the episode column contains entries like:\n\n\"Episode 2: The pie whisperer. (4 August 2015)\"\n\nHow would I extract the episode name?\nGoal: find a pattern to match: anything that starts with a :, ends with a .\nLet’s break down that task into pieces."
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#extracting-episode-information-3",
    "href": "slides/2024-01-12-regex2.html#extracting-episode-information-3",
    "title": "Regular Expressions II",
    "section": "Extracting episode information",
    "text": "Extracting episode information\nHow can we find the period at the end of the sentence? What does each of these lines of code return?\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \".\")\n\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \".+\")\n\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \"\\\\.\")"
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#extracting-episode-information---solution",
    "href": "slides/2024-01-12-regex2.html#extracting-episode-information---solution",
    "title": "Regular Expressions II",
    "section": "Extracting episode information - solution",
    "text": "Extracting episode information - solution\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \".\")\n\n[1] \"E\"\n\n\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \".+\")\n\n[1] \"Episode 2: The pie whisperer. (4 August 2015)\"\n\n\nWe use an escape character when we actually want to choose a period:\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \"\\\\.\")\n\n[1] \".\""
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#extracting-episode-information-4",
    "href": "slides/2024-01-12-regex2.html#extracting-episode-information-4",
    "title": "Regular Expressions II",
    "section": "Extracting episode information",
    "text": "Extracting episode information\nGoal: find a pattern to match: anything that starts with a :, ends with a .\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\",\n            \":.+\\\\.\")\n\n[1] \": The pie whisperer.\""
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#extracting-episode-information-5",
    "href": "slides/2024-01-12-regex2.html#extracting-episode-information-5",
    "title": "Regular Expressions II",
    "section": "Extracting episode information",
    "text": "Extracting episode information\nGetting everything between the : and the .\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \n            \"(?&lt;=: ).+(?=\\\\.)\")\n\n[1] \"The pie whisperer\""
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#lookbehinds",
    "href": "slides/2024-01-12-regex2.html#lookbehinds",
    "title": "Regular Expressions II",
    "section": "Lookbehinds",
    "text": "Lookbehinds\n(?&lt;=) is a positive lookbehind. It is used to identify expressions which are preceded by a particular expression.\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \n            \"(?&lt;=: ).+\")\n\n[1] \"The pie whisperer. (4 August 2015)\"\n\n\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \n            \"(?&lt;=\\\\. ).+\")\n\n[1] \"(4 August 2015)\""
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#lookaheads",
    "href": "slides/2024-01-12-regex2.html#lookaheads",
    "title": "Regular Expressions II",
    "section": "Lookaheads",
    "text": "Lookaheads\n(?=) is a positive lookahead. It is used to identify expressions which are followed by a particular expression.\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \n            \".+(?=\\\\.)\")\n\n[1] \"Episode 2: The pie whisperer\"\n\n\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \n            \".+(?=:)\")\n\n[1] \"Episode 2\""
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#extracting-air-date",
    "href": "slides/2024-01-12-regex2.html#extracting-air-date",
    "title": "Regular Expressions II",
    "section": "Extracting air date",
    "text": "Extracting air date\nI want to extract just the air date. What pattern do I want to match?\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", ...)"
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#extracting-air-date-1",
    "href": "slides/2024-01-12-regex2.html#extracting-air-date-1",
    "title": "Regular Expressions II",
    "section": "Extracting air date",
    "text": "Extracting air date\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \n            \"(?&lt;=\\\\().+(?=\\\\))\")\n\n[1] \"4 August 2015\""
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#wrangling-the-episode-info",
    "href": "slides/2024-01-12-regex2.html#wrangling-the-episode-info",
    "title": "Regular Expressions II",
    "section": "Wrangling the episode info",
    "text": "Wrangling the episode info\nCurrently:\n\n\n# A tibble: 270 × 1\n  episode                                        \n  &lt;chr&gt;                                          \n1 Episode 1: It's not your fault. (18 March 2021)\n2 Episode 1: It's not your fault. (18 March 2021)\n3 Episode 1: It's not your fault. (18 March 2021)\n4 Episode 1: It's not your fault. (18 March 2021)\n5 Episode 1: It's not your fault. (18 March 2021)\n6 Episode 1: It's not your fault. (18 March 2021)\n# ℹ 264 more rows"
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#wrangling-the-episode-info-1",
    "href": "slides/2024-01-12-regex2.html#wrangling-the-episode-info-1",
    "title": "Regular Expressions II",
    "section": "Wrangling the episode info",
    "text": "Wrangling the episode info\nOne option:\n\nresults |&gt;\n  select(episode) |&gt;\n  mutate(episode_name = str_extract(episode, \"(?&lt;=: ).+(?=\\\\.)\"),\n         air_date = str_extract(episode, \"(?&lt;=\\\\().+(?=\\\\))\"),\n         episode = str_extract(episode, \"\\\\d+\"))\n\n# A tibble: 270 × 3\n  episode episode_name        air_date     \n  &lt;chr&gt;   &lt;chr&gt;               &lt;chr&gt;        \n1 1       It's not your fault 18 March 2021\n2 1       It's not your fault 18 March 2021\n3 1       It's not your fault 18 March 2021\n4 1       It's not your fault 18 March 2021\n5 1       It's not your fault 18 March 2021\n6 1       It's not your fault 18 March 2021\n# ℹ 264 more rows"
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#wrangling-the-episode-info-2",
    "href": "slides/2024-01-12-regex2.html#wrangling-the-episode-info-2",
    "title": "Regular Expressions II",
    "section": "Wrangling the episode info",
    "text": "Wrangling the episode info\nAnother option:\n\nresults |&gt;\n  separate_wider_regex(episode, \n                       patterns = c(\".+ \", \n                                    episode = \"\\\\d+\", \n                                    \": \", \n                                    episode_name = \".+\", \n                                    \"\\\\. \\\\(\", \n                                    air_date = \".+\", \n                                    \"\\\\)\"))\n\n\n\n# A tibble: 270 × 3\n  episode episode_name        air_date     \n  &lt;chr&gt;   &lt;chr&gt;               &lt;chr&gt;        \n1 1       It's not your fault 18 March 2021\n2 1       It's not your fault 18 March 2021\n3 1       It's not your fault 18 March 2021\n4 1       It's not your fault 18 March 2021\n5 1       It's not your fault 18 March 2021\n6 1       It's not your fault 18 March 2021\n# ℹ 264 more rows"
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#lookaround-1",
    "href": "slides/2024-01-12-regex2.html#lookaround-1",
    "title": "Regular Expressions II",
    "section": "Lookaround",
    "text": "Lookaround\n\nFigure 1: Image credit: Stefan Judis https://www.stefanjudis.com/blog/a-regular-expression-lookahead-lookbehind-cheat-sheet/"
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#scraping-and-wrangling-taskmaster",
    "href": "slides/2024-01-12-regex2.html#scraping-and-wrangling-taskmaster",
    "title": "Regular Expressions II",
    "section": "Scraping and wrangling Taskmaster",
    "text": "Scraping and wrangling Taskmaster\nGoal: to scrape the Taskmaster wiki into a dataframe including task, description, episode, episode name, air date, contestant, score, and series.1\n\nresults &lt;- read_html(\"https://taskmaster.fandom.com/wiki/Series_11\") |&gt;\n  html_element(\".tmtable\") |&gt; \n  html_table() |&gt;\n  mutate(episode = ifelse(startsWith(Task, \"Episode\"), Task, NA)) |&gt;\n  fill(episode, .direction = \"down\") |&gt;\n  filter(!startsWith(Task, \"Episode\"), \n         !(Task %in% c(\"Total\", \"Grand Total\"))) |&gt;\n  pivot_longer(cols = -c(Task, Description, episode),\n               names_to = \"contestant\",\n               values_to = \"score\") |&gt;\n  mutate(series = 11)\n\nThanks to Ciaran Evans at Wake Forest University for example and code, https://sta279-f23.github.io/"
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#extracting-from-multiple-strings-1",
    "href": "slides/2024-01-12-regex2.html#extracting-from-multiple-strings-1",
    "title": "Regular Expressions II",
    "section": "Extracting from multiple strings",
    "text": "Extracting from multiple strings\nWhat if we have multiple instances across multiple strings? We need to be careful working with lists (instead of vectors).\n\nstrings &lt;- c(\"My cat is 3 years old\", \"My dog is 10 years old\")\nstr_extract(strings, \"\\\\w+\")\n\n[1] \"My\" \"My\"\n\nstr_extract_all(strings, \"\\\\w+\")\n\n[[1]]\n[1] \"My\"    \"cat\"   \"is\"    \"3\"     \"years\" \"old\"  \n\n[[2]]\n[1] \"My\"    \"dog\"   \"is\"    \"10\"    \"years\" \"old\""
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#lookaround-again",
    "href": "slides/2024-01-12-regex2.html#lookaround-again",
    "title": "Regular Expressions II",
    "section": "Lookaround (again)",
    "text": "Lookaround (again)\n\nFigure 4: Image credit: Stefan Judis https://www.stefanjudis.com/blog/a-regular-expression-lookahead-lookbehind-cheat-sheet/"
  },
  {
    "objectID": "handout/lab4_regex_sds261_j24.html",
    "href": "handout/lab4_regex_sds261_j24.html",
    "title": "Lab 4 - regular expressions",
    "section": "",
    "text": "library(tidyverse)\nlibrary(stringr)\nToday’s lab will provide practice working with regular expressions in R.\nThe goals for lab 4 include:"
  },
  {
    "objectID": "handout/lab4_regex_sds261_j24.html#footnotes",
    "href": "handout/lab4_regex_sds261_j24.html#footnotes",
    "title": "Lab 4 - regular expressions",
    "section": "Footnotes",
    "text": "Footnotes\n\n\n0-1↩︎\n0-9↩︎\nLorem Ipsum from https://www.webfx.com/web-design/html-ipsum/.↩︎"
  },
  {
    "objectID": "handout/ws1_sds261_j24.html",
    "href": "handout/ws1_sds261_j24.html",
    "title": "Worksheet 1 - DB, R, SQL, Oh My!",
    "section": "",
    "text": "Your Name: __________________________________\nNames of people you worked with: __________________________________\n\nIntroduce yourself. Which dorm do you live in? What is one great thing and one lousy thing about that dorm?\nName one thing in the Syllabus / website / etc. for this class that either sounds strange/unusual or that you would like to know more about.\n\nTask: Consider a large hospital system that coordinates all aspects of health care: doctors, visits, prescriptions, surgeries, billing, etc. Let’s say that the hospital has a database which includes a series of tables linking all the needed information that they routinely collect.\n\nCome up with at least five tables which might exist in the hospital database. For each table indicate a few columns / variables.\nDraw arrows between the tables and indicate the variable(s) that link the tables. No table should be completely isolated.\n\n\nSolution:\nThe solution is taken directly from w3resource. Consider the hypothetical SQL schema diagram in Figure 1. Some of the tables and respective variables are described below.\n\nphysician\n\nemployeeid - unique ID of a physician\nname - name of physician\nposition - designation of a physician\nssn - social security number of physician\n\ndepartment\n\ndepartmentid - unique ID of the department\nname - name of the department\nhead - ID of the physician who is the head of the department, connects to the employeeid of the table physician\n\naffiliated_with\n\nphysician - ID of the physician, connects to the employeeid of the table physician\ndepartment - ID of the department, connects to the departmentid of the table department\nprimaryaffiliation - logical column which indicates whether the physicians are affiliated or not\n\nprocedure\n\ncode - unique ID of the medical procedure\nname - name of the medical procedure\ncost - cost of the medical procedure\n\ntrained_in\n\nphysician - ID of the physician, connects to the employeeid of the table physician\ntreatment - ID of the medical procedure, connects to the code of the procedure table\ncertificationdate - starting date of certification\ncertificationexpires - expiry date of certification\n\npatient\n\nssn - unique ID for each patient\nname - name of patient\naddress - address of patient\nphone - phone number of patient\n\n\n\n\n\n\n\n\n\n\nFigure 1: SQL schema describing links of tables from a hypothetical hospital database, image credit: https://www.w3resource.com/sql-exercises/hospital-database-exercise/index.php\n\n\n\n\n\n\n:::\n\n\nReuseCC BY 4.0"
  },
  {
    "objectID": "handout/lab2_clauses_sds261_j24_sol.html",
    "href": "handout/lab2_clauses_sds261_j24_sol.html",
    "title": "Lab 2 - SQL clauses",
    "section": "",
    "text": "Solution\n\n\n\n\n\n\nlibrary(tidyverse)\nlibrary(DBI)\nlibrary(RMariaDB)\nlibrary(dbplyr)\nlibrary(mdsr)\nToday’s lab will provide practice working with SQL clauses in DBeaver. Don’t forget the importance of the order of the SQL clauses.\nThe goals for lab 2 include:"
  },
  {
    "objectID": "handout/lab2_clauses_sds261_j24_sol.html#advice-for-turning-in-the-assignment",
    "href": "handout/lab2_clauses_sds261_j24_sol.html#advice-for-turning-in-the-assignment",
    "title": "Lab 2 - SQL clauses",
    "section": "Advice for turning in the assignment",
    "text": "Advice for turning in the assignment\n\nBe sure to indicate (in the .sql file) which problem is being answered with which SQL code. Use the following syntax to comment within a .sql file: /* here is where comments go */. Indeed, feel free to copy the question into the .sql file so that you have it for your own records.\nsave the .Rproj file somewhere you can find it. Don’t keep everything in your downloads folder. Maybe make a folder called SDS261 or something. That folder could live on your Desktop. Or maybe in your Dropbox.\nThe SQL document should be saved in the R Project as lab2-sds261-yourlastname-yourfirstname.sql. You will have to navigate to the R Project to save the DBeaver file in the correct place.\nConnect to the nyctaxi database, which contains the yellow_old table. See README file (or lab 1) for connection details."
  },
  {
    "objectID": "handout/lab2_clauses_sds261_j24_sol.html#assignment",
    "href": "handout/lab2_clauses_sds261_j24_sol.html#assignment",
    "title": "Lab 2 - SQL clauses",
    "section": "Assignment",
    "text": "Assignment\n\nSelect the trip_distance and total_amount columns from the yellow_old table. For safety (i.e., not crashing your computer), only return the first 5 rows.\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT trip_distance, total_amount\nFROM yellow_old\nLIMIT 0, 5;\n\n\n5 records\n\n\ntrip_distance\ntotal_amount\n\n\n\n\nNA\nNA\n\n\n2.0\n12.0\n\n\n1.2\n8.0\n\n\n0.5\n7.2\n\n\n3.5\n18.0\n\n\n\n\n\n\n\n\n\nUsing the AVG() function, find the average total_amount paid in the yellow_old table.\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT AVG(total_amount)\nFROM yellow_old\nLIMIT 0, 5;\n\n\n1 records\n\n\nAVG(total_amount)\n\n\n\n\n14.76179\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nThe average total fare was $14.76\n\n\n\n\n\nWhich type of payment_type had the highest total_amount? How much was it?\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT MAX(total_amount), payment_type\nFROM yellow_old\nGROUP BY payment_type\nLIMIT 0, 5;\n\n\n5 records\n\n\nMAX(total_amount)\npayment_type\n\n\n\n\nNA\nNA\n\n\n540.00\nCRD\n\n\n1007.51\nCSH\n\n\n484.04\nDIS\n\n\n950.30\nNOC\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nThe highest total amount was a cash payment for $1007.51. Yikes, that’s a big bill for a taxi ride. Note that the second highest payment was $950.30 for a no charge ride. How does that happen?\n\n\n\n\n\nHow many taxi trips happened on each day of the week? Sort your results so that the day of the week with the fewest rides is at the top of the output.\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT COUNT(*) AS num_transactions, \n       DAYNAME(STR_TO_DATE(pickup_datetime, \"%Y-%m-%d %T\")) AS wday\nFROM yellow_old\nGROUP BY wday\nORDER BY num_transactions;\n\n\n8 records\n\n\nnum_transactions\nwday\n\n\n\n\n1\nNA\n\n\n1887838\nTuesday\n\n\n1984031\nWednesday\n\n\n2088305\nThursday\n\n\n2125292\nFriday\n\n\n2215255\nMonday\n\n\n2364039\nSunday\n\n\n2763367\nSaturday\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nUnsurprisingly, the most rides were on the weekends. Monday is a close third, possibly a reflection of how hard it is to get out of bed on Monday mornings.\n\n\n\n\n\nWhich day of the week had the longest trip_distance? Sort the results to have the day of the week with the longest rides at the top of the output.\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT MAX(trip_distance) AS long_trip, \n       DAYNAME(STR_TO_DATE(pickup_datetime, \"%Y-%m-%d %T\")) AS wday\nFROM yellow_old\nGROUP BY wday\nORDER BY long_trip DESC;\n\n\n8 records\n\n\nlong_trip\nwday\n\n\n\n\n5005013.0\nMonday\n\n\n100.0\nWednesday\n\n\n100.0\nFriday\n\n\n100.0\nSunday\n\n\n97.4\nTuesday\n\n\n96.1\nThursday\n\n\n92.9\nSaturday\n\n\nNA\nNA\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nHoly cow, one of the trips is 5,005,013 miles! That can’t be right!??!\n\n\n\n\n\nHow many different rate_codes are given in the dataset?\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT DISTINCT rate_code\nFROM yellow_old\nLIMIT 0, 20;\n\n\nDisplaying records 1 - 10\n\n\nrate_code\n\n\n\n\nNA\n\n\n1\n\n\n2\n\n\n5\n\n\n3\n\n\n4\n\n\n0\n\n\n6\n\n\n210\n\n\n8\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT COUNT(*) AS num_code, rate_code\nFROM yellow_old\nGROUP BY rate_code\nORDER BY num_code DESC\nLIMIT 0, 20;\n\n\nDisplaying records 1 - 10\n\n\nnum_code\nrate_code\n\n\n\n\n15088481\n1\n\n\n268161\n2\n\n\n42092\n5\n\n\n22935\n3\n\n\n4676\n4\n\n\n1579\n0\n\n\n179\n6\n\n\n14\n210\n\n\n4\n8\n\n\n4\n7\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nThere are 11 different rate codes. Rate codes are different because the taxi charges you a different rate if, for example, you go to JFK or go very far away.\nThe second solution not only gave rate codes, but also the number of transactions for each rate code.\n\n\n\n\n\nStart with the following lines of query:\n\n\nSELECT AVG(trip_distance) AS avg_trip, \n       DAYNAME(STR_TO_DATE(pickup_datetime, \"%Y-%m-%d %T\")) AS wday\n\n\nCan you use WHERE to subset only Saturday and Sunday to find the average trip distance across the weekend? Why or why not?\nCan you use HAVING to subset only Saturday and Sunday to find the average trip distance across the weekend? Why or why not?\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT AVG(trip_distance) AS avg_trip, \n       DAYNAME(STR_TO_DATE(pickup_datetime, \"%Y-%m-%d %T\")) AS wday\nFROM yellow_old\nGROUP BY wday\nHAVING wday = \"Saturday\" | wday = \"Sunday\"\nLIMIT 0,8;\n\n\n0 records\n\n\navg_trip\nwday\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nNeither WHERE nor HAVING can be used with this query to find the average trip distance across the weekend days.\nWHERE cannot be used because wday is not in the original dataset. WHERE works on the original data.\nHAVING cannot be used because the average has already been taken across the groups, so there isn’t any way to go back and re-calculate the average across Saturday and Sunday. HAVING works on the results set."
  },
  {
    "objectID": "handout/lab3_joins_sds261_j24_sol.html",
    "href": "handout/lab3_joins_sds261_j24_sol.html",
    "title": "Lab 3 - SQL joins",
    "section": "",
    "text": "Solution\n\n\n\n\n\n\nlibrary(tidyverse)\nlibrary(DBI)\nlibrary(RMariaDB)\nlibrary(dbplyr)\nlibrary(mdsr)\nToday’s lab will provide practice working with SQL clauses in DBeaver. Don’t forget the importance of the order of the SQL clauses.\nThe goals for lab 3 include:"
  },
  {
    "objectID": "slides/2024-01-08-db.html",
    "href": "slides/2024-01-08-db.html",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "",
    "text": "structured collection of data organized with\n\nefficient storage\neasy retrieval\nconsistent management\n\ndata stored in tables which are linked to one another via keys\n\n\n\n\n\ndata frame (R) or table (SQL)\ncolumns of variables\nrows of observational units\n\n\n\n\n\ntables in SQL databases can be arbitrarily large\n\nlive in storage, computer’s hard drive (usually remote)\n\ndata frames in R\n\nlive in memory (RAM) on your personal computer\n\ntables in a database are linked via a key."
  },
  {
    "objectID": "slides/2024-01-11-regex1.html",
    "href": "slides/2024-01-11-regex1.html",
    "title": "Regular Expressions I",
    "section": "",
    "text": "A regular expression … is a sequence of characters that define a search pattern. Usually such patterns are used by string searching algorithms for “find” or “find and replace” operations on strings, or for input validation. It is a technique developed in theoretical computer science and formal language theory."
  },
  {
    "objectID": "slides/2024-01-12-regex2.html",
    "href": "slides/2024-01-12-regex2.html",
    "title": "Regular Expressions II",
    "section": "",
    "text": "A lookaround specifies a place in the regular expression that will anchor the string you’d like to match.\n\n“x(?=y)” – positive lookahead (matches ‘x’ when it is followed by ‘y’)\n“x(?!y)” – negative lookahead (matches ‘x’ when it is not followed by ‘y’)\n“x(?&lt;=y)” – positive lookbehind (matches ‘x’ when it is preceded by ‘y’)\n“x(?&lt;!y)” – negative lookbehind (matches ‘x’ when it is not preceded by ‘y’)"
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#footnotes",
    "href": "slides/2024-01-12-regex2.html#footnotes",
    "title": "Regular Expressions II",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nThanks to Ciaran Evans at Wake Forest University for example and code, https://sta279-f23.github.io/↩︎"
  },
  {
    "objectID": "slides/2024-01-08-db.html#tables-in-airlines-database",
    "href": "slides/2024-01-08-db.html#tables-in-airlines-database",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "Tables in airlines database",
    "text": "Tables in airlines database\n\nDBI::dbListTables(con_air)\n\n[1] \"airports\" \"carriers\" \"flights\"  \"planes\""
  },
  {
    "objectID": "slides/2024-01-08-db.html#what-is-sql",
    "href": "slides/2024-01-08-db.html#what-is-sql",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "What is SQL?",
    "text": "What is SQL?\n\nSQL is a programming language for working with relational databases.\nSQL has been around since the 1970s, but has, unfortunately, many different dialects.\nTo connect to the Smith and mdsr databases (via R and DBeaver), we will use MySQL.\nTo connect to DuckDB, we will use the dialect native to DuckDB."
  },
  {
    "objectID": "slides/2024-01-08-db.html#a-github-merge-conflict",
    "href": "slides/2024-01-08-db.html#a-github-merge-conflict",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "A GitHub merge conflict",
    "text": "A GitHub merge conflict\n\nOn GitHub (on the web) edit the README document and Commit it with a message describing what you did.\nThen, in RStudio also edit the README document with a different change.\n\nCommit your changes\nTry to push – you’ll get an error!\nTry pulling\nResolve the merge conflict and then commit and push\n\nAs you work in teams you are likely to run into merge conflicts, learning how to resolve them properly will be very important."
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#select-distinct",
    "href": "slides/2024-01-09-clauses.html#select-distinct",
    "title": "SQL clauses",
    "section": "SELECT DISTINCT",
    "text": "SELECT DISTINCT\nReturns only unique rows.\n\nSELECT DISTINCT payment_type\nFROM yellow_old\nLIMIT 0, 20;\n\n\n\n\n6 records\n\n\n\n\npayment_type\n\n\n\n\n\n\n\n\n\n\nCRD\n\n\n\n\nCSH\n\n\n\n\nNOC\n\n\n\n\nDIS\n\n\n\n\nUNK\n\n\n\n\n\n\n\n\nSELECT DISTINCT vendor_id, payment_type\nFROM yellow_old\nLIMIT 0, 20;\n\n\n\n\n8 records\n\n\n\n\nvendor_id\n\n\npayment_type\n\n\n\n\n\n\n\n\n\n\n\n\nCMT\n\n\nCRD\n\n\n\n\nCMT\n\n\nCSH\n\n\n\n\nCMT\n\n\nNOC\n\n\n\n\nCMT\n\n\nDIS\n\n\n\n\nVTS\n\n\nCRD\n\n\n\n\nVTS\n\n\nCSH\n\n\n\n\nVTS\n\n\nUNK\n\n\n\n\n\n\n\nIn case you are curious:\n\nVTS is Verifone Transportation Systems and CMT is Mobile Knowledge Systems Inc.\nCRD is credit card; CSH is cash; NOC is no charge; DIS is dispute"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#where-6",
    "href": "slides/2024-01-09-clauses.html#where-6",
    "title": "SQL clauses",
    "section": "WHERE",
    "text": "WHERE\nIS NULL not = NULL (because NULL indicates unknown)\n\nSELECT payment_type, fare_amount, tip_amount, total_amount\nFROM yellow_old\nWHERE payment_type IS NULL\nLIMIT 0, 10;\n\n\n\n\n1 records\n\n\n\n\npayment_type\n\n\nfare_amount\n\n\ntip_amount\n\n\ntotal_amount\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSELECT payment_type, fare_amount, tip_amount, total_amount\nFROM yellow_old\nWHERE payment_type = NULL\nLIMIT 0, 10;\n\n\n\n\n0 records\n\n\n\n\npayment_type\n\n\nfare_amount\n\n\ntip_amount\n\n\ntotal_amount"
  },
  {
    "objectID": "handout/lab3_joins_sds261_j24.html#best-practice",
    "href": "handout/lab3_joins_sds261_j24.html#best-practice",
    "title": "Lab 3 - SQL joins",
    "section": "Best practice",
    "text": "Best practice\nIt is always a good idea to terminate the SQL connection when you are done with it.\n\nDBI::dbDisconnect(con_yelp)"
  },
  {
    "objectID": "handout/lab3_joins_sds261_j24_sol.html#best-practice",
    "href": "handout/lab3_joins_sds261_j24_sol.html#best-practice",
    "title": "Lab 3 - SQL joins",
    "section": "Best practice",
    "text": "Best practice\nIt is always a good idea to terminate the SQL connection when you are done with it.\n\nDBI::dbDisconnect(con_yelp)"
  },
  {
    "objectID": "slides/2024-01-10-joins.html#imdb",
    "href": "slides/2024-01-10-joins.html#imdb",
    "title": "SQL joins",
    "section": "IMDb",
    "text": "IMDb\nConsider a database of information from IMDb."
  },
  {
    "objectID": "slides/2024-01-10-joins.html#join-imdb-title-votes",
    "href": "slides/2024-01-10-joins.html#join-imdb-title-votes",
    "title": "SQL joins",
    "section": "JOIN IMDb title + votes",
    "text": "JOIN IMDb title + votes\nIn the imdb database, the title table includes information about the 4,626,322 titles in the database, including the id, title, kind_id (indicator for the kind of ID it is), and production_year. It does not, however, include the review of the title.\n\nSELECT * FROM title LIMIT 0, 10;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\nid\n\n\ntitle\n\n\nimdb_index\n\n\nkind_id\n\n\nproduction_year\n\n\nimdb_id\n\n\nphonetic_code\n\n\nepisode_of_id\n\n\nseason_nr\n\n\nepisode_nr\n\n\nseries_years\n\n\nmd5sum\n\n\n\n\n\n\n78460\n\n\nAdults Recat to the Simpsons (30th Anniversary)\n\n\n\n\n7\n\n\n2017\n\n\n\n\nA3432\n\n\n78406\n\n\n\n\n\n\n\n\n2ae09eed7d576cc2c24774fed5b18168\n\n\n\n\n70273\n\n\n(2016-05-18)\n\n\n\n\n7\n\n\n2016\n\n\n\n\n\n\n68058\n\n\n\n\n\n\n\n\n511dfc14cfff7589d29a95abb30cd66a\n\n\n\n\n60105\n\n\n(2014-04-11)\n\n\n\n\n7\n\n\n2014\n\n\n\n\n\n\n59138\n\n\n\n\n\n\n\n\nc6cdce7e667e07713e431805c407feed\n\n\n\n\n32120\n\n\n(2008-05-01)\n\n\n\n\n7\n\n\n2008\n\n\n\n\n\n\n32060\n\n\n\n\n\n\n\n\n100df65742caf5afd092b2e0ead67d8e\n\n\n\n\n97554\n\n\nSchmÃ¶lders Traum\n\n\n\n\n7\n\n\n2001\n\n\n\n\nS2543\n\n\n97302\n\n\n10\n\n\n1\n\n\n\n\n46862a2f96f9fb2d59e8c9a11ecfdd28\n\n\n\n\n57966\n\n\n(#1.1)\n\n\n\n\n7\n\n\n2013\n\n\n\n\n\n\n57965\n\n\n1\n\n\n1\n\n\n\n\n409c37703766c4b24f8a86162fd9cf85\n\n\n\n\n76391\n\n\nAnniversary\n\n\n\n\n7\n\n\n1971\n\n\n\n\nA5162\n\n\n76385\n\n\n4\n\n\n9\n\n\n\n\n5e12ce73fac1d1dcf94136b6e9acd8f8\n\n\n\n\n11952\n\n\nAngus Black/Lester Barrie/DC Curry\n\n\n\n\n7\n\n\n2009\n\n\n\n\nA5214\n\n\n11937\n\n\n4\n\n\n7\n\n\n\n\n9c38b9e5601dc154444b73b518034aa1\n\n\n\n\n1554\n\n\nNew Orleans\n\n\n\n\n7\n\n\n2003\n\n\n\n\nN6452\n\n\n1508\n\n\n2\n\n\n11\n\n\n\n\n621bea735740a547e862e4a3226f35d2\n\n\n\n\n58442\n\n\nKiss Me Kate\n\n\n\n\n7\n\n\n2011\n\n\n\n\nK2523\n\n\n58436\n\n\n1\n\n\n10\n\n\n\n\n293e8c75c7f35a4035abf617962be5a9"
  },
  {
    "objectID": "slides/2024-01-10-joins.html#join-imdb-title-votes-1",
    "href": "slides/2024-01-10-joins.html#join-imdb-title-votes-1",
    "title": "SQL joins",
    "section": "JOIN IMDb title + votes",
    "text": "JOIN IMDb title + votes\nThe movie_info_idx table does not contain much information about each particular film. It does, however, have an indicator for the movie ID (given by movie_id) as well as the number of votes (given by info where type_id = 100).\n\nSELECT * FROM movie_info_idx LIMIT 0, 6;\n\n\n\n\n6 records\n\n\n\n\nid\n\n\nmovie_id\n\n\ninfo_type_id\n\n\ninfo\n\n\nnote\n\n\n\n\n\n\n1\n\n\n1\n\n\n99\n\n\n31.2.1..2.\n\n\n\n\n\n\n2\n\n\n1\n\n\n100\n\n\n9\n\n\n\n\n\n\n3\n\n\n1\n\n\n101\n\n\n4.1\n\n\n\n\n\n\n4\n\n\n2\n\n\n99\n\n\n1000000102\n\n\n\n\n\n\n5\n\n\n2\n\n\n100\n\n\n61\n\n\n\n\n\n\n6\n\n\n2\n\n\n101\n\n\n6.4"
  },
  {
    "objectID": "slides/2024-01-10-joins.html#join-imdb-title-votes-2",
    "href": "slides/2024-01-10-joins.html#join-imdb-title-votes-2",
    "title": "SQL joins",
    "section": "JOIN IMDb title + votes",
    "text": "JOIN IMDb title + votes\n\ncombine the titles with the number of votes so that each title with user votes is included (INNER JOIN)\n\n\nSELECT title.id,\n       title.title,\n       movie_info_idx.info\nFROM title\nJOIN movie_info_idx ON title.id = movie_info_idx.movie_id \nWHERE title.production_year = 2015 \n    AND title.kind_id = 1                  # movies only\n    AND movie_info_idx.info_type_id = 100  # info_type is votes\n    AND movie_info_idx.info &gt; 150000       # at least 150,000 votes\nORDER BY movie_info_idx.info DESC\nLIMIT 0, 20;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\nid\n\n\ntitle\n\n\ninfo\n\n\n\n\n\n\n4260166\n\n\nStar Wars: Episode VII - The Force Awakens\n\n\n691691\n\n\n\n\n3915213\n\n\nMad Max: Fury Road\n\n\n666484\n\n\n\n\n4389619\n\n\nThe Martian\n\n\n583987\n\n\n\n\n3313672\n\n\nAvengers: Age of Ultron\n\n\n540606\n\n\n\n\n4414139\n\n\nThe Revenant\n\n\n526189\n\n\n\n\n3787790\n\n\nJurassic World\n\n\n471237\n\n\n\n\n3752999\n\n\nInside Out\n\n\n443051\n\n\n\n\n3292159\n\n\nAnt-Man\n\n\n390965\n\n\n\n\n4364483\n\n\nThe Hateful Eight\n\n\n363199\n\n\n\n\n4251736\n\n\nSpectre\n\n\n319875\n\n\n\n\n\n\n\nSome aspects of the query are worth pointing out:\n* The variables in the output are given in the SELECT clause. The id and title (both from the title table) and the info from the movie_info_idx which represents the number of IMDb votes. * The variables are preceded by the table from which they came. While not always necessary, it is good practice so as to avoid confusion. * The JOIN happens by linking the id variable in the title table with the movie_id variable in the movie_info_idx table. * The LIMIT wasn’t necessary (there are only 12 observations), but it’s good practice so that we don’t end up with unwieldy query results. * The WHERE clause happens before the JOIN action, despite being written after. * In the WHERE clause, we keep only movies, only 2015 production year, and only at least 150,000 votes."
  },
  {
    "objectID": "slides/2024-01-10-joins.html#join-imdb-title-actress",
    "href": "slides/2024-01-10-joins.html#join-imdb-title-actress",
    "title": "SQL joins",
    "section": "JOIN IMDb title + actress",
    "text": "JOIN IMDb title + actress\ncast_info contains the person_id and the movie_id\n\nSELECT * FROM cast_info LIMIT 0, 10;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\nid\n\n\nperson_id\n\n\nmovie_id\n\n\nperson_role_id\n\n\nnote\n\n\nnr_order\n\n\nrole_id\n\n\n\n\n\n\n1\n\n\n1\n\n\n3432997\n\n\n1\n\n\n\n\n31\n\n\n1\n\n\n\n\n2\n\n\n2\n\n\n1901690\n\n\n2\n\n\n\n\n\n\n1\n\n\n\n\n3\n\n\n3\n\n\n4027567\n\n\n2\n\n\n\n\n25\n\n\n1\n\n\n\n\n4\n\n\n3\n\n\n4282876\n\n\n3\n\n\n\n\n22\n\n\n1\n\n\n\n\n5\n\n\n4\n\n\n3542672\n\n\n\n\n\n\n12\n\n\n1\n\n\n\n\n6\n\n\n5\n\n\n3331520\n\n\n4\n\n\n(as $hutter Boy)\n\n\n10\n\n\n1\n\n\n\n\n7\n\n\n5\n\n\n4027191\n\n\n2\n\n\n(as $hutter Boy)\n\n\n1\n\n\n1\n\n\n\n\n8\n\n\n5\n\n\n4195731\n\n\n5\n\n\n(uncredited)\n\n\n\n\n1\n\n\n\n\n9\n\n\n5\n\n\n4263956\n\n\n6\n\n\n(uncredited)\n\n\n\n\n1\n\n\n\n\n10\n\n\n5\n\n\n4267787\n\n\n7\n\n\n(uncredited)\n\n\n\n\n1\n\n\n\n\n\n\n\nperson_role_id is 1 if actor and 2 if actress"
  },
  {
    "objectID": "slides/2024-01-10-joins.html#join-imdb-title-actress-1",
    "href": "slides/2024-01-10-joins.html#join-imdb-title-actress-1",
    "title": "SQL joins",
    "section": "JOIN IMDb title + actress",
    "text": "JOIN IMDb title + actress\naka_name contains person_id and name (of actor)\n\nSELECT * FROM aka_name LIMIT 0, 10;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\nid\n\n\nperson_id\n\n\nname\n\n\nimdb_index\n\n\nname_pcode_cf\n\n\nname_pcode_nf\n\n\nsurname_pcode\n\n\nmd5sum\n\n\n\n\n\n\n1\n\n\n6188450\n\n\nSmith, Jessica Noel\n\n\n\n\nS5325\n\n\nJ2542\n\n\nS53\n\n\n25c9d464e3ff2957533546aa92b397ed\n\n\n\n\n2\n\n\n5125059\n\n\nPain, L. $ham\n\n\n\n\nP545\n\n\nL515\n\n\nP5\n\n\n569b1e885ccb51211c01753f0dad9b2c\n\n\n\n\n3\n\n\n5\n\n\nBoy, $hutter\n\n\n\n\nB36\n\n\nH361\n\n\nB\n\n\n35092b5604ce378fc48c8a6fc0038a49\n\n\n\n\n4\n\n\n4152053\n\n\nDollasign, Ty\n\n\n\n\nD4253\n\n\nT3425\n\n\nD425\n\n\n0f565a2d8027cfb8ed6c5f4bba719fcd\n\n\n\n\n5\n\n\n4152053\n\n\nSign, Ty Dolla\n\n\n\n\nS2534\n\n\nT3425\n\n\nS25\n\n\n2eded1b021b96333b4b74e0fec959650\n\n\n\n\n6\n\n\n6\n\n\nMoore, Brandon\n\n\n\n\nM6165\n\n\nB6535\n\n\nM6\n\n\n193a6f5adf4756320f622162d2475608\n\n\n\n\n7\n\n\n8\n\n\n$torm, Country\n\n\n\n\nT6525\n\n\nC5363\n\n\nT65\n\n\n1654400b707d34323ea392b87060e6cc\n\n\n\n\n8\n\n\n19\n\n\n‘Hooper’, Simon P.J. Kelly\n\n\n\n\nH1625\n\n\nS5124\n\n\nH16\n\n\n3fd8885372c23f8c74e583da91d1fd05\n\n\n\n\n9\n\n\n19\n\n\nHooper\n\n\n\n\nH16\n\n\n\n\n\n\n24ddc68ab605ee95857ad45b65ffa2d8\n\n\n\n\n10\n\n\n19\n\n\nKelly, Simon P.J.\n\n\n\n\nK4251\n\n\nS5124\n\n\nK4\n\n\n33d976f22e276b73c61513bc5f6e72a6"
  },
  {
    "objectID": "slides/2024-01-10-joins.html#join-imdb-title-actress-2",
    "href": "slides/2024-01-10-joins.html#join-imdb-title-actress-2",
    "title": "SQL joins",
    "section": "JOIN IMDb title + actress",
    "text": "JOIN IMDb title + actress\ntitle contains id and title (of the movie)\n\nSELECT * FROM title LIMIT 0, 10;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\nid\n\n\ntitle\n\n\nimdb_index\n\n\nkind_id\n\n\nproduction_year\n\n\nimdb_id\n\n\nphonetic_code\n\n\nepisode_of_id\n\n\nseason_nr\n\n\nepisode_nr\n\n\nseries_years\n\n\nmd5sum\n\n\n\n\n\n\n78460\n\n\nAdults Recat to the Simpsons (30th Anniversary)\n\n\n\n\n7\n\n\n2017\n\n\n\n\nA3432\n\n\n78406\n\n\n\n\n\n\n\n\n2ae09eed7d576cc2c24774fed5b18168\n\n\n\n\n70273\n\n\n(2016-05-18)\n\n\n\n\n7\n\n\n2016\n\n\n\n\n\n\n68058\n\n\n\n\n\n\n\n\n511dfc14cfff7589d29a95abb30cd66a\n\n\n\n\n60105\n\n\n(2014-04-11)\n\n\n\n\n7\n\n\n2014\n\n\n\n\n\n\n59138\n\n\n\n\n\n\n\n\nc6cdce7e667e07713e431805c407feed\n\n\n\n\n32120\n\n\n(2008-05-01)\n\n\n\n\n7\n\n\n2008\n\n\n\n\n\n\n32060\n\n\n\n\n\n\n\n\n100df65742caf5afd092b2e0ead67d8e\n\n\n\n\n97554\n\n\nSchmÃ¶lders Traum\n\n\n\n\n7\n\n\n2001\n\n\n\n\nS2543\n\n\n97302\n\n\n10\n\n\n1\n\n\n\n\n46862a2f96f9fb2d59e8c9a11ecfdd28\n\n\n\n\n57966\n\n\n(#1.1)\n\n\n\n\n7\n\n\n2013\n\n\n\n\n\n\n57965\n\n\n1\n\n\n1\n\n\n\n\n409c37703766c4b24f8a86162fd9cf85\n\n\n\n\n76391\n\n\nAnniversary\n\n\n\n\n7\n\n\n1971\n\n\n\n\nA5162\n\n\n76385\n\n\n4\n\n\n9\n\n\n\n\n5e12ce73fac1d1dcf94136b6e9acd8f8\n\n\n\n\n11952\n\n\nAngus Black/Lester Barrie/DC Curry\n\n\n\n\n7\n\n\n2009\n\n\n\n\nA5214\n\n\n11937\n\n\n4\n\n\n7\n\n\n\n\n9c38b9e5601dc154444b73b518034aa1\n\n\n\n\n1554\n\n\nNew Orleans\n\n\n\n\n7\n\n\n2003\n\n\n\n\nN6452\n\n\n1508\n\n\n2\n\n\n11\n\n\n\n\n621bea735740a547e862e4a3226f35d2\n\n\n\n\n58442\n\n\nKiss Me Kate\n\n\n\n\n7\n\n\n2011\n\n\n\n\nK2523\n\n\n58436\n\n\n1\n\n\n10\n\n\n\n\n293e8c75c7f35a4035abf617962be5a9"
  },
  {
    "objectID": "slides/2024-01-10-joins.html#join-imdb-title-actress-3",
    "href": "slides/2024-01-10-joins.html#join-imdb-title-actress-3",
    "title": "SQL joins",
    "section": "JOIN IMDb title + actress",
    "text": "JOIN IMDb title + actress\nGoal: identify the actresses in those movies with the highest number of votes.\n\nSELECT t.title,\n       idx.info,\n       a.person_id,\n       n.name\nFROM title AS t\nJOIN movie_info_idx AS idx ON t.id = idx.movie_id \nJOIN cast_info AS a ON idx.movie_id = a.movie_id\nJOIN aka_name AS n ON a.person_id = n.person_id\nWHERE t.production_year = 2015 \n    AND t.kind_id = 1           # movies only\n    AND idx.info_type_id = 100  # info_type is votes\n    AND idx.info &gt; 150000       # at least 150,000 votes\n    AND a.role_id = 2           # actresses only\nORDER BY a.person_id\nLIMIT 0, 50;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\ntitle\n\n\ninfo\n\n\nperson_id\n\n\nname\n\n\n\n\n\n\nMission: Impossible - Rogue Nation\n\n\n266759\n\n\n2674172\n\n\nSofz\n\n\n\n\nMission: Impossible - Rogue Nation\n\n\n266759\n\n\n2674172\n\n\nSof\n\n\n\n\nMission: Impossible - Rogue Nation\n\n\n266759\n\n\n2674172\n\n\nSofz\n\n\n\n\nMission: Impossible - Rogue Nation\n\n\n266759\n\n\n2674172\n\n\nSof\n\n\n\n\nFocus\n\n\n172680\n\n\n2678594\n\n\nLabouisse, Kate\n\n\n\n\nMad Max: Fury Road\n\n\n666484\n\n\n2681098\n\n\nMichelle, Debra\n\n\n\n\nThe Hunger Games: Mockingjay - Part 2\n\n\n214569\n\n\n2685496\n\n\nHarris, Ahnie\n\n\n\n\nThe Hunger Games: Mockingjay - Part 2\n\n\n214569\n\n\n2685496\n\n\nHarris, Jasmine\n\n\n\n\nCreed\n\n\n183904\n\n\n2686218\n\n\nKareema, Kiana A.\n\n\n\n\nAnt-Man\n\n\n390965\n\n\n2687271\n\n\nAkana, Anna Kay\n\n\n\n\n\n\n\nConnecting the most popular movies of 2015 with the actresses in those movies requires a series of JOINs. Note that to make the code less onerous, the title table has been aliased by t, the movie_info_idx table has been aliased by idx, the cast_info table has been aliased by a, and the aka_name table has been aliased by n.\nThere is a lot of data cleaning to do as some of the person_id values are one to many!! That is, the person_id matches multiple names in the aka_name database."
  },
  {
    "objectID": "slides/2024-01-10-joins.html#other-joins",
    "href": "slides/2024-01-10-joins.html#other-joins",
    "title": "SQL joins",
    "section": "Other JOINs",
    "text": "Other JOINs\nLet’s look at RIGHT JOIN and LEFT JOIN using two new smaller tables.\n\nThe first has seven movies in it (from 2015 with at least 400,000 IMDb votes).\nThe second consists of almost 3 million actresses (person_role_id = 2). In order to find a subset of actresses, the person_id &gt; 3900000 was set arbitrarily (in order to have a smaller group with which to work).\n\nUsing subqueries, we can JOIN the two datasets using different JOIN techniques."
  },
  {
    "objectID": "slides/2024-01-10-joins.html#unioning",
    "href": "slides/2024-01-10-joins.html#unioning",
    "title": "SQL joins",
    "section": "UNIONing",
    "text": "UNIONing\nIn SQL a UNION clause combines two different tables by their rows (whereas JOIN combines two tables by columns). Think about UNION similarly to the bind_rows() command in R.\n\nFigure 3: UNION binds rows while JOIN appends columns, image credit: Jane Williams https://blog.devart.com/mysql-union-tutorial-html.html"
  },
  {
    "objectID": "slides/2024-01-10-joins.html#best-practice",
    "href": "slides/2024-01-10-joins.html#best-practice",
    "title": "SQL joins",
    "section": "Best practice",
    "text": "Best practice\nIt is always a good idea to terminate the SQL connection when you are done with it.\n\nDBI::dbDisconnect(con_imdb, shutdown = TRUE)"
  },
  {
    "objectID": "slides/2024-01-10-joins.html#imdb-1",
    "href": "slides/2024-01-10-joins.html#imdb-1",
    "title": "SQL joins",
    "section": "IMDb",
    "text": "IMDb\n21 tables in the imdb database! Lots of details on movies, TV series, video games, and more. Today interest is in movies (and details within, like actors and ratings).\n\nSHOW TABLES;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\nTables_in_imdb\n\n\n\n\n\n\naka_name\n\n\n\n\naka_title\n\n\n\n\ncast_info\n\n\n\n\nchar_name\n\n\n\n\ncomp_cast_type\n\n\n\n\ncompany_name\n\n\n\n\ncompany_type\n\n\n\n\ncomplete_cast\n\n\n\n\ninfo_type\n\n\n\n\nkeyword"
  },
  {
    "objectID": "slides/2024-01-10-joins.html#imdb---glance-through-tables",
    "href": "slides/2024-01-10-joins.html#imdb---glance-through-tables",
    "title": "SQL joins",
    "section": "IMDb - glance through tables",
    "text": "IMDb - glance through tables\n\nSELECT * FROM kind_type\nLIMIT 0, 10;\n\n\n\n\n7 records\n\n\n\n\nid\n\n\nkind\n\n\n\n\n\n\n1\n\n\nmovie\n\n\n\n\n2\n\n\ntv series\n\n\n\n\n3\n\n\ntv movie\n\n\n\n\n4\n\n\nvideo movie\n\n\n\n\n5\n\n\ntv mini series\n\n\n\n\n6\n\n\nvideo game\n\n\n\n\n7\n\n\nepisode"
  },
  {
    "objectID": "slides/2024-01-10-joins.html#all-the-joins",
    "href": "slides/2024-01-10-joins.html#all-the-joins",
    "title": "SQL joins",
    "section": "All the JOINs",
    "text": "All the JOINs\n\nJOIN (aka INNER JOIN): include all of the rows that exist in both tables\nLEFT JOIN: include all of the rows in the first table.\n\nRIGHT JOIN: include all of the rows in the second table.\nFULL OUTER JOIN: include all rows in either table. (The functionality doesn’t exist in MySQL but can be created using joins and UNION.)\nCROSS JOIN: match each row of the first table with each row in the second table."
  },
  {
    "objectID": "slides/2024-01-10-joins.html#all-the-joins-1",
    "href": "slides/2024-01-10-joins.html#all-the-joins-1",
    "title": "SQL joins",
    "section": "All the JOINs",
    "text": "All the JOINs\nVenn diagrams of the different types of joins.\n\nFigure 1: Venn diagrams describing different JOINs, image credit: phoenixNAP https://phoenixnap.com/kb/mysql-join"
  },
  {
    "objectID": "slides/2024-01-10-joins.html#all-the-joins-2",
    "href": "slides/2024-01-10-joins.html#all-the-joins-2",
    "title": "SQL joins",
    "section": "All the JOINs",
    "text": "All the JOINs\nMini data tables of the different types of JOIN. (In SQL the missing values will be labeled as NULL (not NA).)\n\nFigure 2: Mini data tables describing different JOINs, image credit: Statistics Globe blog, https://statisticsglobe.com/r-dplyr-join-inner-left-right-full-semi-anti"
  },
  {
    "objectID": "slides/2024-01-10-joins.html#all-the-joins-3",
    "href": "slides/2024-01-10-joins.html#all-the-joins-3",
    "title": "SQL joins",
    "section": "All the JOINs",
    "text": "All the JOINs\nEach JOIN clause needs four specific pieces of information:\n\nThe name of the first table you want to JOIN.\nThe type of JOIN being used.\nThe name of the second table you want to JOIN.\nThe condition(s) under which you want the records in the first table to match records in the second table."
  },
  {
    "objectID": "slides/2024-01-10-joins.html#a-toy-example",
    "href": "slides/2024-01-10-joins.html#a-toy-example",
    "title": "SQL joins",
    "section": "A toy example",
    "text": "A toy example\nRock bands from the 60s.\n\nband_members\n\n# A tibble: 3 × 2\n  name  band   \n  &lt;chr&gt; &lt;chr&gt;  \n1 Mick  Stones \n2 John  Beatles\n3 Paul  Beatles\n\nband_instruments\n\n# A tibble: 3 × 2\n  name  plays \n  &lt;chr&gt; &lt;chr&gt; \n1 John  guitar\n2 Paul  bass  \n3 Keith guitar\n\n\nThe function sqldf() in the sqldf R package allows for SQL commands on R objects."
  },
  {
    "objectID": "slides/2024-01-10-joins.html#rock-bands---inner-join",
    "href": "slides/2024-01-10-joins.html#rock-bands---inner-join",
    "title": "SQL joins",
    "section": "Rock bands - INNER JOIN",
    "text": "Rock bands - INNER JOIN\nAn inner join combines two datasets returning only the observations that exist in both of the original datasets.\n\nsqldf::sqldf(\"SELECT star.name,\n                     star.band,\n                     inst.plays\n              FROM band_members AS star\n              JOIN band_instruments AS inst ON star.name = inst.name\")\n\n  name    band  plays\n1 John Beatles guitar\n2 Paul Beatles   bass"
  },
  {
    "objectID": "slides/2024-01-10-joins.html#rock-bands---full-join",
    "href": "slides/2024-01-10-joins.html#rock-bands---full-join",
    "title": "SQL joins",
    "section": "Rock bands - FULL JOIN",
    "text": "Rock bands - FULL JOIN\nA full join combines two datasets returning every observation that exists in either one of the original datasets.\n\nband_members |&gt;\n  full_join(band_instruments)\n\n# A tibble: 4 × 3\n  name  band    plays \n  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; \n1 Mick  Stones  &lt;NA&gt;  \n2 John  Beatles guitar\n3 Paul  Beatles bass  \n4 Keith &lt;NA&gt;    guitar\n\n\nThe full_join() function does not have an equivalent in MySQL. See notes for using JOINs and UNIONs to produce a full join."
  },
  {
    "objectID": "slides/2024-01-10-joins.html#rock-bands---left-join",
    "href": "slides/2024-01-10-joins.html#rock-bands---left-join",
    "title": "SQL joins",
    "section": "Rock bands - LEFT JOIN",
    "text": "Rock bands - LEFT JOIN\nA left join combines two datasets returning every observation that exists in the left (or first) original dataset.\n\nsqldf::sqldf(\"SELECT star.name,\n                     star.band,\n                      inst.plays\n              FROM band_members AS star\n              LEFT JOIN band_instruments AS inst \n              ON star.name = inst.name\")\n\n  name    band  plays\n1 Mick  Stones   &lt;NA&gt;\n2 John Beatles guitar\n3 Paul Beatles   bass"
  },
  {
    "objectID": "slides/2024-01-10-joins.html#rock-bands---right-join",
    "href": "slides/2024-01-10-joins.html#rock-bands---right-join",
    "title": "SQL joins",
    "section": "Rock bands - RIGHT JOIN",
    "text": "Rock bands - RIGHT JOIN\nA right join combines two datasets returning every observation that exists in the right (or second) original dataset.\n\nsqldf::sqldf(\"SELECT inst.name,\n                     star.band,\n                      inst.plays\n              FROM band_members AS star\n              RIGHT JOIN band_instruments AS inst \n              ON star.name = inst.name\")\n\n   name    band  plays\n1  John Beatles guitar\n2  Paul Beatles   bass\n3 Keith    &lt;NA&gt; guitar"
  },
  {
    "objectID": "slides/2024-01-10-joins.html#rock-bands---cross-join",
    "href": "slides/2024-01-10-joins.html#rock-bands---cross-join",
    "title": "SQL joins",
    "section": "Rock bands - CROSS JOIN",
    "text": "Rock bands - CROSS JOIN\nA right join combines two datasets returning every observation that exists in the right (or second) original dataset.\n\nsqldf::sqldf(\"SELECT *\n              FROM band_members AS star\n              CROSS JOIN band_instruments AS inst\")\n\n  name    band  name  plays\n1 Mick  Stones  John guitar\n2 Mick  Stones  Paul   bass\n3 Mick  Stones Keith guitar\n4 John Beatles  John guitar\n5 John Beatles  Paul   bass\n6 John Beatles Keith guitar\n7 Paul Beatles  John guitar\n8 Paul Beatles  Paul   bass\n9 Paul Beatles Keith guitar"
  },
  {
    "objectID": "slides/2024-01-10-joins.html#movies",
    "href": "slides/2024-01-10-joins.html#movies",
    "title": "SQL joins",
    "section": "movies:",
    "text": "movies:\n\nSELECT t.id,\n       t.title,\n       idx.info,\n       (SELECT COUNT(*)\n       FROM title AS t\n       JOIN movie_info_idx AS idx ON idx.movie_id = t.id\n       WHERE t.production_year = 2015  \n             AND t.kind_id = 1\n             AND idx.info_type_id = 100\n             AND idx.info &gt; 400000) AS row_count\nFROM title AS t\nJOIN movie_info_idx AS idx ON idx.movie_id = t.id\nWHERE t.production_year = 2015  \n    AND t.kind_id = 1             # movies only\n    AND idx.info_type_id = 100    # info_type is votes\n    AND idx.info &gt; 400000         # at least 400,000 votes\nORDER BY idx.info DESC;\n\n\n\n\n7 records\n\n\n\n\nid\n\n\ntitle\n\n\ninfo\n\n\nrow_count\n\n\n\n\n\n\n4260166\n\n\nStar Wars: Episode VII - The Force Awakens\n\n\n691691\n\n\n7\n\n\n\n\n3915213\n\n\nMad Max: Fury Road\n\n\n666484\n\n\n7\n\n\n\n\n4389619\n\n\nThe Martian\n\n\n583987\n\n\n7\n\n\n\n\n3313672\n\n\nAvengers: Age of Ultron\n\n\n540606\n\n\n7\n\n\n\n\n4414139\n\n\nThe Revenant\n\n\n526189\n\n\n7\n\n\n\n\n3787790\n\n\nJurassic World\n\n\n471237\n\n\n7\n\n\n\n\n3752999\n\n\nInside Out\n\n\n443051\n\n\n7"
  },
  {
    "objectID": "slides/2024-01-10-joins.html#actresses",
    "href": "slides/2024-01-10-joins.html#actresses",
    "title": "SQL joins",
    "section": "actresses:",
    "text": "actresses:\n\n\nSELECT a.person_id,\n       a.movie_id,\n       n.name,\n       (SELECT COUNT(*)\n       FROM cast_info AS a\n       JOIN aka_name AS n ON a.person_id = n.person_id\n       WHERE a.person_role_id = 2  \n             AND a.person_id &gt; 390000) AS row_count\nFROM cast_info AS a\nJOIN aka_name AS n ON a.person_id = n.person_id\n       WHERE a.person_role_id = 2  \n             AND a.person_id &gt; 3900000\nLIMIT 0, 20;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\nperson_id\n\n\nmovie_id\n\n\nname\n\n\nrow_count\n\n\n\n\n\n\n3900141\n\n\n759802\n\n\nSimons, Rita Joanne\n\n\n2904759\n\n\n\n\n3902258\n\n\n4365829\n\n\nSinger, Rabbi Tovia\n\n\n2904759\n\n\n\n\n3902699\n\n\n3109788\n\n\nSingh, Sabine Erika\n\n\n2904759\n\n\n\n\n3903035\n\n\n3215866\n\n\nVal\n\n\n2904759\n\n\n\n\n3904831\n\n\n2468067\n\n\nMasha\n\n\n2904759\n\n\n\n\n3904928\n\n\n3654347\n\n\nFei, Siu Yin\n\n\n2904759\n\n\n\n\n3904928\n\n\n3654347\n\n\nHsiao, Yen-fei\n\n\n2904759\n\n\n\n\n3904928\n\n\n3654347\n\n\nSiu, Yinfei\n\n\n2904759\n\n\n\n\n3904928\n\n\n3654347\n\n\nXiao, Yanfei\n\n\n2904759\n\n\n\n\n3904928\n\n\n3654347\n\n\nYin-Fai, Siu\n\n\n2904759"
  },
  {
    "objectID": "slides/2024-01-10-joins.html#inner-join",
    "href": "slides/2024-01-10-joins.html#inner-join",
    "title": "SQL joins",
    "section": "Inner JOIN",
    "text": "Inner JOIN\nWith an inner JOIN, there are 32 rows corresponding to all the actresses in the seven 2015 films with the most votes. Because the JOIN is an intersection of the two tables, only the actresses with person_id above 3900000 are included.\n\nSELECT * FROM\n(SELECT t.id,\n       t.title\nFROM title AS t\nJOIN movie_info_idx AS idx ON idx.movie_id = t.id\nWHERE t.production_year = 2015  \n    AND t.kind_id = 1               # movies only\n    AND idx.info_type_id = 100      # info_type is votes\n    AND idx.info &gt; 400000) AS movs  # at least 400,000 votes     \nINNER JOIN (SELECT a.person_id,\n       a.movie_id,\n       n.name\n    FROM cast_info AS a\n    JOIN aka_name AS n ON a.person_id = n.person_id\n    WHERE a.role_id = 2             # acresses only\n        AND a.person_id &gt; 3900000) AS acts ON acts.movie_id = movs.id\nLIMIT 0, 300;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\nid\n\n\ntitle\n\n\nperson_id\n\n\nmovie_id\n\n\nname\n\n\n\n\n\n\n3313672\n\n\nAvengers: Age of Ultron\n\n\n3916648\n\n\n3313672\n\n\nSmulders, Jacoba Francisca Maria\n\n\n\n\n3752999\n\n\nInside Out\n\n\n4122876\n\n\n3752999\n\n\nKuzniar, Lennon Wynn\n\n\n\n\n3787790\n\n\nJurassic World\n\n\n3938423\n\n\n3787790\n\n\nNorvell, Ingrid\n\n\n\n\n3787790\n\n\nJurassic World\n\n\n3938423\n\n\n3787790\n\n\nNorvell, Ingrid\n\n\n\n\n3787790\n\n\nJurassic World\n\n\n3950111\n\n\n3787790\n\n\nSallaway, Seannon Jane\n\n\n\n\n3787790\n\n\nJurassic World\n\n\n4079047\n\n\n3787790\n\n\nWashington, Kelly Lynn\n\n\n\n\n3787790\n\n\nJurassic World\n\n\n4079047\n\n\n3787790\n\n\nWashington, Kelly Lynn\n\n\n\n\n3787790\n\n\nJurassic World\n\n\n4084626\n\n\n3787790\n\n\nWeeks, Jency\n\n\n\n\n3787790\n\n\nJurassic World\n\n\n4084626\n\n\n3787790\n\n\nJenc\n\n\n\n\n3787790\n\n\nJurassic World\n\n\n4084626\n\n\n3787790\n\n\nLittle J"
  },
  {
    "objectID": "slides/2024-01-10-joins.html#right-join",
    "href": "slides/2024-01-10-joins.html#right-join",
    "title": "SQL joins",
    "section": "RIGHT JOIN",
    "text": "RIGHT JOIN\nWith a RIGHT JOIN, there are more than 300 rows (the LIMIT clause keeps us from knowing how many rows, but there are a LOT!) corresponding to all the actresses whose person_id above 3900000 are included. Those actresses who acted in one of the seven top 2015 films are also included in the full results table, but they don’t happen to be in the truncated output here.\n\nSELECT * FROM\n(SELECT t.id,\n       t.title\nFROM title AS t\nJOIN movie_info_idx AS idx ON idx.movie_id = t.id\nWHERE t.production_year = 2015  \n    AND t.kind_id = 1               # movies only\n    AND idx.info_type_id = 100      # info_type is votes\n    AND idx.info &gt; 400000) AS movs  # at least 400,000 votes     \nRIGHT JOIN (SELECT a.person_id,\n       a.movie_id,\n       n.name\n    FROM cast_info AS a\n    JOIN aka_name AS n ON a.person_id = n.person_id\n    WHERE a.role_id = 2             # acresses only\n        AND a.person_id &gt; 3900000) AS acts ON acts.movie_id = movs.id\nLIMIT 0, 300;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\nid\n\n\ntitle\n\n\nperson_id\n\n\nmovie_id\n\n\nname\n\n\n\n\n\n\n\n\n\n\n3900001\n\n\n3355298\n\n\nSimonis, Heidi\n\n\n\n\n\n\n\n\n3900001\n\n\n3509490\n\n\nSimonis, Heidi\n\n\n\n\n\n\n\n\n3900001\n\n\n3739780\n\n\nSimonis, Heidi\n\n\n\n\n\n\n\n\n3900001\n\n\n3943329\n\n\nSimonis, Heidi\n\n\n\n\n\n\n\n\n3900001\n\n\n165963\n\n\nSimonis, Heidi\n\n\n\n\n\n\n\n\n3900001\n\n\n268249\n\n\nSimonis, Heidi\n\n\n\n\n\n\n\n\n3900001\n\n\n268370\n\n\nSimonis, Heidi\n\n\n\n\n\n\n\n\n3900001\n\n\n268406\n\n\nSimonis, Heidi\n\n\n\n\n\n\n\n\n3900001\n\n\n268475\n\n\nSimonis, Heidi\n\n\n\n\n\n\n\n\n3900001\n\n\n279082\n\n\nSimonis, Heidi"
  },
  {
    "objectID": "slides/2024-01-10-joins.html#left-join",
    "href": "slides/2024-01-10-joins.html#left-join",
    "title": "SQL joins",
    "section": "LEFT JOIN",
    "text": "LEFT JOIN\nWith a LEFT JOIN, there are 33 rows corresponding to the actresses in the seven top 2015 movies. Only The Revenant did not have any actresses whose person_id is greater than 3900000.\n\nSELECT * FROM\n(SELECT t.id,\n       t.title\nFROM title AS t\nJOIN movie_info_idx AS idx ON idx.movie_id = t.id\nWHERE t.production_year = 2015  \n    AND t.kind_id = 1               # movies only\n    AND idx.info_type_id = 100      # info_type is votes\n    AND idx.info &gt; 400000) AS movs  # at least 400,000 votes     \nLEFT JOIN (SELECT a.person_id,\n       a.movie_id,\n       n.name\n    FROM cast_info AS a\n    JOIN aka_name AS n ON a.person_id = n.person_id\n    WHERE a.role_id = 2             # acresses only\n        AND a.person_id &gt; 3900000) AS acts ON acts.movie_id = movs.id\nLIMIT 0, 300;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\nid\n\n\ntitle\n\n\nperson_id\n\n\nmovie_id\n\n\nname\n\n\n\n\n\n\n3313672\n\n\nAvengers: Age of Ultron\n\n\n3916648\n\n\n3313672\n\n\nSmulders, Jacoba Francisca Maria\n\n\n\n\n3752999\n\n\nInside Out\n\n\n4122876\n\n\n3752999\n\n\nKuzniar, Lennon Wynn\n\n\n\n\n3787790\n\n\nJurassic World\n\n\n3938423\n\n\n3787790\n\n\nNorvell, Ingrid\n\n\n\n\n3787790\n\n\nJurassic World\n\n\n3938423\n\n\n3787790\n\n\nNorvell, Ingrid\n\n\n\n\n3787790\n\n\nJurassic World\n\n\n3950111\n\n\n3787790\n\n\nSallaway, Seannon Jane\n\n\n\n\n3787790\n\n\nJurassic World\n\n\n4079047\n\n\n3787790\n\n\nWashington, Kelly Lynn\n\n\n\n\n3787790\n\n\nJurassic World\n\n\n4079047\n\n\n3787790\n\n\nWashington, Kelly Lynn\n\n\n\n\n3787790\n\n\nJurassic World\n\n\n4084626\n\n\n3787790\n\n\nWeeks, Jency\n\n\n\n\n3787790\n\n\nJurassic World\n\n\n4084626\n\n\n3787790\n\n\nJenc\n\n\n\n\n3787790\n\n\nJurassic World\n\n\n4084626\n\n\n3787790\n\n\nLittle J"
  },
  {
    "objectID": "slides/2024-01-10-joins.html#counting-repeat-actresses",
    "href": "slides/2024-01-10-joins.html#counting-repeat-actresses",
    "title": "SQL joins",
    "section": "Counting repeat actresses",
    "text": "Counting repeat actresses\nWe might, for example, want to know how many names / spellings of a name with a specific person_id (above 3900000) exist for each person_id in each of the top voted seven films of 2015.\n\nSELECT acts.person_id, \n       COUNT(*) AS num_repeat_names\nFROM (SELECT t.id,\n       t.title\nFROM title AS t\nJOIN movie_info_idx AS idx ON idx.movie_id = t.id\nWHERE t.production_year = 2015  \n    AND t.kind_id = 1               # movies only\n    AND idx.info_type_id = 100      # info_type is votes\n    AND idx.info &gt; 400000) AS movs  # at least 400,000 votes\nJOIN (SELECT a.person_id,\n       a.movie_id,\n       n.name\n    FROM cast_info AS a\n    JOIN aka_name AS n ON a.person_id = n.person_id\n    WHERE a.role_id = 2             # acresses only\n        AND a.person_id &gt; 3900000) AS acts ON acts.movie_id = movs.id\nGROUP BY acts.person_id;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\nperson_id\n\n\nnum_repeat_names\n\n\n\n\n\n\n3916648\n\n\n1\n\n\n\n\n4122876\n\n\n1\n\n\n\n\n3938423\n\n\n2\n\n\n\n\n3950111\n\n\n1\n\n\n\n\n4079047\n\n\n2\n\n\n\n\n4084626\n\n\n3\n\n\n\n\n4099458\n\n\n1\n\n\n\n\n3958614\n\n\n1\n\n\n\n\n3990819\n\n\n2\n\n\n\n\n4081131\n\n\n2"
  },
  {
    "objectID": "slides/2024-01-10-joins.html#counting-number-of-actresses-per-film",
    "href": "slides/2024-01-10-joins.html#counting-number-of-actresses-per-film",
    "title": "SQL joins",
    "section": "Counting number of actresses per film",
    "text": "Counting number of actresses per film\nWe might, for example, want to know how many actresses with a specific person_id (above 3900000) are in each of the top voted seven films of 2015.\n\nSELECT movs.id, \n       movs.title,\n       COUNT(*) AS num_actress\nFROM (SELECT t.id,\n       t.title\nFROM title AS t\nJOIN movie_info_idx AS idx ON idx.movie_id = t.id\nWHERE t.production_year = 2015  \n    AND t.kind_id = 1               # movies only\n    AND idx.info_type_id = 100      # info_type is votes\n    AND idx.info &gt; 400000) AS movs  # at least 400,000 votes\nJOIN (SELECT a.person_id,\n       a.movie_id,\n       n.name\n    FROM cast_info AS a\n    JOIN aka_name AS n ON a.person_id = n.person_id\n    WHERE a.role_id = 2             # acresses only\n        AND a.person_id &gt; 3900000) AS acts ON acts.movie_id = movs.id\nGROUP BY movs.id;\n\n\n\n\n6 records\n\n\n\n\nid\n\n\ntitle\n\n\nnum_actress\n\n\n\n\n\n\n3313672\n\n\nAvengers: Age of Ultron\n\n\n1\n\n\n\n\n3752999\n\n\nInside Out\n\n\n1\n\n\n\n\n3787790\n\n\nJurassic World\n\n\n9\n\n\n\n\n3915213\n\n\nMad Max: Fury Road\n\n\n5\n\n\n\n\n4260166\n\n\nStar Wars: Episode VII - The Force Awakens\n\n\n15\n\n\n\n\n4389619\n\n\nThe Martian\n\n\n1"
  },
  {
    "objectID": "slides/2024-01-10-joins.html#unions",
    "href": "slides/2024-01-10-joins.html#unions",
    "title": "SQL joins",
    "section": "UNIONs",
    "text": "UNIONs\nSilly example where the column names are ignored.\n\nSELECT \n    1 AS bar,\n    2 AS foo\n\nUNION\n\nSELECT \n    10 AS foo,\n    20 AS bar;\n\n\n\n\n2 records\n\n\n\n\nbar\n\n\nfoo\n\n\n\n\n\n\n1\n\n\n2\n\n\n\n\n10\n\n\n20"
  },
  {
    "objectID": "slides/2024-01-10-joins.html#union",
    "href": "slides/2024-01-10-joins.html#union",
    "title": "SQL joins",
    "section": "UNION",
    "text": "UNION\nUNION is specifically designed to bind rows from two different SELECT queries where the variables have been selected in the same order.\nCombine the top voted movies from 2015 with the top voted movies from 2019.\nHowever, to account for time, we require the movies from 2015 to have more votes (400,000) than the movies from 2017 (200,000).\nThat is, the WHERE clause is different for the two subqueries."
  },
  {
    "objectID": "slides/2024-01-10-joins.html#union-1",
    "href": "slides/2024-01-10-joins.html#union-1",
    "title": "SQL joins",
    "section": "UNION",
    "text": "UNION\n\n(SELECT t.title, \n        t.production_year, \n        idx.info AS num_votes\n    FROM title AS t\nJOIN movie_info_idx AS idx ON idx.movie_id = t.id\nWHERE t.production_year = 2015  \n    AND t.kind_id = 1               \n    AND idx.info_type_id = 100      \n    AND idx.info &gt; 400000)\n\nUNION\n\n(SELECT t.title, \n        t.production_year, \n        idx.info AS num_votes\n    FROM title AS t\nJOIN movie_info_idx AS idx ON idx.movie_id = t.id\nWHERE t.production_year = 2017  \n    AND t.kind_id = 1               \n    AND idx.info_type_id = 100      \n    AND idx.info &gt; 200000)\nLIMIT 0, 100;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\ntitle\n\n\nproduction_year\n\n\nnum_votes\n\n\n\n\n\n\nAvengers: Age of Ultron\n\n\n2015\n\n\n540606\n\n\n\n\nInside Out\n\n\n2015\n\n\n443051\n\n\n\n\nJurassic World\n\n\n2015\n\n\n471237\n\n\n\n\nMad Max: Fury Road\n\n\n2015\n\n\n666484\n\n\n\n\nStar Wars: Episode VII - The Force Awakens\n\n\n2015\n\n\n691691\n\n\n\n\nThe Martian\n\n\n2015\n\n\n583987\n\n\n\n\nThe Revenant\n\n\n2015\n\n\n526189\n\n\n\n\nDunkirk\n\n\n2017\n\n\n229089\n\n\n\n\nGuardians of the Galaxy Vol. 2\n\n\n2017\n\n\n281845\n\n\n\n\nLogan\n\n\n2017\n\n\n397056"
  },
  {
    "objectID": "slides/2024-01-10-joins.html#union-all",
    "href": "slides/2024-01-10-joins.html#union-all",
    "title": "SQL joins",
    "section": "UNION ALL",
    "text": "UNION ALL\nIf the goal is to include duplicates across two tables, use UNION ALL instead of UNION.\nLet’s say that the first table is all movies with production year after 2012 and number of votes greater than 500,000. The second table is movies with production year equal to 2015 and number of votes greater than 400,000.\nThe Martian would be in both tables."
  },
  {
    "objectID": "slides/2024-01-10-joins.html#union-all-1",
    "href": "slides/2024-01-10-joins.html#union-all-1",
    "title": "SQL joins",
    "section": "UNION ALL",
    "text": "UNION ALL\nWith just UNION\n\n(SELECT t.title,\n        t.production_year, \n        idx.info AS num_votes\n    FROM title AS t\nJOIN movie_info_idx AS idx ON idx.movie_id = t.id\nWHERE t.production_year &gt; 2012  \n    AND t.kind_id = 1               \n    AND idx.info_type_id = 100      \n    AND idx.info &gt; 500000)\n\nUNION\n\n(SELECT t.title, \n        t.production_year, \n        idx.info AS num_votes\n    FROM title AS t\nJOIN movie_info_idx AS idx ON idx.movie_id = t.id\nWHERE t.production_year = 2015  \n    AND t.kind_id = 1               \n    AND idx.info_type_id = 100      \n    AND idx.info &gt; 400000)\nORDER BY production_year DESC, num_votes;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\ntitle\n\n\nproduction_year\n\n\nnum_votes\n\n\n\n\n\n\nBatman v Superman: Dawn of Justice\n\n\n2016\n\n\n500037\n\n\n\n\nDeadpool\n\n\n2016\n\n\n673887\n\n\n\n\nInside Out\n\n\n2015\n\n\n443051\n\n\n\n\nJurassic World\n\n\n2015\n\n\n471237\n\n\n\n\nThe Revenant\n\n\n2015\n\n\n526189\n\n\n\n\nAvengers: Age of Ultron\n\n\n2015\n\n\n540606\n\n\n\n\nThe Martian\n\n\n2015\n\n\n583987\n\n\n\n\nMad Max: Fury Road\n\n\n2015\n\n\n666484\n\n\n\n\nStar Wars: Episode VII - The Force Awakens\n\n\n2015\n\n\n691691\n\n\n\n\nInterstellar\n\n\n2014\n\n\n1102826"
  },
  {
    "objectID": "slides/2024-01-10-joins.html#union-all-2",
    "href": "slides/2024-01-10-joins.html#union-all-2",
    "title": "SQL joins",
    "section": "UNION ALL",
    "text": "UNION ALL\nWhen UNION ALL is applied, The Martian is listed twice in the results table.\n\n(SELECT t.title,\n        t.production_year, \n        idx.info AS num_votes\n    FROM title AS t\nJOIN movie_info_idx AS idx ON idx.movie_id = t.id\nWHERE t.production_year &gt; 2012  \n    AND t.kind_id = 1               \n    AND idx.info_type_id = 100      \n    AND idx.info &gt; 500000)\n\nUNION ALL\n\n(SELECT t.title, \n        t.production_year, \n        idx.info AS num_votes\n    FROM title AS t\nJOIN movie_info_idx AS idx ON idx.movie_id = t.id\nWHERE t.production_year = 2015  \n    AND t.kind_id = 1               \n    AND idx.info_type_id = 100      \n    AND idx.info &gt; 400000)\nORDER BY production_year DESC, num_votes;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\ntitle\n\n\nproduction_year\n\n\nnum_votes\n\n\n\n\n\n\nBatman v Superman: Dawn of Justice\n\n\n2016\n\n\n500037\n\n\n\n\nDeadpool\n\n\n2016\n\n\n673887\n\n\n\n\nInside Out\n\n\n2015\n\n\n443051\n\n\n\n\nJurassic World\n\n\n2015\n\n\n471237\n\n\n\n\nThe Revenant\n\n\n2015\n\n\n526189\n\n\n\n\nThe Revenant\n\n\n2015\n\n\n526189\n\n\n\n\nAvengers: Age of Ultron\n\n\n2015\n\n\n540606\n\n\n\n\nAvengers: Age of Ultron\n\n\n2015\n\n\n540606\n\n\n\n\nThe Martian\n\n\n2015\n\n\n583987\n\n\n\n\nThe Martian\n\n\n2015\n\n\n583987"
  },
  {
    "objectID": "handout/lab3_joins_sds261_j24.html#advice-for-turning-in-the-assignment",
    "href": "handout/lab3_joins_sds261_j24.html#advice-for-turning-in-the-assignment",
    "title": "Lab 3 - SQL joins",
    "section": "Advice for turning in the assignment",
    "text": "Advice for turning in the assignment\n\nBe sure to indicate (in the .sql file) which problem is being answered with which SQL code. Use the following syntax to comment within a .sql file: /* here is where comments go */. Indeed, feel free to copy the question into the .sql file so that you have it for your own records.\nsave the .Rproj file somewhere you can find it. Don’t keep everything in your downloads folder. Maybe make a folder called SDS261 or something. That folder could live on your Desktop. Or maybe in your Dropbox.\nThe SQL document should be saved in the R Project as lab3-sds261-yourlastname-yourfirstname.sql. You will have to navigate to the R Project to save the DBeaver file in the correct place.\nConnect to the yelp database, which contains the businesses, reviews, and users tables. See README file for connection details.\n\n\nSHOW TABLES;\n\n\n3 records\n\n\nTables_in_yelp\n\n\n\n\nbusinesses\n\n\nreviews\n\n\nusers"
  },
  {
    "objectID": "handout/lab3_joins_sds261_j24.html#assignment",
    "href": "handout/lab3_joins_sds261_j24.html#assignment",
    "title": "Lab 3 - SQL joins",
    "section": "Assignment",
    "text": "Assignment\n\nFor each of the three tables in the yelp database, identify the number of records and the variables. (That means, write at least a sentence for each table.)\n\n\nFind the user with the most reviews. What is the person’s name, and how many reviews did they make?\n\n\nWhat cities are represented in the businesses table? Find out by querying the number of businesses per city. Use LIMIT to start, just in case there are hundreds of cities. Write down a few of the city names. Do you notice anything interesting?\n\n\nFind the businesses in “Carefree” (a city in Arizona). Write down the names of a few of the businesses.\n\n\nCount the number of records resulting when the query connects the users with the reviews using a JOIN. How many records are there? What does that tell you about the two tables?\n\n\nHow many users wrote reviews in the reviews table but do not exist in the users table. Hint: use a RIGHT JOIN to keep all the reviews, and then look for the rows where the user_id from the users table IS NULL.\n\n\nWrite a query to ask a question that you think is interesting and uses at least one join. Provide both the question (in words) as well as the SQL code and results."
  },
  {
    "objectID": "slides/2024-01-11-regex1.html#proper-times-and-dates",
    "href": "slides/2024-01-11-regex1.html#proper-times-and-dates",
    "title": "Regular Expressions I",
    "section": "Proper times and dates",
    "text": "Proper times and dates\n\nMatch dates like 01/15/24 and also like 01.15.24 and like 01-15-24.\n\n\nstring &lt;- c(\"01/15/24\", \"01.15.24\", \"01-15-24\", \"011524\", \n            \"January 15, 2024\")"
  },
  {
    "objectID": "slides/2024-01-11-regex1.html#proper-times-and-dates-1",
    "href": "slides/2024-01-11-regex1.html#proper-times-and-dates-1",
    "title": "Regular Expressions I",
    "section": "Proper times and dates",
    "text": "Proper times and dates\n\nMatch dates like 01/15/24 and also like 01.15.24 and like 01-15-24.\n\n\nstring &lt;- c(\"01/15/24\", \"01.15.24\", \"01-15-24\", \"01 15 24\", \n            \"011524\", \"January 15, 2024\")\n\nstr_extract(string, \"\\\\d\\\\d.\\\\d\\\\d.\\\\d\\\\d\")\n\n[1] \"01/15/24\" \"01.15.24\" \"01-15-24\" \"01 15 24\" NA         NA        \n\nstr_extract(string, \"\\\\d\\\\d[/.\\\\-]\\\\d\\\\d[/.\\\\-]\\\\d\\\\d\")\n\n[1] \"01/15/24\" \"01.15.24\" \"01-15-24\" NA         NA         NA        \n\nstr_extract(string, \"\\\\d{2}[/.\\\\-]\\\\d{2}[/.\\\\-]\\\\d{2}\")\n\n[1] \"01/15/24\" \"01.15.24\" \"01-15-24\" NA         NA         NA"
  },
  {
    "objectID": "slides/2024-01-11-regex1.html#proper-times-and-dates-2",
    "href": "slides/2024-01-11-regex1.html#proper-times-and-dates-2",
    "title": "Regular Expressions I",
    "section": "Proper times and dates",
    "text": "Proper times and dates\n\nMatch a time of day such as “9:17 am” or “12:30 pm”. Require that the time be a valid time (not “99:99 pm”). Assume no leading zeros (i.e., “09:17 am”).\n\n\nstring &lt;- c(\"9:17 am\", \"12:30 pm\", \"99:99 pm\", \"09:17 am\")"
  },
  {
    "objectID": "slides/2024-01-11-regex1.html#proper-times-and-dates-3",
    "href": "slides/2024-01-11-regex1.html#proper-times-and-dates-3",
    "title": "Regular Expressions I",
    "section": "Proper times and dates",
    "text": "Proper times and dates\n\nMatch a time of day such as “9:17 am” or “12:30 pm”. Require that the time be a valid time (not “99:99 pm”). Assume no leading zeros (i.e., “09:17 am”).\n\n^(1[012]|[1-9]):[0-5][0-9] (am|pm)$\n\nstring &lt;- c(\"9:17 am\", \"12:30 pm\", \"99:99 pm\", \"09:17 am\")\n\nstr_extract(string, \"(1[012]|[1-9]):[0-5][0-9] (am|pm)\")\n\n[1] \"9:17 am\"  \"12:30 pm\" NA         \"9:17 am\" \n\nstr_extract(string, \"^(1[012]|[1-9]):[0-5][0-9] (am|pm)$\")\n\n[1] \"9:17 am\"  \"12:30 pm\" NA         NA"
  },
  {
    "objectID": "slides/2024-01-11-regex1.html#alternation-operator",
    "href": "slides/2024-01-11-regex1.html#alternation-operator",
    "title": "Regular Expressions I",
    "section": "Alternation operator",
    "text": "Alternation operator\nThe “or” operator, | has the lowest precedence and parentheses have the highest precedence, which means that parentheses get evaluated before “or”.\n\nWhat is the difference between \\bMary|Jane|Sue\\b and \\b(Mary|Jane|Sue)\\b?\n\n\nstring &lt;- c(\"Mary\", \"Mar\", \"Janet\", \"jane\", \"Susan\", \"Sue\")\n\nstr_extract(string, \"\\\\bMary|Jane|Sue\\\\b\")\nstr_extract(string, \"\\\\b(Mary|Jane|Sue)\\\\b\")"
  },
  {
    "objectID": "slides/2024-01-11-regex1.html#alternation-operator-1",
    "href": "slides/2024-01-11-regex1.html#alternation-operator-1",
    "title": "Regular Expressions I",
    "section": "Alternation operator",
    "text": "Alternation operator\nThe “or” operator, | has the lowest precedence and parentheses have the highest precedence, which means that parentheses get evaluated before “or”.\n\nWhat is the difference between \\bMary|Jane|Sue\\b and \\b(Mary|Jane|Sue)\\b?\n\n\nstring &lt;- c(\"Mary\", \"Mar\", \"Janet\", \"jane\", \"Susan\", \"Sue\")\n\nstr_extract(string, \"\\\\bMary|Jane|Sue\\\\b\")\n\n[1] \"Mary\" NA     \"Jane\" NA     NA     \"Sue\" \n\nstr_extract(string, \"\\\\b(Mary|Jane|Sue)\\\\b\")\n\n[1] \"Mary\" NA     NA     NA     NA     \"Sue\""
  },
  {
    "objectID": "handout/lab4_regex_sds261_j24.html#advice-for-turning-in-the-assignment",
    "href": "handout/lab4_regex_sds261_j24.html#advice-for-turning-in-the-assignment",
    "title": "Lab 4 - regular expressions",
    "section": "Advice for turning in the assignment",
    "text": "Advice for turning in the assignment\n\nBe sure to indicate (in the .qmd file) which problem is being answered with which code. A sentence or two with each response goes a long way toward your understanding!\nsave the .Rproj file somewhere you can find it. Don’t keep everything in your downloads folder. Maybe make a folder called SDS261 or something. That folder could live on your Desktop. Or maybe in your Dropbox.\nThe .qmd document should be saved in the R Project as lab4-sds261-yourlastname-yourfirstname.qmd.\n\n\nExample: Let’s say that I want to test whether the string contains a US zip code (of the format: xxxxx or xxxxx-xxxx). I might want to test it against a particular string.\n\nstring_zip &lt;- c(\"01063-6302\", \"91711\", \"6302\", \"01063\", \"zip 01063\")\n\nI would use the str_extract() function (in the stringr package) to test whether my regular expression is correct.\n\nstr_extract(string_zip, \"^\\\\d{5}(-\\\\d{4})?$\")\n\n[1] \"01063-6302\" \"91711\"      NA           \"01063\"      NA          \n\n\nDepending on how strict I was being, I might have kept the last one by leaving out the starting and ending positioning.\n\nstr_extract(string_zip, \"\\\\d{5}(-\\\\d{4})?\")\n\n[1] \"01063-6302\" \"91711\"      NA           \"01063\"      \"01063\"     \n\n\nNote that in R, \\d needs to be escaped to \\\\d. That’s true with any metacharacter which uses a backslash."
  },
  {
    "objectID": "handout/lab3_joins_sds261_j24_sol.html#advice-for-turning-in-the-assignment",
    "href": "handout/lab3_joins_sds261_j24_sol.html#advice-for-turning-in-the-assignment",
    "title": "Lab 3 - SQL joins",
    "section": "Advice for turning in the assignment",
    "text": "Advice for turning in the assignment\n\nBe sure to indicate (in the .sql file) which problem is being answered with which SQL code. Use the following syntax to comment within a .sql file: /* here is where comments go */. Indeed, feel free to copy the question into the .sql file so that you have it for your own records.\nsave the .Rproj file somewhere you can find it. Don’t keep everything in your downloads folder. Maybe make a folder called SDS261 or something. That folder could live on your Desktop. Or maybe in your Dropbox.\nThe SQL document should be saved in the R Project as lab3-sds261-yourlastname-yourfirstname.sql. You will have to navigate to the R Project to save the DBeaver file in the correct place.\nConnect to the yelp database, which contains the businesses, reviews, and users tables. See README file for connection details.\n\n\nSHOW TABLES;\n\n\n3 records\n\n\nTables_in_yelp\n\n\n\n\nbusinesses\n\n\nreviews\n\n\nusers"
  },
  {
    "objectID": "handout/lab3_joins_sds261_j24_sol.html#assignment",
    "href": "handout/lab3_joins_sds261_j24_sol.html#assignment",
    "title": "Lab 3 - SQL joins",
    "section": "Assignment",
    "text": "Assignment\n\nFor each of the three tables in the yelp database, identify the number of records and the variables. (That means, write at least a sentence for each table.)\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT * FROM businesses LIMIT 0, 5;\n\n\n5 records\n\n\n\n\n\n\n\n\n\n\n\n\nid\nname\nstars\nopen\nreview_count\ncity\nlongitude\nlatitude\n\n\n\n\nrncjoVoEFUJGCUoC1JgnUA\nPeoria Income Tax Service\n5\nTRUE\n3\nPeoria\n-112.2416\n33.58187\n\n\n0FNFSzCFP_rGUoJx8W7tJg\nBike Doctor\n5\nTRUE\n5\nPhoenix\n-112.1059\n33.60405\n\n\n3f_lyB6vFK48ukH6ScvLHg\nValley Permaculture Alliance\n5\nTRUE\n4\nPhoenix\n-112.0739\n33.46053\n\n\nusAsSV36QmUej8–yvN-dg\nFood City\n4\nTRUE\n5\nPhoenix\n-112.0854\n33.39221\n\n\nPzOqRohWw7F7YEPBz6AubA\nHot Bagels & Deli\n4\nTRUE\n14\nGlendale Az\n-112.2003\n33.71280\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT * FROM reviews LIMIT 0, 5;\n\n\n5 records\n\n\nbusiness_id\nuser_id\nstars\n\n\n\n\n9yKzy9PApeiPPOUJEtnvkg\nrLtl8ZkDX5vH5nAx9C3q5Q\n5\n\n\nZRJwVLyzEJq1VAihDhYiow\n0a2KyEL0d3Yb1V6aivbIuQ\n5\n\n\n6oRAC4uyJCsJl1X0WZpVSA\n0hT2KtfLiobPvh6cDC8JQg\n4\n\n\n_1QQZuf4zZOyFCvXc0o6Vg\nuZetl9T0NcROGOyFfughhg\n5\n\n\n6ozycU1RpktNG2-1BroVtw\nvYmM4KTsC8ZfQBg-j5MWkw\n5\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT * FROM users LIMIT 0, 5;\n\n\n5 records\n\n\nuser_id\nname\naverage_stars\nreview_count\n\n\n\n\nCR2y7yEm4X035ZMzrTtN9Q\nJim\n5\n6\n\n\n_9GXoHhdxc30ujPaQwh6Ew\nKelle\n1\n2\n\n\n8mM-nqxjg6pT04kwcjMbsw\nStephanie\n5\n2\n\n\nCh6CdTR2IVaVANr-RglMOg\nT\n5\n2\n\n\nNZrLmHRyiHmyT1JrfzkCOA\nBeth\n1\n1\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT COUNT(*) FROM businesses;\n\n\n1 records\n\n\nCOUNT(*)\n\n\n\n\n11537\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT COUNT(*) FROM reviews;\n\n\n1 records\n\n\nCOUNT(*)\n\n\n\n\n229907\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT COUNT(*) FROM users;\n\n\n1 records\n\n\nCOUNT(*)\n\n\n\n\n43873\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nbusinesses: 11,537 records with variables of id, name, stars, open, review_count, city, longitude, latitude\nreviews: 229,907 records with variables of business_id, user_id, stars\nusers: 43,873 records with variables of user_id, name, average_stars, review_count\n\n\n\n\n\nFind the user with the most reviews. What is the person’s name, and how many reviews did they make?\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT user_id, name, average_stars, review_count\nFROM users\nORDER BY review_count DESC\nLIMIT 0, 5;\n\n\n5 records\n\n\nuser_id\nname\naverage_stars\nreview_count\n\n\n\n\nAIVQg9enGug5woxehjmlGg\nKim\n3.77\n5807\n\n\n6HBnx7fTfFlpWyez_P55xA\nKaren\n3.63\n2848\n\n\n7FuLnS_-b79GG-33mwLaMg\nAndrew\n3.64\n2810\n\n\nlxZSVeJz6KEBW1nlA3JKJg\nShiho\n3.84\n2760\n\n\nqbfQRHLvZk5WSkKY0l_lMw\nStephy\n3.87\n2587\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nKim has the most reviews (5,807 reviews!) with an average rating of 3.77 stars.\n\n\n\n\n\nWhat cities are represented in the businesses table? Find out by querying the number of businesses per city. Use LIMIT to start, just in case there are hundreds of cities. Write down a few of the city names. Do you notice anything interesting?\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT COUNT(*), city\nFROM businesses\nGROUP BY city\nORDER BY city\nLIMIT 0, 100;\n\n\nDisplaying records 1 - 10\n\n\nCOUNT(*)\ncity\n\n\n\n\n4\nAhwatukee\n\n\n34\nAnthem\n\n\n46\nApache Junction\n\n\n129\nAvondale\n\n\n31\nBuckeye\n\n\n20\nCarefree\n\n\n48\nCasa Grande\n\n\n65\nCave Creek\n\n\n865\nChandler\n\n\n1\nCharleston\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nThere appear to be cities in Phoenix as well as in Pheonix (??). And a few of the city names include the AZ to indicate that they are in Arizona. Before really working with the data, we would want to clean up the city names.\n\n\n\n\n\nFind the businesses in “Carefree” (a city in Arizona). Write down the names of a few of the businesses.\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT id, name, stars, open, review_count, city\nFROM businesses\nWHERE city = \"Carefree\"\nLIMIT 0, 50;\n\n\nDisplaying records 1 - 10\n\n\n\n\n\n\n\n\n\n\nid\nname\nstars\nopen\nreview_count\ncity\n\n\n\n\nK0v87iFgB3sXSzw6e-BJ5w\nAZ Wine Company\n5\nTRUE\n8\nCarefree\n\n\nnZ0mUQEdez-CHrykD2nNLA\nCarefree Resort & Conference Center\n3\nTRUE\n30\nCarefree\n\n\nc4FLMLP7hMnAbSiW2o_o3A\nSaguaro Grille\n3\nFALSE\n5\nCarefree\n\n\nQygMZmPO8A6OaJYO2a0pnw\nStudio C Hair Salon\n5\nTRUE\n3\nCarefree\n\n\nZ85BGr-jnEWvoI4xAnoh3g\nLowe’s Home Improvement Warehouse of Phoenix\n4\nTRUE\n6\nCarefree\n\n\nSahvCnFp3OvUVZIAYCyckw\n34 Easy St\n4\nFALSE\n3\nCarefree\n\n\njdStuaC_1leN_DNGcQ0yEw\nLatilla\n5\nFALSE\n5\nCarefree\n\n\nAwUMl0PT3mdkPS7huzEUYQ\nBalloon Festival\n1\nTRUE\n4\nCarefree\n\n\nMHPXDXVE_cUYodfPhkadeQ\nBlack Mountain Coffee Shop\n4\nTRUE\n11\nCarefree\n\n\nOvlAlAkiyyCILkq-TylBWg\nThe Sundial Cafe\n3\nTRUE\n7\nCarefree\n\n\n\n\n\n\n\n\n\nCount the number of records resulting when the query connects the users with the reviews using a JOIN. How many records are there? What does that tell you about the two tables?\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT COUNT(*)\nFROM users\nJOIN reviews ON users.user_id = reviews.user_id\nLIMIT 0, 100;\n\n\n1 records\n\n\nCOUNT(*)\n\n\n\n\n215879\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nBecause there are fewer records in the join, we know that some reviews were done by users that are not in the users table.\n\n\n\n\n\nHow many users wrote reviews in the reviews table but do not exist in the users table. Hint: use a RIGHT JOIN to keep all the reviews, and then look for the rows where the user_id from the users table IS NULL.\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT COUNT(DISTINCT reviews.user_id)\nFROM users\nRIGHT JOIN reviews ON users.user_id = reviews.user_id\nWHERE users.user_id IS NULL;\n\n\n1 records\n\n\nCOUNT(DISTINCT reviews.user_id)\n\n\n\n\n2108\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nThere are 2,108 users who wrote 14,028 reviews and who are not in the users table.\n\n\n\n\n\nWrite a query to ask a question that you think is interesting and uses at least one join. Provide both the question (in words) as well as the SQL code and results."
  },
  {
    "objectID": "handout/lab4_regex_sds261_j24.html#assignment",
    "href": "handout/lab4_regex_sds261_j24.html#assignment",
    "title": "Lab 4 - regular expressions",
    "section": "Assignment",
    "text": "Assignment\n\nGo through the lessons in https://regexone.com/. Nothing to turn in.\nCatch all of the instances of the words color or colour, case insensitive. Test on the given string.\n\n\nstring &lt;- c(\"color\", \"colour\", \"Color\", \"Colour\", \"Colr\", \"cols\")\n\n\n\nMatch any number (including zero) of o’s, as in: ggle, gogle, google, gooogle, …\nMatch at least one o, as in: gogle, google, gooogle, …\n\n\nTest on the given string.\n\nstring &lt;- c(\"ggle\", \"gogle\", \"google\", \"gooogle\", \"goooogle\", \"gooooogle\")\n\n\nValidate dates which are in the format mm/dd/yy or mm/dd/yyyy. Allow for any digits for the values (e.g., month could be 47). As an extra challenge, try to make the numerical values realistic (e.g., months only between 01 and 12). Test on the given string.\n\n\nstring_date &lt;- c(\"01/11/2024\", \"1/11/2024\", \"1/1/24\", \"01/11/24\", \"24/01/4700\" )\n\n\nCheck a command line response so that true, t, yes, y, okay, ok, and 1 are all accepted in any combination of uppercase and lowercase. Test on the given string.\n\n\nstr_affirm &lt;- c(\"true\", \"t\", \"yes\", \"y\", \"okay\", \"ok\", \"1\", \"tRUe\", \"TRUE\", \"T\",\n               \"YES!\", \"yeS\", \"okay...\", \"sure\", \"maybe\")\n\n\nMatch numbers that use the comma as the thousands separator and the dot as the decimal separator. Test on the given string.\n\n\nstring_number &lt;- c(\"12345\", \"12,345\", \"123.45\", \"1,234,567.890\", \"12,345.\")\n\n\nDetermine whether a user entered a North American phone number in a common format, including the local area code. Common formats include 1234567890, 123-456-7890, 123.456.7890, 123 456 7890, (123) 456 7890, and all related combinations. Test on the given string.\n\n\nstring_phone &lt;- c(\"1234567890\", \"1234\", \"456-7890\", \"123-456-7890\", \"123.456.7890\", \"123 456 7890\", \"(123) 456 7890\", \"+1 (123) 456 789\")\n\n\nFind all words that occur inside an html emphasis tag (&lt;em&gt; and &lt;/em&gt;). Test on the given string. (After Friday’s class.)\n\n\nstring_emph &lt;- c(\"&lt;p&gt;&lt;strong&gt;Pellentesque habitant morbi tristique&lt;/strong&gt; senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. &lt;em&gt;Aenean ultricies mi vitae est.&lt;/em&gt; Mauris placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra. Vestibulum erat wisi, condimentum sed, &lt;code&gt;commodo vitae&lt;/code&gt;, ornare sit amet, wisi. Aenean fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci, sagittis tempus lacus enim ac dui. &lt;a href='#'&gt;Donec non enim&lt;/a&gt; in turpis pulvinar facilisis. Ut felis.&lt;/p&gt;\")"
  },
  {
    "objectID": "handout/lab4_regex_sds261_j24_sol.html",
    "href": "handout/lab4_regex_sds261_j24_sol.html",
    "title": "Lab 4 - regular expressions",
    "section": "",
    "text": "library(tidyverse)\nlibrary(stringr)\nToday’s lab will provide practice working with regular expressions in R.\nThe goals for lab 4 include:"
  },
  {
    "objectID": "handout/lab4_regex_sds261_j24_sol.html#advice-for-turning-in-the-assignment",
    "href": "handout/lab4_regex_sds261_j24_sol.html#advice-for-turning-in-the-assignment",
    "title": "Lab 4 - regular expressions",
    "section": "Advice for turning in the assignment",
    "text": "Advice for turning in the assignment\n\nBe sure to indicate (in the .qmd file) which problem is being answered with which code. A sentence or two with each response goes a long way toward your understanding!\nsave the .Rproj file somewhere you can find it. Don’t keep everything in your downloads folder. Maybe make a folder called SDS261 or something. That folder could live on your Desktop. Or maybe in your Dropbox.\nThe .qmd document should be saved in the R Project as lab4-sds261-yourlastname-yourfirstname.qmd.\n\n\nExample: Let’s say that I want to test whether the string contains a US zip code (of the format: xxxxx or xxxxx-xxxx). I might want to test it against a particular string.\n\nstring_zip &lt;- c(\"01063-6302\", \"91711\", \"6302\", \"01063\", \"zip 01063\")\n\nI would use the str_extract() function (in the stringr package) to test whether my regular expression is correct.\n\nstr_extract(string_zip, \"^\\\\d{5}(-\\\\d{4})?$\")\n\n[1] \"01063-6302\" \"91711\"      NA           \"01063\"      NA          \n\n\nDepending on how strict I was being, I might have kept the last one by leaving out the starting and ending positioning.\n\nstr_extract(string_zip, \"\\\\d{5}(-\\\\d{4})?\")\n\n[1] \"01063-6302\" \"91711\"      NA           \"01063\"      \"01063\"     \n\n\nNote that in R, \\d needs to be escaped to \\\\d. That’s true with any metacharacter which uses a backslash."
  },
  {
    "objectID": "handout/lab4_regex_sds261_j24_sol.html#assignment",
    "href": "handout/lab4_regex_sds261_j24_sol.html#assignment",
    "title": "Lab 4 - regular expressions",
    "section": "Assignment",
    "text": "Assignment\n\nGo through the lessons in https://regexone.com/. Nothing to turn in.\nCatch all of the instances of the words color or colour, case insensitive. Test on the given string.\n\n\nstring &lt;- c(\"color\", \"colour\", \"Color\", \"Colour\", \"Colr\", \"cols\")\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\n# Solution\n\nstr_extract(string, \"(?i)colou?r\")\n\n[1] \"color\"  \"colour\" \"Color\"  \"Colour\" NA       NA      \n\n\n\n\n\n\n\nMatch any number (including zero) of o’s, as in: ggle, gogle, google, gooogle, …\nMatch at least one o, as in: gogle, google, gooogle, …\n\n\nTest on the given string.\n\nstring &lt;- c(\"ggle\", \"gogle\", \"google\", \"gooogle\", \"goooogle\", \"gooooogle\")\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\n# Solution (a)\n\nstr_extract(string, \"go*gle\")\n\n[1] \"ggle\"      \"gogle\"     \"google\"    \"gooogle\"   \"goooogle\"  \"gooooogle\"\n\n# Solution (b)\n\nstr_extract(string, \"go+gle\")\n\n[1] NA          \"gogle\"     \"google\"    \"gooogle\"   \"goooogle\"  \"gooooogle\"\n\n\n\n\n\n\nValidate dates which are in the format mm/dd/yy or mm/dd/yyyy. Allow for any digits for the values (e.g., month could be 47). As an extra challenge, try to make the numerical values realistic (e.g., months only between 01 and 12). Test on the given string.\n\n\nstring_date &lt;- c(\"01/11/2024\", \"1/11/2024\", \"1/1/24\", \"01/11/24\", \"24/01/4700\" )\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\n# Solution: \n\nstr_extract(string_date, \"^[0-1][0-9]/[0-3][0-9]/([0-9]{2})?[0-9]{2}\")\n\n[1] \"01/11/2024\" NA           NA           \"01/11/24\"   NA          \n\n# Another solution\n\nstr_extract(string_date, \"\\\\d{2}/\\\\d{2}/(\\\\d{2}|\\\\d{4})\")\n\n[1] \"01/11/20\" NA         NA         \"01/11/24\" \"24/01/47\"\n\n\n\n\n\n\nCheck a command line response so that true, t, yes, y, okay, ok, and 1 are all accepted in any combination of uppercase and lowercase. Test on the given string.\n\n\nstr_affirm &lt;- c(\"true\", \"t\", \"yes\", \"y\", \"okay\", \"ok\", \"1\", \"tRUe\", \"TRUE\", \"T\",\n               \"YES!\", \"yeS\", \"okay...\", \"sure\", \"maybe\")\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\n# Solution: \n\nstr_extract(str_affirm, \"(?i)^(1|t(rue)?|y(es)?|ok(ay)?)$\")\n\n [1] \"true\" \"t\"    \"yes\"  \"y\"    \"okay\" \"ok\"   \"1\"    \"tRUe\" \"TRUE\" \"T\"   \n[11] NA     \"yeS\"  NA     NA     NA    \n\n\n\n\n\n\nMatch numbers that use the comma as the thousands separator and the dot as the decimal separator. Test on the given string.\n\n\nstring_number &lt;- c(\"12345\", \"12,345\", \"123.45\", \"1,234,567.890\", \"12,345.\")\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\n# Solution: \n\nstr_extract(string_number, \"^[0-9]{1,3}(,[0-9]{3})*(\\\\.[0-9]*)?$\")\n\n[1] NA              \"12,345\"        \"123.45\"        \"1,234,567.890\"\n[5] \"12,345.\"      \n\n# or if you don't want the last number\n\nstr_extract(string_number, \"^[0-9]{1,3}(,[0-9]{3})*(\\\\.[0-9]+)?$\")\n\n[1] NA              \"12,345\"        \"123.45\"        \"1,234,567.890\"\n[5] NA             \n\n\n\n\n\n\nDetermine whether a user entered a North American phone number in a common format, including the local area code. Common formats include 1234567890, 123-456-7890, 123.456.7890, 123 456 7890, (123) 456 7890, and all related combinations. Test on the given string.\n\n\nstring_phone &lt;- c(\"1234567890\", \"1234\", \"456-7890\", \"123-456-7890\", \"123.456.7890\", \"123 456 7890\", \"(123) 456 7890\", \"+1 (123) 456 789\")\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\n# Solution: \n\nstr_extract(string_phone, \"^\\\\(?([0-9]{3})\\\\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$\")\n\n[1] \"1234567890\"     NA               NA               \"123-456-7890\"  \n[5] \"123.456.7890\"   \"123 456 7890\"   \"(123) 456 7890\" NA              \n\n\n\n\n\n\nFind all words that occur inside an html emphasis tag (&lt;em&gt; and &lt;/em&gt;). Test on the given string. (After Friday’s class.)\n\n\nstring_emph &lt;- c(\"&lt;p&gt;&lt;strong&gt;Pellentesque habitant morbi tristique&lt;/strong&gt; senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. &lt;em&gt;Aenean ultricies mi vitae est.&lt;/em&gt; Mauris placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra. Vestibulum erat wisi, condimentum sed, &lt;code&gt;commodo vitae&lt;/code&gt;, ornare sit amet, wisi. Aenean fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci, sagittis tempus lacus enim ac dui. &lt;a href='#'&gt;Donec non enim&lt;/a&gt; in turpis pulvinar facilisis. Ut felis.&lt;/p&gt;\")\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\n# Solution: \n\nstr_extract(string_emph, \"(?&lt;=&lt;em&gt;)[\\\\w\\\\s.]+(?=&lt;/em&gt;)\")\n\n[1] \"Aenean ultricies mi vitae est.\""
  },
  {
    "objectID": "slides/2024-01-11-regex1.html#case-insenstive",
    "href": "slides/2024-01-11-regex1.html#case-insenstive",
    "title": "Regular Expressions I",
    "section": "Case insenstive",
    "text": "Case insenstive\n\nMatch only the word meter in “The cemetery is 1 meter from the stop sign.” Also match Meter in “The cemetery is 1 Meter from the stop sign.”"
  },
  {
    "objectID": "slides/2024-01-11-regex1.html#case-insenstive-1",
    "href": "slides/2024-01-11-regex1.html#case-insenstive-1",
    "title": "Regular Expressions I",
    "section": "Case insenstive",
    "text": "Case insenstive\n\nMatch only the word meter in “The cemetery is 1 meter from the stop sign.” Also match Meter in “The cemetery is 1 Meter from the stop sign.”\n\n\nstring &lt;- c(\"The cemetery is 1 meter from the stop sign.\", \n            \"The cemetery is 1 Meter from the stop sign.\")\n\nstr_extract(string, \"(?i)\\\\bmeter\\\\b\")\n\n[1] \"meter\" \"Meter\""
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#regular-expressions-and-sql",
    "href": "slides/2024-01-12-regex2.html#regular-expressions-and-sql",
    "title": "Regular Expressions II",
    "section": "Regular expressions and SQL",
    "text": "Regular expressions and SQL\nBack to the IMDb database…\n\nSELECT production_year, title\n  FROM title\n  WHERE kind_id = 1 AND\n        title REGEXP '(?i)star'\n  LIMIT 0, 20;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\nproduction_year\n\n\ntitle\n\n\n\n\n\n\n2005\n\n\n\"Dancing with the Stars\" (I)\n\n\n\n\n2005\n\n\n\"Dancing with the Stars\" (II)\n\n\n\n\n2005\n\n\n\"Dancing with the Stars\" (III)\n\n\n\n\n2017\n\n\n\"Girl Starter\" (II)\n\n\n\n\n2001\n\n\n\"Popstars\" (I)\n\n\n\n\n2001\n\n\n\"Popstars\" (II)\n\n\n\n\n2002\n\n\n\"Popstars\" (I)\n\n\n\n\n2000\n\n\n\"Popstars\" (I)\n\n\n\n\n1959\n\n\n\"Startime\" (II)\n\n\n\n\n1959\n\n\n\"Startime\" (I)"
  },
  {
    "objectID": "slides/2024-01-12-regex2.html#course-project",
    "href": "slides/2024-01-12-regex2.html#course-project",
    "title": "Regular Expressions II",
    "section": "Course project",
    "text": "Course project\nDon’t forget, next week, each person will be working on their own mini project!\n\nUsing SQL queries and joins to wrangle complicated data tables.\nWriting regular expressions to parse observations.\nCreating a SQL database.\n\n\nemail jo.hardin@pomona.edu by Tuesday, Jan 16 with an idea of what you plan to do.\n\nQuestion of interest that you hope to address.\nHolistic description of the dataset(s) (a few sentences).\nDescription of the observational units and columns in each data table.\nFull reference for data citation.\nLink to the resources."
  },
  {
    "objectID": "slides/2024-01-16-creating-db.html#duckdb",
    "href": "slides/2024-01-16-creating-db.html#duckdb",
    "title": "Creating Databases",
    "section": "DuckDB",
    "text": "DuckDB\nDuckDB\n\nin-process database management system that runs entirely on your own computer.\nthe data live in your storage (instead of your memory).\nyou don’t have to transfer queries or results over the internet."
  },
  {
    "objectID": "slides/2024-01-16-creating-db.html#duckdb-caveat",
    "href": "slides/2024-01-16-creating-db.html#duckdb-caveat",
    "title": "Creating Databases",
    "section": "DuckDB caveat",
    "text": "DuckDB caveat\n\nthe SQL dialect used in DuckDB is slightly different from MySQL\nwrite SELECT * FROM table 10; instead of SELECT * FROM table 0, 10;\nlots of different dialects, depending on the SQL server. Always be aware of the dialect you are using."
  },
  {
    "objectID": "slides/2024-01-16-creating-db.html#duckdb-via-r",
    "href": "slides/2024-01-16-creating-db.html#duckdb-via-r",
    "title": "Creating Databases",
    "section": "DuckDB via R",
    "text": "DuckDB via R\n\ninstall.packages(\"duckdb\")  # only once, in the Console, not in the .qmd or .Rmd file\nlibrary(duckdb)             # at the top of the .qmd or .Rmd file\n\nlibrary(DBI)                # we also still need the DBI package\n\n\ncon_duckdb &lt;- DBI::dbConnect(duckdb::duckdb(),\n                             dbdir = \"duck_datab\")\n\n\nthe database has been stored to a database directory called duck_datab which lives in the current R project.\ncan’t open it like a standard folder, but it is where DuckDB stores the database files."
  },
  {
    "objectID": "slides/2024-01-16-creating-db.html#preparing-to-load-data",
    "href": "slides/2024-01-16-creating-db.html#preparing-to-load-data",
    "title": "Creating Databases",
    "section": "Preparing to load data",
    "text": "Preparing to load data\nUnlike R, when creating a new data table, SQL requires that you communicate each future variable (column) and that variable’s type. Variable types are not automatically generated!"
  },
  {
    "objectID": "slides/2024-01-16-creating-db.html#saturday-night-live",
    "href": "slides/2024-01-16-creating-db.html#saturday-night-live",
    "title": "Creating Databases",
    "section": "Saturday Night Live",
    "text": "Saturday Night Live\n\nFigure 1: image credit: NBCConsider the Saturday Night Live datasets available on the snldb GitHub repo."
  },
  {
    "objectID": "slides/2024-01-16-creating-db.html#casts-table",
    "href": "slides/2024-01-16-creating-db.html#casts-table",
    "title": "Creating Databases",
    "section": "casts table",
    "text": "casts table\nUse R to understand the data from casts.csv.\n\nglimpse(casts)\n\nRows: 614\nColumns: 8\n$ aid             &lt;chr&gt; \"A. Whitney Brown\", \"A. Whitney Brown\", \"A. Whitney Br…\n$ sid             &lt;dbl&gt; 11, 12, 13, 14, 15, 16, 5, 39, 40, 41, 42, 45, 46, 21,…\n$ featured        &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, …\n$ first_epid      &lt;dbl&gt; 19860222, NA, NA, NA, NA, NA, 19800409, 20140118, NA, …\n$ last_epid       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n$ update_anchor   &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE…\n$ n_episodes      &lt;dbl&gt; 8, 20, 13, 20, 20, 20, 5, 11, 21, 21, 21, 18, 17, 20, …\n$ season_fraction &lt;dbl&gt; 0.444, 1.000, 1.000, 1.000, 1.000, 1.000, 0.250, 0.524…"
  },
  {
    "objectID": "slides/2024-01-16-creating-db.html#loading-data",
    "href": "slides/2024-01-16-creating-db.html#loading-data",
    "title": "Creating Databases",
    "section": "Loading data",
    "text": "Loading data\nImporting .csv files as tables, a series of steps:1\n\na USE statement that ensures we are in the right schema/database.\na series of DROP TABLE statements that drop any old tables with the same names as the ones we are going to create.\na series of CREATE TABLE statements that specify the table structures.\na series of COPY statements that read the data from the .csv files into the appropriate tables.\n\ntaken from MDSR."
  },
  {
    "objectID": "slides/2024-01-16-creating-db.html#loading-step-1-use",
    "href": "slides/2024-01-16-creating-db.html#loading-step-1-use",
    "title": "Creating Databases",
    "section": "Loading step 1, USE",
    "text": "Loading step 1, USE\nUse the (local) database that we’ve called duck_datab.\n\n```{sql}\n#| connection: con_duckdb\n\nUSE duck_datab;\n```"
  },
  {
    "objectID": "slides/2024-01-16-creating-db.html#loading-step-2-refresh",
    "href": "slides/2024-01-16-creating-db.html#loading-step-2-refresh",
    "title": "Creating Databases",
    "section": "Loading step 2, refresh",
    "text": "Loading step 2, refresh\nMake sure to “refresh” the table, in case it already exists. However, be very careful with the DROP TABLE statement, as it removes the casts table.\n\nDROP TABLE IF EXISTS casts;"
  },
  {
    "objectID": "slides/2024-01-16-creating-db.html#loading-step-3-create-table",
    "href": "slides/2024-01-16-creating-db.html#loading-step-3-create-table",
    "title": "Creating Databases",
    "section": "Loading step 3, CREATE TABLE",
    "text": "Loading step 3, CREATE TABLE\nCarefully define the variable types, whether or not they allow missing values, and what a default value is for that variable. Additionally, identify the key for accessing information.\n\nCREATE TABLE casts (\n  aid VARCHAR(255) NOT NULL DEFAULT '',\n  sid INTEGER NOT NULL DEFAULT 0,\n  featured BOOLEAN NOT NULL DEFAULT 'false',\n  first_epid INTEGER DEFAULT 0,\n  last_epid INTEGER DEFAULT 0,\n  update_anchor BOOLEAN NOT NULL DEFAULT 0,\n  n_episodes INTEGER NOT NULL DEFAULT 0,\n  season_fraction DECIMAL(21,20) NOT NULL DEFAULT 0,\n  PRIMARY KEY (sid, aid)\n);"
  },
  {
    "objectID": "slides/2024-01-16-creating-db.html#loading-step-4-copy",
    "href": "slides/2024-01-16-creating-db.html#loading-step-4-copy",
    "title": "Creating Databases",
    "section": "Loading step 4, COPY",
    "text": "Loading step 4, COPY\nThe .csv file lives on my computer, so I load it in directly. [n.b., the statement to load in data is different in MySQL.]\n\nCOPY casts FROM 'data/casts.csv' HEADER;"
  },
  {
    "objectID": "slides/2024-01-16-creating-db.html#checking-the-loading-select",
    "href": "slides/2024-01-16-creating-db.html#checking-the-loading-select",
    "title": "Creating Databases",
    "section": "Checking the loading, SELECT",
    "text": "Checking the loading, SELECT\n\nSELECT * FROM casts LIMIT 8;\n\n\n\n\n\nTable 1: After CREATE TABLE where variable types are set, the COPY command pulls the data into the table. SELECT shows us that the table is as expected.\n\n\naid\nsid\nfeatured\nfirst_epid\nlast_epid\nupdate_anchor\nn_episodes\nseason_fraction\n\n\n\n\nA. Whitney Brown\n11\nTRUE\n19860222\n\nFALSE\n8\n0.444\n\n\nA. Whitney Brown\n12\nTRUE\n\n\nFALSE\n20\n1.000\n\n\nA. Whitney Brown\n13\nTRUE\n\n\nFALSE\n13\n1.000\n\n\nA. Whitney Brown\n14\nTRUE\n\n\nFALSE\n20\n1.000\n\n\nA. Whitney Brown\n15\nTRUE\n\n\nFALSE\n20\n1.000\n\n\nA. Whitney Brown\n16\nTRUE\n\n\nFALSE\n20\n1.000\n\n\nAlan Zweibel\n5\nTRUE\n19800409\n\nFALSE\n5\n0.250\n\n\nSasheer Zamata\n39\nTRUE\n20140118\n\nFALSE\n11\n0.524"
  },
  {
    "objectID": "slides/2024-01-16-creating-db.html#check-the-database",
    "href": "slides/2024-01-16-creating-db.html#check-the-database",
    "title": "Creating Databases",
    "section": "Check the database",
    "text": "Check the database\nLet’s make sure that the database exists and that the table in the database exists.\n\nSHOW DATABASES;\n\n\n\n\n1 records\n\n\n\n\ndatabase_name\n\n\n\n\n\n\nduck_datab"
  },
  {
    "objectID": "slides/2024-01-16-creating-db.html#efficiencies",
    "href": "slides/2024-01-16-creating-db.html#efficiencies",
    "title": "Creating Databases",
    "section": "Efficiencies",
    "text": "Efficiencies\n\nEach library (database) has books (tables). Each book (table) has pages (rows). Each page (row) has a unique page number to identify it (key value); to find a particular page, you sort through the page numbers (key values). But it isn’t immediately obvious where the particular page of interest is, you might have to page through the book a little bit to find the page of interest. It would be easier if you had several bookmarks throughout the book to anchor some of the page numbers. For example, if you want page 1047 and you have a bookmark on page 1050, you only have to turn back three pages. The bookmark is an index, it helps you find the desired rows much more quickly.1\n\nAnalogy taken from: https://www.quora.com/profile/Lara-Mazilu"
  },
  {
    "objectID": "slides/2024-01-16-creating-db.html#key",
    "href": "slides/2024-01-16-creating-db.html#key",
    "title": "Creating Databases",
    "section": "Key",
    "text": "Key\nKeys are unique identifiers for each row, used primarily for connecting tables. Keys are generally not helpful for efficiency, but they are important for data integrity and relationships between tables.\n\nPRIMARY KEY is a column or set of columns that uniquely identify each row. Primary keys cannot be NULL.\nFOREIGN KEY is a column or set of columns that reference a primary key in a different table. A foreign key can be NULL."
  },
  {
    "objectID": "slides/2024-01-16-creating-db.html#index",
    "href": "slides/2024-01-16-creating-db.html#index",
    "title": "Creating Databases",
    "section": "Index",
    "text": "Index\n\nEach library (database) has books (tables). Each book (table) has pages (rows). Each page (row) has a unique page number to identify it (key value); to find a particular page, you sort through the page numbers (key values). But it isn’t immediately obvious where the particular page of interest is, you might have to page through the book a little bit to find the page of interest. It would be easier if you had several bookmarks throughout the book to anchor some of the page numbers. For example, if you want page 1047 and you have a bookmark on page 1050, you only have to turn back three pages. The bookmark is an index, it helps you find the desired rows much more quickly.1\n\nAnalogy taken from: https://www.quora.com/profile/Lara-Mazilu"
  },
  {
    "objectID": "slides/2024-01-16-creating-db.html#find-keys-and-indices",
    "href": "slides/2024-01-16-creating-db.html#find-keys-and-indices",
    "title": "Creating Databases",
    "section": "Find keys and indices",
    "text": "Find keys and indices\nIn MySQL the commands SHOW KEYS and SHOW INDEXES provide information about the keys and indices for each table."
  },
  {
    "objectID": "slides/2024-01-16-creating-db.html#best-practice",
    "href": "slides/2024-01-16-creating-db.html#best-practice",
    "title": "Creating Databases",
    "section": "Best practice",
    "text": "Best practice\nIt is always a good idea to terminate the SQL connection when you are done with it.\n\ndbDisconnect(con_duckdb, shutdown = TRUE)"
  },
  {
    "objectID": "slides/2024-01-16-creating-db.html#check-the-database-1",
    "href": "slides/2024-01-16-creating-db.html#check-the-database-1",
    "title": "Creating Databases",
    "section": "Check the database",
    "text": "Check the database\nLet’s make sure that the database exists and that the table in the database exists.\n\nSHOW TABLES;\n\n\n\n\n1 records\n\n\n\n\nname\n\n\n\n\n\n\ncasts"
  },
  {
    "objectID": "slides/2024-01-16-creating-db.html#check-the-database-2",
    "href": "slides/2024-01-16-creating-db.html#check-the-database-2",
    "title": "Creating Databases",
    "section": "Check the database",
    "text": "Check the database\nLet’s make sure that the database exists and that the table in the database exists.\n\nDESCRIBE casts;\n\n\n\n\n\nTable 2: DESCRIBE variables in the casts table.\n\n\ncolumn_name\ncolumn_type\nnull\nkey\ndefault\nextra\n\n\n\n\naid\nVARCHAR\nNO\nPRI\n''\n\n\n\nsid\nINTEGER\nNO\nPRI\n0\n\n\n\nfeatured\nBOOLEAN\nNO\n\n'false'\n\n\n\nfirst_epid\nINTEGER\nYES\n\n0\n\n\n\nlast_epid\nINTEGER\nYES\n\n0\n\n\n\nupdate_anchor\nBOOLEAN\nNO\n\n0\n\n\n\nn_episodes\nINTEGER\nNO\n\n0\n\n\n\nseason_fraction\nDECIMAL(21,20)\nNO\n\n0"
  },
  {
    "objectID": "slides/2024-01-16-creating-db.html#partitioning",
    "href": "slides/2024-01-16-creating-db.html#partitioning",
    "title": "Creating Databases",
    "section": "Partitioning",
    "text": "Partitioning\nAnother way to speed up query retrievals is to partition the data tables. If, for example, the SNL queries were always done by year, then the episodes table could be partitioned such that they are stored as separate tables (one per year). The partitioning functions as an index on year. The user would not be able to tell the difference between the unpartitioned episodes table and the partitioned one. Queries done by year would be faster. Queries done grouped in another way would be slower."
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#a-null-example",
    "href": "slides/2024-01-09-clauses.html#a-null-example",
    "title": "SQL clauses",
    "section": "A NULL example",
    "text": "A NULL example\nThe logic of NULL:1\n\nIf you do anything with NULL, you’ll just get NULL. For instance if \\(x\\) is NULL, then \\(x &gt; 3\\), \\(1 = x\\), and \\(x + 4\\) all evaluate to NULL. Even \\(x =\\) NULL evaluates to NULL! if you want to check whether \\(x\\) is NULL, use x IS NULL or x IS NOT NULL.\nNULL short-circuits with boolean operators. That means a boolean expression involving NULL will evaluate to:\n\nTRUE, if it’d evaluate to TRUE regardless of whether the NULL value is really TRUE or FALSE.\nFALSE, if it’d evaluate to FALSE regardless of whether the NULL value is really TRUE or FALSE.\nOr NULL, if it depends on the NULL value.\n\n\ntaken from: https://cs186berkeley.net/notes/note1/#filtering-null-values"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#a-null-example-1",
    "href": "slides/2024-01-09-clauses.html#a-null-example-1",
    "title": "SQL clauses",
    "section": "A NULL example",
    "text": "A NULL example\nConsider the following table and SQL query to evaluate WHERE age &lt;= 20 OR num_dogs = 3:\n\nSELECT * FROM (\n   SELECT 'Ace' AS name, 20 AS age, 4 as num_dogs\n   UNION\n   SELECT 'Ada' AS name, NULL AS age, 3 as num_dogs   \n   UNION\n   SELECT 'Ben' AS name, NULL AS age, NULL as num_dogs\n   UNION\n   SELECT 'Cho' AS name, 27 AS age, NULL as num_dogs\n   ) AS temptable;\n\n\n\n\n4 records\n\n\n\n\nname\n\n\nage\n\n\nnum_dogs\n\n\n\n\n\n\nAce\n\n\n20\n\n\n4\n\n\n\n\nAda\n\n\n\n\n3\n\n\n\n\nBen\n\n\n\n\n\n\n\n\nCho\n\n\n27"
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#a-null-example-2",
    "href": "slides/2024-01-09-clauses.html#a-null-example-2",
    "title": "SQL clauses",
    "section": "A NULL example",
    "text": "A NULL example\nWhere does the WHERE clause do? It tells us that we only want to keep the rows satisfying the age &lt;= 20 OR num_dogs = 3. Let’s consider each row one at a time:\n\nFor Ace, age &lt;= 20 evaluates to TRUE so the claim is satisfied.\nFor Ada, age &lt;= 20 evaluates to NULL but num_dogs = 3 evaluates to TRUE so the claim is satisfied.\nFor Ben, age &lt;= 20 evaluates to NULL and num_dogs = 3 evaluates to NULL so the overall expression is NULL which has a FALSE value.\nFor Cho, age &lt;= 20 evaluates to FALSE and num_dogs = 3 evaluates to NULL so the overall expression evaluates to NULL (because it depends on the value of the NULL).\n\nThus we keep only Ace and Ada."
  },
  {
    "objectID": "slides/2024-01-09-clauses.html#a-null-example-3",
    "href": "slides/2024-01-09-clauses.html#a-null-example-3",
    "title": "SQL clauses",
    "section": "A NULL example",
    "text": "A NULL example\n\nSELECT * FROM (\n   SELECT 'Ace' AS name, 20 AS age, 4 as num_dogs\n   UNION\n   SELECT 'Ada' AS name, NULL AS age, 3 as num_dogs   \n   UNION\n   SELECT 'Ben' AS name, NULL AS age, NULL as num_dogs\n   UNION\n   SELECT 'Cho' AS name, 27 AS age, NULL as num_dogs\n   ) AS temptable\nWHERE age &lt;= 20 OR num_dogs = 3;\n\n\n\n\n2 records\n\n\n\n\nname\n\n\nage\n\n\nnum_dogs\n\n\n\n\n\n\nAce\n\n\n20\n\n\n4\n\n\n\n\nAda\n\n\n\n\n3"
  },
  {
    "objectID": "handout/lab5_creating_db_sds261_j24.html",
    "href": "handout/lab5_creating_db_sds261_j24.html",
    "title": "Lab 5 - creating databases",
    "section": "",
    "text": "Today’s lab will provide practice working with creating SQL databases using DuckDB.\nThe goals for lab 5 include:"
  },
  {
    "objectID": "handout/lab5_creating_db_sds261_j24.html#advice-for-turning-in-the-assignment",
    "href": "handout/lab5_creating_db_sds261_j24.html#advice-for-turning-in-the-assignment",
    "title": "Lab 5 - creating databases",
    "section": "Advice for turning in the assignment",
    "text": "Advice for turning in the assignment\n\nBe sure to indicate (in the .qmd file) which problem is being answered with which code. A sentence or two with each response goes a long way toward your understanding!\nsave the .Rproj file somewhere you can find it. Don’t keep everything in your downloads folder. Maybe make a folder called SDS261 or something. That folder could live on your Desktop. Or maybe in your Dropbox.\nThe .qmd document should be saved in the R Project as lab5-sds261-yourlastname-yourfirstname.qmd.\nSet up a connection to a database of your naming using DuckDB.\n\n\ncon_college &lt;- DBI::dbConnect(duckdb::duckdb(),\n                             dbdir = \"you_name_the_db\")"
  },
  {
    "objectID": "handout/lab5_creating_db_sds261_j24.html#assignment",
    "href": "handout/lab5_creating_db_sds261_j24.html#assignment",
    "title": "Lab 5 - creating databases",
    "section": "Assignment",
    "text": "Assignment\nThe data we will work with today is on college tuition, pay, and diversity. The original data source is the US Department of Education, but it has been compiled as part of TidyTuesday on March 10, 2020. Tuition and fees are for 2018-19. Diversity is for 2014.\n\nDownload the data onto your own computer. In the interest of time, let’s only use three tables: tuition_cost and salary_potential and diversity_school.\n\n\nFollow the first two steps in the notes: USE and DROP TABLE.\n\n\nFor each of the three tables, in the CREATE TABLE operation, carefully define variable types and identify any key variables. Unfortunately, FOREIGN KEYs don’t work here because there is not referential integrity across the tables.\n\n\nUse COPY to load the data from your computer. (Hint: if there is an NA value, SQL doesn’t know that it is actually NULL and wants the variable to be loaded as a character string.)\n\n\nUse SELECT * (with a LIMIT!) to make sure all three tables loaded correctly.\n\n\nAdd an INDEX to the tuition table on state. We won’t discuss until Thursday, but state is better than state_code because state allows you to join with other tables. state is better than type or degree_length because state has a much higher cardinality."
  },
  {
    "objectID": "slides/2024-01-16-creating-db.html",
    "href": "slides/2024-01-16-creating-db.html",
    "title": "Creating Databases",
    "section": "",
    "text": "DuckDB\n\nin-process database management system that runs entirely on your own computer.\nthe data live in your storage (instead of your memory).\nyou don’t have to transfer queries or results over the internet."
  },
  {
    "objectID": "slides/2024-01-16-creating-db.html#footnotes",
    "href": "slides/2024-01-16-creating-db.html#footnotes",
    "title": "Creating Databases",
    "section": "Footnotes",
    "text": "Footnotes\n\n\ntaken from MDSR.↩︎"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html",
    "href": "slides/2024-01-17-editing-db.html",
    "title": "Editing Databases",
    "section": "",
    "text": "We will continue to use DuckDB so that we have write access to the files we want to edit.\n\ncon_duckdb &lt;- DBI::dbConnect(duckdb::duckdb(),\n                             dbdir = \"duck_datab\")\n\n\n\n\n\n\n\n\n\n\n\nFigure 1: image credit: NBC\n\n\n\n\n\nConsider the Saturday Night Live datasets available on the snldb GitHub repo.\n\n\n\nThe UPDATE function allows you to change a value in a table across all rows that match a certain criteria.\n\nSELECT * FROM impressions \n   WHERE name LIKE 'Ivanka%';\n\n\n5 records\n\n\nimpid\naid\nname\n\n\n\n\n2598\nScarlett Johansson\nIvanka Trump\n\n\n3716\nEmily Blunt\nIvanka Trump\n\n\n3694\nMargot Robbie\nIvanka Trump\n\n\n3679\nVanessa Bayer\nIvanka Trump\n\n\n2340\nMaya Rudolph\nIvanka Trump\n\n\n\n\n\n\n\n\nFor funsies, let’s change Ivanka Trump to Ivanka Kushner.\n\nUPDATE impressions\n   SET name = 'Ivanka Kushner'\n   WHERE name LIKE 'Ivanka%';\n\n\nSELECT * FROM impressions \n   WHERE name LIKE 'Ivanka%';\n\n\n5 records\n\n\nimpid\naid\nname\n\n\n\n\n2598\nScarlett Johansson\nIvanka Kushner\n\n\n3716\nEmily Blunt\nIvanka Kushner\n\n\n3694\nMargot Robbie\nIvanka Kushner\n\n\n3679\nVanessa Bayer\nIvanka Kushner\n\n\n2340\nMaya Rudolph\nIvanka Kushner\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n Watch out!\n\n\n\nBe careful with UPDATE. A careless UPDATE could write over all of the data in your table. There is no undo function.\n\n\n\n\n\nTask: include recent hosts in the hosts table.\nBy searching the SNL archives, we can see that the next host, chronologically was Elon Musk on May 8, 2021.\n\n\n\n\n\n\n\n\nFigure 2: Hosts information from snlarchives.net\n\n\n\n\n\n\n\n\nTask: include recent hosts in the hosts table.\nBy searching the SNL archives, we can see that the next host, chronologically was Elon Musk on May 8, 2021.\n\nSELECT * FROM hosts\n    ORDER BY epid DESC\n    LIMIT 10;\n\n\nDisplaying records 1 - 10\n\n\nepid\naid\n\n\n\n\n20210410\nCarey Mulligan\n\n\n20210403\nDaniel Kaluuya\n\n\n20210327\nMaya Rudolph\n\n\n20210227\nNick Jonas\n\n\n20210220\nRege-Jean Page\n\n\n20210213\nRegina King\n\n\n20210206\nDan Levy\n\n\n20210130\nJohn Krasinski\n\n\n20201219\nKristen Wiig\n\n\n20201212\nTimothee Chalamet\n\n\n\n\n\n\n\n\nINSERT allows us to add the relevant information associated with the episode of SNL that Elon Musk hosted.\n\nINSERT INTO hosts (epid, aid)\n   VALUES ('20210508', 'Elon Musk');\n\n\nSELECT * FROM hosts\n    ORDER BY epid DESC\n    LIMIT 10;\n\n\nDisplaying records 1 - 10\n\n\nepid\naid\n\n\n\n\n20210508\nElon Musk\n\n\n20210410\nCarey Mulligan\n\n\n20210403\nDaniel Kaluuya\n\n\n20210327\nMaya Rudolph\n\n\n20210227\nNick Jonas\n\n\n20210220\nRege-Jean Page\n\n\n20210213\nRegina King\n\n\n20210206\nDan Levy\n\n\n20210130\nJohn Krasinski\n\n\n20201219\nKristen Wiig\n\n\n\n\n\n\n\n\nIt would be tedious to INSERT all of the most recent host information by hand. Instead, we’ll scrape the SNL archives using the R package rvest, which allows us to pull out the appropriate html elements. The epid and aid are joined together in a tibble, and filtered to only include episodes which are not already in the episodes table.\n\nlibrary(rvest)\n\nrecent_hosts &lt;- read_html(\"http://www.snlarchives.net/Episodes/\") |&gt;\n  html_nodes(\"tr\") |&gt;\n  purrr::map_df( ~ tibble(\n    epid = .x |&gt; html_node(\"a.ms-2.me-2\") |&gt;\n      html_attr(\"href\") |&gt;\n      str_extract(\"\\\\d+\"),\n    aid = .x |&gt; html_node(\"td:nth-child(2)\") |&gt;\n      html_text2() |&gt;\n      str_extract(\"[\\\\w\\\\. \\\\w\\\\.]+(?=/|$)\")\n  )) |&gt;\n  filter(epid &gt; 20210508)\n\n\nwrite_csv(recent_hosts, \"data/recent_hosts.csv\")\n\n\n\n\n\nINSERT INTO hosts\n   SELECT *\n   FROM READ_CSV('data/recent_hosts.csv', AUTO_DETECT = TRUE);\n\n\nSELECT * FROM hosts\n  ORDER BY epid DESC\n  LIMIT 10;\n\n\nDisplaying records 1 - 10\n\n\nepid\naid\n\n\n\n\n20240518\nJake Gyllenhaal\n\n\n20240511\nMaya Rudolph\n\n\n20240504\nDua Lipa\n\n\n20240413\nRyan Gosling\n\n\n20240406\nKristen Wiig\n\n\n20240330\nRamy Youssef\n\n\n20240309\nJosh Brolin\n\n\n20240302\nSydney Sweeney\n\n\n20240224\nShane Gillis\n\n\n20240203\nAyo Edebiri\n\n\n\n\n\n\n\n\nYou might change your mind and decide that you really only want hosts from years up to 2022. The DELETE function deletes any rows specified by the WHERE clause.\n\nDELETE FROM hosts\n   WHERE epid &gt; 20221231;\n\n\nSELECT * FROM hosts\n  ORDER BY epid DESC\n  LIMIT 10;\n\n\nDisplaying records 1 - 10\n\n\nepid\naid\n\n\n\n\n20221217\nAustin Butler\n\n\n20221210\nMartin Short\n\n\n20221203\nKeke Palmer\n\n\n20221112\nDave Chappelle\n\n\n20221105\nAmy Schumer\n\n\n20221029\nJack Harlow\n\n\n20221015\nMegan Thee Stallion\n\n\n20221008\nBrendan Gleeson\n\n\n20221001\nMiles Teller\n\n\n20220521\nNatasha Lyonne\n\n\n\n\n\n\n\n\nALTER TABLE changes the structure of a table. For example, you can add or delete columns, create or destroy indexes, change the type of existing columns, or rename columns or the table itself.\nMultiple ADD, ALTER, DROP, and CHANGE clauses are permitted in a single ALTER TABLE statement, separated by commas.\nCaveat: I have found DuckDB to be slightly finicky in some of the operations…\n\n\n\n\nALTER TABLE t1\nDROP COLUMN col1,\nDROP COLUMN col2;\n\n\n\n\n\nrename an INT NOT NULL column from a to b and change its definition to use the BIGINT data type while retaining the NOT NULL attribute.\n\n\nALTER TABLE t1 CHANGE a b BIGINT NOT NULL;\n\n\n\n\n\nCHANGE, the syntax requires two column names, so you must specify the same name twice to leave the name unchanged. For example, to change the definition of column b.\n\n\nALTER TABLE t1 CHANGE b b INT NOT NULL;\n\n\n\n\n\nMODIFY is more convenient to change the definition without changing the name because it requires the column name only once.\n\n\nALTER TABLE t1 MODIFY b INT NOT NULL;\n\n\n\n\n\nCHANGE, the syntax requires a column definition, so to leave the definition unchanged, you must respecify the definition the column currently has. For example, to rename an INT NOT NULL column from b to a.\n\n\nALTER TABLE t1 CHANGE b a INT NOT NULL;\n\n\n\n\n\nRENAME COLUMN is more convenient to change the name without changing the definition because it requires only the old and new names.\n\n\nALTER TABLE t1 RENAME COLUMN b TO a;\n\n\n\n\n\ncannot RENAME COLUMN to a column name that already exists. The following are valid.\n\n\n/* swap a and b */\nALTER TABLE t1 RENAME COLUMN a TO b,\n               RENAME COLUMN b TO a;\n\n/* \"rotate\" a, b, c through a cycle */\nALTER TABLE t1 RENAME COLUMN a TO b,\n               RENAME COLUMN b TO c,\n               RENAME COLUMN c TO a;\n\n\n\n\nTemporary tables are used to break down complex queries into smaller, more manageable steps. For example, let’s say we want to JOIN two tables after each has been filtered using different WHERE clauses. The filtered tables can each be saved into their own temporary tables and then the temporary tables can be merged.\nTables in DuckDB are saved (to disk), even when the connection is closed. However, temporary tables are saved in memory (instead of on disk) and are deleted when the connection is closed.\n\n\n\n\nSELECT * FROM episodes LIMIT 10;\n\n\nDisplaying records 1 - 10\n\n\nsid\nepid\naired\nepno\n\n\n\n\n46\n20210410\nApril 10, 2021\n17\n\n\n46\n20210403\nApril 3, 2021\n16\n\n\n46\n20210327\nMarch 27, 2021\n15\n\n\n46\n20210227\nFebruary 27, 2021\n14\n\n\n46\n20210220\nFebruary 20, 2021\n13\n\n\n46\n20210213\nFebruary 13, 2021\n12\n\n\n46\n20210206\nFebruary 6, 2021\n11\n\n\n46\n20210130\nJanuary 30, 2021\n10\n\n\n46\n20201219\nDecember 19, 2020\n9\n\n\n46\n20201212\nDecember 12, 2020\n8\n\n\n\n\n\n\n\n\nWe wouldn’t want to wrangle the date every single time we used the data.\n\nCREATE TEMP TABLE episodes_date AS\n    SELECT *, CASE\n             WHEN POSITION(',' IN aired) &gt; 0 THEN\n    EXTRACT(YEAR FROM CAST(\n                SUBSTRING(aired, POSITION(',' IN aired) + 2) || '-' ||\n                CASE\n                    WHEN POSITION('January' IN aired) &gt; 0 THEN '01'\n                    WHEN POSITION('February' IN aired) &gt; 0 THEN '02'\n                    WHEN POSITION('March' IN aired) &gt; 0 THEN '03'\n                    WHEN POSITION('April' IN aired) &gt; 0 THEN '04'\n                    WHEN POSITION('May' IN aired) &gt; 0 THEN '05'\n                    WHEN POSITION('June' IN aired) &gt; 0 THEN '06'\n                    WHEN POSITION('July' IN aired) &gt; 0 THEN '07'\n                    WHEN POSITION('August' IN aired) &gt; 0 THEN '08'\n                    WHEN POSITION('September' IN aired) &gt; 0 THEN '09'\n                    WHEN POSITION('October' IN aired) &gt; 0 THEN '10'\n                    WHEN POSITION('November' IN aired) &gt; 0 THEN '11'\n                    WHEN POSITION('December' IN aired) &gt; 0 THEN '12'\n                    ELSE '01' -- Default to January if no month is found\n                END || '-' ||\n                SUBSTRING(aired, POSITION(' ' IN aired) + 1, 2) AS DATE\n            ))\n            END AS year FROM episodes;\n\n\n\n\nIn case you are curious about the date wrangling code… consider SUBSTRING(aired, POSITION(',' IN aired) + 2)\n\nPOSITION(',' IN aired): This part of the expression uses the POSITION function to find the position of the first occurrence of the comma (,) in the string aired. The result is the index (position) of the comma within the string.\nPOSITION(',' IN aired) + 2: This adds 2 to the index of the comma. The + 2 is used to move the starting point of the substring two positions to the right of the comma. This is done to exclude the comma itself and any following spaces.\nSUBSTRING(aired, POSITION(',' IN aired) + 2): This part uses the SUBSTRING function to extract a substring from the string aired. The starting position of the substring is determined by POSITION(',' IN aired) + 2, and it goes until the end of the string. This effectively removes the part of the string that comes before and including the first comma.\n\nIn summary, the entire expression is extracting a substring from the original string aired, starting from two positions to the right of the first comma and continuing until the end of the string. This can be useful in scenarios where you want to remove or isolate part of a string based on the position of a specific character (in this case, the comma).\n\n\n\n\nSELECT * FROM episodes_date LIMIT 10;\n\n\nDisplaying records 1 - 10\n\n\nsid\nepid\naired\nepno\nyear\n\n\n\n\n46\n20210410\nApril 10, 2021\n17\n2021\n\n\n46\n20210403\nApril 3, 2021\n16\n2021\n\n\n46\n20210327\nMarch 27, 2021\n15\n2021\n\n\n46\n20210227\nFebruary 27, 2021\n14\n2021\n\n\n46\n20210220\nFebruary 20, 2021\n13\n2021\n\n\n46\n20210213\nFebruary 13, 2021\n12\n2021\n\n\n46\n20210206\nFebruary 6, 2021\n11\n2021\n\n\n46\n20210130\nJanuary 30, 2021\n10\n2021\n\n\n46\n20201219\nDecember 19, 2020\n9\n2020\n\n\n46\n20201212\nDecember 12, 2020\n8\n2020\n\n\n\n\n\n\n\n\nNow that the year variable has been created in the new temporary table called episodes_date, we can use episode_date to query and find, for example, all of the hosts in 2019.\n\nSELECT hosts.aid, ep.aired, ep.year FROM hosts \nJOIN episodes_date AS ep ON hosts.epid = ep.epid\nWHERE year = 2019\nLIMIT 25;\n\n\nDisplaying records 1 - 10\n\n\naid\naired\nyear\n\n\n\n\nEddie Murphy\nDecember 21, 2019\n2019\n\n\nScarlett Johansson\nDecember 14, 2019\n2019\n\n\nJennifer Lopez\nDecember 7, 2019\n2019\n\n\nWill Ferrell\nNovember 23, 2019\n2019\n\n\nHarry Styles\nNovember 16, 2019\n2019\n\n\nKristen Stewart\nNovember 2, 2019\n2019\n\n\nChance the Rapper\nOctober 26, 2019\n2019\n\n\nDavid Harbour\nOctober 12, 2019\n2019\n\n\nPhoebe Waller-Bridge\nOctober 5, 2019\n2019\n\n\nWoody Harrelson\nSeptember 28, 2019\n2019\n\n\n\n\n\n\n\n\nIt is always a good idea to terminate the SQL connection when you are done with it.\n\ndbDisconnect(con_duckdb, shutdown = TRUE)\n\n\n:::"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#duckdb",
    "href": "slides/2024-01-17-editing-db.html#duckdb",
    "title": "Editing Databases",
    "section": "",
    "text": "DuckDB\n\nin-process database management system that runs entirely on your own computer.\nthe data live in your storage (instead of your memory).\nyou don’t have to transfer queries or results over the internet."
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#duckdb-caveat",
    "href": "slides/2024-01-17-editing-db.html#duckdb-caveat",
    "title": "Editing Databases",
    "section": "DuckDB caveat",
    "text": "DuckDB caveat\n\nthe SQL dialect used in DuckDB is slightly different from MySQL\nwrite SELECT * FROM table 10; instead of SELECT * FROM table 0, 10;\nlots of different dialects, depending on the SQL server. Always be aware of the dialect you are using."
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#duckdb-via-r",
    "href": "slides/2024-01-17-editing-db.html#duckdb-via-r",
    "title": "Editing Databases",
    "section": "DuckDB via R",
    "text": "DuckDB via R\n\ninstall.packages(\"duckdb\")  # only once, in the Console, not in the .qmd or .Rmd file\nlibrary(duckdb)             # at the top of the .qmd or .Rmd file\n\nlibrary(DBI)                # we also still need the DBI package\n\n\ncon_duckdb &lt;- DBI::dbConnect(duckdb::duckdb(),\n                             dbdir = \"duck_datab\")\n\n\nthe database has been stored to a database directory called duck_datab which lives in the current R project.\ncan’t open it like a standard folder, but it is where DuckDB stores the database files."
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#preparing-to-load-data",
    "href": "slides/2024-01-17-editing-db.html#preparing-to-load-data",
    "title": "Editing Databases",
    "section": "Preparing to load data",
    "text": "Preparing to load data\nThe duckdb database is currently empty, so we need to load in some data. The duckdb_read_csv() function in the duckdb R package allows us to load the .csv file (available on GitHub) directly into the database without being loaded as an R object first.\nRecall that in ?@tbl-select-describe we used DESCRIBE to display the variable types of the database table(s). The list includes the variable name (Field), its Type, whether there are NULL values allowed, and whether there are keys or indices defined on the variable. See Table 2 for the DESCRIBE output on the table we are about to import.\nUnlike R, when creating a new data table, SQL requires that you communicate each future variable (column) and that variable’s type. Variable types are not automatically generated!"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#saturday-night-live",
    "href": "slides/2024-01-17-editing-db.html#saturday-night-live",
    "title": "Editing Databases",
    "section": "",
    "text": "Figure 1: image credit: NBC\n\n\n\n\n\nConsider the Saturday Night Live datasets available on the snldb GitHub repo."
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#casts-table",
    "href": "slides/2024-01-17-editing-db.html#casts-table",
    "title": "Editing Databases",
    "section": "casts table",
    "text": "casts table\nUse R to understand the data from casts.csv.\n\ncasts &lt;- readr::read_csv(\"https://raw.githubusercontent.com/hhllcks/snldb/master/output/casts.csv\")\nglimpse(casts)\n\nRows: 614\nColumns: 8\n$ aid             &lt;chr&gt; \"A. Whitney Brown\", \"A. Whitney Brown\", \"A. Whitney Br…\n$ sid             &lt;dbl&gt; 11, 12, 13, 14, 15, 16, 5, 39, 40, 41, 42, 45, 46, 21,…\n$ featured        &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, …\n$ first_epid      &lt;dbl&gt; 19860222, NA, NA, NA, NA, NA, 19800409, 20140118, NA, …\n$ last_epid       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n$ update_anchor   &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE…\n$ n_episodes      &lt;dbl&gt; 8, 20, 13, 20, 20, 20, 5, 11, 21, 21, 21, 18, 17, 20, …\n$ season_fraction &lt;dbl&gt; 0.444, 1.000, 1.000, 1.000, 1.000, 1.000, 0.250, 0.524…"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#loading-data",
    "href": "slides/2024-01-17-editing-db.html#loading-data",
    "title": "Editing Databases",
    "section": "Loading data",
    "text": "Loading data\nImporting .csv files as tables, a series of steps:1\n\na USE statement that ensures we are in the right schema/database.\na series of DROP TABLE statements that drop any old tables with the same names as the ones we are going to create.\na series of CREATE TABLE statements that specify the table structures.\na series of COPY statements that read the data from the .csv files into the appropriate tables."
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#loading-step-1-use",
    "href": "slides/2024-01-17-editing-db.html#loading-step-1-use",
    "title": "Editing Databases",
    "section": "Loading step 1, USE",
    "text": "Loading step 1, USE\nUse the (local) database that we’ve called duck_datab.\n\n```{sql}\n#| connection: con_duckdb\n\nUSE duck_datab;\n```"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#loading-step-2-refresh",
    "href": "slides/2024-01-17-editing-db.html#loading-step-2-refresh",
    "title": "Editing Databases",
    "section": "Loading step 2, refresh",
    "text": "Loading step 2, refresh\nMake sure to “refresh” the table, in case it already exists. However, be very careful with the DROP TABLE statement, as it removes the casts table.\n\nDROP TABLE IF EXISTS casts;"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#loading-step-3-create-table",
    "href": "slides/2024-01-17-editing-db.html#loading-step-3-create-table",
    "title": "Editing Databases",
    "section": "Loading step 3, CREATE TABLE",
    "text": "Loading step 3, CREATE TABLE\nCarefully define the variable types, whether or not they allow missing values, and what a default value is for that variable. Additionally, identify the key for accessing information.\n\nCREATE TABLE casts (\n  aid VARCHAR(255) NOT NULL DEFAULT '',\n  sid INTEGER NOT NULL DEFAULT 0,\n  featured BOOLEAN NOT NULL DEFAULT 'false',\n  first_epid INTEGER DEFAULT 0,\n  last_epid INTEGER DEFAULT 0,\n  update_anchor BOOLEAN NOT NULL DEFAULT 0,\n  n_episodes INTEGER NOT NULL DEFAULT 0,\n  season_fraction DECIMAL(21,20) NOT NULL DEFAULT 0,\n  PRIMARY KEY (sid, aid)\n);"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#loading-step-4-copy",
    "href": "slides/2024-01-17-editing-db.html#loading-step-4-copy",
    "title": "Editing Databases",
    "section": "Loading step 4, COPY",
    "text": "Loading step 4, COPY\nThe .csv file lives on my computer, so I load it in directly. [n.b., the statement to load in data is different in MySQL.]\n\nCOPY casts FROM 'data/casts.csv' HEADER;"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#checking-the-loading-select",
    "href": "slides/2024-01-17-editing-db.html#checking-the-loading-select",
    "title": "Editing Databases",
    "section": "Checking the loading, SELECT",
    "text": "Checking the loading, SELECT\n\nSELECT * FROM casts LIMIT 8;\n\n\n\n\n\nTable 1: After CREATE TABLE where variable types are set, the COPY command pulls the data into the table. SELECT shows us that the table is as expected.\n\n\naid\nsid\nfeatured\nfirst_epid\nlast_epid\nupdate_anchor\nn_episodes\nseason_fraction\n\n\n\n\nA. Whitney Brown\n11\nTRUE\n19860222\n\nFALSE\n8\n0.444\n\n\nA. Whitney Brown\n12\nTRUE\n\n\nFALSE\n20\n1.000\n\n\nA. Whitney Brown\n13\nTRUE\n\n\nFALSE\n13\n1.000\n\n\nA. Whitney Brown\n14\nTRUE\n\n\nFALSE\n20\n1.000\n\n\nA. Whitney Brown\n15\nTRUE\n\n\nFALSE\n20\n1.000\n\n\nA. Whitney Brown\n16\nTRUE\n\n\nFALSE\n20\n1.000\n\n\nAlan Zweibel\n5\nTRUE\n19800409\n\nFALSE\n5\n0.250\n\n\nSasheer Zamata\n39\nTRUE\n20140118\n\nFALSE\n11\n0.524"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#check-the-database",
    "href": "slides/2024-01-17-editing-db.html#check-the-database",
    "title": "Editing Databases",
    "section": "Check the database",
    "text": "Check the database\nLet’s make sure that the database exists and that the table in the database exists.\n\nSHOW DATABASES;\n\n\n\n\n1 records\n\n\n\n\ndatabase_name\n\n\n\n\n\n\nduck_datab"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#check-the-database-1",
    "href": "slides/2024-01-17-editing-db.html#check-the-database-1",
    "title": "Editing Databases",
    "section": "Check the database",
    "text": "Check the database\nLet’s make sure that the database exists and that the table in the database exists.\n\nSHOW TABLES;\n\n\n\n\n1 records\n\n\n\n\nname\n\n\n\n\n\n\ncasts"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#check-the-database-2",
    "href": "slides/2024-01-17-editing-db.html#check-the-database-2",
    "title": "Editing Databases",
    "section": "Check the database",
    "text": "Check the database\nLet’s make sure that the database exists and that the table in the database exists.\n\nDESCRIBE casts;\n\n\n\n\n\nTable 2: DESCRIBE variables in the casts table.\n\n\ncolumn_name\ncolumn_type\nnull\nkey\ndefault\nextra\n\n\n\n\naid\nVARCHAR\nNO\nPRI\n''\n\n\n\nsid\nINTEGER\nNO\nPRI\n0\n\n\n\nfeatured\nBOOLEAN\nNO\n\n'false'\n\n\n\nfirst_epid\nINTEGER\nYES\n\n0\n\n\n\nlast_epid\nINTEGER\nYES\n\n0\n\n\n\nupdate_anchor\nBOOLEAN\nNO\n\n0\n\n\n\nn_episodes\nINTEGER\nNO\n\n0\n\n\n\nseason_fraction\nDECIMAL(21,20)\nNO\n\n0"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#efficiencies",
    "href": "slides/2024-01-17-editing-db.html#efficiencies",
    "title": "Editing Databases",
    "section": "Efficiencies",
    "text": "Efficiencies\nIt is worth pointing out a few aspects to loading data into SQL: keys, indices, and partitioning."
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#key",
    "href": "slides/2024-01-17-editing-db.html#key",
    "title": "Editing Databases",
    "section": "Key",
    "text": "Key\nKeys are unique identifiers for each row, used primarily for connecting tables. Keys are generally not helpful for efficiency, but they are important for data integrity and relationships between tables.\n\nPRIMARY KEY is a column or set of columns that uniquely identify each row. Primary keys cannot be NULL.\nFOREIGN KEY is a column or set of columns that reference a primary key in a different table. A foreign key can be NULL."
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#index",
    "href": "slides/2024-01-17-editing-db.html#index",
    "title": "Editing Databases",
    "section": "Index",
    "text": "Index\nIndices are the crux of why SQL is so much more efficient than, say, R. An index is a lookup table that helps SQL keep track of which records contain certain values. By indexing the rows, SQL is able to optimize sorting and joining tables. The index is created in advance (when the table is created) and saved to disk, which can take up substantial space on the disk. Sometimes more than one variable is used to index the table. There are trade-offs to having a lot of indices (disk space but fast wrangling) versus a few indices (slow wrangling but less space)."
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#find-keys-and-indices",
    "href": "slides/2024-01-17-editing-db.html#find-keys-and-indices",
    "title": "Editing Databases",
    "section": "Find keys and indices",
    "text": "Find keys and indices\nIn MySQL the commands SHOW KEYS and SHOW INDEXES provide information about the keys and indices for each table."
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#partitioning",
    "href": "slides/2024-01-17-editing-db.html#partitioning",
    "title": "Editing Databases",
    "section": "Partitioning",
    "text": "Partitioning\nAnother way to speed up query retrievals is to partition the data tables. If, for example, the SNL queries were always done by year, then the episodes table could be partitioned such that they are stored as separate tables (one per year). The partitioning functions as an index on year. The user would not be able to tell the difference between the unpartitioned episodes table and the partitioned one. Queries done by year would be faster. Queries done grouped in another way would be slower."
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#best-practice",
    "href": "slides/2024-01-17-editing-db.html#best-practice",
    "title": "Editing Databases",
    "section": "",
    "text": "It is always a good idea to terminate the SQL connection when you are done with it.\n\ndbDisconnect(con_duckdb, shutdown = TRUE)\n\n\n:::"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#footnotes",
    "href": "slides/2024-01-17-editing-db.html#footnotes",
    "title": "Editing Databases",
    "section": "Footnotes",
    "text": "Footnotes\n\n\ntaken from MDSR.↩︎"
  },
  {
    "objectID": "handout/lab5_creating_db_sds261_j24_sol.html",
    "href": "handout/lab5_creating_db_sds261_j24_sol.html",
    "title": "Lab 5 - creating databases",
    "section": "",
    "text": "Solution\n\n\n\n\n\n\nlibrary(tidyverse)\nlibrary(DBI)\nlibrary(RMariaDB)\nlibrary(dbplyr)\nlibrary(mdsr)\nToday’s lab will provide practice working with creating SQL databases using DuckDB.\nThe goals for lab 5 include:"
  },
  {
    "objectID": "handout/lab5_creating_db_sds261_j24_sol.html#advice-for-turning-in-the-assignment",
    "href": "handout/lab5_creating_db_sds261_j24_sol.html#advice-for-turning-in-the-assignment",
    "title": "Lab 5 - creating databases",
    "section": "Advice for turning in the assignment",
    "text": "Advice for turning in the assignment\n\nBe sure to indicate (in the .qmd file) which problem is being answered with which code. A sentence or two with each response goes a long way toward your understanding!\nsave the .Rproj file somewhere you can find it. Don’t keep everything in your downloads folder. Maybe make a folder called SDS261 or something. That folder could live on your Desktop. Or maybe in your Dropbox.\nThe .qmd document should be saved in the R Project as lab5-sds261-yourlastname-yourfirstname.qmd.\nSet up a connection to a database of your naming using DuckDB.\n\n\ncon_college &lt;- DBI::dbConnect(duckdb::duckdb(),\n                             dbdir = \"you_name_the_db\")"
  },
  {
    "objectID": "handout/lab5_creating_db_sds261_j24_sol.html#assignment",
    "href": "handout/lab5_creating_db_sds261_j24_sol.html#assignment",
    "title": "Lab 5 - creating databases",
    "section": "Assignment",
    "text": "Assignment\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\ncon_college &lt;- DBI::dbConnect(duckdb::duckdb(),\n                             dbdir = \"collegeDB\")\n\n\n\n\nThe data we will work with today is on college tuition, pay, and diversity. The original data source is the US Department of Education, but it has been compiled as part of TidyTuesday on March 10, 2020. Tuition and fees are for 2018-19. Diversity is for 2014.\n\nDownload the data onto your own computer. In the interest of time, let’s only use three tables: tuition_cost and salary_potential and diversity_school.\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\ntuition_cost &lt;- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-03-10/tuition_cost.csv')\n\nsalary_potential &lt;- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-03-10/salary_potential.csv')\n\ndiversity_school &lt;- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-03-10/diversity_school.csv')\n\n\n\n\n\nFollow the first two steps in the notes: USE and DROP TABLE.\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nUSE collegeDB;\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nDROP TABLE IF EXISTS salary;\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nDROP TABLE IF EXISTS diversity;\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nDROP TABLE IF EXISTS tuition;\n\n\n\n\n\nFor each of the three tables, in the CREATE TABLE operation, carefully define variable types and identify any key variables. Unfortunately, FOREIGN KEYs don’t work here because there is not referential integrity across the tables.\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nCREATE TABLE tuition (\n  name VARCHAR(255) NOT NULL DEFAULT '',\n  state VARCHAR(255),\n  state_code VARCHAR(255),\n  type VARCHAR(255),\n  degree_length VARCHAR(255),\n  room_and_board VARCHAR(255),\n  in_state_tuition DOUBLE,\n  in_state_total DOUBLE,\n  out_of_state_tuition DOUBLE,\n  out_of_state_total DOUBLE,\n  PRIMARY KEY (name, state)\n);\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nCREATE TABLE salary (\n  rank DOUBLE,\n  name VARCHAR(255),\n  state_name VARCHAR(255),\n  early_career_pay DOUBLE,\n  mid_career_pay DOUBLE,\n  make_world_better_percent VARCHAR(255),\n  stem_percent DOUBLE\n);\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nCREATE TABLE diversity (\n  name VARCHAR(255),\n  total_enrollment DOUBLE,\n  state VARCHAR(255),\n  category VARCHAR(255),\n  enrollment DOUBLE\n);\n\n\n\n\n\nUse COPY to load the data from your computer. (Hint: if there is an NA value, SQL doesn’t know that it is actually NULL and wants the variable to be loaded as a character string.)\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nCOPY tuition FROM 'data/tuition_cost.csv' HEADER;\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nCOPY salary FROM 'data/salary_potential.csv' HEADER;\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nCOPY diversity FROM 'data/diversity_school.csv' HEADER;\n\n\n\n\n\nUse SELECT * (with a LIMIT!) to make sure all three tables loaded correctly.\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT * FROM tuition LIMIT 10;\n\n\nDisplaying records 1 - 10\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nname\nstate\nstate_code\ntype\ndegree_length\nroom_and_board\nin_state_tuition\nin_state_total\nout_of_state_tuition\nout_of_state_total\n\n\n\n\nAaniiih Nakoda College\nMontana\nMT\nPublic\n2 Year\nNA\n2380\n2380\n2380\n2380\n\n\nAbilene Christian University\nTexas\nTX\nPrivate\n4 Year\n10350\n34850\n45200\n34850\n45200\n\n\nAbraham Baldwin Agricultural College\nGeorgia\nGA\nPublic\n2 Year\n8474\n4128\n12602\n12550\n21024\n\n\nAcademy College\nMinnesota\nMN\nFor Profit\n2 Year\nNA\n17661\n17661\n17661\n17661\n\n\nAcademy of Art University\nCalifornia\nCA\nFor Profit\n4 Year\n16648\n27810\n44458\n27810\n44458\n\n\nAdams State University\nColorado\nCO\nPublic\n4 Year\n8782\n9440\n18222\n20456\n29238\n\n\nAdelphi University\nNew York\nNY\nPrivate\n4 Year\n16030\n38660\n54690\n38660\n54690\n\n\nAdirondack Community College\nNew York\nNY\nPublic\n2 Year\n11660\n5375\n17035\n9935\n21595\n\n\nAdrian College\nMichigan\nMI\nPrivate\n4 Year\n11318\n37087\n48405\n37087\n48405\n\n\nAdvanced Technology Institute\nVirginia\nVA\nFor Profit\n2 Year\nNA\n13680\n13680\n13680\n13680\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT * FROM salary LIMIT 10;\n\n\nDisplaying records 1 - 10\n\n\n\n\n\n\n\n\n\n\n\nrank\nname\nstate_name\nearly_career_pay\nmid_career_pay\nmake_world_better_percent\nstem_percent\n\n\n\n\n1\nAuburn University\nAlabama\n54400\n104500\n51\n31\n\n\n2\nUniversity of Alabama in Huntsville\nAlabama\n57500\n103900\n59\n45\n\n\n3\nThe University of Alabama\nAlabama\n52300\n97400\n50\n15\n\n\n4\nTuskegee University\nAlabama\n54500\n93500\n61\n30\n\n\n5\nSamford University\nAlabama\n48400\n90500\n52\n3\n\n\n6\nSpring Hill College\nAlabama\n46600\n89100\n53\n12\n\n\n7\nBirmingham Southern College\nAlabama\n49100\n88300\n48\n27\n\n\n8\nUniversity of Alabama at Birmingham\nAlabama\n48600\n87200\n57\n17\n\n\n9\nUniversity of South Alabama\nAlabama\n47700\n86400\n56\n17\n\n\n10\nAlabama A&M University\nAlabama\n48700\n83500\n58\n20\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT * FROM diversity LIMIT 10;\n\n\nDisplaying records 1 - 10\n\n\n\n\n\n\n\n\n\nname\ntotal_enrollment\nstate\ncategory\nenrollment\n\n\n\n\nUniversity of Phoenix-Arizona\n195059\nArizona\nWomen\n134722\n\n\nUniversity of Phoenix-Arizona\n195059\nArizona\nAmerican Indian / Alaska Native\n876\n\n\nUniversity of Phoenix-Arizona\n195059\nArizona\nAsian\n1959\n\n\nUniversity of Phoenix-Arizona\n195059\nArizona\nBlack\n31455\n\n\nUniversity of Phoenix-Arizona\n195059\nArizona\nHispanic\n13984\n\n\nUniversity of Phoenix-Arizona\n195059\nArizona\nNative Hawaiian / Pacific Islander\n1019\n\n\nUniversity of Phoenix-Arizona\n195059\nArizona\nWhite\n58209\n\n\nUniversity of Phoenix-Arizona\n195059\nArizona\nTwo Or More Races\n19039\n\n\nUniversity of Phoenix-Arizona\n195059\nArizona\nUnknown\n65163\n\n\nUniversity of Phoenix-Arizona\n195059\nArizona\nNon-Resident Foreign\n3355\n\n\n\n\n\n\n\n\n\nAdd an INDEX to the tuition table on state. We won’t discuss until Thursday, but state is better than state_code because state allows you to join with other tables. state is better than type or degree_length because state has a much higher cardinality.\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nCREATE INDEX state_idx ON tuition (state);"
  },
  {
    "objectID": "handout/lab6_editing_db_sds261_j24.html",
    "href": "handout/lab6_editing_db_sds261_j24.html",
    "title": "Lab 6 - editing databases",
    "section": "",
    "text": "Today’s lab will provide practice working with editing SQL databases using DuckDB.\nThe goals for lab 6 include:"
  },
  {
    "objectID": "handout/lab6_editing_db_sds261_j24.html#advice-for-turning-in-the-assignment",
    "href": "handout/lab6_editing_db_sds261_j24.html#advice-for-turning-in-the-assignment",
    "title": "Lab 6 - editing databases",
    "section": "Advice for turning in the assignment",
    "text": "Advice for turning in the assignment\n\nBe sure to indicate (in the .qmd file) which problem is being answered with which code. A sentence or two with each response goes a long way toward your understanding!\nsave the .Rproj file somewhere you can find it. Don’t keep everything in your downloads folder. Maybe make a folder called SDS261 or something. That folder could live on your Desktop. Or maybe in your Dropbox.\nThe .qmd document should be saved in the R Project as lab6-sds261-yourlastname-yourfirstname.qmd.\nSet up a connection to a database of your naming using DuckDB.\n\n\ncon_college &lt;- DBI::dbConnect(duckdb::duckdb(),\n                             dbdir = \"samenameaslab5\")"
  },
  {
    "objectID": "handout/lab6_editing_db_sds261_j24.html#assignment",
    "href": "handout/lab6_editing_db_sds261_j24.html#assignment",
    "title": "Lab 6 - editing databases",
    "section": "Assignment",
    "text": "Assignment\nThe data we will work with today is on college tuition, pay, and diversity. The original data source is the US Department of Education, but it has been compiled as part of TidyTuesday on March 10, 2020. Tuition and fees are for 2018-19. Diversity is for 2014.\n\nUse the same database from Lab 5. If the database somehow got deleted or corrupted, go back and re-run your code from Lab 5.\n\n\nUse UPDATE to change the NA values to NULL (for room_and_board in the tuition table and make_world_better_percent in the salary table). (Originally I had a follow up task to convert the data type from VARCHAR to DOUBLE as well. However, DuckDB is particularly finicky with those conversions, and so we aren’t going to do it. If/when you work on a SQL server, you might adjust the data type using something like: ALTER TABLE tuition MODIFY room_and_board DOUBLE;.)1\n\n\nUsing INSERT INTO add records to the diversity table. Add ‘Barden University’ in ‘Louisiana’ that has a total enrollment of 10,000 students, half of whom are female. Add an additional value to indicate, if the Bellas are representative of the student population, that Barden University has 1667 Black students.\n\n\n\nCheck to see that the values inserted into the diversity table are correct. In order to tell, use a SELECT clause where you only look at schools from ‘Louisiana’ and sort by the name of the school.\n\n\nUsing the diversty table, DELETE all the records that don’t record race or ethnicity. That is, delete the records that have a category of ‘Total Minority’, ‘Women’, or ‘Non-Resident Foreign’. Again, use a SELECT command to confirm that your code worked.\n\n\nUse ALTER TABLE to change the variable type of make_world_better_percent in the salary table from VARCHAR to DOUBLE. Follow up by running DESCRIBE on the salary table to make sure your change worked. (Note: for some reason, the same code doesn’t seem to work on the tuition table with room_and_board. It says that tuition depends on something. You are welcome to try to make it work on your own computers!)\n\n\nCreate a temporary table (e.g., to use in a follow up SELECT query) that contains only the ‘Private’ universities from the tuition table.\n\n\nCreate a temporary table consisting of the JOIN of all three tables but including only the Smith College data."
  },
  {
    "objectID": "handout/lab6_editing_db_sds261_j24.html#footnotes",
    "href": "handout/lab6_editing_db_sds261_j24.html#footnotes",
    "title": "Lab 6 - editing databases",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nTo change the data type only during a query, use SELECT CAST(room_and_board AS DOUBLE) FROM tuition.↩︎"
  },
  {
    "objectID": "handout/lab6_editing_db_sds261_j24_sol.html",
    "href": "handout/lab6_editing_db_sds261_j24_sol.html",
    "title": "Lab 6 - editing databases",
    "section": "",
    "text": "Solution\n\n\n\n\n\n\nlibrary(tidyverse)\nlibrary(DBI)\nlibrary(RMariaDB)\nlibrary(dbplyr)\nlibrary(mdsr)\nToday’s lab will provide practice working with editing SQL databases using DuckDB.\nThe goals for lab 6 include:"
  },
  {
    "objectID": "handout/lab6_editing_db_sds261_j24_sol.html#advice-for-turning-in-the-assignment",
    "href": "handout/lab6_editing_db_sds261_j24_sol.html#advice-for-turning-in-the-assignment",
    "title": "Lab 6 - editing databases",
    "section": "Advice for turning in the assignment",
    "text": "Advice for turning in the assignment\n\nBe sure to indicate (in the .qmd file) which problem is being answered with which code. A sentence or two with each response goes a long way toward your understanding!\nsave the .Rproj file somewhere you can find it. Don’t keep everything in your downloads folder. Maybe make a folder called SDS261 or something. That folder could live on your Desktop. Or maybe in your Dropbox.\nThe .qmd document should be saved in the R Project as lab6-sds261-yourlastname-yourfirstname.qmd.\nSet up a connection to a database of your naming using DuckDB.\n\n\ncon_college &lt;- DBI::dbConnect(duckdb::duckdb(),\n                             dbdir = \"samenameaslab5\")"
  },
  {
    "objectID": "handout/lab6_editing_db_sds261_j24_sol.html#assignment",
    "href": "handout/lab6_editing_db_sds261_j24_sol.html#assignment",
    "title": "Lab 6 - editing databases",
    "section": "Assignment",
    "text": "Assignment\nThe data we will work with today is on college tuition, pay, and diversity. The original data source is the US Department of Education, but it has been compiled as part of TidyTuesday on March 10, 2020. Tuition and fees are for 2018-19. Diversity is for 2014.\n\nUse the same database from Lab 5. If the database somehow got deleted or corrupted, go back and re-run your code from Lab 5.\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\ncon_college &lt;- DBI::dbConnect(duckdb::duckdb(),\n                             dbdir = \"collegeDB\")\n\n\n\n\n\nUse UPDATE to change the NA values to NULL (for room_and_board in the tuition table and make_world_better_percent in the salary table). (Originally I had a follow up task to convert the data type from VARCHAR to DOUBLE as well. However, DuckDB is particularly finicky with those conversions, and so we aren’t going to do it. If/when you work on a SQL server, you might adjust the data type using something like: ALTER TABLE tuition MODIFY room_and_board DOUBLE;.)1\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT COUNT(*) AS number_null\nFROM tuition\nWHERE room_and_board IS NULL;\n\n\n1 records\n\n\nnumber_null\n\n\n\n\n1094\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nUPDATE tuition\nSET room_and_board = NULL\nWHERE room_and_board = 'NA'\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT COUNT(*) AS number_null\nFROM tuition\nWHERE room_and_board IS NULL;\n\n\n1 records\n\n\nnumber_null\n\n\n\n\n1094\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT * FROM tuition LIMIT 5;\n\n\n5 records\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nname\nstate\nstate_code\ntype\ndegree_length\nroom_and_board\nin_state_tuition\nin_state_total\nout_of_state_tuition\nout_of_state_total\n\n\n\n\nAaniiih Nakoda College\nMontana\nMT\nPublic\n2 Year\nNA\n2380\n2380\n2380\n2380\n\n\nAbilene Christian University\nTexas\nTX\nPrivate\n4 Year\n10350\n34850\n45200\n34850\n45200\n\n\nAbraham Baldwin Agricultural College\nGeorgia\nGA\nPublic\n2 Year\n8474\n4128\n12602\n12550\n21024\n\n\nAcademy College\nMinnesota\nMN\nFor Profit\n2 Year\nNA\n17661\n17661\n17661\n17661\n\n\nAcademy of Art University\nCalifornia\nCA\nFor Profit\n4 Year\n16648\n27810\n44458\n27810\n44458\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT COUNT(*) AS number_null\nFROM salary\nWHERE make_world_better_percent IS NULL;\n\n\n1 records\n\n\nnumber_null\n\n\n\n\n33\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nUPDATE salary\nSET make_world_better_percent = NULL\nWHERE make_world_better_percent = 'NA'\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT COUNT(*) AS number_null\nFROM salary\nWHERE make_world_better_percent IS NULL;\n\n\n1 records\n\n\nnumber_null\n\n\n\n\n33\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT * FROM salary LIMIT 5;\n\n\n5 records\n\n\n\n\n\n\n\n\n\n\n\nrank\nname\nstate_name\nearly_career_pay\nmid_career_pay\nmake_world_better_percent\nstem_percent\n\n\n\n\n1\nAuburn University\nAlabama\n54400\n104500\n51\n31\n\n\n2\nUniversity of Alabama in Huntsville\nAlabama\n57500\n103900\n59\n45\n\n\n3\nThe University of Alabama\nAlabama\n52300\n97400\n50\n15\n\n\n4\nTuskegee University\nAlabama\n54500\n93500\n61\n30\n\n\n5\nSamford University\nAlabama\n48400\n90500\n52\n3\n\n\n\n\n\n\n\n\n\nUsing INSERT INTO add records to the diversity table. Add ‘Barden University’ in ‘Louisiana’ that has a total enrollment of 10,000 students, half of whom are female. Add an additional value to indicate, if the Bellas are representative of the student population, that Barden University has 1667 Black students.\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nINSERT INTO diversity (name, total_enrollment, state, category, enrollment)\n   VALUES('Barden University', 10000, 'Louisiana', 'Women', 5000),\n         ('Barden University', 10000, 'Louisiana', 'Black', 1667);\n\n\n\n\n\nCheck to see that the values inserted into the diversity table are correct. In order to tell, use a SELECT clause where you only look at schools from ‘Louisiana’ and sort by the name of the school.\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT * FROM diversity\nWHERE state = 'Louisiana'\nORDER BY name\nLIMIT 50;\n\n\nDisplaying records 1 - 10\n\n\n\n\n\n\n\n\n\nname\ntotal_enrollment\nstate\ncategory\nenrollment\n\n\n\n\nBarden University\n10000\nLouisiana\nBlack\n1667\n\n\nBarden University\n10000\nLouisiana\nWomen\n5000\n\n\nBarden University\n10000\nLouisiana\nBlack\n1667\n\n\nBarden University\n10000\nLouisiana\nBlack\n1667\n\n\nBarden University\n10000\nLouisiana\nBlack\n1667\n\n\nBaton Rouge Community College\n7740\nLouisiana\nUnknown\n633\n\n\nBaton Rouge Community College\n7740\nLouisiana\nAmerican Indian / Alaska Native\n24\n\n\nBaton Rouge Community College\n7740\nLouisiana\nAsian\n149\n\n\nBaton Rouge Community College\n7740\nLouisiana\nBlack\n3263\n\n\nBaton Rouge Community College\n7740\nLouisiana\nHispanic\n241\n\n\n\n\n\n\n\n\n\nUsing the diversty table, DELETE all the records that don’t record race or ethnicity. That is, delete the records that have a category of ‘Total Minority’, ‘Women’, or ‘Non-Resident Foreign’. Again, use a SELECT command to confirm that your code worked.\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nDELETE FROM diversity\nWHERE category = 'Total Minority' OR category = 'Women' OR category = 'Non-Resident Foreign'\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT * FROM diversity\nWHERE state = 'Louisiana'\nORDER BY name\nLIMIT 50;\n\n\nDisplaying records 1 - 10\n\n\n\n\n\n\n\n\n\nname\ntotal_enrollment\nstate\ncategory\nenrollment\n\n\n\n\nBarden University\n10000\nLouisiana\nBlack\n1667\n\n\nBarden University\n10000\nLouisiana\nBlack\n1667\n\n\nBarden University\n10000\nLouisiana\nBlack\n1667\n\n\nBarden University\n10000\nLouisiana\nBlack\n1667\n\n\nBaton Rouge Community College\n7740\nLouisiana\nUnknown\n633\n\n\nBaton Rouge Community College\n7740\nLouisiana\nAmerican Indian / Alaska Native\n24\n\n\nBaton Rouge Community College\n7740\nLouisiana\nAsian\n149\n\n\nBaton Rouge Community College\n7740\nLouisiana\nBlack\n3263\n\n\nBaton Rouge Community College\n7740\nLouisiana\nHispanic\n241\n\n\nBaton Rouge Community College\n7740\nLouisiana\nNative Hawaiian / Pacific Islander\n12\n\n\n\n\n\n\n\n\n\nUse ALTER TABLE to change the variable type of make_world_better_percent in the salary table from VARCHAR to DOUBLE. Follow up by running DESCRIBE on the salary table to make sure your change worked. (Note: for some reason, the same code doesn’t seem to work on the tuition table with room_and_board. It says that tuition depends on something. You are welcome to try to make it work on your own computers!)\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nALTER TABLE salary ALTER make_world_better_percent TYPE DOUBLE;\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nDESCRIBE salary;\n\n\n7 records\n\n\ncolumn_name\ncolumn_type\nnull\nkey\ndefault\nextra\n\n\n\n\nrank\nDOUBLE\nYES\nNA\nNA\nNA\n\n\nname\nVARCHAR\nYES\nNA\nNA\nNA\n\n\nstate_name\nVARCHAR\nYES\nNA\nNA\nNA\n\n\nearly_career_pay\nDOUBLE\nYES\nNA\nNA\nNA\n\n\nmid_career_pay\nDOUBLE\nYES\nNA\nNA\nNA\n\n\nmake_world_better_percent\nDOUBLE\nYES\nNA\nNA\nNA\n\n\nstem_percent\nDOUBLE\nYES\nNA\nNA\nNA\n\n\n\n\n\n\n\n\n\nCreate a temporary table (e.g., to use in a follow up SELECT query) that contains only the ‘Private’ universities from the tuition table.\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nCREATE TEMP TABLE tuition_private AS\n    SELECT * FROM tuition WHERE type = 'Private';\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT * FROM tuition_private LIMIT 10;\n\n\nDisplaying records 1 - 10\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nname\nstate\nstate_code\ntype\ndegree_length\nroom_and_board\nin_state_tuition\nin_state_total\nout_of_state_tuition\nout_of_state_total\n\n\n\n\nAbilene Christian University\nTexas\nTX\nPrivate\n4 Year\n10350\n34850\n45200\n34850\n45200\n\n\nAdelphi University\nNew York\nNY\nPrivate\n4 Year\n16030\n38660\n54690\n38660\n54690\n\n\nAdrian College\nMichigan\nMI\nPrivate\n4 Year\n11318\n37087\n48405\n37087\n48405\n\n\nAdventist University of Health Sciences\nFlorida\nFL\nPrivate\n4 Year\n4200\n15150\n19350\n15150\n19350\n\n\nAgnes Scott College\nGeorgia\nGA\nPrivate\n4 Year\n12330\n41160\n53490\n41160\n53490\n\n\nAlaska Bible College\nAlaska\nAK\nPrivate\n4 Year\n5700\n9300\n15000\n9300\n15000\n\n\nAlaska Pacific University\nAlaska\nAK\nPrivate\n4 Year\n7300\n20830\n28130\n20830\n28130\n\n\nAlbany College of Pharmacy and Health Sciences\nNew York\nNY\nPrivate\n4 Year\n10920\n35105\n46025\n35105\n46025\n\n\nAlbertus Magnus College\nConnecticut\nCT\nPrivate\n4 Year\n13200\n32060\n45260\n32060\n45260\n\n\nAlbion College\nMichigan\nMI\nPrivate\n4 Year\n12380\n45775\n58155\n45775\n58155\n\n\n\n\n\n\n\n\n\nCreate a temporary table consisting of the JOIN of all three tables but including only the Smith College data.\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nCREATE TEMP TABLE smith_data AS\nSELECT tuition.name, category, enrollment, type, \n       degree_length, room_and_board,\n       in_state_tuition, out_of_state_tuition, in_state_total,\n       out_of_state_total, early_career_pay, mid_career_pay,\n       make_world_better_percent, stem_percent,\n       total_enrollment\nFROM tuition\nJOIN salary ON tuition.name = salary.name\nJOIN diversity ON tuition.name = diversity.name\nWHERE tuition.name = 'Smith College'\nLIMIT 20;\n\n\n\n\n\n\n\n\n\n\nSolution\n\n\n\n\n\n\nSELECT * FROM smith_data;\n\n\n8 records\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nname\ncategory\nenrollment\ntype\ndegree_length\nroom_and_board\nin_state_tuition\nout_of_state_tuition\nin_state_total\nout_of_state_total\nearly_career_pay\nmid_career_pay\nmake_world_better_percent\nstem_percent\ntotal_enrollment\n\n\n\n\nSmith College\nAmerican Indian / Alaska Native\n5\nPrivate\n4 Year\n17520\n52404\n52404\n69924\n69924\n52700\n98200\n51\n26\n2989\n\n\nSmith College\nAsian\n348\nPrivate\n4 Year\n17520\n52404\n52404\n69924\n69924\n52700\n98200\n51\n26\n2989\n\n\nSmith College\nBlack\n149\nPrivate\n4 Year\n17520\n52404\n52404\n69924\n69924\n52700\n98200\n51\n26\n2989\n\n\nSmith College\nHispanic\n276\nPrivate\n4 Year\n17520\n52404\n52404\n69924\n69924\n52700\n98200\n51\n26\n2989\n\n\nSmith College\nNative Hawaiian / Pacific Islander\n2\nPrivate\n4 Year\n17520\n52404\n52404\n69924\n69924\n52700\n98200\n51\n26\n2989\n\n\nSmith College\nWhite\n1447\nPrivate\n4 Year\n17520\n52404\n52404\n69924\n69924\n52700\n98200\n51\n26\n2989\n\n\nSmith College\nTwo Or More Races\n128\nPrivate\n4 Year\n17520\n52404\n52404\n69924\n69924\n52700\n98200\n51\n26\n2989\n\n\nSmith College\nUnknown\n246\nPrivate\n4 Year\n17520\n52404\n52404\n69924\n69924\n52700\n98200\n51\n26\n2989"
  },
  {
    "objectID": "handout/lab6_editing_db_sds261_j24_sol.html#footnotes",
    "href": "handout/lab6_editing_db_sds261_j24_sol.html#footnotes",
    "title": "Lab 6 - editing databases",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nTo change the data type only during a query, use SELECT CAST(room_and_board AS DOUBLE) FROM tuition.↩︎"
  },
  {
    "objectID": "slides/2024-01-16-creating-db.html#data-types",
    "href": "slides/2024-01-16-creating-db.html#data-types",
    "title": "Creating Databases",
    "section": "Data types",
    "text": "Data types\n\nNumbers: INTEGER, SMALLINT, NUMERIC, DECIMAL, DOUBLE(precision, scale) precision = # sig digits, scale = # digits the follow decimal.\nString: CHAR, VARCHAR, BINARY, TEXT\nDate: DATE, TIME, DATETIME, TIMESTAMP, YEAR\nBoolean: SMALLINT(1) in MySQL, BOOLEAN in DuckDB"
  },
  {
    "objectID": "slides/2024-01-16-creating-db.html#check-constraints",
    "href": "slides/2024-01-16-creating-db.html#check-constraints",
    "title": "Creating Databases",
    "section": "CHECK constraints",
    "text": "CHECK constraints\nViolation will result in an error.\n\nCREATE TABLE CountryListCensus (\n    Id INT,\n    CountryName VARCHAR(255) NOT NULL,\n    CountryPopulation INT CHECK(CountryPopulation &gt; 0),\n    LastCensus DATE,\n    NextCensus DATE,\n    CHECK(LastCensus&lt;NextCensus),\n    PRIMARY KEY (Id)\n);"
  },
  {
    "objectID": "slides/2024-01-16-creating-db.html#creating-keys",
    "href": "slides/2024-01-16-creating-db.html#creating-keys",
    "title": "Creating Databases",
    "section": "Creating KEYs",
    "text": "Creating KEYs\n\nCREATE TABLE table1 (\n  col1 ...,\n  col2 ...,\n  col3 ...,\n  PRIMARY KEY col1,\n  FOREIGN KEY col2 REFERENCES table2(table2col1)\n);\n\nEither or both of the KEYs could be multiple columns.\n\nCREATE TABLE table1 (\n  col1 ...,\n  col2 ...,\n  col3 ...,\n  PRIMARY KEY (col1, col3),\n  FOREIGN KEY (col1, col2) REFERENCES table2(table2col1, table2col4)\n);"
  },
  {
    "objectID": "slides/2024-01-16-creating-db.html#creating-indexes",
    "href": "slides/2024-01-16-creating-db.html#creating-indexes",
    "title": "Creating Databases",
    "section": "Creating INDEXes",
    "text": "Creating INDEXes\nIndexes can be created on one or more variable. A table does not need to have an INDEX (or a KEY).\n\nCREATE INDEX name_of_index ON table (col1);\n\n\nCREATE INDEX name_of_index ON table (col1, col2);"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html",
    "href": "slides/2024-01-18-db-etc.html",
    "title": "SQL Extras",
    "section": "",
    "text": "DuckDB\n\nin-process database management system that runs entirely on your own computer.\nthe data live in your storage (instead of your memory).\nyou don’t have to transfer queries or results over the internet."
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#duckdb",
    "href": "slides/2024-01-18-db-etc.html#duckdb",
    "title": "SQL Extras",
    "section": "",
    "text": "DuckDB\n\nin-process database management system that runs entirely on your own computer.\nthe data live in your storage (instead of your memory).\nyou don’t have to transfer queries or results over the internet."
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#duckdb-caveat",
    "href": "slides/2024-01-18-db-etc.html#duckdb-caveat",
    "title": "SQL Extras",
    "section": "DuckDB caveat",
    "text": "DuckDB caveat\n\nthe SQL dialect used in DuckDB is slightly different from MySQL\nwrite SELECT * FROM table 10; instead of SELECT * FROM table 0, 10;\nlots of different dialects, depending on the SQL server. Always be aware of the dialect you are using."
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#duckdb-via-r",
    "href": "slides/2024-01-18-db-etc.html#duckdb-via-r",
    "title": "SQL Extras",
    "section": "DuckDB via R",
    "text": "DuckDB via R\n\ninstall.packages(\"duckdb\")  # only once, in the Console, not in the .qmd or .Rmd file\nlibrary(duckdb)             # at the top of the .qmd or .Rmd file\n\nlibrary(DBI)                # we also still need the DBI package\n\n\ncon_duckdb &lt;- DBI::dbConnect(duckdb::duckdb(),\n                             dbdir = \"duck_datab\")\n\n\nthe database has been stored to a database directory called duck_datab which lives in the current R project.\ncan’t open it like a standard folder, but it is where DuckDB stores the database files."
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#preparing-to-load-data",
    "href": "slides/2024-01-18-db-etc.html#preparing-to-load-data",
    "title": "SQL Extras",
    "section": "Preparing to load data",
    "text": "Preparing to load data\nThe duckdb database is currently empty, so we need to load in some data. The duckdb_read_csv() function in the duckdb R package allows us to load the .csv file (available on GitHub) directly into the database without being loaded as an R object first.\nRecall that in ?@tbl-select-describe we used DESCRIBE to display the variable types of the database table(s). The list includes the variable name (Field), its Type, whether there are NULL values allowed, and whether there are keys or indices defined on the variable. See Table 2 for the DESCRIBE output on the table we are about to import.\nUnlike R, when creating a new data table, SQL requires that you communicate each future variable (column) and that variable’s type. Variable types are not automatically generated!"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#saturday-night-live",
    "href": "slides/2024-01-18-db-etc.html#saturday-night-live",
    "title": "SQL Extras",
    "section": "Saturday Night Live",
    "text": "Saturday Night Live\n\n\n\n\n\nFigure 1: image credit: NBC\n\n\n\n\nConsider the Saturday Night Live datasets available on the snldb GitHub repo."
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#casts-table",
    "href": "slides/2024-01-18-db-etc.html#casts-table",
    "title": "SQL Extras",
    "section": "casts table",
    "text": "casts table\nUse R to understand the data from casts.csv.\n\ncasts &lt;- readr::read_csv(\"https://raw.githubusercontent.com/hhllcks/snldb/master/output/casts.csv\")\nglimpse(casts)\n\nRows: 614\nColumns: 8\n$ aid             &lt;chr&gt; \"A. Whitney Brown\", \"A. Whitney Brown\", \"A. Whitney Br…\n$ sid             &lt;dbl&gt; 11, 12, 13, 14, 15, 16, 5, 39, 40, 41, 42, 45, 46, 21,…\n$ featured        &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, …\n$ first_epid      &lt;dbl&gt; 19860222, NA, NA, NA, NA, NA, 19800409, 20140118, NA, …\n$ last_epid       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n$ update_anchor   &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE…\n$ n_episodes      &lt;dbl&gt; 8, 20, 13, 20, 20, 20, 5, 11, 21, 21, 21, 18, 17, 20, …\n$ season_fraction &lt;dbl&gt; 0.444, 1.000, 1.000, 1.000, 1.000, 1.000, 0.250, 0.524…"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#data-types",
    "href": "slides/2024-01-18-db-etc.html#data-types",
    "title": "SQL Extras",
    "section": "Data types",
    "text": "Data types\n\nNumbers: INTEGER, SMALLINT, NUMERIC, DECIMAL, DOUBLE(precision, scale) precision = # sig digits, scale = # digits the follow decimal.\nString: CHAR, VARCHAR, BINARY, TEXT\nDate: DATE, TIME, DATETIME, TIMESTAMP, YEAR\nBoolean: SMALLINT(1) in MySQL, BOOLEAN in DuckDB"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#check-constraints",
    "href": "slides/2024-01-18-db-etc.html#check-constraints",
    "title": "SQL Extras",
    "section": "CHECK constraints",
    "text": "CHECK constraints\nViolation will result in an error.\n\nCREATE TABLE CountryListCensus (\n    Id INT,\n    CountryName VARCHAR(255) NOT NULL,\n    CountryPopulation INT CHECK(CountryPopulation &gt; 0),\n    LastCensus DATE,\n    NextCensus DATE,\n    CHECK(LastCensus&lt;NextCensus),\n    PRIMARY KEY (Id)\n);"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#loading-data",
    "href": "slides/2024-01-18-db-etc.html#loading-data",
    "title": "SQL Extras",
    "section": "Loading data",
    "text": "Loading data\nImporting .csv files as tables, a series of steps:1\n\na USE statement that ensures we are in the right schema/database.\na series of DROP TABLE statements that drop any old tables with the same names as the ones we are going to create.\na series of CREATE TABLE statements that specify the table structures.\na series of COPY statements that read the data from the .csv files into the appropriate tables."
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#loading-step-1-use",
    "href": "slides/2024-01-18-db-etc.html#loading-step-1-use",
    "title": "SQL Extras",
    "section": "Loading step 1, USE",
    "text": "Loading step 1, USE\nUse the (local) database that we’ve called duck_datab.\n\n```{sql}\n#| connection: con_duckdb\n\nUSE duck_datab;\n```"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#loading-step-2-refresh",
    "href": "slides/2024-01-18-db-etc.html#loading-step-2-refresh",
    "title": "SQL Extras",
    "section": "Loading step 2, refresh",
    "text": "Loading step 2, refresh\nMake sure to “refresh” the table, in case it already exists. However, be very careful with the DROP TABLE statement, as it removes the casts table.\n\nDROP TABLE IF EXISTS casts;"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#loading-step-3-create-table",
    "href": "slides/2024-01-18-db-etc.html#loading-step-3-create-table",
    "title": "SQL Extras",
    "section": "Loading step 3, CREATE TABLE",
    "text": "Loading step 3, CREATE TABLE\nCarefully define the variable types, whether or not they allow missing values, and what a default value is for that variable. Additionally, identify the key for accessing information.\n\nCREATE TABLE casts (\n  aid VARCHAR(255) NOT NULL DEFAULT '',\n  sid INTEGER NOT NULL DEFAULT 0,\n  featured BOOLEAN NOT NULL DEFAULT 'false',\n  first_epid INTEGER DEFAULT 0,\n  last_epid INTEGER DEFAULT 0,\n  update_anchor BOOLEAN NOT NULL DEFAULT 0,\n  n_episodes INTEGER NOT NULL DEFAULT 0,\n  season_fraction DECIMAL(21,20) NOT NULL DEFAULT 0,\n  PRIMARY KEY (sid, aid)\n);"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#loading-step-4-copy",
    "href": "slides/2024-01-18-db-etc.html#loading-step-4-copy",
    "title": "SQL Extras",
    "section": "Loading step 4, COPY",
    "text": "Loading step 4, COPY\nThe .csv file lives on my computer, so I load it in directly. [n.b., the statement to load in data is different in MySQL.]\n\nCOPY casts FROM 'data/casts.csv' HEADER;"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#checking-the-loading-select",
    "href": "slides/2024-01-18-db-etc.html#checking-the-loading-select",
    "title": "SQL Extras",
    "section": "Checking the loading, SELECT",
    "text": "Checking the loading, SELECT\n\nSELECT * FROM casts LIMIT 8;\n\n\n\n\n\nTable 1: After CREATE TABLE where variable types are set, the COPY command pulls the data into the table. SELECT shows us that the table is as expected.\n\n\naid\nsid\nfeatured\nfirst_epid\nlast_epid\nupdate_anchor\nn_episodes\nseason_fraction\n\n\n\n\nA. Whitney Brown\n11\nTRUE\n19860222\n\nFALSE\n8\n0.444\n\n\nA. Whitney Brown\n12\nTRUE\n\n\nFALSE\n20\n1.000\n\n\nA. Whitney Brown\n13\nTRUE\n\n\nFALSE\n13\n1.000\n\n\nA. Whitney Brown\n14\nTRUE\n\n\nFALSE\n20\n1.000\n\n\nA. Whitney Brown\n15\nTRUE\n\n\nFALSE\n20\n1.000\n\n\nA. Whitney Brown\n16\nTRUE\n\n\nFALSE\n20\n1.000\n\n\nAlan Zweibel\n5\nTRUE\n19800409\n\nFALSE\n5\n0.250\n\n\nSasheer Zamata\n39\nTRUE\n20140118\n\nFALSE\n11\n0.524"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#check-the-database",
    "href": "slides/2024-01-18-db-etc.html#check-the-database",
    "title": "SQL Extras",
    "section": "Check the database",
    "text": "Check the database\nLet’s make sure that the database exists and that the table in the database exists.\n\nSHOW DATABASES;\n\n\n\n\n1 records\n\n\n\n\ndatabase_name\n\n\n\n\n\n\nduck_datab"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#check-the-database-1",
    "href": "slides/2024-01-18-db-etc.html#check-the-database-1",
    "title": "SQL Extras",
    "section": "Check the database",
    "text": "Check the database\nLet’s make sure that the database exists and that the table in the database exists.\n\nSHOW TABLES;\n\n\n\n\n1 records\n\n\n\n\nname\n\n\n\n\n\n\ncasts"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#check-the-database-2",
    "href": "slides/2024-01-18-db-etc.html#check-the-database-2",
    "title": "SQL Extras",
    "section": "Check the database",
    "text": "Check the database\nLet’s make sure that the database exists and that the table in the database exists.\n\nDESCRIBE casts;\n\n\n\n\n\nTable 2: DESCRIBE variables in the casts table.\n\n\ncolumn_name\ncolumn_type\nnull\nkey\ndefault\nextra\n\n\n\n\naid\nVARCHAR\nNO\nPRI\n''\n\n\n\nsid\nINTEGER\nNO\nPRI\n0\n\n\n\nfeatured\nBOOLEAN\nNO\n\n'false'\n\n\n\nfirst_epid\nINTEGER\nYES\n\n0\n\n\n\nlast_epid\nINTEGER\nYES\n\n0\n\n\n\nupdate_anchor\nBOOLEAN\nNO\n\n0\n\n\n\nn_episodes\nINTEGER\nNO\n\n0\n\n\n\nseason_fraction\nDECIMAL(21,20)\nNO\n\n0"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#efficiencies",
    "href": "slides/2024-01-18-db-etc.html#efficiencies",
    "title": "SQL Extras",
    "section": "Efficiencies",
    "text": "Efficiencies\nReconsider this analogy:\n\nEach library (database) has books (tables). Each book (table) has pages (rows). Each page (row) has a unique page number to identify it (key value); to find a particular page, you sort through the page numbers (key values). But it isn’t immediately obvious where the particular page of interest is, you might have to page through the book a little bit to find the page of interest. It would be easier if you had several bookmarks throughout the book to anchor some of the page numbers. For example, if you want page 1047 and you have a bookmark on page 1050, you only have to turn back three pages. The bookmark is an index, it helps you find the desired rows much more quickly.1\n\nAnalogy taken from: https://www.quora.com/profile/Lara-Mazilu"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#key",
    "href": "slides/2024-01-18-db-etc.html#key",
    "title": "SQL Extras",
    "section": "Key",
    "text": "Key\nKeys are unique identifiers for each row, used primarily for connecting tables. Keys are generally not helpful for efficiency, but they are important for data integrity and relationships between tables.\n\nPRIMARY KEY is a column or set of columns that uniquely identify each row. Primary keys cannot be NULL.\nFOREIGN KEY is a column or set of columns that reference a primary key in a different table. A foreign key can be NULL."
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#index",
    "href": "slides/2024-01-18-db-etc.html#index",
    "title": "SQL Extras",
    "section": "Index",
    "text": "Index\nIndices are the crux of why SQL is so much more efficient than, say, R. An index is a lookup table that helps SQL keep track of which records contain certain values. By indexing the rows, SQL is able to optimize sorting and joining tables. The index is created in advance (when the table is created) and saved to disk, which can take up substantial space on the disk. Sometimes more than one variable is used to index the table. There are trade-offs to having a lot of indices (disk space but fast wrangling) versus a few indices (slow wrangling but less space)."
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#find-keys-and-indices",
    "href": "slides/2024-01-18-db-etc.html#find-keys-and-indices",
    "title": "SQL Extras",
    "section": "Find keys and indices",
    "text": "Find keys and indices\nIn MySQL the commands SHOW KEYS and SHOW INDEXES provide information about the keys and indices for each table."
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#partitioning",
    "href": "slides/2024-01-18-db-etc.html#partitioning",
    "title": "SQL Extras",
    "section": "Partitioning",
    "text": "Partitioning\nAnother way to speed up query retrievals is to partition the data tables. If, for example, the SNL queries were always done by year, then the episodes table could be partitioned such that they are stored as separate tables (one per year). The partitioning functions as an index on year. The user would not be able to tell the difference between the unpartitioned episodes table and the partitioned one. However, queries done by year would be faster. Queries done grouped in another way would be slower."
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#best-practice",
    "href": "slides/2024-01-18-db-etc.html#best-practice",
    "title": "SQL Extras",
    "section": "Best practice",
    "text": "Best practice\nIt is always a good idea to terminate the SQL connection when you are done with it.\n\ndbDisconnect(con_air, shutdown = TRUE)"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#footnotes",
    "href": "slides/2024-01-18-db-etc.html#footnotes",
    "title": "SQL Extras",
    "section": "Footnotes",
    "text": "Footnotes\n\n\ntaken from MDSR.↩︎"
  },
  {
    "objectID": "handout/lab5_creating_db_sds261_j24.html#disconnect-from-the-server",
    "href": "handout/lab5_creating_db_sds261_j24.html#disconnect-from-the-server",
    "title": "Lab 5 - creating databases",
    "section": "Disconnect from the server",
    "text": "Disconnect from the server"
  },
  {
    "objectID": "handout/lab5_creating_db_sds261_j24_sol.html#disconnect-from-the-server",
    "href": "handout/lab5_creating_db_sds261_j24_sol.html#disconnect-from-the-server",
    "title": "Lab 5 - creating databases",
    "section": "Disconnect from the server",
    "text": "Disconnect from the server"
  },
  {
    "objectID": "handout/lab6_editing_db_sds261_j24.html#disconnect-from-the-server",
    "href": "handout/lab6_editing_db_sds261_j24.html#disconnect-from-the-server",
    "title": "Lab 6 - editing databases",
    "section": "Disconnect from the server",
    "text": "Disconnect from the server\n\ndbDisconnect(con_college, shutdown = TRUE)"
  },
  {
    "objectID": "handout/lab6_editing_db_sds261_j24_sol.html#disconnect-from-the-server",
    "href": "handout/lab6_editing_db_sds261_j24_sol.html#disconnect-from-the-server",
    "title": "Lab 6 - editing databases",
    "section": "Disconnect from the server",
    "text": "Disconnect from the server\n\ndbDisconnect(con_college, shutdown = TRUE)"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#changing-data",
    "href": "slides/2024-01-17-editing-db.html#changing-data",
    "title": "Editing Databases",
    "section": "",
    "text": "The UPDATE function allows you to change a value in a table across all rows that match a certain criteria.\n\nSELECT * FROM impressions \n   WHERE name LIKE 'Ivanka%';\n\n\n5 records\n\n\nimpid\naid\nname\n\n\n\n\n2598\nScarlett Johansson\nIvanka Trump\n\n\n3716\nEmily Blunt\nIvanka Trump\n\n\n3694\nMargot Robbie\nIvanka Trump\n\n\n3679\nVanessa Bayer\nIvanka Trump\n\n\n2340\nMaya Rudolph\nIvanka Trump"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#update",
    "href": "slides/2024-01-17-editing-db.html#update",
    "title": "Editing Databases",
    "section": "",
    "text": "For funsies, let’s change Ivanka Trump to Ivanka Kushner.\n\nUPDATE impressions\n   SET name = 'Ivanka Kushner'\n   WHERE name LIKE 'Ivanka%';\n\n\nSELECT * FROM impressions \n   WHERE name LIKE 'Ivanka%';\n\n\n5 records\n\n\nimpid\naid\nname\n\n\n\n\n2598\nScarlett Johansson\nIvanka Kushner\n\n\n3716\nEmily Blunt\nIvanka Kushner\n\n\n3694\nMargot Robbie\nIvanka Kushner\n\n\n3679\nVanessa Bayer\nIvanka Kushner\n\n\n2340\nMaya Rudolph\nIvanka Kushner"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#update-1",
    "href": "slides/2024-01-17-editing-db.html#update-1",
    "title": "Editing Databases",
    "section": "",
    "text": "Watch out!\n\n\n\nBe careful with UPDATE. A careless UPDATE could write over all of the data in your table. There is no undo function."
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#inserting-data",
    "href": "slides/2024-01-17-editing-db.html#inserting-data",
    "title": "Editing Databases",
    "section": "",
    "text": "Task: include recent hosts in the hosts table.\nBy searching the SNL archives, we can see that the next host, chronologically was Elon Musk on May 8, 2021.\n\n\n\n\n\n\n\n\nFigure 2: Hosts information from snlarchives.net"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#inserting-data-1",
    "href": "slides/2024-01-17-editing-db.html#inserting-data-1",
    "title": "Editing Databases",
    "section": "",
    "text": "Task: include recent hosts in the hosts table.\nBy searching the SNL archives, we can see that the next host, chronologically was Elon Musk on May 8, 2021.\n\nSELECT * FROM hosts\n    ORDER BY epid DESC\n    LIMIT 10;\n\n\nDisplaying records 1 - 10\n\n\nepid\naid\n\n\n\n\n20210410\nCarey Mulligan\n\n\n20210403\nDaniel Kaluuya\n\n\n20210327\nMaya Rudolph\n\n\n20210227\nNick Jonas\n\n\n20210220\nRege-Jean Page\n\n\n20210213\nRegina King\n\n\n20210206\nDan Levy\n\n\n20210130\nJohn Krasinski\n\n\n20201219\nKristen Wiig\n\n\n20201212\nTimothee Chalamet"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#inserting-data-2",
    "href": "slides/2024-01-17-editing-db.html#inserting-data-2",
    "title": "Editing Databases",
    "section": "",
    "text": "INSERT allows us to add the relevant information associated with the episode of SNL that Elon Musk hosted.\n\nINSERT INTO hosts (epid, aid)\n   VALUES ('20210508', 'Elon Musk');\n\n\nSELECT * FROM hosts\n    ORDER BY epid DESC\n    LIMIT 10;\n\n\nDisplaying records 1 - 10\n\n\nepid\naid\n\n\n\n\n20210508\nElon Musk\n\n\n20210410\nCarey Mulligan\n\n\n20210403\nDaniel Kaluuya\n\n\n20210327\nMaya Rudolph\n\n\n20210227\nNick Jonas\n\n\n20210220\nRege-Jean Page\n\n\n20210213\nRegina King\n\n\n20210206\nDan Levy\n\n\n20210130\nJohn Krasinski\n\n\n20201219\nKristen Wiig"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#inserting-data-3",
    "href": "slides/2024-01-17-editing-db.html#inserting-data-3",
    "title": "Editing Databases",
    "section": "",
    "text": "It would be tedious to INSERT all of the most recent host information by hand. Instead, we’ll scrape the SNL archives using the R package rvest, which allows us to pull out the appropriate html elements. The epid and aid are joined together in a tibble, and filtered to only include episodes which are not already in the episodes table.\n\nlibrary(rvest)\n\nrecent_hosts &lt;- read_html(\"http://www.snlarchives.net/Episodes/\") |&gt;\n  html_nodes(\"tr\") |&gt;\n  purrr::map_df( ~ tibble(\n    epid = .x |&gt; html_node(\"a.ms-2.me-2\") |&gt;\n      html_attr(\"href\") |&gt;\n      str_extract(\"\\\\d+\"),\n    aid = .x |&gt; html_node(\"td:nth-child(2)\") |&gt;\n      html_text2() |&gt;\n      str_extract(\"[\\\\w\\\\. \\\\w\\\\.]+(?=/|$)\")\n  )) |&gt;\n  filter(epid &gt; 20210508)\n\n\nwrite_csv(recent_hosts, \"data/recent_hosts.csv\")"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#deleting-data",
    "href": "slides/2024-01-17-editing-db.html#deleting-data",
    "title": "Editing Databases",
    "section": "",
    "text": "You might change your mind and decide that you really only want hosts from years up to 2022. The DELETE function deletes any rows specified by the WHERE clause.\n\nDELETE FROM hosts\n   WHERE epid &gt; 20221231;\n\n\nSELECT * FROM hosts\n  ORDER BY epid DESC\n  LIMIT 10;\n\n\nDisplaying records 1 - 10\n\n\nepid\naid\n\n\n\n\n20221217\nAustin Butler\n\n\n20221210\nMartin Short\n\n\n20221203\nKeke Palmer\n\n\n20221112\nDave Chappelle\n\n\n20221105\nAmy Schumer\n\n\n20221029\nJack Harlow\n\n\n20221015\nMegan Thee Stallion\n\n\n20221008\nBrendan Gleeson\n\n\n20221001\nMiles Teller\n\n\n20220521\nNatasha Lyonne"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#altering-the-table",
    "href": "slides/2024-01-17-editing-db.html#altering-the-table",
    "title": "Editing Databases",
    "section": "",
    "text": "ALTER TABLE changes the structure of a table. For example, you can add or delete columns, create or destroy indexes, change the type of existing columns, or rename columns or the table itself.\nMultiple ADD, ALTER, DROP, and CHANGE clauses are permitted in a single ALTER TABLE statement, separated by commas.\nCaveat: I have found DuckDB to be slightly finicky in some of the operations…"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#inserting-data-4",
    "href": "slides/2024-01-17-editing-db.html#inserting-data-4",
    "title": "Editing Databases",
    "section": "",
    "text": "INSERT INTO hosts\n   SELECT *\n   FROM READ_CSV('data/recent_hosts.csv', AUTO_DETECT = TRUE);\n\n\nSELECT * FROM hosts\n  ORDER BY epid DESC\n  LIMIT 10;\n\n\nDisplaying records 1 - 10\n\n\nepid\naid\n\n\n\n\n20240518\nJake Gyllenhaal\n\n\n20240511\nMaya Rudolph\n\n\n20240504\nDua Lipa\n\n\n20240413\nRyan Gosling\n\n\n20240406\nKristen Wiig\n\n\n20240330\nRamy Youssef\n\n\n20240309\nJosh Brolin\n\n\n20240302\nSydney Sweeney\n\n\n20240224\nShane Gillis\n\n\n20240203\nAyo Edebiri"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#altering-the-table-drop-columns",
    "href": "slides/2024-01-17-editing-db.html#altering-the-table-drop-columns",
    "title": "Editing Databases",
    "section": "",
    "text": "ALTER TABLE t1\nDROP COLUMN col1,\nDROP COLUMN col2;"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#altering-the-table-change-name-and-definition",
    "href": "slides/2024-01-17-editing-db.html#altering-the-table-change-name-and-definition",
    "title": "Editing Databases",
    "section": "",
    "text": "rename an INT NOT NULL column from a to b and change its definition to use the BIGINT data type while retaining the NOT NULL attribute.\n\n\nALTER TABLE t1 CHANGE a b BIGINT NOT NULL;"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#altering-the-table-change-definition-not-name",
    "href": "slides/2024-01-17-editing-db.html#altering-the-table-change-definition-not-name",
    "title": "Editing Databases",
    "section": "",
    "text": "CHANGE, the syntax requires two column names, so you must specify the same name twice to leave the name unchanged. For example, to change the definition of column b.\n\n\nALTER TABLE t1 CHANGE b b INT NOT NULL;"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#altering-the-table-modify-definition",
    "href": "slides/2024-01-17-editing-db.html#altering-the-table-modify-definition",
    "title": "Editing Databases",
    "section": "",
    "text": "MODIFY is more convenient to change the definition without changing the name because it requires the column name only once.\n\n\nALTER TABLE t1 MODIFY b INT NOT NULL;"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#altering-the-table-change-name-not-definition",
    "href": "slides/2024-01-17-editing-db.html#altering-the-table-change-name-not-definition",
    "title": "Editing Databases",
    "section": "",
    "text": "CHANGE, the syntax requires a column definition, so to leave the definition unchanged, you must respecify the definition the column currently has. For example, to rename an INT NOT NULL column from b to a.\n\n\nALTER TABLE t1 CHANGE b a INT NOT NULL;"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#altering-the-table-rename-column-name-not-definition",
    "href": "slides/2024-01-17-editing-db.html#altering-the-table-rename-column-name-not-definition",
    "title": "Editing Databases",
    "section": "",
    "text": "RENAME COLUMN is more convenient to change the name without changing the definition because it requires only the old and new names.\n\n\nALTER TABLE t1 RENAME COLUMN b TO a;"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#altering-the-table-rename-column-multiple-columns",
    "href": "slides/2024-01-17-editing-db.html#altering-the-table-rename-column-multiple-columns",
    "title": "Editing Databases",
    "section": "",
    "text": "cannot RENAME COLUMN to a column name that already exists. The following are valid.\n\n\n/* swap a and b */\nALTER TABLE t1 RENAME COLUMN a TO b,\n               RENAME COLUMN b TO a;\n\n/* \"rotate\" a, b, c through a cycle */\nALTER TABLE t1 RENAME COLUMN a TO b,\n               RENAME COLUMN b TO c,\n               RENAME COLUMN c TO a;"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#temporary-tables",
    "href": "slides/2024-01-17-editing-db.html#temporary-tables",
    "title": "Editing Databases",
    "section": "",
    "text": "Temporary tables are used to break down complex queries into smaller, more manageable steps. For example, let’s say we want to JOIN two tables after each has been filtered using different WHERE clauses. The filtered tables can each be saved into their own temporary tables and then the temporary tables can be merged.\nTables in DuckDB are saved (to disk), even when the connection is closed. However, temporary tables are saved in memory (instead of on disk) and are deleted when the connection is closed."
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#temporary-tables-1",
    "href": "slides/2024-01-17-editing-db.html#temporary-tables-1",
    "title": "Editing Databases",
    "section": "",
    "text": "We wouldn’t want to wrangle the date every single time we used the data.\n\nCREATE TEMP TABLE episodes_date AS\n    SELECT *, CASE\n             WHEN POSITION(',' IN aired) &gt; 0 THEN\n    EXTRACT(YEAR FROM CAST(\n                SUBSTRING(aired, POSITION(',' IN aired) + 2) || '-' ||\n                CASE\n                    WHEN POSITION('January' IN aired) &gt; 0 THEN '01'\n                    WHEN POSITION('February' IN aired) &gt; 0 THEN '02'\n                    WHEN POSITION('March' IN aired) &gt; 0 THEN '03'\n                    WHEN POSITION('April' IN aired) &gt; 0 THEN '04'\n                    WHEN POSITION('May' IN aired) &gt; 0 THEN '05'\n                    WHEN POSITION('June' IN aired) &gt; 0 THEN '06'\n                    WHEN POSITION('July' IN aired) &gt; 0 THEN '07'\n                    WHEN POSITION('August' IN aired) &gt; 0 THEN '08'\n                    WHEN POSITION('September' IN aired) &gt; 0 THEN '09'\n                    WHEN POSITION('October' IN aired) &gt; 0 THEN '10'\n                    WHEN POSITION('November' IN aired) &gt; 0 THEN '11'\n                    WHEN POSITION('December' IN aired) &gt; 0 THEN '12'\n                    ELSE '01' -- Default to January if no month is found\n                END || '-' ||\n                SUBSTRING(aired, POSITION(' ' IN aired) + 1, 2) AS DATE\n            ))\n            END AS year FROM episodes;"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#temporary-tables-hosts",
    "href": "slides/2024-01-17-editing-db.html#temporary-tables-hosts",
    "title": "Editing Databases",
    "section": "Temporary Tables (hosts)",
    "text": "Temporary Tables (hosts)\n\nSELECT * FROM hosts LIMIT 10;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\nepid\n\n\naid\n\n\n\n\n\n\n20210410\n\n\nCarey Mulligan\n\n\n\n\n20210403\n\n\nDaniel Kaluuya\n\n\n\n\n20210327\n\n\nMaya Rudolph\n\n\n\n\n20210227\n\n\nNick Jonas\n\n\n\n\n20210220\n\n\nRege-Jean Page\n\n\n\n\n20210213\n\n\nRegina King\n\n\n\n\n20210206\n\n\nDan Levy\n\n\n\n\n20210130\n\n\nJohn Krasinski\n\n\n\n\n20201219\n\n\nKristen Wiig\n\n\n\n\n20201212\n\n\nTimothee Chalamet"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#temporary-tables-episodes",
    "href": "slides/2024-01-17-editing-db.html#temporary-tables-episodes",
    "title": "Editing Databases",
    "section": "",
    "text": "SELECT * FROM episodes LIMIT 10;\n\n\nDisplaying records 1 - 10\n\n\nsid\nepid\naired\nepno\n\n\n\n\n46\n20210410\nApril 10, 2021\n17\n\n\n46\n20210403\nApril 3, 2021\n16\n\n\n46\n20210327\nMarch 27, 2021\n15\n\n\n46\n20210227\nFebruary 27, 2021\n14\n\n\n46\n20210220\nFebruary 20, 2021\n13\n\n\n46\n20210213\nFebruary 13, 2021\n12\n\n\n46\n20210206\nFebruary 6, 2021\n11\n\n\n46\n20210130\nJanuary 30, 2021\n10\n\n\n46\n20201219\nDecember 19, 2020\n9\n\n\n46\n20201212\nDecember 12, 2020\n8"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#temporary-table-exists",
    "href": "slides/2024-01-17-editing-db.html#temporary-table-exists",
    "title": "Editing Databases",
    "section": "",
    "text": "SELECT * FROM episodes_date LIMIT 10;\n\n\nDisplaying records 1 - 10\n\n\nsid\nepid\naired\nepno\nyear\n\n\n\n\n46\n20210410\nApril 10, 2021\n17\n2021\n\n\n46\n20210403\nApril 3, 2021\n16\n2021\n\n\n46\n20210327\nMarch 27, 2021\n15\n2021\n\n\n46\n20210227\nFebruary 27, 2021\n14\n2021\n\n\n46\n20210220\nFebruary 20, 2021\n13\n2021\n\n\n46\n20210213\nFebruary 13, 2021\n12\n2021\n\n\n46\n20210206\nFebruary 6, 2021\n11\n2021\n\n\n46\n20210130\nJanuary 30, 2021\n10\n2021\n\n\n46\n20201219\nDecember 19, 2020\n9\n2020\n\n\n46\n20201212\nDecember 12, 2020\n8\n2020"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#using-a-temporary-table",
    "href": "slides/2024-01-17-editing-db.html#using-a-temporary-table",
    "title": "Editing Databases",
    "section": "",
    "text": "Now that the year variable has been created in the new temporary table called episodes_date, we can use episode_date to query and find, for example, all of the hosts in 2019.\n\nSELECT hosts.aid, ep.aired, ep.year FROM hosts \nJOIN episodes_date AS ep ON hosts.epid = ep.epid\nWHERE year = 2019\nLIMIT 25;\n\n\nDisplaying records 1 - 10\n\n\naid\naired\nyear\n\n\n\n\nEddie Murphy\nDecember 21, 2019\n2019\n\n\nScarlett Johansson\nDecember 14, 2019\n2019\n\n\nJennifer Lopez\nDecember 7, 2019\n2019\n\n\nWill Ferrell\nNovember 23, 2019\n2019\n\n\nHarry Styles\nNovember 16, 2019\n2019\n\n\nKristen Stewart\nNovember 2, 2019\n2019\n\n\nChance the Rapper\nOctober 26, 2019\n2019\n\n\nDavid Harbour\nOctober 12, 2019\n2019\n\n\nPhoebe Waller-Bridge\nOctober 5, 2019\n2019\n\n\nWoody Harrelson\nSeptember 28, 2019\n2019"
  },
  {
    "objectID": "slides/2024-01-17-editing-db.html#what-does-position-do",
    "href": "slides/2024-01-17-editing-db.html#what-does-position-do",
    "title": "Editing Databases",
    "section": "",
    "text": "In case you are curious about the date wrangling code… consider SUBSTRING(aired, POSITION(',' IN aired) + 2)\n\nPOSITION(',' IN aired): This part of the expression uses the POSITION function to find the position of the first occurrence of the comma (,) in the string aired. The result is the index (position) of the comma within the string.\nPOSITION(',' IN aired) + 2: This adds 2 to the index of the comma. The + 2 is used to move the starting point of the substring two positions to the right of the comma. This is done to exclude the comma itself and any following spaces.\nSUBSTRING(aired, POSITION(',' IN aired) + 2): This part uses the SUBSTRING function to extract a substring from the string aired. The starting position of the substring is determined by POSITION(',' IN aired) + 2, and it goes until the end of the string. This effectively removes the part of the string that comes before and including the first comma.\n\nIn summary, the entire expression is extracting a substring from the original string aired, starting from two positions to the right of the first comma and continuing until the end of the string. This can be useful in scenarios where you want to remove or isolate part of a string based on the position of a specific character (in this case, the comma)."
  },
  {
    "objectID": "handout/tempqmd.html",
    "href": "handout/tempqmd.html",
    "title": "Untitled",
    "section": "",
    "text": "words here are perfect\n\nrnorm(10)\n\n [1]  0.32076290 -0.27356519  1.32280634 -0.53182529 -0.36214646  0.30805779\n [7]  0.53618050 -0.66224235 -0.04290013  0.07816006\n\n\n\n\n\nReusehttps://creativecommons.org/licenses/by/4.0/"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#back-to-the-flights",
    "href": "slides/2024-01-18-db-etc.html#back-to-the-flights",
    "title": "SQL Extras",
    "section": "Back to the flights",
    "text": "Back to the flights\nThe examples below use the airlines database, including the flights, carriers, airports, and planes tables."
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#keys",
    "href": "slides/2024-01-18-db-etc.html#keys",
    "title": "SQL Extras",
    "section": "KEYs",
    "text": "KEYs\nKeys are unique identifiers for each row, used primarily for connecting tables. Keys are generally not helpful for efficiency, but they are important for data integrity and relationships between tables. A key is a pointer that identifies a record. In practice, a key is one or more columns that are earmarked to uniquely identify a record in a table. Keys serve two main purposes:\n\nThey provide constraints on the column such as that it can’t store duplicate or null values.\nThey are also used to generate relationships among different tables."
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#indexes",
    "href": "slides/2024-01-18-db-etc.html#indexes",
    "title": "SQL Extras",
    "section": "INDEXes",
    "text": "INDEXes\n\nBy indexing the rows, SQL is able to optimize sorting and joining tables.\nThe index is created in advance (when the table is created) and saved to disk, which can take up substantial space on the disk.\nSometimes more than one variable is used to index the table.\nThere are trade-offs to having a lot of indexes (disk space but fast wrangling) versus a few indexes (slow wrangling but less space).\nA table may have more than one index but you shouldn’t add indexes to every column in a table, as these have to be updated for every addition/update/delete to the column.\nIndexes should be added to columns that are frequently included in queries."
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#show-indexes",
    "href": "slides/2024-01-18-db-etc.html#show-indexes",
    "title": "SQL Extras",
    "section": "SHOW INDEXES",
    "text": "SHOW INDEXES\nNotice that the planes table has a single PRIMARY key. That primary key is used to index the table. The flights table has no PRIMARY key, but it does have six different indexes: Year, Date, Origin, Dest, Carrier, and tailNum.\n\nSHOW INDEXES FROM planes;\n\n\n\n\n1 records\n\n\n\n\nTable\n\n\nNon_unique\n\n\nKey_name\n\n\nSeq_in_index\n\n\nColumn_name\n\n\nCollation\n\n\nCardinality\n\n\nSub_part\n\n\nPacked\n\n\nNull\n\n\nIndex_type\n\n\nComment\n\n\nIndex_comment\n\n\n\n\n\n\nplanes\n\n\n0\n\n\nPRIMARY\n\n\n1\n\n\ntailnum\n\n\nA\n\n\n3322\n\n\n\n\n\n\n\n\nBTREE\n\n\n\n\n\n\n\n\n\n\n\n\nSHOW INDEXES FROM flights;\n\n\n\n\n8 records\n\n\n\n\nTable\n\n\nNon_unique\n\n\nKey_name\n\n\nSeq_in_index\n\n\nColumn_name\n\n\nCollation\n\n\nCardinality\n\n\nSub_part\n\n\nPacked\n\n\nNull\n\n\nIndex_type\n\n\nComment\n\n\nIndex_comment\n\n\n\n\n\n\nflights\n\n\n1\n\n\nYear\n\n\n1\n\n\nyear\n\n\nA\n\n\n7\n\n\n\n\n\n\nYES\n\n\nBTREE\n\n\n\n\n\n\n\n\nflights\n\n\n1\n\n\nDate\n\n\n1\n\n\nyear\n\n\nA\n\n\n7\n\n\n\n\n\n\nYES\n\n\nBTREE\n\n\n\n\n\n\n\n\nflights\n\n\n1\n\n\nDate\n\n\n2\n\n\nmonth\n\n\nA\n\n\n89\n\n\n\n\n\n\nYES\n\n\nBTREE\n\n\n\n\n\n\n\n\nflights\n\n\n1\n\n\nDate\n\n\n3\n\n\nday\n\n\nA\n\n\n2712\n\n\n\n\n\n\nYES\n\n\nBTREE\n\n\n\n\n\n\n\n\nflights\n\n\n1\n\n\nOrigin\n\n\n1\n\n\norigin\n\n\nA\n\n\n2267\n\n\n\n\n\n\n\n\nBTREE\n\n\n\n\n\n\n\n\nflights\n\n\n1\n\n\nDest\n\n\n1\n\n\ndest\n\n\nA\n\n\n2267\n\n\n\n\n\n\n\n\nBTREE\n\n\n\n\n\n\n\n\nflights\n\n\n1\n\n\nCarrier\n\n\n1\n\n\ncarrier\n\n\nA\n\n\n134\n\n\n\n\n\n\n\n\nBTREE\n\n\n\n\n\n\n\n\nflights\n\n\n1\n\n\ntailNum\n\n\n1\n\n\ntailnum\n\n\nA\n\n\n37862\n\n\n\n\n\n\nYES\n\n\nBTREE"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#show-indexes-1",
    "href": "slides/2024-01-18-db-etc.html#show-indexes-1",
    "title": "SQL Extras",
    "section": "SHOW INDEXES",
    "text": "SHOW INDEXES\nThe values output by SHOW INDEXES are:1\n\nTable: The name of the table.\nNon_unique: 0 if the index cannot contain duplicates, 1 if it can.\nKey_name: The name of the index. If the index is the primary key, the name is always PRIMARY.\nSeq_in_index: The column sequence number in the index, starting with 1.\nColumn_name: The column name. See also the description for the Expression column.\nCollation: How the column is sorted in the index. This can have values A (ascending), D (descending), or NULL (not sorted).\nCardinality: An estimate of the number of unique values in the index.\nSub_part: The index prefix. That is, the number of indexed characters if the column is only partly indexed, NULL if the entire column is indexed.\nPacked: Indicates how the key is packed. NULL if it is not.\nNull: Contains YES if the column may contain NULL values and ’’ if not.\nIndex_type: The index method used (BTREE, FULLTEXT, HASH, RTREE).\nComment: Information about the index not described in its own column, such as disabled if the index is disabled.\nIndex_comment: Any comment provided for the index with a COMMENT attribute when the index was created.\n\nTaken from: https://dev.mysql.com/doc/refman/8.0/en/show-index.html"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#querying-quickly",
    "href": "slides/2024-01-18-db-etc.html#querying-quickly",
    "title": "SQL Extras",
    "section": "Querying quickly",
    "text": "Querying quickly\nIndexes are built to accommodate the specific queries that are most likely to be run. However, you might not know which queries are going to be run, so it isn’t always obviously how to index a table.\n\nSHOW INDEXES FROM flights;\n\n\n\n\n8 records\n\n\n\n\nTable\n\n\nNon_unique\n\n\nKey_name\n\n\nSeq_in_index\n\n\nColumn_name\n\n\nCollation\n\n\nCardinality\n\n\nSub_part\n\n\nPacked\n\n\nNull\n\n\nIndex_type\n\n\nComment\n\n\nIndex_comment\n\n\n\n\n\n\nflights\n\n\n1\n\n\nYear\n\n\n1\n\n\nyear\n\n\nA\n\n\n7\n\n\n\n\n\n\nYES\n\n\nBTREE\n\n\n\n\n\n\n\n\nflights\n\n\n1\n\n\nDate\n\n\n1\n\n\nyear\n\n\nA\n\n\n7\n\n\n\n\n\n\nYES\n\n\nBTREE\n\n\n\n\n\n\n\n\nflights\n\n\n1\n\n\nDate\n\n\n2\n\n\nmonth\n\n\nA\n\n\n89\n\n\n\n\n\n\nYES\n\n\nBTREE\n\n\n\n\n\n\n\n\nflights\n\n\n1\n\n\nDate\n\n\n3\n\n\nday\n\n\nA\n\n\n2712\n\n\n\n\n\n\nYES\n\n\nBTREE\n\n\n\n\n\n\n\n\nflights\n\n\n1\n\n\nOrigin\n\n\n1\n\n\norigin\n\n\nA\n\n\n2267\n\n\n\n\n\n\n\n\nBTREE\n\n\n\n\n\n\n\n\nflights\n\n\n1\n\n\nDest\n\n\n1\n\n\ndest\n\n\nA\n\n\n2267\n\n\n\n\n\n\n\n\nBTREE\n\n\n\n\n\n\n\n\nflights\n\n\n1\n\n\nCarrier\n\n\n1\n\n\ncarrier\n\n\nA\n\n\n134\n\n\n\n\n\n\n\n\nBTREE\n\n\n\n\n\n\n\n\nflights\n\n\n1\n\n\ntailNum\n\n\n1\n\n\ntailnum\n\n\nA\n\n\n37862\n\n\n\n\n\n\nYES\n\n\nBTREE"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#explain-with-distance",
    "href": "slides/2024-01-18-db-etc.html#explain-with-distance",
    "title": "SQL Extras",
    "section": "EXPLAIN with distance",
    "text": "EXPLAIN with distance\nEXPLAIN communicates how onerous the query is, without actually running it—saving you the time of having to wait for it to execute.\n\nEXPLAIN SELECT * FROM flights WHERE distance &gt; 3000;\n\n\n\n\n1 records\n\n\n\n\nid\n\n\nselect_type\n\n\ntable\n\n\npartitions\n\n\ntype\n\n\npossible_keys\n\n\nkey\n\n\nkey_len\n\n\nref\n\n\nrows\n\n\nfiltered\n\n\nExtra\n\n\n\n\n\n\n1\n\n\nSIMPLE\n\n\nflights\n\n\np1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12,p13,p14,p15,p16,p17,p18,p19,p20,p21,p22,p23,p24,p25,p26,p27,p28,p29,p30,p31,p32\n\n\nALL\n\n\n\n\n\n\n\n\n\n\n47932811\n\n\n33.3\n\n\nUsing where\n\n\n\n\n\n\n\nIf we were to run a query for long flights using the distance column the server will have to inspect each of the 48 million rows, because distance is not indexed. A query on a non-indexed variable is the slowest possible search and is often called a table scan. The 48 million number that you see in the rows column is an estimate of the number of rows that MySQL will have to consult in order to process your query. In general, more rows mean a slower query."
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#explain-with-year",
    "href": "slides/2024-01-18-db-etc.html#explain-with-year",
    "title": "SQL Extras",
    "section": "EXPLAIN with year",
    "text": "EXPLAIN with year\nA search for recent flights using the year column, which has an index built on it, considers many fewer rows (about 6.3 million, those flights in 2013).\n\nEXPLAIN SELECT * FROM flights WHERE year = 2013;\n\n\n\n\n1 records\n\n\n\n\nid\n\n\nselect_type\n\n\ntable\n\n\npartitions\n\n\ntype\n\n\npossible_keys\n\n\nkey\n\n\nkey_len\n\n\nref\n\n\nrows\n\n\nfiltered\n\n\nExtra\n\n\n\n\n\n\n1\n\n\nSIMPLE\n\n\nflights\n\n\np27\n\n\nALL\n\n\nYear,Date\n\n\n\n\n\n\n\n\n6369482\n\n\n100\n\n\nUsing where"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#explain-with-year-and-month",
    "href": "slides/2024-01-18-db-etc.html#explain-with-year-and-month",
    "title": "SQL Extras",
    "section": "EXPLAIN with year and month",
    "text": "EXPLAIN with year and month\nIn a search by year and month, SQL uses the Date index. Only 700,000 rows are searched, those in June of 2013.\n\nEXPLAIN SELECT * FROM flights WHERE year = 2013 AND month = 6;\n\n\n\n\n1 records\n\n\n\n\nid\n\n\nselect_type\n\n\ntable\n\n\npartitions\n\n\ntype\n\n\npossible_keys\n\n\nkey\n\n\nkey_len\n\n\nref\n\n\nrows\n\n\nfiltered\n\n\nExtra\n\n\n\n\n\n\n1\n\n\nSIMPLE\n\n\nflights\n\n\np27\n\n\nref\n\n\nYear,Date\n\n\nDate\n\n\n6\n\n\nconst,const\n\n\n714535\n\n\n100"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#explain-with-month",
    "href": "slides/2024-01-18-db-etc.html#explain-with-month",
    "title": "SQL Extras",
    "section": "EXPLAIN with month",
    "text": "EXPLAIN with month\nIf we search for particular months across all years, the indexing does not help at all. The query results in a table scan.\n\nEXPLAIN SELECT * FROM flights WHERE month = 6;\n\n\n\n\n1 records\n\n\n\n\nid\n\n\nselect_type\n\n\ntable\n\n\npartitions\n\n\ntype\n\n\npossible_keys\n\n\nkey\n\n\nkey_len\n\n\nref\n\n\nrows\n\n\nfiltered\n\n\nExtra\n\n\n\n\n\n\n1\n\n\nSIMPLE\n\n\nflights\n\n\np1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12,p13,p14,p15,p16,p17,p18,p19,p20,p21,p22,p23,p24,p25,p26,p27,p28,p29,p30,p31,p32\n\n\nALL\n\n\n\n\n\n\n\n\n\n\n47932811\n\n\n10\n\n\nUsing where\n\n\n\n\n\n\n\nAlthough month is part of the Date index, it is the second column in the index, and thus it doesn’t help us when we aren’t filtering on year. Thus, if it were common for our users to search on month without year, it would probably be worth building an index on month. Were we to actually run these queries, there would be a significant difference in computational time."
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#explain-with-join---faster",
    "href": "slides/2024-01-18-db-etc.html#explain-with-join---faster",
    "title": "SQL Extras",
    "section": "EXPLAIN with JOIN - faster",
    "text": "EXPLAIN with JOIN - faster\nThe cardinality of the index on tailnum is large (the number of rows in flights associated with each unique value of tailnum is small).\n\nEXPLAIN \n  SELECT * FROM planes p \n  LEFT JOIN flights o ON p.tailnum = o.TailNum\n  WHERE manufacturer = 'BOEING';\n\n\n\n\n2 records\n\n\n\n\nid\n\n\nselect_type\n\n\ntable\n\n\npartitions\n\n\ntype\n\n\npossible_keys\n\n\nkey\n\n\nkey_len\n\n\nref\n\n\nrows\n\n\nfiltered\n\n\nExtra\n\n\n\n\n\n\n1\n\n\nSIMPLE\n\n\np\n\n\n\n\nALL\n\n\n\n\n\n\n\n\n\n\n3322\n\n\n10\n\n\nUsing where\n\n\n\n\n1\n\n\nSIMPLE\n\n\no\n\n\np1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12,p13,p14,p15,p16,p17,p18,p19,p20,p21,p22,p23,p24,p25,p26,p27,p28,p29,p30,p31,p32\n\n\nref\n\n\ntailNum\n\n\ntailNum\n\n\n9\n\n\nairlines.p.tailnum\n\n\n1266\n\n\n100"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#explain-with-join---slower",
    "href": "slides/2024-01-18-db-etc.html#explain-with-join---slower",
    "title": "SQL Extras",
    "section": "EXPLAIN with JOIN - slower",
    "text": "EXPLAIN with JOIN - slower\n\nThe cardinality of the index on year is small (the number of rows in flights associated with each unique year is large).\n\n\nEXPLAIN \n  SELECT * FROM planes p \n  LEFT JOIN flights o ON p.Year = o.Year\n  WHERE manufacturer = 'BOEING';\n\n\n\n\n2 records\n\n\n\n\nid\n\n\nselect_type\n\n\ntable\n\n\npartitions\n\n\ntype\n\n\npossible_keys\n\n\nkey\n\n\nkey_len\n\n\nref\n\n\nrows\n\n\nfiltered\n\n\nExtra\n\n\n\n\n\n\n1\n\n\nSIMPLE\n\n\np\n\n\n\n\nALL\n\n\n\n\n\n\n\n\n\n\n3322\n\n\n10\n\n\nUsing where\n\n\n\n\n1\n\n\nSIMPLE\n\n\no\n\n\np1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12,p13,p14,p15,p16,p17,p18,p19,p20,p21,p22,p23,p24,p25,p26,p27,p28,p29,p30,p31,p32\n\n\nref\n\n\nYear,Date\n\n\nYear\n\n\n3\n\n\nairlines.p.year\n\n\n6450117\n\n\n100\n\n\nUsing where"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#sql-in-dbplyr",
    "href": "slides/2024-01-18-db-etc.html#sql-in-dbplyr",
    "title": "SQL Extras",
    "section": "SQL in dbplyr",
    "text": "SQL in dbplyr\nAs mentioned previously, dbplyr doesn’t translate every R command into SQL. After all, SQL is not a statistical software and doesn’t, for example, have a mechanism for creating data visualizations. To track which R commands are connected to SQL see the dbplyr reference sheet."
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#median",
    "href": "slides/2024-01-18-db-etc.html#median",
    "title": "SQL Extras",
    "section": "Median",
    "text": "Median\nLet’s start with an example, calculating the median altitude in the airports table.1\n\nairports &lt;- tbl(con_air, \"airports\")\n\nhead(airports)\n\n# Source:   SQL [6 x 9]\n# Database: mysql  [mdsr_public@mdsr.cdc7tgkkqd0n.us-east-1.rds.amazonaws.com:NA/airlines]\n  faa   name                           lat   lon   alt    tz dst   city  country\n  &lt;chr&gt; &lt;chr&gt;                        &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;  \n1 04G   Lansdowne Airport             41.1 -80.6  1044    -5 A     Youn… United…\n2 06A   Moton Field Municipal Airpo…  32.5 -85.7   264    -6 A     Tusk… United…\n3 06C   Schaumburg Regional           42.0 -88.1   801    -6 A     Scha… United…\n4 06N   Randall Airport               41.4 -74.4   523    -5 A     Midd… United…\n5 09J   Jekyll Island Airport         31.1 -81.4    11    -5 A     Jeky… United…\n6 0A9   Elizabethton Municipal Airp…  36.4 -82.2  1593    -5 A     Eliz… United…\n\n\nExample taken from: https://sebhastian.com/mysql-median/"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#median-1",
    "href": "slides/2024-01-18-db-etc.html#median-1",
    "title": "SQL Extras",
    "section": "Median",
    "text": "Median\nIt looks like show_query() is providing SQL code for calculating the median!\n\nmedian_query &lt;- airports |&gt;\n  summarize(med_alt = median(alt, na.rm = TRUE))\n\nshow_query(median_query)\n\n&lt;SQL&gt;\nSELECT PERCENTILE_CONT(0.5) WITHIN GROUP (ORDER BY `alt`) AS `med_alt`\nFROM `airports`"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#median-2",
    "href": "slides/2024-01-18-db-etc.html#median-2",
    "title": "SQL Extras",
    "section": "Median",
    "text": "Median\nBut when the SQL code is run, it doesn’t seem to work.\n\nSELECT PERCENTILE_CONT(0.5) WITHIN GROUP (ORDER BY `alt`) AS `med_alt`\nFROM `airports`;\n\nError: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'GROUP (ORDER BY `alt`) AS `med_alt`\nFROM `airports`' at line 1 [1064]"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#median-3",
    "href": "slides/2024-01-18-db-etc.html#median-3",
    "title": "SQL Extras",
    "section": "Median",
    "text": "Median\nWhat happens when we computer the median on the tbl?\n\nairports |&gt;\n  summarize(med_alt = median(alt, na.rm = TRUE))\n\nError in `collect()`:\n! Failed to collect lazy table.\nCaused by error:\n! You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'GROUP (ORDER BY `alt`) AS `med_alt`\nFROM `airports`\nLIMIT 7' at line 1 [1064]"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#median-4",
    "href": "slides/2024-01-18-db-etc.html#median-4",
    "title": "SQL Extras",
    "section": "Median",
    "text": "Median\nHow can the median be calculated in SQL?\n\nSET @row_index := -1;\n\n\nSELECT AVG(subquery.alt) AS median_value\nFROM (\nSELECT @row_index:=@row_index + 1 AS row_index, alt\n  FROM airports\n  ORDER BY alt\n) AS subquery\nWHERE subquery.row_index IN (FLOOR(@row_index / 2), CEIL(@row_index / 2));\n\n\n\n\n1 records\n\n\n\n\nmedian_value\n\n\n\n\n\n\n476"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#median-5",
    "href": "slides/2024-01-18-db-etc.html#median-5",
    "title": "SQL Extras",
    "section": "Median",
    "text": "Median\nLet’s break down what the code is doing… First, set the row_index to -1 and iterate through by adding +1 for each row. Then concatenate the row_index information onto our table of interest. (Basically, create a column that gives a row value to the dataset, sorted by altitude.)\n\nSET @row_index := -1;\n\n\nSELECT @row_index:=@row_index + 1 AS row_index, alt\n  FROM airports\n  ORDER BY alt\n  LIMIT 10;\n\n\n\n\nDisplaying records 1 - 10\n\n\n\n\nrow_index\n\n\nalt\n\n\n\n\n\n\n0\n\n\n-54\n\n\n\n\n1\n\n\n-42\n\n\n\n\n2\n\n\n0\n\n\n\n\n3\n\n\n0\n\n\n\n\n4\n\n\n0\n\n\n\n\n5\n\n\n0\n\n\n\n\n6\n\n\n0\n\n\n\n\n7\n\n\n0\n\n\n\n\n8\n\n\n0\n\n\n\n\n9\n\n\n0"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#median-6",
    "href": "slides/2024-01-18-db-etc.html#median-6",
    "title": "SQL Extras",
    "section": "Median",
    "text": "Median\nNext, filter the data to include only the middle row or two rows.\n\nSET @row_index := -1;\n\n\nSELECT *\nFROM (\nSELECT @row_index:=@row_index + 1 AS row_index, alt\n  FROM airports\n  ORDER BY alt\n) AS subquery\nWHERE subquery.row_index IN (FLOOR(@row_index / 2), CEIL(@row_index / 2));\n\n\n\n\n2 records\n\n\n\n\nrow_index\n\n\nalt\n\n\n\n\n\n\n728\n\n\n474\n\n\n\n\n729\n\n\n477"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#median-7",
    "href": "slides/2024-01-18-db-etc.html#median-7",
    "title": "SQL Extras",
    "section": "Median",
    "text": "Median\nThe last step is to average the middle row(s). If only one row is pulled out in the previous query, then only one row will be averaged (which the computer does happily).\n\nSET @row_index := -1;\n\n\nSELECT AVG(subquery.alt) AS median_value\nFROM (\nSELECT @row_index:=@row_index + 1 AS row_index, alt\n  FROM airports\n  ORDER BY alt\n) AS subquery\nWHERE subquery.row_index IN (FLOOR(@row_index / 2), CEIL(@row_index / 2));\n\n\n\n\n1 records\n\n\n\n\nmedian_value\n\n\n\n\n\n\n476"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#case-when-and-ifelse",
    "href": "slides/2024-01-18-db-etc.html#case-when-and-ifelse",
    "title": "SQL Extras",
    "section": "CASE WHEN and ifelse()",
    "text": "CASE WHEN and ifelse()\nConsider the various R functions that create new variables based on an original variable.\n\nairports |&gt;\n  mutate(sea = ifelse(alt &gt; 500, \"above sea\", \"near sea\")) |&gt;\n  head(5)\n\n# Source:   SQL [5 x 10]\n# Database: mysql  [mdsr_public@mdsr.cdc7tgkkqd0n.us-east-1.rds.amazonaws.com:NA/airlines]\n  faa   name                     lat   lon   alt    tz dst   city  country sea  \n  &lt;chr&gt; &lt;chr&gt;                  &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;\n1 04G   Lansdowne Airport       41.1 -80.6  1044    -5 A     Youn… United… abov…\n2 06A   Moton Field Municipal…  32.5 -85.7   264    -6 A     Tusk… United… near…\n3 06C   Schaumburg Regional     42.0 -88.1   801    -6 A     Scha… United… abov…\n4 06N   Randall Airport         41.4 -74.4   523    -5 A     Midd… United… abov…\n5 09J   Jekyll Island Airport   31.1 -81.4    11    -5 A     Jeky… United… near…"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#case-when-and-ifelse-1",
    "href": "slides/2024-01-18-db-etc.html#case-when-and-ifelse-1",
    "title": "SQL Extras",
    "section": "CASE WHEN and ifelse()",
    "text": "CASE WHEN and ifelse()\n\nif_query &lt;- airports |&gt;\n  mutate(sea = ifelse(alt &gt; 500, \"above sea\", \"near sea\"))\n\nshow_query(if_query)\n\n&lt;SQL&gt;\nSELECT\n  *,\n  CASE WHEN (`alt` &gt; 500.0) THEN 'above sea' WHEN NOT (`alt` &gt; 500.0) THEN 'near sea' END AS `sea`\nFROM `airports`"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#case-when-and-ifelse-2",
    "href": "slides/2024-01-18-db-etc.html#case-when-and-ifelse-2",
    "title": "SQL Extras",
    "section": "CASE WHEN and ifelse()",
    "text": "CASE WHEN and ifelse()\n\nSELECT *,\nCASE WHEN (`alt` &gt; 500.0) THEN 'above sea' WHEN NOT (`alt` &gt; 500.0) THEN 'near sea' END AS `sea`\nFROM `airports` \nLIMIT 5;\n\n\n\n\n5 records\n\n\n\n\nfaa\n\n\nname\n\n\nlat\n\n\nlon\n\n\nalt\n\n\ntz\n\n\ndst\n\n\ncity\n\n\ncountry\n\n\nsea\n\n\n\n\n\n\n04G\n\n\nLansdowne Airport\n\n\n41.1\n\n\n-80.6\n\n\n1044\n\n\n-5\n\n\nA\n\n\nYoungstown\n\n\nUnited States\n\n\nabove sea\n\n\n\n\n06A\n\n\nMoton Field Municipal Airport\n\n\n32.5\n\n\n-85.7\n\n\n264\n\n\n-6\n\n\nA\n\n\nTuskegee\n\n\nUnited States\n\n\nnear sea\n\n\n\n\n06C\n\n\nSchaumburg Regional\n\n\n42.0\n\n\n-88.1\n\n\n801\n\n\n-6\n\n\nA\n\n\nSchaumburg\n\n\nUnited States\n\n\nabove sea\n\n\n\n\n06N\n\n\nRandall Airport\n\n\n41.4\n\n\n-74.4\n\n\n523\n\n\n-5\n\n\nA\n\n\nMiddletown\n\n\nUnited States\n\n\nabove sea\n\n\n\n\n09J\n\n\nJekyll Island Airport\n\n\n31.1\n\n\n-81.4\n\n\n11\n\n\n-5\n\n\nA\n\n\nJekyll Island\n\n\nUnited States\n\n\nnear sea"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#other-functions",
    "href": "slides/2024-01-18-db-etc.html#other-functions",
    "title": "SQL Extras",
    "section": "Other functions",
    "text": "Other functions\ndistinct() / head()"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#case-when-and-case_when",
    "href": "slides/2024-01-18-db-etc.html#case-when-and-case_when",
    "title": "SQL Extras",
    "section": "CASE WHEN and case_when()",
    "text": "CASE WHEN and case_when()\n\nairports |&gt;\n  mutate(sea = case_when(\n    alt &lt; 500 ~ \"near sea\",\n    alt &lt; 2000 ~ \"low alt\",\n    alt &lt; 3000 ~ \"mod alt\",\n    alt &lt; 5500 ~ \"high alt\",\n    alt &gt; 5500 ~ \"extreme alt\")) |&gt;\n  head(5)\n\n# Source:   SQL [5 x 10]\n# Database: mysql  [mdsr_public@mdsr.cdc7tgkkqd0n.us-east-1.rds.amazonaws.com:NA/airlines]\n  faa   name                     lat   lon   alt    tz dst   city  country sea  \n  &lt;chr&gt; &lt;chr&gt;                  &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;\n1 04G   Lansdowne Airport       41.1 -80.6  1044    -5 A     Youn… United… low …\n2 06A   Moton Field Municipal…  32.5 -85.7   264    -6 A     Tusk… United… near…\n3 06C   Schaumburg Regional     42.0 -88.1   801    -6 A     Scha… United… low …\n4 06N   Randall Airport         41.4 -74.4   523    -5 A     Midd… United… low …\n5 09J   Jekyll Island Airport   31.1 -81.4    11    -5 A     Jeky… United… near…"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#case-when-and-case_when-1",
    "href": "slides/2024-01-18-db-etc.html#case-when-and-case_when-1",
    "title": "SQL Extras",
    "section": "CASE WHEN and case_when()",
    "text": "CASE WHEN and case_when()\n\ncw_query &lt;- airports |&gt;\n  mutate(sea = case_when(\n    alt &lt; 500 ~ \"near sea\",\n    alt &lt; 2000 ~ \"low alt\",\n    alt &lt; 3000 ~ \"mod alt\",\n    alt &lt; 5500 ~ \"high alt\",\n    alt &gt; 5500 ~ \"extreme alt\"))\n\nshow_query(cw_query)\n\n&lt;SQL&gt;\nSELECT\n  *,\n  CASE\nWHEN (`alt` &lt; 500.0) THEN 'near sea'\nWHEN (`alt` &lt; 2000.0) THEN 'low alt'\nWHEN (`alt` &lt; 3000.0) THEN 'mod alt'\nWHEN (`alt` &lt; 5500.0) THEN 'high alt'\nWHEN (`alt` &gt; 5500.0) THEN 'extreme alt'\nEND AS `sea`\nFROM `airports`"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#case-when-and-case_when-2",
    "href": "slides/2024-01-18-db-etc.html#case-when-and-case_when-2",
    "title": "SQL Extras",
    "section": "CASE WHEN and case_when()",
    "text": "CASE WHEN and case_when()\n\nSELECT\n  *,\n  CASE\nWHEN (`alt` &lt; 500.0) THEN 'near sea'\nWHEN (`alt` &lt; 2000.0) THEN 'low alt'\nWHEN (`alt` &lt; 3000.0) THEN 'mod alt'\nWHEN (`alt` &lt; 5500.0) THEN 'high alt'\nWHEN (`alt` &gt; 5500.0) THEN 'extreme alt'\nEND AS `sea`\nFROM `airports`\nLIMIT 5;\n\n\n\n\n5 records\n\n\n\n\nfaa\n\n\nname\n\n\nlat\n\n\nlon\n\n\nalt\n\n\ntz\n\n\ndst\n\n\ncity\n\n\ncountry\n\n\nsea\n\n\n\n\n\n\n04G\n\n\nLansdowne Airport\n\n\n41.1\n\n\n-80.6\n\n\n1044\n\n\n-5\n\n\nA\n\n\nYoungstown\n\n\nUnited States\n\n\nlow alt\n\n\n\n\n06A\n\n\nMoton Field Municipal Airport\n\n\n32.5\n\n\n-85.7\n\n\n264\n\n\n-6\n\n\nA\n\n\nTuskegee\n\n\nUnited States\n\n\nnear sea\n\n\n\n\n06C\n\n\nSchaumburg Regional\n\n\n42.0\n\n\n-88.1\n\n\n801\n\n\n-6\n\n\nA\n\n\nSchaumburg\n\n\nUnited States\n\n\nlow alt\n\n\n\n\n06N\n\n\nRandall Airport\n\n\n41.4\n\n\n-74.4\n\n\n523\n\n\n-5\n\n\nA\n\n\nMiddletown\n\n\nUnited States\n\n\nlow alt\n\n\n\n\n09J\n\n\nJekyll Island Airport\n\n\n31.1\n\n\n-81.4\n\n\n11\n\n\n-5\n\n\nA\n\n\nJekyll Island\n\n\nUnited States\n\n\nnear sea"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#case-when-and-cut",
    "href": "slides/2024-01-18-db-etc.html#case-when-and-cut",
    "title": "SQL Extras",
    "section": "CASE WHEN and cut()",
    "text": "CASE WHEN and cut()\n\nairports |&gt;\n  mutate(sea = cut(\n    alt,\n    breaks = c(-Inf, 500, 2000, 3000, 5500, Inf),\n    labels = c(\"near sea\", \"low alt\", \"mod alt\", \"high alt\", \"extreme alt\")\n  )\n)|&gt;\n  head(5)\n\n# Source:   SQL [5 x 10]\n# Database: mysql  [mdsr_public@mdsr.cdc7tgkkqd0n.us-east-1.rds.amazonaws.com:NA/airlines]\n  faa   name                     lat   lon   alt    tz dst   city  country sea  \n  &lt;chr&gt; &lt;chr&gt;                  &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;\n1 04G   Lansdowne Airport       41.1 -80.6  1044    -5 A     Youn… United… low …\n2 06A   Moton Field Municipal…  32.5 -85.7   264    -6 A     Tusk… United… near…\n3 06C   Schaumburg Regional     42.0 -88.1   801    -6 A     Scha… United… low …\n4 06N   Randall Airport         41.4 -74.4   523    -5 A     Midd… United… low …\n5 09J   Jekyll Island Airport   31.1 -81.4    11    -5 A     Jeky… United… near…"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#case-when-and-case_when-3",
    "href": "slides/2024-01-18-db-etc.html#case-when-and-case_when-3",
    "title": "SQL Extras",
    "section": "CASE WHEN and case_when()",
    "text": "CASE WHEN and case_when()\n\ncw_query &lt;- airports |&gt;\n  mutate(sea = cut(\n    alt,\n    breaks = c(-Inf, 500, 2000, 3000, 5500, Inf),\n    labels = c(\"near sea\", \"low alt\", \"mod alt\", \"high alt\", \"extreme alt\")\n  )\n)\n\nshow_query(cw_query)\n\n&lt;SQL&gt;\nSELECT\n  *,\n  CASE\nWHEN (`alt` &lt;= 500.0) THEN 'near sea'\nWHEN (`alt` &lt;= 2000.0) THEN 'low alt'\nWHEN (`alt` &lt;= 3000.0) THEN 'mod alt'\nWHEN (`alt` &lt;= 5500.0) THEN 'high alt'\nWHEN (`alt` &gt; 5500.0) THEN 'extreme alt'\nEND AS `sea`\nFROM `airports`"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#case-when-and-case_when-4",
    "href": "slides/2024-01-18-db-etc.html#case-when-and-case_when-4",
    "title": "SQL Extras",
    "section": "CASE WHEN and case_when()",
    "text": "CASE WHEN and case_when()\n\nSELECT\n  *,\n  CASE\nWHEN (`alt` &lt;= 500.0) THEN 'near sea'\nWHEN (`alt` &lt;= 2000.0) THEN 'low alt'\nWHEN (`alt` &lt;= 3000.0) THEN 'mod alt'\nWHEN (`alt` &lt;= 5500.0) THEN 'high alt'\nWHEN (`alt` &gt; 5500.0) THEN 'extreme alt'\nEND AS `sea`\nFROM `airports`\nLIMIT 5;\n\n\n\n\n5 records\n\n\n\n\nfaa\n\n\nname\n\n\nlat\n\n\nlon\n\n\nalt\n\n\ntz\n\n\ndst\n\n\ncity\n\n\ncountry\n\n\nsea\n\n\n\n\n\n\n04G\n\n\nLansdowne Airport\n\n\n41.1\n\n\n-80.6\n\n\n1044\n\n\n-5\n\n\nA\n\n\nYoungstown\n\n\nUnited States\n\n\nlow alt\n\n\n\n\n06A\n\n\nMoton Field Municipal Airport\n\n\n32.5\n\n\n-85.7\n\n\n264\n\n\n-6\n\n\nA\n\n\nTuskegee\n\n\nUnited States\n\n\nnear sea\n\n\n\n\n06C\n\n\nSchaumburg Regional\n\n\n42.0\n\n\n-88.1\n\n\n801\n\n\n-6\n\n\nA\n\n\nSchaumburg\n\n\nUnited States\n\n\nlow alt\n\n\n\n\n06N\n\n\nRandall Airport\n\n\n41.4\n\n\n-74.4\n\n\n523\n\n\n-5\n\n\nA\n\n\nMiddletown\n\n\nUnited States\n\n\nlow alt\n\n\n\n\n09J\n\n\nJekyll Island Airport\n\n\n31.1\n\n\n-81.4\n\n\n11\n\n\n-5\n\n\nA\n\n\nJekyll Island\n\n\nUnited States\n\n\nnear sea"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#distinct",
    "href": "slides/2024-01-18-db-etc.html#distinct",
    "title": "SQL Extras",
    "section": "distinct()",
    "text": "distinct()\nHow many distinct time zones are there in the airports table?\n\nairports |&gt;\n  select(tz) |&gt;\n  distinct()\n\n# Source:   SQL [?? x 1]\n# Database: mysql  [mdsr_public@mdsr.cdc7tgkkqd0n.us-east-1.rds.amazonaws.com:NA/airlines]\n     tz\n  &lt;int&gt;\n1    -5\n2    -6\n3    -8\n4    -7\n5    -9\n6   -10\n# ℹ more rows"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#distinct-1",
    "href": "slides/2024-01-18-db-etc.html#distinct-1",
    "title": "SQL Extras",
    "section": "distinct()",
    "text": "distinct()\nHow many distinct time zones are there in the airports table?\n\ndist_query &lt;- airports |&gt;\n  select(tz) |&gt;\n  distinct()\n\nshow_query(dist_query)\n\n&lt;SQL&gt;\nSELECT DISTINCT `tz`\nFROM `airports`"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#distinct-2",
    "href": "slides/2024-01-18-db-etc.html#distinct-2",
    "title": "SQL Extras",
    "section": "distinct()",
    "text": "distinct()\nHow many distinct time zones are there in the airports table?\n\nSELECT DISTINCT `tz`\nFROM `airports`;\n\n\n\n\n7 records\n\n\n\n\ntz\n\n\n\n\n\n\n-5\n\n\n\n\n-6\n\n\n\n\n-8\n\n\n\n\n-7\n\n\n\n\n-9\n\n\n\n\n-10\n\n\n\n\n8"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#limit-as-head",
    "href": "slides/2024-01-18-db-etc.html#limit-as-head",
    "title": "SQL Extras",
    "section": "LIMIT as head()",
    "text": "LIMIT as head()\n\nairports |&gt;\n  head(5)\n\n# Source:   SQL [5 x 9]\n# Database: mysql  [mdsr_public@mdsr.cdc7tgkkqd0n.us-east-1.rds.amazonaws.com:NA/airlines]\n  faa   name                           lat   lon   alt    tz dst   city  country\n  &lt;chr&gt; &lt;chr&gt;                        &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;  \n1 04G   Lansdowne Airport             41.1 -80.6  1044    -5 A     Youn… United…\n2 06A   Moton Field Municipal Airpo…  32.5 -85.7   264    -6 A     Tusk… United…\n3 06C   Schaumburg Regional           42.0 -88.1   801    -6 A     Scha… United…\n4 06N   Randall Airport               41.4 -74.4   523    -5 A     Midd… United…\n5 09J   Jekyll Island Airport         31.1 -81.4    11    -5 A     Jeky… United…"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#limit-as-head-1",
    "href": "slides/2024-01-18-db-etc.html#limit-as-head-1",
    "title": "SQL Extras",
    "section": "LIMIT as head()",
    "text": "LIMIT as head()\n\nhead_query &lt;- airports |&gt;\n  head(5)\n\nshow_query(head_query)\n\n&lt;SQL&gt;\nSELECT *\nFROM `airports`\nLIMIT 5"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#limit-as-head-2",
    "href": "slides/2024-01-18-db-etc.html#limit-as-head-2",
    "title": "SQL Extras",
    "section": "LIMIT as head()",
    "text": "LIMIT as head()\n\nSELECT *\nFROM `airports`\nLIMIT 5;\n\n\n\n\n5 records\n\n\n\n\nfaa\n\n\nname\n\n\nlat\n\n\nlon\n\n\nalt\n\n\ntz\n\n\ndst\n\n\ncity\n\n\ncountry\n\n\n\n\n\n\n04G\n\n\nLansdowne Airport\n\n\n41.1\n\n\n-80.6\n\n\n1044\n\n\n-5\n\n\nA\n\n\nYoungstown\n\n\nUnited States\n\n\n\n\n06A\n\n\nMoton Field Municipal Airport\n\n\n32.5\n\n\n-85.7\n\n\n264\n\n\n-6\n\n\nA\n\n\nTuskegee\n\n\nUnited States\n\n\n\n\n06C\n\n\nSchaumburg Regional\n\n\n42.0\n\n\n-88.1\n\n\n801\n\n\n-6\n\n\nA\n\n\nSchaumburg\n\n\nUnited States\n\n\n\n\n06N\n\n\nRandall Airport\n\n\n41.4\n\n\n-74.4\n\n\n523\n\n\n-5\n\n\nA\n\n\nMiddletown\n\n\nUnited States\n\n\n\n\n09J\n\n\nJekyll Island Airport\n\n\n31.1\n\n\n-81.4\n\n\n11\n\n\n-5\n\n\nA\n\n\nJekyll Island\n\n\nUnited States"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#ggplot",
    "href": "slides/2024-01-18-db-etc.html#ggplot",
    "title": "SQL Extras",
    "section": "ggplot()",
    "text": "ggplot()\n\nairports |&gt;\n  ggplot(aes(x = lon, y = lat)) +\n  geom_point()"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#ggplot-1",
    "href": "slides/2024-01-18-db-etc.html#ggplot-1",
    "title": "SQL Extras",
    "section": "ggplot()",
    "text": "ggplot()\n\nairports |&gt;\n  filter(lon &lt; 0) |&gt;\n  ggplot(aes(x = lon, y = lat)) +\n  geom_point()"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#ggplot-2",
    "href": "slides/2024-01-18-db-etc.html#ggplot-2",
    "title": "SQL Extras",
    "section": "ggplot()",
    "text": "ggplot()\n\ngg_query &lt;- airports |&gt;\n  filter(lon &lt; 0) |&gt;\n  ggplot(aes(x = lon, y = lat)) +\n  geom_point()\n\nshow_query(gg_query)\n\nError in UseMethod(\"show_query\"): no applicable method for 'show_query' applied to an object of class \"c('gg', 'ggplot')\""
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#case-when-and-cut-1",
    "href": "slides/2024-01-18-db-etc.html#case-when-and-cut-1",
    "title": "SQL Extras",
    "section": "CASE WHEN and cut()",
    "text": "CASE WHEN and cut()\n\ncw_query &lt;- airports |&gt;\n  mutate(sea = cut(\n    alt,\n    breaks = c(-Inf, 500, 2000, 3000, 5500, Inf),\n    labels = c(\"near sea\", \"low alt\", \"mod alt\", \"high alt\", \"extreme alt\")\n  )\n)\n\nshow_query(cw_query)\n\n&lt;SQL&gt;\nSELECT\n  *,\n  CASE\nWHEN (`alt` &lt;= 500.0) THEN 'near sea'\nWHEN (`alt` &lt;= 2000.0) THEN 'low alt'\nWHEN (`alt` &lt;= 3000.0) THEN 'mod alt'\nWHEN (`alt` &lt;= 5500.0) THEN 'high alt'\nWHEN (`alt` &gt; 5500.0) THEN 'extreme alt'\nEND AS `sea`\nFROM `airports`"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#case-when-and-cut-2",
    "href": "slides/2024-01-18-db-etc.html#case-when-and-cut-2",
    "title": "SQL Extras",
    "section": "CASE WHEN and cut()",
    "text": "CASE WHEN and cut()\n\nSELECT\n  *,\n  CASE\nWHEN (`alt` &lt;= 500.0) THEN 'near sea'\nWHEN (`alt` &lt;= 2000.0) THEN 'low alt'\nWHEN (`alt` &lt;= 3000.0) THEN 'mod alt'\nWHEN (`alt` &lt;= 5500.0) THEN 'high alt'\nWHEN (`alt` &gt; 5500.0) THEN 'extreme alt'\nEND AS `sea`\nFROM `airports`\nLIMIT 5;\n\n\n\n\n5 records\n\n\n\n\nfaa\n\n\nname\n\n\nlat\n\n\nlon\n\n\nalt\n\n\ntz\n\n\ndst\n\n\ncity\n\n\ncountry\n\n\nsea\n\n\n\n\n\n\n04G\n\n\nLansdowne Airport\n\n\n41.1\n\n\n-80.6\n\n\n1044\n\n\n-5\n\n\nA\n\n\nYoungstown\n\n\nUnited States\n\n\nlow alt\n\n\n\n\n06A\n\n\nMoton Field Municipal Airport\n\n\n32.5\n\n\n-85.7\n\n\n264\n\n\n-6\n\n\nA\n\n\nTuskegee\n\n\nUnited States\n\n\nnear sea\n\n\n\n\n06C\n\n\nSchaumburg Regional\n\n\n42.0\n\n\n-88.1\n\n\n801\n\n\n-6\n\n\nA\n\n\nSchaumburg\n\n\nUnited States\n\n\nlow alt\n\n\n\n\n06N\n\n\nRandall Airport\n\n\n41.4\n\n\n-74.4\n\n\n523\n\n\n-5\n\n\nA\n\n\nMiddletown\n\n\nUnited States\n\n\nlow alt\n\n\n\n\n09J\n\n\nJekyll Island Airport\n\n\n31.1\n\n\n-81.4\n\n\n11\n\n\n-5\n\n\nA\n\n\nJekyll Island\n\n\nUnited States\n\n\nnear sea"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#cardinality-x-rows",
    "href": "slides/2024-01-18-db-etc.html#cardinality-x-rows",
    "title": "SQL Extras",
    "section": "Cardinality x rows",
    "text": "Cardinality x rows\nThe Cardinality from SHOW INDEXES times the rows from EXPLAIN is roughly the total number of rows in the dataframe."
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#median-8",
    "href": "slides/2024-01-18-db-etc.html#median-8",
    "title": "SQL Extras",
    "section": "Median",
    "text": "Median\nTake-aways:\n\ndbplyr is not able to translate the median() function into SQL.\nThe median is actually really hard to calculate! In particular, it is hard to calculate the median in one pass through the data."
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#take-away-message",
    "href": "slides/2024-01-18-db-etc.html#take-away-message",
    "title": "SQL Extras",
    "section": "Take-away message",
    "text": "Take-away message\n\ndbplyr is awesome and can often be helpful in figuring out SQL syntax\nsometimes dbplyr will provide SQL syntax that does not work (see the median example)\nsometimes there is no SQL syntax to match the R task of interest (see ggplot)"
  },
  {
    "objectID": "slides/2024-01-18-db-etc.html#section",
    "href": "slides/2024-01-18-db-etc.html#section",
    "title": "SQL Extras",
    "section": "47",
    "text": "47\nPomona’s number is 47, and I wanted to have a 47th slide.\n\n\nFigure 1: image credit: Jo Hardin"
  },
  {
    "objectID": "syllabus.html#ds002r-fall-2024",
    "href": "syllabus.html#ds002r-fall-2024",
    "title": "syllabus",
    "section": "",
    "text": "Jo Hardin 2351 Estella jo.hardin@pomona.edu\nClass: Mondays & Wednesday, 11-12:15pm\nOffice Hours: (Estella 2351)\nMonday: 2:30-4:30pm\nTuesday: 9-11am\nThursday: 1-3pm\nMentor Sessions:\nSunday & Tuesday 6-8pm\nEstella 2141\nMentors: Maren Rusk & Julia Aceron\n\n\n\n\n\nArtwork by @allison_horst."
  },
  {
    "objectID": "LICENSE.html#creative-commons-attribution-sharealike-4.0-international-public-license",
    "href": "LICENSE.html#creative-commons-attribution-sharealike-4.0-international-public-license",
    "title": "Attribution-ShareAlike 4.0 International",
    "section": "Creative Commons Attribution-ShareAlike 4.0 International Public License",
    "text": "Creative Commons Attribution-ShareAlike 4.0 International Public License\nBy exercising the Licensed Rights (defined below), You accept and agree to be bound by the terms and conditions of this Creative Commons Attribution-ShareAlike 4.0 International Public License (“Public License”). To the extent this Public License may be interpreted as a contract, You are granted the Licensed Rights in consideration of Your acceptance of these terms and conditions, and the Licensor grants You such rights in consideration of benefits the Licensor receives from making the Licensed Material available under these terms and conditions.\n\nSection 1 – Definitions.\n\nAdapted Material means material subject to Copyright and Similar Rights that is derived from or based upon the Licensed Material and in which the Licensed Material is translated, altered, arranged, transformed, or otherwise modified in a manner requiring permission under the Copyright and Similar Rights held by the Licensor. For purposes of this Public License, where the Licensed Material is a musical work, performance, or sound recording, Adapted Material is always produced where the Licensed Material is synched in timed relation with a moving image.\nAdapter’s License means the license You apply to Your Copyright and Similar Rights in Your contributions to Adapted Material in accordance with the terms and conditions of this Public License.\nBY-SA Compatible License means a license listed at creativecommons.org/compatiblelicenses, approved by Creative Commons as essentially the equivalent of this Public License.\nCopyright and Similar Rights means copyright and/or similar rights closely related to copyright including, without limitation, performance, broadcast, sound recording, and Sui Generis Database Rights, without regard to how the rights are labeled or categorized. For purposes of this Public License, the rights specified in Section 2(b)(1)-(2) are not Copyright and Similar Rights.\nEffective Technological Measures means those measures that, in the absence of proper authority, may not be circumvented under laws fulfilling obligations under Article 11 of the WIPO Copyright Treaty adopted on December 20, 1996, and/or similar international agreements.\nExceptions and Limitations means fair use, fair dealing, and/or any other exception or limitation to Copyright and Similar Rights that applies to Your use of the Licensed Material.\nLicense Elements means the license attributes listed in the name of a Creative Commons Public License. The License Elements of this Public License are Attribution and ShareAlike.\nLicensed Material means the artistic or literary work, database, or other material to which the Licensor applied this Public License.\nLicensed Rights means the rights granted to You subject to the terms and conditions of this Public License, which are limited to all Copyright and Similar Rights that apply to Your use of the Licensed Material and that the Licensor has authority to license.\nLicensor means the individual(s) or entity(ies) granting rights under this Public License.\nShare means to provide material to the public by any means or process that requires permission under the Licensed Rights, such as reproduction, public display, public performance, distribution, dissemination, communication, or importation, and to make material available to the public including in ways that members of the public may access the material from a place and at a time individually chosen by them.\nSui Generis Database Rights means rights other than copyright resulting from Directive 96/9/EC of the European Parliament and of the Council of 11 March 1996 on the legal protection of databases, as amended and/or succeeded, as well as other essentially equivalent rights anywhere in the world.\nYou means the individual or entity exercising the Licensed Rights under this Public License. Your has a corresponding meaning.\n\n\n\nSection 2 – Scope.\n\nLicense grant.\n\nSubject to the terms and conditions of this Public License, the Licensor hereby grants You a worldwide, royalty-free, non-sublicensable, non-exclusive, irrevocable license to exercise the Licensed Rights in the Licensed Material to:\nA. reproduce and Share the Licensed Material, in whole or in part; and\nB. produce, reproduce, and Share Adapted Material.\nExceptions and Limitations. For the avoidance of doubt, where Exceptions and Limitations apply to Your use, this Public License does not apply, and You do not need to comply with its terms and conditions.\nTerm. The term of this Public License is specified in Section 6(a).\nMedia and formats; technical modifications allowed. The Licensor authorizes You to exercise the Licensed Rights in all media and formats whether now known or hereafter created, and to make technical modifications necessary to do so. The Licensor waives and/or agrees not to assert any right or authority to forbid You from making technical modifications necessary to exercise the Licensed Rights, including technical modifications necessary to circumvent Effective Technological Measures. For purposes of this Public License, simply making modifications authorized by this Section 2(a)(4) never produces Adapted Material.\nDownstream recipients.\nA. Offer from the Licensor – Licensed Material. Every recipient of the Licensed Material automatically receives an offer from the Licensor to exercise the Licensed Rights under the terms and conditions of this Public License.\nB. __Additional offer from the Licensor – Adapted Material. Every recipient of Adapted Material from You automatically receives an offer from the Licensor to exercise the Licensed Rights in the Adapted Material under the conditions of the Adapter’s License You apply.\nC. No downstream restrictions. You may not offer or impose any additional or different terms or conditions on, or apply any Effective Technological Measures to, the Licensed Material if doing so restricts exercise of the Licensed Rights by any recipient of the Licensed Material.\nNo endorsement. Nothing in this Public License constitutes or may be construed as permission to assert or imply that You are, or that Your use of the Licensed Material is, connected with, or sponsored, endorsed, or granted official status by, the Licensor or others designated to receive attribution as provided in Section 3(a)(1)(A)(i).\n\nOther rights.\n\nMoral rights, such as the right of integrity, are not licensed under this Public License, nor are publicity, privacy, and/or other similar personality rights; however, to the extent possible, the Licensor waives and/or agrees not to assert any such rights held by the Licensor to the limited extent necessary to allow You to exercise the Licensed Rights, but not otherwise.\nPatent and trademark rights are not licensed under this Public License.\nTo the extent possible, the Licensor waives any right to collect royalties from You for the exercise of the Licensed Rights, whether directly or through a collecting society under any voluntary or waivable statutory or compulsory licensing scheme. In all other cases the Licensor expressly reserves any right to collect such royalties.\n\n\n\n\nSection 3 – License Conditions.\nYour exercise of the Licensed Rights is expressly made subject to the following conditions.\n\nAttribution.\n\nIf You Share the Licensed Material (including in modified form), You must:\nA. retain the following if it is supplied by the Licensor with the Licensed Material:\n\nidentification of the creator(s) of the Licensed Material and any others designated to receive attribution, in any reasonable manner requested by the Licensor (including by pseudonym if designated);\na copyright notice;\na notice that refers to this Public License;\na notice that refers to the disclaimer of warranties;\na URI or hyperlink to the Licensed Material to the extent reasonably practicable;\n\nB. indicate if You modified the Licensed Material and retain an indication of any previous modifications; and\nC. indicate the Licensed Material is licensed under this Public License, and include the text of, or the URI or hyperlink to, this Public License.\nYou may satisfy the conditions in Section 3(a)(1) in any reasonable manner based on the medium, means, and context in which You Share the Licensed Material. For example, it may be reasonable to satisfy the conditions by providing a URI or hyperlink to a resource that includes the required information.\nIf requested by the Licensor, You must remove any of the information required by Section 3(a)(1)(A) to the extent reasonably practicable.\n\nShareAlike.\n\nIn addition to the conditions in Section 3(a), if You Share Adapted Material You produce, the following conditions also apply.\n\nThe Adapter’s License You apply must be a Creative Commons license with the same License Elements, this version or later, or a BY-SA Compatible License.\nYou must include the text of, or the URI or hyperlink to, the Adapter’s License You apply. You may satisfy this condition in any reasonable manner based on the medium, means, and context in which You Share Adapted Material.\nYou may not offer or impose any additional or different terms or conditions on, or apply any Effective Technological Measures to, Adapted Material that restrict exercise of the rights granted under the Adapter’s License You apply.\n\n\n\nSection 4 – Sui Generis Database Rights.\nWhere the Licensed Rights include Sui Generis Database Rights that apply to Your use of the Licensed Material:\n\nfor the avoidance of doubt, Section 2(a)(1) grants You the right to extract, reuse, reproduce, and Share all or a substantial portion of the contents of the database;\nif You include all or a substantial portion of the database contents in a database in which You have Sui Generis Database Rights, then the database in which You have Sui Generis Database Rights (but not its individual contents) is Adapted Material, including for purposes of Section 3(b); and\nYou must comply with the conditions in Section 3(a) if You Share all or a substantial portion of the contents of the database.\n\nFor the avoidance of doubt, this Section 4 supplements and does not replace Your obligations under this Public License where the Licensed Rights include other Copyright and Similar Rights.\n\n\nSection 5 – Disclaimer of Warranties and Limitation of Liability.\n\nUnless otherwise separately undertaken by the Licensor, to the extent possible, the Licensor offers the Licensed Material as-is and as-available, and makes no representations or warranties of any kind concerning the Licensed Material, whether express, implied, statutory, or other. This includes, without limitation, warranties of title, merchantability, fitness for a particular purpose, non-infringement, absence of latent or other defects, accuracy, or the presence or absence of errors, whether or not known or discoverable. Where disclaimers of warranties are not allowed in full or in part, this disclaimer may not apply to You.\nTo the extent possible, in no event will the Licensor be liable to You on any legal theory (including, without limitation, negligence) or otherwise for any direct, special, indirect, incidental, consequential, punitive, exemplary, or other losses, costs, expenses, or damages arising out of this Public License or use of the Licensed Material, even if the Licensor has been advised of the possibility of such losses, costs, expenses, or damages. Where a limitation of liability is not allowed in full or in part, this limitation may not apply to You.\nThe disclaimer of warranties and limitation of liability provided above shall be interpreted in a manner that, to the extent possible, most closely approximates an absolute disclaimer and waiver of all liability.\n\n\n\nSection 6 – Term and Termination.\n\nThis Public License applies for the term of the Copyright and Similar Rights licensed here. However, if You fail to comply with this Public License, then Your rights under this Public License terminate automatically.\nWhere Your right to use the Licensed Material has terminated under Section 6(a), it reinstates:\n\nautomatically as of the date the violation is cured, provided it is cured within 30 days of Your discovery of the violation; or\nupon express reinstatement by the Licensor.\n\nFor the avoidance of doubt, this Section 6(b) does not affect any right the Licensor may have to seek remedies for Your violations of this Public License.\nFor the avoidance of doubt, the Licensor may also offer the Licensed Material under separate terms or conditions or stop distributing the Licensed Material at any time; however, doing so will not terminate this Public License.\nSections 1, 5, 6, 7, and 8 survive termination of this Public License.\n\n\n\nSection 7 – Other Terms and Conditions.\n\nThe Licensor shall not be bound by any additional or different terms or conditions communicated by You unless expressly agreed.\nAny arrangements, understandings, or agreements regarding the Licensed Material not stated herein are separate from and independent of the terms and conditions of this Public License.t stated herein are separate from and independent of the terms and conditions of this Public License.\n\n\n\nSection 8 – Interpretation.\n\nFor the avoidance of doubt, this Public License does not, and shall not be interpreted to, reduce, limit, restrict, or impose conditions on any use of the Licensed Material that could lawfully be made without permission under this Public License.\nTo the extent possible, if any provision of this Public License is deemed unenforceable, it shall be automatically reformed to the minimum extent necessary to make it enforceable. If the provision cannot be reformed, it shall be severed from this Public License without affecting the enforceability of the remaining terms and conditions.\nNo term or condition of this Public License will be waived and no failure to comply consented to unless expressly agreed to by the Licensor.\nNothing in this Public License constitutes or may be interpreted as a limitation upon, or waiver of, any privileges and immunities that apply to the Licensor or You, including from the legal processes of any jurisdiction or authority.\n\n\nCreative Commons is not a party to its public licenses. Notwithstanding, Creative Commons may elect to apply one of its public licenses to material it publishes and in those instances will be considered the “Licensor.” Except for the limited purpose of indicating that material is shared under a Creative Commons public license or as otherwise permitted by the Creative Commons policies published at creativecommons.org/policies, Creative Commons does not authorize the use of the trademark “Creative Commons” or any other trademark or logo of Creative Commons without its prior written consent including, without limitation, in connection with any unauthorized modifications to any of its public licenses or any other arrangements, understandings, or agreements concerning use of licensed material. For the avoidance of doubt, this paragraph does not form part of the public licenses.\nCreative Commons may be contacted at creativecommons.org\n\n\n:::"
  },
  {
    "objectID": "project2.html",
    "href": "project2.html",
    "title": "Project 2",
    "section": "",
    "text": "You will find a data set containing string / character data. The data could be on newspaper articles, tweets, songs, scripts, movie reviews, or anything else you can imagine. Then you will answer questions of interest and tell a story about your data using the string and regular expression skills you have developed.\nYour analysis must contain the following elements:\n\nat least 3 str_*() functions (3 different functions)\nat least 3 regular expressions\nat least 1 lookaround\nat least 2 illustrative, well-labeled plots or tables\na description of what insights can be gained from your plots and tables\na reference / documentation of the data source.\n\nLogistics:\n\nplease include all your code used in the analysis (but feel free to use code folding1.)\nmake sure that all graphs are well-labeled (including x and y axes, title of the graph, and accurate and succinct labels for color and fill).\ndo not include error or warning messages (see HW YAML for code).\ninclude a few sentences describing each of your plots or tables. That is, tell the reader what they see when they look at the plot. Your narrative description should be in the text part of the qmd file, not as a comment in an R chunk.\nplease include the source of the data (which might include, for example, both the link to the data source (e.g., TidyTuesday page) + the original source of the data (e.g., NYT)).\nif you are working with a (local) copy of the .csv file (as opposed to, for example, a link to the dataset on TidyTuesday’s GitHub site), then the .csv file should live in your GitHub repository for your website. And you should read the data in from that local copy. That is, the dataset should not live in your Downloads."
  },
  {
    "objectID": "project3.html",
    "href": "project3.html",
    "title": "Project 3",
    "section": "",
    "text": "For Project 3 you will conduct a small simulation study which does one of the following tasks (you can choose!):\nYour simulation study should contain the following elements:\nLogistics:"
  },
  {
    "objectID": "project5.html",
    "href": "project5.html",
    "title": "Project 5",
    "section": "",
    "text": "Project instructions to come!\n\n\n\n\nReuseCC BY 4.0"
  },
  {
    "objectID": "images/ma154-hwtest.html",
    "href": "images/ma154-hwtest.html",
    "title": "Math 154 - Test HW",
    "section": "",
    "text": ":::\n\n\nReuseCC BY 4.0"
  },
  {
    "objectID": "project4.html",
    "href": "project4.html",
    "title": "Project 4",
    "section": "",
    "text": "instructions to come\n\n\n\n\nReuseCC BY 4.0"
  },
  {
    "objectID": "project1.html",
    "href": "project1.html",
    "title": "Mini-Project 1",
    "section": "",
    "text": "Part of being a successful data scientist is communicating your work and demonstrating that you know how to communicate your work. To that end, you will each be creating your own website with some of the course projects (see caveat below!).\nYou will produce a personal website using Quarto that contains, at a minimum, a Home/About page with a picture or image (doesn’t have to be of you, could be some kind of art, etc., but make sure you have permission to post whatever image you include), some basic information about you, and a link to the GitHub repo that contains the R code for your website.\nThen, in the Menu bar, you should have a selection called “Data Viz” with two sub-selections, each being a TidyTuesday analysis."
  },
  {
    "objectID": "R-tip.html",
    "href": "R-tip.html",
    "title": "R tip-of-the-day",
    "section": "",
    "text": "Artwork by @allison_horst.\n\n\n\n\n\n\n\n\n\n\n\n\n\nnumber\ntip\ndescription\nmisc\n\n\n\n\nTip 1\ncmd + opt + i\nadds a new R chunk\ncntrl + alt + i for PC\n\n\nTip 2\n\nadds a new R chunk\nlook for it at top of Quarto doc\n\n\nTip 3\nTools -&gt; Global Options… -&gt; Appearance\nallows for dark mode, plus other options!\n\n\n\nTip 4\ncmd + shift + C\ncomments the line\ncntrl + shift + C for PC\n\n\nTip 5\n\\textcolor{red}{this text will be red}\nLaTeX formatting to change the text color\nwhen render to pdf (different syntax for render to html)\n\n\nTip 6\n\nchanges the figure size\ngear in R chunk\n\n\nTip 7\n\nchanges the viewer output\ngear near Render\n\n\nTip 8\n#| echo: false\nevaluates the chunk, but does not show the code\nalternatively: echo = FALSE inside curly braces\n\n\nTip 9\nTool -&gt; Global Options… -&gt; Spelling\nallows for real-time spell check\n\n\n\nTip 10\ncmd + shift + M\nproduces a pipe\ncntrl + shift + M for PC  Tools -&gt; Global Options… -&gt; Code to get the native pipe\n\n\nTip 11\nopt + -\nproduces the assignment operator, &lt;-\n\n\n\nTip 12\nR was adopted as an open source version of S\n\nIt was written by Ross Ihaka and Robert Gentleman, which is why they called it R\n\n\nTip 13\nhighlight with mouse and hit quotation\nwill put quotes around the highlighted phrase\n\n\n\nTip 14\nhighlight with mouse and hit parenthesis\nwill put parentheses around the highlighted phrase\n\n\n\nTip 15\nSession -&gt; Restart R\nrerstart the R session (without restarting RStudio)\nshift + cmd / cntrl + 0\n\n\nTip 16\ncmd + d\ndeletes the line\ncntrl + d for PC (works on code or narrative)\n\n\nTip 17\nTools -&gt; Keyboard Shortcuts Help\nprovides all the keyboard shortcuts\nopt + shift + K on Mac; alt + shift + K on PC\n\n\nTip 18\n$ LaTeX code $\nformats LaTeX code into math\ncool way to write mathematical notation\n\n\n\n\n\n\n\n\n\n\nReuseCC BY 4.0"
  },
  {
    "objectID": "syllabus.html#links-to-resources",
    "href": "syllabus.html#links-to-resources",
    "title": "syllabus",
    "section": "",
    "text": "Best and most comprehensive Git help: http://happygitwithr.com/\nVersion control with Git\nMore on Git\nOnline Git book with lots of info\n\n\n\n\n\n\n\n\nA fantastic ggplot2 tutorial\nGreat tutorials through the Coding Club\nGoogle for R\nIncredibly helpful cheatsheets from RStudio.\n\ndata wrangling\nggplot2\nShiny\nQuarto\nRStudio IDE\n\n\n\n\n\n\n\n\nW3 schools Introduction to SQL\nW3 schools SQL Exercises, Practice, Solution\nR packages for working with databases\nIntroduction to dbplyr\n\n\n\n\n\n\n\nstringr vignette\nstringr package\nJenny Bryan et al.’s STAT 545 notes\nregexpal\n\nRegExr\nRegexOne\n\n\n\n\nHomework assignments will be graded out of 5 points, which are based on a combination of accuracy and effort. Below are rough guidelines for grading.\n[5] All problems completed with detailed solutions provided and 75% or more of the problems are fully correct. Additionally, there are no extraneous messages, warnings, or printed lists of numbers.\n[4] All problems completed with detailed solutions and 50-75% correct; OR close to all problems completed and 75%-100% correct. Or all problems are completed and there are extraneous messages, warnings, or printed lists of numbers. [Here is an example of extraneous messages and printed lists of numbers.]\n[3] Close to all problems completed with less than 75% correct. OR an assignment that didn’t make it all the way to Canvas as the correctly rendered pdf.\n[2] More than half but fewer than all problems completed and &gt; 75% correct.\n[1] More than half but fewer than all problems completed and &lt; 75% correct; OR less than half of problems completed.\n[0] No work submitted, OR half or less than half of the problems submitted and without any detail/work shown to explain the solutions. You will get a zero if your file is not compiled and submitted on GitHub."
  },
  {
    "objectID": "syllabus.html#projects",
    "href": "syllabus.html#projects",
    "title": "syllabus",
    "section": "",
    "text": "There will be 5 mini-projects (due roughly every other week). You will also compile the projects, reflect on the process, and present your work to your classrmates. Project information is available here: DS 002R Projects"
  },
  {
    "objectID": "syllabus.html#computing",
    "href": "syllabus.html#computing",
    "title": "syllabus",
    "section": "",
    "text": "GitHub will be used as a way to practice reproducible and collaborative science. There may be a slight learning curve, but knowing Git will be an extremely useful skill as you venture beyond this class.\nR will be used for all homework assignments. R is freely available at http://www.r-project.org/ and is already installed on college computers. Additionally, you need to install R Studio in order to use Quarto, https://posit.co/downloads/. If you are not already familiar with R, please work through some of the materials provided ASAP.\nYou are welcome to use Pomona’s R Studio server at https://rstudio.campus.pomona.edu/ (or https://rstudio.pomona.edu if you are off campus). If you use the server, you can connect directly to your Git account without installing Git locally on your own computer. [If you are not a Pomona student, you will need to get an account from Pomona’s ITS. Go to ITS, tell them that you are taking a Pomona course, and ask for an account for using RStudio.]"
  },
  {
    "objectID": "syllabus.html#engagement",
    "href": "syllabus.html#engagement",
    "title": "syllabus",
    "section": "",
    "text": "This class will be interactive, and your engagement is expected (every day in class). Although notes will be posted, your engagement is an integral part of the in-class learning process.\nIn class: after answering one question, wait until 5 other people have spoken before answering another question. [Feel free to ask as many questions as often as you like!]\nTo get full participation points, you will be expected to contribute at least one R tip of the day, sometime during the semester."
  },
  {
    "objectID": "syllabus.html#academic-honesty",
    "href": "syllabus.html#academic-honesty",
    "title": "syllabus",
    "section": "",
    "text": "You are on your honor to present only your work as part of your course assessments. Below, I’ve provided Pomona’s academic honesty policy. But before the policy, I’ve given some thoughts on cheating which I have taken from Nick Ball’s CHEM 147 Collective (thank you, Prof Ball!). Prof Ball gives us all something to think about when we are learning in a classroom as well as on our journey to become scientists and professionals:\nThere are many known reasons why we may feel the need to “cheat” on problem sets or exams:\n\n\nAn academic environment that values grades above learning.\nFinancial aid is critical for remaining in school that places undue pressure on maintaining a high GPA.\nNavigating school, work, and/or family obligations that have diverted focus from class.\nChallenges balancing coursework and mental health.\nBalancing academic, family, peer, or personal issues.\n\n\nBeing accused of cheating – whether it has occurred or not – can be devastating for students. The college requires me to respond to potential academic dishonesty with a process that is very long and damaging. As your instructor, I care about you and want to offer alternatives to prevent us from having to go through this process. If you find yourself in a situation where “cheating” seems like the only option:\nPlease come talk to me. We will figure this out together.\nPomona College is an academic community, all of whose members are expected to abide by ethical standards both in their conduct and in their exercise of responsibilities toward other members of the community. The college expects students to understand and adhere to basic standards of honesty and academic integrity. These standards include, but are not limited to, the following:\n\n\nIn projects and assignments prepared independently, students never represent the ideas or the language of others as their own.\nStudents do not destroy or alter either the work of other students or the educational resources and materials of the College.\nStudents neither give nor receive assistance in examinations.\nStudents do not take unfair advantage of fellow students by representing work completed for one course as original work for another or by deliberately disregarding course rules and regulations.\nIn laboratory or research projects involving the collection of data, students accurately report data observed and do not alter these data for any reason."
  },
  {
    "objectID": "syllabus.html#advice",
    "href": "syllabus.html#advice",
    "title": "syllabus",
    "section": "",
    "text": "Please email and / or set up a time to talk if you have any questions about or difficulty with the material, the computing, or the course. Talk to me as soon as possible if you find yourself struggling. The material will build on itself, so it will be much easier to catch up if the concepts get clarified earlier rather than later. This semester is going to be fun. Let’s do it.\n\n\n\n\n\n\nGrading\n\n\n\n\n30% Homework\n30% Quizzes\n30% Projects & Final Presentation\n10% Class engagement"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#course-structure",
    "href": "slides/2024-08-26-intro.html#course-structure",
    "title": "Introduction to DS002R",
    "section": "Course structure",
    "text": "Course structure\n\nbi-weekly HW (to GitHub + Gradescope)\nbi-weekly quizzes\nmini-projects\nin-class activities / clickers\nethical considerations"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#additional-details",
    "href": "slides/2024-08-26-intro.html#additional-details",
    "title": "Introduction to DS002R",
    "section": "Additional details",
    "text": "Additional details\n\nCanvas has all the links\n\ncourse website – almost everything\nclass notes\nCanvas page – solutions and assignments\n\nno computers (tablets fine)\ngood communication\nTidyTuesday"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#syllabus",
    "href": "slides/2024-08-26-intro.html#syllabus",
    "title": "Introduction to DS002R",
    "section": "Syllabus",
    "text": "Syllabus\n\n\n\noffice hours\nmentor sessions\nanonymous feedback\ndates for assignments\n\n\n\nlinks to resources\nHW grading\nproject information\n\n\n\n\n\n\n\n\nImportant\n\n\nI need your GitHub user name - please email it to me."
  },
  {
    "objectID": "slides/2024-08-26-intro.html#v1.0---drew-conway",
    "href": "slides/2024-08-26-intro.html#v1.0---drew-conway",
    "title": "Introduction to DS002R",
    "section": "V1.0 - Drew Conway",
    "text": "V1.0 - Drew Conway\n\n2010: http://drewconway.com/zia/2013/3/26/the-data-science-venn-diagram"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#v2.0---steve-geringer",
    "href": "slides/2024-08-26-intro.html#v2.0---steve-geringer",
    "title": "Introduction to DS002R",
    "section": "V2.0 - Steve Geringer",
    "text": "V2.0 - Steve Geringer\n\n2014: http://www.anlytcs.com/2014/01/data-science-venn-diagram-v20.html"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#v3.0---writuparna-banerjee",
    "href": "slides/2024-08-26-intro.html#v3.0---writuparna-banerjee",
    "title": "Introduction to DS002R",
    "section": "V3.0 - Writuparna Banerjee",
    "text": "V3.0 - Writuparna Banerjee\n\n2020: https://medium.com/@writuparnabanerjee/the-difference-in-the-career-options-in-data-science-data-scientist-vs-data-engineer-vs-data-33209d0ac880"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#v4.0---joel-grus",
    "href": "slides/2024-08-26-intro.html#v4.0---joel-grus",
    "title": "Introduction to DS002R",
    "section": "V4.0 - Joel Grus",
    "text": "V4.0 - Joel Grus\n\n2013: https://posit.co/wp-content/themes/Posit/public/markdown-blogs/role-of-the-data-scientist/index.html?wtime=%7Bseek_to_second_number%7D"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#data-science-overview",
    "href": "slides/2024-08-26-intro.html#data-science-overview",
    "title": "Introduction to DS002R",
    "section": "Data Science Overview",
    "text": "Data Science Overview\n\nBased on https://www.effectivedatastorytelling.com/post/a-deeper-dive-into-lego-bricks-and-data-stories, original source: https://www.linkedin.com/learning/instructors/bill-shander"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#data-science-in-ds-002r",
    "href": "slides/2024-08-26-intro.html#data-science-in-ds-002r",
    "title": "Introduction to DS002R",
    "section": "Data Science in DS 002R",
    "text": "Data Science in DS 002R\n\n\n\n\n\n\n\n\n\n\n\n\n\nDS workflow\nin DS002R\nbeyond DS002R\n\n\n\n\ndata acquisition\nweb scraping, relational databases\nAPIs\n\n\ndata exploration\nwrangling, strings, regular expressions\nnatural language processing\n\n\ndata visualization\ngrammar of graphics\nanimations\n\n\ndata conclusions\niteration, permutation tests\npredictive modeling, machine learning, AI\n\n\ndata communication\nyes!\nyes!"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#tidy-data",
    "href": "slides/2024-08-26-intro.html#tidy-data",
    "title": "Introduction to DS002R",
    "section": "Tidy data",
    "text": "Tidy data\n\neach row = a unit of observation (here, a penguin)\neach column = a measure on some variable of interest, either quantitative (numbers with units) or categorical (discrete possibilities or categories)\neach entry contains a single data value; no analysis, summaries, footnotes, comments, etc, and only one value per cell"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#definition-of-datum",
    "href": "slides/2024-08-26-intro.html#definition-of-datum",
    "title": "Introduction to DS002R",
    "section": "Definition of datum",
    "text": "Definition of datum\nThe definition of datum can be much broader:\n\nDefinition of datum from the Oxford English Dictionary"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#tidying-data",
    "href": "slides/2024-08-26-intro.html#tidying-data",
    "title": "Introduction to DS002R",
    "section": "Tidying data",
    "text": "Tidying data\nHow would you wrangle each data example into a tidy format?\n\nthe emails in your inbox\n\nsocial media texts\n\nimages\n\nvideos\n\naudio files"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#data-science-in-the-wild",
    "href": "slides/2024-08-26-intro.html#data-science-in-the-wild",
    "title": "Introduction to DS002R",
    "section": "Data Science in the Wild",
    "text": "Data Science in the Wild\nData science extracts knowledge from within a particular domain of inquiry. Examples from Pomona!\n\nShannon Burns (Psychological Science and Neuroscience) uses data to understand brain processes of social communication.\nCharlotte Chang uses data to study and improve earth stewardship.\nAnthony (Tony) Clark (Computer Science) uses data to improve the safety and reliability of mobile robots.\nManisha Goel (Economics) uses data to understand how people’s identities shape the fortunes of businesses where they work.\nJun Lang (Asian Languages and Literatures) uses data to analyze (1) the intersection of language, gender, and society, and (2) second language acquisition and pedagogy.\nFrank Pericolosi (Physical Education) uses data to improve his team’s chances on the field.\nAmi Radunskaya (Mathematics) uses data to model tumor growth and treatment.\nYuqing Zhu (Neuroscience) uses data to figure out how a jumble of neurons becomes smart."
  },
  {
    "objectID": "slides/2024-08-26-intro.html#reproducibility",
    "href": "slides/2024-08-26-intro.html#reproducibility",
    "title": "Introduction to DS002R",
    "section": "Reproducibility",
    "text": "Reproducibility\nWhat does it mean for a data analysis to be “reproducible”?\nShort-term goals:\n\nAre the tables and figures reproducible from the code and data?\nDoes the code actually do what you think it does?\nIn addition to what was done, is it clear why it was done?\n\nLong-term goals:\n\nCan the code be used for other data?\nCan you extend the code to do other things?"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#the-reproducible-data-analysis-process",
    "href": "slides/2024-08-26-intro.html#the-reproducible-data-analysis-process",
    "title": "Introduction to DS002R",
    "section": "The reproducible data analysis process",
    "text": "The reproducible data analysis process\n\nScriptability \\(\\rightarrow\\) R\nLiterate programming (code, narrative, output in one place) \\(\\rightarrow\\) Quarto (via R Studio)\nVersion control \\(\\rightarrow\\) Git / GitHub"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#learning-goals",
    "href": "slides/2024-08-26-intro.html#learning-goals",
    "title": "Introduction to DS002R",
    "section": "Learning goals",
    "text": "Learning goals\nBy the end of the course, you will be able to…\n\n\ngain insight from data\ngain insight from data, reproducibly\ngain insight from data, reproducibly, using modern programming tools and techniques\ngain insight from data, reproducibly (with literate programming and version control), using modern programming tools and techniques"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#reproducibility-checklist",
    "href": "slides/2024-08-26-intro.html#reproducibility-checklist",
    "title": "Introduction to DS002R",
    "section": "Reproducibility checklist",
    "text": "Reproducibility checklist\n\nWhat does it mean for a data analysis to be “reproducible”?\n\nShort-term goals:\n\nAre the tables and figures reproducible from the code and data?\nDoes the code actually do what you think it does?\nIn addition to what was done, is it clear why it was done?\n\nLong-term goals:\n\nCan the code be used for other data?\nCan you extend the code to do other things?"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#toolkit-for-reproducibility",
    "href": "slides/2024-08-26-intro.html#toolkit-for-reproducibility",
    "title": "Introduction to DS002R",
    "section": "Toolkit for reproducibility",
    "text": "Toolkit for reproducibility\n\nScriptability \\(\\rightarrow\\) R\nLiterate programming (code, narrative, output in one place) \\(\\rightarrow\\) Quarto\nVersion control \\(\\rightarrow\\) Git / GitHub"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#r-and-rstudio-1",
    "href": "slides/2024-08-26-intro.html#r-and-rstudio-1",
    "title": "Introduction to DS002R",
    "section": "R and RStudio",
    "text": "R and RStudio\n\n\n\n\n\n\n\n\nR is an open-source statistical programming language\nR is also an environment for statistical computing and graphics\nIt’s easily extensible with packages\n\n\n\n\nRStudio is a convenient interface for R called an IDE (integrated development environment), e.g. “I write R code in the RStudio IDE”\nRStudio is not a requirement for programming with R, but it’s very commonly used by R programmers and data scientists"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#r-vs.-rstudio",
    "href": "slides/2024-08-26-intro.html#r-vs.-rstudio",
    "title": "Introduction to DS002R",
    "section": "R vs. RStudio",
    "text": "R vs. RStudio\n\n\n\n\n\n\n\nSource: Modern Dive."
  },
  {
    "objectID": "slides/2024-08-26-intro.html#r-packages",
    "href": "slides/2024-08-26-intro.html#r-packages",
    "title": "Introduction to DS002R",
    "section": "R packages",
    "text": "R packages\n\nPackages: Fundamental units of reproducible R code, including reusable R functions, the documentation that describes how to use them, and sample data1\nAs of August 26, 2024, there are 21,145 R packages available on CRAN (the Comprehensive R Archive Network)2\nWe’re going to work with a small (but important) subset of these!\n\n\n\n1 Wickham and Bryan, R Packages.\n2 CRAN contributed packages."
  },
  {
    "objectID": "slides/2024-08-26-intro.html#tour-r-rstudio",
    "href": "slides/2024-08-26-intro.html#tour-r-rstudio",
    "title": "Introduction to DS002R",
    "section": "Tour: R + RStudio",
    "text": "Tour: R + RStudio"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#tour-recap-r-rstudio",
    "href": "slides/2024-08-26-intro.html#tour-recap-r-rstudio",
    "title": "Introduction to DS002R",
    "section": "Tour recap: R + RStudio",
    "text": "Tour recap: R + RStudio"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#a-short-list-for-now-of-r-essentials",
    "href": "slides/2024-08-26-intro.html#a-short-list-for-now-of-r-essentials",
    "title": "Introduction to DS002R",
    "section": "A short list (for now) of R essentials",
    "text": "A short list (for now) of R essentials\n\nFunctions are (most often) verbs, followed by what they will be applied to in parentheses:\n\n\ndo_this(to_this)\ndo_that(to_this, to_that, with_those)\n\n\n\nPackages are installed with the install.packages() function and loaded with the library function, once per session:\n\n\ninstall.packages(\"package_name\")\nlibrary(package_name)"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#r-essentials-continued",
    "href": "slides/2024-08-26-intro.html#r-essentials-continued",
    "title": "Introduction to DS002R",
    "section": "R essentials (continued)",
    "text": "R essentials (continued)\n\nColumns (variables) in data frames are accessed with $:\n\n\ndataframe$var_name\n\n\n\nObject documentation can be accessed with ?\n\n\n?mean"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#tidyverse",
    "href": "slides/2024-08-26-intro.html#tidyverse",
    "title": "Introduction to DS002R",
    "section": "tidyverse",
    "text": "tidyverse\n\n\n\n\ntidyverse.org\n\nThe tidyverse is an opinionated collection of R packages designed for data science\nAll packages share an underlying philosophy and a common grammar"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#quarto-1",
    "href": "slides/2024-08-26-intro.html#quarto-1",
    "title": "Introduction to DS002R",
    "section": "Quarto",
    "text": "Quarto\n\nFully reproducible reports – each time you Render, the analysis is run from the beginning\nCode goes in chunks\nNarrative goes outside of chunks"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#tour-quarto",
    "href": "slides/2024-08-26-intro.html#tour-quarto",
    "title": "Introduction to DS002R",
    "section": "Tour: Quarto",
    "text": "Tour: Quarto"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#tour-recap-quarto",
    "href": "slides/2024-08-26-intro.html#tour-recap-quarto",
    "title": "Introduction to DS002R",
    "section": "Tour recap: Quarto",
    "text": "Tour recap: Quarto"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#environments",
    "href": "slides/2024-08-26-intro.html#environments",
    "title": "Introduction to DS002R",
    "section": "Environments",
    "text": "Environments\n\n\n\n\n\n\nImportant\n\n\nThe environment of your Quarto document is separate from the Console!\n\n\n\nRemember this, and expect it to bite you a few times as you’re learning to work with Quarto!"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#environments-1",
    "href": "slides/2024-08-26-intro.html#environments-1",
    "title": "Introduction to DS002R",
    "section": "Environments",
    "text": "Environments\n\n\nFirst, run the following in the console:\n\nx &lt;- 2\nx * 3\n\n\n\nAll looks good, eh?\n\n\nThen, add the following in an R chunk in your Quarto document\n\nx * 3\n\n\n\nWhat happens? Why the error?"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#how-will-we-use-quarto",
    "href": "slides/2024-08-26-intro.html#how-will-we-use-quarto",
    "title": "Introduction to DS002R",
    "section": "How will we use Quarto?",
    "text": "How will we use Quarto?\n\nEvery assignment is an Quarto document.\nYou’ll always have a template Quarto document to start with.\nThe amount of scaffolding in the template will decrease over the semester."
  },
  {
    "objectID": "slides/2024-08-26-intro.html#git-and-github",
    "href": "slides/2024-08-26-intro.html#git-and-github",
    "title": "Introduction to DS002R",
    "section": "Git and GitHub",
    "text": "Git and GitHub\n\n\n\n\n\n\n\n\nGit is a version control system – like “Track Changes” features from Microsoft Word, on steroids\nIt’s not the only version control system, but it’s a very popular one\n\n\n\n\n\n\n\n\nGitHub is the home for your Git-based projects on the internet – like DropBox but much, much better\nWe will use GitHub as a platform for web hosting and collaboration (and as our course management system!)"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#versioning---done-badly",
    "href": "slides/2024-08-26-intro.html#versioning---done-badly",
    "title": "Introduction to DS002R",
    "section": "Versioning - done badly",
    "text": "Versioning - done badly"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#versioning---done-better",
    "href": "slides/2024-08-26-intro.html#versioning---done-better",
    "title": "Introduction to DS002R",
    "section": "Versioning - done better",
    "text": "Versioning - done better"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#versioning---done-even-better",
    "href": "slides/2024-08-26-intro.html#versioning---done-even-better",
    "title": "Introduction to DS002R",
    "section": "Versioning - done even better",
    "text": "Versioning - done even better\nwith human readable messages"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#how-will-we-use-git-and-github",
    "href": "slides/2024-08-26-intro.html#how-will-we-use-git-and-github",
    "title": "Introduction to DS002R",
    "section": "How will we use Git and GitHub?",
    "text": "How will we use Git and GitHub?"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#how-will-we-use-git-and-github-1",
    "href": "slides/2024-08-26-intro.html#how-will-we-use-git-and-github-1",
    "title": "Introduction to DS002R",
    "section": "How will we use Git and GitHub?",
    "text": "How will we use Git and GitHub?"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#how-will-we-use-git-and-github-2",
    "href": "slides/2024-08-26-intro.html#how-will-we-use-git-and-github-2",
    "title": "Introduction to DS002R",
    "section": "How will we use Git and GitHub?",
    "text": "How will we use Git and GitHub?"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#how-will-we-use-git-and-github-3",
    "href": "slides/2024-08-26-intro.html#how-will-we-use-git-and-github-3",
    "title": "Introduction to DS002R",
    "section": "How will we use Git and GitHub?",
    "text": "How will we use Git and GitHub?"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#git-and-github-tips",
    "href": "slides/2024-08-26-intro.html#git-and-github-tips",
    "title": "Introduction to DS002R",
    "section": "Git and GitHub tips",
    "text": "Git and GitHub tips\n\n\nThere are millions of git commands – ok, that’s an exaggeration, but there are a lot of them – and very few people know them all. 99% of the time you will use git to add, commit, push, and pull.\nWe will be doing Git things and interfacing with GitHub through RStudio, but if you google for help you might come across methods for doing these things in the command line – skip that and move on to the next resource unless you feel comfortable trying it out.\nThere is a great resource for working with git and R: happygitwithr.com. Some of the content in there is beyond the scope of this course, but it’s a good place to look for help."
  },
  {
    "objectID": "slides/2024-08-26-intro.html#tour-git-github",
    "href": "slides/2024-08-26-intro.html#tour-git-github",
    "title": "Introduction to DS002R",
    "section": "Tour: Git + GitHub",
    "text": "Tour: Git + GitHub"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#examining-data-visualization",
    "href": "slides/2024-08-26-intro.html#examining-data-visualization",
    "title": "Introduction to DS002R",
    "section": "Examining data visualization",
    "text": "Examining data visualization\n\n\nDiscuss the following for the visualization.\n\n\n\n\n\nSource: Twitter"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#ae-02-bechdel-dataviz",
    "href": "slides/2024-08-26-intro.html#ae-02-bechdel-dataviz",
    "title": "Introduction to DS002R",
    "section": "ae-02-bechdel-dataviz",
    "text": "ae-02-bechdel-dataviz\n\n\nGo to the course GitHub org and find your ae repo (repo name will be suffixed with your GitHub name).\nClone the repo in your container, open the Quarto document in the repo, and follow along and complete the exercises.\nRender, commit, and push your edits by the AE deadline (end of this week)"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#recap-of-ae",
    "href": "slides/2024-08-26-intro.html#recap-of-ae",
    "title": "Introduction to DS002R",
    "section": "Recap of AE",
    "text": "Recap of AE\n\nConstruct plots with ggplot().\nLayers of ggplots are separated by +s.\nThe formula is (almost) always as follows:\n\n\nggplot(DATA, aes(x = X-VAR, y = Y-VAR, ...)) +\n  geom_XXX()\n\n\nAesthetic attributes of a geometries (color, size, transparency, etc.) can be mapped to variables in the data or set by the user, e.g. color = binary vs. color = \"pink\".\nUse facet_wrap() when faceting (creating small multiples) by one variable and facet_grid() when faceting by two variables."
  },
  {
    "objectID": "slides/2024-08-26-intro.html#activity",
    "href": "slides/2024-08-26-intro.html#activity",
    "title": "Introduction to DS002R",
    "section": "Activity",
    "text": "Activity\n\nWhat problem or task would you like to investigate using data?\nWhat would be hard about executing the project?\nWhat are the potential ethical frameworks to consider?\nHow would you define success?"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#data-science-process",
    "href": "slides/2024-08-26-intro.html#data-science-process",
    "title": "Introduction to DS002R",
    "section": "Data Science Process",
    "text": "Data Science Process"
  },
  {
    "objectID": "slides/2024-08-26-intro.html#data-science",
    "href": "slides/2024-08-26-intro.html#data-science",
    "title": "Introduction to DS002R",
    "section": "Data Science ",
    "text": "Data Science"
  },
  {
    "objectID": "slides/2024-09-09-wrangling1.html#tidy-data",
    "href": "slides/2024-09-09-wrangling1.html#tidy-data",
    "title": "Data Wrangling",
    "section": "",
    "text": "each row = a unit of observation (here, a penguin)\neach column = a measure on some variable of interest, either quantitative (numbers with units) or categorical (discrete possibilities or categories)\neach entry contains a single data value; no analysis, summaries, footnotes, comments, etc, and only one value per cell"
  },
  {
    "objectID": "slides/2024-09-09-wrangling1.html#definition-of-datum",
    "href": "slides/2024-09-09-wrangling1.html#definition-of-datum",
    "title": "Data Wrangling",
    "section": "",
    "text": "The definition of datum can be much broader:\n\n\n\n\n\nDefinition of datum from the Oxford English Dictionary"
  },
  {
    "objectID": "slides/2024-09-09-wrangling1.html#tidying-data",
    "href": "slides/2024-09-09-wrangling1.html#tidying-data",
    "title": "Data Wrangling",
    "section": "",
    "text": "How would you wrangle each data example into a tidy format?\n\nthe emails in your inbox\n\nsocial media texts\n\nimages\n\nvideos\n\naudio files\n\n\n:::"
  },
  {
    "objectID": "slides/2024-09-09-wrangling1.html",
    "href": "slides/2024-09-09-wrangling1.html",
    "title": "Data Wrangling",
    "section": "",
    "text": "species\nisland\nbill_length_mm\nbill_depth_mm\nflipper_length_mm\nbody_mass_g\nsex\nyear\n\n\n\n\nAdelie\nTorgersen\n39.1\n18.7\n181\n3750\nmale\n2007\n\n\nAdelie\nTorgersen\n39.5\n17.4\n186\n3800\nfemale\n2007\n\n\nAdelie\nTorgersen\n40.3\n18.0\n195\n3250\nfemale\n2007\n\n\nAdelie\nTorgersen\nNA\nNA\nNA\nNA\nNA\n2007\n\n\nAdelie\nTorgersen\n36.7\n19.3\n193\n3450\nfemale\n2007\n\n\nAdelie\nTorgersen\n39.3\n20.6\n190\n3650\nmale\n2007\n\n\n\n\n\n\n\n\n\n\n\neach row = a unit of observation (here, a penguin)\neach column = a measure on some variable of interest, either quantitative (numbers with units) or categorical (discrete possibilities or categories)\neach entry contains a single data value; no analysis, summaries, footnotes, comments, etc, and only one value per cell\n\n\n\n\nThe definition of datum can be much broader:\n\n\n\n\n\nDefinition of datum from the Oxford English Dictionary\n\n\n\n\n\n\n\nHow would you wrangle each data example into a tidy format?\n\nthe emails in your inbox\n\nsocial media texts\n\nimages\n\nvideos\n\naudio files\n\n\n:::"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#nssd",
    "href": "slides/2024-08-28-daataviz.html#nssd",
    "title": "Better Data Visualizations",
    "section": "NSSD:",
    "text": "NSSD:\n\nWhat was Hilary trying to answer in her data collection?\nName two of Hilary’s main hurdles in gathering accurate data.\nWhich is better: high touch (manual) or low touch (automatic) data collection? Why?\nWhat additional covariates are needed / desired? Any problems with them?\nHow much data does she need?"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#grammar-of-graphics",
    "href": "slides/2024-08-28-daataviz.html#grammar-of-graphics",
    "title": "Better Data Visualizations",
    "section": "Grammar of graphics",
    "text": "Grammar of graphics\nYau (2013) gives us nine visual cues, and Wickham (2014) translates them into a language using ggplot2.\n\nVisual Cues: the aspects of the figure where we should focus.\nPosition (numerical) where in relation to other things?\nLength (numerical) how big (in one dimension)?\nAngle (numerical) how wide? parallel to something else?\nDirection (numerical) at what slope? In a time series, going up or down?\nShape (categorical) belonging to what group?\nArea (numerical) how big (in two dimensions)? Beware of improper scaling!\nVolume (numerical) how big (in three dimensions)? Beware of improper scaling!\nShade (either) to what extent? how severely?\nColor (either) to what extent? how severely? Beware of red/green color blindness.\nCoordinate System: rectangular, polar, geographic, etc.\nScale: numeric (linear? logarithmic?), categorical (ordered?), time\nContext: in comparison to what (think back to ideas from Tufte)"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#pieces-of-the-graph",
    "href": "slides/2024-08-28-daataviz.html#pieces-of-the-graph",
    "title": "Better Data Visualizations",
    "section": "Pieces of the Graph",
    "text": "Pieces of the Graph\n\n\nVisual Cues of Yau (2013):\nPosition (numerical)\nLength (numerical)\nAngle (numerical)\nDirection (numerical)\nShape (categorical)\nArea (numerical)\nVolume (numerical)\nShade (either)\nColor (either)"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#order-matters",
    "href": "slides/2024-08-28-daataviz.html#order-matters",
    "title": "Better Data Visualizations",
    "section": "Order Matters",
    "text": "Order Matters"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#cues-together",
    "href": "slides/2024-08-28-daataviz.html#cues-together",
    "title": "Better Data Visualizations",
    "section": "Cues Together",
    "text": "Cues Together"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#attributes",
    "href": "slides/2024-08-28-daataviz.html#attributes",
    "title": "Better Data Visualizations",
    "section": "Attributes",
    "text": "Attributes\nAttributes can focus your reader’s attention.1\n\nimage credit: Better Data Visualization by Schwabish"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#advice-for-plotting",
    "href": "slides/2024-08-28-daataviz.html#advice-for-plotting",
    "title": "Better Data Visualizations",
    "section": "Advice for Plotting",
    "text": "Advice for Plotting\n\n\n\nBasic plotting\n\n\n\nAvoid having other graph elements interfere with data\nUse visually prominent symbols\nAvoid over-plotting (One way to avoid over plotting: jitter the values)\nDifferent values of data may obscure each other\nInclude all or nearly all of the data\nFill data region"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#advice-for-plotting-1",
    "href": "slides/2024-08-28-daataviz.html#advice-for-plotting-1",
    "title": "Better Data Visualizations",
    "section": "Advice for Plotting",
    "text": "Advice for Plotting\n\n\n\nBasic plotting\nEliminate superfluous material\n\n\n\nChart junk & stuff that adds no meaning, e.g. butterflies on top of barplots, background images\nExtra tick marks and grid lines\nUnnecessary text and arrows\nDecimal places beyond the measurement error or the level of difference"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#advice-for-plotting-2",
    "href": "slides/2024-08-28-daataviz.html#advice-for-plotting-2",
    "title": "Better Data Visualizations",
    "section": "Advice for Plotting",
    "text": "Advice for Plotting\n\n\n\nBasic plotting\nEliminate superfluous material\nFacilitate comparisons\n\n\n\nPut juxtaposed plots on same scale\nMake it easy to distinguish elements of superposed plots (e.g. color)\nEmphasizes the important difference\nComparison: volume, area, height (be careful, volume can seem bigger than you mean it to)"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#advice-for-plotting-3",
    "href": "slides/2024-08-28-daataviz.html#advice-for-plotting-3",
    "title": "Better Data Visualizations",
    "section": "Advice for Plotting",
    "text": "Advice for Plotting\n\n\n\nBasic plotting\nEliminate superfluous material\nFacilitate comparisons\nChoosing the scale\n\n\n\nKeep scales on x and y axes the same for both plots to facilitate the comparison\nZoom in to focus on the region that contains the bulk of the data\nKeep the scale the same throughout the plot (i.e. don’t change it mid-axis)\nOrigin need not be on the scale\nChoose a scale that improves resolution\nAvoid jiggling the baseline"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#advice-for-plotting-4",
    "href": "slides/2024-08-28-daataviz.html#advice-for-plotting-4",
    "title": "Better Data Visualizations",
    "section": "Advice for Plotting",
    "text": "Advice for Plotting\n\n\n\nBasic plotting\nEliminate superfluous material\nFacilitate comparisons\nChoosing the scale\nHow to make a plot information rich\n\n\n\nDescribe what you see in the caption\nAdd context with reference markers (lines and points) including text\nAdd legends and labels\nUse color and plotting symbols to add more information\nPlot the same thing more than once in different ways/scales\nReduce clutter"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#advice-for-plotting-5",
    "href": "slides/2024-08-28-daataviz.html#advice-for-plotting-5",
    "title": "Better Data Visualizations",
    "section": "Advice for Plotting",
    "text": "Advice for Plotting\n\n\n\nBasic plotting\nEliminate superfluous material\nFacilitate comparisons\nChoosing the scale\nHow to make a plot information rich\nCaptions should\n\n\n\nBe comprehensive\nSelf-contained\nDescribe what has been graphed\nDraw attention to important features\nDescribe conclusions drawn from graph"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#advice-for-plotting-6",
    "href": "slides/2024-08-28-daataviz.html#advice-for-plotting-6",
    "title": "Better Data Visualizations",
    "section": "Advice for Plotting",
    "text": "Advice for Plotting\n\n\n\nBasic plotting\nEliminate superfluous material\nFacilitate comparisons\nChoosing the scale\nHow to make a plot information rich\nCaptions should\nGood Plot Making Practice\n\n\n\nPut major conclusions in graphical form\nProvide reference information\nProof read for clarity and consistency\nGraphing is an iterative process\nMultiplicity is OK, i.e. two plots of the same variable may provide different messages\nMake plots data rich"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#getting-help",
    "href": "slides/2024-08-28-daataviz.html#getting-help",
    "title": "Better Data Visualizations",
    "section": "Getting help",
    "text": "Getting help\n\nOne of the best ways to get started with ggplot is to Google what you want to do with the word ggplot. Then look through the images that come up. More often than not, the associated code is there. There are also ggplot galleries of images, one of them is here: https://plot.ly/ggplot2/\nLook at the end of this presentation and the syllabus. More help options there."
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#what-are-the-visual-cues-on-this-plot",
    "href": "slides/2024-08-28-daataviz.html#what-are-the-visual-cues-on-this-plot",
    "title": "Better Data Visualizations",
    "section": "What are the visual cues on this plot?",
    "text": "What are the visual cues on this plot?\n\n\n\n\n\n\n\n\n\n\n\n\n\nposition\nlength\nshape\narea/volume\nshade/color\n\nCoordinate System? Scale?"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#what-are-the-visual-cues-on-this-plot-1",
    "href": "slides/2024-08-28-daataviz.html#what-are-the-visual-cues-on-this-plot-1",
    "title": "Better Data Visualizations",
    "section": "What are the visual cues on this plot?",
    "text": "What are the visual cues on this plot?\n\n\n\n\n\n\n\n\n\n\n\n\n\nposition\nlength\nshape\narea/volume\nshade/color\n\nCoordinate System? Scale?"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#what-are-the-visual-cues-on-this-plot-2",
    "href": "slides/2024-08-28-daataviz.html#what-are-the-visual-cues-on-this-plot-2",
    "title": "Better Data Visualizations",
    "section": "What are the visual cues on this plot?",
    "text": "What are the visual cues on this plot?\n\n\n\n\n\n\n\n\n\n\n\n\n\nposition\nlength\nshape\narea/volume\nshade/color\n\nCoordinate System? Scale?"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#the-grammar-of-graphics-ggplot",
    "href": "slides/2024-08-28-daataviz.html#the-grammar-of-graphics-ggplot",
    "title": "Better Data Visualizations",
    "section": "The grammar of graphics ggplot",
    "text": "The grammar of graphics ggplot\ngeom: the geometric “shape” used to display data\n\nbar, point, line, ribbon, text, etc.\n\naesthetic: an attribute controlling how geom is displayed with respect to variables\n\nx position, y position, color, fill, shape, size, etc.\n\n\nguide: helps user convert visual data back into raw data (legends, axes)\nstat: a transformation applied to data before geom gets it\n\nexample: histograms work on binned data"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#set-up",
    "href": "slides/2024-08-28-daataviz.html#set-up",
    "title": "Better Data Visualizations",
    "section": "Set up",
    "text": "Set up\n\nlibrary(mosaic)\ndata(Births78)     # restore fresh version of Births78\nhead(Births78, 3)\n\n        date births wday year month day_of_year day_of_month day_of_week\n1 1978-01-01   7701  Sun 1978     1           1            1           1\n2 1978-01-02   7527  Mon 1978     1           2            2           2\n3 1978-01-03   8825  Tue 1978     1           3            3           3"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#how-do-we-make-this-plot",
    "href": "slides/2024-08-28-daataviz.html#how-do-we-make-this-plot",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?\n\n\n\n\n\n\n\n\n\n\n\n\nTwo Questions:\n\nWhat do we want R to do? (What is the goal?)\nWhat does R need to know?"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#how-do-we-make-this-plot-1",
    "href": "slides/2024-08-28-daataviz.html#how-do-we-make-this-plot-1",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?\n\n\n\n\n\n\n\n\n\n\n\n\n\nGoal: scatterplot = a plot with points\nWhat does R need to know?\n\ndata source: Births78\naesthetics:\n\ndate -&gt; x\nbirths -&gt; y\npoints (!)"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#how-do-we-make-this-plot-2",
    "href": "slides/2024-08-28-daataviz.html#how-do-we-make-this-plot-2",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot(data = Births78, \n       aes(x = date, y = births)) + \n  geom_point() +\n  ggtitle(\"US Births in 1978\")\n\nggplot() +\n  geom_point(data = Births78, \n             aes(x = date, y = births)) +\n  ggtitle(\"US Births in 1978\")"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#how-do-we-make-this-plot-3",
    "href": "slides/2024-08-28-daataviz.html#how-do-we-make-this-plot-3",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?\n\n\n\n\n\n\n\n\n\n\n\n\nWhat has changed?\n\nnew aesthetic: mapping color to day of week\n\nAdding day of week to the data set\nThe wday() function in the lubridate package computes the day of the week from a date."
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#how-do-we-make-this-plot-4",
    "href": "slides/2024-08-28-daataviz.html#how-do-we-make-this-plot-4",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?\n\n\n\n\n\n\n\n\n\n\n\n\n\nBirths78 &lt;-  \n  Births78 |&gt; \n  mutate(day_of_week = \n           wday(date, \n                label=TRUE))\n\nggplot(data = Births78,\n       aes(x = date\n           y = births, \n           color = day_of_week)) +\n  geom_point() +\n  ggtitle(\"US Births in 1978\")"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#how-do-we-make-this-plot-5",
    "href": "slides/2024-08-28-daataviz.html#how-do-we-make-this-plot-5",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#how-do-we-make-this-plot-6",
    "href": "slides/2024-08-28-daataviz.html#how-do-we-make-this-plot-6",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?\n\n\n\n\n\n\n\n\n\n\n\n\nlines instead of dots!\n\nggplot(data = Births78,\n         aes(x = date, \n             y = births,\n             color = day_of_week)) +\n  geom_line() +\n  ggtitle(\"US Births in 1978\")"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#how-do-we-make-this-plot-7",
    "href": "slides/2024-08-28-daataviz.html#how-do-we-make-this-plot-7",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#how-do-we-make-this-plot-8",
    "href": "slides/2024-08-28-daataviz.html#how-do-we-make-this-plot-8",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?\n\n\n\n\n\n\n\n\n\n\n\n\nNow there are two layers: one with points and one with lines\n\nggplot(data = Births78,\n       aes(x = date,\n           y = births,\n           color = day_of_week)) + \n  geom_point() +  \n  geom_line()+\n  ggtitle(\"US Births in 1978\")\n\n\nThe layers are placed one on top of the other: the points are below and the lines are above.\ndata and aes specified in ggplot() affect all geoms"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#what-does-this-code-do",
    "href": "slides/2024-08-28-daataviz.html#what-does-this-code-do",
    "title": "Better Data Visualizations",
    "section": "What does this code do?",
    "text": "What does this code do?\n\nggplot(data = Births78,\n       aes(x = date, y = births, color = \"navy\")) + \n  geom_point() +\n  ggtitle(\"US Births in 1978\")"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#what-does-this-code-do-1",
    "href": "slides/2024-08-28-daataviz.html#what-does-this-code-do-1",
    "title": "Better Data Visualizations",
    "section": "What does this code do?",
    "text": "What does this code do?\n\nggplot(data = Births78,\n       aes(x = date, y = births, color = \"navy\")) + \n  geom_point()  +\n  ggtitle(\"US Births in 1978\")\n\n\nThis is mapping the color aesthetic to a new variable with only one value (“navy”).\nSo all the dots get set to the same color, but it’s not navy."
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#setting-vs.-mapping",
    "href": "slides/2024-08-28-daataviz.html#setting-vs.-mapping",
    "title": "Better Data Visualizations",
    "section": "Setting vs. Mapping",
    "text": "Setting vs. Mapping\nIf we want to set the color to be navy for all of the dots, we do it outside the aes() designation:\n\nggplot(data = Births78,\n       aes(x = date, y = births)) +   # map variables \n  geom_point(color = \"navy\")    +   # set attributes\n  ggtitle(\"US Births in 1978\")\n\n\n\nNote that color = \"navy\" is now outside of the aesthetics list. That’s how ggplot2 distinguishes between mapping and setting."
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#how-do-we-make-this-plot-9",
    "href": "slides/2024-08-28-daataviz.html#how-do-we-make-this-plot-9",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#how-do-we-make-this-plot-10",
    "href": "slides/2024-08-28-daataviz.html#how-do-we-make-this-plot-10",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot(data = Births78,\n       aes(x = date,\n           y = births)) + \n  geom_line(aes(color = day_of_week)) +      \n  geom_point(color = \"navy\")  +         \n  ggtitle(\"US Births in 1978\")\n\n\nggplot() establishes the default data and aesthetics for the geoms, but each geom may change these defaults.\ngood practice: put into ggplot() the things that affect all (or most) of the layers; rest in geom_XXXX()"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#setting-vs.-mapping-again",
    "href": "slides/2024-08-28-daataviz.html#setting-vs.-mapping-again",
    "title": "Better Data Visualizations",
    "section": "Setting vs. Mapping (again)",
    "text": "Setting vs. Mapping (again)\nInformation gets passed to the plot via:\n\nmap the variable information inside the aes (aesthetic) command\nset the non-variable information outside the aes (aesthetic) command"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#other-geoms",
    "href": "slides/2024-08-28-daataviz.html#other-geoms",
    "title": "Better Data Visualizations",
    "section": "Other geoms",
    "text": "Other geoms\n\napropos(\"^geom_\")\n\n [1] \"geom_abline\"                  \"geom_area\"                   \n [3] \"geom_ash\"                     \"geom_bar\"                    \n [5] \"geom_bin_2d\"                  \"geom_bin2d\"                  \n [7] \"geom_blank\"                   \"geom_boxplot\"                \n [9] \"geom_bracket\"                 \"geom_col\"                    \n[11] \"geom_contour\"                 \"geom_contour_filled\"         \n[13] \"geom_count\"                   \"geom_crossbar\"               \n[15] \"geom_curve\"                   \"geom_density\"                \n[17] \"geom_density_2d\"              \"geom_density_2d_filled\"      \n[19] \"geom_density_line\"            \"geom_density_ridges\"         \n[21] \"geom_density_ridges_gradient\" \"geom_density_ridges2\"        \n[23] \"geom_density2d\"               \"geom_density2d_filled\"       \n[25] \"geom_dotplot\"                 \"geom_errorbar\"               \n[27] \"geom_errorbarh\"               \"geom_exec\"                   \n[29] \"geom_freqpoly\"                \"geom_function\"               \n[31] \"geom_hex\"                     \"geom_histogram\"              \n[33] \"geom_hline\"                   \"geom_jitter\"                 \n[35] \"geom_label\"                   \"geom_label_repel\"            \n[37] \"geom_line\"                    \"geom_linerange\"              \n[39] \"geom_lm\"                      \"geom_map\"                    \n[41] \"geom_mosaic\"                  \"geom_mosaic_jitter\"          \n[43] \"geom_mosaic_text\"             \"geom_path\"                   \n[45] \"geom_pictogram\"               \"geom_point\"                  \n[47] \"geom_pointrange\"              \"geom_polygon\"                \n[49] \"geom_pwc\"                     \"geom_qq\"                     \n[51] \"geom_qq_line\"                 \"geom_quantile\"               \n[53] \"geom_rangeframe\"              \"geom_raster\"                 \n[55] \"geom_rect\"                    \"geom_ribbon\"                 \n[57] \"geom_ridgeline\"               \"geom_ridgeline_gradient\"     \n[59] \"geom_rug\"                     \"geom_segment\"                \n[61] \"geom_sf\"                      \"geom_sf_label\"               \n[63] \"geom_sf_text\"                 \"geom_signif\"                 \n[65] \"geom_smooth\"                  \"geom_spline\"                 \n[67] \"geom_spoke\"                   \"geom_step\"                   \n[69] \"geom_stripped_cols\"           \"geom_stripped_rows\"          \n[71] \"geom_text\"                    \"geom_text_repel\"             \n[73] \"geom_tile\"                    \"geom_tufteboxplot\"           \n[75] \"geom_violin\"                  \"geom_vline\"                  \n[77] \"geom_vridgeline\"              \"geom_waffle\""
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#other-geoms-1",
    "href": "slides/2024-08-28-daataviz.html#other-geoms-1",
    "title": "Better Data Visualizations",
    "section": "Other geoms",
    "text": "Other geoms\nhelp pages will tell you their aesthetics, default stats, etc.\n\n?geom_area             # for example"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#lets-try-geom_area",
    "href": "slides/2024-08-28-daataviz.html#lets-try-geom_area",
    "title": "Better Data Visualizations",
    "section": "Let’s try geom_area",
    "text": "Let’s try geom_area\n\n\n\nggplot(data = Births78,\n       aes(x = date,\n           y = births, \n           fill = day_of_week)) + \n  geom_area()+\n  ggtitle(\"US Births in 1978\")"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#lets-try-geom_area-1",
    "href": "slides/2024-08-28-daataviz.html#lets-try-geom_area-1",
    "title": "Better Data Visualizations",
    "section": "Let’s try geom_area",
    "text": "Let’s try geom_area\n\n\n\nggplot(data = Births78,\n       aes(x = date, y = births, fill = day_of_week)) + \n  geom_area()+\n  ggtitle(\"US Births in 1978\")\n\n\n\n\n\n\n\n\n\n… not a good plot\n\noverplotting is hiding much of the data\nextending y-axis to 0 may or may not be desirable."
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#side-note-what-makes-a-plot-good",
    "href": "slides/2024-08-28-daataviz.html#side-note-what-makes-a-plot-good",
    "title": "Better Data Visualizations",
    "section": "Side note: what makes a plot good?",
    "text": "Side note: what makes a plot good?\nMost (all?) graphics are intended to help us make comparisons\n\nHow does something change over time?\nDo my treatments matter? How much?\nDo treatment and control respond the same way?\n\n\n\n\n\n\n\nKey plot metric\n\n\nDoes my plot make the comparisons I am interested in:\n\neasily, and\naccurately?"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#time-for-some-different-data",
    "href": "slides/2024-08-28-daataviz.html#time-for-some-different-data",
    "title": "Better Data Visualizations",
    "section": "Time for some different data",
    "text": "Time for some different data\nHELPrct: Health Evaluation and Linkage to Primary care randomized clinical trial. Subjects admitted for treatment for addiction to one of three substances.\n\nhead(HELPrct)\n\n  age anysubstatus anysub cesd d1 daysanysub dayslink drugrisk e2b female\n1  37            1    yes   49  3        177      225        0  NA      0\n2  37            1    yes   30 22          2       NA        0  NA      0\n3  26            1    yes   39  0          3      365       20  NA      0\n4  39            1    yes   15  2        189      343        0   1      1\n5  32            1    yes   39 12          2       57        0   1      0\n6  47            1    yes    6  1         31      365        0  NA      1\n     sex g1b homeless i1 i2 id indtot linkstatus link   mcs  pcs pss_fr racegrp\n1   male yes   housed 13 26  1     39          1  yes 25.11 58.4      0   black\n2   male yes homeless 56 62  2     43         NA &lt;NA&gt; 26.67 36.0      1   white\n3   male  no   housed  0  0  3     41          0   no  6.76 74.8     13   black\n4 female  no   housed  5  5  4     28          0   no 43.97 61.9     11   white\n5   male  no homeless 10 13  5     38          1  yes 21.68 37.3     10   black\n6 female  no   housed  4  4  6     29          0   no 55.51 46.5      5   black\n  satreat sexrisk substance treat avg_drinks max_drinks hospitalizations\n1      no       4   cocaine   yes         13         26                3\n2      no       7   alcohol   yes         56         62               22\n3      no       2    heroin    no          0          0                0\n4     yes       4    heroin    no          5          5                2\n5      no       6   cocaine    no         10         13               12\n6      no       5   cocaine   yes          4          4                1"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#who-are-the-people-in-the-study",
    "href": "slides/2024-08-28-daataviz.html#who-are-the-people-in-the-study",
    "title": "Better Data Visualizations",
    "section": "Who are the people in the study?",
    "text": "Who are the people in the study?\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot(data = HELP_data,\n       aes(x = substance)) + \n  geom_bar()+\n  ggtitle(\"HELP trial\")\n\n\nHmm. What’s up with y?\n\nstat_bin() is being applied to the data before the geom_bar() gets to do its thing. Binning creates the y values."
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#who-are-the-people-in-the-study-1",
    "href": "slides/2024-08-28-daataviz.html#who-are-the-people-in-the-study-1",
    "title": "Better Data Visualizations",
    "section": "Who are the people in the study?",
    "text": "Who are the people in the study?\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot(data = HELP_data,\n       aes(x = substance,\n           fill = children)) + \n  geom_bar()+\n  ggtitle(\"HELP trial\")"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#who-are-the-people-in-the-study-2",
    "href": "slides/2024-08-28-daataviz.html#who-are-the-people-in-the-study-2",
    "title": "Better Data Visualizations",
    "section": "Who are the people in the study?",
    "text": "Who are the people in the study?\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot(HELP_data,\n       aes(x = substance,\n           fill = children)) + \n  geom_bar(position = \"fill\") +\n  ylab(\"actually, percent\")+\n  ggtitle(\"HELP trial\")"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#how-old-are-people-in-the-help-study",
    "href": "slides/2024-08-28-daataviz.html#how-old-are-people-in-the-help-study",
    "title": "Better Data Visualizations",
    "section": "How old are people in the HELP study?",
    "text": "How old are people in the HELP study?\n\n\n\n\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n\n\n\n\n\n\n\n\n\n\n\nggplot(data = HELP_data,\n       aes(x = age)) + \n  geom_histogram()+\n  ggtitle(\"HELP trial\")\n\nNotice the messages\n\nstat_bin: Histograms are not mapping the raw data but binned data.\nstat_bin() performs the data transformation.\nbinwidth: a default binwidth has been selected, but we should really choose our own."
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#setting-the-binwidth-manually",
    "href": "slides/2024-08-28-daataviz.html#setting-the-binwidth-manually",
    "title": "Better Data Visualizations",
    "section": "Setting the binwidth manually",
    "text": "Setting the binwidth manually\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot(data = HELP_data,\n       aes(x = age)) + \n  geom_histogram(binwidth = 2)+\n  ggtitle(\"HELP trial\")"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#how-old-are-people-in-the-help-study-other-geoms",
    "href": "slides/2024-08-28-daataviz.html#how-old-are-people-in-the-help-study-other-geoms",
    "title": "Better Data Visualizations",
    "section": "How old are people in the HELP study? – Other geoms",
    "text": "How old are people in the HELP study? – Other geoms\n\nggplot(data = HELP_data,\n       aes(x = age)) + \n  geom_freqpoly(binwidth = 2)+\n  ggtitle(\"HELP clinical trial at detoxification unit\")\n\n\n\n\n\n\n\n\n\nggplot(data = HELP_data,\n       aes(x = age)) + \n  geom_density()+\n  ggtitle(\"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#selecting-stat-and-geom-manually",
    "href": "slides/2024-08-28-daataviz.html#selecting-stat-and-geom-manually",
    "title": "Better Data Visualizations",
    "section": "Selecting stat and geom manually",
    "text": "Selecting stat and geom manually\nEvery geom comes with a default stat\n\nfor simple cases, the stat is stat_identity() which does nothing\nwe can mix and match geoms and stats however we like\n\n\nggplot(data = HELP_data,\n       aes(x = age)) + \n  geom_line(stat = \"density\")+\n  ggtitle(\"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#selecting-stat-and-geom-manually-1",
    "href": "slides/2024-08-28-daataviz.html#selecting-stat-and-geom-manually-1",
    "title": "Better Data Visualizations",
    "section": "Selecting stat and geom manually",
    "text": "Selecting stat and geom manually\nEvery stat comes with a default geom, every geom with a default stat\n\nwe can specify stats instead of geom, if we prefer\nwe can mix and match geoms and stats however we like\n\n\nggplot(data = HELP_data,\n       aes(x = age)) + \n  stat_density(geom = \"line\")+\n  ggtitle(\"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#more-combinations",
    "href": "slides/2024-08-28-daataviz.html#more-combinations",
    "title": "Better Data Visualizations",
    "section": "More combinations",
    "text": "More combinations\n\nggplot(data = HELP_data,\n       aes(x = age)) + \n  geom_point(stat = \"bin\", binwidth = 3) + \n  geom_line(stat = \"bin\", binwidth = 3)  +\n  ggtitle(\"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#more-combinations-1",
    "href": "slides/2024-08-28-daataviz.html#more-combinations-1",
    "title": "Better Data Visualizations",
    "section": "More combinations",
    "text": "More combinations\n\nggplot(data = HELP_data,\n       aes(x = age)) + \n  geom_area(stat = \"bin\", binwidth = 3)  +\n  ggtitle(\"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#more-combinations-2",
    "href": "slides/2024-08-28-daataviz.html#more-combinations-2",
    "title": "Better Data Visualizations",
    "section": "More combinations",
    "text": "More combinations\n\nggplot(data = HELP_data,\n       aes(x = age)) + \n  geom_point(stat = \"bin\", \n             binwidth = 3, \n             aes(size = ..count..)) +\n  geom_line(stat = \"bin\", binwidth = 3) +\n  ggtitle(\"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#how-much-drinking-i1",
    "href": "slides/2024-08-28-daataviz.html#how-much-drinking-i1",
    "title": "Better Data Visualizations",
    "section": "How much drinking? (i1)",
    "text": "How much drinking? (i1)\n\nHELP_data |&gt; \n  ggplot(aes(x = i1)) + geom_histogram()+\n  ggtitle(\"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#how-much-drinking-i1-1",
    "href": "slides/2024-08-28-daataviz.html#how-much-drinking-i1-1",
    "title": "Better Data Visualizations",
    "section": "How much drinking? (i1)",
    "text": "How much drinking? (i1)\n\nHELP_data |&gt; \n  ggplot(aes(x = i1)) + geom_density()+\n  ggtitle(\"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#how-much-drinking-i1-2",
    "href": "slides/2024-08-28-daataviz.html#how-much-drinking-i1-2",
    "title": "Better Data Visualizations",
    "section": "How much drinking? (i1)",
    "text": "How much drinking? (i1)\n\nHELP_data |&gt; \n  ggplot(aes(x = i1)) + geom_area(stat = \"density\")+\n  ggtitle(\"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#covariates-adding-in-more-variables",
    "href": "slides/2024-08-28-daataviz.html#covariates-adding-in-more-variables",
    "title": "Better Data Visualizations",
    "section": "Covariates: Adding in more variables",
    "text": "Covariates: Adding in more variables\nUsing color and linetype:\n\nggplot(data = HELP_data,\n       aes(x = i1,\n           color = substance,\n           linetype = children)) + \n  geom_line(stat = \"density\")+\n  ggtitle(\"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#using-color-and-facets",
    "href": "slides/2024-08-28-daataviz.html#using-color-and-facets",
    "title": "Better Data Visualizations",
    "section": "Using color and facets",
    "text": "Using color and facets\n\nggplot(data = HELP_data,\n       aes(x = i1, color = substance)) + \n  geom_line(stat = \"density\") + \n  facet_grid( . ~ children )+\n  ggtitle(\"HELP clinical trial at detoxification unit\")\n\n\n\n\n\n\n\n\n\nggplot(data = HELP_data,\n       aes(x = i1, color = substance)) + \n  geom_line(stat = \"density\") + \n  facet_grid( children ~ . )+\n  ggtitle(\"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#boxplots",
    "href": "slides/2024-08-28-daataviz.html#boxplots",
    "title": "Better Data Visualizations",
    "section": "Boxplots",
    "text": "Boxplots\nBoxplots use stat_quantile() (five number summary).\nThe quantitative variable must be y, and there must be an additional x variable.\n\nHELP_data |&gt; \n  ggplot(aes(x = substance, y = age, color = children)) + \n  geom_boxplot()+\n  ggtitle(\"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#horizontal-boxplots",
    "href": "slides/2024-08-28-daataviz.html#horizontal-boxplots",
    "title": "Better Data Visualizations",
    "section": "Horizontal boxplots",
    "text": "Horizontal boxplots\nHorizontal boxplots are obtained by flipping the coordinate system:\n\ncoord_flip() may be used with other plots as well to reverse the roles of x and y on the plot.\n\n\nggplot(data = HELP_data,\n       aes(x = substance, \n           y = age, \n           color = children)) + \n  geom_boxplot() +\n  coord_flip()+\n  ggtitle(\"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#axes-scaling-with-boxplots",
    "href": "slides/2024-08-28-daataviz.html#axes-scaling-with-boxplots",
    "title": "Better Data Visualizations",
    "section": "Axes scaling with boxplots",
    "text": "Axes scaling with boxplots\nWe can scale the continuous axis\n\nggplot(data = HELP_data,\n       aes(x = substance, \n           y = age, \n           color = children)) + \n  geom_boxplot() +\n  coord_trans(y = \"exp\")+\n  ggtitle(\"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#give-me-some-space",
    "href": "slides/2024-08-28-daataviz.html#give-me-some-space",
    "title": "Better Data Visualizations",
    "section": "Give me some space",
    "text": "Give me some space\nWe’ve triggered a new feature: dodge (for dodging things left/right). We can control how much if we set the dodge manually.\n\nggplot(data = HELP_data,\n       aes(x = substance, \n           y = age, \n           color = children)) + \n  geom_boxplot(position = position_dodge(width=1)) +\n  ggtitle(\"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#issues-with-bigger-data",
    "href": "slides/2024-08-28-daataviz.html#issues-with-bigger-data",
    "title": "Better Data Visualizations",
    "section": "Issues with bigger data",
    "text": "Issues with bigger data\n\nAlthough we can see a generally positive association (as we would expect), the overplotting may be hiding information.\n\n\nlibrary(NHANES)\ndim(NHANES)\n\n[1] 10000    76\n\nggplot(data = NHANES,\n       aes(x = Height, y = Weight)) +\n  geom_point() + \n  facet_grid( Gender ~ PregnantNow )"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#using-alpha-opacity",
    "href": "slides/2024-08-28-daataviz.html#using-alpha-opacity",
    "title": "Better Data Visualizations",
    "section": "Using alpha (opacity)",
    "text": "Using alpha (opacity)\nOne way to deal with overplotting is to set the opacity low.\n\nggplot(data = NHANES,\n       aes(x = Height, y = Weight)) +\n  geom_point(alpha=0.01) + \n  facet_grid( Gender ~ PregnantNow )"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#geom_density2d",
    "href": "slides/2024-08-28-daataviz.html#geom_density2d",
    "title": "Better Data Visualizations",
    "section": "geom_density2d",
    "text": "geom_density2d\nAlternatively (or simultaneously) we might prefer a different geom altogether.\n\nggplot(data = NHANES,\n       aes(x = Height, y = Weight)) +\n  geom_density2d() + \n  facet_grid( Gender ~ PregnantNow )"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#multiple-layers",
    "href": "slides/2024-08-28-daataviz.html#multiple-layers",
    "title": "Better Data Visualizations",
    "section": "Multiple layers",
    "text": "Multiple layers\n\n\n\nggplot(data = HELP_data, \n       aes(x = children, y = age)) +\n  geom_boxplot(outlier.size = 0) +\n  geom_point(alpha=.6) +\n  coord_flip()+\n  ggtitle(\"HELP clinical trial at detoxification unit\")\n\n\n\n\n\n\n\n\n\n\nggplot(data = HELP_data,\n       aes(x = children, y = age)) +\n  geom_boxplot(outlier.size = 0) +\n  geom_jitter(alpha=.6, width = 0.1) +\n  coord_flip()+\n  ggtitle(\"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#multiple-layers-1",
    "href": "slides/2024-08-28-daataviz.html#multiple-layers-1",
    "title": "Better Data Visualizations",
    "section": "Multiple layers",
    "text": "Multiple layers\n\nggplot(data = HELP_data,\n       aes(x = children, y = age)) +\n  geom_boxplot(outlier.size = 0) +\n  geom_point(alpha=.6, \n             position = position_jitter(width=.1, height=0)) +\n  coord_flip()+\n  ggtitle(\"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#things-i-havent-mentioned-much",
    "href": "slides/2024-08-28-daataviz.html#things-i-havent-mentioned-much",
    "title": "Better Data Visualizations",
    "section": "Things I haven’t mentioned (much)",
    "text": "Things I haven’t mentioned (much)\n\ncoords (coord_flip() is good to know about)\nthemes (for customizing appearance)\nposition (position_dodge(), position_jitterdodge(), position_stack(), etc.)\ntransforming axes"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#themes",
    "href": "slides/2024-08-28-daataviz.html#themes",
    "title": "Better Data Visualizations",
    "section": "themes",
    "text": "themes\n\nlibrary(ggthemes)\nggplot(Births78, aes(x = date, y = births)) + \n  geom_point() + \n  theme_wsj()"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#jitterdodge",
    "href": "slides/2024-08-28-daataviz.html#jitterdodge",
    "title": "Better Data Visualizations",
    "section": "jitterdodge()",
    "text": "jitterdodge()\n\nggplot(data = HELP_data, \n       aes(x = substance, y = age, color = children)) +\n  geom_boxplot(coef = 10, position = position_dodge()) +\n  geom_point(aes(color = children, \n                 fill = children), \n             position = position_jitterdodge()) +\n  ggtitle(\"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#a-little-bit-of-everything",
    "href": "slides/2024-08-28-daataviz.html#a-little-bit-of-everything",
    "title": "Better Data Visualizations",
    "section": "A little bit of everything",
    "text": "A little bit of everything\n\nggplot(data = HELP_data, aes(x = substance, y = age, color = children)) +\n  geom_boxplot(coef = 10, position = position_dodge(width=1)) +\n  geom_point(aes(fill = children), alpha=.5, \n             position = position_jitterdodge(dodge.width=1, jitter.width = 0.2)) + \n  facet_wrap(~homeless)+\n  ggtitle(\"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#want-to-learn-more",
    "href": "slides/2024-08-28-daataviz.html#want-to-learn-more",
    "title": "Better Data Visualizations",
    "section": "Want to learn more?",
    "text": "Want to learn more?\n\ndocs.ggplot2.org/\nR for Data Science by Hadley Wickham and Garrett Grolemund"
  },
  {
    "objectID": "slides/2024-08-28-daataviz.html#whats-around-the-corner",
    "href": "slides/2024-08-28-daataviz.html#whats-around-the-corner",
    "title": "Better Data Visualizations",
    "section": "What’s around the corner?",
    "text": "What’s around the corner?\nshiny\n\ninteractive graphics / modeling\nhttps://shiny.rstudio.com/\n\nplotly\n\nPlotly is an R package for creating interactive web-based graphs via plotly’s JavaScript graphing library, plotly.js. The plotly R libary contains the ggplotly function , which will convert ggplot2 figures into a Plotly object. Furthermore, you have the option of manipulating the Plotly object with the style function.\n\n\nhttps://plot.ly/ggplot2/getting-started/\n\ngganimate\n\ngganimate tutorial"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#nssd",
    "href": "slides/2024-08-28-dataviz.html#nssd",
    "title": "Better Data Visualizations",
    "section": "NSSD:",
    "text": "NSSD:\n\nWhat was Hilary trying to answer in her data collection?\nName two of Hilary’s main hurdles in gathering accurate data.\nWhich is better: high touch (manual) or low touch (automatic) data collection? Why?\nWhat additional covariates are needed / desired? Any problems with them?\nHow much data does she need?"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#grammar-of-graphics",
    "href": "slides/2024-08-28-dataviz.html#grammar-of-graphics",
    "title": "Better Data Visualizations",
    "section": "Grammar of graphics",
    "text": "Grammar of graphics\nYau (2013) gives us nine visual cues, and Wickham (2014) translates them into a language using ggplot2.\n\nVisual Cues: the aspects of the figure where we should focus.\nPosition (numerical) where in relation to other things?\nLength (numerical) how big (in one dimension)?\nAngle (numerical) how wide? parallel to something else?\nDirection (numerical) at what slope? In a time series, going up or down?\nShape (categorical) belonging to what group?\nArea (numerical) how big (in two dimensions)? Beware of improper scaling!\nVolume (numerical) how big (in three dimensions)? Beware of improper scaling!\nShade (either) to what extent? how severely?\nColor (either) to what extent? how severely? Beware of red/green color blindness.\nCoordinate System: rectangular, polar, geographic, etc.\nScale: numeric (linear? logarithmic?), categorical (ordered?), time\nContext: in comparison to what (think back to ideas from Tufte)"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#pieces-of-the-graph",
    "href": "slides/2024-08-28-dataviz.html#pieces-of-the-graph",
    "title": "Better Data Visualizations",
    "section": "Pieces of the Graph",
    "text": "Pieces of the Graph\n\n\nVisual Cues of Yau (2013):\nPosition (numerical)\nLength (numerical)\nAngle (numerical)\nDirection (numerical)\nShape (categorical)\nArea (numerical)\nVolume (numerical)\nShade (either)\nColor (either)"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#order-matters",
    "href": "slides/2024-08-28-dataviz.html#order-matters",
    "title": "Better Data Visualizations",
    "section": "Order Matters",
    "text": "Order Matters"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#cues-together",
    "href": "slides/2024-08-28-dataviz.html#cues-together",
    "title": "Better Data Visualizations",
    "section": "Cues Together",
    "text": "Cues Together"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#attributes",
    "href": "slides/2024-08-28-dataviz.html#attributes",
    "title": "Better Data Visualizations",
    "section": "Attributes",
    "text": "Attributes\nAttributes can focus your reader’s attention.1\n\n\n\n\n\n\n\n\n\nimage credit: Better Data Visualization by Schwabish"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#advice-for-plotting",
    "href": "slides/2024-08-28-dataviz.html#advice-for-plotting",
    "title": "Better Data Visualizations",
    "section": "Advice for Plotting",
    "text": "Advice for Plotting\n\n\n\nBasic plotting\n\n\n\nAvoid having other graph elements interfere with data\nUse visually prominent symbols\nAvoid over-plotting (One way to avoid over plotting: jitter the values)\nDifferent values of data may obscure each other\nInclude all or nearly all of the data\nFill data region"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#advice-for-plotting-1",
    "href": "slides/2024-08-28-dataviz.html#advice-for-plotting-1",
    "title": "Better Data Visualizations",
    "section": "Advice for Plotting",
    "text": "Advice for Plotting\n\n\n\nBasic plotting\nEliminate superfluous material\n\n\n\nChart junk & stuff that adds no meaning, e.g. butterflies on top of barplots, background images\nExtra tick marks and grid lines\nUnnecessary text and arrows\nDecimal places beyond the measurement error or the level of difference"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#advice-for-plotting-2",
    "href": "slides/2024-08-28-dataviz.html#advice-for-plotting-2",
    "title": "Better Data Visualizations",
    "section": "Advice for Plotting",
    "text": "Advice for Plotting\n\n\n\nBasic plotting\nEliminate superfluous material\nFacilitate comparisons\n\n\n\nPut juxtaposed plots on same scale\nMake it easy to distinguish elements of superposed plots (e.g. color)\nEmphasizes the important difference\nComparison: volume, area, height (be careful, volume can seem bigger than you mean it to)"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#advice-for-plotting-3",
    "href": "slides/2024-08-28-dataviz.html#advice-for-plotting-3",
    "title": "Better Data Visualizations",
    "section": "Advice for Plotting",
    "text": "Advice for Plotting\n\n\n\nBasic plotting\nEliminate superfluous material\nFacilitate comparisons\nChoosing the scale\n\n\n\nKeep scales on x and y axes the same for both plots to facilitate the comparison\nZoom in to focus on the region that contains the bulk of the data\nKeep the scale the same throughout the plot (i.e. don’t change it mid-axis)\nOrigin need not be on the scale\nChoose a scale that improves resolution\nAvoid jiggling the baseline"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#advice-for-plotting-4",
    "href": "slides/2024-08-28-dataviz.html#advice-for-plotting-4",
    "title": "Better Data Visualizations",
    "section": "Advice for Plotting",
    "text": "Advice for Plotting\n\n\n\nBasic plotting\nEliminate superfluous material\nFacilitate comparisons\nChoosing the scale\nHow to make a plot information rich\n\n\n\nDescribe what you see in the caption\nAdd context with reference markers (lines and points) including text\nAdd legends and labels\nUse color and plotting symbols to add more information\nPlot the same thing more than once in different ways/scales\nReduce clutter"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#advice-for-plotting-5",
    "href": "slides/2024-08-28-dataviz.html#advice-for-plotting-5",
    "title": "Better Data Visualizations",
    "section": "Advice for Plotting",
    "text": "Advice for Plotting\n\n\n\nBasic plotting\nEliminate superfluous material\nFacilitate comparisons\nChoosing the scale\nHow to make a plot information rich\nCaptions should\n\n\n\nBe comprehensive\nSelf-contained\nDescribe what has been graphed\nDraw attention to important features\nDescribe conclusions drawn from graph"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#advice-for-plotting-6",
    "href": "slides/2024-08-28-dataviz.html#advice-for-plotting-6",
    "title": "Better Data Visualizations",
    "section": "Advice for Plotting",
    "text": "Advice for Plotting\n\n\n\nBasic plotting\nEliminate superfluous material\nFacilitate comparisons\nChoosing the scale\nHow to make a plot information rich\nCaptions should\nGood Plot Making Practice\n\n\n\nPut major conclusions in graphical form\nProvide reference information\nProof read for clarity and consistency\nGraphing is an iterative process\nMultiplicity is OK, i.e. two plots of the same variable may provide different messages\nMake plots data rich"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#getting-help",
    "href": "slides/2024-08-28-dataviz.html#getting-help",
    "title": "Better Data Visualizations",
    "section": "Getting help",
    "text": "Getting help\n\nOne of the best ways to get started with ggplot is to Google what you want to do with the word ggplot. Then look through the images that come up. More often than not, the associated code is there. There are also ggplot galleries of images, one of them is here: https://plot.ly/ggplot2/\nLook at the end of this presentation and the syllabus. More help options there."
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#what-are-the-visual-cues-on-this-plot",
    "href": "slides/2024-08-28-dataviz.html#what-are-the-visual-cues-on-this-plot",
    "title": "Better Data Visualizations",
    "section": "What are the visual cues on this plot?",
    "text": "What are the visual cues on this plot?\n\n\n\n\n\n\n\n\n\n\n\n\n\nposition\nlength\nshape\narea/volume\nshade/color"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#what-are-the-visual-cues-on-this-plot-1",
    "href": "slides/2024-08-28-dataviz.html#what-are-the-visual-cues-on-this-plot-1",
    "title": "Better Data Visualizations",
    "section": "What are the visual cues on this plot?",
    "text": "What are the visual cues on this plot?\n\n\n\n\n\n\n\n\n\n\n\n\n\nposition\nlength\nshape\narea/volume\nshade/color"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#what-are-the-visual-cues-on-this-plot-2",
    "href": "slides/2024-08-28-dataviz.html#what-are-the-visual-cues-on-this-plot-2",
    "title": "Better Data Visualizations",
    "section": "What are the visual cues on this plot?",
    "text": "What are the visual cues on this plot?\n\n\n\n\n\n\n\n\n\n\n\n\n\nposition\nlength\nshape\narea/volume\nshade/color"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#the-grammar-of-graphics-ggplot",
    "href": "slides/2024-08-28-dataviz.html#the-grammar-of-graphics-ggplot",
    "title": "Better Data Visualizations",
    "section": "The grammar of graphics ggplot",
    "text": "The grammar of graphics ggplot\ngeom: the geometric “shape” used to display data\n\nbar, point, line, ribbon, text, etc.\n\naesthetic: an attribute controlling how geom is displayed with respect to variables\n\nx position, y position, color, fill, shape, size, etc.\n\n\nguide: helps user convert visual data back into raw data (legends, axes)\nstat: a transformation applied to data before geom gets it\n\nexample: histograms work on binned data"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#set-up",
    "href": "slides/2024-08-28-dataviz.html#set-up",
    "title": "Better Data Visualizations",
    "section": "Set up",
    "text": "Set up\n\nlibrary(mosaic)\ndata(Births78)\n\n\nhead(Births78)\n\n\n\n\n\n\n\n\n\n\ndate\nbirths\nwday\nyear\nmonth\nday_of_year\nday_of_month\nday_of_week\n\n\n\n\n1978-01-01\n7701\nSun\n1978\n1\n1\n1\n1\n\n\n1978-01-02\n7527\nMon\n1978\n1\n2\n2\n2\n\n\n1978-01-03\n8825\nTue\n1978\n1\n3\n3\n3\n\n\n1978-01-04\n8859\nWed\n1978\n1\n4\n4\n4\n\n\n1978-01-05\n9043\nThu\n1978\n1\n5\n5\n5\n\n\n1978-01-06\n9208\nFri\n1978\n1\n6\n6\n6"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#how-do-we-make-this-plot",
    "href": "slides/2024-08-28-dataviz.html#how-do-we-make-this-plot",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?\n\n\n\n\n\n\n\n\n\n\n\n\nTwo Questions:\n\nWhat do we want R to do? (What is the goal?)\nWhat does R need to know?"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#how-do-we-make-this-plot-1",
    "href": "slides/2024-08-28-dataviz.html#how-do-we-make-this-plot-1",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?\n\n\n\n\n\n\n\n\n\n\n\n\n\nGoal: scatterplot = a plot with points\nWhat does R need to know?\n\ndata source: Births78\naesthetics:\n\ndate -&gt; x\nbirths -&gt; y\npoints (!)"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#how-do-we-make-this-plot-2",
    "href": "slides/2024-08-28-dataviz.html#how-do-we-make-this-plot-2",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot(data = Births78, \n       aes(x = date, y = births)) + \n  geom_point() +\n  labs(title = \"US Births in 1978\")\n\nggplot() +\n  geom_point(data = Births78, \n             aes(x = date, y = births)) +\n  labs(title = \"US Births in 1978\")"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#how-do-we-make-this-plot-3",
    "href": "slides/2024-08-28-dataviz.html#how-do-we-make-this-plot-3",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?\n\n\n\n\n\n\n\n\n\n\n\n\nWhat has changed?\n\nnew aesthetic: mapping color to day of week"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#how-do-we-make-this-plot-4",
    "href": "slides/2024-08-28-dataviz.html#how-do-we-make-this-plot-4",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot(data = Births78,\n       aes(x = date,\n           y = births, \n           color = wday)) +\n  geom_point() +\n  labs(title = \"US Births in 1978\")"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#how-do-we-make-this-plot-5",
    "href": "slides/2024-08-28-dataviz.html#how-do-we-make-this-plot-5",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#how-do-we-make-this-plot-6",
    "href": "slides/2024-08-28-dataviz.html#how-do-we-make-this-plot-6",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?\n\n\n\n\n\n\n\n\n\n\n\n\nlines instead of dots!\n\nggplot(data = Births78,\n         aes(x = date, \n             y = births,\n             color = wday)) +\n  geom_line() +\n  labs(title = \"US Births in 1978\")"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#how-do-we-make-this-plot-7",
    "href": "slides/2024-08-28-dataviz.html#how-do-we-make-this-plot-7",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#how-do-we-make-this-plot-8",
    "href": "slides/2024-08-28-dataviz.html#how-do-we-make-this-plot-8",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?\n\n\n\n\n\n\n\n\n\n\n\n\nNow there are two layers: one with points and one with lines\n\nggplot(data = Births78,\n       aes(x = date,\n           y = births,\n           color = wday)) + \n  geom_point() +  \n  geom_line()+\n  labs(title = \"US Births in 1978\")\n\n\nThe layers are placed one on top of the other: the points are below and the lines are above.\ndata and aes specified in ggplot() affect all geoms"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#what-does-this-code-do",
    "href": "slides/2024-08-28-dataviz.html#what-does-this-code-do",
    "title": "Better Data Visualizations",
    "section": "What does this code do?",
    "text": "What does this code do?\n\nggplot(data = Births78,\n       aes(x = date, y = births, color = \"navy\")) + \n  geom_point() +\n  labs(title = \"US Births in 1978\")"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#what-does-this-code-do-1",
    "href": "slides/2024-08-28-dataviz.html#what-does-this-code-do-1",
    "title": "Better Data Visualizations",
    "section": "What does this code do?",
    "text": "What does this code do?\n\nggplot(data = Births78,\n       aes(x = date, y = births, color = \"navy\")) + \n  geom_point()  +\n  labs(title = \"US Births in 1978\")\n\n\nThis is mapping the color aesthetic to a new variable with only one value (“navy”).\nSo all the dots get set to the same color, but it’s not navy."
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#setting-vs.-mapping",
    "href": "slides/2024-08-28-dataviz.html#setting-vs.-mapping",
    "title": "Better Data Visualizations",
    "section": "Setting vs. Mapping",
    "text": "Setting vs. Mapping\nIf we want to set the color to be navy for all of the dots, we do it outside the aes() designation:\n\nggplot(data = Births78,\n       aes(x = date, y = births)) +   # map variables \n  geom_point(color = \"navy\")    +   # set attributes\n  labs(title = \"US Births in 1978\")\n\n\n\nNote that color = \"navy\" is now outside of the aesthetics list. That’s how ggplot2 distinguishes between mapping and setting."
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#how-do-we-make-this-plot-9",
    "href": "slides/2024-08-28-dataviz.html#how-do-we-make-this-plot-9",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#how-do-we-make-this-plot-10",
    "href": "slides/2024-08-28-dataviz.html#how-do-we-make-this-plot-10",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot(data = Births78,\n       aes(x = date,\n           y = births)) + \n  geom_line(aes(color = wday)) +      \n  geom_point(color = \"navy\")  +         \n  labs(title = \"US Births in 1978\")\n\n\nggplot() establishes the default data and aesthetics for the geoms, but each geom may change these defaults.\ngood practice: put into ggplot() the things that affect all (or most) of the layers; rest in geom_XXXX()"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#setting-vs.-mapping-again",
    "href": "slides/2024-08-28-dataviz.html#setting-vs.-mapping-again",
    "title": "Better Data Visualizations",
    "section": "Setting vs. Mapping (again)",
    "text": "Setting vs. Mapping (again)\nInformation gets passed to the plot via:\n\nmap the variable information inside the aes (aesthetic) command\nset the non-variable information outside the aes (aesthetic) command"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#other-geoms",
    "href": "slides/2024-08-28-dataviz.html#other-geoms",
    "title": "Better Data Visualizations",
    "section": "Other geoms",
    "text": "Other geoms\n\napropos(\"^geom_\")\n\n [1] \"geom_abline\"                  \"geom_area\"                   \n [3] \"geom_ash\"                     \"geom_bar\"                    \n [5] \"geom_bin_2d\"                  \"geom_bin2d\"                  \n [7] \"geom_blank\"                   \"geom_boxplot\"                \n [9] \"geom_bracket\"                 \"geom_col\"                    \n[11] \"geom_contour\"                 \"geom_contour_filled\"         \n[13] \"geom_count\"                   \"geom_crossbar\"               \n[15] \"geom_curve\"                   \"geom_density\"                \n[17] \"geom_density_2d\"              \"geom_density_2d_filled\"      \n[19] \"geom_density_line\"            \"geom_density_ridges\"         \n[21] \"geom_density_ridges_gradient\" \"geom_density_ridges2\"        \n[23] \"geom_density2d\"               \"geom_density2d_filled\"       \n[25] \"geom_dotplot\"                 \"geom_errorbar\"               \n[27] \"geom_errorbarh\"               \"geom_exec\"                   \n[29] \"geom_freqpoly\"                \"geom_function\"               \n[31] \"geom_hex\"                     \"geom_histogram\"              \n[33] \"geom_hline\"                   \"geom_jitter\"                 \n[35] \"geom_label\"                   \"geom_label_repel\"            \n[37] \"geom_line\"                    \"geom_linerange\"              \n[39] \"geom_lm\"                      \"geom_map\"                    \n[41] \"geom_mosaic\"                  \"geom_mosaic_jitter\"          \n[43] \"geom_mosaic_text\"             \"geom_path\"                   \n[45] \"geom_pictogram\"               \"geom_point\"                  \n[47] \"geom_pointrange\"              \"geom_polygon\"                \n[49] \"geom_pwc\"                     \"geom_qq\"                     \n[51] \"geom_qq_line\"                 \"geom_quantile\"               \n[53] \"geom_rangeframe\"              \"geom_raster\"                 \n[55] \"geom_rect\"                    \"geom_ribbon\"                 \n[57] \"geom_ridgeline\"               \"geom_ridgeline_gradient\"     \n[59] \"geom_rug\"                     \"geom_segment\"                \n[61] \"geom_sf\"                      \"geom_sf_label\"               \n[63] \"geom_sf_text\"                 \"geom_signif\"                 \n[65] \"geom_smooth\"                  \"geom_spline\"                 \n[67] \"geom_spoke\"                   \"geom_step\"                   \n[69] \"geom_stripped_cols\"           \"geom_stripped_rows\"          \n[71] \"geom_text\"                    \"geom_text_repel\"             \n[73] \"geom_tile\"                    \"geom_tufteboxplot\"           \n[75] \"geom_violin\"                  \"geom_vline\"                  \n[77] \"geom_vridgeline\"              \"geom_waffle\""
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#other-geoms-1",
    "href": "slides/2024-08-28-dataviz.html#other-geoms-1",
    "title": "Better Data Visualizations",
    "section": "Other geoms",
    "text": "Other geoms\nhelp pages will tell you their aesthetics, default stats, etc.\n\n?geom_area             # for example"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#lets-try-geom_area",
    "href": "slides/2024-08-28-dataviz.html#lets-try-geom_area",
    "title": "Better Data Visualizations",
    "section": "Let’s try geom_area",
    "text": "Let’s try geom_area\n\n\n\nggplot(data = Births78,\n       aes(x = date,\n           y = births, \n           fill = wday)) + \n  geom_area()+\n  labs(title = \"US Births in 1978\")"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#lets-try-geom_area-1",
    "href": "slides/2024-08-28-dataviz.html#lets-try-geom_area-1",
    "title": "Better Data Visualizations",
    "section": "Let’s try geom_area",
    "text": "Let’s try geom_area\n\n\n\nggplot(data = Births78,\n       aes(x = date, y = births, fill = wday)) + \n  geom_area()+\n  labs(title = \"US Births in 1978\")\n\n\n\n\n\n\n\n\n\n… not a good plot\n\noverplotting is hiding much of the data\nextending y-axis to 0 may or may not be desirable."
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#side-note-what-makes-a-plot-good",
    "href": "slides/2024-08-28-dataviz.html#side-note-what-makes-a-plot-good",
    "title": "Better Data Visualizations",
    "section": "Side note: what makes a plot good?",
    "text": "Side note: what makes a plot good?\nMost (all?) graphics are intended to help us make comparisons\n\nHow does something change over time?\nDo my treatments matter? How much?\nDo treatment and control respond the same way?\n\n\n\n\n\n\n\nKey plot metric\n\n\nDoes my plot make the comparisons I am interested in:\n\neasily, and\naccurately?"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#time-for-some-different-data",
    "href": "slides/2024-08-28-dataviz.html#time-for-some-different-data",
    "title": "Better Data Visualizations",
    "section": "Time for some different data",
    "text": "Time for some different data\nHELPrct: Health Evaluation and Linkage to Primary care randomized clinical trial. Subjects admitted for treatment for addiction to one of three substances.\n\nhead(HELPrct)\n\n\n\n\n\n\n\n\n\n\nage\nanysubstatus\nanysub\ncesd\nd1\ndaysanysub\ndayslink\ndrugrisk\ne2b\nfemale\nsex\ng1b\nhomeless\ni1\ni2\nid\nindtot\nlinkstatus\nlink\nmcs\npcs\npss_fr\nracegrp\nsatreat\nsexrisk\nsubstance\ntreat\navg_drinks\nmax_drinks\nhospitalizations\n\n\n\n\n37\n1\nyes\n49\n3\n177\n225\n0\nNA\n0\nmale\nyes\nhoused\n13\n26\n1\n39\n1\nyes\n25.11\n58.4\n0\nblack\nno\n4\ncocaine\nyes\n13\n26\n3\n\n\n37\n1\nyes\n30\n22\n2\nNA\n0\nNA\n0\nmale\nyes\nhomeless\n56\n62\n2\n43\nNA\nNA\n26.67\n36.0\n1\nwhite\nno\n7\nalcohol\nyes\n56\n62\n22\n\n\n26\n1\nyes\n39\n0\n3\n365\n20\nNA\n0\nmale\nno\nhoused\n0\n0\n3\n41\n0\nno\n6.76\n74.8\n13\nblack\nno\n2\nheroin\nno\n0\n0\n0\n\n\n39\n1\nyes\n15\n2\n189\n343\n0\n1\n1\nfemale\nno\nhoused\n5\n5\n4\n28\n0\nno\n43.97\n61.9\n11\nwhite\nyes\n4\nheroin\nno\n5\n5\n2\n\n\n32\n1\nyes\n39\n12\n2\n57\n0\n1\n0\nmale\nno\nhomeless\n10\n13\n5\n38\n1\nyes\n21.68\n37.3\n10\nblack\nno\n6\ncocaine\nno\n10\n13\n12\n\n\n47\n1\nyes\n6\n1\n31\n365\n0\nNA\n1\nfemale\nno\nhoused\n4\n4\n6\n29\n0\nno\n55.51\n46.5\n5\nblack\nno\n5\ncocaine\nyes\n4\n4\n1"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#who-are-the-people-in-the-study",
    "href": "slides/2024-08-28-dataviz.html#who-are-the-people-in-the-study",
    "title": "Better Data Visualizations",
    "section": "Who are the people in the study?",
    "text": "Who are the people in the study?\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot(data = HELP_data,\n       aes(x = substance)) + \n  geom_bar()+\n  labs(title = \"HELP trial\")\n\n\nHmm. What’s up with y?\n\nstat_bin() is being applied to the data before the geom_bar() gets to do its thing. Binning creates the y values."
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#who-are-the-people-in-the-study-1",
    "href": "slides/2024-08-28-dataviz.html#who-are-the-people-in-the-study-1",
    "title": "Better Data Visualizations",
    "section": "Who are the people in the study?",
    "text": "Who are the people in the study?\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot(data = HELP_data,\n       aes(x = substance,\n           fill = children)) + \n  geom_bar()+\n  labs(title = \"HELP trial\")"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#who-are-the-people-in-the-study-2",
    "href": "slides/2024-08-28-dataviz.html#who-are-the-people-in-the-study-2",
    "title": "Better Data Visualizations",
    "section": "Who are the people in the study?",
    "text": "Who are the people in the study?\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot(HELP_data,\n       aes(x = substance,\n           fill = children)) + \n  geom_bar(position = \"fill\") +\n  labs(title = \"HELP trial\",\n       y = \"actually, percent\")"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#how-old-are-people-in-the-help-study",
    "href": "slides/2024-08-28-dataviz.html#how-old-are-people-in-the-help-study",
    "title": "Better Data Visualizations",
    "section": "How old are people in the HELP study?",
    "text": "How old are people in the HELP study?\n\n\n\n\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n\n\n\n\n\n\n\n\n\n\n\nggplot(data = HELP_data,\n       aes(x = age)) + \n  geom_histogram()+\n  labs(title = \"HELP trial\")\n\nNotice the messages\n\nstat_bin: Histograms are not mapping the raw data but binned data.\nstat_bin() performs the data transformation.\nbinwidth: a default binwidth has been selected, but we should really choose our own."
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#setting-the-binwidth-manually",
    "href": "slides/2024-08-28-dataviz.html#setting-the-binwidth-manually",
    "title": "Better Data Visualizations",
    "section": "Setting the binwidth manually",
    "text": "Setting the binwidth manually\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot(data = HELP_data,\n       aes(x = age)) + \n  geom_histogram(binwidth = 2)+\n  labs(title = \"HELP trial\")"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#how-old-are-people-in-the-help-study-other-geoms",
    "href": "slides/2024-08-28-dataviz.html#how-old-are-people-in-the-help-study-other-geoms",
    "title": "Better Data Visualizations",
    "section": "How old are people in the HELP study? – Other geoms",
    "text": "How old are people in the HELP study? – Other geoms\n\nggplot(data = HELP_data,\n       aes(x = age)) + \n  geom_freqpoly(binwidth = 2)+\n  labs(title = \"HELP clinical trial at detoxification unit\")\n\n\n\n\n\n\n\n\n\nggplot(data = HELP_data,\n       aes(x = age)) + \n  geom_density()+\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#selecting-stat-and-geom-manually",
    "href": "slides/2024-08-28-dataviz.html#selecting-stat-and-geom-manually",
    "title": "Better Data Visualizations",
    "section": "Selecting stat and geom manually",
    "text": "Selecting stat and geom manually\nEvery geom comes with a default stat\n\nfor simple cases, the stat is stat_identity() which does nothing\nwe can mix and match geoms and stats however we like\n\n\nggplot(data = HELP_data,\n       aes(x = age)) + \n  geom_line(stat = \"density\")+\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#selecting-stat-and-geom-manually-1",
    "href": "slides/2024-08-28-dataviz.html#selecting-stat-and-geom-manually-1",
    "title": "Better Data Visualizations",
    "section": "Selecting stat and geom manually",
    "text": "Selecting stat and geom manually\nEvery stat comes with a default geom, every geom with a default stat\n\nwe can specify stats instead of geom, if we prefer\nwe can mix and match geoms and stats however we like\n\n\nggplot(data = HELP_data,\n       aes(x = age)) + \n  stat_density(geom = \"line\")+\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#more-combinations",
    "href": "slides/2024-08-28-dataviz.html#more-combinations",
    "title": "Better Data Visualizations",
    "section": "More combinations",
    "text": "More combinations\n\nggplot(data = HELP_data,\n       aes(x = age)) + \n  geom_point(stat = \"bin\", binwidth = 3) + \n  geom_line(stat = \"bin\", binwidth = 3)  +\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#more-combinations-1",
    "href": "slides/2024-08-28-dataviz.html#more-combinations-1",
    "title": "Better Data Visualizations",
    "section": "More combinations",
    "text": "More combinations\n\nggplot(data = HELP_data,\n       aes(x = age)) + \n  geom_area(stat = \"bin\", binwidth = 3)  +\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#more-combinations-2",
    "href": "slides/2024-08-28-dataviz.html#more-combinations-2",
    "title": "Better Data Visualizations",
    "section": "More combinations",
    "text": "More combinations\n\nggplot(data = HELP_data,\n       aes(x = age)) + \n  geom_point(stat = \"bin\", \n             binwidth = 3, \n             aes(size = ..count..)) +\n  geom_line(stat = \"bin\", binwidth = 3) +\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#how-much-drinking-i1",
    "href": "slides/2024-08-28-dataviz.html#how-much-drinking-i1",
    "title": "Better Data Visualizations",
    "section": "How much drinking? (i1)",
    "text": "How much drinking? (i1)\n\nHELP_data |&gt; \n  ggplot(aes(x = i1)) + geom_histogram()+\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#how-much-drinking-i1-1",
    "href": "slides/2024-08-28-dataviz.html#how-much-drinking-i1-1",
    "title": "Better Data Visualizations",
    "section": "How much drinking? (i1)",
    "text": "How much drinking? (i1)\n\nHELP_data |&gt; \n  ggplot(aes(x = i1)) + geom_density()+\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#how-much-drinking-i1-2",
    "href": "slides/2024-08-28-dataviz.html#how-much-drinking-i1-2",
    "title": "Better Data Visualizations",
    "section": "How much drinking? (i1)",
    "text": "How much drinking? (i1)\n\nHELP_data |&gt; \n  ggplot(aes(x = i1)) + geom_area(stat = \"density\")+\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#covariates-adding-in-more-variables",
    "href": "slides/2024-08-28-dataviz.html#covariates-adding-in-more-variables",
    "title": "Better Data Visualizations",
    "section": "Covariates: Adding in more variables",
    "text": "Covariates: Adding in more variables\nUsing color and linetype:\n\nggplot(data = HELP_data,\n       aes(x = i1,\n           color = substance,\n           linetype = children)) + \n  geom_line(stat = \"density\")+\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#using-color-and-facets",
    "href": "slides/2024-08-28-dataviz.html#using-color-and-facets",
    "title": "Better Data Visualizations",
    "section": "Using color and facets",
    "text": "Using color and facets\n\nggplot(data = HELP_data,\n       aes(x = i1, color = substance)) + \n  geom_line(stat = \"density\") + \n  facet_grid( . ~ children )+\n  labs(title = \"HELP clinical trial at detoxification unit\")\n\n\n\n\n\n\n\n\n\nggplot(data = HELP_data,\n       aes(x = i1, color = substance)) + \n  geom_line(stat = \"density\") + \n  facet_grid( children ~ . )+\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#boxplots",
    "href": "slides/2024-08-28-dataviz.html#boxplots",
    "title": "Better Data Visualizations",
    "section": "Boxplots",
    "text": "Boxplots\nBoxplots use stat_quantile() (five number summary).\nThe quantitative variable must be y, and there must be an additional x variable.\n\nHELP_data |&gt; \n  ggplot(aes(x = substance, y = age, color = children)) + \n  geom_boxplot()+\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#horizontal-boxplots",
    "href": "slides/2024-08-28-dataviz.html#horizontal-boxplots",
    "title": "Better Data Visualizations",
    "section": "Horizontal boxplots",
    "text": "Horizontal boxplots\nHorizontal boxplots are obtained by flipping the coordinate system:\n\ncoord_flip() may be used with other plots as well to reverse the roles of x and y on the plot.\n\n\nggplot(data = HELP_data,\n       aes(x = substance, \n           y = age, \n           color = children)) + \n  geom_boxplot() +\n  coord_flip()+\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#axes-scaling-with-boxplots",
    "href": "slides/2024-08-28-dataviz.html#axes-scaling-with-boxplots",
    "title": "Better Data Visualizations",
    "section": "Axes scaling with boxplots",
    "text": "Axes scaling with boxplots\nWe can scale the continuous axis\n\nggplot(data = HELP_data,\n       aes(x = substance, \n           y = age, \n           color = children)) + \n  geom_boxplot() +\n  coord_trans(y = \"exp\")+\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#give-me-some-space",
    "href": "slides/2024-08-28-dataviz.html#give-me-some-space",
    "title": "Better Data Visualizations",
    "section": "Give me some space",
    "text": "Give me some space\nWe’ve triggered a new feature: dodge (for dodging things left/right). We can control how much if we set the dodge manually.\n\nggplot(data = HELP_data,\n       aes(x = substance, \n           y = age, \n           color = children)) + \n  geom_boxplot(position = position_dodge(width=1)) +\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#issues-with-bigger-data",
    "href": "slides/2024-08-28-dataviz.html#issues-with-bigger-data",
    "title": "Better Data Visualizations",
    "section": "Issues with bigger data",
    "text": "Issues with bigger data\n\nAlthough we can see a generally positive association (as we would expect), the overplotting may be hiding information.\n\n\nlibrary(NHANES)\ndim(NHANES)\n\n[1] 10000    76\n\nggplot(data = NHANES,\n       aes(x = Height, y = Weight)) +\n  geom_point() + \n  facet_grid( Gender ~ PregnantNow )"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#using-alpha-opacity",
    "href": "slides/2024-08-28-dataviz.html#using-alpha-opacity",
    "title": "Better Data Visualizations",
    "section": "Using alpha (opacity)",
    "text": "Using alpha (opacity)\nOne way to deal with overplotting is to set the opacity low.\n\nggplot(data = NHANES,\n       aes(x = Height, y = Weight)) +\n  geom_point(alpha=0.01) + \n  facet_grid( Gender ~ PregnantNow )"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#geom_density2d",
    "href": "slides/2024-08-28-dataviz.html#geom_density2d",
    "title": "Better Data Visualizations",
    "section": "geom_density2d",
    "text": "geom_density2d\nAlternatively (or simultaneously) we might prefer a different geom altogether.\n\nggplot(data = NHANES,\n       aes(x = Height, y = Weight)) +\n  geom_density2d() + \n  facet_grid( Gender ~ PregnantNow )"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#multiple-layers",
    "href": "slides/2024-08-28-dataviz.html#multiple-layers",
    "title": "Better Data Visualizations",
    "section": "Multiple layers",
    "text": "Multiple layers\n\n\n\nggplot(data = HELP_data, \n       aes(x = children, y = age)) +\n  geom_boxplot(outlier.size = 0) +\n  geom_point(alpha=.6) +\n  coord_flip()+\n  labs(title = \"HELP clinical trial at detoxification unit\")\n\n\n\n\n\n\n\n\n\n\nggplot(data = HELP_data,\n       aes(x = children, y = age)) +\n  geom_boxplot(outlier.size = 0) +\n  geom_jitter(alpha=.6, width = 0.1) +\n  coord_flip()+\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#multiple-layers-1",
    "href": "slides/2024-08-28-dataviz.html#multiple-layers-1",
    "title": "Better Data Visualizations",
    "section": "Multiple layers",
    "text": "Multiple layers\n\nggplot(data = HELP_data,\n       aes(x = children, y = age)) +\n  geom_boxplot(outlier.size = 0) +\n  geom_point(alpha=.6, \n             position = position_jitter(width=.1, height=0)) +\n  coord_flip()+\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#things-i-havent-mentioned-much",
    "href": "slides/2024-08-28-dataviz.html#things-i-havent-mentioned-much",
    "title": "Better Data Visualizations",
    "section": "Things I haven’t mentioned (much)",
    "text": "Things I haven’t mentioned (much)\n\ncoords (coord_flip() is good to know about)\nthemes (for customizing appearance)\nposition (position_dodge(), position_jitterdodge(), position_stack(), etc.)\ntransforming axes"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#themes",
    "href": "slides/2024-08-28-dataviz.html#themes",
    "title": "Better Data Visualizations",
    "section": "themes",
    "text": "themes\n\nlibrary(ggthemes)\nggplot(Births78, aes(x = date, y = births)) + \n  geom_point() + \n  theme_wsj()"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#jitterdodge",
    "href": "slides/2024-08-28-dataviz.html#jitterdodge",
    "title": "Better Data Visualizations",
    "section": "jitterdodge()",
    "text": "jitterdodge()\n\nggplot(data = HELP_data, \n       aes(x = substance, y = age, color = children)) +\n  geom_boxplot(coef = 10, position = position_dodge()) +\n  geom_point(aes(color = children, \n                 fill = children), \n             position = position_jitterdodge()) +\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#a-little-bit-of-everything",
    "href": "slides/2024-08-28-dataviz.html#a-little-bit-of-everything",
    "title": "Better Data Visualizations",
    "section": "A little bit of everything",
    "text": "A little bit of everything\n\nggplot(data = HELP_data, aes(x = substance, y = age, color = children)) +\n  geom_boxplot(coef = 10, position = position_dodge(width=1)) +\n  geom_point(aes(fill = children), alpha=.5, \n             position = position_jitterdodge(dodge.width=1, jitter.width = 0.2)) + \n  facet_wrap(~homeless)+\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#want-to-learn-more",
    "href": "slides/2024-08-28-dataviz.html#want-to-learn-more",
    "title": "Better Data Visualizations",
    "section": "Want to learn more?",
    "text": "Want to learn more?\n\ndocs.ggplot2.org/\nR for Data Science by Hadley Wickham and Garrett Grolemund"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#whats-around-the-corner",
    "href": "slides/2024-08-28-dataviz.html#whats-around-the-corner",
    "title": "Better Data Visualizations",
    "section": "What’s around the corner?",
    "text": "What’s around the corner?\nshiny\n\ninteractive graphics / modeling\nhttps://shiny.rstudio.com/\n\nplotly\n\nPlotly is an R package for creating interactive web-based graphs via plotly’s JavaScript graphing library, plotly.js. The plotly R libary contains the ggplotly function , which will convert ggplot2 figures into a Plotly object. Furthermore, you have the option of manipulating the Plotly object with the style function.\n\n\nhttps://plot.ly/ggplot2/getting-started/\n\ngganimate\n\ngganimate tutorial"
  },
  {
    "objectID": "github.html#connecting-your-github-account-to-gradescope",
    "href": "github.html#connecting-your-github-account-to-gradescope",
    "title": "Working on assignments with GitHub",
    "section": "Connecting your GitHub account to Gradescope",
    "text": "Connecting your GitHub account to Gradescope\nThe first time you go to submit an assignment on Gradescope, you will be asked to connect to GitHub. Here are the steps to follow to make that connection:\n\nAccess Gradescope from Canvas: From Canvas, click on Gradescope in the Course Navigation menu. You will be asked to authorize the Gradescope integration.\nNavigate to Gradescope.com: In a new tab (same browser), navigate to https://www.gradescope.com/. Gradescope should recognize your student user account from the Canvas integration.\nGo to Gradescope Account Settings: Click on Account (bottom left of the screen) and then Edit Account.\n\n\n\n\n\n\nChange your Gradescope account settings.\n\n\n\n\nThis will take you to your Account Settings in Gradescope. Here, you’ll have the option to verify your Pomona email address and set up a password.\n\nLink Your GitHub Account to Gradescope: Scroll to the bottom of the page to the Link External Account menu. Click on Link a GitHub account.\n\n\n\n\n\n\nLinking GitHub to Gradescope.\n\n\n\n\nYou’ll be prompted to authorize GitHub and connect it to Gradescope. In the drop-down menu under Repositories, be sure to select “Public and private” to enable full access.\n\n\n\n\n\nAuthorizing Gradescope to talk to GitHub.\n\n\n\n\nWhen prompted, log in to your GitHub account to complete the process (I don’t know if you need your PAT or your “Go(ubs!” password, try both!).\nAfter your accounts have been linked, you’ll see a message that says “Successfully authenticated with GitHub.”\n\n\n\n\n\nSuccessful integration of GitHub and Gradescope\n\n\n\n\n\nReturn to Canvas & Verify the Connection\n\nNow, you can return to Canvas and navigate back to Gradescope. If you are returning to your previous tab, you may need to refresh the page to make sure your account settings are updated.\nClick on your programming assignment in Gradescope. Verify that the GitHub connection is working, and that you can see a list of your GitHub files in the drop-down menu when you are submitting an assignment.\n\n\n\n\n\nSubmitting HW from GitHub to Gradescope.\n\n\n\n\n\n\n\n\n\n\nImportant\n\n\n\nIf you see a blank window when you click on Gradescope within Canvas, that means you need to enable third-party cookies in your browser. Since Gradescope is a third party integration in Canvas, cookies need to be enabled for it to work properly.\nITS has instructions for how to enable cookies on a range of different browsers: How do I enable third-party cookies in my browser?"
  },
  {
    "objectID": "github.html#submitting-assignments-after-having-connected-to-github",
    "href": "github.html#submitting-assignments-after-having-connected-to-github",
    "title": "Working on assignments with GitHub",
    "section": "Submitting assignments after having connected to GitHub",
    "text": "Submitting assignments after having connected to GitHub\nTo submit your assignment, complete the following steps:\n\nVia Canvas, access the course’s Gradescope site, select the appropriate assignment, and then choose GitHub as the submission method.\nSelect the appropriate GitHub repository. The branch will always be “main”.\n\nYou can submit multiple times before the deadline. Your last submission will determine your grade.\nOnce assignments are completely graded, you will be able to see your grade and assignment feedback on Gradescope. Grades will also be synced with Canvas."
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#layers",
    "href": "slides/2024-08-28-dataviz.html#layers",
    "title": "Better Data Visualizations",
    "section": "Layers",
    "text": "Layers\nLayer 1\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot(data = Births78, \n       aes(x = date, y = births))"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#layers-1",
    "href": "slides/2024-08-28-dataviz.html#layers-1",
    "title": "Better Data Visualizations",
    "section": "Layers",
    "text": "Layers\nLayer 2\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot(data = Births78, \n       aes(x = date, y = births)) + \n  geom_point()"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#layers-2",
    "href": "slides/2024-08-28-dataviz.html#layers-2",
    "title": "Better Data Visualizations",
    "section": "Layers",
    "text": "Layers\nLayer 3\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot(data = Births78, \n       aes(x = date, y = births)) + \n  geom_point() +\n  labs(title = \"US Births in 1978\")"
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#tidy-data",
    "href": "slides/2024-09-11-wrangling1.html#tidy-data",
    "title": "Data Wrangling",
    "section": "Tidy data",
    "text": "Tidy data\n\neach row = a unit of observation (here, a penguin)\neach column = a measure on some variable of interest, either quantitative (numbers with units) or categorical (discrete possibilities or categories)\neach entry contains a single data value; no analysis, summaries, footnotes, comments, etc, and only one value per cell"
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#definition-of-datum",
    "href": "slides/2024-09-11-wrangling1.html#definition-of-datum",
    "title": "Data Wrangling",
    "section": "Definition of datum",
    "text": "Definition of datum\nThe definition of datum can be much broader:\n\nDefinition of datum from the Oxford English Dictionary"
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#tidying-data",
    "href": "slides/2024-09-11-wrangling1.html#tidying-data",
    "title": "Data Wrangling",
    "section": "Tidying data",
    "text": "Tidying data\nHow would you wrangle each data example into a tidy format?\n\nthe emails in your inbox\n\nsocial media texts\n\nimages\n\nvideos\n\naudio files"
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#not-tidy-active-duty-military",
    "href": "slides/2024-09-11-wrangling1.html#not-tidy-active-duty-military",
    "title": "Data Wrangling",
    "section": "Not tidy – Active Duty Military",
    "text": "Not tidy – Active Duty Military\nThe Active Duty data are not tidy! What are the cases? How are the data not tidy? What might the data look like in tidy form? Suppose that the case was “an individual in the armed forces.” What variables would you use to capture the information in the following table?"
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#tidy-packages-the-tidyverse",
    "href": "slides/2024-09-11-wrangling1.html#tidy-packages-the-tidyverse",
    "title": "Data Wrangling",
    "section": "Tidy packages: the tidyverse",
    "text": "Tidy packages: the tidyverse\n\nimage credit: https://www.tidyverse.org/."
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#some-basic-verbs",
    "href": "slides/2024-09-11-wrangling1.html#some-basic-verbs",
    "title": "Data Wrangling",
    "section": "Some Basic Verbs",
    "text": "Some Basic Verbs\n\nfilter()\narrange()\nselect()\ndistinct()\nmutate()\nsummarize()\nsample_n()"
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#filter",
    "href": "slides/2024-09-11-wrangling1.html#filter",
    "title": "Data Wrangling",
    "section": "filter()",
    "text": "filter()\nAllows you to select a subset of the rows of a data frame. The first argument is the name of the data frame, the following arguments are the filters that you’d like to apply\nFor all flights on January 1st:\n\nfilter(flights, month == 1, day == 1)\n\n# A tibble: 842 × 19\n    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n 1  2013     1     1      517            515         2      830            819\n 2  2013     1     1      533            529         4      850            830\n 3  2013     1     1      542            540         2      923            850\n 4  2013     1     1      544            545        -1     1004           1022\n 5  2013     1     1      554            600        -6      812            837\n 6  2013     1     1      554            558        -4      740            728\n 7  2013     1     1      555            600        -5      913            854\n 8  2013     1     1      557            600        -3      709            723\n 9  2013     1     1      557            600        -3      838            846\n10  2013     1     1      558            600        -2      753            745\n# ℹ 832 more rows\n# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,\n#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,\n#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;"
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#constructing-filters",
    "href": "slides/2024-09-11-wrangling1.html#constructing-filters",
    "title": "Data Wrangling",
    "section": "Constructing filters",
    "text": "Constructing filters\nFilters are constructed of logical operators: &lt;, &gt;, &lt;=, &gt;=, ==, != (and some others).\nAdding them one by one to filter() is akin to saying “this AND that”. To say “this OR that OR both”, use |.\n\nfilter(flights, month == 1 | month == 2)\n\n# A tibble: 51,955 × 19\n    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n 1  2013     1     1      517            515         2      830            819\n 2  2013     1     1      533            529         4      850            830\n 3  2013     1     1      542            540         2      923            850\n 4  2013     1     1      544            545        -1     1004           1022\n 5  2013     1     1      554            600        -6      812            837\n 6  2013     1     1      554            558        -4      740            728\n 7  2013     1     1      555            600        -5      913            854\n 8  2013     1     1      557            600        -3      709            723\n 9  2013     1     1      557            600        -3      838            846\n10  2013     1     1      558            600        -2      753            745\n# ℹ 51,945 more rows\n# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,\n#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,\n#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;"
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#practice",
    "href": "slides/2024-09-11-wrangling1.html#practice",
    "title": "Data Wrangling",
    "section": "Practice",
    "text": "Practice\nConstruct filters to isolate:\n\nFlights that left on St. Patrick’s Day.\nFlights that were destined for Chicago’s primary airport.\nFlights that were destined for Chicago’s primary airport and were operated by United Airlines.\nFlights with flight times more than 2000 miles or that were in the air more than 5 hours."
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#solution",
    "href": "slides/2024-09-11-wrangling1.html#solution",
    "title": "Data Wrangling",
    "section": "Solution",
    "text": "Solution\n\nFlights that left on St. Patrick’s Day.\nFlights that were destined for Chicago’s primary airport.\nFlights that were destined for Chicago’s primary airport and were operated by United Airlines.\nFlights with flight times more than 2000 miles or that were in the air more than 5 hours.\n\n\nfilter(flights, month == 3, day == 17)\nfilter(flights, dest == \"ORD\")\nfilter(flights, dest == \"ORD\", carrier == \"UA\")\nfilter(flights, distance &gt; 2000 | air_time &gt; 5*60)"
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#arrange",
    "href": "slides/2024-09-11-wrangling1.html#arrange",
    "title": "Data Wrangling",
    "section": "arrange()",
    "text": "arrange()\narrange() reorders the rows: It takes a data frame, and a set of column names (or more complicated expressions) to order by. If you provide more than one column name, each additional column will be used to break ties in the values of preceding columns:\n\narrange(flights, year, month, day)\n\nUse desc() to sort in descending order.\n\narrange(flights, desc(arr_delay))"
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#select",
    "href": "slides/2024-09-11-wrangling1.html#select",
    "title": "Data Wrangling",
    "section": "select()",
    "text": "select()\nOften you work with large datasets with many columns where only a few are actually of interest to you. select() allows you to rapidly zoom in on a useful subset using operations that usually only work on numeric variable positions:\n\nselect(flights, year, month, day)\n\nYou can exclude columns using - and specify a range using :.\n\nselect(flights, -(year:day))"
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#distinct",
    "href": "slides/2024-09-11-wrangling1.html#distinct",
    "title": "Data Wrangling",
    "section": "distinct()",
    "text": "distinct()\nA common use of select() is to find out which values a set of variables takes. This is particularly useful in conjunction with the distinct() verb which only returns the unique values in a table.\nWhat do the following data correspond to?\n\ndistinct(select(flights, origin, dest))\n\n# A tibble: 224 × 2\n   origin dest \n   &lt;chr&gt;  &lt;chr&gt;\n 1 EWR    IAH  \n 2 LGA    IAH  \n 3 JFK    MIA  \n 4 JFK    BQN  \n 5 LGA    ATL  \n 6 EWR    ORD  \n 7 EWR    FLL  \n 8 LGA    IAD  \n 9 JFK    MCO  \n10 LGA    ORD  \n# ℹ 214 more rows"
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#mutate",
    "href": "slides/2024-09-11-wrangling1.html#mutate",
    "title": "Data Wrangling",
    "section": "mutate()",
    "text": "mutate()\nAs well as selecting from the set of existing columns, it’s often useful to add new columns that are functions of existing columns. This is the job of mutate():\n\nselect(mutate(flights, gain = dep_delay - arr_delay), \n       flight, dep_delay, arr_delay, gain)\n\n# A tibble: 336,776 × 4\n   flight dep_delay arr_delay  gain\n    &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;\n 1   1545         2        11    -9\n 2   1714         4        20   -16\n 3   1141         2        33   -31\n 4    725        -1       -18    17\n 5    461        -6       -25    19\n 6   1696        -4        12   -16\n 7    507        -5        19   -24\n 8   5708        -3       -14    11\n 9     79        -3        -8     5\n10    301        -2         8   -10\n# ℹ 336,766 more rows"
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#summarize-and-sample_n",
    "href": "slides/2024-09-11-wrangling1.html#summarize-and-sample_n",
    "title": "Data Wrangling",
    "section": "summarize() and sample_n()",
    "text": "summarize() and sample_n()\nsummarize() collapses a data frame to a single row based on some function. It’s not very useful yet, but it will be.\nsample_n() provides you with a random sample of rows.\n\nsummarize(flights, delay = mean(dep_delay, na.rm = TRUE))\n\n# A tibble: 1 × 1\n  delay\n  &lt;dbl&gt;\n1  12.6\n\nsample_n(flights, 10)\n\n# A tibble: 10 × 19\n    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n 1  2013     1    13       NA           2125        NA       NA           2240\n 2  2013     2    27     1633           1610        23     1901           1917\n 3  2013     2     7     1533           1535        -2     1800           1743\n 4  2013     4    16     1232           1236        -4     1422           1431\n 5  2013    10     9     1938           1940        -2     2220           2252\n 6  2013     2    24     1114           1115        -1     1422           1425\n 7  2013     1    21     1738           1545       113     1847           1703\n 8  2013    10    29      920            930       -10     1201           1237\n 9  2013     3     2     1412           1350        22     1654           1715\n10  2013     1    16     1859           1900        -1     2004           2015\n# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,\n#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,\n#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;"
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#practice-1",
    "href": "slides/2024-09-11-wrangling1.html#practice-1",
    "title": "Data Wrangling",
    "section": "Practice",
    "text": "Practice\nMutate the data to create a new column that contains the average speed traveled by the plane for each flight.\nSelect the new variable and save it, along with tailnum, as a new data frame object."
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#practice-2",
    "href": "slides/2024-09-11-wrangling1.html#practice-2",
    "title": "Data Wrangling",
    "section": "Practice",
    "text": "Practice\nMutate the data to create a new column that contains the average speed traveled by the plane for each flight.\nSelect the new variable and save it, along with tailnum, as a new data frame object.\n\nflights2 &lt;- mutate(flights, speed = distance/(air_time/60))\nspeed_data &lt;- select(flights2, tailnum, speed)"
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#group_by",
    "href": "slides/2024-09-11-wrangling1.html#group_by",
    "title": "Data Wrangling",
    "section": "group_by()",
    "text": "group_by()\nsummarize() and sample_n() are even more powerful when combined with the idea of “group by”, repeating the operation separately on groups of observations within the dataset.\nThe group_by() function describes how to break a dataset down into groups of rows."
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#group_by-1",
    "href": "slides/2024-09-11-wrangling1.html#group_by-1",
    "title": "Data Wrangling",
    "section": "group_by()",
    "text": "group_by()\nFind the fastest airplanes in the bunch, measured as the average speed per airplane.\n\nby_tailnum &lt;- group_by(speed_data, tailnum)\navg_speed &lt;- summarize(by_tailnum, \n                       count = n(), \n                       avg_speed = mean(speed, na.rm = TRUE))\narrange(avg_speed, desc(avg_speed))\n\n# A tibble: 4,044 × 3\n   tailnum count avg_speed\n   &lt;chr&gt;   &lt;int&gt;     &lt;dbl&gt;\n 1 N228UA      1      501.\n 2 N315AS      1      499.\n 3 N654UA      1      499.\n 4 N819AW      1      490.\n 5 N382HA     26      486.\n 6 N388HA     36      484.\n 7 N391HA     21      484.\n 8 N777UA      1      483.\n 9 N385HA     28      483.\n10 N392HA     13      482.\n# ℹ 4,034 more rows"
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#chaining",
    "href": "slides/2024-09-11-wrangling1.html#chaining",
    "title": "Data Wrangling",
    "section": "Chaining",
    "text": "Chaining\nInstead of applying each verb step-by-step, we can chain them into a single data pipeline, connected with the |&gt; operator. You start the pipeline with a data frame and then pass it to each function in turn.\nThe pipe syntax (|&gt;) takes a data frame and sends it to the argument of a function. The mapping goes to the first available argument in the function. For example:\nx |&gt;  f() is the same as f(x)\nx |&gt;  f(y) is the same as f(x, y)"
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#mornings",
    "href": "slides/2024-09-11-wrangling1.html#mornings",
    "title": "Data Wrangling",
    "section": "Mornings",
    "text": "Mornings\n\nme_step1 &lt;- dress(me, what = sports)  \nme_step2 &lt;- exercise(me_step1, how = running)  \nme_step3 &lt;- eat(me_step2, choice = cereal)  \nme_step4 &lt;- dress(me_step3, what = school)  \nme_step5 &lt;- commute(me_step4, transportation = bike)"
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#mornings-1",
    "href": "slides/2024-09-11-wrangling1.html#mornings-1",
    "title": "Data Wrangling",
    "section": "Mornings",
    "text": "Mornings\n\ncommute(dress(eat(exercise(dress(me, what = sports), how = running), choice = cereal), what = school), transportation = bike)"
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#morning",
    "href": "slides/2024-09-11-wrangling1.html#morning",
    "title": "Data Wrangling",
    "section": "Morning",
    "text": "Morning\n(better??)\n\ncommute(\n  dress(\n    eat(\n      exercise(\n        dress(me, \n              what = sports), \n        how = running), \n      choice = cereal), \n    what = school), \n  transportation = bike)"
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#mornings-2",
    "href": "slides/2024-09-11-wrangling1.html#mornings-2",
    "title": "Data Wrangling",
    "section": "Mornings",
    "text": "Mornings\n\nme |&gt; \n  dress(what = sports) |&gt; \n  exercise(how = running) |&gt; \n  eat(choice = cereal) |&gt; \n  dress(what = school) |&gt; \n  commute(transportation = bike)"
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#little-bunny-foo-foo",
    "href": "slides/2024-09-11-wrangling1.html#little-bunny-foo-foo",
    "title": "Data Wrangling",
    "section": "Little Bunny Foo Foo",
    "text": "Little Bunny Foo Foo\nFrom Hadley Wickham, how to think about tidy data.\n\nLittle bunny Foo Foo\n\n\nWent hopping through the forest\n\n\nScooping up the field mice\n\n\nAnd bopping them on the head"
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#little-bunny-foo-foo-1",
    "href": "slides/2024-09-11-wrangling1.html#little-bunny-foo-foo-1",
    "title": "Data Wrangling",
    "section": "Little Bunny Foo Foo",
    "text": "Little Bunny Foo Foo\nThe nursery rhyme could be created by a series of steps where the output from each step is saved as an object along the way.\n\nfoo_foo &lt;- little_bunny()\nfoo_foo_1 &lt;- hop(foo_foo, through = forest)\nfoo_foo_2 &lt;- scoop(foo_foo_2, up = field_mice)\nfoo_foo_3 &lt;- bop(foo_foo_2, on = head)"
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#little-bunny-foo-foo-2",
    "href": "slides/2024-09-11-wrangling1.html#little-bunny-foo-foo-2",
    "title": "Data Wrangling",
    "section": "Little Bunny Foo Foo",
    "text": "Little Bunny Foo Foo\nAnother approach is to concatenate the functions so that there is only one output.\n\nbop(\n   scoop(\n      hop(foo_foo, through = forest),\n      up = field_mice),\n   on = head)"
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#little-bunny-foo-foo-3",
    "href": "slides/2024-09-11-wrangling1.html#little-bunny-foo-foo-3",
    "title": "Data Wrangling",
    "section": "Little Bunny Foo Foo",
    "text": "Little Bunny Foo Foo\nOr even worse, as one line:\n\nbop(scoop(hop(foo_foo, through = forest), up = field_mice), on = head)))"
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#little-bunny-foo-foo-4",
    "href": "slides/2024-09-11-wrangling1.html#little-bunny-foo-foo-4",
    "title": "Data Wrangling",
    "section": "Little Bunny Foo Foo",
    "text": "Little Bunny Foo Foo\nInstead, the code can be written using the pipe in the order in which the function is evaluated:\n\nfoo_foo |&gt; \n   hop(through = forest) |&gt; \n       scoop(up = field_mice) |&gt; \n           bop(on = head)"
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#flights",
    "href": "slides/2024-09-11-wrangling1.html#flights",
    "title": "Data Wrangling",
    "section": "Flights",
    "text": "Flights\n\nNo pipePipe\n\n\n\nflights2 &lt;- mutate(flights, speed = distance/(air_time/60))\ntail_speed &lt;- select(flights2, tailnum, speed)\ntail_speed_grp &lt;- group_by(tail_speed, tailnum)\ntail_ave &lt;- summarize(tail_speed_grp, number = n(),\n                      avg_speed = mean(speed, na.rm = TRUE))\narrange(tail_ave, desc(avg_speed))\n\n# A tibble: 4,044 × 3\n   tailnum number avg_speed\n   &lt;chr&gt;    &lt;int&gt;     &lt;dbl&gt;\n 1 N228UA       1      501.\n 2 N315AS       1      499.\n 3 N654UA       1      499.\n 4 N819AW       1      490.\n 5 N382HA      26      486.\n 6 N388HA      36      484.\n 7 N391HA      21      484.\n 8 N777UA       1      483.\n 9 N385HA      28      483.\n10 N392HA      13      482.\n# ℹ 4,034 more rows\n\n\n\n\n\nflights |&gt; \n  mutate(speed = distance / (air_time/60)) |&gt; \n  select(tailnum, speed) |&gt; \n  group_by(tailnum) |&gt;  \n  summarize(number = n(), \n            avg_speed = mean(speed, na.rm = TRUE)) |&gt; \n  arrange(desc(avg_speed))\n\n# A tibble: 4,044 × 3\n   tailnum number avg_speed\n   &lt;chr&gt;    &lt;int&gt;     &lt;dbl&gt;\n 1 N228UA       1      501.\n 2 N315AS       1      499.\n 3 N654UA       1      499.\n 4 N819AW       1      490.\n 5 N382HA      26      486.\n 6 N388HA      36      484.\n 7 N391HA      21      484.\n 8 N777UA       1      483.\n 9 N385HA      28      483.\n10 N392HA      13      482.\n# ℹ 4,034 more rows"
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#practice-3",
    "href": "slides/2024-09-11-wrangling1.html#practice-3",
    "title": "Data Wrangling",
    "section": "Practice",
    "text": "Practice\nForm a chain that creates a data frame containing only carrier and the mean departure delay time. Which carriers have the highest and lowest mean delays?"
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#practice-4",
    "href": "slides/2024-09-11-wrangling1.html#practice-4",
    "title": "Data Wrangling",
    "section": "Practice",
    "text": "Practice\nForm a chain that creates a data frame containing only carrier and the mean departure delay time. Which carriers have the highest and lowest mean delays?\n\nflights |&gt; \n  group_by(carrier) |&gt; \n  summarize(avg_delay = mean(dep_delay, na.rm = TRUE)) |&gt; \n  arrange(desc(avg_delay))\n\n# A tibble: 16 × 2\n   carrier avg_delay\n   &lt;chr&gt;       &lt;dbl&gt;\n 1 F9          20.2 \n 2 EV          20.0 \n 3 YV          19.0 \n 4 FL          18.7 \n 5 WN          17.7 \n 6 9E          16.7 \n 7 B6          13.0 \n 8 VX          12.9 \n 9 OO          12.6 \n10 UA          12.1 \n11 MQ          10.6 \n12 DL           9.26\n13 AA           8.59\n14 AS           5.80\n15 HA           4.90\n16 US           3.78"
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#practice-again",
    "href": "slides/2024-09-11-wrangling1.html#practice-again",
    "title": "Data Wrangling",
    "section": "Practice again",
    "text": "Practice again\nSay you’re curious about the relationship between the number of flights that each plane made in 2013, the mean distance that each of those planes flew, and the mean arrival delay. You also want to exclude the edge cases from your analysis, so focus on the planes that have logged more than 20 flights and flown an average distance of less than 2000 miles. Please form the chain that creates this dataset."
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#solution-1",
    "href": "slides/2024-09-11-wrangling1.html#solution-1",
    "title": "Data Wrangling",
    "section": "Solution",
    "text": "Solution\n\ndelay_data &lt;- flights |&gt; \n  group_by(tailnum) |&gt; \n  summarize(number = n(),\n            dist = mean(distance, na.rm = TRUE), \n            delay = mean(arr_delay, na.rm = TRUE)) |&gt; \n  filter(number &gt; 20, dist &lt; 2000)"
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#visualizing-the-data",
    "href": "slides/2024-09-11-wrangling1.html#visualizing-the-data",
    "title": "Data Wrangling",
    "section": "Visualizing the data",
    "text": "Visualizing the data\n\nVizCode\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ndelay_data |&gt; \n ggplot(aes(dist, delay)) +\n geom_point(aes(size = number), \n            alpha = 1/2) +\n geom_smooth() +\n scale_size_area()\n\nWhen scale_size_area is used, the default behavior is to scale the area of points to be proportional to the value."
  },
  {
    "objectID": "slides/2024-09-11-wrangling1.html#pipe",
    "href": "slides/2024-09-11-wrangling1.html#pipe",
    "title": "Data Wrangling",
    "section": "Pipe",
    "text": "Pipe\n\nflights |&gt; \n  mutate(speed = distance / (air_time/60)) |&gt; \n  select(tailnum, speed) |&gt; \n  group_by(tailnum) |&gt;  \n  summarize(number = n(), \n            avg_speed = mean(speed, na.rm = TRUE)) |&gt; \n  arrange(desc(avg_speed))\n\n# A tibble: 4,044 × 3\n   tailnum number avg_speed\n   &lt;chr&gt;    &lt;int&gt;     &lt;dbl&gt;\n 1 N228UA       1      501.\n 2 N315AS       1      499.\n 3 N654UA       1      499.\n 4 N819AW       1      490.\n 5 N382HA      26      486.\n 6 N388HA      36      484.\n 7 N391HA      21      484.\n 8 N777UA       1      483.\n 9 N385HA      28      483.\n10 N392HA      13      482.\n# ℹ 4,034 more rows"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#preliminaries",
    "href": "slides/2024-08-28-dataviz.html#preliminaries",
    "title": "Better Data Visualizations",
    "section": "Preliminaries",
    "text": "Preliminaries\n\nMake the data stand out\nFacilitate comparison\nAdd information\n\n(Nolan & Perrrett, 2016)"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#preliminaries-1",
    "href": "slides/2024-08-28-dataviz.html#preliminaries-1",
    "title": "Better Data Visualizations",
    "section": "Preliminaries",
    "text": "Preliminaries\nTufte lists two main motivational steps to working with graphics as part of an argument.\n\n“An essential analytic task in making decisions based on evidence is to understand how things work.”\nMaking decisions based on evidence requires the appropriate display of that evidence.”"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#cholera---a-picture-tells-1000-words",
    "href": "slides/2024-08-28-dataviz.html#cholera---a-picture-tells-1000-words",
    "title": "Better Data Visualizations",
    "section": "Cholera - a picture tells 1000 words",
    "text": "Cholera - a picture tells 1000 words\n\nHow many aspects of this graph can you point out which are relevant to figuring out that cholera infection was coming from a single pump? Are there any distracting aspects?"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#cholera---difficult-to-interpret",
    "href": "slides/2024-08-28-dataviz.html#cholera---difficult-to-interpret",
    "title": "Better Data Visualizations",
    "section": "Cholera - difficult to interpret",
    "text": "Cholera - difficult to interpret\n\nWhy would the outbreak already have begun to decline before the pump handle was removed?"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#challenger---problematic",
    "href": "slides/2024-08-28-dataviz.html#challenger---problematic",
    "title": "Better Data Visualizations",
    "section": "Challenger - Problematic",
    "text": "Challenger - Problematic\n\nOne of the graphics which was particularly unconvincing in trying to explain that O-rings fail in the cold."
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#challenger---better",
    "href": "slides/2024-08-28-dataviz.html#challenger---better",
    "title": "Better Data Visualizations",
    "section": "Challenger - Better????",
    "text": "Challenger - Better????\n\nA different graph of the Challenger information, now sorted by temperature"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#challenger---improved",
    "href": "slides/2024-08-28-dataviz.html#challenger---improved",
    "title": "Better Data Visualizations",
    "section": "Challenger - Improved",
    "text": "Challenger - Improved\n\nThe graphic the engineers should have led with in trying to persuade the administrators not to launch. It is evident that the number of O-ring failures is quite highly associated with the ambient temperature. Note the vital information on the x-axis associated with the large number of launches at warm temperatures that had zero O-ring failures.Note that the “improved” Challenger graphic was made by Tufte, not by the engineers working on the problem at the time."
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#fonts-matter",
    "href": "slides/2024-08-28-dataviz.html#fonts-matter",
    "title": "Better Data Visualizations",
    "section": "Fonts matter",
    "text": "Fonts matter"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#advice-on-plotting-specific",
    "href": "slides/2024-08-28-dataviz.html#advice-on-plotting-specific",
    "title": "Better Data Visualizations",
    "section": "Advice on plotting, specific",
    "text": "Advice on plotting, specific\n\nAvoid having other graph elements interfere with data\nUse visually prominent symbols\nAvoid over-plotting (One way to avoid over plotting: jitter the values)\nDifferent values of data may obscure each other\nInclude all or nearly all of the data\nFill data region"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#advice-on-plotting-general",
    "href": "slides/2024-08-28-dataviz.html#advice-on-plotting-general",
    "title": "Better Data Visualizations",
    "section": "Advice on plotting, general",
    "text": "Advice on plotting, general\n\nEliminate superfluous material\nFacilitate comparisons\nChoose the best scale\nMake the plot data / information rich\nUse good captions, alt text, conclusions"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#simplify",
    "href": "slides/2024-08-28-dataviz.html#simplify",
    "title": "Better Data Visualizations",
    "section": "Simplify",
    "text": "Simplify\n\nimage credit: https://www.darkhorseanalytics.com/portfolio-data-looks-better-naked"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#simplified",
    "href": "slides/2024-08-28-dataviz.html#simplified",
    "title": "Better Data Visualizations",
    "section": "Simplified",
    "text": "Simplified\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimage credit: https://www.darkhorseanalytics.com/portfolio-data-looks-better-naked"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#nyt-9721",
    "href": "slides/2024-08-28-dataviz.html#nyt-9721",
    "title": "Better Data Visualizations",
    "section": "NYT 9/7/21",
    "text": "NYT 9/7/21\n\nData VizWhat they did well\n\n\n\n\n\n\n\nOne in 5,000, NYT, D. Leonhardt 9/7/21; image credit: https://www.nytimes.com/2021/09/07/briefing/risk-breakthrough-infections-delta.html\n\n\n\n\n\n\n\nlighter grid lines\nno extra information\ngood caption\nregression line to give context to the trend\ny axes labels horizontal, not vertical\na few states (and the US) are highlighted to draw the reader’s eye"
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#worth-a-mention",
    "href": "slides/2024-08-28-dataviz.html#worth-a-mention",
    "title": "Better Data Visualizations",
    "section": "Worth a Mention",
    "text": "Worth a Mention\n\n\nW.E.B. Du Bois (1868-1963)\n\nsociologist\ndata scientist\n\n\n\n\n\n\n\nimage credit: wikipedia\n\n\n\n\n\n\nIn 1900 Du Bois contributed approximately 60 data visualizations to an exhibit at the Exposition Universelle in Paris, an exhibit designed to illustrate the progress made by African Americans since the end of slavery (only 37 years prior, in 1863)."
  },
  {
    "objectID": "slides/2024-08-28-dataviz.html#beautiful-informative-graphics",
    "href": "slides/2024-08-28-dataviz.html#beautiful-informative-graphics",
    "title": "Better Data Visualizations",
    "section": "Beautiful & Informative Graphics",
    "text": "Beautiful & Informative Graphics\nhttps://drawingmatter.org/w-e-b-du-bois-visionary-infographics/"
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#tidy-data",
    "href": "slides/2024-09-11-verbs.html#tidy-data",
    "title": "Data Wrangling",
    "section": "Tidy data",
    "text": "Tidy data\n\neach row = a unit of observation (here, a penguin)\neach column = a measure on some variable of interest, either quantitative (numbers with units) or categorical (discrete possibilities or categories)\neach entry contains a single data value; no analysis, summaries, footnotes, comments, etc, and only one value per cell"
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#definition-of-datum",
    "href": "slides/2024-09-11-verbs.html#definition-of-datum",
    "title": "Data Wrangling",
    "section": "Definition of datum",
    "text": "Definition of datum\nThe definition of datum can be much broader:\n\nDefinition of datum from the Oxford English Dictionary"
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#tidying-data",
    "href": "slides/2024-09-11-verbs.html#tidying-data",
    "title": "Data Wrangling",
    "section": "Tidying data",
    "text": "Tidying data\nHow would you wrangle each data example into a tidy format?\n\nthe emails in your inbox\n\nsocial media texts\n\nimages\n\nvideos\n\naudio files"
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#not-tidy-active-duty-military",
    "href": "slides/2024-09-11-verbs.html#not-tidy-active-duty-military",
    "title": "Data Wrangling",
    "section": "Not tidy – Active Duty Military",
    "text": "Not tidy – Active Duty Military\nThe Active Duty data are not tidy! What are the cases? How are the data not tidy? What might the data look like in tidy form? Suppose that the case was “an individual in the armed forces.” What variables would you use to capture the information in the following table?"
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#tidy-packages-the-tidyverse",
    "href": "slides/2024-09-11-verbs.html#tidy-packages-the-tidyverse",
    "title": "Data Wrangling",
    "section": "Tidy packages: the tidyverse",
    "text": "Tidy packages: the tidyverse\n\nimage credit: https://www.tidyverse.org/."
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#some-basic-verbs",
    "href": "slides/2024-09-11-verbs.html#some-basic-verbs",
    "title": "Data Wrangling",
    "section": "Some Basic Verbs",
    "text": "Some Basic Verbs\n\nfilter()\narrange()\nselect()\ndistinct()\nmutate()\nsummarize()\nsample_n()"
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#filter",
    "href": "slides/2024-09-11-verbs.html#filter",
    "title": "Data Wrangling",
    "section": "filter()",
    "text": "filter()\nAllows you to select a subset of the rows of a data frame. The first argument is the name of the data frame, the following arguments are the filters that you’d like to apply\nFor all flights on January 1st:\n\nfilter(flights, month == 1, day == 1)\n\n# A tibble: 842 × 19\n    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n 1  2013     1     1      517            515         2      830            819\n 2  2013     1     1      533            529         4      850            830\n 3  2013     1     1      542            540         2      923            850\n 4  2013     1     1      544            545        -1     1004           1022\n 5  2013     1     1      554            600        -6      812            837\n 6  2013     1     1      554            558        -4      740            728\n 7  2013     1     1      555            600        -5      913            854\n 8  2013     1     1      557            600        -3      709            723\n 9  2013     1     1      557            600        -3      838            846\n10  2013     1     1      558            600        -2      753            745\n# ℹ 832 more rows\n# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,\n#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,\n#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;"
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#constructing-filters",
    "href": "slides/2024-09-11-verbs.html#constructing-filters",
    "title": "Data Wrangling",
    "section": "Constructing filters",
    "text": "Constructing filters\nFilters are constructed of logical operators: &lt;, &gt;, &lt;=, &gt;=, ==, != (and some others).\nAdding them one by one to filter() is akin to saying “this AND that”. To say “this OR that OR both”, use |.\n\nfilter(flights, month == 1 | month == 2)\n\n# A tibble: 51,955 × 19\n    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n 1  2013     1     1      517            515         2      830            819\n 2  2013     1     1      533            529         4      850            830\n 3  2013     1     1      542            540         2      923            850\n 4  2013     1     1      544            545        -1     1004           1022\n 5  2013     1     1      554            600        -6      812            837\n 6  2013     1     1      554            558        -4      740            728\n 7  2013     1     1      555            600        -5      913            854\n 8  2013     1     1      557            600        -3      709            723\n 9  2013     1     1      557            600        -3      838            846\n10  2013     1     1      558            600        -2      753            745\n# ℹ 51,945 more rows\n# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,\n#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,\n#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;"
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#practice",
    "href": "slides/2024-09-11-verbs.html#practice",
    "title": "Data Wrangling",
    "section": "Practice",
    "text": "Practice\nConstruct filters to isolate:\n\nFlights that left on St. Patrick’s Day.\nFlights that were destined for Chicago’s primary airport.\nFlights that were destined for Chicago’s primary airport and were operated by United Airlines.\nFlights with flight times more than 2000 miles or that were in the air more than 5 hours."
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#solution",
    "href": "slides/2024-09-11-verbs.html#solution",
    "title": "Data Wrangling",
    "section": "Solution",
    "text": "Solution\n\nFlights that left on St. Patrick’s Day.\nFlights that were destined for Chicago’s primary airport.\nFlights that were destined for Chicago’s primary airport and were operated by United Airlines.\nFlights with flight times more than 2000 miles or that were in the air more than 5 hours.\n\n\nfilter(flights, month == 3, day == 17)\nfilter(flights, dest == \"ORD\")\nfilter(flights, dest == \"ORD\", carrier == \"UA\")\nfilter(flights, distance &gt; 2000 | air_time &gt; 5*60)"
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#arrange",
    "href": "slides/2024-09-11-verbs.html#arrange",
    "title": "Data Wrangling",
    "section": "arrange()",
    "text": "arrange()\narrange() reorders the rows: It takes a data frame, and a set of column names (or more complicated expressions) to order by. If you provide more than one column name, each additional column will be used to break ties in the values of preceding columns:\n\narrange(flights, year, month, day)\n\nUse desc() to sort in descending order.\n\narrange(flights, desc(arr_delay))"
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#select",
    "href": "slides/2024-09-11-verbs.html#select",
    "title": "Data Wrangling",
    "section": "select()",
    "text": "select()\nOften you work with large datasets with many columns where only a few are actually of interest to you. select() allows you to rapidly zoom in on a useful subset using operations that usually only work on numeric variable positions:\n\nselect(flights, year, month, day)\n\nYou can exclude columns using - and specify a range using :.\n\nselect(flights, -(year:day))"
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#distinct",
    "href": "slides/2024-09-11-verbs.html#distinct",
    "title": "Data Wrangling",
    "section": "distinct()",
    "text": "distinct()\nA common use of select() is to find out which values a set of variables takes. This is particularly useful in conjunction with the distinct() verb which only returns the unique values in a table.\nWhat do the following data correspond to?\n\ndistinct(select(flights, origin, dest))\n\n# A tibble: 224 × 2\n   origin dest \n   &lt;chr&gt;  &lt;chr&gt;\n 1 EWR    IAH  \n 2 LGA    IAH  \n 3 JFK    MIA  \n 4 JFK    BQN  \n 5 LGA    ATL  \n 6 EWR    ORD  \n 7 EWR    FLL  \n 8 LGA    IAD  \n 9 JFK    MCO  \n10 LGA    ORD  \n# ℹ 214 more rows"
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#mutate",
    "href": "slides/2024-09-11-verbs.html#mutate",
    "title": "Data Wrangling",
    "section": "mutate()",
    "text": "mutate()\nAs well as selecting from the set of existing columns, it’s often useful to add new columns that are functions of existing columns. This is the job of mutate():\n\nselect(mutate(flights, gain = dep_delay - arr_delay), \n       flight, dep_delay, arr_delay, gain)\n\n# A tibble: 336,776 × 4\n   flight dep_delay arr_delay  gain\n    &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;\n 1   1545         2        11    -9\n 2   1714         4        20   -16\n 3   1141         2        33   -31\n 4    725        -1       -18    17\n 5    461        -6       -25    19\n 6   1696        -4        12   -16\n 7    507        -5        19   -24\n 8   5708        -3       -14    11\n 9     79        -3        -8     5\n10    301        -2         8   -10\n# ℹ 336,766 more rows"
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#summarize-and-sample_n",
    "href": "slides/2024-09-11-verbs.html#summarize-and-sample_n",
    "title": "Data Wrangling",
    "section": "summarize() and sample_n()",
    "text": "summarize() and sample_n()\nsummarize() collapses a data frame to a single row based on some function. It’s not very useful yet, but it will be.\nsample_n() provides you with a random sample of rows.\n\nsummarize(flights, delay = mean(dep_delay, na.rm = TRUE))\n\n# A tibble: 1 × 1\n  delay\n  &lt;dbl&gt;\n1  12.6\n\nsample_n(flights, 10)\n\n# A tibble: 10 × 19\n    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n 1  2013    12     1     1919           1930       -11     2225           2235\n 2  2013     6    14     2059           2103        -4     2315           2310\n 3  2013     1    16      811            820        -9     1001            955\n 4  2013     6    12     2124           2130        -6     2232           2245\n 5  2013     9     5     1443           1445        -2     1758           1750\n 6  2013     8     7     2105           2100         5     2212           2214\n 7  2013     4    28      808            817        -9     1006           1031\n 8  2013     7    23       NA           1029        NA       NA           1209\n 9  2013     2    19      652            700        -8     1020           1025\n10  2013    11    19     1503           1512        -9     1623           1641\n# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,\n#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,\n#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;"
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#practice-1",
    "href": "slides/2024-09-11-verbs.html#practice-1",
    "title": "Data Wrangling",
    "section": "Practice",
    "text": "Practice\nMutate the data to create a new column that contains the average speed traveled by the plane for each flight.\nSelect the new variable and save it, along with tailnum, as a new data frame object."
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#practice-2",
    "href": "slides/2024-09-11-verbs.html#practice-2",
    "title": "Data Wrangling",
    "section": "Practice",
    "text": "Practice\nMutate the data to create a new column that contains the average speed traveled by the plane for each flight.\nSelect the new variable and save it, along with tailnum, as a new data frame object.\n\nflights2 &lt;- mutate(flights, speed = distance/(air_time/60))\nspeed_data &lt;- select(flights2, tailnum, speed)"
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#group_by",
    "href": "slides/2024-09-11-verbs.html#group_by",
    "title": "Data Wrangling",
    "section": "group_by()",
    "text": "group_by()\nsummarize() and sample_n() are even more powerful when combined with the idea of “group by”, repeating the operation separately on groups of observations within the dataset.\nThe group_by() function describes how to break a dataset down into groups of rows."
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#group_by-1",
    "href": "slides/2024-09-11-verbs.html#group_by-1",
    "title": "Data Wrangling",
    "section": "group_by()",
    "text": "group_by()\nFind the fastest airplanes in the bunch, measured as the average speed per airplane.\n\nby_tailnum &lt;- group_by(speed_data, tailnum)\navg_speed &lt;- summarize(by_tailnum, \n                       count = n(), \n                       avg_speed = mean(speed, na.rm = TRUE))\narrange(avg_speed, desc(avg_speed))\n\n# A tibble: 4,044 × 3\n   tailnum count avg_speed\n   &lt;chr&gt;   &lt;int&gt;     &lt;dbl&gt;\n 1 N228UA      1      501.\n 2 N315AS      1      499.\n 3 N654UA      1      499.\n 4 N819AW      1      490.\n 5 N382HA     26      486.\n 6 N388HA     36      484.\n 7 N391HA     21      484.\n 8 N777UA      1      483.\n 9 N385HA     28      483.\n10 N392HA     13      482.\n# ℹ 4,034 more rows"
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#chaining",
    "href": "slides/2024-09-11-verbs.html#chaining",
    "title": "Data Wrangling",
    "section": "Chaining",
    "text": "Chaining\nInstead of applying each verb step-by-step, we can chain them into a single data pipeline, connected with the |&gt; operator. You start the pipeline with a data frame and then pass it to each function in turn.\nThe pipe syntax (|&gt;) takes a data frame and sends it to the argument of a function. The mapping goes to the first available argument in the function. For example:\nx |&gt;  f() is the same as f(x)\nx |&gt;  f(y) is the same as f(x, y)"
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#mornings",
    "href": "slides/2024-09-11-verbs.html#mornings",
    "title": "Data Wrangling",
    "section": "Mornings",
    "text": "Mornings\n\nme_step1 &lt;- dress(me, what = sports)  \nme_step2 &lt;- exercise(me_step1, how = running)  \nme_step3 &lt;- eat(me_step2, choice = cereal)  \nme_step4 &lt;- dress(me_step3, what = school)  \nme_step5 &lt;- commute(me_step4, transportation = bike)"
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#mornings-1",
    "href": "slides/2024-09-11-verbs.html#mornings-1",
    "title": "Data Wrangling",
    "section": "Mornings",
    "text": "Mornings\n\ncommute(dress(eat(exercise(dress(me, what = sports), how = running), choice = cereal), what = school), transportation = bike)"
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#morning",
    "href": "slides/2024-09-11-verbs.html#morning",
    "title": "Data Wrangling",
    "section": "Morning",
    "text": "Morning\n(better??)\n\ncommute(\n  dress(\n    eat(\n      exercise(\n        dress(me, \n              what = sports), \n        how = running), \n      choice = cereal), \n    what = school), \n  transportation = bike)"
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#mornings-2",
    "href": "slides/2024-09-11-verbs.html#mornings-2",
    "title": "Data Wrangling",
    "section": "Mornings",
    "text": "Mornings\n\nme |&gt; \n  dress(what = sports) |&gt; \n  exercise(how = running) |&gt; \n  eat(choice = cereal) |&gt; \n  dress(what = school) |&gt; \n  commute(transportation = bike)"
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#little-bunny-foo-foo",
    "href": "slides/2024-09-11-verbs.html#little-bunny-foo-foo",
    "title": "Data Wrangling",
    "section": "Little Bunny Foo Foo",
    "text": "Little Bunny Foo Foo\nFrom Hadley Wickham, how to think about tidy data.\n\nLittle bunny Foo Foo\n\n\nWent hopping through the forest\n\n\nScooping up the field mice\n\n\nAnd bopping them on the head"
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#little-bunny-foo-foo-1",
    "href": "slides/2024-09-11-verbs.html#little-bunny-foo-foo-1",
    "title": "Data Wrangling",
    "section": "Little Bunny Foo Foo",
    "text": "Little Bunny Foo Foo\nThe nursery rhyme could be created by a series of steps where the output from each step is saved as an object along the way.\n\nfoo_foo &lt;- little_bunny()\nfoo_foo_1 &lt;- hop(foo_foo, through = forest)\nfoo_foo_2 &lt;- scoop(foo_foo_2, up = field_mice)\nfoo_foo_3 &lt;- bop(foo_foo_2, on = head)"
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#little-bunny-foo-foo-2",
    "href": "slides/2024-09-11-verbs.html#little-bunny-foo-foo-2",
    "title": "Data Wrangling",
    "section": "Little Bunny Foo Foo",
    "text": "Little Bunny Foo Foo\nAnother approach is to concatenate the functions so that there is only one output.\n\nbop(\n   scoop(\n      hop(foo_foo, through = forest),\n      up = field_mice),\n   on = head)"
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#little-bunny-foo-foo-3",
    "href": "slides/2024-09-11-verbs.html#little-bunny-foo-foo-3",
    "title": "Data Wrangling",
    "section": "Little Bunny Foo Foo",
    "text": "Little Bunny Foo Foo\nOr even worse, as one line:\n\nbop(scoop(hop(foo_foo, through = forest), up = field_mice), on = head)))"
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#little-bunny-foo-foo-4",
    "href": "slides/2024-09-11-verbs.html#little-bunny-foo-foo-4",
    "title": "Data Wrangling",
    "section": "Little Bunny Foo Foo",
    "text": "Little Bunny Foo Foo\nInstead, the code can be written using the pipe in the order in which the function is evaluated:\n\nfoo_foo |&gt; \n   hop(through = forest) |&gt; \n       scoop(up = field_mice) |&gt; \n           bop(on = head)"
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#flights",
    "href": "slides/2024-09-11-verbs.html#flights",
    "title": "Data Wrangling",
    "section": "Flights",
    "text": "Flights\n\nNo pipePipe\n\n\n\nflights2 &lt;- mutate(flights, speed = distance/(air_time/60))\ntail_speed &lt;- select(flights2, tailnum, speed)\ntail_speed_grp &lt;- group_by(tail_speed, tailnum)\ntail_ave &lt;- summarize(tail_speed_grp, number = n(),\n                      avg_speed = mean(speed, na.rm = TRUE))\narrange(tail_ave, desc(avg_speed))\n\n# A tibble: 4,044 × 3\n   tailnum number avg_speed\n   &lt;chr&gt;    &lt;int&gt;     &lt;dbl&gt;\n 1 N228UA       1      501.\n 2 N315AS       1      499.\n 3 N654UA       1      499.\n 4 N819AW       1      490.\n 5 N382HA      26      486.\n 6 N388HA      36      484.\n 7 N391HA      21      484.\n 8 N777UA       1      483.\n 9 N385HA      28      483.\n10 N392HA      13      482.\n# ℹ 4,034 more rows\n\n\n\n\n\nflights |&gt; \n  mutate(speed = distance / (air_time/60)) |&gt; \n  select(tailnum, speed) |&gt; \n  group_by(tailnum) |&gt;  \n  summarize(number = n(), \n            avg_speed = mean(speed, na.rm = TRUE)) |&gt; \n  arrange(desc(avg_speed))\n\n# A tibble: 4,044 × 3\n   tailnum number avg_speed\n   &lt;chr&gt;    &lt;int&gt;     &lt;dbl&gt;\n 1 N228UA       1      501.\n 2 N315AS       1      499.\n 3 N654UA       1      499.\n 4 N819AW       1      490.\n 5 N382HA      26      486.\n 6 N388HA      36      484.\n 7 N391HA      21      484.\n 8 N777UA       1      483.\n 9 N385HA      28      483.\n10 N392HA      13      482.\n# ℹ 4,034 more rows"
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#practice-3",
    "href": "slides/2024-09-11-verbs.html#practice-3",
    "title": "Data Wrangling",
    "section": "Practice",
    "text": "Practice\nForm a chain that creates a data frame containing only carrier and the mean departure delay time. Which carriers have the highest and lowest mean delays?"
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#practice-4",
    "href": "slides/2024-09-11-verbs.html#practice-4",
    "title": "Data Wrangling",
    "section": "Practice",
    "text": "Practice\nForm a chain that creates a data frame containing only carrier and the mean departure delay time. Which carriers have the highest and lowest mean delays?\n\nflights |&gt; \n  group_by(carrier) |&gt; \n  summarize(avg_delay = mean(dep_delay, na.rm = TRUE)) |&gt; \n  arrange(desc(avg_delay))\n\n# A tibble: 16 × 2\n   carrier avg_delay\n   &lt;chr&gt;       &lt;dbl&gt;\n 1 F9          20.2 \n 2 EV          20.0 \n 3 YV          19.0 \n 4 FL          18.7 \n 5 WN          17.7 \n 6 9E          16.7 \n 7 B6          13.0 \n 8 VX          12.9 \n 9 OO          12.6 \n10 UA          12.1 \n11 MQ          10.6 \n12 DL           9.26\n13 AA           8.59\n14 AS           5.80\n15 HA           4.90\n16 US           3.78"
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#practice-again",
    "href": "slides/2024-09-11-verbs.html#practice-again",
    "title": "Data Wrangling",
    "section": "Practice again",
    "text": "Practice again\nSay you’re curious about the relationship between the number of flights that each plane made in 2013, the mean distance that each of those planes flew, and the mean arrival delay. You also want to exclude the edge cases from your analysis, so focus on the planes that have logged more than 20 flights and flown an average distance of less than 2000 miles. Please form the chain that creates this dataset."
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#solution-1",
    "href": "slides/2024-09-11-verbs.html#solution-1",
    "title": "Data Wrangling",
    "section": "Solution",
    "text": "Solution\n\ndelay_data &lt;- flights |&gt; \n  group_by(tailnum) |&gt; \n  summarize(number = n(),\n            dist = mean(distance, na.rm = TRUE), \n            delay = mean(arr_delay, na.rm = TRUE)) |&gt; \n  filter(number &gt; 20, dist &lt; 2000)"
  },
  {
    "objectID": "slides/2024-09-11-verbs.html#visualizing-the-data",
    "href": "slides/2024-09-11-verbs.html#visualizing-the-data",
    "title": "Data Wrangling",
    "section": "Visualizing the data",
    "text": "Visualizing the data\n\nVizCode\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ndelay_data |&gt; \n ggplot(aes(dist, delay)) +\n geom_point(aes(size = number), \n            alpha = 1/2) +\n geom_smooth() +\n scale_size_area()\n\nWhen scale_size_area is used, the default behavior is to scale the area of points to be proportional to the value."
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html",
    "href": "slides/2024-09-18-pivotjoin.html",
    "title": "Data Wrangling",
    "section": "",
    "text": "Tidy data\nData verbs"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#tidy-data",
    "href": "slides/2024-09-18-pivotjoin.html#tidy-data",
    "title": "Data Wrangling",
    "section": "Tidy data",
    "text": "Tidy data\n\neach row = a unit of observation (here, a penguin)\neach column = a measure on some variable of interest, either quantitative (numbers with units) or categorical (discrete possibilities or categories)\neach entry contains a single data value; no analysis, summaries, footnotes, comments, etc, and only one value per cell"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#definition-of-datum",
    "href": "slides/2024-09-18-pivotjoin.html#definition-of-datum",
    "title": "Data Wrangling",
    "section": "Definition of datum",
    "text": "Definition of datum\nThe definition of datum can be much broader:\n\n\n\n\n\nDefinition of datum from the Oxford English Dictionary"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#tidying-data",
    "href": "slides/2024-09-18-pivotjoin.html#tidying-data",
    "title": "Data Wrangling",
    "section": "Tidying data",
    "text": "Tidying data\nHow would you wrangle each data example into a tidy format?\n\nthe emails in your inbox\n\nsocial media texts\n\nimages\n\nvideos\n\naudio files"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#not-tidy-active-duty-military",
    "href": "slides/2024-09-18-pivotjoin.html#not-tidy-active-duty-military",
    "title": "Data Wrangling",
    "section": "Not tidy – Active Duty Military",
    "text": "Not tidy – Active Duty Military\nThe Active Duty data are not tidy! What are the cases? How are the data not tidy? What might the data look like in tidy form? Suppose that the case was “an individual in the armed forces.” What variables would you use to capture the information in the following table?"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#tidy-packages-the-tidyverse",
    "href": "slides/2024-09-18-pivotjoin.html#tidy-packages-the-tidyverse",
    "title": "Data Wrangling",
    "section": "Tidy packages: the tidyverse",
    "text": "Tidy packages: the tidyverse\n\n\n\n\n\nimage credit: https://www.tidyverse.org/."
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#some-basic-verbs",
    "href": "slides/2024-09-18-pivotjoin.html#some-basic-verbs",
    "title": "Data Wrangling",
    "section": "Some Basic Verbs",
    "text": "Some Basic Verbs\n\nfilter()\narrange()\nselect()\ndistinct()\nmutate()\nsummarize()\nsample_n()"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#filter",
    "href": "slides/2024-09-18-pivotjoin.html#filter",
    "title": "Data Wrangling",
    "section": "filter()",
    "text": "filter()\nAllows you to select a subset of the rows of a data frame. The first argument is the name of the data frame, the following arguments are the filters that you’d like to apply\nFor all flights on January 1st:\n\nfilter(flights, month == 1, day == 1)\n\n# A tibble: 842 × 19\n    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n 1  2013     1     1      517            515         2      830            819\n 2  2013     1     1      533            529         4      850            830\n 3  2013     1     1      542            540         2      923            850\n 4  2013     1     1      544            545        -1     1004           1022\n 5  2013     1     1      554            600        -6      812            837\n 6  2013     1     1      554            558        -4      740            728\n 7  2013     1     1      555            600        -5      913            854\n 8  2013     1     1      557            600        -3      709            723\n 9  2013     1     1      557            600        -3      838            846\n10  2013     1     1      558            600        -2      753            745\n# ℹ 832 more rows\n# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,\n#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,\n#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#constructing-filters",
    "href": "slides/2024-09-18-pivotjoin.html#constructing-filters",
    "title": "Data Wrangling",
    "section": "Constructing filters",
    "text": "Constructing filters\nFilters are constructed of logical operators: &lt;, &gt;, &lt;=, &gt;=, ==, != (and some others).\nAdding them one by one to filter() is akin to saying “this AND that”. To say “this OR that OR both”, use |.\n\nfilter(flights, month == 1 | month == 2)\n\n# A tibble: 51,955 × 19\n    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n 1  2013     1     1      517            515         2      830            819\n 2  2013     1     1      533            529         4      850            830\n 3  2013     1     1      542            540         2      923            850\n 4  2013     1     1      544            545        -1     1004           1022\n 5  2013     1     1      554            600        -6      812            837\n 6  2013     1     1      554            558        -4      740            728\n 7  2013     1     1      555            600        -5      913            854\n 8  2013     1     1      557            600        -3      709            723\n 9  2013     1     1      557            600        -3      838            846\n10  2013     1     1      558            600        -2      753            745\n# ℹ 51,945 more rows\n# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,\n#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,\n#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#practice",
    "href": "slides/2024-09-18-pivotjoin.html#practice",
    "title": "Data Wrangling",
    "section": "Practice",
    "text": "Practice\nConstruct filters to isolate:\n\nFlights that left on St. Patrick’s Day.\nFlights that were destined for Chicago’s primary airport.\nFlights that were destined for Chicago’s primary airport and were operated by United Airlines.\nFlights with flight times more than 2000 miles or that were in the air more than 5 hours."
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#solution",
    "href": "slides/2024-09-18-pivotjoin.html#solution",
    "title": "Data Wrangling",
    "section": "Solution",
    "text": "Solution\n\nFlights that left on St. Patrick’s Day.\nFlights that were destined for Chicago’s primary airport.\nFlights that were destined for Chicago’s primary airport and were operated by United Airlines.\nFlights with flight times more than 2000 miles or that were in the air more than 5 hours.\n\n\nfilter(flights, month == 3, day == 17)\nfilter(flights, dest == \"ORD\")\nfilter(flights, dest == \"ORD\", carrier == \"UA\")\nfilter(flights, distance &gt; 2000 | air_time &gt; 5*60)"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#arrange",
    "href": "slides/2024-09-18-pivotjoin.html#arrange",
    "title": "Data Wrangling",
    "section": "arrange()",
    "text": "arrange()\narrange() reorders the rows: It takes a data frame, and a set of column names (or more complicated expressions) to order by. If you provide more than one column name, each additional column will be used to break ties in the values of preceding columns:\n\narrange(flights, year, month, day)\n\nUse desc() to sort in descending order.\n\narrange(flights, desc(arr_delay))"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#select",
    "href": "slides/2024-09-18-pivotjoin.html#select",
    "title": "Data Wrangling",
    "section": "select()",
    "text": "select()\nOften you work with large datasets with many columns where only a few are actually of interest to you. select() allows you to rapidly zoom in on a useful subset using operations that usually only work on numeric variable positions:\n\nselect(flights, year, month, day)\n\nYou can exclude columns using - and specify a range using :.\n\nselect(flights, -(year:day))"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#distinct",
    "href": "slides/2024-09-18-pivotjoin.html#distinct",
    "title": "Data Wrangling",
    "section": "distinct()",
    "text": "distinct()\nA common use of select() is to find out which values a set of variables takes. This is particularly useful in conjunction with the distinct() verb which only returns the unique values in a table.\nWhat do the following data correspond to?\n\ndistinct(select(flights, origin, dest))\n\n# A tibble: 224 × 2\n   origin dest \n   &lt;chr&gt;  &lt;chr&gt;\n 1 EWR    IAH  \n 2 LGA    IAH  \n 3 JFK    MIA  \n 4 JFK    BQN  \n 5 LGA    ATL  \n 6 EWR    ORD  \n 7 EWR    FLL  \n 8 LGA    IAD  \n 9 JFK    MCO  \n10 LGA    ORD  \n# ℹ 214 more rows"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#mutate",
    "href": "slides/2024-09-18-pivotjoin.html#mutate",
    "title": "Data Wrangling",
    "section": "mutate()",
    "text": "mutate()\nAs well as selecting from the set of existing columns, it’s often useful to add new columns that are functions of existing columns. This is the job of mutate():\n\nselect(mutate(flights, gain = dep_delay - arr_delay), \n       flight, dep_delay, arr_delay, gain)\n\n# A tibble: 336,776 × 4\n   flight dep_delay arr_delay  gain\n    &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;\n 1   1545         2        11    -9\n 2   1714         4        20   -16\n 3   1141         2        33   -31\n 4    725        -1       -18    17\n 5    461        -6       -25    19\n 6   1696        -4        12   -16\n 7    507        -5        19   -24\n 8   5708        -3       -14    11\n 9     79        -3        -8     5\n10    301        -2         8   -10\n# ℹ 336,766 more rows"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#summarize-and-sample_n",
    "href": "slides/2024-09-18-pivotjoin.html#summarize-and-sample_n",
    "title": "Data Wrangling",
    "section": "summarize() and sample_n()",
    "text": "summarize() and sample_n()\nsummarize() collapses a data frame to a single row based on some function. It’s not very useful yet, but it will be.\nsample_n() provides you with a random sample of rows.\n\nsummarize(flights, delay = mean(dep_delay, na.rm = TRUE))\n\n# A tibble: 1 × 1\n  delay\n  &lt;dbl&gt;\n1  12.6\n\nsample_n(flights, 10)\n\n# A tibble: 10 × 19\n    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n 1  2013     3     9     1905           1855        10     2113           2132\n 2  2013     6    20     1052           1057        -5     1312           1338\n 3  2013     5    29     1213           1210         3     1509           1510\n 4  2013     5     8     2150           2030        80        7           2227\n 5  2013     6    13     1429           1419        10     1700           1659\n 6  2013    11    22     1458           1459        -1     1820           1819\n 7  2013     6     8     1836           1753        43     2046           2015\n 8  2013    10    27     1055           1030        25     1335           1324\n 9  2013    11     6     1941           1950        -9     2137           2140\n10  2013     7    23      919            920        -1     1224           1210\n# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,\n#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,\n#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#practice-1",
    "href": "slides/2024-09-18-pivotjoin.html#practice-1",
    "title": "Data Wrangling",
    "section": "Practice",
    "text": "Practice\nMutate the data to create a new column that contains the average speed traveled by the plane for each flight.\nSelect the new variable and save it, along with tailnum, as a new data frame object."
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#practice-2",
    "href": "slides/2024-09-18-pivotjoin.html#practice-2",
    "title": "Data Wrangling",
    "section": "Practice",
    "text": "Practice\nMutate the data to create a new column that contains the average speed traveled by the plane for each flight.\nSelect the new variable and save it, along with tailnum, as a new data frame object.\n\nflights2 &lt;- mutate(flights, speed = distance/(air_time/60))\nspeed_data &lt;- select(flights2, tailnum, speed)"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#group_by",
    "href": "slides/2024-09-18-pivotjoin.html#group_by",
    "title": "Data Wrangling",
    "section": "group_by()",
    "text": "group_by()\nsummarize() and sample_n() are even more powerful when combined with the idea of “group by”, repeating the operation separately on groups of observations within the dataset.\nThe group_by() function describes how to break a dataset down into groups of rows."
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#group_by-1",
    "href": "slides/2024-09-18-pivotjoin.html#group_by-1",
    "title": "Data Wrangling",
    "section": "group_by()",
    "text": "group_by()\nFind the fastest airplanes in the bunch, measured as the average speed per airplane.\n\nby_tailnum &lt;- group_by(speed_data, tailnum)\navg_speed &lt;- summarize(by_tailnum, \n                       count = n(), \n                       avg_speed = mean(speed, na.rm = TRUE))\narrange(avg_speed, desc(avg_speed))\n\n# A tibble: 4,044 × 3\n   tailnum count avg_speed\n   &lt;chr&gt;   &lt;int&gt;     &lt;dbl&gt;\n 1 N228UA      1      501.\n 2 N315AS      1      499.\n 3 N654UA      1      499.\n 4 N819AW      1      490.\n 5 N382HA     26      486.\n 6 N388HA     36      484.\n 7 N391HA     21      484.\n 8 N777UA      1      483.\n 9 N385HA     28      483.\n10 N392HA     13      482.\n# ℹ 4,034 more rows"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#chaining",
    "href": "slides/2024-09-18-pivotjoin.html#chaining",
    "title": "Data Wrangling",
    "section": "Chaining",
    "text": "Chaining\nInstead of applying each verb step-by-step, we can chain them into a single data pipeline, connected with the |&gt; operator. You start the pipeline with a data frame and then pass it to each function in turn.\nThe pipe syntax (|&gt;) takes a data frame and sends it to the argument of a function. The mapping goes to the first available argument in the function. For example:\nx |&gt;  f() is the same as f(x)\nx |&gt;  f(y) is the same as f(x, y)"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#mornings",
    "href": "slides/2024-09-18-pivotjoin.html#mornings",
    "title": "Data Wrangling",
    "section": "Mornings",
    "text": "Mornings\n\nme_step1 &lt;- dress(me, what = sports)  \nme_step2 &lt;- exercise(me_step1, how = running)  \nme_step3 &lt;- eat(me_step2, choice = cereal)  \nme_step4 &lt;- dress(me_step3, what = school)  \nme_step5 &lt;- commute(me_step4, transportation = bike)"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#mornings-1",
    "href": "slides/2024-09-18-pivotjoin.html#mornings-1",
    "title": "Data Wrangling",
    "section": "Mornings",
    "text": "Mornings\n\ncommute(dress(eat(exercise(dress(me, what = sports), how = running), choice = cereal), what = school), transportation = bike)"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#morning",
    "href": "slides/2024-09-18-pivotjoin.html#morning",
    "title": "Data Wrangling",
    "section": "Morning",
    "text": "Morning\n(better??)\n\ncommute(\n  dress(\n    eat(\n      exercise(\n        dress(me, \n              what = sports), \n        how = running), \n      choice = cereal), \n    what = school), \n  transportation = bike)"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#mornings-2",
    "href": "slides/2024-09-18-pivotjoin.html#mornings-2",
    "title": "Data Wrangling",
    "section": "Mornings",
    "text": "Mornings\n\nme |&gt; \n  dress(what = sports) |&gt; \n  exercise(how = running) |&gt; \n  eat(choice = cereal) |&gt; \n  dress(what = school) |&gt; \n  commute(transportation = bike)"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#little-bunny-foo-foo",
    "href": "slides/2024-09-18-pivotjoin.html#little-bunny-foo-foo",
    "title": "Data Wrangling",
    "section": "Little Bunny Foo Foo",
    "text": "Little Bunny Foo Foo\nFrom Hadley Wickham, how to think about tidy data.\n\nLittle bunny Foo Foo\n\n\nWent hopping through the forest\n\n\nScooping up the field mice\n\n\nAnd bopping them on the head"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#little-bunny-foo-foo-1",
    "href": "slides/2024-09-18-pivotjoin.html#little-bunny-foo-foo-1",
    "title": "Data Wrangling",
    "section": "Little Bunny Foo Foo",
    "text": "Little Bunny Foo Foo\nThe nursery rhyme could be created by a series of steps where the output from each step is saved as an object along the way.\n\nfoo_foo &lt;- little_bunny()\nfoo_foo_1 &lt;- hop(foo_foo, through = forest)\nfoo_foo_2 &lt;- scoop(foo_foo_2, up = field_mice)\nfoo_foo_3 &lt;- bop(foo_foo_2, on = head)"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#little-bunny-foo-foo-2",
    "href": "slides/2024-09-18-pivotjoin.html#little-bunny-foo-foo-2",
    "title": "Data Wrangling",
    "section": "Little Bunny Foo Foo",
    "text": "Little Bunny Foo Foo\nAnother approach is to concatenate the functions so that there is only one output.\n\nbop(\n   scoop(\n      hop(foo_foo, through = forest),\n      up = field_mice),\n   on = head)"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#little-bunny-foo-foo-3",
    "href": "slides/2024-09-18-pivotjoin.html#little-bunny-foo-foo-3",
    "title": "Data Wrangling",
    "section": "Little Bunny Foo Foo",
    "text": "Little Bunny Foo Foo\nOr even worse, as one line:\n\nbop(scoop(hop(foo_foo, through = forest), up = field_mice), on = head)))"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#little-bunny-foo-foo-4",
    "href": "slides/2024-09-18-pivotjoin.html#little-bunny-foo-foo-4",
    "title": "Data Wrangling",
    "section": "Little Bunny Foo Foo",
    "text": "Little Bunny Foo Foo\nInstead, the code can be written using the pipe in the order in which the function is evaluated:\n\nfoo_foo |&gt; \n   hop(through = forest) |&gt; \n       scoop(up = field_mice) |&gt; \n           bop(on = head)"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#flights",
    "href": "slides/2024-09-18-pivotjoin.html#flights",
    "title": "Data Wrangling",
    "section": "Flights",
    "text": "Flights\n\nNo pipePipe\n\n\n\nflights2 &lt;- mutate(flights, speed = distance/(air_time/60))\ntail_speed &lt;- select(flights2, tailnum, speed)\ntail_speed_grp &lt;- group_by(tail_speed, tailnum)\ntail_ave &lt;- summarize(tail_speed_grp, number = n(),\n                      avg_speed = mean(speed, na.rm = TRUE))\narrange(tail_ave, desc(avg_speed))\n\n# A tibble: 4,044 × 3\n   tailnum number avg_speed\n   &lt;chr&gt;    &lt;int&gt;     &lt;dbl&gt;\n 1 N228UA       1      501.\n 2 N315AS       1      499.\n 3 N654UA       1      499.\n 4 N819AW       1      490.\n 5 N382HA      26      486.\n 6 N388HA      36      484.\n 7 N391HA      21      484.\n 8 N777UA       1      483.\n 9 N385HA      28      483.\n10 N392HA      13      482.\n# ℹ 4,034 more rows\n\n\n\n\n\nflights |&gt; \n  mutate(speed = distance / (air_time/60)) |&gt; \n  select(tailnum, speed) |&gt; \n  group_by(tailnum) |&gt;  \n  summarize(number = n(), \n            avg_speed = mean(speed, na.rm = TRUE)) |&gt; \n  arrange(desc(avg_speed))\n\n# A tibble: 4,044 × 3\n   tailnum number avg_speed\n   &lt;chr&gt;    &lt;int&gt;     &lt;dbl&gt;\n 1 N228UA       1      501.\n 2 N315AS       1      499.\n 3 N654UA       1      499.\n 4 N819AW       1      490.\n 5 N382HA      26      486.\n 6 N388HA      36      484.\n 7 N391HA      21      484.\n 8 N777UA       1      483.\n 9 N385HA      28      483.\n10 N392HA      13      482.\n# ℹ 4,034 more rows"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#practice-3",
    "href": "slides/2024-09-18-pivotjoin.html#practice-3",
    "title": "Data Wrangling",
    "section": "Practice",
    "text": "Practice\nForm a chain that creates a data frame containing only carrier and the mean departure delay time. Which carriers have the highest and lowest mean delays?"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#practice-4",
    "href": "slides/2024-09-18-pivotjoin.html#practice-4",
    "title": "Data Wrangling",
    "section": "Practice",
    "text": "Practice\nForm a chain that creates a data frame containing only carrier and the mean departure delay time. Which carriers have the highest and lowest mean delays?\n\nflights |&gt; \n  group_by(carrier) |&gt; \n  summarize(avg_delay = mean(dep_delay, na.rm = TRUE)) |&gt; \n  arrange(desc(avg_delay))\n\n# A tibble: 16 × 2\n   carrier avg_delay\n   &lt;chr&gt;       &lt;dbl&gt;\n 1 F9          20.2 \n 2 EV          20.0 \n 3 YV          19.0 \n 4 FL          18.7 \n 5 WN          17.7 \n 6 9E          16.7 \n 7 B6          13.0 \n 8 VX          12.9 \n 9 OO          12.6 \n10 UA          12.1 \n11 MQ          10.6 \n12 DL           9.26\n13 AA           8.59\n14 AS           5.80\n15 HA           4.90\n16 US           3.78"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#practice-again",
    "href": "slides/2024-09-18-pivotjoin.html#practice-again",
    "title": "Data Wrangling",
    "section": "Practice again",
    "text": "Practice again\nSay you’re curious about the relationship between the number of flights that each plane made in 2013, the mean distance that each of those planes flew, and the mean arrival delay. You also want to exclude the edge cases from your analysis, so focus on the planes that have logged more than 20 flights and flown an average distance of less than 2000 miles. Please form the chain that creates this dataset."
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#solution-1",
    "href": "slides/2024-09-18-pivotjoin.html#solution-1",
    "title": "Data Wrangling",
    "section": "Solution",
    "text": "Solution\n\ndelay_data &lt;- flights |&gt; \n  group_by(tailnum) |&gt; \n  summarize(number = n(),\n            dist = mean(distance, na.rm = TRUE), \n            delay = mean(arr_delay, na.rm = TRUE)) |&gt; \n  filter(number &gt; 20, dist &lt; 2000)"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#visualizing-the-data",
    "href": "slides/2024-09-18-pivotjoin.html#visualizing-the-data",
    "title": "Data Wrangling",
    "section": "Visualizing the data",
    "text": "Visualizing the data\n\nVizCode\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ndelay_data |&gt; \n ggplot(aes(dist, delay)) +\n geom_point(aes(size = number), \n            alpha = 1/2) +\n geom_smooth() +\n scale_size_area()\n\nWhen scale_size_area is used, the default behavior is to scale the area of points to be proportional to the value.\n\n\n\n\n:::"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#from-wide-to-long-and-long-to-wide",
    "href": "slides/2024-09-18-pivotjoin.html#from-wide-to-long-and-long-to-wide",
    "title": "Pivoting and Joining",
    "section": "From wide to long and long to wide",
    "text": "From wide to long and long to wide\n\npivot_longer() makes the data frame “longer” – many columns into a few columns (more rows):\n\npivot_longer(data,cols,names_to=,value_to=)\n\npivot_wider() makes the data frame “wider” – a few columns into many columns (fewer rows):\n\npivot_wider(data,names_from=,values_from=)"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#from-wide-to-long-and-long-to-wide-1",
    "href": "slides/2024-09-18-pivotjoin.html#from-wide-to-long-and-long-to-wide-1",
    "title": "Pivoting and Joining",
    "section": "From wide to long and long to wide",
    "text": "From wide to long and long to wide"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#pivot_longer",
    "href": "slides/2024-09-18-pivotjoin.html#pivot_longer",
    "title": "Pivoting and Joining",
    "section": "pivot_longer",
    "text": "pivot_longer\npivot_longer will be demonstrated using datasets from GapMinder.\nlitF represents country, year, and female literacy rate.\n\nlibrary(googlesheets4)\ngs4_deauth()\nlitF &lt;- read_sheet(\"https://docs.google.com/spreadsheets/d/1hDinTIRHQIaZg1RUn6Z_6mo12PtKwEPFIz_mJVF6P5I/pub?gid=0\")\n\nlitF\n\n# A tibble: 260 × 38\n   Adult (15+) literacy rate …¹ `1975` `1976` `1977` `1978` `1979` `1980` `1981`\n   &lt;chr&gt;                         &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;\n 1 Afghanistan                      NA     NA     NA     NA   4.99   NA       NA\n 2 Albania                          NA     NA     NA     NA  NA      NA       NA\n 3 Algeria                          NA     NA     NA     NA  NA      NA       NA\n 4 Andorra                          NA     NA     NA     NA  NA      NA       NA\n 5 Angola                           NA     NA     NA     NA  NA      NA       NA\n 6 Anguilla                         NA     NA     NA     NA  NA      NA       NA\n 7 Antigua and Barbuda              NA     NA     NA     NA  NA      NA       NA\n 8 Argentina                        NA     NA     NA     NA  NA      93.6     NA\n 9 Armenia                          NA     NA     NA     NA  NA      NA       NA\n10 Aruba                            NA     NA     NA     NA  NA      NA       NA\n# ℹ 250 more rows\n# ℹ abbreviated name: ¹​`Adult (15+) literacy rate (%). Female`\n# ℹ 30 more variables: `1982` &lt;dbl&gt;, `1983` &lt;dbl&gt;, `1984` &lt;dbl&gt;, `1985` &lt;dbl&gt;,\n#   `1986` &lt;dbl&gt;, `1987` &lt;dbl&gt;, `1988` &lt;dbl&gt;, `1989` &lt;dbl&gt;, `1990` &lt;dbl&gt;,\n#   `1991` &lt;dbl&gt;, `1992` &lt;dbl&gt;, `1993` &lt;dbl&gt;, `1994` &lt;dbl&gt;, `1995` &lt;dbl&gt;,\n#   `1996` &lt;dbl&gt;, `1997` &lt;dbl&gt;, `1998` &lt;dbl&gt;, `1999` &lt;dbl&gt;, `2000` &lt;dbl&gt;,\n#   `2001` &lt;dbl&gt;, `2002` &lt;dbl&gt;, `2003` &lt;dbl&gt;, `2004` &lt;dbl&gt;, `2005` &lt;dbl&gt;, …"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#pivot_longer-1",
    "href": "slides/2024-09-18-pivotjoin.html#pivot_longer-1",
    "title": "Pivoting and Joining",
    "section": "pivot_longer",
    "text": "pivot_longer\n\nlitF &lt;- litF |&gt; \n  select(country = starts_with(\"Adult\"), everything()) |&gt; \n  pivot_longer(cols = -country,\n               names_to = \"year\", \n               values_to = \"litRateF\") |&gt; \n  filter(!is.na(litRateF))\n\nlitF\n\n# A tibble: 571 × 3\n   country     year  litRateF\n   &lt;chr&gt;       &lt;chr&gt;    &lt;dbl&gt;\n 1 Afghanistan 1979      4.99\n 2 Afghanistan 2011     13   \n 3 Albania     2001     98.3 \n 4 Albania     2008     94.7 \n 5 Albania     2011     95.7 \n 6 Algeria     1987     35.8 \n 7 Algeria     2002     60.1 \n 8 Algeria     2006     63.9 \n 9 Angola      2001     54.2 \n10 Angola      2011     58.6 \n# ℹ 561 more rows"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#pivot_longer-2",
    "href": "slides/2024-09-18-pivotjoin.html#pivot_longer-2",
    "title": "Pivoting and Joining",
    "section": "pivot_longer",
    "text": "pivot_longer\nGDP represents country, year, and gdp (in fixed 2000 US$).\n\nGDP &lt;- read_sheet(\"https://docs.google.com/spreadsheets/d/1RctTQmKB0hzbm1E8rGcufYdMshRdhmYdeL29nXqmvsc/pub?gid=0\")\n\nGDP &lt;- GDP |&gt;  \n  select(country = starts_with(\"Income\"), everything()) |&gt; \n  pivot_longer(cols = -country, \n               names_to = \"year\",\n               values_to = \"gdp\") |&gt; \n  filter(!is.na(gdp))\n\nGDP\n\n# A tibble: 7,988 × 3\n   country year    gdp\n   &lt;chr&gt;   &lt;chr&gt; &lt;dbl&gt;\n 1 Albania 1980  1061.\n 2 Albania 1981  1100.\n 3 Albania 1982  1111.\n 4 Albania 1983  1101.\n 5 Albania 1984  1065.\n 6 Albania 1985  1060.\n 7 Albania 1986  1092.\n 8 Albania 1987  1054.\n 9 Albania 1988  1014.\n10 Albania 1989  1092.\n# ℹ 7,978 more rows"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#pivot_wider",
    "href": "slides/2024-09-18-pivotjoin.html#pivot_wider",
    "title": "Pivoting and Joining",
    "section": "pivot_wider",
    "text": "pivot_wider\npivot_wider will be demonstrated using the babynames dataset.\n\nlibrary(babynames)\n\nbabynames\n\n# A tibble: 1,924,665 × 5\n    year sex   name          n   prop\n   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;int&gt;  &lt;dbl&gt;\n 1  1880 F     Mary       7065 0.0724\n 2  1880 F     Anna       2604 0.0267\n 3  1880 F     Emma       2003 0.0205\n 4  1880 F     Elizabeth  1939 0.0199\n 5  1880 F     Minnie     1746 0.0179\n 6  1880 F     Margaret   1578 0.0162\n 7  1880 F     Ida        1472 0.0151\n 8  1880 F     Alice      1414 0.0145\n 9  1880 F     Bertha     1320 0.0135\n10  1880 F     Sarah      1288 0.0132\n# ℹ 1,924,655 more rows"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#pivot_wider-babynames",
    "href": "slides/2024-09-18-pivotjoin.html#pivot_wider-babynames",
    "title": "Pivoting and Joining",
    "section": "pivot_wider babynames",
    "text": "pivot_wider babynames\n\nbabynames |&gt;  \n  select(-prop) |&gt; \n  pivot_wider(names_from = sex, values_from = n) \n\n# A tibble: 1,756,284 × 4\n    year name          F     M\n   &lt;dbl&gt; &lt;chr&gt;     &lt;int&gt; &lt;int&gt;\n 1  1880 Mary       7065    27\n 2  1880 Anna       2604    12\n 3  1880 Emma       2003    10\n 4  1880 Elizabeth  1939     9\n 5  1880 Minnie     1746     9\n 6  1880 Margaret   1578    NA\n 7  1880 Ida        1472     8\n 8  1880 Alice      1414    NA\n 9  1880 Bertha     1320    NA\n10  1880 Sarah      1288    NA\n# ℹ 1,756,274 more rows"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#pivot_wider-babynames-1",
    "href": "slides/2024-09-18-pivotjoin.html#pivot_wider-babynames-1",
    "title": "Pivoting and Joining",
    "section": "pivot_wider babynames",
    "text": "pivot_wider babynames\n\nbabynames |&gt;  \n  select(-prop) |&gt;  \n  pivot_wider(names_from = sex, values_from = n) |&gt; \n  filter(!is.na(F), !is.na(M)) |&gt; \n  arrange(desc(year), desc(F))\n\n# A tibble: 168,381 × 4\n    year name          F     M\n   &lt;dbl&gt; &lt;chr&gt;     &lt;int&gt; &lt;int&gt;\n 1  2017 Emma      19738    14\n 2  2017 Olivia    18632    10\n 3  2017 Ava       15902    12\n 4  2017 Isabella  15100    12\n 5  2017 Sophia    14831    17\n 6  2017 Mia       13437    16\n 7  2017 Charlotte 12893     7\n 8  2017 Amelia    11800    11\n 9  2017 Evelyn    10675    11\n10  2017 Abigail   10551     6\n# ℹ 168,371 more rows"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#pivot_wider-babynames-2",
    "href": "slides/2024-09-18-pivotjoin.html#pivot_wider-babynames-2",
    "title": "Pivoting and Joining",
    "section": "pivot_wider babynames",
    "text": "pivot_wider babynames\n\nbabynames |&gt;  \n  pivot_wider(names_from = sex, values_from = n) |&gt; \n  mutate(maxcount = pmax(F, M, na.rm = TRUE)) |&gt; \n  arrange(desc(maxcount))\n\n# A tibble: 1,924,653 × 6\n    year name      prop     F     M maxcount\n   &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;\n 1  1947 Linda   0.0548 99686    NA    99686\n 2  1948 Linda   0.0552 96209    NA    96209\n 3  1947 James   0.0510    NA 94756    94756\n 4  1957 Michael 0.0424    NA 92695    92695\n 5  1947 Robert  0.0493    NA 91642    91642\n 6  1949 Linda   0.0518 91016    NA    91016\n 7  1956 Michael 0.0423    NA 90620    90620\n 8  1958 Michael 0.0420    NA 90520    90520\n 9  1948 James   0.0497    NA 88588    88588\n10  1954 Michael 0.0428    NA 88514    88514\n# ℹ 1,924,643 more rows"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#relational-data-multiple-data-frames",
    "href": "slides/2024-09-18-pivotjoin.html#relational-data-multiple-data-frames",
    "title": "Pivoting and Joining",
    "section": "Relational data (multiple data frames)",
    "text": "Relational data (multiple data frames)\n\nSee the Posit cheatsheets on wrangling & joining and pivoting."
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#joining-two-or-more-dataframes",
    "href": "slides/2024-09-18-pivotjoin.html#joining-two-or-more-dataframes",
    "title": "Pivoting and Joining",
    "section": "Joining two (or more) dataframes:",
    "text": "Joining two (or more) dataframes:\n\nleft_join returns all rows from the left table, and any rows with matching keys from the right table.\ninner_join returns only the rows in which the left table have matching keys in the right table (i.e., matching rows in both sets).\nfull_join returns all rows from both tables, join records from the left which have matching keys in the right table.\n\nGood practice: always specify the by argument when joining data frames."
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#women-in-science",
    "href": "slides/2024-09-18-pivotjoin.html#women-in-science",
    "title": "Pivoting and Joining",
    "section": "Women in Science",
    "text": "Women in Science\n10 women in science who changed the world (source: Discover Magazine)1\n\n\n\n\n\nname\nprofession\n\n\n\n\nAda Lovelace\nMathematician\n\n\nMarie Curie\nPhysicist and Chemist\n\n\nJanaki Ammal\nBotanist\n\n\nChien-Shiung Wu\nPhysicist\n\n\nKatherine Johnson\nMathematician\n\n\nRosalind Franklin\nChemist\n\n\nVera Rubin\nAstronomer\n\n\nGladys West\nMathematician\n\n\nFlossie Wong-Staal\nVirologist and Molecular Biologist\n\n\nJennifer Doudna\nBiochemist\n\n\n\n\n\nExample from DataScience in a Box"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#inputs",
    "href": "slides/2024-09-18-pivotjoin.html#inputs",
    "title": "Pivoting and Joining",
    "section": "Inputs",
    "text": "Inputs\n\nProfessionsDatesWorks\n\n\n\nprofessions\n\n# A tibble: 10 × 2\n   name               profession                        \n   &lt;chr&gt;              &lt;chr&gt;                             \n 1 Ada Lovelace       Mathematician                     \n 2 Marie Curie        Physicist and Chemist             \n 3 Janaki Ammal       Botanist                          \n 4 Chien-Shiung Wu    Physicist                         \n 5 Katherine Johnson  Mathematician                     \n 6 Rosalind Franklin  Chemist                           \n 7 Vera Rubin         Astronomer                        \n 8 Gladys West        Mathematician                     \n 9 Flossie Wong-Staal Virologist and Molecular Biologist\n10 Jennifer Doudna    Biochemist                        \n\n\n\n\n\ndates\n\n# A tibble: 8 × 3\n  name               birth_year death_year\n  &lt;chr&gt;                   &lt;dbl&gt;      &lt;dbl&gt;\n1 Janaki Ammal             1897       1984\n2 Chien-Shiung Wu          1912       1997\n3 Katherine Johnson        1918       2020\n4 Rosalind Franklin        1920       1958\n5 Vera Rubin               1928       2016\n6 Gladys West              1930         NA\n7 Flossie Wong-Staal       1947       2020\n8 Jennifer Doudna          1964         NA\n\n\n\n\n\nworks\n\n# A tibble: 9 × 2\n  name               known_for                                                  \n  &lt;chr&gt;              &lt;chr&gt;                                                      \n1 Ada Lovelace       first computer algorithm                                   \n2 Marie Curie        theory of radioactivity,  discovery of elements polonium a…\n3 Janaki Ammal       hybrid species, biodiversity protection                    \n4 Chien-Shiung Wu    confim and refine theory of radioactive beta decy, Wu expe…\n5 Katherine Johnson  calculations of orbital mechanics critical to sending the …\n6 Vera Rubin         existence of dark matter                                   \n7 Gladys West        mathematical modeling of the shape of the Earth which serv…\n8 Flossie Wong-Staal first scientist to clone HIV and create a map of its genes…\n9 Jennifer Doudna    one of the primary developers of CRISPR, a ground-breaking…"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#desired-output",
    "href": "slides/2024-09-18-pivotjoin.html#desired-output",
    "title": "Pivoting and Joining",
    "section": "Desired output",
    "text": "Desired output\nWe’d like to put together the data to look like:\n\n\n# A tibble: 10 × 5\n   name               profession                 birth_year death_year known_for\n   &lt;chr&gt;              &lt;chr&gt;                           &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;    \n 1 Ada Lovelace       Mathematician                      NA         NA first co…\n 2 Marie Curie        Physicist and Chemist              NA         NA theory o…\n 3 Janaki Ammal       Botanist                         1897       1984 hybrid s…\n 4 Chien-Shiung Wu    Physicist                        1912       1997 confim a…\n 5 Katherine Johnson  Mathematician                    1918       2020 calculat…\n 6 Rosalind Franklin  Chemist                          1920       1958 &lt;NA&gt;     \n 7 Vera Rubin         Astronomer                       1928       2016 existenc…\n 8 Gladys West        Mathematician                    1930         NA mathemat…\n 9 Flossie Wong-Staal Virologist and Molecular …       1947       2020 first sc…\n10 Jennifer Doudna    Biochemist                       1964         NA one of t…"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#inputs-reminder",
    "href": "slides/2024-09-18-pivotjoin.html#inputs-reminder",
    "title": "Pivoting and Joining",
    "section": "Inputs, reminder",
    "text": "Inputs, reminder\n\n\n\nnrow(professions)\n\n[1] 10\n\nnrow(dates)\n\n[1] 8\n\nnrow(works)\n\n[1] 9\n\n\n\n\nnames(professions)\n\n[1] \"name\"       \"profession\"\n\nnames(dates)\n\n[1] \"name\"       \"birth_year\" \"death_year\"\n\nnames(works)\n\n[1] \"name\"      \"known_for\""
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#setup",
    "href": "slides/2024-09-18-pivotjoin.html#setup",
    "title": "Pivoting and Joining",
    "section": "Setup",
    "text": "Setup\nFor the next few slides…\n\n\n\nx\n\n# A tibble: 3 × 2\n     id value_x\n  &lt;dbl&gt; &lt;chr&gt;  \n1     1 x1     \n2     2 x2     \n3     3 x3     \n\n\n\n\ny\n\n# A tibble: 3 × 2\n     id value_y\n  &lt;dbl&gt; &lt;chr&gt;  \n1     1 y1     \n2     2 y2     \n3     4 y4"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#left_join",
    "href": "slides/2024-09-18-pivotjoin.html#left_join",
    "title": "Pivoting and Joining",
    "section": "left_join()",
    "text": "left_join()\n\n\n\n\n\n\n\nimage credit: https://www.garrickadenbuie.com/project/tidyexplain/\n\n\n\n\n\n\nleft_join(x, y, by = \"id\")\n\n# A tibble: 3 × 3\n     id value_x value_y\n  &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;  \n1     1 x1      y1     \n2     2 x2      y2     \n3     3 x3      &lt;NA&gt;"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#left_join-1",
    "href": "slides/2024-09-18-pivotjoin.html#left_join-1",
    "title": "Pivoting and Joining",
    "section": "left_join()",
    "text": "left_join()\n\nprofessions |&gt; \n  left_join(dates, by = \"name\") \n\n# A tibble: 10 × 4\n   name               profession                         birth_year death_year\n   &lt;chr&gt;              &lt;chr&gt;                                   &lt;dbl&gt;      &lt;dbl&gt;\n 1 Ada Lovelace       Mathematician                              NA         NA\n 2 Marie Curie        Physicist and Chemist                      NA         NA\n 3 Janaki Ammal       Botanist                                 1897       1984\n 4 Chien-Shiung Wu    Physicist                                1912       1997\n 5 Katherine Johnson  Mathematician                            1918       2020\n 6 Rosalind Franklin  Chemist                                  1920       1958\n 7 Vera Rubin         Astronomer                               1928       2016\n 8 Gladys West        Mathematician                            1930         NA\n 9 Flossie Wong-Staal Virologist and Molecular Biologist       1947       2020\n10 Jennifer Doudna    Biochemist                               1964         NA"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#right_join",
    "href": "slides/2024-09-18-pivotjoin.html#right_join",
    "title": "Pivoting and Joining",
    "section": "right_join()",
    "text": "right_join()\n\n\n\n\n\n\n\nimage credit: https://www.garrickadenbuie.com/project/tidyexplain/\n\n\n\n\n\n\nright_join(x, y, by = \"id\")\n\n# A tibble: 3 × 3\n     id value_x value_y\n  &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;  \n1     1 x1      y1     \n2     2 x2      y2     \n3     4 &lt;NA&gt;    y4"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#right_join-1",
    "href": "slides/2024-09-18-pivotjoin.html#right_join-1",
    "title": "Pivoting and Joining",
    "section": "right_join()",
    "text": "right_join()\n\nprofessions |&gt; \n  right_join(dates, by = \"name\") \n\n# A tibble: 8 × 4\n  name               profession                         birth_year death_year\n  &lt;chr&gt;              &lt;chr&gt;                                   &lt;dbl&gt;      &lt;dbl&gt;\n1 Janaki Ammal       Botanist                                 1897       1984\n2 Chien-Shiung Wu    Physicist                                1912       1997\n3 Katherine Johnson  Mathematician                            1918       2020\n4 Rosalind Franklin  Chemist                                  1920       1958\n5 Vera Rubin         Astronomer                               1928       2016\n6 Gladys West        Mathematician                            1930         NA\n7 Flossie Wong-Staal Virologist and Molecular Biologist       1947       2020\n8 Jennifer Doudna    Biochemist                               1964         NA"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#full_join",
    "href": "slides/2024-09-18-pivotjoin.html#full_join",
    "title": "Pivoting and Joining",
    "section": "full_join()",
    "text": "full_join()\n\n\n\n\n\n\n\nimage credit: https://www.garrickadenbuie.com/project/tidyexplain/\n\n\n\n\n\n\nfull_join(x, y, by = \"id\")\n\n# A tibble: 4 × 3\n     id value_x value_y\n  &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;  \n1     1 x1      y1     \n2     2 x2      y2     \n3     3 x3      &lt;NA&gt;   \n4     4 &lt;NA&gt;    y4"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#full_join-1",
    "href": "slides/2024-09-18-pivotjoin.html#full_join-1",
    "title": "Pivoting and Joining",
    "section": "full_join()",
    "text": "full_join()\n\ndates |&gt; \n  full_join(works, by = \"name\") \n\n# A tibble: 10 × 4\n   name               birth_year death_year known_for                           \n   &lt;chr&gt;                   &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;                               \n 1 Janaki Ammal             1897       1984 hybrid species, biodiversity protec…\n 2 Chien-Shiung Wu          1912       1997 confim and refine theory of radioac…\n 3 Katherine Johnson        1918       2020 calculations of orbital mechanics c…\n 4 Rosalind Franklin        1920       1958 &lt;NA&gt;                                \n 5 Vera Rubin               1928       2016 existence of dark matter            \n 6 Gladys West              1930         NA mathematical modeling of the shape …\n 7 Flossie Wong-Staal       1947       2020 first scientist to clone HIV and cr…\n 8 Jennifer Doudna          1964         NA one of the primary developers of CR…\n 9 Ada Lovelace               NA         NA first computer algorithm            \n10 Marie Curie                NA         NA theory of radioactivity,  discovery…"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#inner_join",
    "href": "slides/2024-09-18-pivotjoin.html#inner_join",
    "title": "Pivoting and Joining",
    "section": "inner_join()",
    "text": "inner_join()\n\n\n\n\n\n\n\nimage credit: https://www.garrickadenbuie.com/project/tidyexplain/\n\n\n\n\n\n\ninner_join(x, y, by = \"id\")\n\n# A tibble: 2 × 3\n     id value_x value_y\n  &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;  \n1     1 x1      y1     \n2     2 x2      y2"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#inner_join-1",
    "href": "slides/2024-09-18-pivotjoin.html#inner_join-1",
    "title": "Pivoting and Joining",
    "section": "inner_join()",
    "text": "inner_join()\n\ndates |&gt; \n  inner_join(works, by = \"name\") \n\n# A tibble: 7 × 4\n  name               birth_year death_year known_for                            \n  &lt;chr&gt;                   &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;                                \n1 Janaki Ammal             1897       1984 hybrid species, biodiversity protect…\n2 Chien-Shiung Wu          1912       1997 confim and refine theory of radioact…\n3 Katherine Johnson        1918       2020 calculations of orbital mechanics cr…\n4 Vera Rubin               1928       2016 existence of dark matter             \n5 Gladys West              1930         NA mathematical modeling of the shape o…\n6 Flossie Wong-Staal       1947       2020 first scientist to clone HIV and cre…\n7 Jennifer Doudna          1964         NA one of the primary developers of CRI…"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#semi_join",
    "href": "slides/2024-09-18-pivotjoin.html#semi_join",
    "title": "Pivoting and Joining",
    "section": "semi_join()",
    "text": "semi_join()\n\n\n\n\n\n\n\nimage credit: https://www.garrickadenbuie.com/project/tidyexplain/\n\n\n\n\n\n\nsemi_join(x, y, by = \"id\")\n\n# A tibble: 2 × 2\n     id value_x\n  &lt;dbl&gt; &lt;chr&gt;  \n1     1 x1     \n2     2 x2"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#semi_join-1",
    "href": "slides/2024-09-18-pivotjoin.html#semi_join-1",
    "title": "Pivoting and Joining",
    "section": "semi_join()",
    "text": "semi_join()\n\ndates |&gt; \n  semi_join(works, by = \"name\") \n\n# A tibble: 7 × 3\n  name               birth_year death_year\n  &lt;chr&gt;                   &lt;dbl&gt;      &lt;dbl&gt;\n1 Janaki Ammal             1897       1984\n2 Chien-Shiung Wu          1912       1997\n3 Katherine Johnson        1918       2020\n4 Vera Rubin               1928       2016\n5 Gladys West              1930         NA\n6 Flossie Wong-Staal       1947       2020\n7 Jennifer Doudna          1964         NA"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#anti_join",
    "href": "slides/2024-09-18-pivotjoin.html#anti_join",
    "title": "Pivoting and Joining",
    "section": "anti_join()",
    "text": "anti_join()\n\n\n\n\n\n\n\nimage credit: https://www.garrickadenbuie.com/project/tidyexplain/\n\n\n\n\n\n\nanti_join(x, y, by = \"id\")\n\n# A tibble: 1 × 2\n     id value_x\n  &lt;dbl&gt; &lt;chr&gt;  \n1     3 x3"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#anti_join-1",
    "href": "slides/2024-09-18-pivotjoin.html#anti_join-1",
    "title": "Pivoting and Joining",
    "section": "anti_join()",
    "text": "anti_join()\n\ndates |&gt; \n  anti_join(works, by = \"name\") \n\n# A tibble: 1 × 3\n  name              birth_year death_year\n  &lt;chr&gt;                  &lt;dbl&gt;      &lt;dbl&gt;\n1 Rosalind Franklin       1920       1958"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#putting-it-all-together",
    "href": "slides/2024-09-18-pivotjoin.html#putting-it-all-together",
    "title": "Pivoting and Joining",
    "section": "Putting it all together",
    "text": "Putting it all together\n\nprofessions |&gt; \n  left_join(dates, by = \"name\") |&gt; \n  left_join(works, by = \"name\")\n\n# A tibble: 10 × 5\n   name               profession                 birth_year death_year known_for\n   &lt;chr&gt;              &lt;chr&gt;                           &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;    \n 1 Ada Lovelace       Mathematician                      NA         NA first co…\n 2 Marie Curie        Physicist and Chemist              NA         NA theory o…\n 3 Janaki Ammal       Botanist                         1897       1984 hybrid s…\n 4 Chien-Shiung Wu    Physicist                        1912       1997 confim a…\n 5 Katherine Johnson  Mathematician                    1918       2020 calculat…\n 6 Rosalind Franklin  Chemist                          1920       1958 &lt;NA&gt;     \n 7 Vera Rubin         Astronomer                       1928       2016 existenc…\n 8 Gladys West        Mathematician                    1930         NA mathemat…\n 9 Flossie Wong-Staal Virologist and Molecular …       1947       2020 first sc…\n10 Jennifer Doudna    Biochemist                       1964         NA one of t…"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#practice-litf-and-gdp-from-gapminder.",
    "href": "slides/2024-09-18-pivotjoin.html#practice-litf-and-gdp-from-gapminder.",
    "title": "Pivoting and Joining",
    "section": "Practice litF and GDP from Gapminder.",
    "text": "Practice litF and GDP from Gapminder."
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#left",
    "href": "slides/2024-09-18-pivotjoin.html#left",
    "title": "Pivoting and Joining",
    "section": "left",
    "text": "left\n\nlitGDPleft &lt;- left_join(litF, GDP, by=c(\"country\", \"year\"))\ndim(litGDPleft)\n\n[1] 571   4\n\nlitGDPleft\n\n# A tibble: 571 × 4\n   country     year  litRateF   gdp\n   &lt;chr&gt;       &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;\n 1 Afghanistan 1979      4.99   NA \n 2 Afghanistan 2011     13      NA \n 3 Albania     2001     98.3  1282.\n 4 Albania     2008     94.7  1804.\n 5 Albania     2011     95.7  1966.\n 6 Algeria     1987     35.8  1902.\n 7 Algeria     2002     60.1  1872.\n 8 Algeria     2006     63.9  2125.\n 9 Angola      2001     54.2   298.\n10 Angola      2011     58.6   630.\n# ℹ 561 more rows"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#right",
    "href": "slides/2024-09-18-pivotjoin.html#right",
    "title": "Pivoting and Joining",
    "section": "right",
    "text": "right\n\nlitGDPright &lt;- right_join(litF, GDP, by=c(\"country\", \"year\"))\ndim(litGDPright)\n\n[1] 7988    4\n\nlitGDPright\n\n# A tibble: 7,988 × 4\n   country             year  litRateF   gdp\n   &lt;chr&gt;               &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;\n 1 Albania             2001      98.3 1282.\n 2 Albania             2008      94.7 1804.\n 3 Albania             2011      95.7 1966.\n 4 Algeria             1987      35.8 1902.\n 5 Algeria             2002      60.1 1872.\n 6 Algeria             2006      63.9 2125.\n 7 Angola              2001      54.2  298.\n 8 Angola              2011      58.6  630.\n 9 Antigua and Barbuda 2001      99.4 9640.\n10 Antigua and Barbuda 2011      99.4 9978.\n# ℹ 7,978 more rows"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#inner",
    "href": "slides/2024-09-18-pivotjoin.html#inner",
    "title": "Pivoting and Joining",
    "section": "inner",
    "text": "inner\n\nlitGDPinner &lt;- inner_join(litF, GDP, by=c(\"country\", \"year\"))\ndim(litGDPinner)\n\n[1] 505   4\n\nlitGDPinner\n\n# A tibble: 505 × 4\n   country             year  litRateF   gdp\n   &lt;chr&gt;               &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;\n 1 Albania             2001      98.3 1282.\n 2 Albania             2008      94.7 1804.\n 3 Albania             2011      95.7 1966.\n 4 Algeria             1987      35.8 1902.\n 5 Algeria             2002      60.1 1872.\n 6 Algeria             2006      63.9 2125.\n 7 Angola              2001      54.2  298.\n 8 Angola              2011      58.6  630.\n 9 Antigua and Barbuda 2001      99.4 9640.\n10 Antigua and Barbuda 2011      99.4 9978.\n# ℹ 495 more rows"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#full",
    "href": "slides/2024-09-18-pivotjoin.html#full",
    "title": "Pivoting and Joining",
    "section": "full",
    "text": "full\n\nlitGDPfull &lt;- full_join(litF, GDP, by=c(\"country\", \"year\"))\ndim(litGDPfull)\n\n[1] 8054    4\n\nlitGDPfull\n\n# A tibble: 8,054 × 4\n   country     year  litRateF   gdp\n   &lt;chr&gt;       &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;\n 1 Afghanistan 1979      4.99   NA \n 2 Afghanistan 2011     13      NA \n 3 Albania     2001     98.3  1282.\n 4 Albania     2008     94.7  1804.\n 5 Albania     2011     95.7  1966.\n 6 Algeria     1987     35.8  1902.\n 7 Algeria     2002     60.1  1872.\n 8 Algeria     2006     63.9  2125.\n 9 Angola      2001     54.2   298.\n10 Angola      2011     58.6   630.\n# ℹ 8,044 more rows"
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#join-to-merge-two-datasets",
    "href": "slides/2024-09-18-pivotjoin.html#join-to-merge-two-datasets",
    "title": "Pivoting and Joining",
    "section": "join to merge two datasets",
    "text": "join to merge two datasets\n\nIf you ever need to understand which join is the right join for you, try to find an image that will lay out what the function is doing. I found this one that is quite good and is taken from the Statistics Globe blog."
  },
  {
    "objectID": "slides/2024-09-18-pivotjoin.html#joining-two-or-more-data-frames",
    "href": "slides/2024-09-18-pivotjoin.html#joining-two-or-more-data-frames",
    "title": "Pivoting and Joining",
    "section": "Joining two (or more) data frames:",
    "text": "Joining two (or more) data frames:\n\nleft_join returns all rows from the left table, and any rows with matching keys from the right table.\ninner_join returns only the rows in which the left table have matching keys in the right table (i.e., matching rows in both sets).\nfull_join returns all rows from both tables, join records from the left which have matching keys in the right table.\n\nGood practice: always specify the by argument when joining data frames."
  },
  {
    "objectID": "slides/2024-09-23-types.html",
    "href": "slides/2024-09-23-types.html",
    "title": "Variable Types",
    "section": "",
    "text": "Pivoting\n(maybe Joining?)"
  },
  {
    "objectID": "slides/2024-09-23-types.html#from-wide-to-long-and-long-to-wide",
    "href": "slides/2024-09-23-types.html#from-wide-to-long-and-long-to-wide",
    "title": "Variable Types",
    "section": "From wide to long and long to wide",
    "text": "From wide to long and long to wide\n\npivot_longer() makes the data frame “longer” – many columns into a few columns (more rows):\n\npivot_longer(data,cols,names_to=,value_to=)\n\npivot_wider() makes the data frame “wider” – a few columns into many columns (fewer rows):\n\npivot_wider(data,names_from=,values_from=)"
  },
  {
    "objectID": "slides/2024-09-23-types.html#from-wide-to-long-and-long-to-wide-1",
    "href": "slides/2024-09-23-types.html#from-wide-to-long-and-long-to-wide-1",
    "title": "Variable Types",
    "section": "From wide to long and long to wide",
    "text": "From wide to long and long to wide"
  },
  {
    "objectID": "slides/2024-09-23-types.html#pivot_longer",
    "href": "slides/2024-09-23-types.html#pivot_longer",
    "title": "Variable Types",
    "section": "pivot_longer",
    "text": "pivot_longer\npivot_longer will be demonstrated using datasets from GapMinder.\nlitF represents country, year, and female literacy rate.\n\nlibrary(googlesheets4)\ngs4_deauth()\nlitF &lt;- read_sheet(\"https://docs.google.com/spreadsheets/d/1hDinTIRHQIaZg1RUn6Z_6mo12PtKwEPFIz_mJVF6P5I/pub?gid=0\")\n\nlitF\n\n# A tibble: 260 × 38\n   Adult (15+) literacy rate …¹ `1975` `1976` `1977` `1978` `1979` `1980` `1981`\n   &lt;chr&gt;                         &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;\n 1 Afghanistan                      NA     NA     NA     NA   4.99   NA       NA\n 2 Albania                          NA     NA     NA     NA  NA      NA       NA\n 3 Algeria                          NA     NA     NA     NA  NA      NA       NA\n 4 Andorra                          NA     NA     NA     NA  NA      NA       NA\n 5 Angola                           NA     NA     NA     NA  NA      NA       NA\n 6 Anguilla                         NA     NA     NA     NA  NA      NA       NA\n 7 Antigua and Barbuda              NA     NA     NA     NA  NA      NA       NA\n 8 Argentina                        NA     NA     NA     NA  NA      93.6     NA\n 9 Armenia                          NA     NA     NA     NA  NA      NA       NA\n10 Aruba                            NA     NA     NA     NA  NA      NA       NA\n# ℹ 250 more rows\n# ℹ abbreviated name: ¹​`Adult (15+) literacy rate (%). Female`\n# ℹ 30 more variables: `1982` &lt;dbl&gt;, `1983` &lt;dbl&gt;, `1984` &lt;dbl&gt;, `1985` &lt;dbl&gt;,\n#   `1986` &lt;dbl&gt;, `1987` &lt;dbl&gt;, `1988` &lt;dbl&gt;, `1989` &lt;dbl&gt;, `1990` &lt;dbl&gt;,\n#   `1991` &lt;dbl&gt;, `1992` &lt;dbl&gt;, `1993` &lt;dbl&gt;, `1994` &lt;dbl&gt;, `1995` &lt;dbl&gt;,\n#   `1996` &lt;dbl&gt;, `1997` &lt;dbl&gt;, `1998` &lt;dbl&gt;, `1999` &lt;dbl&gt;, `2000` &lt;dbl&gt;,\n#   `2001` &lt;dbl&gt;, `2002` &lt;dbl&gt;, `2003` &lt;dbl&gt;, `2004` &lt;dbl&gt;, `2005` &lt;dbl&gt;, …"
  },
  {
    "objectID": "slides/2024-09-23-types.html#pivot_longer-1",
    "href": "slides/2024-09-23-types.html#pivot_longer-1",
    "title": "Variable Types",
    "section": "pivot_longer",
    "text": "pivot_longer\n\nlitF &lt;- litF |&gt; \n  select(country = starts_with(\"Adult\"), everything()) |&gt; \n  pivot_longer(cols = -country,\n               names_to = \"year\", \n               values_to = \"litRateF\") |&gt; \n  filter(!is.na(litRateF))\n\nlitF\n\n# A tibble: 571 × 3\n   country     year  litRateF\n   &lt;chr&gt;       &lt;chr&gt;    &lt;dbl&gt;\n 1 Afghanistan 1979      4.99\n 2 Afghanistan 2011     13   \n 3 Albania     2001     98.3 \n 4 Albania     2008     94.7 \n 5 Albania     2011     95.7 \n 6 Algeria     1987     35.8 \n 7 Algeria     2002     60.1 \n 8 Algeria     2006     63.9 \n 9 Angola      2001     54.2 \n10 Angola      2011     58.6 \n# ℹ 561 more rows"
  },
  {
    "objectID": "slides/2024-09-23-types.html#pivot_longer-2",
    "href": "slides/2024-09-23-types.html#pivot_longer-2",
    "title": "Variable Types",
    "section": "pivot_longer",
    "text": "pivot_longer\nGDP represents country, year, and gdp (in fixed 2000 US$).\n\nGDP &lt;- read_sheet(\"https://docs.google.com/spreadsheets/d/1RctTQmKB0hzbm1E8rGcufYdMshRdhmYdeL29nXqmvsc/pub?gid=0\")\n\nGDP &lt;- GDP |&gt;  \n  select(country = starts_with(\"Income\"), everything()) |&gt; \n  pivot_longer(cols = -country, \n               names_to = \"year\",\n               values_to = \"gdp\") |&gt; \n  filter(!is.na(gdp))\n\nGDP\n\n# A tibble: 7,988 × 3\n   country year    gdp\n   &lt;chr&gt;   &lt;chr&gt; &lt;dbl&gt;\n 1 Albania 1980  1061.\n 2 Albania 1981  1100.\n 3 Albania 1982  1111.\n 4 Albania 1983  1101.\n 5 Albania 1984  1065.\n 6 Albania 1985  1060.\n 7 Albania 1986  1092.\n 8 Albania 1987  1054.\n 9 Albania 1988  1014.\n10 Albania 1989  1092.\n# ℹ 7,978 more rows"
  },
  {
    "objectID": "slides/2024-09-23-types.html#pivot_wider",
    "href": "slides/2024-09-23-types.html#pivot_wider",
    "title": "Variable Types",
    "section": "pivot_wider",
    "text": "pivot_wider\npivot_wider will be demonstrated using the babynames dataset.\n\nlibrary(babynames)\n\nbabynames\n\n# A tibble: 1,924,665 × 5\n    year sex   name          n   prop\n   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;int&gt;  &lt;dbl&gt;\n 1  1880 F     Mary       7065 0.0724\n 2  1880 F     Anna       2604 0.0267\n 3  1880 F     Emma       2003 0.0205\n 4  1880 F     Elizabeth  1939 0.0199\n 5  1880 F     Minnie     1746 0.0179\n 6  1880 F     Margaret   1578 0.0162\n 7  1880 F     Ida        1472 0.0151\n 8  1880 F     Alice      1414 0.0145\n 9  1880 F     Bertha     1320 0.0135\n10  1880 F     Sarah      1288 0.0132\n# ℹ 1,924,655 more rows"
  },
  {
    "objectID": "slides/2024-09-23-types.html#pivot_wider-babynames",
    "href": "slides/2024-09-23-types.html#pivot_wider-babynames",
    "title": "Variable Types",
    "section": "pivot_wider babynames",
    "text": "pivot_wider babynames\n\nbabynames |&gt;  \n  select(-prop) |&gt; \n  pivot_wider(names_from = sex, values_from = n) \n\n# A tibble: 1,756,284 × 4\n    year name          F     M\n   &lt;dbl&gt; &lt;chr&gt;     &lt;int&gt; &lt;int&gt;\n 1  1880 Mary       7065    27\n 2  1880 Anna       2604    12\n 3  1880 Emma       2003    10\n 4  1880 Elizabeth  1939     9\n 5  1880 Minnie     1746     9\n 6  1880 Margaret   1578    NA\n 7  1880 Ida        1472     8\n 8  1880 Alice      1414    NA\n 9  1880 Bertha     1320    NA\n10  1880 Sarah      1288    NA\n# ℹ 1,756,274 more rows"
  },
  {
    "objectID": "slides/2024-09-23-types.html#pivot_wider-babynames-1",
    "href": "slides/2024-09-23-types.html#pivot_wider-babynames-1",
    "title": "Variable Types",
    "section": "pivot_wider babynames",
    "text": "pivot_wider babynames\n\nbabynames |&gt;  \n  select(-prop) |&gt;  \n  pivot_wider(names_from = sex, values_from = n) |&gt; \n  filter(!is.na(F), !is.na(M)) |&gt; \n  arrange(desc(year), desc(F))\n\n# A tibble: 168,381 × 4\n    year name          F     M\n   &lt;dbl&gt; &lt;chr&gt;     &lt;int&gt; &lt;int&gt;\n 1  2017 Emma      19738    14\n 2  2017 Olivia    18632    10\n 3  2017 Ava       15902    12\n 4  2017 Isabella  15100    12\n 5  2017 Sophia    14831    17\n 6  2017 Mia       13437    16\n 7  2017 Charlotte 12893     7\n 8  2017 Amelia    11800    11\n 9  2017 Evelyn    10675    11\n10  2017 Abigail   10551     6\n# ℹ 168,371 more rows"
  },
  {
    "objectID": "slides/2024-09-23-types.html#pivot_wider-babynames-2",
    "href": "slides/2024-09-23-types.html#pivot_wider-babynames-2",
    "title": "Variable Types",
    "section": "pivot_wider babynames",
    "text": "pivot_wider babynames\n\nbabynames |&gt;  \n  pivot_wider(names_from = sex, values_from = n) |&gt; \n  mutate(maxcount = pmax(F, M, na.rm = TRUE)) |&gt; \n  arrange(desc(maxcount))\n\n# A tibble: 1,924,653 × 6\n    year name      prop     F     M maxcount\n   &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;\n 1  1947 Linda   0.0548 99686    NA    99686\n 2  1948 Linda   0.0552 96209    NA    96209\n 3  1947 James   0.0510    NA 94756    94756\n 4  1957 Michael 0.0424    NA 92695    92695\n 5  1947 Robert  0.0493    NA 91642    91642\n 6  1949 Linda   0.0518 91016    NA    91016\n 7  1956 Michael 0.0423    NA 90620    90620\n 8  1958 Michael 0.0420    NA 90520    90520\n 9  1948 James   0.0497    NA 88588    88588\n10  1954 Michael 0.0428    NA 88514    88514\n# ℹ 1,924,643 more rows"
  },
  {
    "objectID": "slides/2024-09-23-types.html#relational-data-multiple-data-frames",
    "href": "slides/2024-09-23-types.html#relational-data-multiple-data-frames",
    "title": "Variable Types",
    "section": "Relational data (multiple data frames)",
    "text": "Relational data (multiple data frames)\n\n\n\n\n\n\n\n\n\nSee the Posit cheatsheets on wrangling & joining and pivoting."
  },
  {
    "objectID": "slides/2024-09-23-types.html#joining-two-or-more-data-frames",
    "href": "slides/2024-09-23-types.html#joining-two-or-more-data-frames",
    "title": "Variable Types",
    "section": "Joining two (or more) data frames:",
    "text": "Joining two (or more) data frames:\n\nleft_join returns all rows from the left table, and any rows with matching keys from the right table.\ninner_join returns only the rows in which the left table have matching keys in the right table (i.e., matching rows in both sets).\nfull_join returns all rows from both tables, join records from the left which have matching keys in the right table.\n\nGood practice: always specify the by argument when joining data frames."
  },
  {
    "objectID": "slides/2024-09-23-types.html#women-in-science",
    "href": "slides/2024-09-23-types.html#women-in-science",
    "title": "Variable Types",
    "section": "Women in Science",
    "text": "Women in Science\n10 women in science who changed the world (source: Discover Magazine)1\n\n\n\n\n\nname\nprofession\n\n\n\n\nAda Lovelace\nMathematician\n\n\nMarie Curie\nPhysicist and Chemist\n\n\nJanaki Ammal\nBotanist\n\n\nChien-Shiung Wu\nPhysicist\n\n\nKatherine Johnson\nMathematician\n\n\nRosalind Franklin\nChemist\n\n\nVera Rubin\nAstronomer\n\n\nGladys West\nMathematician\n\n\nFlossie Wong-Staal\nVirologist and Molecular Biologist\n\n\nJennifer Doudna\nBiochemist"
  },
  {
    "objectID": "slides/2024-09-23-types.html#inputs",
    "href": "slides/2024-09-23-types.html#inputs",
    "title": "Variable Types",
    "section": "Inputs",
    "text": "Inputs\n\nProfessionsDatesWorks\n\n\n\nprofessions\n\n# A tibble: 10 × 2\n   name               profession                        \n   &lt;chr&gt;              &lt;chr&gt;                             \n 1 Ada Lovelace       Mathematician                     \n 2 Marie Curie        Physicist and Chemist             \n 3 Janaki Ammal       Botanist                          \n 4 Chien-Shiung Wu    Physicist                         \n 5 Katherine Johnson  Mathematician                     \n 6 Rosalind Franklin  Chemist                           \n 7 Vera Rubin         Astronomer                        \n 8 Gladys West        Mathematician                     \n 9 Flossie Wong-Staal Virologist and Molecular Biologist\n10 Jennifer Doudna    Biochemist                        \n\n\n\n\n\ndates\n\n# A tibble: 8 × 3\n  name               birth_year death_year\n  &lt;chr&gt;                   &lt;dbl&gt;      &lt;dbl&gt;\n1 Janaki Ammal             1897       1984\n2 Chien-Shiung Wu          1912       1997\n3 Katherine Johnson        1918       2020\n4 Rosalind Franklin        1920       1958\n5 Vera Rubin               1928       2016\n6 Gladys West              1930         NA\n7 Flossie Wong-Staal       1947       2020\n8 Jennifer Doudna          1964         NA\n\n\n\n\n\nworks\n\n# A tibble: 9 × 2\n  name               known_for                                                  \n  &lt;chr&gt;              &lt;chr&gt;                                                      \n1 Ada Lovelace       first computer algorithm                                   \n2 Marie Curie        theory of radioactivity,  discovery of elements polonium a…\n3 Janaki Ammal       hybrid species, biodiversity protection                    \n4 Chien-Shiung Wu    confim and refine theory of radioactive beta decy, Wu expe…\n5 Katherine Johnson  calculations of orbital mechanics critical to sending the …\n6 Vera Rubin         existence of dark matter                                   \n7 Gladys West        mathematical modeling of the shape of the Earth which serv…\n8 Flossie Wong-Staal first scientist to clone HIV and create a map of its genes…\n9 Jennifer Doudna    one of the primary developers of CRISPR, a ground-breaking…"
  },
  {
    "objectID": "slides/2024-09-23-types.html#desired-output",
    "href": "slides/2024-09-23-types.html#desired-output",
    "title": "Variable Types",
    "section": "Desired output",
    "text": "Desired output\nWe’d like to put together the data to look like:\n\n\n# A tibble: 10 × 5\n   name               profession                 birth_year death_year known_for\n   &lt;chr&gt;              &lt;chr&gt;                           &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;    \n 1 Ada Lovelace       Mathematician                      NA         NA first co…\n 2 Marie Curie        Physicist and Chemist              NA         NA theory o…\n 3 Janaki Ammal       Botanist                         1897       1984 hybrid s…\n 4 Chien-Shiung Wu    Physicist                        1912       1997 confim a…\n 5 Katherine Johnson  Mathematician                    1918       2020 calculat…\n 6 Rosalind Franklin  Chemist                          1920       1958 &lt;NA&gt;     \n 7 Vera Rubin         Astronomer                       1928       2016 existenc…\n 8 Gladys West        Mathematician                    1930         NA mathemat…\n 9 Flossie Wong-Staal Virologist and Molecular …       1947       2020 first sc…\n10 Jennifer Doudna    Biochemist                       1964         NA one of t…"
  },
  {
    "objectID": "slides/2024-09-23-types.html#inputs-reminder",
    "href": "slides/2024-09-23-types.html#inputs-reminder",
    "title": "Variable Types",
    "section": "Inputs, reminder",
    "text": "Inputs, reminder\n\n\n\nnrow(professions)\n\n[1] 10\n\nnrow(dates)\n\n[1] 8\n\nnrow(works)\n\n[1] 9\n\n\n\n\nnames(professions)\n\n[1] \"name\"       \"profession\"\n\nnames(dates)\n\n[1] \"name\"       \"birth_year\" \"death_year\"\n\nnames(works)\n\n[1] \"name\"      \"known_for\""
  },
  {
    "objectID": "slides/2024-09-23-types.html#setup",
    "href": "slides/2024-09-23-types.html#setup",
    "title": "Variable Types",
    "section": "Setup",
    "text": "Setup\nFor the next few slides…\n\n\n\nx\n\n# A tibble: 3 × 2\n     id value_x\n  &lt;dbl&gt; &lt;chr&gt;  \n1     1 x1     \n2     2 x2     \n3     3 x3     \n\n\n\n\ny\n\n# A tibble: 3 × 2\n     id value_y\n  &lt;dbl&gt; &lt;chr&gt;  \n1     1 y1     \n2     2 y2     \n3     4 y4"
  },
  {
    "objectID": "slides/2024-09-23-types.html#left_join",
    "href": "slides/2024-09-23-types.html#left_join",
    "title": "Variable Types",
    "section": "left_join()",
    "text": "left_join()\n\n\n\n\n\n\n\nimage credit: https://www.garrickadenbuie.com/project/tidyexplain/\n\n\n\n\n\n\nleft_join(x, y, by = \"id\")\n\n# A tibble: 3 × 3\n     id value_x value_y\n  &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;  \n1     1 x1      y1     \n2     2 x2      y2     \n3     3 x3      &lt;NA&gt;"
  },
  {
    "objectID": "slides/2024-09-23-types.html#left_join-1",
    "href": "slides/2024-09-23-types.html#left_join-1",
    "title": "Variable Types",
    "section": "left_join()",
    "text": "left_join()\n\nprofessions |&gt; \n  left_join(dates, by = \"name\") \n\n# A tibble: 10 × 4\n   name               profession                         birth_year death_year\n   &lt;chr&gt;              &lt;chr&gt;                                   &lt;dbl&gt;      &lt;dbl&gt;\n 1 Ada Lovelace       Mathematician                              NA         NA\n 2 Marie Curie        Physicist and Chemist                      NA         NA\n 3 Janaki Ammal       Botanist                                 1897       1984\n 4 Chien-Shiung Wu    Physicist                                1912       1997\n 5 Katherine Johnson  Mathematician                            1918       2020\n 6 Rosalind Franklin  Chemist                                  1920       1958\n 7 Vera Rubin         Astronomer                               1928       2016\n 8 Gladys West        Mathematician                            1930         NA\n 9 Flossie Wong-Staal Virologist and Molecular Biologist       1947       2020\n10 Jennifer Doudna    Biochemist                               1964         NA"
  },
  {
    "objectID": "slides/2024-09-23-types.html#right_join",
    "href": "slides/2024-09-23-types.html#right_join",
    "title": "Variable Types",
    "section": "right_join()",
    "text": "right_join()\n\n\n\n\n\n\n\nimage credit: https://www.garrickadenbuie.com/project/tidyexplain/\n\n\n\n\n\n\nright_join(x, y, by = \"id\")\n\n# A tibble: 3 × 3\n     id value_x value_y\n  &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;  \n1     1 x1      y1     \n2     2 x2      y2     \n3     4 &lt;NA&gt;    y4"
  },
  {
    "objectID": "slides/2024-09-23-types.html#right_join-1",
    "href": "slides/2024-09-23-types.html#right_join-1",
    "title": "Variable Types",
    "section": "right_join()",
    "text": "right_join()\n\nprofessions |&gt; \n  right_join(dates, by = \"name\") \n\n# A tibble: 8 × 4\n  name               profession                         birth_year death_year\n  &lt;chr&gt;              &lt;chr&gt;                                   &lt;dbl&gt;      &lt;dbl&gt;\n1 Janaki Ammal       Botanist                                 1897       1984\n2 Chien-Shiung Wu    Physicist                                1912       1997\n3 Katherine Johnson  Mathematician                            1918       2020\n4 Rosalind Franklin  Chemist                                  1920       1958\n5 Vera Rubin         Astronomer                               1928       2016\n6 Gladys West        Mathematician                            1930         NA\n7 Flossie Wong-Staal Virologist and Molecular Biologist       1947       2020\n8 Jennifer Doudna    Biochemist                               1964         NA"
  },
  {
    "objectID": "slides/2024-09-23-types.html#full_join",
    "href": "slides/2024-09-23-types.html#full_join",
    "title": "Variable Types",
    "section": "full_join()",
    "text": "full_join()\n\n\n\n\n\n\n\nimage credit: https://www.garrickadenbuie.com/project/tidyexplain/\n\n\n\n\n\n\nfull_join(x, y, by = \"id\")\n\n# A tibble: 4 × 3\n     id value_x value_y\n  &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;  \n1     1 x1      y1     \n2     2 x2      y2     \n3     3 x3      &lt;NA&gt;   \n4     4 &lt;NA&gt;    y4"
  },
  {
    "objectID": "slides/2024-09-23-types.html#full_join-1",
    "href": "slides/2024-09-23-types.html#full_join-1",
    "title": "Variable Types",
    "section": "full_join()",
    "text": "full_join()\n\ndates |&gt; \n  full_join(works, by = \"name\") \n\n# A tibble: 10 × 4\n   name               birth_year death_year known_for                           \n   &lt;chr&gt;                   &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;                               \n 1 Janaki Ammal             1897       1984 hybrid species, biodiversity protec…\n 2 Chien-Shiung Wu          1912       1997 confim and refine theory of radioac…\n 3 Katherine Johnson        1918       2020 calculations of orbital mechanics c…\n 4 Rosalind Franklin        1920       1958 &lt;NA&gt;                                \n 5 Vera Rubin               1928       2016 existence of dark matter            \n 6 Gladys West              1930         NA mathematical modeling of the shape …\n 7 Flossie Wong-Staal       1947       2020 first scientist to clone HIV and cr…\n 8 Jennifer Doudna          1964         NA one of the primary developers of CR…\n 9 Ada Lovelace               NA         NA first computer algorithm            \n10 Marie Curie                NA         NA theory of radioactivity,  discovery…"
  },
  {
    "objectID": "slides/2024-09-23-types.html#inner_join",
    "href": "slides/2024-09-23-types.html#inner_join",
    "title": "Variable Types",
    "section": "inner_join()",
    "text": "inner_join()\n\n\n\n\n\n\n\nimage credit: https://www.garrickadenbuie.com/project/tidyexplain/\n\n\n\n\n\n\ninner_join(x, y, by = \"id\")\n\n# A tibble: 2 × 3\n     id value_x value_y\n  &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;  \n1     1 x1      y1     \n2     2 x2      y2"
  },
  {
    "objectID": "slides/2024-09-23-types.html#inner_join-1",
    "href": "slides/2024-09-23-types.html#inner_join-1",
    "title": "Variable Types",
    "section": "inner_join()",
    "text": "inner_join()\n\ndates |&gt; \n  inner_join(works, by = \"name\") \n\n# A tibble: 7 × 4\n  name               birth_year death_year known_for                            \n  &lt;chr&gt;                   &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;                                \n1 Janaki Ammal             1897       1984 hybrid species, biodiversity protect…\n2 Chien-Shiung Wu          1912       1997 confim and refine theory of radioact…\n3 Katherine Johnson        1918       2020 calculations of orbital mechanics cr…\n4 Vera Rubin               1928       2016 existence of dark matter             \n5 Gladys West              1930         NA mathematical modeling of the shape o…\n6 Flossie Wong-Staal       1947       2020 first scientist to clone HIV and cre…\n7 Jennifer Doudna          1964         NA one of the primary developers of CRI…"
  },
  {
    "objectID": "slides/2024-09-23-types.html#semi_join",
    "href": "slides/2024-09-23-types.html#semi_join",
    "title": "Variable Types",
    "section": "semi_join()",
    "text": "semi_join()\n\n\n\n\n\n\n\nimage credit: https://www.garrickadenbuie.com/project/tidyexplain/\n\n\n\n\n\n\nsemi_join(x, y, by = \"id\")\n\n# A tibble: 2 × 2\n     id value_x\n  &lt;dbl&gt; &lt;chr&gt;  \n1     1 x1     \n2     2 x2"
  },
  {
    "objectID": "slides/2024-09-23-types.html#semi_join-1",
    "href": "slides/2024-09-23-types.html#semi_join-1",
    "title": "Variable Types",
    "section": "semi_join()",
    "text": "semi_join()\n\ndates |&gt; \n  semi_join(works, by = \"name\") \n\n# A tibble: 7 × 3\n  name               birth_year death_year\n  &lt;chr&gt;                   &lt;dbl&gt;      &lt;dbl&gt;\n1 Janaki Ammal             1897       1984\n2 Chien-Shiung Wu          1912       1997\n3 Katherine Johnson        1918       2020\n4 Vera Rubin               1928       2016\n5 Gladys West              1930         NA\n6 Flossie Wong-Staal       1947       2020\n7 Jennifer Doudna          1964         NA"
  },
  {
    "objectID": "slides/2024-09-23-types.html#anti_join",
    "href": "slides/2024-09-23-types.html#anti_join",
    "title": "Variable Types",
    "section": "anti_join()",
    "text": "anti_join()\n\n\n\n\n\n\n\nimage credit: https://www.garrickadenbuie.com/project/tidyexplain/\n\n\n\n\n\n\nanti_join(x, y, by = \"id\")\n\n# A tibble: 1 × 2\n     id value_x\n  &lt;dbl&gt; &lt;chr&gt;  \n1     3 x3"
  },
  {
    "objectID": "slides/2024-09-23-types.html#anti_join-1",
    "href": "slides/2024-09-23-types.html#anti_join-1",
    "title": "Variable Types",
    "section": "anti_join()",
    "text": "anti_join()\n\ndates |&gt; \n  anti_join(works, by = \"name\") \n\n# A tibble: 1 × 3\n  name              birth_year death_year\n  &lt;chr&gt;                  &lt;dbl&gt;      &lt;dbl&gt;\n1 Rosalind Franklin       1920       1958"
  },
  {
    "objectID": "slides/2024-09-23-types.html#putting-it-all-together",
    "href": "slides/2024-09-23-types.html#putting-it-all-together",
    "title": "Variable Types",
    "section": "Putting it all together",
    "text": "Putting it all together\n\nprofessions |&gt; \n  left_join(dates, by = \"name\") |&gt; \n  left_join(works, by = \"name\")\n\n# A tibble: 10 × 5\n   name               profession                 birth_year death_year known_for\n   &lt;chr&gt;              &lt;chr&gt;                           &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;    \n 1 Ada Lovelace       Mathematician                      NA         NA first co…\n 2 Marie Curie        Physicist and Chemist              NA         NA theory o…\n 3 Janaki Ammal       Botanist                         1897       1984 hybrid s…\n 4 Chien-Shiung Wu    Physicist                        1912       1997 confim a…\n 5 Katherine Johnson  Mathematician                    1918       2020 calculat…\n 6 Rosalind Franklin  Chemist                          1920       1958 &lt;NA&gt;     \n 7 Vera Rubin         Astronomer                       1928       2016 existenc…\n 8 Gladys West        Mathematician                    1930         NA mathemat…\n 9 Flossie Wong-Staal Virologist and Molecular …       1947       2020 first sc…\n10 Jennifer Doudna    Biochemist                       1964         NA one of t…"
  },
  {
    "objectID": "slides/2024-09-23-types.html#practice-litf-and-gdp-from-gapminder.",
    "href": "slides/2024-09-23-types.html#practice-litf-and-gdp-from-gapminder.",
    "title": "Variable Types",
    "section": "Practice litF and GDP from Gapminder.",
    "text": "Practice litF and GDP from Gapminder."
  },
  {
    "objectID": "slides/2024-09-23-types.html#left",
    "href": "slides/2024-09-23-types.html#left",
    "title": "Variable Types",
    "section": "left",
    "text": "left\n\nlitGDPleft &lt;- left_join(litF, GDP, by=c(\"country\", \"year\"))\ndim(litGDPleft)\n\n[1] 571   4\n\nlitGDPleft\n\n# A tibble: 571 × 4\n   country     year  litRateF   gdp\n   &lt;chr&gt;       &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;\n 1 Afghanistan 1979      4.99   NA \n 2 Afghanistan 2011     13      NA \n 3 Albania     2001     98.3  1282.\n 4 Albania     2008     94.7  1804.\n 5 Albania     2011     95.7  1966.\n 6 Algeria     1987     35.8  1902.\n 7 Algeria     2002     60.1  1872.\n 8 Algeria     2006     63.9  2125.\n 9 Angola      2001     54.2   298.\n10 Angola      2011     58.6   630.\n# ℹ 561 more rows"
  },
  {
    "objectID": "slides/2024-09-23-types.html#right",
    "href": "slides/2024-09-23-types.html#right",
    "title": "Variable Types",
    "section": "right",
    "text": "right\n\nlitGDPright &lt;- right_join(litF, GDP, by=c(\"country\", \"year\"))\ndim(litGDPright)\n\n[1] 7988    4\n\nlitGDPright\n\n# A tibble: 7,988 × 4\n   country             year  litRateF   gdp\n   &lt;chr&gt;               &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;\n 1 Albania             2001      98.3 1282.\n 2 Albania             2008      94.7 1804.\n 3 Albania             2011      95.7 1966.\n 4 Algeria             1987      35.8 1902.\n 5 Algeria             2002      60.1 1872.\n 6 Algeria             2006      63.9 2125.\n 7 Angola              2001      54.2  298.\n 8 Angola              2011      58.6  630.\n 9 Antigua and Barbuda 2001      99.4 9640.\n10 Antigua and Barbuda 2011      99.4 9978.\n# ℹ 7,978 more rows"
  },
  {
    "objectID": "slides/2024-09-23-types.html#inner",
    "href": "slides/2024-09-23-types.html#inner",
    "title": "Variable Types",
    "section": "inner",
    "text": "inner\n\nlitGDPinner &lt;- inner_join(litF, GDP, by=c(\"country\", \"year\"))\ndim(litGDPinner)\n\n[1] 505   4\n\nlitGDPinner\n\n# A tibble: 505 × 4\n   country             year  litRateF   gdp\n   &lt;chr&gt;               &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;\n 1 Albania             2001      98.3 1282.\n 2 Albania             2008      94.7 1804.\n 3 Albania             2011      95.7 1966.\n 4 Algeria             1987      35.8 1902.\n 5 Algeria             2002      60.1 1872.\n 6 Algeria             2006      63.9 2125.\n 7 Angola              2001      54.2  298.\n 8 Angola              2011      58.6  630.\n 9 Antigua and Barbuda 2001      99.4 9640.\n10 Antigua and Barbuda 2011      99.4 9978.\n# ℹ 495 more rows"
  },
  {
    "objectID": "slides/2024-09-23-types.html#full",
    "href": "slides/2024-09-23-types.html#full",
    "title": "Variable Types",
    "section": "full",
    "text": "full\n\nlitGDPfull &lt;- full_join(litF, GDP, by=c(\"country\", \"year\"))\ndim(litGDPfull)\n\n[1] 8054    4\n\nlitGDPfull\n\n# A tibble: 8,054 × 4\n   country     year  litRateF   gdp\n   &lt;chr&gt;       &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;\n 1 Afghanistan 1979      4.99   NA \n 2 Afghanistan 2011     13      NA \n 3 Albania     2001     98.3  1282.\n 4 Albania     2008     94.7  1804.\n 5 Albania     2011     95.7  1966.\n 6 Algeria     1987     35.8  1902.\n 7 Algeria     2002     60.1  1872.\n 8 Algeria     2006     63.9  2125.\n 9 Angola      2001     54.2   298.\n10 Angola      2011     58.6   630.\n# ℹ 8,044 more rows"
  },
  {
    "objectID": "slides/2024-09-23-types.html#join-to-merge-two-datasets",
    "href": "slides/2024-09-23-types.html#join-to-merge-two-datasets",
    "title": "Variable Types",
    "section": "join to merge two datasets",
    "text": "join to merge two datasets\n\n\n\n\n\n\n\n\n\nIf you ever need to understand which join is the right join for you, try to find an image that will lay out what the function is doing. I found this one that is quite good and is taken from the Statistics Globe blog.\n\n\n\n:::"
  },
  {
    "objectID": "slides/2024-09-23-types.html#footnotes",
    "href": "slides/2024-09-23-types.html#footnotes",
    "title": "Variable Types",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nExample from DataScience in a Box↩︎"
  },
  {
    "objectID": "slides/2024-09-23-types.html#character-strings",
    "href": "slides/2024-09-23-types.html#character-strings",
    "title": "Variable Types",
    "section": "Character strings",
    "text": "Character strings\nWhen working with character strings, we might want to detect, replace, or extract certain patterns.\nStrings are objects of the character class (abbreviated as &lt;chr&gt; in tibbles). When you print out strings, they display with double quotes:\n\nsome_string &lt;- \"banana\"\nsome_string\n\n[1] \"banana\""
  },
  {
    "objectID": "slides/2024-09-23-types.html#creating-strings",
    "href": "slides/2024-09-23-types.html#creating-strings",
    "title": "Variable Types",
    "section": "Creating strings",
    "text": "Creating strings\nCreating strings by hand is useful for testing out regular expressions.\nTo create a string, type any text in either double quotes \" or single quotes '. Using double or single quotes doesn’t matter unless your string itself has single or double quotes.\n\nstring1 &lt;- \"This is a string\"\nstring2 &lt;- 'If I want to include a \"quote\" inside a string, I use single quotes'\n\nstring1\n\n[1] \"This is a string\"\n\nstring2\n\n[1] \"If I want to include a \\\"quote\\\" inside a string, I use single quotes\""
  },
  {
    "objectID": "slides/2024-09-23-types.html#str_replace",
    "href": "slides/2024-09-23-types.html#str_replace",
    "title": "Variable Types",
    "section": "str_replace*()",
    "text": "str_replace*()\nstr_replace() replaces the first match of a pattern. str_replace_all() replaces all the matches of a pattern.\n\nfruits\n\n[1] \"Apple\"  \"Banana\" \"Pear\"  \n\nstr_replace(fruits, \"a\", \"x\")\n\n[1] \"Apple\"  \"Bxnana\" \"Pexr\"  \n\nstr_replace_all(fruits, \"a\", \"x\")\n\n[1] \"Apple\"  \"Bxnxnx\" \"Pexr\""
  },
  {
    "objectID": "slides/2024-09-23-types.html#str_detect",
    "href": "slides/2024-09-23-types.html#str_detect",
    "title": "Variable Types",
    "section": "str_detect()",
    "text": "str_detect()\n\nstr_detect(fruits, \"a\")\n\n[1] FALSE  TRUE  TRUE"
  },
  {
    "objectID": "slides/2024-09-23-types.html#stringr-functions",
    "href": "slides/2024-09-23-types.html#stringr-functions",
    "title": "Variable Types",
    "section": "stringr functions",
    "text": "stringr functions\nThe stringr package within tidyverse contains lots of functions to help process strings. Letting x be a string variable…\n\n\n\n\n\nstr function\narguments\nreturns\n\n\n\n\nstr_replace()\nx, pattern, replacement\na modified string\n\n\nstr_replace_all()\nx, pattern, replacement\na modified string\n\n\nstr_to_lower()\nx\na modified string\n\n\nstr_to_upper()\nx\na modified string\n\n\nstr_sub()\nx, start, end\na modified string\n\n\nstr_length()\nx\na number\n\n\nstr_detect()\nx, pattern\nTRUE/FALSE\n\n\n\n\n\nUse the stringr cheatsheet."
  },
  {
    "objectID": "slides/2024-09-23-types.html#original-data",
    "href": "slides/2024-09-23-types.html#original-data",
    "title": "Variable Types",
    "section": "original data",
    "text": "original data\n\nstarwars |&gt; \n  select(name, films) |&gt; \n  str() \n\ntibble [87 × 2] (S3: tbl_df/tbl/data.frame)\n $ name : chr [1:87] \"Luke Skywalker\" \"C-3PO\" \"R2-D2\" \"Darth Vader\" ...\n $ films:List of 87\n  ..$ : chr [1:5] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"Revenge of the Sith\" ...\n  ..$ : chr [1:6] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"The Phantom Menace\" ...\n  ..$ : chr [1:7] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"The Phantom Menace\" ...\n  ..$ : chr [1:4] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"Revenge of the Sith\"\n  ..$ : chr [1:5] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"Revenge of the Sith\" ...\n  ..$ : chr [1:3] \"A New Hope\" \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr [1:3] \"A New Hope\" \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr \"A New Hope\"\n  ..$ : chr \"A New Hope\"\n  ..$ : chr [1:6] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"The Phantom Menace\" ...\n  ..$ : chr [1:3] \"The Phantom Menace\" \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr [1:2] \"A New Hope\" \"Revenge of the Sith\"\n  ..$ : chr [1:5] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"Revenge of the Sith\" ...\n  ..$ : chr [1:4] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"The Force Awakens\"\n  ..$ : chr \"A New Hope\"\n  ..$ : chr [1:3] \"A New Hope\" \"Return of the Jedi\" \"The Phantom Menace\"\n  ..$ : chr [1:3] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\"\n  ..$ : chr \"A New Hope\"\n  ..$ : chr [1:5] \"The Empire Strikes Back\" \"Return of the Jedi\" \"The Phantom Menace\" \"Attack of the Clones\" ...\n  ..$ : chr [1:5] \"The Empire Strikes Back\" \"Return of the Jedi\" \"The Phantom Menace\" \"Attack of the Clones\" ...\n  ..$ : chr [1:3] \"The Empire Strikes Back\" \"Return of the Jedi\" \"Attack of the Clones\"\n  ..$ : chr \"The Empire Strikes Back\"\n  ..$ : chr \"The Empire Strikes Back\"\n  ..$ : chr [1:2] \"The Empire Strikes Back\" \"Return of the Jedi\"\n  ..$ : chr \"The Empire Strikes Back\"\n  ..$ : chr [1:2] \"Return of the Jedi\" \"The Force Awakens\"\n  ..$ : chr \"Return of the Jedi\"\n  ..$ : chr \"Return of the Jedi\"\n  ..$ : chr \"Return of the Jedi\"\n  ..$ : chr \"Return of the Jedi\"\n  ..$ : chr \"The Phantom Menace\"\n  ..$ : chr [1:3] \"The Phantom Menace\" \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr \"The Phantom Menace\"\n  ..$ : chr [1:3] \"The Phantom Menace\" \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr [1:2] \"The Phantom Menace\" \"Attack of the Clones\"\n  ..$ : chr \"The Phantom Menace\"\n  ..$ : chr \"The Phantom Menace\"\n  ..$ : chr \"The Phantom Menace\"\n  ..$ : chr [1:2] \"The Phantom Menace\" \"Attack of the Clones\"\n  ..$ : chr \"The Phantom Menace\"\n  ..$ : chr \"The Phantom Menace\"\n  ..$ : chr [1:2] \"The Phantom Menace\" \"Attack of the Clones\"\n  ..$ : chr \"The Phantom Menace\"\n  ..$ : chr \"Return of the Jedi\"\n  ..$ : chr [1:3] \"The Phantom Menace\" \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr \"The Phantom Menace\"\n  ..$ : chr \"The Phantom Menace\"\n  ..$ : chr \"The Phantom Menace\"\n  ..$ : chr \"The Phantom Menace\"\n  ..$ : chr [1:3] \"The Phantom Menace\" \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr [1:3] \"The Phantom Menace\" \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr [1:3] \"The Phantom Menace\" \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr [1:2] \"The Phantom Menace\" \"Revenge of the Sith\"\n  ..$ : chr [1:2] \"The Phantom Menace\" \"Revenge of the Sith\"\n  ..$ : chr [1:2] \"The Phantom Menace\" \"Revenge of the Sith\"\n  ..$ : chr \"The Phantom Menace\"\n  ..$ : chr [1:3] \"The Phantom Menace\" \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr [1:2] \"The Phantom Menace\" \"Attack of the Clones\"\n  ..$ : chr \"Attack of the Clones\"\n  ..$ : chr \"Attack of the Clones\"\n  ..$ : chr \"Attack of the Clones\"\n  ..$ : chr [1:2] \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr [1:2] \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr \"Attack of the Clones\"\n  ..$ : chr \"Attack of the Clones\"\n  ..$ : chr [1:2] \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr [1:2] \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr \"Attack of the Clones\"\n  ..$ : chr \"Attack of the Clones\"\n  ..$ : chr \"Attack of the Clones\"\n  ..$ : chr \"Attack of the Clones\"\n  ..$ : chr \"Attack of the Clones\"\n  ..$ : chr \"Attack of the Clones\"\n  ..$ : chr [1:2] \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr \"Attack of the Clones\"\n  ..$ : chr \"Attack of the Clones\"\n  ..$ : chr [1:2] \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr \"Revenge of the Sith\"\n  ..$ : chr \"Revenge of the Sith\"\n  ..$ : chr [1:2] \"A New Hope\" \"Revenge of the Sith\"\n  ..$ : chr [1:2] \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr \"Revenge of the Sith\"\n  ..$ : chr \"The Force Awakens\"\n  ..$ : chr \"The Force Awakens\"\n  ..$ : chr \"The Force Awakens\"\n  ..$ : chr \"The Force Awakens\"\n  ..$ : chr \"The Force Awakens\""
  },
  {
    "objectID": "slides/2024-09-23-types.html#filtered-data",
    "href": "slides/2024-09-23-types.html#filtered-data",
    "title": "Variable Types",
    "section": "filtered data",
    "text": "filtered data\n\nstarwars |&gt; \n  filter(str_detect(films, \"Empire\")) |&gt; \n  select(name, films) |&gt; \n  str()\n\ntibble [16 × 2] (S3: tbl_df/tbl/data.frame)\n $ name : chr [1:16] \"Luke Skywalker\" \"C-3PO\" \"R2-D2\" \"Darth Vader\" ...\n $ films:List of 16\n  ..$ : chr [1:5] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"Revenge of the Sith\" ...\n  ..$ : chr [1:6] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"The Phantom Menace\" ...\n  ..$ : chr [1:7] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"The Phantom Menace\" ...\n  ..$ : chr [1:4] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"Revenge of the Sith\"\n  ..$ : chr [1:5] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"Revenge of the Sith\" ...\n  ..$ : chr [1:6] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"The Phantom Menace\" ...\n  ..$ : chr [1:5] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"Revenge of the Sith\" ...\n  ..$ : chr [1:4] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"The Force Awakens\"\n  ..$ : chr [1:3] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\"\n  ..$ : chr [1:5] \"The Empire Strikes Back\" \"Return of the Jedi\" \"The Phantom Menace\" \"Attack of the Clones\" ...\n  ..$ : chr [1:5] \"The Empire Strikes Back\" \"Return of the Jedi\" \"The Phantom Menace\" \"Attack of the Clones\" ...\n  ..$ : chr [1:3] \"The Empire Strikes Back\" \"Return of the Jedi\" \"Attack of the Clones\"\n  ..$ : chr \"The Empire Strikes Back\"\n  ..$ : chr \"The Empire Strikes Back\"\n  ..$ : chr [1:2] \"The Empire Strikes Back\" \"Return of the Jedi\"\n  ..$ : chr \"The Empire Strikes Back\""
  },
  {
    "objectID": "slides/2024-09-23-types.html#order-matters",
    "href": "slides/2024-09-23-types.html#order-matters",
    "title": "Variable Types",
    "section": "Order matters",
    "text": "Order matters\nSurveyUSA poll from 2012 on views of the DREAM Act.\nWhat is off about the data viz part of the report?\n\nDataPlotLevels\n\n\n\nopenintro::dream\n\n# A tibble: 910 × 2\n   ideology     stance\n   &lt;fct&gt;        &lt;fct&gt; \n 1 Conservative Yes   \n 2 Conservative Yes   \n 3 Conservative Yes   \n 4 Conservative Yes   \n 5 Conservative Yes   \n 6 Conservative Yes   \n 7 Conservative Yes   \n 8 Conservative Yes   \n 9 Conservative Yes   \n10 Conservative Yes   \n# ℹ 900 more rows\n\n\n\n\n\ndream |&gt; \n  ggplot(aes(x = ideology, fill = stance)) + \n  geom_bar()\n\n\n\n\n\n\n\n\n\n\n\ndream |&gt; \n  select(ideology) |&gt; \n  pull() |&gt;  # levels() works only on vectors, not data frames\n  levels()\n\n[1] \"Conservative\" \"Liberal\"      \"Moderate\""
  },
  {
    "objectID": "slides/2024-09-23-types.html#change-the-order",
    "href": "slides/2024-09-23-types.html#change-the-order",
    "title": "Variable Types",
    "section": "Change the order",
    "text": "Change the order\nWe can fix the order of the ideology variable.\n\nCodePlot\n\n\n\ndream |&gt; \n  mutate(ideology = fct_relevel(ideology, \n                                c(\"Liberal\", \"Moderate\", \"Conservative\"))) |&gt; \n  ggplot(aes(x = ideology, fill = stance)) + \n  geom_bar()"
  },
  {
    "objectID": "slides/2024-09-23-types.html#factor-and-character-variables",
    "href": "slides/2024-09-23-types.html#factor-and-character-variables",
    "title": "Variable Types",
    "section": "Factor and character variables",
    "text": "Factor and character variables\n\nDataPlot\n\n\n\nstarbucks |&gt; \n  select(item, type, calories)\n\n# A tibble: 77 × 3\n   item                          type   calories\n   &lt;chr&gt;                         &lt;fct&gt;     &lt;int&gt;\n 1 \"8-Grain Roll\"                bakery      350\n 2 \"Apple Bran Muffin\"           bakery      350\n 3 \"Apple Fritter\"               bakery      420\n 4 \"Banana Nut Loaf\"             bakery      490\n 5 \"Birthday Cake Mini Doughnut\" bakery      130\n 6 \"Blueberry Oat Bar\"           bakery      370\n 7 \"Blueberry Scone\"             bakery      460\n 8 \"Bountiful Blueberry Muffin\"  bakery      370\n 9 \"Butter Croissant \"           bakery      310\n10 \"Cheese Danish\"               bakery      420\n# ℹ 67 more rows"
  },
  {
    "objectID": "slides/2024-09-23-types.html#reorder-according-to-another-variable",
    "href": "slides/2024-09-23-types.html#reorder-according-to-another-variable",
    "title": "Variable Types",
    "section": "Reorder according to another variable",
    "text": "Reorder according to another variable\nLets say that we wanted to order the type of food item based on the average number of calories in that food.\n\nCodePlot\n\n\n\nstarbucks |&gt; \n  mutate(type = fct_reorder(type, calories, .fun = \"mean\", .desc = TRUE)) |&gt; \n  ggplot(aes(x = type, y = calories)) + \n  geom_point() + \n  labs(x = \"type of food\",\n       y = \"\",\n       title = \"Calories for food items at Starbucks\")"
  },
  {
    "objectID": "slides/2024-09-23-types.html#forcats-functions",
    "href": "slides/2024-09-23-types.html#forcats-functions",
    "title": "Variable Types",
    "section": "forcats functions",
    "text": "forcats functions\nThe forcats package within tidyverse contains lots of functions to help process factor variables Use the forcats cheatsheet. We’ll focus on the most common functions.\n\nfunctions for changing the order of factor levels\n\nfct_relevel() = manually reorder levels\nfct_reorder() = reorder levels according to values of another variable\nfct_infreq() = order levels from highest to lowest frequency\nfct_rev() = reverse the current order\n\nfunctions for changing the labels or values of factor levels\n\nfct_recode() = manually change levels\nfct_lump() = group together least common levels"
  },
  {
    "objectID": "slides/2024-09-23-types.html#str_view",
    "href": "slides/2024-09-23-types.html#str_view",
    "title": "Variable Types",
    "section": "str_view()",
    "text": "str_view()\nWe can view these strings “naturally” (without the opening and closing quotes) with str_view():\n\nstr_view(string1)\n\n[1] │ This is a string\n\nstr_view(string2)\n\n[1] │ If I want to include a \"quote\" inside a string, I use single quotes"
  },
  {
    "objectID": "slides/2024-09-23-types.html#str_c",
    "href": "slides/2024-09-23-types.html#str_c",
    "title": "Variable Types",
    "section": "str_c",
    "text": "str_c\nSimilar to paste() (gluing strings together), but works well in a tidy pipeline.\n\ndf &lt;- tibble(name = c(\"Flora\", \"David\", \"Terra\", NA))\ndf |&gt; mutate(greeting = str_c(\"Hi \", name, \"!\"))\n\n# A tibble: 4 × 2\n  name  greeting \n  &lt;chr&gt; &lt;chr&gt;    \n1 Flora Hi Flora!\n2 David Hi David!\n3 Terra Hi Terra!\n4 &lt;NA&gt;  &lt;NA&gt;"
  },
  {
    "objectID": "slides/2024-09-23-types.html#str_sub",
    "href": "slides/2024-09-23-types.html#str_sub",
    "title": "Variable Types",
    "section": "str_sub()",
    "text": "str_sub()\nstr_sub(string, start, end) will extract parts of a string where start and end are the positions where the substring starts and ends.\n\nfruits &lt;- c(\"Apple\", \"Banana\", \"Pear\")\nstr_sub(fruits, 1, 3)\n\n[1] \"App\" \"Ban\" \"Pea\"\n\nstr_sub(fruits, -3, -1)\n\n[1] \"ple\" \"ana\" \"ear\"\n\n\nWon’t fail if the string is too short.\n\nstr_sub(fruits, 1, 5)\n\n[1] \"Apple\" \"Banan\" \"Pear\""
  },
  {
    "objectID": "slides/2024-09-23-types.html#str_sub-in-a-pipeline",
    "href": "slides/2024-09-23-types.html#str_sub-in-a-pipeline",
    "title": "Variable Types",
    "section": "str_sub() in a pipeline",
    "text": "str_sub() in a pipeline\nWe can use the str_*() functions inside the mutate() function.\n\ntitanic |&gt; \n  mutate(class1 = str_sub(Class, 1, 1))\n\n   Class    Sex   Age Survived Freq class1\n1    1st   Male Child       No    0      1\n2    2nd   Male Child       No    0      2\n3    3rd   Male Child       No   35      3\n4   Crew   Male Child       No    0      C\n5    1st Female Child       No    0      1\n6    2nd Female Child       No    0      2\n7    3rd Female Child       No   17      3\n8   Crew Female Child       No    0      C\n9    1st   Male Adult       No  118      1\n10   2nd   Male Adult       No  154      2\n11   3rd   Male Adult       No  387      3\n12  Crew   Male Adult       No  670      C\n13   1st Female Adult       No    4      1\n14   2nd Female Adult       No   13      2\n15   3rd Female Adult       No   89      3\n16  Crew Female Adult       No    3      C\n17   1st   Male Child      Yes    5      1\n18   2nd   Male Child      Yes   11      2\n19   3rd   Male Child      Yes   13      3\n20  Crew   Male Child      Yes    0      C\n21   1st Female Child      Yes    1      1\n22   2nd Female Child      Yes   13      2\n23   3rd Female Child      Yes   14      3\n24  Crew Female Child      Yes    0      C\n25   1st   Male Adult      Yes   57      1\n26   2nd   Male Adult      Yes   14      2\n27   3rd   Male Adult      Yes   75      3\n28  Crew   Male Adult      Yes  192      C\n29   1st Female Adult      Yes  140      1\n30   2nd Female Adult      Yes   80      2\n31   3rd Female Adult      Yes   76      3\n32  Crew Female Adult      Yes   20      C"
  },
  {
    "objectID": "slides/2024-09-23-types.html#str_detect-in-pipeline",
    "href": "slides/2024-09-23-types.html#str_detect-in-pipeline",
    "title": "Variable Types",
    "section": "str_detect() in pipeline",
    "text": "str_detect() in pipeline\nstr_detect() used in a filter() pipeline.\n\noriginal datafiltered data\n\n\n\nstarwars |&gt; \n  select(name, films) |&gt; \n  str() \n\ntibble [87 × 2] (S3: tbl_df/tbl/data.frame)\n $ name : chr [1:87] \"Luke Skywalker\" \"C-3PO\" \"R2-D2\" \"Darth Vader\" ...\n $ films:List of 87\n  ..$ : chr [1:5] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"Revenge of the Sith\" ...\n  ..$ : chr [1:6] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"The Phantom Menace\" ...\n  ..$ : chr [1:7] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"The Phantom Menace\" ...\n  ..$ : chr [1:4] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"Revenge of the Sith\"\n  ..$ : chr [1:5] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"Revenge of the Sith\" ...\n  ..$ : chr [1:3] \"A New Hope\" \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr [1:3] \"A New Hope\" \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr \"A New Hope\"\n  ..$ : chr \"A New Hope\"\n  ..$ : chr [1:6] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"The Phantom Menace\" ...\n  ..$ : chr [1:3] \"The Phantom Menace\" \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr [1:2] \"A New Hope\" \"Revenge of the Sith\"\n  ..$ : chr [1:5] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"Revenge of the Sith\" ...\n  ..$ : chr [1:4] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"The Force Awakens\"\n  ..$ : chr \"A New Hope\"\n  ..$ : chr [1:3] \"A New Hope\" \"Return of the Jedi\" \"The Phantom Menace\"\n  ..$ : chr [1:3] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\"\n  ..$ : chr \"A New Hope\"\n  ..$ : chr [1:5] \"The Empire Strikes Back\" \"Return of the Jedi\" \"The Phantom Menace\" \"Attack of the Clones\" ...\n  ..$ : chr [1:5] \"The Empire Strikes Back\" \"Return of the Jedi\" \"The Phantom Menace\" \"Attack of the Clones\" ...\n  ..$ : chr [1:3] \"The Empire Strikes Back\" \"Return of the Jedi\" \"Attack of the Clones\"\n  ..$ : chr \"The Empire Strikes Back\"\n  ..$ : chr \"The Empire Strikes Back\"\n  ..$ : chr [1:2] \"The Empire Strikes Back\" \"Return of the Jedi\"\n  ..$ : chr \"The Empire Strikes Back\"\n  ..$ : chr [1:2] \"Return of the Jedi\" \"The Force Awakens\"\n  ..$ : chr \"Return of the Jedi\"\n  ..$ : chr \"Return of the Jedi\"\n  ..$ : chr \"Return of the Jedi\"\n  ..$ : chr \"Return of the Jedi\"\n  ..$ : chr \"The Phantom Menace\"\n  ..$ : chr [1:3] \"The Phantom Menace\" \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr \"The Phantom Menace\"\n  ..$ : chr [1:3] \"The Phantom Menace\" \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr [1:2] \"The Phantom Menace\" \"Attack of the Clones\"\n  ..$ : chr \"The Phantom Menace\"\n  ..$ : chr \"The Phantom Menace\"\n  ..$ : chr \"The Phantom Menace\"\n  ..$ : chr [1:2] \"The Phantom Menace\" \"Attack of the Clones\"\n  ..$ : chr \"The Phantom Menace\"\n  ..$ : chr \"The Phantom Menace\"\n  ..$ : chr [1:2] \"The Phantom Menace\" \"Attack of the Clones\"\n  ..$ : chr \"The Phantom Menace\"\n  ..$ : chr \"Return of the Jedi\"\n  ..$ : chr [1:3] \"The Phantom Menace\" \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr \"The Phantom Menace\"\n  ..$ : chr \"The Phantom Menace\"\n  ..$ : chr \"The Phantom Menace\"\n  ..$ : chr \"The Phantom Menace\"\n  ..$ : chr [1:3] \"The Phantom Menace\" \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr [1:3] \"The Phantom Menace\" \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr [1:3] \"The Phantom Menace\" \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr [1:2] \"The Phantom Menace\" \"Revenge of the Sith\"\n  ..$ : chr [1:2] \"The Phantom Menace\" \"Revenge of the Sith\"\n  ..$ : chr [1:2] \"The Phantom Menace\" \"Revenge of the Sith\"\n  ..$ : chr \"The Phantom Menace\"\n  ..$ : chr [1:3] \"The Phantom Menace\" \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr [1:2] \"The Phantom Menace\" \"Attack of the Clones\"\n  ..$ : chr \"Attack of the Clones\"\n  ..$ : chr \"Attack of the Clones\"\n  ..$ : chr \"Attack of the Clones\"\n  ..$ : chr [1:2] \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr [1:2] \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr \"Attack of the Clones\"\n  ..$ : chr \"Attack of the Clones\"\n  ..$ : chr [1:2] \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr [1:2] \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr \"Attack of the Clones\"\n  ..$ : chr \"Attack of the Clones\"\n  ..$ : chr \"Attack of the Clones\"\n  ..$ : chr \"Attack of the Clones\"\n  ..$ : chr \"Attack of the Clones\"\n  ..$ : chr \"Attack of the Clones\"\n  ..$ : chr [1:2] \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr \"Attack of the Clones\"\n  ..$ : chr \"Attack of the Clones\"\n  ..$ : chr [1:2] \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr \"Revenge of the Sith\"\n  ..$ : chr \"Revenge of the Sith\"\n  ..$ : chr [1:2] \"A New Hope\" \"Revenge of the Sith\"\n  ..$ : chr [1:2] \"Attack of the Clones\" \"Revenge of the Sith\"\n  ..$ : chr \"Revenge of the Sith\"\n  ..$ : chr \"The Force Awakens\"\n  ..$ : chr \"The Force Awakens\"\n  ..$ : chr \"The Force Awakens\"\n  ..$ : chr \"The Force Awakens\"\n  ..$ : chr \"The Force Awakens\"\n\n\n\n\n\nstarwars |&gt; \n  filter(str_detect(films, \"Empire\")) |&gt; \n  select(name, films) |&gt; \n  str()\n\ntibble [16 × 2] (S3: tbl_df/tbl/data.frame)\n $ name : chr [1:16] \"Luke Skywalker\" \"C-3PO\" \"R2-D2\" \"Darth Vader\" ...\n $ films:List of 16\n  ..$ : chr [1:5] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"Revenge of the Sith\" ...\n  ..$ : chr [1:6] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"The Phantom Menace\" ...\n  ..$ : chr [1:7] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"The Phantom Menace\" ...\n  ..$ : chr [1:4] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"Revenge of the Sith\"\n  ..$ : chr [1:5] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"Revenge of the Sith\" ...\n  ..$ : chr [1:6] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"The Phantom Menace\" ...\n  ..$ : chr [1:5] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"Revenge of the Sith\" ...\n  ..$ : chr [1:4] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\" \"The Force Awakens\"\n  ..$ : chr [1:3] \"A New Hope\" \"The Empire Strikes Back\" \"Return of the Jedi\"\n  ..$ : chr [1:5] \"The Empire Strikes Back\" \"Return of the Jedi\" \"The Phantom Menace\" \"Attack of the Clones\" ...\n  ..$ : chr [1:5] \"The Empire Strikes Back\" \"Return of the Jedi\" \"The Phantom Menace\" \"Attack of the Clones\" ...\n  ..$ : chr [1:3] \"The Empire Strikes Back\" \"Return of the Jedi\" \"Attack of the Clones\"\n  ..$ : chr \"The Empire Strikes Back\"\n  ..$ : chr \"The Empire Strikes Back\"\n  ..$ : chr [1:2] \"The Empire Strikes Back\" \"Return of the Jedi\"\n  ..$ : chr \"The Empire Strikes Back\""
  },
  {
    "objectID": "slides/2024-09-23-types.html#lubridate",
    "href": "slides/2024-09-23-types.html#lubridate",
    "title": "Variable Types",
    "section": "lubridate",
    "text": "lubridate\nlubridate is a another R package meant for data wrangling!\nIn particular, lubridate makes it very easy to work with days, times, and dates. The base idea is to start with dates in a ymd (year month day) format and transform the information into whatever you want.\nExample from the lubridate vignette."
  },
  {
    "objectID": "slides/2024-09-23-types.html#if-anyone-drove-a-time-machine-they-would-crash",
    "href": "slides/2024-09-23-types.html#if-anyone-drove-a-time-machine-they-would-crash",
    "title": "Variable Types",
    "section": "If anyone drove a time machine, they would crash",
    "text": "If anyone drove a time machine, they would crash\nThe length of months and years change so often that doing arithmetic with them can be unintuitive.\nConsider a simple operation: January 31st + one month."
  },
  {
    "objectID": "slides/2024-09-23-types.html#if-anyone-drove-a-time-machine-they-would-crash-1",
    "href": "slides/2024-09-23-types.html#if-anyone-drove-a-time-machine-they-would-crash-1",
    "title": "Variable Types",
    "section": "If anyone drove a time machine, they would crash",
    "text": "If anyone drove a time machine, they would crash\nThe length of months and years change so often that doing arithmetic with them can be unintuitive.\nConsider a simple operation: January 31st + one month.\nShould the answer be:\n\nFebruary 31st (which doesn’t exist)?\nMarch 4th (31 days after January 31)?\nFebruary 28th (assuming its not a leap year)?"
  },
  {
    "objectID": "slides/2024-09-23-types.html#if-anyone-drove-a-time-machine-they-would-crash-2",
    "href": "slides/2024-09-23-types.html#if-anyone-drove-a-time-machine-they-would-crash-2",
    "title": "Variable Types",
    "section": "If anyone drove a time machine, they would crash",
    "text": "If anyone drove a time machine, they would crash\nA basic property of arithmetic is that a + b - b = a. Only solution 1 obeys the mathematical property, but it is an invalid date. Wickham wants to make lubridate as consistent as possible by invoking the following rule: if adding or subtracting a month or a year creates an invalid date, lubridate will return an NA. \nIf you thought solution 2 or 3 was more useful, no problem. You can still get those results with clever arithmetic, or by using the special %m+% and %m-% operators. %m+% and %m-% automatically roll dates back to the last day of the month, should that be necessary."
  },
  {
    "objectID": "slides/2024-09-23-types.html#basics-in-lubridate",
    "href": "slides/2024-09-23-types.html#basics-in-lubridate",
    "title": "Variable Types",
    "section": "basics in lubridate",
    "text": "basics in lubridate\n\nlibrary(lubridate)\nrightnow &lt;- now()\nrightnow\n\n[1] \"2024-09-25 12:27:16 PDT\"\n\nday(rightnow)\n\n[1] 25\n\nweek(rightnow)\n\n[1] 39\n\nmonth(rightnow, label=FALSE)\n\n[1] 9\n\nmonth(rightnow, label=TRUE)\n\n[1] Sep\n12 Levels: Jan &lt; Feb &lt; Mar &lt; Apr &lt; May &lt; Jun &lt; Jul &lt; Aug &lt; Sep &lt; ... &lt; Dec\n\nyear(rightnow)\n\n[1] 2024"
  },
  {
    "objectID": "slides/2024-09-23-types.html#basics-in-lubridate-1",
    "href": "slides/2024-09-23-types.html#basics-in-lubridate-1",
    "title": "Variable Types",
    "section": "basics in lubridate",
    "text": "basics in lubridate\n\nminute(rightnow)\n\n[1] 27\n\nhour(rightnow)\n\n[1] 12\n\nyday(rightnow)\n\n[1] 269\n\nmday(rightnow)\n\n[1] 25\n\nwday(rightnow, label=FALSE)\n\n[1] 4\n\nwday(rightnow, label=TRUE)\n\n[1] Wed\nLevels: Sun &lt; Mon &lt; Tue &lt; Wed &lt; Thu &lt; Fri &lt; Sat"
  },
  {
    "objectID": "slides/2024-09-23-types.html#but-how-do-i-create-a-date-object",
    "href": "slides/2024-09-23-types.html#but-how-do-i-create-a-date-object",
    "title": "Variable Types",
    "section": "But how do I create a date object?",
    "text": "But how do I create a date object?\n\njan31 &lt;- ymd(\"2021-01-31\")\njan31 + months(0:11)\n\n [1] \"2021-01-31\" NA           \"2021-03-31\" NA           \"2021-05-31\"\n [6] NA           \"2021-07-31\" \"2021-08-31\" NA           \"2021-10-31\"\n[11] NA           \"2021-12-31\"\n\nfloor_date(jan31, \"month\") + months(0:11) + days(31)\n\n [1] \"2021-02-01\" \"2021-03-04\" \"2021-04-01\" \"2021-05-02\" \"2021-06-01\"\n [6] \"2021-07-02\" \"2021-08-01\" \"2021-09-01\" \"2021-10-02\" \"2021-11-01\"\n[11] \"2021-12-02\" \"2022-01-01\"\n\njan31 + months(0:11) + days(31)\n\n [1] \"2021-03-03\" NA           \"2021-05-01\" NA           \"2021-07-01\"\n [6] NA           \"2021-08-31\" \"2021-10-01\" NA           \"2021-12-01\"\n[11] NA           \"2022-01-31\"\n\njan31 %m+% months(0:11)\n\n [1] \"2021-01-31\" \"2021-02-28\" \"2021-03-31\" \"2021-04-30\" \"2021-05-31\"\n [6] \"2021-06-30\" \"2021-07-31\" \"2021-08-31\" \"2021-09-30\" \"2021-10-31\"\n[11] \"2021-11-30\" \"2021-12-31\""
  },
  {
    "objectID": "slides/2024-09-23-types.html#nyc-flights",
    "href": "slides/2024-09-23-types.html#nyc-flights",
    "title": "Variable Types",
    "section": "NYC flights",
    "text": "NYC flights\n\nlibrary(nycflights13)\nnames(flights)\n\n [1] \"year\"           \"month\"          \"day\"            \"dep_time\"      \n [5] \"sched_dep_time\" \"dep_delay\"      \"arr_time\"       \"sched_arr_time\"\n [9] \"arr_delay\"      \"carrier\"        \"flight\"         \"tailnum\"       \n[13] \"origin\"         \"dest\"           \"air_time\"       \"distance\"      \n[17] \"hour\"           \"minute\"         \"time_hour\""
  },
  {
    "objectID": "slides/2024-09-23-types.html#nyc-flights-1",
    "href": "slides/2024-09-23-types.html#nyc-flights-1",
    "title": "Variable Types",
    "section": "NYC flights",
    "text": "NYC flights\nCreating a date object from variables.\n\nflightsWK &lt;- flights |&gt;  \n   mutate(ymdday = ymd(paste(year, month,day, sep=\"-\"))) |&gt; \n   mutate(weekdy = wday(ymdday, label=TRUE), \n          whichweek = week(ymdday)) \n\nflightsWK |&gt;  select(year, month, day, ymdday, weekdy, whichweek, \n                     dep_time, arr_time, air_time) \n\n# A tibble: 336,776 × 9\n    year month   day ymdday     weekdy whichweek dep_time arr_time air_time\n   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;date&gt;     &lt;ord&gt;      &lt;dbl&gt;    &lt;int&gt;    &lt;int&gt;    &lt;dbl&gt;\n 1  2013     1     1 2013-01-01 Tue            1      517      830      227\n 2  2013     1     1 2013-01-01 Tue            1      533      850      227\n 3  2013     1     1 2013-01-01 Tue            1      542      923      160\n 4  2013     1     1 2013-01-01 Tue            1      544     1004      183\n 5  2013     1     1 2013-01-01 Tue            1      554      812      116\n 6  2013     1     1 2013-01-01 Tue            1      554      740      150\n 7  2013     1     1 2013-01-01 Tue            1      555      913      158\n 8  2013     1     1 2013-01-01 Tue            1      557      709       53\n 9  2013     1     1 2013-01-01 Tue            1      557      838      140\n10  2013     1     1 2013-01-01 Tue            1      558      753      138\n# ℹ 336,766 more rows"
  },
  {
    "objectID": "slides/2024-09-23-types.html#reprex",
    "href": "slides/2024-09-23-types.html#reprex",
    "title": "Variable Types",
    "section": "reprex",
    "text": "reprex\n\nHelp me help you\n\nreproducible example …\nStep 1. Copy code onto the clipboard\nStep 2. Type reprex() into the Console\nStep 3. Look at the Viewer to the right. Copy the Viewer output into GitHub, Piazza, Discord, an email, stackexchange, etc."
  },
  {
    "objectID": "slides/2024-09-23-types.html#reprex-demo",
    "href": "slides/2024-09-23-types.html#reprex-demo",
    "title": "Variable Types",
    "section": "reprex demo",
    "text": "reprex demo\nreprex(\n  jan31 + months(0:11) + days(31)\n)\nmultiple lines of code:\nreprex({\n  jan31 &lt;- ymd(\"2021-01-31\")\n  jan31 + months(0:11) + days(31)\n})\nreprex({\n  library(lubridate)\n  jan31 &lt;- ymd(\"2021-01-31\")\n  jan31 + months(0:11) + days(31)\n})"
  },
  {
    "objectID": "slides/2024-09-23-types.html#formatting-time-variablse",
    "href": "slides/2024-09-23-types.html#formatting-time-variablse",
    "title": "Variable Types",
    "section": "Formatting time variablse",
    "text": "Formatting time variablse\n\nimage credit: https://xkcd.com/1179/"
  },
  {
    "objectID": "slides/2024-09-23-types.html#what-time-is-it",
    "href": "slides/2024-09-23-types.html#what-time-is-it",
    "title": "Variable Types",
    "section": "What time is it?",
    "text": "What time is it?\n\ntoday()\n\n[1] \"2024-09-25\"\n\nnow()\n\n[1] \"2024-09-25 12:27:16 PDT\""
  },
  {
    "objectID": "slides/2024-09-23-types.html#creating-dates",
    "href": "slides/2024-09-23-types.html#creating-dates",
    "title": "Variable Types",
    "section": "Creating dates",
    "text": "Creating dates\nymd() and friends create dates\n\nymd(\"2024-09-25\")\n\n[1] \"2024-09-25\"\n\nmdy(\"September 25th, 2024\")\n\n[1] \"2024-09-25\"\n\ndmy(\"25-Sep-2024\")\n\n[1] \"2024-09-25\""
  },
  {
    "objectID": "slides/2024-09-23-types.html#with-times",
    "href": "slides/2024-09-23-types.html#with-times",
    "title": "Variable Types",
    "section": "… with times",
    "text": "… with times\nTo create a date-time, add an underscore and one or more of “h”, “m”, and “s” to the name of the parsing function:\n\nymd_hms(\"2024-09-25 11:45:59\", tz = \"America/Los_Angeles\")\n\n[1] \"2024-09-25 11:45:59 PDT\"\n\nmdy_hm(\"09/25/2024 15:01\")  # default is UTC = GMT\n\n[1] \"2024-09-25 15:01:00 UTC\"\n\n\nMore information about time zones in R."
  },
  {
    "objectID": "slides/2024-09-23-types.html#working-with-a-date-object",
    "href": "slides/2024-09-23-types.html#working-with-a-date-object",
    "title": "Variable Types",
    "section": "Working with a date object",
    "text": "Working with a date object\n\njan31 &lt;- ymd(\"2024-01-31\")\njan31 + months(0:11)\n\n [1] \"2024-01-31\" NA           \"2024-03-31\" NA           \"2024-05-31\"\n [6] NA           \"2024-07-31\" \"2024-08-31\" NA           \"2024-10-31\"\n[11] NA           \"2024-12-31\"\n\nfloor_date(jan31, \"month\")\n\n[1] \"2024-01-01\"\n\nfloor_date(jan31, \"month\") + months(0:11) + days(31)\n\n [1] \"2024-02-01\" \"2024-03-03\" \"2024-04-01\" \"2024-05-02\" \"2024-06-01\"\n [6] \"2024-07-02\" \"2024-08-01\" \"2024-09-01\" \"2024-10-02\" \"2024-11-01\"\n[11] \"2024-12-02\" \"2025-01-01\"\n\njan31 + months(0:11) + days(31)\n\n [1] \"2024-03-02\" NA           \"2024-05-01\" NA           \"2024-07-01\"\n [6] NA           \"2024-08-31\" \"2024-10-01\" NA           \"2024-12-01\"\n[11] NA           \"2025-01-31\"\n\njan31 %m+% months(0:11)\n\n [1] \"2024-01-31\" \"2024-02-29\" \"2024-03-31\" \"2024-04-30\" \"2024-05-31\"\n [6] \"2024-06-30\" \"2024-07-31\" \"2024-08-31\" \"2024-09-30\" \"2024-10-31\"\n[11] \"2024-11-30\" \"2024-12-31\""
  },
  {
    "objectID": "slides/2024-09-23-types.html#where-do-we-order",
    "href": "slides/2024-09-23-types.html#where-do-we-order",
    "title": "Variable Types",
    "section": "Where do we order?",
    "text": "Where do we order?\nThe ordering of the factor variable comes out in:\n\nplots (e.g., barplots)\ntables (e.g., group_by())\nmodeling (e.g., the baseline level in a linear regression)"
  },
  {
    "objectID": "slides/2024-09-23-types.html#change-character-to-factor",
    "href": "slides/2024-09-23-types.html#change-character-to-factor",
    "title": "Variable Types",
    "section": "Change character to factor",
    "text": "Change character to factor\n\nOG dataNew factor\n\n\n\nstarbucks\n\n# A tibble: 77 × 7\n   item                          calories   fat  carb fiber protein type  \n   &lt;chr&gt;                            &lt;int&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt;   &lt;int&gt; &lt;fct&gt; \n 1 \"8-Grain Roll\"                     350     8    67     5      10 bakery\n 2 \"Apple Bran Muffin\"                350     9    64     7       6 bakery\n 3 \"Apple Fritter\"                    420    20    59     0       5 bakery\n 4 \"Banana Nut Loaf\"                  490    19    75     4       7 bakery\n 5 \"Birthday Cake Mini Doughnut\"      130     6    17     0       0 bakery\n 6 \"Blueberry Oat Bar\"                370    14    47     5       6 bakery\n 7 \"Blueberry Scone\"                  460    22    61     2       7 bakery\n 8 \"Bountiful Blueberry Muffin\"       370    14    55     0       6 bakery\n 9 \"Butter Croissant \"                310    18    32     0       5 bakery\n10 \"Cheese Danish\"                    420    25    39     0       7 bakery\n# ℹ 67 more rows\n\n\n\n\n\nstarbucks |&gt; \n  mutate(item = as.factor(item))\n\n# A tibble: 77 × 7\n   item                          calories   fat  carb fiber protein type  \n   &lt;fct&gt;                            &lt;int&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt;   &lt;int&gt; &lt;fct&gt; \n 1 \"8-Grain Roll\"                     350     8    67     5      10 bakery\n 2 \"Apple Bran Muffin\"                350     9    64     7       6 bakery\n 3 \"Apple Fritter\"                    420    20    59     0       5 bakery\n 4 \"Banana Nut Loaf\"                  490    19    75     4       7 bakery\n 5 \"Birthday Cake Mini Doughnut\"      130     6    17     0       0 bakery\n 6 \"Blueberry Oat Bar\"                370    14    47     5       6 bakery\n 7 \"Blueberry Scone\"                  460    22    61     2       7 bakery\n 8 \"Bountiful Blueberry Muffin\"       370    14    55     0       6 bakery\n 9 \"Butter Croissant \"                310    18    32     0       5 bakery\n10 \"Cheese Danish\"                    420    25    39     0       7 bakery\n# ℹ 67 more rows"
  },
  {
    "objectID": "slides/2024-10-01-regex.html#regular-expressions",
    "href": "slides/2024-10-01-regex.html#regular-expressions",
    "title": "Regular Expressions",
    "section": "Regular Expressions",
    "text": "Regular Expressions\n\nA regular expression … is a sequence of characters that define a search pattern. Usually such patterns are used by string searching algorithms for “find” or “find and replace” operations on strings, or for input validation. It is a technique developed in theoretical computer science and formal language theory."
  },
  {
    "objectID": "slides/2024-10-01-regex.html#escape-sequences",
    "href": "slides/2024-10-01-regex.html#escape-sequences",
    "title": "Regular Expressions",
    "section": "Escape sequences",
    "text": "Escape sequences\nJust to scratch the surface, here are a few special characters that cannot be directly coded. Therefore, they are escaped with a backslash, \\.\n\n\\': single quote.\n\n\\\": double quote.\n\n\\n: newline.\n\n\\r: carriage return.\n\n\\t: tab character."
  },
  {
    "objectID": "slides/2024-10-01-regex.html#quantifiers",
    "href": "slides/2024-10-01-regex.html#quantifiers",
    "title": "Regular Expressions",
    "section": "Quantifiers",
    "text": "Quantifiers\nQuantifiers specify how many repetitions of the pattern.\n\n*: matches at least 0 times.\n\n+: matches at least 1 times.\n\n?: matches at most 1 times.\n\n{n}: matches exactly n times.\n\n{n,}: matches at least n times.\n\n{n,m}: matches between n and m times."
  },
  {
    "objectID": "slides/2024-10-01-regex.html#examples-of-quantifiers",
    "href": "slides/2024-10-01-regex.html#examples-of-quantifiers",
    "title": "Regular Expressions",
    "section": "Examples of quantifiers",
    "text": "Examples of quantifiers\n\nstrings &lt;- c(\"a\", \"ab\", \"acb\", \"accb\", \"acccb\", \"accccb\")\ngrep(\"ac*b\", strings, value = TRUE)\ngrep(\"ac*b\", strings, value = FALSE)\ngrep(\"ac+b\", strings, value = TRUE)\ngrep(\"ac?b\", strings, value = TRUE)\ngrep(\"ac{2}b\", strings, value = TRUE)\ngrep(\"ac{2,}b\", strings, value = TRUE)\ngrep(\"ac{2,3}b\", strings, value = TRUE)\n\ngrep() stands for “global regular expression print”. grep() returns a character vector containing the selected elements, grepl() returns a logical vector of TRUE/FALSE for whether or not there was a match."
  },
  {
    "objectID": "slides/2024-10-01-regex.html#examples-of-quantifiers---solution",
    "href": "slides/2024-10-01-regex.html#examples-of-quantifiers---solution",
    "title": "Regular Expressions",
    "section": "Examples of quantifiers - solution",
    "text": "Examples of quantifiers - solution\n\nstrings &lt;- c(\"a\", \"ab\", \"acb\", \"accb\", \"acccb\", \"accccb\")\ngrep(\"ac*b\", strings, value = TRUE)\n\n[1] \"ab\"     \"acb\"    \"accb\"   \"acccb\"  \"accccb\"\n\ngrep(\"ac*b\", strings, value = FALSE)\n\n[1] 2 3 4 5 6\n\ngrep(\"ac+b\", strings, value = TRUE)\n\n[1] \"acb\"    \"accb\"   \"acccb\"  \"accccb\"\n\ngrep(\"ac?b\", strings, value = TRUE)\n\n[1] \"ab\"  \"acb\"\n\ngrep(\"ac{2}b\", strings, value = TRUE)\n\n[1] \"accb\"\n\ngrep(\"ac{2,}b\", strings, value = TRUE)\n\n[1] \"accb\"   \"acccb\"  \"accccb\"\n\ngrep(\"ac{2,3}b\", strings, value = TRUE)\n\n[1] \"accb\"  \"acccb\"\n\n\ngrep() stands for “global regular expression print”. grep() returns a character vector containing the selected elements, grepl() returns a logical vector of TRUE/FALSE for whether or not there was a match."
  },
  {
    "objectID": "slides/2024-10-01-regex.html#position-of-pattern-within-the-string",
    "href": "slides/2024-10-01-regex.html#position-of-pattern-within-the-string",
    "title": "Regular Expressions",
    "section": "Position of pattern within the string",
    "text": "Position of pattern within the string\n\n^: matches the start of the string.\n\n$: matches the end of the string.\n\n\\b: matches the boundary of a word. Don’t confuse it with ^ $ which marks the edge of a string.\n\n\\B: matches the empty string provided it is not at an edge of a word."
  },
  {
    "objectID": "slides/2024-10-01-regex.html#examples-of-positions",
    "href": "slides/2024-10-01-regex.html#examples-of-positions",
    "title": "Regular Expressions",
    "section": "Examples of positions",
    "text": "Examples of positions\n\nstrings &lt;- c(\"abcd\", \"cdab\", \"cabd\", \"c abd\")\ngrep(\"ab\", strings, value = TRUE)\ngrep(\"^ab\", strings, value = TRUE)\ngrep(\"ab$\", strings, value = TRUE)\ngrep(\"\\\\bab\", strings, value = TRUE)"
  },
  {
    "objectID": "slides/2024-10-01-regex.html#examples-of-positions---solution",
    "href": "slides/2024-10-01-regex.html#examples-of-positions---solution",
    "title": "Regular Expressions",
    "section": "Examples of positions - solution",
    "text": "Examples of positions - solution\n\nstrings &lt;- c(\"abcd\", \"cdab\", \"cabd\", \"c abd\")\ngrep(\"ab\", strings, value = TRUE)\n\n[1] \"abcd\"  \"cdab\"  \"cabd\"  \"c abd\"\n\ngrep(\"^ab\", strings, value = TRUE)\n\n[1] \"abcd\"\n\ngrep(\"ab$\", strings, value = TRUE)\n\n[1] \"cdab\"\n\ngrep(\"\\\\bab\", strings, value = TRUE)\n\n[1] \"abcd\"  \"c abd\""
  },
  {
    "objectID": "slides/2024-10-01-regex.html#operators",
    "href": "slides/2024-10-01-regex.html#operators",
    "title": "Regular Expressions",
    "section": "Operators",
    "text": "Operators\n\n.: matches any single character,\n[...]: a character list, matches any one of the characters inside the square brackets. A - inside the brackets specifies a range of characters.\n\n[^...]: an inverted character list, similar to [...], but matches any characters except those inside the square brackets.\n\n\\: suppress the special meaning of metacharacters in regular expression, i.e. $ * + . ? [ ] ^ { } | ( ) \\. Since \\ itself needs to be escaped in R, we need to escape metacharacters with double backslash like \\\\$.\n\n|: an “or” operator, matches patterns on either side of the |.\n\n(...): grouping in regular expressions. This allows you to retrieve the bits that matched various parts of your regular expression so you can alter them or use them for building up a new string."
  },
  {
    "objectID": "slides/2024-10-01-regex.html#examples-of-operators",
    "href": "slides/2024-10-01-regex.html#examples-of-operators",
    "title": "Regular Expressions",
    "section": "Examples of operators",
    "text": "Examples of operators\n\nstrings &lt;- c(\"^ab\", \"ab\", \"abc\", \"abd\", \"abe\", \"ab 12\", \"a|b\")\ngrep(\"ab.\", strings, value = TRUE)\ngrep(\"ab[c-e]\", strings, value = TRUE)\ngrep(\"ab[^c]\", strings, value = TRUE)\ngrep(\"^ab\", strings, value = TRUE)\ngrep(\"\\\\^ab\", strings, value = TRUE)\ngrep(\"abc|abd\", strings, value = TRUE)\ngrep(\"a[b|c]\", strings, value = TRUE)\nstr_extract(strings, \"a[b|c]\")"
  },
  {
    "objectID": "slides/2024-10-01-regex.html#examples-of-operators---solution",
    "href": "slides/2024-10-01-regex.html#examples-of-operators---solution",
    "title": "Regular Expressions",
    "section": "Examples of operators - solution",
    "text": "Examples of operators - solution\n\nstrings &lt;- c(\"^ab\", \"ab\", \"abc\", \"abd\", \"abe\", \"ab 12\", \"a|b\")\ngrep(\"ab.\", strings, value = TRUE)\n\n[1] \"abc\"   \"abd\"   \"abe\"   \"ab 12\"\n\ngrep(\"ab[c-e]\", strings, value = TRUE)\n\n[1] \"abc\" \"abd\" \"abe\"\n\ngrep(\"ab[^c]\", strings, value = TRUE)\n\n[1] \"abd\"   \"abe\"   \"ab 12\"\n\ngrep(\"^ab\", strings, value = TRUE)\n\n[1] \"ab\"    \"abc\"   \"abd\"   \"abe\"   \"ab 12\"\n\ngrep(\"\\\\^ab\", strings, value = TRUE)\n\n[1] \"^ab\"\n\ngrep(\"abc|abd\", strings, value = TRUE)\n\n[1] \"abc\" \"abd\"\n\ngrep(\"a[b|c]\", strings, value = TRUE)\n\n[1] \"^ab\"   \"ab\"    \"abc\"   \"abd\"   \"abe\"   \"ab 12\" \"a|b\"  \n\nstr_extract(strings, \"a[b|c]\")\n\n[1] \"ab\" \"ab\" \"ab\" \"ab\" \"ab\" \"ab\" \"a|\""
  },
  {
    "objectID": "slides/2024-10-01-regex.html#character-classes",
    "href": "slides/2024-10-01-regex.html#character-classes",
    "title": "Regular Expressions",
    "section": "Character classes",
    "text": "Character classes\nCharacter classes allow specifying entire classes of characters, such as numbers, letters, etc. There are two flavors of character classes, one uses [: and :] around a predefined name inside square brackets and the other uses \\ and a special character. They are sometimes interchangeable.\n\n(?i) before the string indicates that the match should be case insensitive.\n[:digit:] or \\d: digits, 0 1 2 3 4 5 6 7 8 9, equivalent to [0-9].\n\n\\D: non-digits, equivalent to [^0-9].\n\n[:lower:]: lower-case letters, equivalent to [a-z].\n\n[:upper:]: upper-case letters, equivalent to [A-Z].\n\n[:alpha:]: alphabetic characters, equivalent to [[:lower:][:upper:]] or [A-z].\n\n[:alnum:]: alphanumeric characters, equivalent to [[:alpha:][:digit:]] or [A-z0-9].\n\n\\w: word characters, equivalent to [[:alnum:]_] or [A-z0-9_] (letter, number, or underscore).\n\n\\W: not word, equivalent to [^A-z0-9_].\n\n[:blank:]: blank characters, i.e. space and tab.\n\n[:space:]: space characters: tab, newline, vertical tab, form feed, carriage return, space.\n\\s: space, .\n\n\\S: not space.\n\n[:punct:]: punctuation characters, ! ” # $ % & ’ ( ) * + , - . / : ; &lt; = &gt; ? @ [  ] ^ _ ` { | } ~.\n[:graph:]: graphical (human readable) characters: equivalent to [[:alnum:][:punct:]].\n[:print:]: printable characters, equivalent to [[:alnum:][:punct:]\\\\s]."
  },
  {
    "objectID": "slides/2024-10-01-regex.html#case-insenstive",
    "href": "slides/2024-10-01-regex.html#case-insenstive",
    "title": "Regular Expressions",
    "section": "Case insenstive",
    "text": "Case insenstive\n\nMatch only the word meter in “The cemetery is 1 meter from the stop sign.” Also match Meter in “The cemetery is 1 Meter from the stop sign.”"
  },
  {
    "objectID": "slides/2024-10-01-regex.html#case-insenstive-1",
    "href": "slides/2024-10-01-regex.html#case-insenstive-1",
    "title": "Regular Expressions",
    "section": "Case insenstive",
    "text": "Case insenstive\n\nMatch only the word meter in “The cemetery is 1 meter from the stop sign.” Also match Meter in “The cemetery is 1 Meter from the stop sign.”\n\n\nstring &lt;- c(\"The cemetery is 1 meter from the stop sign.\", \n            \"The cemetery is 1 Meter from the stop sign.\")\n\nstr_extract(string, \"(?i)\\\\bmeter\\\\b\")\n\n[1] \"meter\" \"Meter\""
  },
  {
    "objectID": "slides/2024-10-01-regex.html#proper-times-and-dates",
    "href": "slides/2024-10-01-regex.html#proper-times-and-dates",
    "title": "Regular Expressions",
    "section": "Proper times and dates",
    "text": "Proper times and dates\n\nMatch dates like 01/15/24 and also like 01.15.24 and like 01-15-24.\n\n\nstring &lt;- c(\"01/15/24\", \"01.15.24\", \"01-15-24\", \"011524\", \n            \"January 15, 2024\")"
  },
  {
    "objectID": "slides/2024-10-01-regex.html#proper-times-and-dates-1",
    "href": "slides/2024-10-01-regex.html#proper-times-and-dates-1",
    "title": "Regular Expressions",
    "section": "Proper times and dates",
    "text": "Proper times and dates\n\nMatch dates like 01/15/24 and also like 01.15.24 and like 01-15-24.\n\n\nstring &lt;- c(\"01/15/24\", \"01.15.24\", \"01-15-24\", \"01 15 24\", \n            \"011524\", \"January 15, 2024\")\n\nstr_extract(string, \"\\\\d\\\\d.\\\\d\\\\d.\\\\d\\\\d\")\n\n[1] \"01/15/24\" \"01.15.24\" \"01-15-24\" \"01 15 24\" NA         NA        \n\nstr_extract(string, \"\\\\d\\\\d[/.\\\\-]\\\\d\\\\d[/.\\\\-]\\\\d\\\\d\")\n\n[1] \"01/15/24\" \"01.15.24\" \"01-15-24\" NA         NA         NA        \n\nstr_extract(string, \"\\\\d{2}[/.\\\\-]\\\\d{2}[/.\\\\-]\\\\d{2}\")\n\n[1] \"01/15/24\" \"01.15.24\" \"01-15-24\" NA         NA         NA"
  },
  {
    "objectID": "slides/2024-10-01-regex.html#proper-times-and-dates-2",
    "href": "slides/2024-10-01-regex.html#proper-times-and-dates-2",
    "title": "Regular Expressions",
    "section": "Proper times and dates",
    "text": "Proper times and dates\n\nMatch a time of day such as “9:17 am” or “12:30 pm”. Require that the time be a valid time (not “99:99 pm”). Assume no leading zeros (i.e., “09:17 am”).\n\n\nstring &lt;- c(\"9:17 am\", \"12:30 pm\", \"99:99 pm\", \"09:17 am\")"
  },
  {
    "objectID": "slides/2024-10-01-regex.html#proper-times-and-dates-3",
    "href": "slides/2024-10-01-regex.html#proper-times-and-dates-3",
    "title": "Regular Expressions",
    "section": "Proper times and dates",
    "text": "Proper times and dates\n\nMatch a time of day such as “9:17 am” or “12:30 pm”. Require that the time be a valid time (not “99:99 pm”). Assume no leading zeros (i.e., “09:17 am”).\n\n^(1[012]|[1-9]):[0-5][0-9] (am|pm)$\n\nstring &lt;- c(\"9:17 am\", \"12:30 pm\", \"99:99 pm\", \"09:17 am\")\n\nstr_extract(string, \"(1[012]|[1-9]):[0-5][0-9] (am|pm)\")\n\n[1] \"9:17 am\"  \"12:30 pm\" NA         \"9:17 am\" \n\nstr_extract(string, \"^(1[012]|[1-9]):[0-5][0-9] (am|pm)$\")\n\n[1] \"9:17 am\"  \"12:30 pm\" NA         NA"
  },
  {
    "objectID": "slides/2024-10-01-regex.html#alternation-operator",
    "href": "slides/2024-10-01-regex.html#alternation-operator",
    "title": "Regular Expressions",
    "section": "Alternation operator",
    "text": "Alternation operator\nThe “or” operator, | has the lowest precedence and parentheses have the highest precedence, which means that parentheses get evaluated before “or”.\n\nWhat is the difference between \\bMary|Jane|Sue\\b and \\b(Mary|Jane|Sue)\\b?\n\n\nstring &lt;- c(\"Mary\", \"Mar\", \"Janet\", \"jane\", \"Susan\", \"Sue\")\n\nstr_extract(string, \"\\\\bMary|Jane|Sue\\\\b\")\nstr_extract(string, \"\\\\b(Mary|Jane|Sue)\\\\b\")"
  },
  {
    "objectID": "slides/2024-10-01-regex.html#alternation-operator-1",
    "href": "slides/2024-10-01-regex.html#alternation-operator-1",
    "title": "Regular Expressions",
    "section": "Alternation operator",
    "text": "Alternation operator\nThe “or” operator, | has the lowest precedence and parentheses have the highest precedence, which means that parentheses get evaluated before “or”.\n\nWhat is the difference between \\bMary|Jane|Sue\\b and \\b(Mary|Jane|Sue)\\b?\n\n\nstring &lt;- c(\"Mary\", \"Mar\", \"Janet\", \"jane\", \"Susan\", \"Sue\")\n\nstr_extract(string, \"\\\\bMary|Jane|Sue\\\\b\")\n\n[1] \"Mary\" NA     \"Jane\" NA     NA     \"Sue\" \n\nstr_extract(string, \"\\\\b(Mary|Jane|Sue)\\\\b\")\n\n[1] \"Mary\" NA     NA     NA     NA     \"Sue\""
  },
  {
    "objectID": "slides/2024-10-01-regex.html#lookaround",
    "href": "slides/2024-10-01-regex.html#lookaround",
    "title": "Regular Expressions",
    "section": "Lookaround",
    "text": "Lookaround\nA lookaround specifies a place in the regular expression that will anchor the string you’d like to match.\n\n“x(?=y)” – positive lookahead (matches ‘x’ when it is followed by ‘y’)\n“x(?!y)” – negative lookahead (matches ‘x’ when it is not followed by ‘y’)\n“(?&lt;=y)x” – positive lookbehind (matches ‘x’ when it is preceded by ‘y’)\n“(?&lt;!y)x” – negative lookbehind (matches ‘x’ when it is not preceded by ‘y’)"
  },
  {
    "objectID": "slides/2024-10-01-regex.html#lookaround-1",
    "href": "slides/2024-10-01-regex.html#lookaround-1",
    "title": "Regular Expressions",
    "section": "Lookaround",
    "text": "Lookaround\n\n\nFigure 1: Image credit: Stefan Judis https://www.stefanjudis.com/blog/a-regular-expression-lookahead-lookbehind-cheat-sheet/"
  },
  {
    "objectID": "slides/2024-10-01-regex.html#example---taskmaster",
    "href": "slides/2024-10-01-regex.html#example---taskmaster",
    "title": "Regular Expressions",
    "section": "Example - Taskmaster",
    "text": "Example - Taskmaster\nData scraped from the wiki site for the TV series, Taskmaster.\n\n\nFigure 2: Taskmaster Wiki https://taskmaster.fandom.com/wiki/Series_11"
  },
  {
    "objectID": "slides/2024-10-01-regex.html#scraping-and-wrangling-taskmaster",
    "href": "slides/2024-10-01-regex.html#scraping-and-wrangling-taskmaster",
    "title": "Regular Expressions",
    "section": "Scraping and wrangling Taskmaster",
    "text": "Scraping and wrangling Taskmaster\nGoal: to scrape the Taskmaster wiki into a dataframe including task, description, episode, episode name, air date, contestant, score, and series.1\n\nresults &lt;- read_html(\"https://taskmaster.fandom.com/wiki/Series_11\") |&gt;\n  html_element(\".tmtable\") |&gt; \n  html_table() |&gt;\n  mutate(episode = ifelse(startsWith(Task, \"Episode\"), Task, NA)) |&gt;\n  fill(episode, .direction = \"down\") |&gt;\n  filter(!startsWith(Task, \"Episode\"), \n         !(Task %in% c(\"Total\", \"Grand Total\"))) |&gt;\n  pivot_longer(cols = -c(Task, Description, episode),\n               names_to = \"contestant\",\n               values_to = \"score\") |&gt;\n  mutate(series = 11)\n\nThanks to Ciaran Evans at Wake Forest University for example and code, https://sta279-f23.github.io/"
  },
  {
    "objectID": "slides/2024-10-01-regex.html#scraping-and-wrangling-taskmaster-data---results",
    "href": "slides/2024-10-01-regex.html#scraping-and-wrangling-taskmaster-data---results",
    "title": "Regular Expressions",
    "section": "Scraping and wrangling Taskmaster data - results",
    "text": "Scraping and wrangling Taskmaster data - results\n\nresults |&gt; \n  select(Task, Description, episode, contestant, score, series) |&gt;\n  head(10)\n\n# A tibble: 10 × 6\n   Task  Description                             episode contestant score series\n   &lt;chr&gt; &lt;chr&gt;                                   &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;  &lt;dbl&gt;\n 1 1     Prize: Best thing you can carry, but o… Episod… Charlotte… 1         11\n 2 1     Prize: Best thing you can carry, but o… Episod… Jamali Ma… 2         11\n 3 1     Prize: Best thing you can carry, but o… Episod… Lee Mack   4         11\n 4 1     Prize: Best thing you can carry, but o… Episod… Mike Wozn… 5         11\n 5 1     Prize: Best thing you can carry, but o… Episod… Sarah Ken… 3         11\n 6 2     Do the most impressive thing under the… Episod… Charlotte… 2         11\n 7 2     Do the most impressive thing under the… Episod… Jamali Ma… 3[1]      11\n 8 2     Do the most impressive thing under the… Episod… Lee Mack   3         11\n 9 2     Do the most impressive thing under the… Episod… Mike Wozn… 5         11\n10 2     Do the most impressive thing under the… Episod… Sarah Ken… 4         11"
  },
  {
    "objectID": "slides/2024-10-01-regex.html#more-succinct-results",
    "href": "slides/2024-10-01-regex.html#more-succinct-results",
    "title": "Regular Expressions",
    "section": "more succinct results",
    "text": "more succinct results\n\n   Task  Description         episode   contestant score series\n  1     Prize: Best thing…  Episode 1… Charlotte… 1         11\n  1     Prize: Best thing…  Episode 1… Jamali Ma… 2         11\n  1     Prize: Best thing…  Episode 1… Lee Mack   4         11\n  1     Prize: Best thing…  Episode 1… Mike Wozn… 5         11\n  1     Prize: Best thing…  Episode 1… Sarah Ken… 3         11\n  2     Do the most…        Episode 1… Charlotte… 2         11\n  2     Do the most…        Episode 1… Jamali Ma… 3[1]      11\n  2     Do the most…        Episode 1… Lee Mack   3         11\n  2     Do the most…        Episode 1… Mike Wozn… 5         11\n  2     Do the most…        Episode 1… Sarah Ken… 4         11\n\nCurrently, the episode column contains entries like\n\n\"Episode 1: It's not your fault. (18 March 2021)\""
  },
  {
    "objectID": "slides/2024-10-01-regex.html#cleaning-the-score-column",
    "href": "slides/2024-10-01-regex.html#cleaning-the-score-column",
    "title": "Regular Expressions",
    "section": "Cleaning the score column",
    "text": "Cleaning the score column\n\nresults |&gt; select(score) |&gt; table()\n\nscore\n   –    ✔    ✘    0    1    2    3 3[1] 3[2]    4 4[2]    5   DQ \n   7    1    1   11   37   42   48    1    3   50    1   55   13 \n\n\nHow should the scores be stored? What is the cleaning task?\n\n\nFigure 3: Taskmaster Wiki https://taskmaster.fandom.com/wiki/Series_11"
  },
  {
    "objectID": "slides/2024-10-01-regex.html#extracting-numeric-information",
    "href": "slides/2024-10-01-regex.html#extracting-numeric-information",
    "title": "Regular Expressions",
    "section": "Extracting numeric information",
    "text": "Extracting numeric information\nSuppose we have the following string:\n\n\"3[1]\"\n\nAnd we want to extract just the number “3”:\n\nstr_extract(\"3[1]\", \"3\")\n\n[1] \"3\""
  },
  {
    "objectID": "slides/2024-10-01-regex.html#extracting-numeric-information-1",
    "href": "slides/2024-10-01-regex.html#extracting-numeric-information-1",
    "title": "Regular Expressions",
    "section": "Extracting numeric information",
    "text": "Extracting numeric information\nWhat if we don’t know which number to extract?\n\nstr_extract(\"3[1]\", \"\\\\d\")\n\n[1] \"3\"\n\n\n\nstr_extract(\"4[1]\", \"\\\\d\")\n\n[1] \"4\"\n\n\n\nstr_extract(\"10[1]\", \"\\\\d\")\n\n[1] \"1\"\n\n\n\nstr_extract(\"10[1]\", \"\\\\d+\")\n\n[1] \"10\"\n\n\n\nstr_extract(\"DQ\", \"\\\\d\")\n\n[1] NA"
  },
  {
    "objectID": "slides/2024-10-01-regex.html#str_extract",
    "href": "slides/2024-10-01-regex.html#str_extract",
    "title": "Regular Expressions",
    "section": "str_extract()",
    "text": "str_extract()\nstr_extract() is an R function in the stringr package which can find regular expressions in strings of text.\n\nstr_extract(\"My cat is 3 years old\", \"cat\")\n\n[1] \"cat\"\n\n\n\nstr_extract(\"My cat is 3 years old\", \"3\")\n\n[1] \"3\""
  },
  {
    "objectID": "slides/2024-10-01-regex.html#matching-multiple-options",
    "href": "slides/2024-10-01-regex.html#matching-multiple-options",
    "title": "Regular Expressions",
    "section": "Matching multiple options",
    "text": "Matching multiple options\nstr_extract() returns the first match; str_extract_all() allows more than one match.\n\nstr_extract(\"My cat is 3 years old\", \"cat|dog\")\n\n[1] \"cat\"\n\nstr_extract(\"My dog is 10 years old\", \"cat|dog\")\n\n[1] \"dog\"\n\nstr_extract(\"My dog is 10 years old, my cat is 3 years old\", \n            \"cat|dog\")\n\n[1] \"dog\"\n\nstr_extract_all(\"My dog is 10 years old, my cat is 3 years old\", \n                \"cat|dog\")\n\n[[1]]\n[1] \"dog\" \"cat\""
  },
  {
    "objectID": "slides/2024-10-01-regex.html#matching-groups-of-characters",
    "href": "slides/2024-10-01-regex.html#matching-groups-of-characters",
    "title": "Regular Expressions",
    "section": "Matching groups of characters",
    "text": "Matching groups of characters\nWhat if I want to extract a number?\n\nstr_extract(\"My cat is 3 years old\", \"\\\\d\")\n\n[1] \"3\"\n\n\nWhat will the result be for the following code?\n\nstr_extract(\"My dog is 10 years old\", \"\\\\d\")"
  },
  {
    "objectID": "slides/2024-10-01-regex.html#matching-groups-of-characters-1",
    "href": "slides/2024-10-01-regex.html#matching-groups-of-characters-1",
    "title": "Regular Expressions",
    "section": "Matching groups of characters",
    "text": "Matching groups of characters\nWhat if I want to extract a number?\n\nstr_extract(\"My cat is 3 years old\", \"\\\\d\")\n\n[1] \"3\"\n\n\nWhat will the result be for the following code?\n\nstr_extract(\"My dog is 10 years old\", \"\\\\d\")\n\n[1] \"1\""
  },
  {
    "objectID": "slides/2024-10-01-regex.html#matching-groups-of-characters-2",
    "href": "slides/2024-10-01-regex.html#matching-groups-of-characters-2",
    "title": "Regular Expressions",
    "section": "Matching groups of characters",
    "text": "Matching groups of characters\nWhat if I want to extract a number?\n\nstr_extract(\"My cat is 3 years old\", \"\\\\d\")\n\n[1] \"3\"\n\n\nWhat will the result be for the following code?\n\nstr_extract(\"My dog is 10 years old\", \"\\\\d\")\n\n[1] \"1\"\n\n\nThe + symbol in a regular expression means “repeated one or more times”\n\nstr_extract(\"My dog is 10 years old\", \"\\\\d+\")\n\n[1] \"10\""
  },
  {
    "objectID": "slides/2024-10-01-regex.html#extracting-from-multiple-strings",
    "href": "slides/2024-10-01-regex.html#extracting-from-multiple-strings",
    "title": "Regular Expressions",
    "section": "Extracting from multiple strings",
    "text": "Extracting from multiple strings\n\nstrings &lt;- c(\"My cat is 3 years old\", \"My dog is 10 years old\")\nstr_extract(strings, \"\\\\d+\")\n\n[1] \"3\"  \"10\""
  },
  {
    "objectID": "slides/2024-10-01-regex.html#extracting-from-multiple-strings-1",
    "href": "slides/2024-10-01-regex.html#extracting-from-multiple-strings-1",
    "title": "Regular Expressions",
    "section": "Extracting from multiple strings",
    "text": "Extracting from multiple strings\nWhat if we have multiple instances across multiple strings? We need to be careful working with lists (instead of vectors).\n\nstrings &lt;- c(\"My cat is 3 years old\", \"My dog is 10 years old\")\nstr_extract(strings, \"\\\\w+\")\n\n[1] \"My\" \"My\"\n\nstr_extract_all(strings, \"\\\\w+\")\n\n[[1]]\n[1] \"My\"    \"cat\"   \"is\"    \"3\"     \"years\" \"old\"  \n\n[[2]]\n[1] \"My\"    \"dog\"   \"is\"    \"10\"    \"years\" \"old\""
  },
  {
    "objectID": "slides/2024-10-01-regex.html#extracting-episode-information",
    "href": "slides/2024-10-01-regex.html#extracting-episode-information",
    "title": "Regular Expressions",
    "section": "Extracting episode information",
    "text": "Extracting episode information\nCurrently, the episode column contains entries like:\n\n\"Episode 2: The pie whisperer. (4 August 2015)\"\n\nHow would I extract just the episode number?"
  },
  {
    "objectID": "slides/2024-10-01-regex.html#extracting-episode-information-1",
    "href": "slides/2024-10-01-regex.html#extracting-episode-information-1",
    "title": "Regular Expressions",
    "section": "Extracting episode information",
    "text": "Extracting episode information\nCurrently, the episode column contains entries like:\n\n\"Episode 2: The pie whisperer. (4 August 2015)\"\n\nHow would I extract just the episode number?\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \"\\\\d+\")\n\n[1] \"2\""
  },
  {
    "objectID": "slides/2024-10-01-regex.html#extracting-episode-information-2",
    "href": "slides/2024-10-01-regex.html#extracting-episode-information-2",
    "title": "Regular Expressions",
    "section": "Extracting episode information",
    "text": "Extracting episode information\nCurrently, the episode column contains entries like:\n\n\"Episode 2: The pie whisperer. (4 August 2015)\"\n\nHow would I extract the episode name?\nGoal: find a pattern to match: anything that starts with a :, ends with a .\nLet’s break down that task into pieces."
  },
  {
    "objectID": "slides/2024-10-01-regex.html#extracting-episode-information-3",
    "href": "slides/2024-10-01-regex.html#extracting-episode-information-3",
    "title": "Regular Expressions",
    "section": "Extracting episode information",
    "text": "Extracting episode information\nHow can we find the period at the end of the sentence? What does each of these lines of code return?\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \".\")\n\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \".+\")\n\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \"\\\\.\")"
  },
  {
    "objectID": "slides/2024-10-01-regex.html#extracting-episode-information---solution",
    "href": "slides/2024-10-01-regex.html#extracting-episode-information---solution",
    "title": "Regular Expressions",
    "section": "Extracting episode information - solution",
    "text": "Extracting episode information - solution\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \".\")\n\n[1] \"E\"\n\n\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \".+\")\n\n[1] \"Episode 2: The pie whisperer. (4 August 2015)\"\n\n\nWe use an escape character when we actually want to choose a period:\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \"\\\\.\")\n\n[1] \".\""
  },
  {
    "objectID": "slides/2024-10-01-regex.html#extracting-episode-information-4",
    "href": "slides/2024-10-01-regex.html#extracting-episode-information-4",
    "title": "Regular Expressions",
    "section": "Extracting episode information",
    "text": "Extracting episode information\nGoal: find a pattern to match: anything that starts with a :, ends with a .\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\",\n            \":.+\\\\.\")\n\n[1] \": The pie whisperer.\""
  },
  {
    "objectID": "slides/2024-10-01-regex.html#lookaround-again",
    "href": "slides/2024-10-01-regex.html#lookaround-again",
    "title": "Regular Expressions",
    "section": "Lookaround (again)",
    "text": "Lookaround (again)\n\n\nFigure 4: Image credit: Stefan Judis https://www.stefanjudis.com/blog/a-regular-expression-lookahead-lookbehind-cheat-sheet/"
  },
  {
    "objectID": "slides/2024-10-01-regex.html#lookbehinds",
    "href": "slides/2024-10-01-regex.html#lookbehinds",
    "title": "Regular Expressions",
    "section": "Lookbehinds",
    "text": "Lookbehinds\n(?&lt;=) is a positive lookbehind. It is used to identify expressions which are preceded by a particular expression.\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \n            \"(?&lt;=: ).+\")\n\n[1] \"The pie whisperer. (4 August 2015)\"\n\n\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \n            \"(?&lt;=\\\\. ).+\")\n\n[1] \"(4 August 2015)\""
  },
  {
    "objectID": "slides/2024-10-01-regex.html#lookaheads",
    "href": "slides/2024-10-01-regex.html#lookaheads",
    "title": "Regular Expressions",
    "section": "Lookaheads",
    "text": "Lookaheads\n(?=) is a positive lookahead. It is used to identify expressions which are followed by a particular expression.\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \n            \".+(?=\\\\.)\")\n\n[1] \"Episode 2: The pie whisperer\"\n\n\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \n            \".+(?=:)\")\n\n[1] \"Episode 2\""
  },
  {
    "objectID": "slides/2024-10-01-regex.html#extracting-episode-information-5",
    "href": "slides/2024-10-01-regex.html#extracting-episode-information-5",
    "title": "Regular Expressions",
    "section": "Extracting episode information",
    "text": "Extracting episode information\nGetting everything between the : and the .\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \n            \"(?&lt;=: ).+(?=\\\\.)\")\n\n[1] \"The pie whisperer\""
  },
  {
    "objectID": "slides/2024-10-01-regex.html#extracting-air-date",
    "href": "slides/2024-10-01-regex.html#extracting-air-date",
    "title": "Regular Expressions",
    "section": "Extracting air date",
    "text": "Extracting air date\nI want to extract just the air date. What pattern do I want to match?\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", ...)"
  },
  {
    "objectID": "slides/2024-10-01-regex.html#extracting-air-date-1",
    "href": "slides/2024-10-01-regex.html#extracting-air-date-1",
    "title": "Regular Expressions",
    "section": "Extracting air date",
    "text": "Extracting air date\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \n            \"(?&lt;=\\\\().+(?=\\\\))\")\n\n[1] \"4 August 2015\""
  },
  {
    "objectID": "slides/2024-10-01-regex.html#wrangling-the-episode-info",
    "href": "slides/2024-10-01-regex.html#wrangling-the-episode-info",
    "title": "Regular Expressions",
    "section": "Wrangling the episode info",
    "text": "Wrangling the episode info\nCurrently:\n\n\n# A tibble: 270 × 1\n   episode                                        \n   &lt;chr&gt;                                          \n 1 Episode 1: It's not your fault. (18 March 2021)\n 2 Episode 1: It's not your fault. (18 March 2021)\n 3 Episode 1: It's not your fault. (18 March 2021)\n 4 Episode 1: It's not your fault. (18 March 2021)\n 5 Episode 1: It's not your fault. (18 March 2021)\n 6 Episode 1: It's not your fault. (18 March 2021)\n 7 Episode 1: It's not your fault. (18 March 2021)\n 8 Episode 1: It's not your fault. (18 March 2021)\n 9 Episode 1: It's not your fault. (18 March 2021)\n10 Episode 1: It's not your fault. (18 March 2021)\n# ℹ 260 more rows"
  },
  {
    "objectID": "slides/2024-10-01-regex.html#wrangling-the-episode-info-1",
    "href": "slides/2024-10-01-regex.html#wrangling-the-episode-info-1",
    "title": "Regular Expressions",
    "section": "Wrangling the episode info",
    "text": "Wrangling the episode info\nOne option:\n\nresults |&gt;\n  select(episode) |&gt;\n  mutate(episode_name = str_extract(episode, \"(?&lt;=: ).+(?=\\\\.)\"),\n         air_date = str_extract(episode, \"(?&lt;=\\\\().+(?=\\\\))\"),\n         episode = str_extract(episode, \"\\\\d+\"))\n\n# A tibble: 270 × 3\n   episode episode_name        air_date     \n   &lt;chr&gt;   &lt;chr&gt;               &lt;chr&gt;        \n 1 1       It's not your fault 18 March 2021\n 2 1       It's not your fault 18 March 2021\n 3 1       It's not your fault 18 March 2021\n 4 1       It's not your fault 18 March 2021\n 5 1       It's not your fault 18 March 2021\n 6 1       It's not your fault 18 March 2021\n 7 1       It's not your fault 18 March 2021\n 8 1       It's not your fault 18 March 2021\n 9 1       It's not your fault 18 March 2021\n10 1       It's not your fault 18 March 2021\n# ℹ 260 more rows"
  },
  {
    "objectID": "slides/2024-10-01-regex.html#wrangling-the-episode-info-2",
    "href": "slides/2024-10-01-regex.html#wrangling-the-episode-info-2",
    "title": "Regular Expressions",
    "section": "Wrangling the episode info",
    "text": "Wrangling the episode info\nAnother option:\n\nresults |&gt;\n  separate_wider_regex(episode, \n                       patterns = c(\".+ \", \n                                    episode = \"\\\\d+\", \n                                    \": \", \n                                    episode_name = \".+\", \n                                    \"\\\\. \\\\(\", \n                                    air_date = \".+\", \n                                    \"\\\\)\"))\n\n\n\n# A tibble: 270 × 3\n   episode episode_name        air_date     \n   &lt;chr&gt;   &lt;chr&gt;               &lt;chr&gt;        \n 1 1       It's not your fault 18 March 2021\n 2 1       It's not your fault 18 March 2021\n 3 1       It's not your fault 18 March 2021\n 4 1       It's not your fault 18 March 2021\n 5 1       It's not your fault 18 March 2021\n 6 1       It's not your fault 18 March 2021\n 7 1       It's not your fault 18 March 2021\n 8 1       It's not your fault 18 March 2021\n 9 1       It's not your fault 18 March 2021\n10 1       It's not your fault 18 March 2021\n# ℹ 260 more rows"
  },
  {
    "objectID": "slides/2024-09-30-regex.html#regular-expressions",
    "href": "slides/2024-09-30-regex.html#regular-expressions",
    "title": "Regular Expressions",
    "section": "Regular Expressions",
    "text": "Regular Expressions\n\nA regular expression … is a sequence of characters that define a search pattern. Usually such patterns are used by string searching algorithms for “find” or “find and replace” operations on strings, or for input validation. It is a technique developed in theoretical computer science and formal language theory."
  },
  {
    "objectID": "slides/2024-09-30-regex.html#escape-sequences",
    "href": "slides/2024-09-30-regex.html#escape-sequences",
    "title": "Regular Expressions",
    "section": "Escape sequences",
    "text": "Escape sequences\nJust to scratch the surface, here are a few special characters that cannot be directly coded. Therefore, they are escaped with a backslash, \\.\n\n\\': single quote.\n\n\\\": double quote.\n\n\\n: new line.\n\n\\r: carriage return.\n\n\\t: tab character."
  },
  {
    "objectID": "slides/2024-09-30-regex.html#quantifiers",
    "href": "slides/2024-09-30-regex.html#quantifiers",
    "title": "Regular Expressions",
    "section": "Quantifiers",
    "text": "Quantifiers\nQuantifiers specify how many repetitions of the pattern.\n\n*: matches at least 0 times.\n\n+: matches at least 1 times.\n\n?: matches at most 1 times.\n\n{n}: matches exactly n times.\n\n{n,}: matches at least n times.\n\n{n,m}: matches between n and m times."
  },
  {
    "objectID": "slides/2024-09-30-regex.html#examples-of-quantifiers",
    "href": "slides/2024-09-30-regex.html#examples-of-quantifiers",
    "title": "Regular Expressions",
    "section": "Examples of quantifiers",
    "text": "Examples of quantifiers\n\nstrings &lt;- c(\"a\", \"ab\", \"acb\", \"accb\", \"acccb\", \"accccb\")\nstr_subset(strings, \"ac*b\") \nstr_subset(strings, \"ac+b\") \nstr_subset(strings, \"ac*b\", negate = TRUE)\nstr_subset(strings, \"ac?b\") \nstr_subset(strings, \"ac{2}b\") \nstr_subset(strings, \"ac{2,}b\") \nstr_subset(strings, \"ac{2,3}b\")"
  },
  {
    "objectID": "slides/2024-09-30-regex.html#examples-of-quantifiers---solution",
    "href": "slides/2024-09-30-regex.html#examples-of-quantifiers---solution",
    "title": "Regular Expressions",
    "section": "Examples of quantifiers - solution",
    "text": "Examples of quantifiers - solution\n\nstrings &lt;- c(\"a\", \"ab\", \"acb\", \"accb\", \"acccb\", \"accccb\")\nstr_subset(strings, \"ac*b\") \n\n[1] \"ab\"     \"acb\"    \"accb\"   \"acccb\"  \"accccb\"\n\nstr_subset(strings, \"ac+b\") \n\n[1] \"acb\"    \"accb\"   \"acccb\"  \"accccb\"\n\nstr_subset(strings, \"ac*b\", negate = TRUE)\n\n[1] \"a\"\n\nstr_subset(strings, \"ac?b\") \n\n[1] \"ab\"  \"acb\"\n\nstr_subset(strings, \"ac{2}b\") \n\n[1] \"accb\"\n\nstr_subset(strings, \"ac{2,}b\") \n\n[1] \"accb\"   \"acccb\"  \"accccb\"\n\nstr_subset(strings, \"ac{2,3}b\")\n\n[1] \"accb\"  \"acccb\""
  },
  {
    "objectID": "slides/2024-09-30-regex.html#position-of-pattern-within-the-string",
    "href": "slides/2024-09-30-regex.html#position-of-pattern-within-the-string",
    "title": "Regular Expressions",
    "section": "Position of pattern within the string",
    "text": "Position of pattern within the string\n\n^: matches the start of the string.\n\n$: matches the end of the string.\n\n\\b: matches the boundary of a word. Don’t confuse it with ^ $ which marks the edge of a string.1\n\n\\B: matches the empty string provided it is not at an edge of a word.\n\nA word boundary is a position between a word character (typically [A-Za-z0-9_]) and a non-word character (anything that is not a word character, such as whitespace, punctuation, etc.)."
  },
  {
    "objectID": "slides/2024-09-30-regex.html#examples-of-positions",
    "href": "slides/2024-09-30-regex.html#examples-of-positions",
    "title": "Regular Expressions",
    "section": "Examples of positions",
    "text": "Examples of positions\n\nstrings &lt;- c(\"abcd\", \"cdab\", \"cabd\", \"c abd\")\nstr_subset(strings, \"ab\")\nstr_subset(strings, \"^ab\")\nstr_subset(strings, \"ab$\")\nstr_subset(strings, \"\\\\bab\")"
  },
  {
    "objectID": "slides/2024-09-30-regex.html#examples-of-positions---solution",
    "href": "slides/2024-09-30-regex.html#examples-of-positions---solution",
    "title": "Regular Expressions",
    "section": "Examples of positions - solution",
    "text": "Examples of positions - solution\n\nstrings &lt;- c(\"abcd\", \"cdab\", \"cabd\", \"c abd\")\nstr_subset(strings, \"ab\")\n\n[1] \"abcd\"  \"cdab\"  \"cabd\"  \"c abd\"\n\nstr_subset(strings, \"^ab\")\n\n[1] \"abcd\"\n\nstr_subset(strings, \"ab$\")\n\n[1] \"cdab\"\n\nstr_subset(strings, \"\\\\bab\")\n\n[1] \"abcd\"  \"c abd\""
  },
  {
    "objectID": "slides/2024-09-30-regex.html#operators",
    "href": "slides/2024-09-30-regex.html#operators",
    "title": "Regular Expressions",
    "section": "Operators",
    "text": "Operators\n\n.: matches any single character,\n[...]: a character list, matches any one of the characters inside the square brackets. A - inside the brackets specifies a range of characters.\n\n[^...]: an inverted character list, similar to [...], but matches any characters except those inside the square brackets.\n\n\\: suppress the special meaning of metacharacters in regular expression, i.e. $ * + . ? [ ] ^ { } | ( ) \\. Since \\ itself needs to be escaped in R, we need to escape metacharacters with double backslash like \\\\$.\n\n|: an “or” operator, matches patterns on either side of the |.\n\n(...): grouping in regular expressions. This allows you to retrieve the bits that matched various parts of your regular expression so you can alter them or use them for building up a new string.\nnote: both (ab|cde) or ab|cde match either the string ab or the string cde. However, ab | cde matches ab cde (and does not match either of ab or cde) because the “or” is now whitespace on either side of |."
  },
  {
    "objectID": "slides/2024-09-30-regex.html#examples-of-operators",
    "href": "slides/2024-09-30-regex.html#examples-of-operators",
    "title": "Regular Expressions",
    "section": "Examples of operators",
    "text": "Examples of operators\n\nstrings &lt;- c(\"^ab\", \"ab\", \"abc\", \"abd\", \"abe\", \"ab 12\", \"a|b\")\nstr_subset(strings, \"ab.\")\nstr_subset(strings, \"ab[c-e]\")\nstr_subset(strings, \"ab[^c]\")\nstr_subset(strings, \"^ab\")\nstr_subset(strings, \"\\\\^ab\")\nstr_subset(strings, \"abc|abd\")\nstr_subset(strings, \"a[b|c]\")\nstr_extract(strings, \"a[b|c]\")"
  },
  {
    "objectID": "slides/2024-09-30-regex.html#examples-of-operators---solution",
    "href": "slides/2024-09-30-regex.html#examples-of-operators---solution",
    "title": "Regular Expressions",
    "section": "Examples of operators - solution",
    "text": "Examples of operators - solution\n\nstrings &lt;- c(\"^ab\", \"ab\", \"abc\", \"abd\", \"abe\", \"ab 12\", \"a|b\")\nstr_subset(strings, \"ab.\")\n\n[1] \"abc\"   \"abd\"   \"abe\"   \"ab 12\"\n\nstr_subset(strings, \"ab[c-e]\")\n\n[1] \"abc\" \"abd\" \"abe\"\n\nstr_subset(strings, \"ab[^c]\")\n\n[1] \"abd\"   \"abe\"   \"ab 12\"\n\nstr_subset(strings, \"^ab\")\n\n[1] \"ab\"    \"abc\"   \"abd\"   \"abe\"   \"ab 12\"\n\nstr_subset(strings, \"\\\\^ab\")\n\n[1] \"^ab\"\n\nstr_subset(strings, \"abc|abd\")\n\n[1] \"abc\" \"abd\"\n\nstr_subset(strings, \"a[b|c]\")\n\n[1] \"^ab\"   \"ab\"    \"abc\"   \"abd\"   \"abe\"   \"ab 12\" \"a|b\"  \n\nstr_extract(strings, \"a[b|c]\")\n\n[1] \"ab\" \"ab\" \"ab\" \"ab\" \"ab\" \"ab\" \"a|\""
  },
  {
    "objectID": "slides/2024-09-30-regex.html#character-classes",
    "href": "slides/2024-09-30-regex.html#character-classes",
    "title": "Regular Expressions",
    "section": "Character classes",
    "text": "Character classes\nCharacter classes allow specifying entire classes of characters, such as numbers, letters, etc. There are two flavors of character classes, one uses [: and :] around a predefined name inside square brackets and the other uses \\ and a special character. They are sometimes interchangeable.\n\n(?i) before the string indicates that the match should be case insensitive (will make the entire string case insensitive).\n[:digit:] or \\d: digits, 0 1 2 3 4 5 6 7 8 9, equivalent to [0-9].\n\n\\D: non-digits, equivalent to [^0-9].\n\n[:lower:]: lower-case letters, equivalent to [a-z].\n\n[:upper:]: upper-case letters, equivalent to [A-Z].\n\n[:alpha:]: alphabetic characters, equivalent to [[:lower:][:upper:]] or [A-z].\n\n[:alnum:]: alphanumeric characters, equivalent to [[:alpha:][:digit:]] or [A-z0-9].\n\n\\w: word characters, equivalent to [[:alnum:]_] or [A-z0-9_] (letter, number, or underscore).\n\n\\W: not word, equivalent to [^A-z0-9_].\n\n[:blank:]: blank characters, i.e. space and tab.\n\n[:space:]: space characters: tab, new line, vertical tab, form feed, carriage return, space.\n\\s: whitespace.\n\n\\S: not whitespace.\n\n[:punct:]: punctuation characters, ! ” # $ % & ’ ( ) * + , - . / : ; &lt; = &gt; ? @ [  ] ^ _ ` { | } ~.\n[:graph:]: graphical (human readable) characters: equivalent to [[:alnum:][:punct:]].\n[:print:]: printable characters, equivalent to [[:alnum:][:punct:]\\\\s]."
  },
  {
    "objectID": "slides/2024-09-30-regex.html#case-insenstive",
    "href": "slides/2024-09-30-regex.html#case-insenstive",
    "title": "Regular Expressions",
    "section": "Case insenstive",
    "text": "Case insenstive\n\nMatch only the word meter in “The cemetery is 1 meter from the stop sign.”\nAlso match Meter in “The cemetery is 1 Meter from the stop sign.”"
  },
  {
    "objectID": "slides/2024-09-30-regex.html#case-insenstive-1",
    "href": "slides/2024-09-30-regex.html#case-insenstive-1",
    "title": "Regular Expressions",
    "section": "Case insenstive",
    "text": "Case insenstive\n\nMatch only the word meter in “The cemetery is 1 meter from the stop sign.”\nAlso match Meter and meTer …\n\n\nstring &lt;- c(\"The cemetery is 1 meter from the stop sign.\", \n            \"The cemetery is 1 Meter from the stop sign.\",\n            \"The cemetery is 1 meTer from the stop sign.\")\n\nstr_extract(string, \"(?i)\\\\bmeter\\\\b\")\n\n[1] \"meter\" \"Meter\" \"meTer\""
  },
  {
    "objectID": "slides/2024-09-30-regex.html#proper-times-and-dates",
    "href": "slides/2024-09-30-regex.html#proper-times-and-dates",
    "title": "Regular Expressions",
    "section": "Proper times and dates",
    "text": "Proper times and dates\n\nMatch dates like 01/15/24 and also like 01.15.24 and like 01-15-24.\n\n\nstring &lt;- c(\"01/15/24\", \"01.15.24\", \"01-15-24\", \"011524\", \n            \"January 15, 2024\")"
  },
  {
    "objectID": "slides/2024-09-30-regex.html#proper-times-and-dates-1",
    "href": "slides/2024-09-30-regex.html#proper-times-and-dates-1",
    "title": "Regular Expressions",
    "section": "Proper times and dates",
    "text": "Proper times and dates\n\nMatch dates like 01/15/24 and also like 01.15.24 and like 01-15-24.\n\n\nstring &lt;- c(\"01/15/24\", \"01.15.24\", \"01-15-24\", \"01 15 24\", \n            \"011524\", \"January 15, 2024\")\n\nstr_extract(string, \"\\\\d\\\\d.\\\\d\\\\d.\\\\d\\\\d\")\n\n[1] \"01/15/24\" \"01.15.24\" \"01-15-24\" \"01 15 24\" NA         NA        \n\nstr_extract(string, \"\\\\d\\\\d[/.\\\\-]\\\\d\\\\d[/.\\\\-]\\\\d\\\\d\")\n\n[1] \"01/15/24\" \"01.15.24\" \"01-15-24\" NA         NA         NA        \n\nstr_extract(string, \"\\\\d{2}[/.\\\\-]\\\\d{2}[/.\\\\-]\\\\d{2}\")\n\n[1] \"01/15/24\" \"01.15.24\" \"01-15-24\" NA         NA         NA"
  },
  {
    "objectID": "slides/2024-09-30-regex.html#proper-times-and-dates-2",
    "href": "slides/2024-09-30-regex.html#proper-times-and-dates-2",
    "title": "Regular Expressions",
    "section": "Proper times and dates",
    "text": "Proper times and dates\n\nMatch a time of day such as “9:17 am” or “12:30 pm”. Require that the time be a valid time (not “99:99 pm”). Assume no leading zeros (i.e., “09:17 am”).\n\n\nstring &lt;- c(\"9:17 am\", \"12:30 pm\", \"99:99 pm\", \"09:17 am\")"
  },
  {
    "objectID": "slides/2024-09-30-regex.html#proper-times-and-dates-3",
    "href": "slides/2024-09-30-regex.html#proper-times-and-dates-3",
    "title": "Regular Expressions",
    "section": "Proper times and dates",
    "text": "Proper times and dates\n\nMatch a time of day such as “9:17 am” or “12:30 pm”. Require that the time be a valid time (not “99:99 pm”). Assume no leading zeros (i.e., “09:17 am”).\n\n^(1[012]|[1-9]):[0-5][0-9] (am|pm)$\n\nstring &lt;- c(\"9:17 am\", \"12:30 pm\", \"99:99 pm\", \"09:17 am\")\n\nstr_extract(string, \"(1[012]|[1-9]):[0-5][0-9] (am|pm)\")\n\n[1] \"9:17 am\"  \"12:30 pm\" NA         \"9:17 am\" \n\nstr_extract(string, \"^(1[012]|[1-9]):[0-5][0-9] (am|pm)$\")\n\n[1] \"9:17 am\"  \"12:30 pm\" NA         NA"
  },
  {
    "objectID": "slides/2024-09-30-regex.html#alternation-operator",
    "href": "slides/2024-09-30-regex.html#alternation-operator",
    "title": "Regular Expressions",
    "section": "Alternation operator",
    "text": "Alternation operator\nThe “or” operator, | has the lowest precedence and parentheses have the highest precedence, which means that parentheses get evaluated before “or”.\n\nWhat is the difference between \\bMary|Jane|Sue\\b and \\b(Mary|Jane|Sue)\\b?\n\n\nstring &lt;- c(\"Mary\", \"Mar\", \"Janet\", \"jane\", \"Susan\", \"Sue\")\n\nstr_extract(string, \"\\\\bMary|Jane|Sue\\\\b\")\nstr_extract(string, \"\\\\b(Mary|Jane|Sue)\\\\b\")"
  },
  {
    "objectID": "slides/2024-09-30-regex.html#alternation-operator-1",
    "href": "slides/2024-09-30-regex.html#alternation-operator-1",
    "title": "Regular Expressions",
    "section": "Alternation operator",
    "text": "Alternation operator\nThe “or” operator, | has the lowest precedence and parentheses have the highest precedence, which means that parentheses get evaluated before “or”.\n\nWhat is the difference between \\bMary|Jane|Sue\\b and \\b(Mary|Jane|Sue)\\b?\n\n\nstring &lt;- c(\"Mary\", \"Mar\", \"Janet\", \"jane\", \"Susan\", \"Sue\")\n\nstr_extract(string, \"\\\\bMary|Jane|Sue\\\\b\")\n\n[1] \"Mary\" NA     \"Jane\" NA     NA     \"Sue\" \n\nstr_extract(string, \"\\\\b(Mary|Jane|Sue)\\\\b\")\n\n[1] \"Mary\" NA     NA     NA     NA     \"Sue\""
  },
  {
    "objectID": "slides/2024-09-30-regex.html#lookaround",
    "href": "slides/2024-09-30-regex.html#lookaround",
    "title": "Regular Expressions",
    "section": "Lookaround",
    "text": "Lookaround\nA lookaround specifies a place in the regular expression that will anchor the string you’d like to match.\n\n“x(?=y)” – positive lookahead (matches ‘x’ when it is followed by ‘y’)\n“x(?!y)” – negative lookahead (matches ‘x’ when it is not followed by ‘y’)\n“(?&lt;=y)x” – positive lookbehind (matches ‘x’ when it is preceded by ‘y’)\n“(?&lt;!y)x” – negative lookbehind (matches ‘x’ when it is not preceded by ‘y’)"
  },
  {
    "objectID": "slides/2024-09-30-regex.html#lookaround-1",
    "href": "slides/2024-09-30-regex.html#lookaround-1",
    "title": "Regular Expressions",
    "section": "Lookaround",
    "text": "Lookaround\n\n\nFigure 1: Image credit: Stefan Judis https://www.stefanjudis.com/blog/a-regular-expression-lookahead-lookbehind-cheat-sheet/"
  },
  {
    "objectID": "slides/2024-09-30-regex.html#example---taskmaster",
    "href": "slides/2024-09-30-regex.html#example---taskmaster",
    "title": "Regular Expressions",
    "section": "Example - Taskmaster",
    "text": "Example - Taskmaster\nData scraped from the wiki site for the TV series, Taskmaster.\n\n\nFigure 2: Taskmaster Wiki https://taskmaster.fandom.com/wiki/Series_11"
  },
  {
    "objectID": "slides/2024-09-30-regex.html#scraping-and-wrangling-taskmaster",
    "href": "slides/2024-09-30-regex.html#scraping-and-wrangling-taskmaster",
    "title": "Regular Expressions",
    "section": "Scraping and wrangling Taskmaster",
    "text": "Scraping and wrangling Taskmaster\nGoal: to scrape the Taskmaster wiki into a data frame including task, description, episode, episode name, air date, contestant, score, and series.1\n\nresults &lt;- read_html(\"https://taskmaster.fandom.com/wiki/Series_11\") |&gt;\n  html_element(\".tmtable\") |&gt; \n  html_table() |&gt;\n  mutate(episode = ifelse(startsWith(Task, \"Episode\"), Task, NA)) |&gt;\n  fill(episode, .direction = \"down\") |&gt;\n  filter(!startsWith(Task, \"Episode\"), \n         !(Task %in% c(\"Total\", \"Grand Total\"))) |&gt;\n  pivot_longer(cols = -c(Task, Description, episode),\n               names_to = \"contestant\",\n               values_to = \"score\") |&gt;\n  mutate(series = 11)\n\nThanks to Ciaran Evans at Wake Forest University for example and code, https://sta279-f23.github.io/"
  },
  {
    "objectID": "slides/2024-09-30-regex.html#scraping-and-wrangling-taskmaster-data---results",
    "href": "slides/2024-09-30-regex.html#scraping-and-wrangling-taskmaster-data---results",
    "title": "Regular Expressions",
    "section": "Scraping and wrangling Taskmaster data - results",
    "text": "Scraping and wrangling Taskmaster data - results\n\nresults |&gt; \n  select(Task, Description, episode, contestant, score, series) |&gt;\n  head(10)\n\n# A tibble: 10 × 6\n   Task  Description                             episode contestant score series\n   &lt;chr&gt; &lt;chr&gt;                                   &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;  &lt;dbl&gt;\n 1 1     Prize: Best thing you can carry, but o… Episod… Charlotte… 1         11\n 2 1     Prize: Best thing you can carry, but o… Episod… Jamali Ma… 2         11\n 3 1     Prize: Best thing you can carry, but o… Episod… Lee Mack   4         11\n 4 1     Prize: Best thing you can carry, but o… Episod… Mike Wozn… 5         11\n 5 1     Prize: Best thing you can carry, but o… Episod… Sarah Ken… 3         11\n 6 2     Do the most impressive thing under the… Episod… Charlotte… 2         11\n 7 2     Do the most impressive thing under the… Episod… Jamali Ma… 3[1]      11\n 8 2     Do the most impressive thing under the… Episod… Lee Mack   3         11\n 9 2     Do the most impressive thing under the… Episod… Mike Wozn… 5         11\n10 2     Do the most impressive thing under the… Episod… Sarah Ken… 4         11"
  },
  {
    "objectID": "slides/2024-09-30-regex.html#more-succinct-results",
    "href": "slides/2024-09-30-regex.html#more-succinct-results",
    "title": "Regular Expressions",
    "section": "more succinct results",
    "text": "more succinct results\n\n   Task  Description         episode   contestant score series\n  1     Prize: Best thing…  Episode 1… Charlotte… 1         11\n  1     Prize: Best thing…  Episode 1… Jamali Ma… 2         11\n  1     Prize: Best thing…  Episode 1… Lee Mack   4         11\n  1     Prize: Best thing…  Episode 1… Mike Wozn… 5         11\n  1     Prize: Best thing…  Episode 1… Sarah Ken… 3         11\n  2     Do the most…        Episode 1… Charlotte… 2         11\n  2     Do the most…        Episode 1… Jamali Ma… 3[1]      11\n  2     Do the most…        Episode 1… Lee Mack   3         11\n  2     Do the most…        Episode 1… Mike Wozn… 5         11\n  2     Do the most…        Episode 1… Sarah Ken… 4         11\n\nCurrently, the episode column contains entries like\n\n\"Episode 1: It's not your fault. (18 March 2021)\""
  },
  {
    "objectID": "slides/2024-09-30-regex.html#cleaning-the-score-column",
    "href": "slides/2024-09-30-regex.html#cleaning-the-score-column",
    "title": "Regular Expressions",
    "section": "Cleaning the score column",
    "text": "Cleaning the score column\n\nresults |&gt; select(score) |&gt; table()\n\nscore\n   –    ✔    ✘    0    1    2    3 3[1] 3[2] 3[3]    4 4[2] 4[3]    5   DQ \n   7    1    1   11   37   42   47    1    3    1   49    1    1   55   13 \n\n\nHow should the scores be stored? What is the cleaning task?\n\n\nFigure 3: Taskmaster Wiki https://taskmaster.fandom.com/wiki/Series_11"
  },
  {
    "objectID": "slides/2024-09-30-regex.html#extracting-numeric-information",
    "href": "slides/2024-09-30-regex.html#extracting-numeric-information",
    "title": "Regular Expressions",
    "section": "Extracting numeric information",
    "text": "Extracting numeric information\nSuppose we have the following string:\n\n\"3[1]\"\n\nAnd we want to extract just the number “3”:\n\nstr_extract(\"3[1]\", \"3\")\n\n[1] \"3\""
  },
  {
    "objectID": "slides/2024-09-30-regex.html#extracting-numeric-information-1",
    "href": "slides/2024-09-30-regex.html#extracting-numeric-information-1",
    "title": "Regular Expressions",
    "section": "Extracting numeric information",
    "text": "Extracting numeric information\nWhat if we don’t know which number to extract?\n\nstr_extract(\"3[1]\", \"\\\\d\")\n\n[1] \"3\"\n\n\n\nstr_extract(\"4[1]\", \"\\\\d\")\n\n[1] \"4\"\n\n\n\nstr_extract(\"10[1]\", \"\\\\d\")\n\n[1] \"1\"\n\n\n\nstr_extract(\"10[1]\", \"\\\\d+\")\n\n[1] \"10\"\n\n\n\nstr_extract(\"DQ\", \"\\\\d\")\n\n[1] NA"
  },
  {
    "objectID": "slides/2024-09-30-regex.html#str_extract",
    "href": "slides/2024-09-30-regex.html#str_extract",
    "title": "Regular Expressions",
    "section": "str_extract()",
    "text": "str_extract()\nstr_extract() is an R function in the stringr package which can find regular expressions in strings of text.\n\nstr_extract(\"My cat is 3 years old\", \"cat\")\n\n[1] \"cat\"\n\n\n\nstr_extract(\"My cat is 3 years old\", \"3\")\n\n[1] \"3\""
  },
  {
    "objectID": "slides/2024-09-30-regex.html#matching-multiple-options",
    "href": "slides/2024-09-30-regex.html#matching-multiple-options",
    "title": "Regular Expressions",
    "section": "Matching multiple options",
    "text": "Matching multiple options\nstr_extract() returns the first match; str_extract_all() allows more than one match.\n\nstr_extract(\"My cat is 3 years old\", \"cat|dog\")\n\n[1] \"cat\"\n\nstr_extract(\"My dog is 10 years old\", \"cat|dog\")\n\n[1] \"dog\"\n\nstr_extract(\"My dog is 10 years old, my cat is 3 years old\", \n            \"cat|dog\")\n\n[1] \"dog\"\n\nstr_extract_all(\"My dog is 10 years old, my cat is 3 years old\", \n                \"cat|dog\")\n\n[[1]]\n[1] \"dog\" \"cat\""
  },
  {
    "objectID": "slides/2024-09-30-regex.html#matching-groups-of-characters",
    "href": "slides/2024-09-30-regex.html#matching-groups-of-characters",
    "title": "Regular Expressions",
    "section": "Matching groups of characters",
    "text": "Matching groups of characters\nWhat if I want to extract a number?\n\nstr_extract(\"My cat is 3 years old\", \"\\\\d\")\n\n[1] \"3\"\n\n\nWhat will the result be for the following code?\n\nstr_extract(\"My dog is 10 years old\", \"\\\\d\")"
  },
  {
    "objectID": "slides/2024-09-30-regex.html#matching-groups-of-characters-1",
    "href": "slides/2024-09-30-regex.html#matching-groups-of-characters-1",
    "title": "Regular Expressions",
    "section": "Matching groups of characters",
    "text": "Matching groups of characters\nWhat if I want to extract a number?\n\nstr_extract(\"My cat is 3 years old\", \"\\\\d\")\n\n[1] \"3\"\n\n\nWhat will the result be for the following code?\n\nstr_extract(\"My dog is 10 years old\", \"\\\\d\")\n\n[1] \"1\""
  },
  {
    "objectID": "slides/2024-09-30-regex.html#matching-groups-of-characters-2",
    "href": "slides/2024-09-30-regex.html#matching-groups-of-characters-2",
    "title": "Regular Expressions",
    "section": "Matching groups of characters",
    "text": "Matching groups of characters\nWhat if I want to extract a number?\n\nstr_extract(\"My cat is 3 years old\", \"\\\\d\")\n\n[1] \"3\"\n\n\nWhat will the result be for the following code?\n\nstr_extract(\"My dog is 10 years old\", \"\\\\d\")\n\n[1] \"1\"\n\n\nThe + symbol in a regular expression means “repeated one or more times”\n\nstr_extract(\"My dog is 10 years old\", \"\\\\d+\")\n\n[1] \"10\""
  },
  {
    "objectID": "slides/2024-09-30-regex.html#extracting-from-multiple-strings",
    "href": "slides/2024-09-30-regex.html#extracting-from-multiple-strings",
    "title": "Regular Expressions",
    "section": "Extracting from multiple strings",
    "text": "Extracting from multiple strings\n\nstrings &lt;- c(\"My cat is 3 years old\", \"My dog is 10 years old\")\nstr_extract(strings, \"\\\\d+\")\n\n[1] \"3\"  \"10\""
  },
  {
    "objectID": "slides/2024-09-30-regex.html#extracting-from-multiple-strings-1",
    "href": "slides/2024-09-30-regex.html#extracting-from-multiple-strings-1",
    "title": "Regular Expressions",
    "section": "Extracting from multiple strings",
    "text": "Extracting from multiple strings\nWhat if we have multiple instances across multiple strings? We need to be careful working with lists (instead of vectors).\n\nstrings &lt;- c(\"My cat is 3 years old\", \"My dog is 10 years old\")\nstr_extract(strings, \"\\\\w\")\nstr_extract_all(strings, \"\\\\w\")\nstr_extract(strings, \"\\\\w+\")\nstr_extract_all(strings, \"\\\\w+\")"
  },
  {
    "objectID": "slides/2024-09-30-regex.html#extracting-episode-information",
    "href": "slides/2024-09-30-regex.html#extracting-episode-information",
    "title": "Regular Expressions",
    "section": "Extracting episode information",
    "text": "Extracting episode information\nCurrently, the episode column contains entries like:\n\n\"Episode 2: The pie whisperer. (4 August 2015)\"\n\nHow would I extract just the episode number?"
  },
  {
    "objectID": "slides/2024-09-30-regex.html#extracting-episode-information-1",
    "href": "slides/2024-09-30-regex.html#extracting-episode-information-1",
    "title": "Regular Expressions",
    "section": "Extracting episode information",
    "text": "Extracting episode information\nCurrently, the episode column contains entries like:\n\n\"Episode 2: The pie whisperer. (4 August 2015)\"\n\nHow would I extract just the episode number?\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \"\\\\d+\")\n\n[1] \"2\""
  },
  {
    "objectID": "slides/2024-09-30-regex.html#extracting-episode-information-2",
    "href": "slides/2024-09-30-regex.html#extracting-episode-information-2",
    "title": "Regular Expressions",
    "section": "Extracting episode information",
    "text": "Extracting episode information\nCurrently, the episode column contains entries like:\n\n\"Episode 2: The pie whisperer. (4 August 2015)\"\n\nHow would I extract the episode name?\nGoal: find a pattern to match: anything that starts with a :, ends with a .\nLet’s break down that task into pieces."
  },
  {
    "objectID": "slides/2024-09-30-regex.html#extracting-episode-information-3",
    "href": "slides/2024-09-30-regex.html#extracting-episode-information-3",
    "title": "Regular Expressions",
    "section": "Extracting episode information",
    "text": "Extracting episode information\nHow can we find the period at the end of the sentence? What does each of these lines of code return?\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \".\")\n\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \".+\")\n\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \"\\\\.\")"
  },
  {
    "objectID": "slides/2024-09-30-regex.html#extracting-episode-information---solution",
    "href": "slides/2024-09-30-regex.html#extracting-episode-information---solution",
    "title": "Regular Expressions",
    "section": "Extracting episode information - solution",
    "text": "Extracting episode information - solution\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \".\")\n\n[1] \"E\"\n\n\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \".+\")\n\n[1] \"Episode 2: The pie whisperer. (4 August 2015)\"\n\n\nWe use an escape character when we actually want to choose a period:\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \"\\\\.\")\n\n[1] \".\""
  },
  {
    "objectID": "slides/2024-09-30-regex.html#extracting-episode-information-4",
    "href": "slides/2024-09-30-regex.html#extracting-episode-information-4",
    "title": "Regular Expressions",
    "section": "Extracting episode information",
    "text": "Extracting episode information\nGoal: find a pattern to match: anything that starts with a :, ends with a .\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\",\n            \":.+\\\\.\")\n\n[1] \": The pie whisperer.\""
  },
  {
    "objectID": "slides/2024-09-30-regex.html#lookaround-again",
    "href": "slides/2024-09-30-regex.html#lookaround-again",
    "title": "Regular Expressions",
    "section": "Lookaround (again)",
    "text": "Lookaround (again)\n\n\nFigure 4: Image credit: Stefan Judis https://www.stefanjudis.com/blog/a-regular-expression-lookahead-lookbehind-cheat-sheet/"
  },
  {
    "objectID": "slides/2024-09-30-regex.html#lookbehinds",
    "href": "slides/2024-09-30-regex.html#lookbehinds",
    "title": "Regular Expressions",
    "section": "Lookbehinds",
    "text": "Lookbehinds\n(?&lt;=y)x – positive lookbehind (matches ‘x’ when it is preceded by ‘y’)\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \n            \"(?&lt;=: ).+\")\n\n[1] \"The pie whisperer. (4 August 2015)\"\n\n\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \n            \"(?&lt;=\\\\. ).+\")\n\n[1] \"(4 August 2015)\""
  },
  {
    "objectID": "slides/2024-09-30-regex.html#lookaheads",
    "href": "slides/2024-09-30-regex.html#lookaheads",
    "title": "Regular Expressions",
    "section": "Lookaheads",
    "text": "Lookaheads\nx(?=y) – positive lookahead (matches ‘x’ when it is followed by ‘y’)\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \n            \".+(?=\\\\.)\")\n\n[1] \"Episode 2: The pie whisperer\"\n\n\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \n            \".+(?=:)\")\n\n[1] \"Episode 2\""
  },
  {
    "objectID": "slides/2024-09-30-regex.html#extracting-episode-information-5",
    "href": "slides/2024-09-30-regex.html#extracting-episode-information-5",
    "title": "Regular Expressions",
    "section": "Extracting episode information",
    "text": "Extracting episode information\nGetting everything between the : and the .\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \n            \"(?&lt;=: ).+(?=\\\\.)\")\n\n[1] \"The pie whisperer\""
  },
  {
    "objectID": "slides/2024-09-30-regex.html#extracting-air-date",
    "href": "slides/2024-09-30-regex.html#extracting-air-date",
    "title": "Regular Expressions",
    "section": "Extracting air date",
    "text": "Extracting air date\nI want to extract just the air date. What pattern do I want to match?\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", ...)"
  },
  {
    "objectID": "slides/2024-09-30-regex.html#extracting-air-date-1",
    "href": "slides/2024-09-30-regex.html#extracting-air-date-1",
    "title": "Regular Expressions",
    "section": "Extracting air date",
    "text": "Extracting air date\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \n            \"(?&lt;=\\\\().+(?=\\\\))\")\n\n[1] \"4 August 2015\""
  },
  {
    "objectID": "slides/2024-09-30-regex.html#wrangling-the-episode-info",
    "href": "slides/2024-09-30-regex.html#wrangling-the-episode-info",
    "title": "Regular Expressions",
    "section": "Wrangling the episode info",
    "text": "Wrangling the episode info\nCurrently:\n\n\n# A tibble: 270 × 1\n   episode                                        \n   &lt;chr&gt;                                          \n 1 Episode 1: It's not your fault. (18 March 2021)\n 2 Episode 1: It's not your fault. (18 March 2021)\n 3 Episode 1: It's not your fault. (18 March 2021)\n 4 Episode 1: It's not your fault. (18 March 2021)\n 5 Episode 1: It's not your fault. (18 March 2021)\n 6 Episode 1: It's not your fault. (18 March 2021)\n 7 Episode 1: It's not your fault. (18 March 2021)\n 8 Episode 1: It's not your fault. (18 March 2021)\n 9 Episode 1: It's not your fault. (18 March 2021)\n10 Episode 1: It's not your fault. (18 March 2021)\n# ℹ 260 more rows"
  },
  {
    "objectID": "slides/2024-09-30-regex.html#wrangling-the-episode-info-1",
    "href": "slides/2024-09-30-regex.html#wrangling-the-episode-info-1",
    "title": "Regular Expressions",
    "section": "Wrangling the episode info",
    "text": "Wrangling the episode info\nOne option:\n\nresults |&gt;\n  select(episode) |&gt;\n  mutate(episode_name = str_extract(episode, \"(?&lt;=: ).+(?=\\\\.)\"),\n         air_date = str_extract(episode, \"(?&lt;=\\\\().+(?=\\\\))\"),\n         episode = str_extract(episode, \"\\\\d+\")) |&gt; \n  mutate(air_date2 = dmy(air_date))\n\n# A tibble: 270 × 4\n   episode episode_name        air_date      air_date2 \n   &lt;chr&gt;   &lt;chr&gt;               &lt;chr&gt;         &lt;date&gt;    \n 1 1       It's not your fault 18 March 2021 2021-03-18\n 2 1       It's not your fault 18 March 2021 2021-03-18\n 3 1       It's not your fault 18 March 2021 2021-03-18\n 4 1       It's not your fault 18 March 2021 2021-03-18\n 5 1       It's not your fault 18 March 2021 2021-03-18\n 6 1       It's not your fault 18 March 2021 2021-03-18\n 7 1       It's not your fault 18 March 2021 2021-03-18\n 8 1       It's not your fault 18 March 2021 2021-03-18\n 9 1       It's not your fault 18 March 2021 2021-03-18\n10 1       It's not your fault 18 March 2021 2021-03-18\n# ℹ 260 more rows"
  },
  {
    "objectID": "slides/2024-09-30-regex.html#wrangling-the-episode-info-2",
    "href": "slides/2024-09-30-regex.html#wrangling-the-episode-info-2",
    "title": "Regular Expressions",
    "section": "Wrangling the episode info",
    "text": "Wrangling the episode info\nAnother option:\n\nresults |&gt;\n  separate_wider_regex(episode, \n                       patterns = c(\".+ \", \n                                    episode = \"\\\\d+\", \n                                    \": \", \n                                    episode_name = \".+\", \n                                    \"\\\\. \\\\(\", \n                                    air_date = \".+\", \n                                    \"\\\\)\")) |&gt; \n  mutate(air_date2 = dmy(air_date))\n\n\n\n# A tibble: 270 × 4\n   episode episode_name        air_date      air_date2 \n   &lt;chr&gt;   &lt;chr&gt;               &lt;chr&gt;         &lt;date&gt;    \n 1 1       It's not your fault 18 March 2021 2021-03-18\n 2 1       It's not your fault 18 March 2021 2021-03-18\n 3 1       It's not your fault 18 March 2021 2021-03-18\n 4 1       It's not your fault 18 March 2021 2021-03-18\n 5 1       It's not your fault 18 March 2021 2021-03-18\n 6 1       It's not your fault 18 March 2021 2021-03-18\n 7 1       It's not your fault 18 March 2021 2021-03-18\n 8 1       It's not your fault 18 March 2021 2021-03-18\n 9 1       It's not your fault 18 March 2021 2021-03-18\n10 1       It's not your fault 18 March 2021 2021-03-18\n# ℹ 260 more rows"
  },
  {
    "objectID": "slides/2024-09-30-regex.html#some-thoughts-on-characters-and-spaces",
    "href": "slides/2024-09-30-regex.html#some-thoughts-on-characters-and-spaces",
    "title": "Regular Expressions",
    "section": "Some thoughts on characters and spaces",
    "text": "Some thoughts on characters and spaces\n\n. matches any single character except a newline \\n.\n. does match whitespace (e.g., a space or tab)\n\\s matches any whitespace including: spaces, tabs, new lines, and carriage returns\n[ \\t] matches spaces and tabs only (not new lines or carriage returns)\n[^\\s] matches any character except whitespace (including spaces, tabs, and new lines)\n[^\\s] and [\\S] are functionally equivalent\nThe pattern [\\s\\S] matches any character including newlines and tabs.\n\\w matches any single word character (including letters, digits, and the underscore character _)"
  },
  {
    "objectID": "slides/2024-09-30-regex.html#thoughts-on-characters-and-spaces",
    "href": "slides/2024-09-30-regex.html#thoughts-on-characters-and-spaces",
    "title": "Regular Expressions",
    "section": "Thoughts on characters and spaces",
    "text": "Thoughts on characters and spaces\n\n. matches any single character except a newline \\n.\n. does match whitespace (e.g., a space or tab)\n\\s matches any whitespace including: spaces, tabs, new lines, and carriage returns\n[ \\t] matches spaces and tabs only (not new lines or carriage returns)\n[^\\s] matches any character except whitespace (including spaces, tabs, and new lines)\n[^\\s] and [\\S] are functionally equivalent\nThe pattern [\\s\\S] matches any character including newlines and tabs.\n\\w matches any single word character (including letters, digits, and the underscore character _)"
  },
  {
    "objectID": "slides/2024-09-30-regex.html#extracting-from-multiple-strings-2",
    "href": "slides/2024-09-30-regex.html#extracting-from-multiple-strings-2",
    "title": "Regular Expressions",
    "section": "Extracting from multiple strings",
    "text": "Extracting from multiple strings\nWhat if we have multiple instances across multiple strings? We need to be careful working with lists (instead of vectors).\n\nstrings &lt;- c(\"My cat is 3 years old\", \"My dog is 10 years old\")\nstr_extract(strings, \"\\\\w\")\n\n[1] \"M\" \"M\"\n\nstr_extract_all(strings, \"\\\\w\")\n\n[[1]]\n [1] \"M\" \"y\" \"c\" \"a\" \"t\" \"i\" \"s\" \"3\" \"y\" \"e\" \"a\" \"r\" \"s\" \"o\" \"l\" \"d\"\n\n[[2]]\n [1] \"M\" \"y\" \"d\" \"o\" \"g\" \"i\" \"s\" \"1\" \"0\" \"y\" \"e\" \"a\" \"r\" \"s\" \"o\" \"l\" \"d\"\n\nstr_extract(strings, \"\\\\w+\")\n\n[1] \"My\" \"My\"\n\nstr_extract_all(strings, \"\\\\w+\")\n\n[[1]]\n[1] \"My\"    \"cat\"   \"is\"    \"3\"     \"years\" \"old\"  \n\n[[2]]\n[1] \"My\"    \"dog\"   \"is\"    \"10\"    \"years\" \"old\""
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#function-components",
    "href": "slides/2024-10-07-funcmap.html#function-components",
    "title": "Functions + Iteration",
    "section": "Function components",
    "text": "Function components\nHere is a simple function to compute the absolute value.\n\nmy_abs &lt;- function(x){\n  return(ifelse(x &gt;= 0, x, -1*x))\n}\n\nmy_abs(-3)\n\n[1] 3\n\nmy_abs(c(-2, 5))\n\n[1] 2 5\n\n\n\nname: my_abs\narguments: x\nbody: everything inside the { }"
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#ordering-and-arguments",
    "href": "slides/2024-10-07-funcmap.html#ordering-and-arguments",
    "title": "Functions + Iteration",
    "section": "Ordering and arguments",
    "text": "Ordering and arguments\n\nmy_power &lt;- function(x, y){\n  return(x^y)\n}\n\nmy_power(x = 2, y = 3)\n\n[1] 8\n\nmy_power(y = 3, x = 2)\n\n[1] 8\n\nmy_power(2, 3)\n\n[1] 8\n\nmy_power(3, 2)\n\n[1] 9\n\n\n\nWhen calling the function, if you don’t name the arguments, R assumes that you passed them in the order defined inside the function."
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#function-defaults",
    "href": "slides/2024-10-07-funcmap.html#function-defaults",
    "title": "Functions + Iteration",
    "section": "Function defaults",
    "text": "Function defaults\n\nfunctionresult\n\n\n\nmy_power &lt;- function(x, y){\n  return(x^y)\n}\n\nWhat will happen when I run the following code?\n\nmy_power(3)\n\n\n\n\nmy_power(3)\n\nError in my_power(3): argument \"y\" is missing, with no default"
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#function-defaults-1",
    "href": "slides/2024-10-07-funcmap.html#function-defaults-1",
    "title": "Functions + Iteration",
    "section": "Function defaults",
    "text": "Function defaults\n\nfunctionresult\n\n\n\nmy_power &lt;- function(x, y = 2){\n  return(x^y)\n}\n\nWhat will happen when I run the following code?\n\nmy_power(3)\n\n\n\n\nmy_power(3)\n\n[1] 9"
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#function-defaults-2",
    "href": "slides/2024-10-07-funcmap.html#function-defaults-2",
    "title": "Functions + Iteration",
    "section": "Function defaults",
    "text": "Function defaults\n\nfunctionresult\n\n\n\nmy_power &lt;- function(x, y = 2){\n  return(x^y)\n}\n\nWhat will happen when I run the following code?\n\nmy_power(2, 3)\n\n\n\n\nmy_power(2, 3)\n\n[1] 8"
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#function-defaults-3",
    "href": "slides/2024-10-07-funcmap.html#function-defaults-3",
    "title": "Functions + Iteration",
    "section": "Function defaults",
    "text": "Function defaults\n\nfunctionresult\n\n\n\nmy_power &lt;- function(x = 2, y = 3){\n  return(x^y)\n}\n\nWhat will happen when I run the following code?\n\nmy_power()\n\n\n\n\nmy_power()\n\n[1] 8"
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#function-defaults-4",
    "href": "slides/2024-10-07-funcmap.html#function-defaults-4",
    "title": "Functions + Mapping",
    "section": "Function defaults",
    "text": "Function defaults\n\nmy_power &lt;- function(x, y = 2){\n  return(x^y)\n}\n\nWhat will happen when I run the following code?\n\nmy_power(2, 3)"
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#function-defaults-5",
    "href": "slides/2024-10-07-funcmap.html#function-defaults-5",
    "title": "Functions + Mapping",
    "section": "Function defaults",
    "text": "Function defaults\n\nmy_power &lt;- function(x, y = 2){\n  return(x^y)\n}\n\nWhat will happen when I run the following code?\n\nmy_power(2, 3)\n\n[1] 8"
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#function-defaults-6",
    "href": "slides/2024-10-07-funcmap.html#function-defaults-6",
    "title": "Functions + Mapping",
    "section": "Function defaults",
    "text": "Function defaults\n\nmy_power &lt;- function(x = 2, y = 4){\n  return(x^y)\n}\n\nWhat will happen when I run the following code?\n\nmy_power()"
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#function-defaults-7",
    "href": "slides/2024-10-07-funcmap.html#function-defaults-7",
    "title": "Functions + Mapping",
    "section": "Function defaults",
    "text": "Function defaults\n\nmy_power &lt;- function(x = 2, y = 4){\n  return(x^y)\n}\n\nWhat will happen when I run the following code?\n\nmy_power()\n\n[1] 16"
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#purrr-for-functional-programming",
    "href": "slides/2024-10-07-funcmap.html#purrr-for-functional-programming",
    "title": "Functions + Iteration",
    "section": "purrr for functional programming",
    "text": "purrr for functional programming\nfunctionals are functions that take function as input and return a vector / list / data frame as output.\n\nalternatives to loops\na functional is better than a for loop is better than while is better than repeat (in terms of computing efficiency)"
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#benefits",
    "href": "slides/2024-10-07-funcmap.html#benefits",
    "title": "Functions + Iteration",
    "section": "Benefits",
    "text": "Benefits\n\nencourages function logic to be separated from iteration logic\ncan collapse results into vectors/data frames easily"
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#map",
    "href": "slides/2024-10-07-funcmap.html#map",
    "title": "Functions + Iteration",
    "section": "Map",
    "text": "Map\nmap() has (at least) two arguments, a data object and a function. It performs the function on each element of the object and returns a list. We can also pass additional arguments into the function."
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#variations-of-map_-functions",
    "href": "slides/2024-10-07-funcmap.html#variations-of-map_-functions",
    "title": "Functions + Iteration",
    "section": "variations of map_ functions",
    "text": "variations of map_ functions\n\n\nThe map functions are named by they output the produce. For example:\n\nmap(.x, .f) is the main mapping function and returns a list\nmap_dbl(.x, .f) returns a numeric (double) vector\nmap_chr(.x, .f) returns a character vector\nmap_lgl(.x, .f) returns a logical vector\n\n\n\n\n\n\n\n\n\n\n\n\n\nNote that the first argument is always the data object and the second object is always the function you want to iteratively apply to each element in the input object."
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#map-variants-output",
    "href": "slides/2024-10-07-funcmap.html#map-variants-output",
    "title": "Functions + Iteration",
    "section": "map() variants (output)",
    "text": "map() variants (output)\n\ntriple &lt;- function(x) x * 3\nmap(.x = c(1:3), .f = triple)\n\n[[1]]\n[1] 3\n\n[[2]]\n[1] 6\n\n[[3]]\n[1] 9\n\nmap_dbl(.x = c(1:3), .f = triple)\n\n[1] 3 6 9\n\nmap_lgl (.x = c(1:3), .f = triple)\n\nError in `map_lgl()`:\nℹ In index: 1.\nCaused by error:\n! Can't coerce from a number to a logical.\n\nmap_lgl(.x = c(1, NA, 3), .f = is.na)\n\n[1] FALSE  TRUE FALSE"
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#fastfood-dataset-from-openintro",
    "href": "slides/2024-10-07-funcmap.html#fastfood-dataset-from-openintro",
    "title": "Functions + Iteration",
    "section": "fastfood dataset from openintro",
    "text": "fastfood dataset from openintro\n\nlibrary(openintro)\nfastfood\n\n# A tibble: 515 × 17\n   restaurant item      calories cal_fat total_fat sat_fat trans_fat cholesterol\n   &lt;chr&gt;      &lt;chr&gt;        &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;\n 1 Mcdonalds  Artisan …      380      60         7       2       0            95\n 2 Mcdonalds  Single B…      840     410        45      17       1.5         130\n 3 Mcdonalds  Double B…     1130     600        67      27       3           220\n 4 Mcdonalds  Grilled …      750     280        31      10       0.5         155\n 5 Mcdonalds  Crispy B…      920     410        45      12       0.5         120\n 6 Mcdonalds  Big Mac        540     250        28      10       1            80\n 7 Mcdonalds  Cheesebu…      300     100        12       5       0.5          40\n 8 Mcdonalds  Classic …      510     210        24       4       0            65\n 9 Mcdonalds  Double C…      430     190        21      11       1            85\n10 Mcdonalds  Double Q…      770     400        45      21       2.5         175\n# ℹ 505 more rows\n# ℹ 9 more variables: sodium &lt;dbl&gt;, total_carb &lt;dbl&gt;, fiber &lt;dbl&gt;, sugar &lt;dbl&gt;,\n#   protein &lt;dbl&gt;, vit_a &lt;dbl&gt;, vit_c &lt;dbl&gt;, calcium &lt;dbl&gt;, salad &lt;chr&gt;\n\n\nFrom TidyTuesday Fast food entree data on September 4, 2018."
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#anonymous-functions-and-shortcuts",
    "href": "slides/2024-10-07-funcmap.html#anonymous-functions-and-shortcuts",
    "title": "Functions + Iteration",
    "section": "Anonymous functions and shortcuts",
    "text": "Anonymous functions and shortcuts\n\nuse ~ to set a formula (when the function is neither a single name nor defined by function(...) { ...})\nuse .x to reference the input map(.x = ..., .f = )\n\n\nmap_dbl(.x = fastfood, .f = function(dog) mean(dog, na.rm = TRUE))\n\n  restaurant         item     calories      cal_fat    total_fat      sat_fat \n          NA           NA  530.9126214  238.8135922   26.5902913    8.1533981 \n   trans_fat  cholesterol       sodium   total_carb        fiber        sugar \n   0.4650485   72.4563107 1246.7378641   45.6640777    4.1371769    7.2621359 \n     protein        vit_a        vit_c      calcium        salad \n  27.8910506   18.8571429   20.1704918   24.8524590           NA \n\n\n\nmap_dbl(.x = fastfood,  .f = ~mean(.x, na.rm = TRUE))\n\n  restaurant         item     calories      cal_fat    total_fat      sat_fat \n          NA           NA  530.9126214  238.8135922   26.5902913    8.1533981 \n   trans_fat  cholesterol       sodium   total_carb        fiber        sugar \n   0.4650485   72.4563107 1246.7378641   45.6640777    4.1371769    7.2621359 \n     protein        vit_a        vit_c      calcium        salad \n  27.8910506   18.8571429   20.1704918   24.8524590           NA \n\n\n\nmap_dbl(.x = fastfood, .f = mean, na.rm = TRUE)\n\n  restaurant         item     calories      cal_fat    total_fat      sat_fat \n          NA           NA  530.9126214  238.8135922   26.5902913    8.1533981 \n   trans_fat  cholesterol       sodium   total_carb        fiber        sugar \n   0.4650485   72.4563107 1246.7378641   45.6640777    4.1371769    7.2621359 \n     protein        vit_a        vit_c      calcium        salad \n  27.8910506   18.8571429   20.1704918   24.8524590           NA \n\n\n\nmap_dbl(.x = fastfood, .f = mean)\n\n  restaurant         item     calories      cal_fat    total_fat      sat_fat \n          NA           NA  530.9126214  238.8135922   26.5902913    8.1533981 \n   trans_fat  cholesterol       sodium   total_carb        fiber        sugar \n   0.4650485   72.4563107 1246.7378641   45.6640777           NA    7.2621359 \n     protein        vit_a        vit_c      calcium        salad \n          NA           NA           NA           NA           NA"
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#the-same-thing-many-ways",
    "href": "slides/2024-10-07-funcmap.html#the-same-thing-many-ways",
    "title": "Functions + Iteration",
    "section": "The same thing, many ways",
    "text": "The same thing, many ways\nNote that .x is the name of the first argument in map() (.f is the name of the second argument).\n\n# the task\nmap_dbl(fastfood, function(x) length(unique(x)))\n\n restaurant        item    calories     cal_fat   total_fat     sat_fat \n          8         505         113         117          80          40 \n  trans_fat cholesterol      sodium  total_carb       fiber       sugar \n         10          52         197         103          19          31 \n    protein       vit_a       vit_c     calcium       salad \n         71          22          24          27           1 \n\nmap_dbl(fastfood, function(unicorn) length(unique(unicorn)))\n\n restaurant        item    calories     cal_fat   total_fat     sat_fat \n          8         505         113         117          80          40 \n  trans_fat cholesterol      sodium  total_carb       fiber       sugar \n         10          52         197         103          19          31 \n    protein       vit_a       vit_c     calcium       salad \n         71          22          24          27           1 \n\nmap_dbl(fastfood, ~length(unique(.x)))\n\n restaurant        item    calories     cal_fat   total_fat     sat_fat \n          8         505         113         117          80          40 \n  trans_fat cholesterol      sodium  total_carb       fiber       sugar \n         10          52         197         103          19          31 \n    protein       vit_a       vit_c     calcium       salad \n         71          22          24          27           1 \n\nmap_dbl(fastfood, ~length(unique(..1)))\n\n restaurant        item    calories     cal_fat   total_fat     sat_fat \n          8         505         113         117          80          40 \n  trans_fat cholesterol      sodium  total_carb       fiber       sugar \n         10          52         197         103          19          31 \n    protein       vit_a       vit_c     calcium       salad \n         71          22          24          27           1 \n\nmap_dbl(fastfood, ~length(unique(.)))\n\n restaurant        item    calories     cal_fat   total_fat     sat_fat \n          8         505         113         117          80          40 \n  trans_fat cholesterol      sodium  total_carb       fiber       sugar \n         10          52         197         103          19          31 \n    protein       vit_a       vit_c     calcium       salad \n         71          22          24          27           1 \n\n# not the task\nmap_dbl(fastfood, length)\n\n restaurant        item    calories     cal_fat   total_fat     sat_fat \n        515         515         515         515         515         515 \n  trans_fat cholesterol      sodium  total_carb       fiber       sugar \n        515         515         515         515         515         515 \n    protein       vit_a       vit_c     calcium       salad \n        515         515         515         515         515 \n\n\n\n#error\nmap_dbl(fastfood, ~length)\n\nError in `map_dbl()`:\nℹ In index: 1.\nℹ With name: restaurant.\nCaused by error:\n! Can't coerce from a primitive function to a double.\n\n#error\nmap_dbl(fastfood, length(unique()))\n\nError in unique.default(): argument \"x\" is missing, with no default\n\n#error\nmap_dbl(fastfood, ~length(unique(x)))\n\nError in `map_dbl()`:\nℹ In index: 1.\nℹ With name: restaurant.\nCaused by error in `.f()`:\n! object 'x' not found"
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#map_-variants-input",
    "href": "slides/2024-10-07-funcmap.html#map_-variants-input",
    "title": "Functions + Iteration",
    "section": "map_*() variants (input)",
    "text": "map_*() variants (input)\n\nWe’ve already described the difference between the columns. Now we cover the difference between the rows."
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#map2_",
    "href": "slides/2024-10-07-funcmap.html#map2_",
    "title": "Functions + Iteration",
    "section": "map2_*()",
    "text": "map2_*()\n\nmap2_*() has two arguments, .x and .y\nraise each value of .x to the power of 2\n\n\nmap_dbl(\n  .x = c(1:5), \n  .f = function(x) x ^ 2\n)\n\n[1]  1  4  9 16 25\n\n\n\nraise each value .x to the power .y\n\n\nmap2_dbl(\n  .x = c(1:5), \n  .y = c(2:6), \n  .f = ~ (.x ^ .y)\n)\n\n[1]     1     8    81  1024 15625"
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#imap",
    "href": "slides/2024-10-07-funcmap.html#imap",
    "title": "Functions + Iteration",
    "section": "imap()",
    "text": "imap()\n\nimap() is like map2()except that .y is derived from names(.x) if the data frame has names.\nIf not, .y is 1, 2, 3, … \\(n\\) where \\(n\\) is the number of items in .x. (A data frame has \\(n\\) columns.)\nThese two calls produce the same result\n\n\nimap_chr(.x = fastfood, \n         .f = ~ paste(.y, \"has a mean of\", round(mean(.x), 1))) |&gt; \nhead()\n\n                    restaurant                           item \n \"restaurant has a mean of NA\"        \"item has a mean of NA\" \n                      calories                        cal_fat \n\"calories has a mean of 530.9\"  \"cal_fat has a mean of 238.8\" \n                     total_fat                        sat_fat \n\"total_fat has a mean of 26.6\"    \"sat_fat has a mean of 8.2\" \n\nmap2_chr(.x = fastfood, \n         .y = names(fastfood),\n         .f = ~ paste(.y, \"has a mean of\", round(mean(.x), 1))) |&gt; \nhead()\n\n                    restaurant                           item \n \"restaurant has a mean of NA\"        \"item has a mean of NA\" \n                      calories                        cal_fat \n\"calories has a mean of 530.9\"  \"cal_fat has a mean of 238.8\" \n                     total_fat                        sat_fat \n\"total_fat has a mean of 26.6\"    \"sat_fat has a mean of 8.2\""
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#pmap",
    "href": "slides/2024-10-07-funcmap.html#pmap",
    "title": "Functions + Iteration",
    "section": "pmap()",
    "text": "pmap()\n\nyou can pass a named list or dataframe as arguments to a function\nfor example runif() has the parameters n, min and max\n\n\nparams\n\n# A tibble: 3 × 3\n      n   min   max\n  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1     1     1    10\n2     2    10   100\n3     3   100  1000\n\npmap(params, runif)\n\n[[1]]\n[1] 1.522878\n\n[[2]]\n[1] 60.40849 62.27485\n\n[[3]]\n[1] 393.0755 733.5081 142.7339\n\n\nOr use the pipe into pmap():\n\nparams |&gt; \n  pmap(runif)\n\n[[1]]\n[1] 6.228173\n\n[[2]]\n[1] 21.28932 12.86177\n\n[[3]]\n[1] 900.8545 594.6754 274.8844"
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#an-aside",
    "href": "slides/2024-10-07-funcmap.html#an-aside",
    "title": "Functions + Iteration",
    "section": "An aside…",
    "text": "An aside…\nInterestingly, runif() will take either a scalar or a vector as its first argument. If the first argument is a vector, runif() will return N random uniforms, where N is the length of the vector.\n\nrunif(n = 3)\n\n[1] 0.3460550 0.3684597 0.7622530\n\nrunif(n = c(1,3))\n\n[1] 0.2994728 0.7781749\n\nrunif(n = c(10000,12321412424))\n\n[1] 0.7561568 0.4648677\n\nrunif(n = c(\"rainbow\", \"unicorn\"))\n\n[1] 0.9089102 0.3279757"
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#pmap-vs-map",
    "href": "slides/2024-10-07-funcmap.html#pmap-vs-map",
    "title": "Functions + Iteration",
    "section": "pmap() vs map()",
    "text": "pmap() vs map()\nWhich means that the pmap() code will “work” in map() as well:\n\nparamspmapmap\n\n\n\nparams\n\n# A tibble: 3 × 3\n      n   min   max\n  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1     1     1    10\n2     2    10   100\n3     3   100  1000\n\n\n\n\n\nparams |&gt; \n  pmap(runif)\n\n[[1]]\n[1] 1.734303\n\n[[2]]\n[1] 54.19798 10.06920\n\n[[3]]\n[1] 587.4556 944.9725 889.0832\n\n\n\n\n\nparams |&gt; \n  map(runif)\n\n$n\n[1] 0.63462172 0.08050289 0.62253413\n\n$min\n[1] 0.5753892 0.1718571 0.8298359\n\n$max\n[1] 0.8211994 0.6053252 0.2518072"
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#pmap-with-expand_grid",
    "href": "slides/2024-10-07-funcmap.html#pmap-with-expand_grid",
    "title": "Functions + Iteration",
    "section": "pmap() with expand_grid()",
    "text": "pmap() with expand_grid()\n\nI like to use expand_grid() when I want all possible parameter combinations.\n\n\nexpand_grid(n = c(1, 2, 3), \n            min = c(1, 10),\n            max = c(10, 100)) \n\n# A tibble: 12 × 3\n       n   min   max\n   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n 1     1     1    10\n 2     1     1   100\n 3     1    10    10\n 4     1    10   100\n 5     2     1    10\n 6     2     1   100\n 7     2    10    10\n 8     2    10   100\n 9     3     1    10\n10     3     1   100\n11     3    10    10\n12     3    10   100\n\nexpand_grid(n = c(1, 2, 3), \n            min = c(1, 10),\n            max = c(10, 100)) |&gt; \npmap(runif)\n\n[[1]]\n[1] 1.08188\n\n[[2]]\n[1] 11.49043\n\n[[3]]\n[1] 10\n\n[[4]]\n[1] 39.97649\n\n[[5]]\n[1] 5.169109 4.533750\n\n[[6]]\n[1] 46.15350 74.83895\n\n[[7]]\n[1] 10 10\n\n[[8]]\n[1] 78.80365 13.85192\n\n[[9]]\n[1] 1.959881 2.481792 1.705433\n\n[[10]]\n[1] 61.762033 48.758773  3.483168\n\n[[11]]\n[1] 10 10 10\n\n[[12]]\n[1] 96.07411 57.56174 46.62570"
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#mapping-to-a-data-frame",
    "href": "slides/2024-10-07-funcmap.html#mapping-to-a-data-frame",
    "title": "Functions + Iteration",
    "section": "mapping to a data frame",
    "text": "mapping to a data frame\nWould be great if the results were a data frame! If the function outputs a data frame, then we can use list_rbind() and list_cbind() to create a data frame as the final map() output.\n\nresults as rows: map() |&gt; list_rbind()\nresults as columns: map() |&gt; list_cbind()\n\n\nfunctionmap()with list_rbind()with list_cbind()\n\n\n\ncol_stats &lt;- function(n) {\n  head(fastfood, n) |&gt; \n    select(calories, protein, vit_c) |&gt; \n    summarise_all(mean, na.rm = TRUE) |&gt; \n    mutate(n = paste(\"N =\", n))\n}\n\n\n\n\nout1 &lt;- map(c(10,20), col_stats)\n\nout1\n\n[[1]]\n# A tibble: 1 × 4\n  calories protein vit_c n     \n     &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; \n1      657    39.5  12.3 N = 10\n\n[[2]]\n# A tibble: 1 × 4\n  calories protein vit_c n     \n     &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; \n1     582.    34.6  12.2 N = 20\n\n\n\n\n\nout2 &lt;- map(c(10,20), col_stats) |&gt; list_rbind()\n\nout2\n\n# A tibble: 2 × 4\n  calories protein vit_c n     \n     &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; \n1     657     39.5  12.3 N = 10\n2     582.    34.6  12.2 N = 20\n\n\n\n\n\nout3 &lt;- map(c(10,20), col_stats) |&gt; list_cbind()\n\nout3\n\n# A tibble: 1 × 8\n  calories...1 protein...2 vit_c...3 n...4  calories...5 protein...6 vit_c...7\n         &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;         &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;\n1          657        39.5      12.3 N = 10         582.        34.6      12.2\n# ℹ 1 more variable: n...8 &lt;chr&gt;"
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#functions-summary",
    "href": "slides/2024-10-07-funcmap.html#functions-summary",
    "title": "Functions + Iteration",
    "section": "Functions summary",
    "text": "Functions summary\n\nFunctions can be used to avoid repeating code\nArguments allow us specify the inputs when we call a function\nIf inputs are not named when calling the function, R uses the ordering from the function definition\nAll arguments must be specified when calling a function\nDefault arguments can be specified when the function is defined\nThe input to a function can be a function!"
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#returning-a-value",
    "href": "slides/2024-10-07-funcmap.html#returning-a-value",
    "title": "Functions + Iteration",
    "section": "Returning a value",
    "text": "Returning a value\n\nfunctionsresults\n\n\n\naverage1 &lt;- function(x, remove_nas) {\n    sum(x, na.rm = remove_nas)/sum(!is.na(x))\n}\n\naverage2 &lt;- function(x, remove_nas) {\n    return(sum(x, na.rm = remove_nas)/sum(!is.na(x)))\n}\n\naverage3 &lt;- function(x, remove_nas = TRUE) {\n    sum(x, na.rm = remove_nas)/sum(!is.na(x))\n}\n\n\n\n\nsome_data &lt;- c(3, NA, 2, 13, 2, NA, 47)\n\naverage1(some_data)\n\nError in average1(some_data): argument \"remove_nas\" is missing, with no default\n\naverage1(some_data, remove_nas = TRUE)\n\n[1] 13.4\n\naverage2(some_data)\n\nError in average2(some_data): argument \"remove_nas\" is missing, with no default\n\naverage2(some_data, remove_nas = TRUE)\n\n[1] 13.4\n\naverage3(some_data)\n\n[1] 13.4"
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#returning-a-value-1",
    "href": "slides/2024-10-07-funcmap.html#returning-a-value-1",
    "title": "Functions + Iteration",
    "section": "Returning a value",
    "text": "Returning a value\n\nwithout return(): the function returns the last value which gets computed and isn’t stored as an object (using &lt;-).\nwith return(): the function will return an object that is explicitly included in the return() call. (Note: if you (accidentally?) have two return() calls, the function will return the object in the first return() call.)"
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#control-flow",
    "href": "slides/2024-10-07-funcmap.html#control-flow",
    "title": "Functions + Iteration",
    "section": "Control flow",
    "text": "Control flow\nOften in functions, you will want to execute code conditionally. Consider the if-else if-else structure.\n\nif (logical_condition) {\n    # some code\n} else if (other_logical_condition) {\n    # some other code\n} else {\n    # yet more code\n}"
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#control-flow-1",
    "href": "slides/2024-10-07-funcmap.html#control-flow-1",
    "title": "Functions + Iteration",
    "section": "Control flow",
    "text": "Control flow\n\nfunctionresult\n\n\n\nmiddle &lt;- function(x) {\n    mean_x &lt;- mean(x, na.rm = TRUE)\n    median_x &lt;- median(x, na.rm = TRUE)\n    seems_skewed &lt;- (mean_x &gt; 1.5*median_x) | (mean_x &lt; (1/1.5)*median_x)\n    if (seems_skewed) {\n        median_x\n    } else {\n        mean_x\n    }\n}\n\nNote that (mean_x &gt; 1.5*median_x) | (mean_x &lt; (1/1.5)*median_x) is a TRUE or FALSE question.\n\n\n\nsome_data &lt;- c(3, NA, 2, 13, 2, NA, 47)\n\n\nmean(some_data, na.rm = TRUE)\n\n[1] 13.4\n\nmedian(some_data, na.rm = TRUE)\n\n[1] 3\n\nmiddle(some_data)\n\n[1] 3"
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#functions-in-the-tidyverse",
    "href": "slides/2024-10-07-funcmap.html#functions-in-the-tidyverse",
    "title": "Functions + Iteration",
    "section": "Functions in the tidyverse",
    "text": "Functions in the tidyverse\nDon’t collapse\nFunctions that return the same number of rows as the original data frame are good to use inside mutate() and filter(). For example, you might want to capitalize the first word of every string:\n\nfirst_upper &lt;- function(x) {\n  str_sub(x, 1, 1) &lt;- str_to_upper(str_sub(x, 1, 1))\n  x\n}\n\nfirst_upper(c(\"hello\", \"goodbye\"))\n\n[1] \"Hello\"   \"Goodbye\""
  },
  {
    "objectID": "slides/2024-10-07-funcmap.html#functions-in-the-tidyverse-1",
    "href": "slides/2024-10-07-funcmap.html#functions-in-the-tidyverse-1",
    "title": "Functions + Iteration",
    "section": "Functions in the tidyverse",
    "text": "Functions in the tidyverse\nCollapse\nFunctions that collapse into a single value will work well in the summarize() step of the pipeline. For example, you may want to calculate the coefficient of variation which is the standard deviation divided by the mean.\n\ncv &lt;- function(x, na.rm = FALSE) {\n  sd(x, na.rm = na.rm) / mean(x, na.rm = na.rm)\n}\n\ncv(runif(100, min = 0, max = 50))\n\n[1] 0.5983797\n\ncv(runif(100, min = 0, max = 500))\n\n[1] 0.5812336"
  },
  {
    "objectID": "slides/2024-09-30-regex.html#bounding-words-vs.-phrases",
    "href": "slides/2024-09-30-regex.html#bounding-words-vs.-phrases",
    "title": "Regular Expressions",
    "section": "Bounding words vs. phrases",
    "text": "Bounding words vs. phrases\n\nstrings &lt;- c(\"apple\", \"applet\", \"pineapple\", \"apple pie\",\n             \"I love apple pie\")\n\nstr_subset(strings, \"\\\\bapple\\\\b\")\nstr_subset(strings, \"^apple$\")\nstr_subset(strings, \"\\\\bapple pie\\\\b\")\nstr_subset(strings, \"^apple pie$\")"
  },
  {
    "objectID": "slides/2024-09-30-regex.html#bounding-words-vs.-phrases---solutions",
    "href": "slides/2024-09-30-regex.html#bounding-words-vs.-phrases---solutions",
    "title": "Regular Expressions",
    "section": "Bounding words vs. phrases - solutions",
    "text": "Bounding words vs. phrases - solutions\n\nstrings &lt;- c(\"apple\", \"applet\", \"pineapple\", \"apple pie\",\n             \"I love apple pie\")\n\nstr_subset(strings, \"\\\\bapple\\\\b\")\n\n[1] \"apple\"            \"apple pie\"        \"I love apple pie\"\n\nstr_subset(strings, \"^apple$\")\n\n[1] \"apple\"\n\nstr_subset(strings, \"\\\\bapple pie\\\\b\")\n\n[1] \"apple pie\"        \"I love apple pie\"\n\nstr_subset(strings, \"^apple pie$\")\n\n[1] \"apple pie\"\n\nstr_extract(strings, \"\\\\bapple\\\\b\")\n\n[1] \"apple\" NA      NA      \"apple\" \"apple\"\n\nstr_extract(strings, \"^apple$\")\n\n[1] \"apple\" NA      NA      NA      NA     \n\nstr_extract(strings, \"\\\\bapple pie\\\\b\")\n\n[1] NA          NA          NA          \"apple pie\" \"apple pie\"\n\nstr_extract(strings, \"^apple pie$\")\n\n[1] NA          NA          NA          \"apple pie\" NA"
  },
  {
    "objectID": "slides/2024-10-16-help.html#object-names",
    "href": "slides/2024-10-16-help.html#object-names",
    "title": "Help me help you",
    "section": "Object names",
    "text": "Object names\n\nThere are only two hard things in Computer Science: cache invalidation and naming things.\n\n\n– Phil Karlton"
  },
  {
    "objectID": "slides/2024-10-16-help.html#object-names-1",
    "href": "slides/2024-10-16-help.html#object-names-1",
    "title": "Help me help you",
    "section": "Object names",
    "text": "Object names\nVariable and function names should use only lowercase letters, numbers, and _. Use underscores (_) (so called snake case) to separate words within a name.\n\n# Good\nday_one\nday_1\n\n# Bad\nDayOne\ndayone\n\n# Really bad\nT &lt;- FALSE\nc &lt;- 10\nmean &lt;- function(x) sum(x)"
  },
  {
    "objectID": "slides/2024-10-16-help.html#spacing",
    "href": "slides/2024-10-16-help.html#spacing",
    "title": "Help me help you",
    "section": "Spacing",
    "text": "Spacing\nDo not put spaces inside or outside parentheses for regular funtion calls.\n\n# Good\nmean(x, na.rm = TRUE)\n\n# Bad\nmean (x, na.rm = TRUE)\nmean( x, na.rm = TRUE )"
  },
  {
    "objectID": "slides/2024-10-16-help.html#infix-operators",
    "href": "slides/2024-10-16-help.html#infix-operators",
    "title": "Help me help you",
    "section": "Infix operators",
    "text": "Infix operators\nMost infix operators (==, +, -, &lt;-, etc.) should always be surrounded by spaces:\n\n# Good\nheight &lt;- (feet * 12) + inches\nmean(x, na.rm = TRUE)\n\n# Bad\nheight&lt;-feet*12+inches\nmean(x, na.rm=TRUE)"
  },
  {
    "objectID": "slides/2024-10-16-help.html#long-function-calls",
    "href": "slides/2024-10-16-help.html#long-function-calls",
    "title": "Help me help you",
    "section": "Long function calls",
    "text": "Long function calls\nIf a function call is too long to fit on a single line, use one line each for the function name, each argument, and the closing ). This makes the code easier to read and to change later.\n\n# Good\ndo_something_very_complicated(\n  something = \"that\",\n  requires = many,\n  arguments = \"some of which may be long\"\n)\n\n# Bad\ndo_something_very_complicated(\"that\", requires, many, arguments,\n                              \"some of which may be long\"\n                              )"
  },
  {
    "objectID": "slides/2024-10-16-help.html#long-lines-piping",
    "href": "slides/2024-10-16-help.html#long-lines-piping",
    "title": "Help me help you",
    "section": "Long lines (piping)",
    "text": "Long lines (piping)\nIf the arguments to a function don’t all fit on one line, put each argument on its own line and indent:\n\n# Good\niris |&gt;\n  summarise(\n    Sepal.Length = mean(Sepal.Length),\n    Sepal.Width = mean(Sepal.Width),\n    .by = Species\n  )\n\n# Bad\niris |&gt;\n  summarise(Sepal.Length = mean(Sepal.Length), Sepal.Width = mean(Sepal.Width), .by = Species)\n\n# Also bad\nsummarise(\n  iris,\n  Sepal.Length = mean(Sepal.Length),\n  Sepal.Width = mean(Sepal.Width),\n  .by = Species\n)"
  },
  {
    "objectID": "slides/2024-10-16-help.html#short-lines-piping",
    "href": "slides/2024-10-16-help.html#short-lines-piping",
    "title": "Help me help you",
    "section": "Short lines (piping)",
    "text": "Short lines (piping)\nSometimes it’s useful to include a short pipe as an argument to a function in a longer pipe. Carefully consider whether the code is more readable with a short inline pipe or if it’s better to move the code outside the pipe and give it an evocative name.\n\n# Good\nx |&gt;\n  semi_join(y |&gt; filter(is_valid))\n\n# Ok\nx |&gt;\n  select(a, b, w) |&gt;\n  left_join(y |&gt; select(a, b, v), join_by(a, b))\n\n# Better\nx_join &lt;- x |&gt; select(a, b, w)\ny_join &lt;- y |&gt; select(a, b, v)\nleft_join(x_join, y_join, join_by(a, b))"
  },
  {
    "objectID": "slides/2024-10-16-help.html#how-to-reprex",
    "href": "slides/2024-10-16-help.html#how-to-reprex",
    "title": "Help me help you",
    "section": "How to reprex()?",
    "text": "How to reprex()?\nStep 1. Write some R code and copy it into the clipboard (command-c or ctrl-c).\nStep 2. Type reprex() into the Console.\nStep 3. Look at the Viewer to the right. Copy the Viewer output into GitHub, Slack, an email, Stack Overflow, Posit Community, etc."
  },
  {
    "objectID": "slides/2024-10-16-help.html#reprex-example---1st-try",
    "href": "slides/2024-10-16-help.html#reprex-example---1st-try",
    "title": "Help me help you",
    "section": "reprex() example - 1st try",
    "text": "reprex() example - 1st try\nCode:\n\njan31 + months(0:11) + days(31)\n\nOutput of reprex():\n\njan31 + months(0:11) + days(31)\n#&gt; Error in eval(expr, envir, enclos): object 'jan31' not found"
  },
  {
    "objectID": "slides/2024-10-16-help.html#reprex-example---2nd-try",
    "href": "slides/2024-10-16-help.html#reprex-example---2nd-try",
    "title": "Help me help you",
    "section": "reprex() example - 2nd try",
    "text": "reprex() example - 2nd try\nCode:\n\n  jan31 &lt;- ymd(\"2021-01-31\")\n  jan31 + months(0:11) + days(31)\n\nOutput of reprex():\n\n  jan31 &lt;- ymd(\"2021-01-31\")\n#&gt; Error in ymd(\"2021-01-31\"): could not find function \"ymd\"\n  jan31 + months(0:11) + days(31)\n#&gt; Error in eval(expr, envir, enclos): object 'jan31' not found"
  },
  {
    "objectID": "slides/2024-10-16-help.html#reprex-example---3rd-try",
    "href": "slides/2024-10-16-help.html#reprex-example---3rd-try",
    "title": "Help me help you",
    "section": "reprex() example - 3rd try",
    "text": "reprex() example - 3rd try\nCode:\n\n  library(lubridate)\n  jan31 &lt;- ymd(\"2021-01-31\")\n  jan31 + months(0:11) + days(31)\n\nOutput of reprex():\n\n  library(lubridate)\n#&gt; \n#&gt; Attaching package: 'lubridate'\n#&gt; The following objects are masked from 'package:base':\n#&gt; \n#&gt;     date, intersect, setdiff, union\n  jan31 &lt;- ymd(\"2021-01-31\")\n  jan31 + months(0:11) + days(31)\n#&gt;  [1] \"2021-03-03\" NA           \"2021-05-01\" NA           \"2021-07-01\"\n#&gt;  [6] NA           \"2021-08-31\" \"2021-10-01\" NA           \"2021-12-01\"\n#&gt; [11] NA           \"2022-01-31\""
  },
  {
    "objectID": "slides/2024-10-16-help.html#style",
    "href": "slides/2024-10-16-help.html#style",
    "title": "Help me help you",
    "section": "Style",
    "text": "Style\nThe point is that coding happens in community. Not only do you want your code to run well, but you want other people to be able to understand it and use it. The more that you and others use the same syntax, the better the communication will be."
  },
  {
    "objectID": "slides/2024-10-16-help.html#reproducible-example-w-chatgpt",
    "href": "slides/2024-10-16-help.html#reproducible-example-w-chatgpt",
    "title": "Help me help you",
    "section": "Reproducible example w chatGPT",
    "text": "Reproducible example w chatGPT\n\ngenerate a reprex in R to demonstrate how to reorder a factor variable"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#goals-of-simulating-complicated-models",
    "href": "slides/2024-10-21-iters.html#goals-of-simulating-complicated-models",
    "title": "Iterations",
    "section": "Goals of Simulating Complicated Models",
    "text": "Goals of Simulating Complicated Models\nThe goal of simulating a complicated model is not only to create a program which will provide the desired results. We also hope to be able to write code such that:\n\nThe problem is broken down into small pieces.\nThe problem has checks in it to see what works (run the lines inside the functions!).\nuses simple code (as often as possible)."
  },
  {
    "objectID": "slides/2024-10-21-iters.html#monte-carlo-from-a-population-to",
    "href": "slides/2024-10-21-iters.html#monte-carlo-from-a-population-to",
    "title": "Iterations",
    "section": "Monte Carlo from a population to…",
    "text": "Monte Carlo from a population to…\n\n\n…simulate as easier than calculus for estimating probabilities.\n…simulate to understand complicated models.\n…simulate to consider statistical methods with fewer assumptions."
  },
  {
    "objectID": "slides/2024-10-21-iters.html#aside-a-few-r-functions-ifelse",
    "href": "slides/2024-10-21-iters.html#aside-a-few-r-functions-ifelse",
    "title": "Iterations",
    "section": "Aside: a few R functions (ifelse())",
    "text": "Aside: a few R functions (ifelse())\n\ndata.frame(value = c(-2:2)) |&gt;\n  mutate(abs_value = ifelse(value &gt;=0, value, -value))  # abs val\n\n  value abs_value\n1    -2         2\n2    -1         1\n3     0         0\n4     1         1\n5     2         2"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#aside-a-few-r-functions-case_when",
    "href": "slides/2024-10-21-iters.html#aside-a-few-r-functions-case_when",
    "title": "Iterations",
    "section": "Aside: a few R functions (case_when())",
    "text": "Aside: a few R functions (case_when())\n\nset.seed(4747)\ndiamonds |&gt; select(carat, cut, color, price) |&gt;\n  sample_n(20) |&gt;\n  mutate(price_cat = case_when(\n    price &gt; 10000 ~ \"expensive\",\n    price &gt; 1500 ~ \"medium\", \n    TRUE ~ \"inexpensive\"))\n\n# A tibble: 20 × 5\n   carat cut       color price price_cat  \n   &lt;dbl&gt; &lt;ord&gt;     &lt;ord&gt; &lt;int&gt; &lt;chr&gt;      \n 1  1.23 Very Good F     10276 expensive  \n 2  0.35 Premium   H       706 inexpensive\n 3  0.7  Good      E      2782 medium     \n 4  0.4  Ideal     D      1637 medium     \n 5  0.53 Ideal     G      1255 inexpensive\n 6  2.22 Ideal     G     14637 expensive  \n 7  0.3  Ideal     G       878 inexpensive\n 8  1.05 Ideal     H      4223 medium     \n 9  0.53 Premium   E      1654 medium     \n10  1.7  Ideal     H      7068 medium     \n11  0.31 Good      E       698 inexpensive\n12  0.31 Ideal     F       840 inexpensive\n13  1.03 Ideal     H      4900 medium     \n14  0.31 Premium   G       698 inexpensive\n15  1.56 Premium   G      8858 medium     \n16  1.71 Premium   G     11032 expensive  \n17  1    Good      E      5345 medium     \n18  1.86 Ideal     J     10312 expensive  \n19  1.08 Very Good E      3726 medium     \n20  0.31 Premium   E       698 inexpensive"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#aside-a-few-r-functions-sample",
    "href": "slides/2024-10-21-iters.html#aside-a-few-r-functions-sample",
    "title": "Iterations",
    "section": "Aside: a few R functions (sample())",
    "text": "Aside: a few R functions (sample())\nsampling, shuffling, and resampling: sample()\n\nset.seed(47)\nalph &lt;- letters[1:10]\nalph\n\n [1] \"a\" \"b\" \"c\" \"d\" \"e\" \"f\" \"g\" \"h\" \"i\" \"j\"\n\nsample(alph, 5, replace = FALSE) # sample (from a population)\n\n[1] \"i\" \"b\" \"g\" \"d\" \"a\"\n\nsample(alph, 5, replace = TRUE) # sample (from a population)\n\n[1] \"j\" \"g\" \"f\" \"i\" \"f\"\n\nsample(alph, 10, replace = FALSE)  # shuffle\n\n [1] \"f\" \"h\" \"i\" \"e\" \"g\" \"d\" \"c\" \"j\" \"b\" \"a\"\n\nsample(alph, 10, replace = TRUE)  # resample\n\n [1] \"e\" \"j\" \"e\" \"b\" \"e\" \"c\" \"f\" \"a\" \"e\" \"a\""
  },
  {
    "objectID": "slides/2024-10-21-iters.html#aside-a-few-r-functions-set.seed",
    "href": "slides/2024-10-21-iters.html#aside-a-few-r-functions-set.seed",
    "title": "Iterations",
    "section": "Aside: a few R functions (set.seed())",
    "text": "Aside: a few R functions (set.seed())\nWhat if we want to be able to generate the same random numbers (here on the interval from 0 to 1) over and over?\n\nset.seed(4747)\nrunif(4, 0, 1) # random uniform numbers\n\n[1] 0.1949071 0.3390270 0.5147919 0.4516470\n\nset.seed(123)\nrunif(4, 0, 1) # random uniform numbers\n\n[1] 0.2875775 0.7883051 0.4089769 0.8830174\n\nset.seed(4747)\nrunif(4, 0, 1) # random uniform numbers\n\n[1] 0.1949071 0.3390270 0.5147919 0.4516470"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#step-1-representing-the-hats",
    "href": "slides/2024-10-21-iters.html#step-1-representing-the-hats",
    "title": "Iterations",
    "section": "Step 1: representing the hats",
    "text": "Step 1: representing the hats\n\nhats &lt;- 1:10\nhats\n\n [1]  1  2  3  4  5  6  7  8  9 10"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#step-2-everyone-draws-a-hat",
    "href": "slides/2024-10-21-iters.html#step-2-everyone-draws-a-hat",
    "title": "Iterations",
    "section": "Step 2: everyone draws a hat",
    "text": "Step 2: everyone draws a hat\n\nrandom_hats &lt;- sample(hats, size = 10, replace = FALSE)\n\nhats\n\n [1]  1  2  3  4  5  6  7  8  9 10\n\nrandom_hats\n\n [1]  4  6  9  3  5 10  2  8  1  7"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#step-3-check-who-got-their-original-hat",
    "href": "slides/2024-10-21-iters.html#step-3-check-who-got-their-original-hat",
    "title": "Iterations",
    "section": "Step 3: check who got their original hat",
    "text": "Step 3: check who got their original hat\n\nhats == random_hats\n\n [1] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE\n\n# TRUE is 1, FALSE is 0\nsum(hats == random_hats)\n\n[1] 2\n\n# did at least one person get their hat?\nsum(hats == random_hats) &gt; 0\n\n[1] TRUE"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#code-so-far",
    "href": "slides/2024-10-21-iters.html#code-so-far",
    "title": "Iterations",
    "section": "Code so far",
    "text": "Code so far\n\nhats &lt;- 1:10\nrandom_hats &lt;- sample(hats, size = 10, replace = FALSE)\nsum(hats == random_hats) &gt; 0\n\n[1] TRUE\n\n\n\nDo we have a good estimate of the probability of interest?"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#function",
    "href": "slides/2024-10-21-iters.html#function",
    "title": "Iterations",
    "section": "Function",
    "text": "Function\n\nremove the magic number 10\n\n\nhat_match &lt;- function(n){\n  hats &lt;- 1:n\n  random_hats &lt;- sample(hats, size = n, replace = FALSE)\n  sum(hats == random_hats) &gt; 0\n}\n\nhat_match(10)\n\n[1] TRUE\n\nhat_match(47)\n\n[1] FALSE"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#iterate",
    "href": "slides/2024-10-21-iters.html#iterate",
    "title": "Iterations",
    "section": "Iterate",
    "text": "Iterate\n\nmap_lgl(1:10, ~hat_match(n = 10))\n\n [1] FALSE  TRUE FALSE FALSE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE\n\nmap_lgl(1:10, ~hat_match(n = 10)) |&gt; \n  mean()\n\n[1] 0.7"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#reproducible",
    "href": "slides/2024-10-21-iters.html#reproducible",
    "title": "Iterations",
    "section": "Reproducible",
    "text": "Reproducible\n\nset.seed(4747)\nnum_iter &lt;- 10000\n\nmap_lgl(1:num_iter, ~hat_match(n = 10)) |&gt; \n  mean()\n\n[1] 0.6329"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#vary-number-of-hats",
    "href": "slides/2024-10-21-iters.html#vary-number-of-hats",
    "title": "Iterations",
    "section": "Vary number of hats",
    "text": "Vary number of hats\n\nhat_match_prob &lt;- function(n, reps){\n  prob &lt;- map_lgl(1:reps, ~hat_match(n = n)) |&gt; \n    mean()\n  return(data.frame(match_prob = prob, num_hats = n))\n}\n\nset.seed(47)\nmap(1:20, hat_match_prob, reps = num_iter) |&gt; \n  list_rbind()\n\n   match_prob num_hats\n1      1.0000        1\n2      0.4964        2\n3      0.6695        3\n4      0.6241        4\n5      0.6376        5\n6      0.6290        6\n7      0.6299        7\n8      0.6299        8\n9      0.6373        9\n10     0.6273       10\n11     0.6319       11\n12     0.6348       12\n13     0.6393       13\n14     0.6300       14\n15     0.6280       15\n16     0.6396       16\n17     0.6355       17\n18     0.6283       18\n19     0.6304       19\n20     0.6461       20"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#visualizing",
    "href": "slides/2024-10-21-iters.html#visualizing",
    "title": "Iterations",
    "section": "Visualizing",
    "text": "Visualizing\n\nset.seed(47)\nnum_iter &lt;- 10000\nmap(1:20, hat_match_prob, reps = num_iter) |&gt; \n  list_rbind() |&gt; \n  ggplot(aes(x = num_hats, y = match_prob)) + \n  geom_line() + \n  labs(y = \"probability of at least one match\",\n       x = \"number of hats\")"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#example-2---birthday-problem",
    "href": "slides/2024-10-21-iters.html#example-2---birthday-problem",
    "title": "Iterations",
    "section": "Example 2 - Birthday Problem",
    "text": "Example 2 - Birthday Problem\nWhat is the probability that in a room of 29 people, at least 2 of them have the same birthday?"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#step-1-representing-the-birthdays",
    "href": "slides/2024-10-21-iters.html#step-1-representing-the-birthdays",
    "title": "Iterations",
    "section": "Step 1: representing the birthdays",
    "text": "Step 1: representing the birthdays\n\nset.seed(47)\nclass_birthdays &lt;- sample(1:365, size=29, replace=TRUE)\nclass_birthdays \n\n [1]  27 242 143 212 257  13 279 198 365 232 136  69 139  12  41 117 330 165 341\n[20] 176 118 144 273 261 213 304   1 360 144"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#step-2-any-duplicates",
    "href": "slides/2024-10-21-iters.html#step-2-any-duplicates",
    "title": "Iterations",
    "section": "Step 2: any duplicates?",
    "text": "Step 2: any duplicates?\n\nduplicated(class_birthdays)\n\n [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[25] FALSE FALSE FALSE FALSE  TRUE\n\nsum(duplicated(class_birthdays))\n\n[1] 1"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#function-1",
    "href": "slides/2024-10-21-iters.html#function-1",
    "title": "Iterations",
    "section": "Function",
    "text": "Function\n\nclass_duplicates &lt;- function(unicorn){\n  class_birthdays &lt;- sample(1:365, size = 29, replace = TRUE)\n  num_duplicates &lt;- sum(duplicated(class_birthdays))\n  return(ifelse(num_duplicates &gt; 0, 1, 0))\n}\n\nclass_duplicates()\n\n[1] 1\n\nclass_duplicates()\n\n[1] 0"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#iterate-1",
    "href": "slides/2024-10-21-iters.html#iterate-1",
    "title": "Iterations",
    "section": "Iterate",
    "text": "Iterate\n\nmap_dbl(1:10, class_duplicates)\n\n [1] 0 1 1 1 1 0 0 1 0 0"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#improve",
    "href": "slides/2024-10-21-iters.html#improve",
    "title": "Iterations",
    "section": "Improve",
    "text": "Improve\n\nclass_duplicates &lt;- function(class_size){\n  class_birthdays &lt;- sample(1:365, size = class_size, replace = TRUE)\n  num_duplicates &lt;- sum(duplicated(class_birthdays))\n  return(ifelse(num_duplicates &gt; 0, 1, 0))\n}\n\nset.seed(47)\nnum_stud &lt;- 29\nmap_dbl(1:10, ~class_duplicates(class_size = num_stud))\n\n [1] 1 1 0 0 1 1 1 1 0 0"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#vary-number-of-students",
    "href": "slides/2024-10-21-iters.html#vary-number-of-students",
    "title": "Iterations",
    "section": "Vary number of students",
    "text": "Vary number of students\n\nset.seed(47)\nnum_stud &lt;- 29\nnum_class &lt;- 100\n\nbirth_match_prob &lt;- function(num_stud, reps){\n  prob &lt;- map_dbl(1:reps, ~class_duplicates(class_size = num_stud)) |&gt; \n    mean()\n  return(data.frame(match_prob = prob, num_stud = num_stud))\n}\n\nmap(1:num_stud, birth_match_prob, reps = num_class) |&gt; \n  list_rbind()\n\n   match_prob num_stud\n1        0.00        1\n2        0.00        2\n3        0.00        3\n4        0.00        4\n5        0.03        5\n6        0.03        6\n7        0.04        7\n8        0.06        8\n9        0.11        9\n10       0.13       10\n11       0.14       11\n12       0.18       12\n13       0.18       13\n14       0.25       14\n15       0.25       15\n16       0.32       16\n17       0.37       17\n18       0.43       18\n19       0.44       19\n20       0.40       20\n21       0.43       21\n22       0.47       22\n23       0.48       23\n24       0.47       24\n25       0.61       25\n26       0.67       26\n27       0.63       27\n28       0.66       28\n29       0.73       29"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#visualize",
    "href": "slides/2024-10-21-iters.html#visualize",
    "title": "Iterations",
    "section": "Visualize",
    "text": "Visualize\n\nset.seed(123)\nnum_stud &lt;- 40\nnum_class &lt;- 1000\n\nmap(1:num_stud, birth_match_prob, reps = num_class) |&gt; \n  list_rbind()  |&gt; \n  ggplot(aes(x = num_stud, y = match_prob)) + \n  geom_line() + \n  labs(y = \"probability of birthday match\",\n       x = \"number of students in class\")"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#simulating-to",
    "href": "slides/2024-10-21-iters.html#simulating-to",
    "title": "Iterations",
    "section": "Simulating to…",
    "text": "Simulating to…\n\n\n… estimate probabilities (easier than calculus).\n… understand complicated models."
  },
  {
    "objectID": "slides/2024-10-21-iters.html#simulating-to-1",
    "href": "slides/2024-10-21-iters.html#simulating-to-1",
    "title": "Iterations",
    "section": "Simulating to…",
    "text": "Simulating to…\n\n… estimate probabilities (easier than calculus).\n… understand complicated models."
  },
  {
    "objectID": "slides/2024-10-21-iters.html#simulate-to",
    "href": "slides/2024-10-21-iters.html#simulate-to",
    "title": "Iterations",
    "section": "Simulate to…",
    "text": "Simulate to…\n\n\n… estimate probabilities (easier than calculus).\n… understand complicated models."
  },
  {
    "objectID": "slides/2024-10-21-iters.html#step-3-who-got-their-original-hat",
    "href": "slides/2024-10-21-iters.html#step-3-who-got-their-original-hat",
    "title": "Iterations",
    "section": "Step 3: who got their original hat?",
    "text": "Step 3: who got their original hat?\n\nhats == random_hats\n\n [1] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE\n\n# TRUE is 1, FALSE is 0\nsum(hats == random_hats)\n\n[1] 2\n\n# did at least one person get their hat?\nsum(hats == random_hats) &gt; 0\n\n[1] TRUE"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#example-2-birthday-problem",
    "href": "slides/2024-10-21-iters.html#example-2-birthday-problem",
    "title": "Iterations",
    "section": "Example 2: Birthday Problem",
    "text": "Example 2: Birthday Problem\nWhat is the probability that in a room of 29 people, at least 2 of them have the same birthday?"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#simulate-to-1",
    "href": "slides/2024-10-21-iters.html#simulate-to-1",
    "title": "Iterations",
    "section": "Simulate to…",
    "text": "Simulate to…\n\n… estimate probabilities (easier than calculus).\n… understand complicated models."
  },
  {
    "objectID": "slides/2024-10-21-iters.html#many-classrooms",
    "href": "slides/2024-10-21-iters.html#many-classrooms",
    "title": "Iterations",
    "section": "Many classrooms",
    "text": "Many classrooms\n\nset.seed(47)\nnum_stud &lt;- 29\nnum_class &lt;- 1000\nmap_dbl(1:num_class, ~class_duplicates(class_size = num_stud)) |&gt; \n  mean()\n\n[1] 0.654"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#bias-in-a-model",
    "href": "slides/2024-10-21-iters.html#bias-in-a-model",
    "title": "Iterations",
    "section": "Bias in a model",
    "text": "Bias in a model\nPopulation:\ntalent ~ Normal (100, 15)\ngrades ~ Normal (talent, 15)\nSAT ~ Normal (talent, 15)\nThe example is taken directly (and mostly verbatim) from a blog by Aaron Roth Algorithmic Unfairness Without Any Bias Baked In."
  },
  {
    "objectID": "slides/2024-10-21-iters.html#goal-for-admitting-students",
    "href": "slides/2024-10-21-iters.html#goal-for-admitting-students",
    "title": "Iterations",
    "section": "Goal for admitting students",
    "text": "Goal for admitting students\nCollege wants to admit students with\n\ntalent &gt; 115\n\n… but they only have access to grades and SAT which are noisy estimates of talent."
  },
  {
    "objectID": "slides/2024-10-21-iters.html#plan-for-accepting-students",
    "href": "slides/2024-10-21-iters.html#plan-for-accepting-students",
    "title": "Iterations",
    "section": "Plan for accepting students",
    "text": "Plan for accepting students\n\nRun a regression on a training dataset (talent is known for existing students)\nFind a model which predicts talent based on grades and SAT\nChoose students for whom predicted talent is above 115"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#flaw-in-the-plan",
    "href": "slides/2024-10-21-iters.html#flaw-in-the-plan",
    "title": "Iterations",
    "section": "Flaw in the plan …",
    "text": "Flaw in the plan …\n\nthere are two populations of students, the Reds and Blues.\nReds are the majority population (99%), and Blues are a small minority population (1%)\nthe Reds and the Blues are no different when it comes to talent: they both have the same talent distribution, as described above.\nthere is no bias baked into the grading or the exams: both the Reds and the Blues also have exactly the same grade and exam score distributions"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#what-is-really-different",
    "href": "slides/2024-10-21-iters.html#what-is-really-different",
    "title": "Iterations",
    "section": "What is really different?",
    "text": "What is really different?\n\nBut there is one difference: the Blues have more money than the Reds, so they each take the SAT twice, and report only the highest of the two scores to the college. This results in a small but noticeable bump in their average SAT scores, compared to the Reds."
  },
  {
    "objectID": "slides/2024-10-21-iters.html#key-aspect",
    "href": "slides/2024-10-21-iters.html#key-aspect",
    "title": "Iterations",
    "section": "Key aspect:",
    "text": "Key aspect:\n\nThe value of SAT means something different for the Reds versus the Blues\n\n(They have different feature distributions.)"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#lets-see-what-happens",
    "href": "slides/2024-10-21-iters.html#lets-see-what-happens",
    "title": "Iterations",
    "section": "Let’s see what happens …",
    "text": "Let’s see what happens …"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#two-models",
    "href": "slides/2024-10-21-iters.html#two-models",
    "title": "Iterations",
    "section": "Two models:",
    "text": "Two models:\nRed model (SAT taken once):\n\n\n# A tibble: 3 × 5\n  term        estimate std.error statistic p.value\n  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;\n1 (Intercept)   33.2     0.152        218.       0\n2 SAT            0.334   0.00149      224.       0\n3 grades         0.334   0.00149      225.       0\n\n\nBlue model (SAT is max score of two):\n\n\n# A tibble: 3 × 5\n  term        estimate std.error statistic   p.value\n  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;\n1 (Intercept)   25.3      1.60        15.8 2.04e- 50\n2 SAT            0.432    0.0161      26.7 3.35e-119\n3 grades         0.277    0.0154      18.0 6.83e- 63"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#new-data",
    "href": "slides/2024-10-21-iters.html#new-data",
    "title": "Iterations",
    "section": "New data",
    "text": "New data\n\nGenerate new data, use the two models separately.\nCan the models predict if a student has talent &gt; 115?"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#new-data-1",
    "href": "slides/2024-10-21-iters.html#new-data-1",
    "title": "Iterations",
    "section": "New data",
    "text": "New data\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n# A tibble: 2 × 5\n  color   tpr    fpr   fnr error\n  &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 blue  0.503 0.0379 0.497 0.109\n2 red   0.509 0.0378 0.491 0.109"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#two-models-doesnt-seem-right",
    "href": "slides/2024-10-21-iters.html#two-models-doesnt-seem-right",
    "title": "Iterations",
    "section": "TWO models doesn’t seem right????",
    "text": "TWO models doesn’t seem right????\nWhat if we fit only one model to the entire dataset?\nAfter all, there are laws against using protected classes to make decisions (housing, jobs, money loans, college, etc.)\n\n\n# A tibble: 3 × 5\n  term        estimate std.error statistic p.value\n  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;\n1 (Intercept)   33.1     0.151        219.       0\n2 SAT            0.334   0.00148      225.       0\n3 grades         0.334   0.00148      226.       0\n\n\n(The coefficients kinda look like the red model…)"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#how-do-the-error-rates-change",
    "href": "slides/2024-10-21-iters.html#how-do-the-error-rates-change",
    "title": "Iterations",
    "section": "How do the error rates change?",
    "text": "How do the error rates change?\n\n\n\n\n\n\n\n\n\n\n\n\nOne model:\n\n\n# A tibble: 2 × 5\n  color   tpr    fpr   fnr error\n  &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 blue  0.619 0.0627 0.381 0.112\n2 red   0.507 0.0375 0.493 0.109\n\n\nTwo separate models:\n\n\n# A tibble: 2 × 5\n  color   tpr    fpr   fnr error\n  &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 blue  0.503 0.0379 0.497 0.109\n2 red   0.509 0.0378 0.491 0.109"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#what-did-we-learn",
    "href": "slides/2024-10-21-iters.html#what-did-we-learn",
    "title": "Iterations",
    "section": "What did we learn?",
    "text": "What did we learn?\n\nwith two populations that have different feature distributions, learning a single classifier (that is prohibited from discriminating based on population) will fit the bigger of the two populations\n\n\ndepending on the nature of the distribution difference, it can be either to the benefit or the detriment of the minority population\nno explicit human bias, either on the part of the algorithm designer or the data gathering process\nthe problem is exacerbated if we artificially force the algorithm to be group blind\nwell-intentioned “fairness” regulations prohibiting decision makers form taking sensitive attributes into account can actually make things less fair and less accurate at the same time"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#simulate",
    "href": "slides/2024-10-21-iters.html#simulate",
    "title": "Iterations",
    "section": "Simulate?",
    "text": "Simulate?\n\ndifferent varying proportions\neffect due to variability\neffect due to SAT coefficient\ndifferent number of times the blues get to take the test\netc."
  },
  {
    "objectID": "slides/2024-10-21-iters.html#aside-ifelse",
    "href": "slides/2024-10-21-iters.html#aside-ifelse",
    "title": "Iterations",
    "section": "Aside: ifelse()",
    "text": "Aside: ifelse()\n\ndata.frame(value = c(-2:2)) |&gt;\n  mutate(abs_value = ifelse(value &gt;=0, value, -value))  # abs val\n\n  value abs_value\n1    -2         2\n2    -1         1\n3     0         0\n4     1         1\n5     2         2"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#aside-case_when",
    "href": "slides/2024-10-21-iters.html#aside-case_when",
    "title": "Iterations",
    "section": "Aside: case_when()",
    "text": "Aside: case_when()\n\nset.seed(4747)\ndiamonds |&gt; select(carat, cut, color, price) |&gt;\n  sample_n(20) |&gt;\n  mutate(price_cat = case_when(\n    price &gt; 10000 ~ \"expensive\",\n    price &gt; 1500 ~ \"medium\", \n    TRUE ~ \"inexpensive\"))\n\n# A tibble: 20 × 5\n   carat cut       color price price_cat  \n   &lt;dbl&gt; &lt;ord&gt;     &lt;ord&gt; &lt;int&gt; &lt;chr&gt;      \n 1  1.23 Very Good F     10276 expensive  \n 2  0.35 Premium   H       706 inexpensive\n 3  0.7  Good      E      2782 medium     \n 4  0.4  Ideal     D      1637 medium     \n 5  0.53 Ideal     G      1255 inexpensive\n 6  2.22 Ideal     G     14637 expensive  \n 7  0.3  Ideal     G       878 inexpensive\n 8  1.05 Ideal     H      4223 medium     \n 9  0.53 Premium   E      1654 medium     \n10  1.7  Ideal     H      7068 medium     \n11  0.31 Good      E       698 inexpensive\n12  0.31 Ideal     F       840 inexpensive\n13  1.03 Ideal     H      4900 medium     \n14  0.31 Premium   G       698 inexpensive\n15  1.56 Premium   G      8858 medium     \n16  1.71 Premium   G     11032 expensive  \n17  1    Good      E      5345 medium     \n18  1.86 Ideal     J     10312 expensive  \n19  1.08 Very Good E      3726 medium     \n20  0.31 Premium   E       698 inexpensive"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#aside-sample",
    "href": "slides/2024-10-21-iters.html#aside-sample",
    "title": "Iterations",
    "section": "Aside: sample()",
    "text": "Aside: sample()\nsampling, shuffling, and resampling: sample()\n\nset.seed(47)\nalph &lt;- letters[1:10]\nalph\n\n [1] \"a\" \"b\" \"c\" \"d\" \"e\" \"f\" \"g\" \"h\" \"i\" \"j\"\n\nsample(alph, 5, replace = FALSE) # sample (from a population)\n\n[1] \"i\" \"b\" \"g\" \"d\" \"a\"\n\nsample(alph, 5, replace = TRUE) # sample (from a population)\n\n[1] \"j\" \"g\" \"f\" \"i\" \"f\"\n\nsample(alph, 10, replace = FALSE)  # shuffle\n\n [1] \"f\" \"h\" \"i\" \"e\" \"g\" \"d\" \"c\" \"j\" \"b\" \"a\"\n\nsample(alph, 10, replace = TRUE)  # resample\n\n [1] \"e\" \"j\" \"e\" \"b\" \"e\" \"c\" \"f\" \"a\" \"e\" \"a\""
  },
  {
    "objectID": "slides/2024-10-21-iters.html#aside-set.seed",
    "href": "slides/2024-10-21-iters.html#aside-set.seed",
    "title": "Iterations",
    "section": "Aside: set.seed()",
    "text": "Aside: set.seed()\nWhat if we want to be able to generate the same random numbers (here on the interval from 0 to 1) over and over?\n\nset.seed(4747)\nrunif(4, 0, 1) # random uniform numbers\n\n[1] 0.1949071 0.3390270 0.5147919 0.4516470\n\nset.seed(123)\nrunif(4, 0, 1) # random uniform numbers\n\n[1] 0.2875775 0.7883051 0.4089769 0.8830174\n\nset.seed(4747)\nrunif(4, 0, 1) # random uniform numbers\n\n[1] 0.1949071 0.3390270 0.5147919 0.4516470"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#asset-allocation-problem-1",
    "href": "slides/2024-10-21-iters.html#asset-allocation-problem-1",
    "title": "Iterations",
    "section": "Asset allocation problem",
    "text": "Asset allocation problem\nTask: to model an asset allocation problem where you decide what portion of wealth should be allocated to risk-free investment or high-risk investment\n\nthe function calculates returns based on different asset allocations.\n\n\ncalculate_return &lt;- function(step, alpha) {\n  risk_free_rate &lt;- 1.03\n  risky_rate &lt;- rnorm(1, mean = 0, sd = 1) * 0.05 + 1\n  return(data.frame(step = step, \n                    return = (1 - alpha) * risk_free_rate + alpha * risky_rate))\n}\n\ncalculate_return(\"unicorn\", 0.47)\n\n     step   return\n1 unicorn 1.007048"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#let-alpha-0.5",
    "href": "slides/2024-10-21-iters.html#let-alpha-0.5",
    "title": "Iterations",
    "section": "Let alpha = 0.5",
    "text": "Let alpha = 0.5\n(half risky, half risk free)\n\ndecision_steps &lt;- 12\n\npmap(data.frame(step = 1:decision_steps,\n                alpha = rep(0.5, decision_steps)),\n     calculate_return) |&gt; \n  list_rbind()\n\n   step    return\n1     1 1.0244265\n2     2 0.9740712\n3     3 1.0111959\n4     4 1.0382488\n5     5 1.0019058\n6     6 0.9847674\n7     7 1.0296142\n8     8 0.9924038\n9     9 1.0381949\n10   10 1.0088956\n11   11 1.0370043\n12   12 1.0107057"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#many-runs",
    "href": "slides/2024-10-21-iters.html#many-runs",
    "title": "Iterations",
    "section": "Many runs",
    "text": "Many runs\n\nruns &lt;- 10\ndecision_steps &lt;- 12\n\nrun_func &lt;- function(run, steps, alpha){\n  pmap(data.frame(step = 1:steps,\n                  alpha = rep(alpha, steps)),\n       calculate_return) |&gt; \n    list_rbind() |&gt; \n    cbind(run_number = as.factor(run))\n}\n\nrun_func(\"happy\", 12, 0.5)\n\n   step    return run_number\n1     1 0.9972576      happy\n2     2 1.0503818      happy\n3     3 1.0133106      happy\n4     4 1.0305766      happy\n5     5 1.0424264      happy\n6     6 1.0278066      happy\n7     7 1.0088744      happy\n8     8 1.0280513      happy\n9     9 1.0270015      happy\n10   10 1.0495620      happy\n11   11 1.0483569      happy\n12   12 1.0089000      happy\n\nmap(1:runs, run_func, \n    steps = decision_steps,\n    alpha = 0.5) |&gt; \n  list_rbind()\n\n    step    return run_number\n1      1 1.0037332          1\n2      2 1.0305053          1\n3      3 1.0177365          1\n4      4 0.9851848          1\n5      5 1.0200471          1\n6      6 0.9777514          1\n7      7 1.0139097          1\n8      8 1.0394459          1\n9      9 1.0311656          1\n10    10 1.0111325          1\n11    11 1.0600142          1\n12    12 0.9529528          1\n13     1 1.0511925          2\n14     2 1.0188551          2\n15     3 1.0546398          2\n16     4 1.0286009          2\n17     5 1.0090312          2\n18     6 1.0116230          2\n19     7 0.9982508          2\n20     8 1.0397553          2\n21     9 0.9748453          2\n22    10 0.9994628          2\n23    11 1.0325967          2\n24    12 1.0265163          2\n25     1 0.9846161          3\n26     2 1.0106626          3\n27     3 1.0085478          3\n28     4 1.0253148          3\n29     5 0.9879959          3\n30     6 1.0761028          3\n31     7 1.0095107          3\n32     8 1.0417969          3\n33     9 1.0299429          3\n34    10 1.0483370          3\n35    11 1.0039636          3\n36    12 1.0177251          3\n37     1 0.9957903          4\n38     2 1.0446025          4\n39     3 1.0151633          4\n40     4 1.0208127          4\n41     5 1.0138992          4\n42     6 1.0241599          4\n43     7 0.9636553          4\n44     8 1.0330971          4\n45     9 1.0707355          4\n46    10 1.0341161          4\n47    11 1.0076286          4\n48    12 1.0437015          4\n49     1 1.0166442          5\n50     2 1.0424126          5\n51     3 0.9944647          5\n52     4 0.9669553          5\n53     5 1.0152975          5\n54     6 1.0145272          5\n55     7 1.0372179          5\n56     8 1.0407917          5\n57     9 0.9811040          5\n58    10 1.0213106          5\n59    11 0.9962674          5\n60    12 1.0518327          5\n61     1 0.9804384          6\n62     2 1.0313983          6\n63     3 1.0456102          6\n64     4 1.0019782          6\n65     5 0.9848773          6\n66     6 1.0166534          6\n67     7 1.0338028          6\n68     8 1.0222348          6\n69     9 0.9802758          6\n70    10 1.0156817          6\n71    11 1.0424656          6\n72    12 1.0575701          6\n73     1 1.0750144          7\n74     2 1.0058097          7\n75     3 0.9927478          7\n76     4 1.0009444          7\n77     5 1.0055233          7\n78     6 1.0573874          7\n79     7 0.9575212          7\n80     8 0.9957913          7\n81     9 1.0893832          7\n82    10 1.0135442          7\n83    11 1.0152496          7\n84    12 1.0331392          7\n85     1 1.0304361          8\n86     2 1.0111527          8\n87     3 1.0077437          8\n88     4 1.0031964          8\n89     5 1.0507032          8\n90     6 0.9713326          8\n91     7 1.0101054          8\n92     8 1.0556004          8\n93     9 0.9991680          8\n94    10 1.0232786          8\n95    11 1.0182200          8\n96    12 0.9987042          8\n97     1 1.0250592          9\n98     2 1.0300056          9\n99     3 0.9890955          9\n100    4 1.0395173          9\n101    5 1.0147912          9\n102    6 1.0243437          9\n103    7 0.9964191          9\n104    8 1.0782102          9\n105    9 0.9746246          9\n106   10 1.0194040          9\n107   11 1.0383502          9\n108   12 1.0508320          9\n109    1 1.0563048         10\n110    2 0.9850083         10\n111    3 1.0395162         10\n112    4 0.9711030         10\n113    5 1.0193429         10\n114    6 1.0259306         10\n115    7 0.9889117         10\n116    8 1.0418063         10\n117    9 1.0055857         10\n118   10 1.0155720         10\n119   11 1.0350093         10\n120   12 0.9916229         10"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#cummulative-product",
    "href": "slides/2024-10-21-iters.html#cummulative-product",
    "title": "Iterations",
    "section": "Cummulative product",
    "text": "Cummulative product\n\nnumbers &lt;- sample(1:5)\nnumbers\n\n[1] 5 4 2 1 3\n\ncumprod(numbers)\n\n[1]   5  20  40  40 120"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#cummulative-rates",
    "href": "slides/2024-10-21-iters.html#cummulative-rates",
    "title": "Iterations",
    "section": "Cummulative rates",
    "text": "Cummulative rates\n\nmap(1:runs, run_func, \n    steps = decision_steps,\n    alpha = 0.5) |&gt; \n  list_rbind() |&gt; \n  group_by(run_number) |&gt; \n  mutate(compound_return = cumprod(return))\n\n# A tibble: 120 × 4\n# Groups:   run_number [10]\n    step return run_number compound_return\n   &lt;int&gt;  &lt;dbl&gt; &lt;fct&gt;                &lt;dbl&gt;\n 1     1  0.984 1                    0.984\n 2     2  1.01  1                    0.990\n 3     3  1.04  1                    1.03 \n 4     4  0.987 1                    1.02 \n 5     5  1.04  1                    1.05 \n 6     6  1.04  1                    1.09 \n 7     7  0.994 1                    1.09 \n 8     8  1.01  1                    1.10 \n 9     9  1.01  1                    1.12 \n10    10  0.994 1                    1.11 \n# ℹ 110 more rows"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#returns-over-time",
    "href": "slides/2024-10-21-iters.html#returns-over-time",
    "title": "Iterations",
    "section": "Returns over time",
    "text": "Returns over time\n\ngraphcode\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nruns &lt;- 20\nmap(1:runs, run_func, \n    steps = decision_steps,\n    alpha = 0.5) |&gt; \n  list_rbind() |&gt; \n  group_by(run_number) |&gt; \n  mutate(compound_return = cumprod(return)) |&gt; \n  ggplot(aes(x = step, y = compound_return)) +\n  geom_line(aes(color = run_number)) +\n  theme(legend.position = \"none\") +\n  scale_x_continuous(breaks = seq(1,12)) + \n  labs(title = \"Simulations of returns from asset allocation, alpha = 0.5\")"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#aside-rnorm",
    "href": "slides/2024-10-21-iters.html#aside-rnorm",
    "title": "Iterations",
    "section": "Aside: rnorm()",
    "text": "Aside: rnorm()\nrnorm() calculates random normal values\n\nrnorm(3)\n\n[1] 1.0598770 0.2813142 0.1483487\n\nrnorm(3, mean = 0, sd = 1)\n\n[1] -1.5222088 -0.2609479  0.1393759\n\nrnorm(4, mean = 47, sd = 5)\n\n[1] 48.91283 45.11651 50.69179 42.14037"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#change-the-allocation",
    "href": "slides/2024-10-21-iters.html#change-the-allocation",
    "title": "Iterations",
    "section": "Change the allocation",
    "text": "Change the allocation\n\ngraphcode\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nruns &lt;- 20\nmap(1:runs, run_func, \n    steps = decision_steps, \n    alpha = 0.1) |&gt; \n  list_rbind() |&gt; \n  group_by(run_number) |&gt; \n  mutate(compound_return = cumprod(return)) |&gt; \n  ggplot(aes(x = step, y = compound_return)) +\n  geom_line(aes(color = run_number)) +\n  theme(legend.position = \"none\") +\n  scale_x_continuous(breaks = seq(1,12)) + \n  labs(title = \"Simulations of returns from asset allocation, alpha = 0.1\")"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#change-the-allocation-1",
    "href": "slides/2024-10-21-iters.html#change-the-allocation-1",
    "title": "Iterations",
    "section": "Change the allocation",
    "text": "Change the allocation\n\ngraphcode\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nruns &lt;- 20\nmap(1:runs, run_func, \n    steps = decision_steps, \n    alpha = 0.9) |&gt; \n  list_rbind() |&gt; \n  group_by(run_number) |&gt; \n  mutate(compound_return = cumprod(return)) |&gt; \n  ggplot(aes(x = step, y = compound_return)) +\n  geom_line(aes(color = run_number)) +\n  theme(legend.position = \"none\") +\n  scale_x_continuous(breaks = seq(1,12)) + \n  labs(title = \"Simulations of returns from asset allocation, alpha = 0.9\")"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#change-the-return",
    "href": "slides/2024-10-21-iters.html#change-the-return",
    "title": "Iterations",
    "section": "Change the return",
    "text": "Change the return\n\ncalculate returnrun function\n\n\n\ncalculate_return_sd10 &lt;- function(step, alpha) {\n  risk_free_rate &lt;- 1.03\n  risky_rate &lt;- rnorm(1, mean = 0, sd = 10) * 0.05 + 1\n  return(data.frame(step = step, \n                    return = (1 - alpha) * risk_free_rate + alpha * risky_rate))\n}\n\ncalculate_return(\"unicorn\", 0.47)\n\n     step   return\n1 unicorn 0.987021\n\n\n\n\n\nrun_func_sd10 &lt;- function(run, steps, alpha){\n  pmap(data.frame(step = 1:steps,\n                  alpha = rep(alpha, steps)),\n       calculate_return_sd10) |&gt; \n    list_rbind() |&gt; \n    cbind(run_number = as.factor(run))\n}"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#calculate-return",
    "href": "slides/2024-10-21-iters.html#calculate-return",
    "title": "Iterations",
    "section": "calculate return",
    "text": "calculate return\n\ncalculate_return_sd5 &lt;- function(step, alpha) {\n  risk_free_rate &lt;- 1.03\n  risky_rate &lt;- rnorm(1, mean = 0, sd = 5) * 0.05 + 1\n  return(data.frame(step = step, \n                    return = (1 - alpha) * risk_free_rate + alpha * risky_rate))\n}\n\ncalculate_return(\"unicorn\", 0.47)\n\n     step   return\n1 unicorn 1.003459"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#run-function",
    "href": "slides/2024-10-21-iters.html#run-function",
    "title": "Iterations",
    "section": "run function",
    "text": "run function\n\nrun_func_sd5 &lt;- function(run, steps, alpha){\n  pmap(data.frame(step = 1:steps,\n                  alpha = rep(alpha, steps)),\n       calculate_return_sd5) |&gt; \n    list_rbind() |&gt; \n    cbind(run_number = as.factor(run))\n}"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#does-the-change-impact-long-term",
    "href": "slides/2024-10-21-iters.html#does-the-change-impact-long-term",
    "title": "Iterations",
    "section": "Does the change impact long-term?",
    "text": "Does the change impact long-term?\n\ngraphcode\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nruns &lt;- 20\nmap(1:runs, run_func_sd10, \n    steps = decision_steps,\n    alpha = 0.5) |&gt; \n  list_rbind() |&gt; \n  group_by(run_number) |&gt; \n  mutate(compound_return = cumprod(return)) |&gt; \n  ggplot(aes(x = step, y = compound_return)) +\n  geom_line(aes(color = run_number)) +\n  theme(legend.position = \"none\") +\n  scale_x_continuous(breaks = seq(1,12)) + \n  labs(title = \"Simulations of returns from asset allocation, alpha = 0.5\")"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#graph",
    "href": "slides/2024-10-21-iters.html#graph",
    "title": "Iterations",
    "section": "graph",
    "text": "graph"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#code",
    "href": "slides/2024-10-21-iters.html#code",
    "title": "Iterations",
    "section": "code",
    "text": "code\n\nruns &lt;- 20\nmap(1:runs, run_func, \n    steps = decision_steps,\n    alpha = 0.5) |&gt; \n  list_rbind() |&gt; \n  group_by(run_number) |&gt; \n  mutate(compound_return = cumprod(return)) |&gt; \n  ggplot(aes(x = step, y = compound_return)) +\n  geom_line(aes(color = run_number)) +\n  theme(legend.position = \"none\") +\n  scale_x_continuous(breaks = seq(1,12)) + \n  labs(title = \"Simulations of returns from asset allocation, alpha = 0.5\")"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#graph-1",
    "href": "slides/2024-10-21-iters.html#graph-1",
    "title": "Iterations",
    "section": "graph",
    "text": "graph"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#code-1",
    "href": "slides/2024-10-21-iters.html#code-1",
    "title": "Iterations",
    "section": "code",
    "text": "code\n\nruns &lt;- 20\nmap(1:runs, run_func, \n    steps = decision_steps, \n    alpha = 0.1) |&gt; \n  list_rbind() |&gt; \n  group_by(run_number) |&gt; \n  mutate(compound_return = cumprod(return)) |&gt; \n  ggplot(aes(x = step, y = compound_return)) +\n  geom_line(aes(color = run_number)) +\n  theme(legend.position = \"none\") +\n  scale_x_continuous(breaks = seq(1,12)) + \n  labs(title = \"Simulations of returns from asset allocation, alpha = 0.1\")"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#asset-allocation",
    "href": "slides/2024-10-21-iters.html#asset-allocation",
    "title": "Iterations",
    "section": "Asset allocation",
    "text": "Asset allocation\nTask: to model an asset allocation problem where you decide what portion of wealth should be allocated to risk-free investment or high-risk investment\n\nthe function calculates returns based on different asset allocations.\n\n\ncalculate_return &lt;- function(step, alpha) {\n  risk_free_rate &lt;- 1.03\n  risky_rate &lt;- rnorm(1, mean = 0, sd = 1) * 0.05 + 1\n  return(data.frame(step = step, \n                    return = (1 - alpha) * risk_free_rate + alpha * risky_rate))\n}\n\ncalculate_return(\"unicorn\", 0.47)\n\n     step   return\n1 unicorn 1.007048"
  },
  {
    "objectID": "slides/2024-10-21-iters.html#asset-allocation-1",
    "href": "slides/2024-10-21-iters.html#asset-allocation-1",
    "title": "Iterations",
    "section": "Asset allocation",
    "text": "Asset allocation\nTask: to model an asset allocation problem where you decide what portion of wealth should be allocated to risk-free investment or high-risk investment\n\nthe function calculates returns based on different asset allocations.\n\n\ncalculate_return &lt;- function(step, alpha) {\n  risk_free_rate &lt;- 1.03\n  risky_rate &lt;- rnorm(1, mean = 0, sd = 1) * 0.05 + 1\n  return(data.frame(step = step, \n                    return = (1 - alpha) * risk_free_rate + alpha * risky_rate))\n}\n\ncalculate_return(\"unicorn\", 0.47)\n\n     step   return\n1 unicorn 1.034815"
  },
  {
    "objectID": "slides/2024-10-28-perm.html",
    "href": "slides/2024-10-28-perm.html",
    "title": "Permutation Tests",
    "section": "",
    "text": "Hypothesis tests\nPermutation tests"
  },
  {
    "objectID": "slides/2024-10-28-perm.html#example-helper-or-hinderer",
    "href": "slides/2024-10-28-perm.html#example-helper-or-hinderer",
    "title": "Permutation Tests",
    "section": "Example: helper or hinderer",
    "text": "Example: helper or hinderer\n\nIn a study reported in the November 2007 issue of Nature, researchers investigated whether infants take into account an individual’s actions towards others in evaluating that individual as appealing or aversive, perhaps laying for the foundation for social interaction (Hamlin, Wynn, and Bloom 2007). In other words, do children who aren’t even yet talking still form impressions as to someone’s friendliness based on their actions? In one component of the study, 10-month-old infants were shown a “climber” character (a piece of wood with “googly” eyes glued onto it) that could not make it up a hill in two tries. Then the infants were shown two scenarios for the climber’s next try, one where the climber was pushed to the top of the hill by another character (the “helper” toy) and one where the climber was pushed back down the hill by another character (the “hinderer” toy). The infant was alternately shown these two scenarios several times. Then the child was presented with both pieces of wood (the helper and the hinderer characters) and asked to pick one to play with."
  },
  {
    "objectID": "slides/2024-10-28-perm.html#parts-of-a-hypothesis-test",
    "href": "slides/2024-10-28-perm.html#parts-of-a-hypothesis-test",
    "title": "Permutation Tests",
    "section": "Parts of a hypothesis test",
    "text": "Parts of a hypothesis test\n\nWhat are the observational units?\n\ninfants\n\nWhat is the variable? What type of variable?\n\nchoice of helper or hindered: categorical\n\nWhat is the statistic?\n\n\\(\\hat{p}\\) = proportion of infants who chose helper = 14/16 = 0.875\n\nWhat is the parameter?\n\np = proportion of all infants who might choose helper (not measurable!)"
  },
  {
    "objectID": "slides/2024-10-28-perm.html#hypotheses",
    "href": "slides/2024-10-28-perm.html#hypotheses",
    "title": "Permutation Tests",
    "section": "Hypotheses",
    "text": "Hypotheses\n\\(H_0\\): Null hypothesis. Babies (or rather, the population of babies under consideration) have no inherent preference for the helper or the hinderer shape.\n\\(H_A\\): Alternative hypothesis. Babies (or rather, the population of babies under consideration) are more likely to prefer the helper shape over the hinderer shape."
  },
  {
    "objectID": "slides/2024-10-28-perm.html#p-value",
    "href": "slides/2024-10-28-perm.html#p-value",
    "title": "Permutation Tests",
    "section": "p-value",
    "text": "p-value\n\np-value is the probability of our data or more extreme if nothing interesting is going on.\n\n\n\n\n\n\n\n\n\ncompletely arbitrary cutoff\n\\(\\rightarrow\\)\ngenerally accepted conclusion\n\n\n\n\np-value \\(&gt;\\) 0.10\n\\(\\rightarrow\\)\nno evidence against the null model\n\n\n0.05 \\(&lt;\\) p-value \\(&lt;\\) 0.10\n\\(\\rightarrow\\)\nmoderate evidence against the null model\n\n\n0.01 \\(&lt;\\) p-value \\(&lt;\\) 0.05\n\\(\\rightarrow\\)\nstrong evidence against the null model\n\n\np-value \\(&lt;\\) 0.01\n\\(\\rightarrow\\)\nvery strong evidence against the null model"
  },
  {
    "objectID": "slides/2024-10-28-perm.html#computation",
    "href": "slides/2024-10-28-perm.html#computation",
    "title": "Permutation Tests",
    "section": "Computation",
    "text": "Computation\nFirst find the statistic\n\n# to control the randomness\nset.seed(47)\n\n# first create a data frame with the Infant data\nInfants &lt;- read.delim(\"http://www.rossmanchance.com/iscam3/data/InfantData.txt\")\n\n# find the observed number of babies who chose the helper\nhelp_obs &lt;- Infants |&gt; \n  summarize(prop_help = mean(choice == \"helper\")) |&gt; \n  pull()\nhelp_obs\n\n[1] 0.875"
  },
  {
    "objectID": "slides/2024-10-28-perm.html#computation-1",
    "href": "slides/2024-10-28-perm.html#computation-1",
    "title": "Permutation Tests",
    "section": "Computation",
    "text": "Computation\nFind the sampling distribution under the condition that the null hypothesis is true.\n\nfunctionrepeatvizviz code\n\n\n\n# write a function to simulate a set of infants who are \n# equally likely to choose the helper or the hinderer\n\nrandom_choice &lt;- function(rep, num_babies){\n  choice = sample(c(\"helper\", \"hinderer\"), size = num_babies,\n                  replace = TRUE, prob = c(0.5, 0.5))\n  return(mean(choice == \"helper\"))\n}\n\n\n\n\n# repeat the function many times\nmap_dbl(c(1:10), random_choice, num_babies = 16)\n\n [1] 0.6875 0.3750 0.4375 0.3750 0.5000 0.5000 0.6250 0.4375 0.6875 0.6250\n\nnum_exper &lt;- 5000\nhelp_random &lt;- map_dbl(c(1:num_exper), random_choice, \n                            num_babies = 16)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n# visualize null sampling distribution\nhelp_random |&gt; \n  data.frame() |&gt; \n  ggplot(aes(x = help_random)) + \n  geom_histogram() + \n  labs(x = \"proportion of babies who chose the helper\",\n       title = \"sampling distribution when null hypothesis is true\",\n       subtitle = \"that is, no inherent preference for helper or hinderer\")"
  },
  {
    "objectID": "slides/2024-10-28-perm.html#computation-2",
    "href": "slides/2024-10-28-perm.html#computation-2",
    "title": "Permutation Tests",
    "section": "Computation",
    "text": "Computation\nAre the null values consistent with the observed value?\n\nvizp-valueviz code\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n# the p-value!\nsum(help_random &gt;= help_obs) / num_exper\n\n[1] 0.0022\n\n\n\n\n\n# visualize null sampling distribution\nhelp_random |&gt; \n  data.frame() |&gt; \n  ggplot(aes(x = help_random)) + \n  geom_histogram() + \n  geom_vline(xintercept = help_obs, color = \"red\") + \n  labs(x = \"proportion of babies who chose the helper\",\n       title = \"sampling distribution when null hypothesis is true\",\n       subtitle = \"that is, no inherent preference for helper or hinderer\")"
  },
  {
    "objectID": "slides/2024-10-28-perm.html#all-together-structure-of-a-hypothesis-test",
    "href": "slides/2024-10-28-perm.html#all-together-structure-of-a-hypothesis-test",
    "title": "Permutation Tests",
    "section": "All together: structure of a hypothesis test",
    "text": "All together: structure of a hypothesis test\n\ndecide on a research question (which will determine the test)\ncollect data, specify the variables of interest\nstate the null (and alternative) hypothesis values (often statements about parameters)\n\nthe null claim is the science we want to reject\nthe alternative claim is the science we want to demonstrate\n\ngenerate a (null) sampling distribution to describe the variability of the statistic that was calculated along the way\nvisualize the distribution of the statistics under the null model\nget p-value to measure the consistency of the observed statistic and the possible values of the statistic under the null model\nmake a conclusion using words that describe the research setting"
  },
  {
    "objectID": "slides/2024-10-28-perm.html#hypotheses-1",
    "href": "slides/2024-10-28-perm.html#hypotheses-1",
    "title": "Permutation Tests",
    "section": "Hypotheses",
    "text": "Hypotheses\n\nHypothesis Testing compares data to the expectation of a specific null hypothesis. If the data are unusual, assuming that the null hypothesis is true, then the null hypothesis is rejected.\nThe Null Hypothesis, \\(H_0\\), is a specific statement about a population made for the purposes of argument. A good null hypothesis is a statement that would be interesting to reject.\nThe Alternative Hypothesis, \\(H_A\\), is a specific statement about a population that is in the researcher’s interest to demonstrate. Typically, the alternative hypothesis contains all the values of the population that are not included in the null hypothesis.\nIn a two-sided (or two-tailed) test, the alternative hypothesis includes values on both sides of the value specified by the null hypothesis.\nIn a one-sided (or one-tailed) test, the alternative hypothesis includes parameter values on only one side of the value specified by the null hypothesis. \\(H_0\\) is rejected only if the data depart from it in the direction stated by \\(H_A\\)."
  },
  {
    "objectID": "slides/2024-10-28-perm.html#example-helper-or-hinderer-1",
    "href": "slides/2024-10-28-perm.html#example-helper-or-hinderer-1",
    "title": "Permutation Tests",
    "section": "Example: helper or hinderer",
    "text": "Example: helper or hinderer\n\nInfant videos\n“Social evaluation by preverbal infants”, Nature 2007"
  },
  {
    "objectID": "slides/2024-10-28-perm.html#references",
    "href": "slides/2024-10-28-perm.html#references",
    "title": "Permutation Tests",
    "section": "References",
    "text": "References\n\n\n\n\nHamlin, J. Kiley, Karen Wynn, and Paul Bloom. 2007. “Social Evaluation by Preverbal Infants.” Nature 450: 557–59."
  },
  {
    "objectID": "slides/2024-10-28-perm.html#statistics-without-the-agonizing-pain",
    "href": "slides/2024-10-28-perm.html#statistics-without-the-agonizing-pain",
    "title": "Permutation Tests",
    "section": "Statistics Without the Agonizing Pain",
    "text": "Statistics Without the Agonizing Pain\n\nJohn Rauser of Pintrest (now Amazon), speaking at Strata + Hadoop 2014. https://blog.revolutionanalytics.com/2014/10/statistics-doesnt-have-to-be-that-hard.html"
  },
  {
    "objectID": "slides/2024-10-28-perm.html#logic-of-hypothesis-tests",
    "href": "slides/2024-10-28-perm.html#logic-of-hypothesis-tests",
    "title": "Permutation Tests",
    "section": "Logic of hypothesis tests",
    "text": "Logic of hypothesis tests\n\nChoose a statistic that measures the effect.\nConstruct the sampling distribution under \\(H_0\\).\nLocate the observed statistic in the null sampling distribution.\np-value is the probability of the observed data or more extreme if the null hypothesis is true"
  },
  {
    "objectID": "slides/2024-10-28-perm.html#logic-of-permutation-tests",
    "href": "slides/2024-10-28-perm.html#logic-of-permutation-tests",
    "title": "Permutation Tests",
    "section": "Logic of permutation tests",
    "text": "Logic of permutation tests\n\nChoose a test statistic.\nShuffle the data (force the null hypothesis to be true). Using the shuffled statistics, create a null sampling distribution of the test statistic (under \\(H_0\\)).\nFind the observed test statistic on the null sampling distribution.\nCompute the p-value (observed data or more extreme). The p-value can be one or two-sided."
  },
  {
    "objectID": "slides/2024-10-28-perm.html#consider-the-blizzard-entertainment-data",
    "href": "slides/2024-10-28-perm.html#consider-the-blizzard-entertainment-data",
    "title": "Permutation Tests",
    "section": "Consider the Blizzard Entertainment data",
    "text": "Consider the Blizzard Entertainment data\nIn a revolt over salary inequities, Blizzard Entertainment workers shared salary information.\n\ndatawrangling\n\n\n\n\n# A tibble: 409 × 4\n   percent_incr salary_type annual_salary performance_rating\n          &lt;dbl&gt; &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;             \n 1          1   Salaried               1  High              \n 2          1   Salaried               1  Successful        \n 3          1   Salaried               1  High              \n 4          1   Hourly             33987. Successful        \n 5         NA   Hourly             34798. High              \n 6         NA   Hourly             35360  &lt;NA&gt;              \n 7         NA   Hourly             37440  &lt;NA&gt;              \n 8          0   Hourly             37814. &lt;NA&gt;              \n 9          4   Hourly             41101. Top               \n10          1.2 Hourly             42328  &lt;NA&gt;              \n# ℹ 399 more rows\n\n\n\n\n\nblizzard_salary &lt;- blizzard_salary |&gt;\n  mutate(\n    annual_salary = case_when(\n      salary_type == \"week\" ~ current_salary * 52,\n      salary_type == \"hour\" ~ current_salary * 40 * 52,\n      TRUE ~ current_salary\n    ),\n    performance_rating = if_else(performance_rating == \"Developing\", \"Poor\", performance_rating)\n  ) |&gt;\n  filter(salary_type != \"week\") |&gt;\n  mutate(\n    salary_type = if_else(salary_type == \"hour\", \"Hourly\", \"Salaried\")\n  ) |&gt;\n  filter(!is.na(annual_salary)) |&gt;\n  select(percent_incr, salary_type, annual_salary, performance_rating)"
  },
  {
    "objectID": "slides/2024-10-28-perm.html#summary-of-the-variable-of-interest",
    "href": "slides/2024-10-28-perm.html#summary-of-the-variable-of-interest",
    "title": "Permutation Tests",
    "section": "Summary of the variable of interest",
    "text": "Summary of the variable of interest\n\nhsb2 |&gt; \n  group_by(schtyp) |&gt; \n  summarize(ave_math = mean(math),\n            med_math = median(math))\n\n# A tibble: 2 × 3\n  schtyp  ave_math med_math\n  &lt;fct&gt;      &lt;dbl&gt;    &lt;dbl&gt;\n1 public      52.2     52  \n2 private     54.8     53.5"
  },
  {
    "objectID": "slides/2024-10-28-perm.html#consider-blizzard-entertainment-data",
    "href": "slides/2024-10-28-perm.html#consider-blizzard-entertainment-data",
    "title": "Permutation Tests",
    "section": "Consider Blizzard Entertainment data",
    "text": "Consider Blizzard Entertainment data\nIn a revolt over salary inequities, Blizzard Entertainment workers shared salary information.\n\ndatawrangling\n\n\n\n\n# A tibble: 409 × 4\n   percent_incr salary_type annual_salary performance_rating\n          &lt;dbl&gt; &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;             \n 1          1   Salaried               1  High              \n 2          1   Salaried               1  Successful        \n 3          1   Salaried               1  High              \n 4          1   Hourly             33987. Successful        \n 5         NA   Hourly             34798. High              \n 6         NA   Hourly             35360  &lt;NA&gt;              \n 7         NA   Hourly             37440  &lt;NA&gt;              \n 8          0   Hourly             37814. &lt;NA&gt;              \n 9          4   Hourly             41101. Top               \n10          1.2 Hourly             42328  &lt;NA&gt;              \n# ℹ 399 more rows\n\n\n\n\n\nlibrary(openinto)\nblizzard_salary &lt;- blizzard_salary |&gt;\n  mutate(\n    annual_salary = case_when(\n      salary_type == \"week\" ~ current_salary * 52,\n      salary_type == \"hour\" ~ current_salary * 40 * 52,\n      TRUE ~ current_salary\n    ),\n    performance_rating = if_else(performance_rating == \"Developing\", \"Poor\", performance_rating)\n  ) |&gt;\n  filter(salary_type != \"week\") |&gt;\n  mutate(\n    salary_type = if_else(salary_type == \"hour\", \"Hourly\", \"Salaried\")\n  ) |&gt;\n  filter(!is.na(annual_salary)) |&gt;\n  select(percent_incr, salary_type, annual_salary, performance_rating)"
  },
  {
    "objectID": "slides/2024-10-28-perm.html#visualize-the-relationship-of-interest",
    "href": "slides/2024-10-28-perm.html#visualize-the-relationship-of-interest",
    "title": "Permutation Tests",
    "section": "Visualize the relationship of interest",
    "text": "Visualize the relationship of interest\n\nhsb2 |&gt; \n  ggplot(aes(x = schtyp, y = math)) + \n  geom_boxplot()"
  },
  {
    "objectID": "slides/2024-10-28-perm.html#test-the-relationship-of-interest",
    "href": "slides/2024-10-28-perm.html#test-the-relationship-of-interest",
    "title": "Permutation Tests",
    "section": "Test the relationship of interest",
    "text": "Test the relationship of interest\n\nhsb2 |&gt; \n  group_by(schtyp) |&gt; \n  summarize(ave_math = mean(math),\n            med_math = median(math))\n\n# A tibble: 2 × 3\n  schtyp  ave_math med_math\n  &lt;fct&gt;      &lt;dbl&gt;    &lt;dbl&gt;\n1 public      52.2     52  \n2 private     54.8     53.5\n\nhsb2 |&gt; \n  group_by(schtyp) |&gt; \n  summarize(ave_math = mean(math),\n            med_math = median(math)) |&gt; \n  summarize(ave_diff = diff(ave_math),\n            med_diff = diff(med_math))\n\n# A tibble: 1 × 2\n  ave_diff med_diff\n     &lt;dbl&gt;    &lt;dbl&gt;\n1     2.51      1.5\n\n\n\nstate the null (and alternative) hypothesis values (often statements about parameters)\n\nthe null claim is the science we want to reject\nthe alternative claim is the science we want to demonstrate\n\ngenerate a (null) sampling distribution to describe the variability of the statistic that was calculated along the way\nvisualize the distribution of the statistics under the null model\nget p-value to measure the consistency of the observed statistic and the possible values of the statistic under the null model\nmake a conclusion using words that describe the research setting"
  },
  {
    "objectID": "slides/2024-10-28-perm.html#applet-for-two-sample-permutation-tests",
    "href": "slides/2024-10-28-perm.html#applet-for-two-sample-permutation-tests",
    "title": "Permutation Tests",
    "section": "Applet for two sample permutation tests",
    "text": "Applet for two sample permutation tests\n\npermutation test for two samples from Rossman Chance applets."
  },
  {
    "objectID": "slides/2024-10-28-perm.html#consider-high-school-beyond-survey",
    "href": "slides/2024-10-28-perm.html#consider-high-school-beyond-survey",
    "title": "Permutation Tests",
    "section": "Consider High School & Beyond survey",
    "text": "Consider High School & Beyond survey\nData: 200 randomly selected observations from the High School and Beyond survey, conducted on high school seniors by the National Center for Educational Statistics.\nResearch Question: in the population, are private school kids more likely to have a higher math score?\n\\[H_0: \\mu_{private} = \\mu_{public}\\] \\[H_A: \\mu_{private} &gt; \\mu_{public}\\]\nWhere \\(\\mu\\) is the average math score in the population.\n\nlibrary(openintro)\nhsb2\n\n# A tibble: 200 × 11\n      id gender race          ses   schtyp prog   read write  math science socst\n   &lt;int&gt; &lt;chr&gt;  &lt;chr&gt;         &lt;fct&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;   &lt;int&gt; &lt;int&gt;\n 1    70 male   white         low   public gene…    57    52    41      47    57\n 2   121 female white         midd… public voca…    68    59    53      63    61\n 3    86 male   white         high  public gene…    44    33    54      58    31\n 4   141 male   white         high  public voca…    63    44    47      53    56\n 5   172 male   white         midd… public acad…    47    52    57      53    61\n 6   113 male   white         midd… public acad…    44    52    51      63    61\n 7    50 male   african amer… midd… public gene…    50    59    42      53    61\n 8    11 male   hispanic      midd… public acad…    34    46    45      39    36\n 9    84 male   white         midd… public gene…    63    57    54      58    51\n10    48 male   african amer… midd… public acad…    57    55    52      50    51\n# ℹ 190 more rows"
  },
  {
    "objectID": "slides/2024-10-28-perm.html#high-school-beyond-survey",
    "href": "slides/2024-10-28-perm.html#high-school-beyond-survey",
    "title": "Permutation Tests",
    "section": "High School & Beyond survey",
    "text": "High School & Beyond survey\nData: 200 randomly selected observations from the High School and Beyond survey, conducted on high school seniors by the National Center for Educational Statistics.\nResearch Question: in the population, do private school kids have a higher math score on average?\n\\[H_0: \\mu_{private} = \\mu_{public}\\] \\[H_A: \\mu_{private} &gt; \\mu_{public}\\]\n\\(\\mu\\) is the average math score in the population.\n\nlibrary(openintro)\nhsb2\n\n# A tibble: 200 × 11\n      id gender race          ses   schtyp prog   read write  math science socst\n   &lt;int&gt; &lt;chr&gt;  &lt;chr&gt;         &lt;fct&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;   &lt;int&gt; &lt;int&gt;\n 1    70 male   white         low   public gene…    57    52    41      47    57\n 2   121 female white         midd… public voca…    68    59    53      63    61\n 3    86 male   white         high  public gene…    44    33    54      58    31\n 4   141 male   white         high  public voca…    63    44    47      53    56\n 5   172 male   white         midd… public acad…    47    52    57      53    61\n 6   113 male   white         midd… public acad…    44    52    51      63    61\n 7    50 male   african amer… midd… public gene…    50    59    42      53    61\n 8    11 male   hispanic      midd… public acad…    34    46    45      39    36\n 9    84 male   white         midd… public gene…    63    57    54      58    51\n10    48 male   african amer… midd… public acad…    57    55    52      50    51\n# ℹ 190 more rows"
  },
  {
    "objectID": "slides/2024-10-28-perm.html#summary-of-the-variables",
    "href": "slides/2024-10-28-perm.html#summary-of-the-variables",
    "title": "Permutation Tests",
    "section": "Summary of the variables",
    "text": "Summary of the variables\n\nhsb2 |&gt; \n  group_by(schtyp) |&gt; \n  summarize(ave_math = mean(math),\n            med_math = median(math))\n\n# A tibble: 2 × 3\n  schtyp  ave_math med_math\n  &lt;fct&gt;      &lt;dbl&gt;    &lt;dbl&gt;\n1 public      52.2     52  \n2 private     54.8     53.5"
  },
  {
    "objectID": "slides/2024-10-28-perm.html#calculate-the-observed-statistics",
    "href": "slides/2024-10-28-perm.html#calculate-the-observed-statistics",
    "title": "Permutation Tests",
    "section": "Calculate the observed statistic(s)",
    "text": "Calculate the observed statistic(s)\nFor fun, we are calculating both the difference in averages as well as the difference in medians. That is, we have two different observed summary statistics to work with.\n\nhsb2 |&gt; \n  group_by(schtyp) |&gt; \n  summarize(ave_math = mean(math),\n            med_math = median(math))\n\n# A tibble: 2 × 3\n  schtyp  ave_math med_math\n  &lt;fct&gt;      &lt;dbl&gt;    &lt;dbl&gt;\n1 public      52.2     52  \n2 private     54.8     53.5\n\nhsb2 |&gt; \n  group_by(schtyp) |&gt; \n  summarize(ave_math = mean(math),\n            med_math = median(math)) |&gt; \n  summarize(ave_diff = diff(ave_math),\n            med_diff = diff(med_math))\n\n# A tibble: 1 × 2\n  ave_diff med_diff\n     &lt;dbl&gt;    &lt;dbl&gt;\n1     2.51      1.5"
  },
  {
    "objectID": "slides/2024-10-28-perm.html#generate-a-null-sampling-distribution.",
    "href": "slides/2024-10-28-perm.html#generate-a-null-sampling-distribution.",
    "title": "Permutation Tests",
    "section": "Generate a null sampling distribution.",
    "text": "Generate a null sampling distribution.\n\nperm_data &lt;- function(rep, data){\n  data |&gt; \n    select(schtyp, math) |&gt; \n    mutate(math_perm = sample(math, replace = FALSE)) |&gt; \n    group_by(schtyp) |&gt; \n    summarize(obs_ave = mean(math),\n              obs_med = median(math),\n              perm_ave = mean(math_perm),\n              perm_med = median(math_perm)) |&gt; \n    summarize(obs_ave_diff = diff(obs_ave),\n              obs_med_diff = diff(obs_med),\n              perm_ave_diff = diff(perm_ave),\n              perm_med_diff = diff(perm_med),\n              rep = rep)\n}\n\nmap(c(1:10), perm_data, data = hsb2) |&gt; \n  list_rbind()\n\n# A tibble: 10 × 5\n   obs_ave_diff obs_med_diff perm_ave_diff perm_med_diff   rep\n          &lt;dbl&gt;        &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt; &lt;int&gt;\n 1         2.51          1.5         2.62            2.5     1\n 2         2.51          1.5         0.757          -1       2\n 3         2.51          1.5         1.65            2       3\n 4         2.51          1.5        -0.805          -0.5     4\n 5         2.51          1.5         1.80            2.5     5\n 6         2.51          1.5         2.92            3       6\n 7         2.51          1.5         1.91            2.5     7\n 8         2.51          1.5        -2.55           -3.5     8\n 9         2.51          1.5        -1.21           -3       9\n10         2.51          1.5         1.32            1      10"
  },
  {
    "objectID": "slides/2024-10-28-perm.html#visualize-the-null-sampling-distribution-average",
    "href": "slides/2024-10-28-perm.html#visualize-the-null-sampling-distribution-average",
    "title": "Permutation Tests",
    "section": "Visualize the null sampling distribution (average)",
    "text": "Visualize the null sampling distribution (average)\n\nset.seed(47)\nperm_stats &lt;- \n  map(c(1:500), perm_data, data = hsb2) |&gt; \n  list_rbind() \n\nperm_stats |&gt; \n  ggplot(aes(x = perm_ave_diff)) + \n  geom_histogram() + \n  geom_vline(aes(xintercept = obs_ave_diff), color = \"red\")"
  },
  {
    "objectID": "slides/2024-10-28-perm.html#visualize-the-null-sampling-distribution-median",
    "href": "slides/2024-10-28-perm.html#visualize-the-null-sampling-distribution-median",
    "title": "Permutation Tests",
    "section": "Visualize the null sampling distribution (median)",
    "text": "Visualize the null sampling distribution (median)\n\nperm_stats |&gt; \n  ggplot(aes(x = perm_med_diff)) + \n  geom_histogram() + \n  geom_vline(aes(xintercept = obs_med_diff), color = \"red\")"
  },
  {
    "objectID": "slides/2024-10-28-perm.html#p-value-2",
    "href": "slides/2024-10-28-perm.html#p-value-2",
    "title": "Permutation Tests",
    "section": "p-value",
    "text": "p-value\n\nperm_stats |&gt; \n  summarize(p_val_ave = mean(perm_ave_diff &gt; obs_ave_diff),\n            p_val_med = mean(perm_med_diff &gt; obs_med_diff))\n\n# A tibble: 1 × 2\n  p_val_ave p_val_med\n      &lt;dbl&gt;     &lt;dbl&gt;\n1     0.086      0.27"
  },
  {
    "objectID": "slides/2024-10-28-perm.html#conclusion",
    "href": "slides/2024-10-28-perm.html#conclusion",
    "title": "Permutation Tests",
    "section": "Conclusion",
    "text": "Conclusion\nFrom these data, the observed differences seem to be consistent with the distribution of differences in the null sampling distribution.\nThere is no evidence to reject the null hypothesis.\nWe cannot claim that in the population the average math scores for private school kids is larger than the average math scores for public school kids (p-value = 0.086).\nWe cannot claim that in the population the median math scores for private school kids is larger than the median math scores for public school kids (p-value = 0.27)."
  },
  {
    "objectID": "slides/2024-10-28-perm.html#what-if-the-hypotheses-were-two-sided",
    "href": "slides/2024-10-28-perm.html#what-if-the-hypotheses-were-two-sided",
    "title": "Permutation Tests",
    "section": "What if the hypotheses were two-sided?",
    "text": "What if the hypotheses were two-sided?\n\\(H_0: \\mu_{private} = \\mu_{public}\\) and \\(H_A: \\mu_{private} \\ne \\mu_{public}\\)"
  },
  {
    "objectID": "slides/2024-10-28-perm.html#two-sided-test",
    "href": "slides/2024-10-28-perm.html#two-sided-test",
    "title": "Permutation Tests",
    "section": "Two-sided test:",
    "text": "Two-sided test:\n\\(H_0: \\mu_{private} = \\mu_{public}\\) and \\(H_A: \\mu_{private} \\ne \\mu_{public}\\)"
  },
  {
    "objectID": "slides/2024-10-28-perm.html#two-sided-p-value",
    "href": "slides/2024-10-28-perm.html#two-sided-p-value",
    "title": "Permutation Tests",
    "section": "Two-sided p-value",
    "text": "Two-sided p-value\n\nperm_stats |&gt; \n    summarize(p_val_ave = \n                mean(perm_ave_diff &gt; obs_ave_diff | \n                       perm_ave_diff &lt; -obs_ave_diff),\n              p_val_med = \n              mean(perm_med_diff &gt; obs_med_diff | \n                     perm_med_diff &lt; -obs_med_diff))\n\n# A tibble: 1 × 2\n  p_val_ave p_val_med\n      &lt;dbl&gt;     &lt;dbl&gt;\n1     0.154     0.534"
  },
  {
    "objectID": "slides/2024-10-28-perm.html#two-sided-conclusion",
    "href": "slides/2024-10-28-perm.html#two-sided-conclusion",
    "title": "Permutation Tests",
    "section": "Two-sided conclusion",
    "text": "Two-sided conclusion\nFrom these data, the observed differences seem to be consistent with the distribution of differences in the null sampling distribution.\nThere is no evidence to reject the null hypothesis.\nWe cannot claim that there is a difference in average math scores in the population (p-value = 0.154).\nWe cannot claim that there is a difference in median math scores int he population (p-value = 0.534)."
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#important-tool",
    "href": "slides/2024-11-04-webscrape.html#important-tool",
    "title": "Web Scraping",
    "section": "Important tool",
    "text": "Important tool\nOur approach to web scraping relies on the Chrome browser and an extension called a Selector Gadget. Download them here:\n\nChrome\nSelectorGadget from Chrome or SelectorGadget vignette etc."
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#reading-the-student-life",
    "href": "slides/2024-11-04-webscrape.html#reading-the-student-life",
    "title": "Web Scraping",
    "section": "Reading The Student Life",
    "text": "Reading The Student Life\n\nHow often do you read The Student Life?\na. Every day\nb. 3-5 times a week\nc. Once a week\nd. Rarely"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#reading-the-student-life-1",
    "href": "slides/2024-11-04-webscrape.html#reading-the-student-life-1",
    "title": "Web Scraping",
    "section": "Reading The Student Life",
    "text": "Reading The Student Life\n\nWhat do you think is the most common word in the titles of The Student Life opinion pieces?"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#analyzing-the-student-life",
    "href": "slides/2024-11-04-webscrape.html#analyzing-the-student-life",
    "title": "Web Scraping",
    "section": "Analyzing The Student Life",
    "text": "Analyzing The Student Life"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#reading-the-student-life-2",
    "href": "slides/2024-11-04-webscrape.html#reading-the-student-life-2",
    "title": "Web Scraping",
    "section": "Reading The Student Life",
    "text": "Reading The Student Life\n\nHow do you think the sentiments in opinion pieces in The Student Life compare across authors?\nRoughly the same?\nWildly different?\nSomewhere in between?"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#analyzing-the-student-life-1",
    "href": "slides/2024-11-04-webscrape.html#analyzing-the-student-life-1",
    "title": "Web Scraping",
    "section": "Analyzing The Student Life",
    "text": "Analyzing The Student Life"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#all-of-this-analysis-is-done-in-r",
    "href": "slides/2024-11-04-webscrape.html#all-of-this-analysis-is-done-in-r",
    "title": "Web Scraping",
    "section": "All of this analysis is done in R!",
    "text": "All of this analysis is done in R!\n\n(mostly) with tools you already know!"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#common-words-in-the-student-life-titles",
    "href": "slides/2024-11-04-webscrape.html#common-words-in-the-student-life-titles",
    "title": "Web Scraping",
    "section": "Common words in The Student Life titles",
    "text": "Common words in The Student Life titles\nCode for the earlier plot:\n\ndata(stop_words)  # from tidytext\ntsl_opinion_titles |&gt;\n  tidytext::unnest_tokens(word, title) |&gt;\n  anti_join(stop_words) |&gt;\n  count(word, sort = TRUE) |&gt;\n  slice_head(n = 20) |&gt;\n  mutate(word = fct_reorder(word, n)) |&gt;\n  ggplot(aes(y = word, x = n, fill = log(n))) +\n  geom_col(show.legend = FALSE) +\n  theme_minimal(base_size = 16) +\n  labs(\n    x = \"Number of mentions\",\n    y = \"Word\",\n    title = \"The Student Life - Opinion pieces\",\n    subtitle = \"Common words in the 500 most recent opinion pieces\",\n    caption = \"Source: Data scraped from The Student Life on Nov 4, 2024\"\n  ) +\n  theme(\n    plot.title.position = \"plot\",\n    plot.caption = element_text(color = \"gray30\")\n  )"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#avg-sentiment-scores-of-abstracts",
    "href": "slides/2024-11-04-webscrape.html#avg-sentiment-scores-of-abstracts",
    "title": "Web Scraping",
    "section": "Avg sentiment scores of abstracts",
    "text": "Avg sentiment scores of abstracts\nCode for the earlier plot:\n\nafinn_sentiments &lt;- get_sentiments(\"afinn\")  # need tidytext and textdata\ntsl_opinion_titles |&gt;\n  tidytext::unnest_tokens(word, first_p) |&gt;\n  anti_join(stop_words) |&gt;\n  left_join(afinn_sentiments) |&gt; \n  group_by(authors, title) |&gt;\n  summarize(total_sentiment = sum(value, na.rm = TRUE), .groups = \"drop\") |&gt;\n  group_by(authors) |&gt;\n  summarize(\n    n_articles = n(),\n    avg_sentiment = mean(total_sentiment, na.rm = TRUE),\n  ) |&gt;\n  filter(n_articles &gt; 1 & !is.na(authors)) |&gt;\n  arrange(desc(avg_sentiment)) |&gt;\n  slice(c(1:10, 69:78)) |&gt;\n  mutate(\n    authors = fct_reorder(authors, avg_sentiment),\n    neg_pos = if_else(avg_sentiment &lt; 0, \"neg\", \"pos\"),\n    label_position = if_else(neg_pos == \"neg\", 0.25, -0.25)\n  ) |&gt;\n  ggplot(aes(y = authors, x = avg_sentiment)) +\n  geom_col(aes(fill = neg_pos), show.legend = FALSE) +\n  geom_text(\n    aes(x = label_position, label = authors, color = neg_pos),\n    hjust = c(rep(1,10), rep(0, 10)),\n    show.legend = FALSE,\n    fontface = \"bold\"\n  ) +\n  geom_text(\n    aes(label = round(avg_sentiment, 1)),\n    hjust = c(rep(1.25,10), rep(-0.25, 10)),\n    color = \"white\",\n    fontface = \"bold\"\n  ) +\n  scale_fill_manual(values = c(\"neg\" = \"#4d4009\", \"pos\" = \"#FF4B91\")) +\n  scale_color_manual(values = c(\"neg\" = \"#4d4009\", \"pos\" = \"#FF4B91\")) +\n  scale_x_continuous(breaks = -5:5, minor_breaks = NULL) +\n  scale_y_discrete(breaks = NULL) +\n  coord_cartesian(xlim = c(-5, 5)) +\n  labs(\n    x = \"negative  ←     Average sentiment score (AFINN)     →  positive\",\n    y = NULL,\n    title = \"The Student Life - Opinion pieces\\nAverage sentiment scores of first paragraph by author\",\n    subtitle = \"Top 10 average positive and negative scores\",\n    caption = \"Source: Data scraped from The Student Life on Nov 4, 2024\"\n  ) +\n  theme_void(base_size = 16) +\n  theme(\n    plot.title = element_text(hjust = 0.5),\n    plot.subtitle = element_text(hjust = 0.5, margin = unit(c(0.5, 0, 1, 0), \"lines\")),\n    axis.text.y = element_blank(),\n    plot.caption = element_text(color = \"gray30\")\n  )"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#where-is-the-data-coming-from",
    "href": "slides/2024-11-04-webscrape.html#where-is-the-data-coming-from",
    "title": "Web Scraping",
    "section": "Where is the data coming from?",
    "text": "Where is the data coming from?\n\nhttps://tsl.news/category/opinions/"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#where-is-the-data-coming-from-1",
    "href": "slides/2024-11-04-webscrape.html#where-is-the-data-coming-from-1",
    "title": "Web Scraping",
    "section": "Where is the data coming from?",
    "text": "Where is the data coming from?\n\n\n\n\n\n\n\n\n\ntsl_opinion_titles\n\n# A tibble: 500 × 4\n   title                                     authors date                first_p\n   &lt;chr&gt;                                     &lt;chr&gt;   &lt;dttm&gt;              &lt;chr&gt;  \n 1 Elon Musk’s million-dollar-a-day rewards… Celest… 2024-11-01 16:27:00 have y…\n 2 The politics behind apolitical acts       Eric Lu 2024-11-01 16:21:00 while …\n 3 In Defense of the Pomona College Judicia… Henri … 2024-11-01 16:15:00 former…\n 4 ‘Yakking’ isn’t a canon event, party res… Kabir … 2024-11-01 16:10:00 whirri…\n 5 The ‘if he wanted to, he would’ mentalit… Tess M… 2024-11-01 16:01:00 ladies…\n 6 You can’t silence us: A united front aga… Outbac… 2024-10-25 11:23:00 in the…\n 7 We will not tolerate collective punishme… Suspen… 2024-10-25 09:04:00 in the…\n 8 A guide to ballot propositions            Akshay… 2024-10-25 06:37:00 are yo…\n 9 Pomona will protest or perish             Maggie… 2024-10-23 06:00:00 as pom…\n10 GUEST EDITORIAL: Pomona’s culpability un… Mike W… 2024-10-11 08:23:00 mike w…\n# ℹ 490 more rows"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#scraping-the-web-what-why",
    "href": "slides/2024-11-04-webscrape.html#scraping-the-web-what-why",
    "title": "Web Scraping",
    "section": "Scraping the web: what? why?",
    "text": "Scraping the web: what? why?\n\nIncreasing amount of data is available on the web\nThese data are provided in an unstructured format: you can always copy & paste, but it’s time-consuming and prone to errors\nWeb scraping is the process of extracting this information automatically and transform it into a structured dataset\nTwo different scenarios:\n\nScreen scraping: extract data from source code of website, with html parser (easy) or regular expression matching (less easy).\nWeb APIs (application programming interface): website offers a set of structured http requests that return JSON or XML files."
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#hypertext-markup-language",
    "href": "slides/2024-11-04-webscrape.html#hypertext-markup-language",
    "title": "Web Scraping",
    "section": "Hypertext Markup Language",
    "text": "Hypertext Markup Language\nMost of the data on the web is largely available as HTML - while it is structured (hierarchical) it often is not available in a form useful for analysis (flat / tidy).\n\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;This is a title&lt;/title&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;p align=\"center\"&gt;Hello world!&lt;/p&gt;\n    &lt;br/&gt;\n    &lt;div class=\"name\" id=\"first\"&gt;John&lt;/div&gt;\n    &lt;div class=\"name\" id=\"last\"&gt;Doe&lt;/div&gt;\n    &lt;div class=\"contact\"&gt;\n      &lt;div class=\"home\"&gt;555-555-1234&lt;/div&gt;\n      &lt;div class=\"home\"&gt;555-555-2345&lt;/div&gt;\n      &lt;div class=\"work\"&gt;555-555-9999&lt;/div&gt;\n      &lt;div class=\"fax\"&gt;555-555-8888&lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/body&gt;\n&lt;/html&gt;"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#rvest",
    "href": "slides/2024-11-04-webscrape.html#rvest",
    "title": "Web Scraping",
    "section": "rvest",
    "text": "rvest\n\n\n\nThe rvest package makes basic processing and manipulation of HTML data straight forward\nIt is designed to work with pipelines built with |&gt;\nrvest.tidyverse.org\n\n\nlibrary(rvest)"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#rvest-1",
    "href": "slides/2024-11-04-webscrape.html#rvest-1",
    "title": "Web Scraping",
    "section": "rvest",
    "text": "rvest\nCore functions:\n\nread_html() - read HTML data from a url or character string.\nhtml_elements() - select specified elements from the HTML document using CSS selectors.\nhtml_element() - select a single element from the HTML document using CSS selectors.\nhtml_table() - parse an HTML table into a data frame.\nhtml_text() / html_text2() - extract element’s text content.\nhtml_name - extract a element’s name(s).\nhtml_attrs - extract all attributes.\nhtml_attr - extract attribute value(s) by name."
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#html-rvest-xml2",
    "href": "slides/2024-11-04-webscrape.html#html-rvest-xml2",
    "title": "Web Scraping",
    "section": "html, rvest, & xml2",
    "text": "html, rvest, & xml2\n\nhtml &lt;- \n'&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;This is a title&lt;/title&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;p align=\"center\"&gt;Hello world!&lt;/p&gt;\n    &lt;br/&gt;\n    &lt;div class=\"name\" id=\"first\"&gt;John&lt;/div&gt;\n    &lt;div class=\"name\" id=\"last\"&gt;Doe&lt;/div&gt;\n    &lt;div class=\"contact\"&gt;\n      &lt;div class=\"home\"&gt;555-555-1234&lt;/div&gt;\n      &lt;div class=\"home\"&gt;555-555-2345&lt;/div&gt;\n      &lt;div class=\"work\"&gt;555-555-9999&lt;/div&gt;\n      &lt;div class=\"fax\"&gt;555-555-8888&lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/body&gt;\n&lt;/html&gt;'\n\n\n\nread_html(html)\n\n{html_document}\n&lt;html&gt;\n[1] &lt;head&gt;\\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8 ...\n[2] &lt;body&gt;\\n    &lt;p align=\"center\"&gt;Hello world!&lt;/p&gt;\\n    &lt;br&gt;&lt;div class=\"name\" ..."
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#selecting-elements",
    "href": "slides/2024-11-04-webscrape.html#selecting-elements",
    "title": "Web Scraping",
    "section": "Selecting elements",
    "text": "Selecting elements\n\nread_html(html) |&gt; html_elements(\"p\")\n\n{xml_nodeset (1)}\n[1] &lt;p align=\"center\"&gt;Hello world!&lt;/p&gt;\n\n\n\n\nread_html(html) |&gt; html_elements(\"p\") |&gt; html_text()\n\n[1] \"Hello world!\"\n\n\n\n\n\nread_html(html) |&gt; html_elements(\"p\") |&gt; html_name()\n\n[1] \"p\"\n\n\n\n\n\nread_html(html) |&gt; html_elements(\"p\") |&gt; html_attrs()\n\n[[1]]\n   align \n\"center\" \n\n\n\n\n\nread_html(html) |&gt; html_elements(\"p\") |&gt; html_attr(\"align\")\n\n[1] \"center\""
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#more-selecting-tags",
    "href": "slides/2024-11-04-webscrape.html#more-selecting-tags",
    "title": "Web Scraping",
    "section": "More selecting tags",
    "text": "More selecting tags\n\n\nread_html(html) |&gt; html_elements(\"div\")\n\n{xml_nodeset (7)}\n[1] &lt;div class=\"name\" id=\"first\"&gt;John&lt;/div&gt;\n[2] &lt;div class=\"name\" id=\"last\"&gt;Doe&lt;/div&gt;\n[3] &lt;div class=\"contact\"&gt;\\n      &lt;div class=\"home\"&gt;555-555-1234&lt;/div&gt;\\n       ...\n[4] &lt;div class=\"home\"&gt;555-555-1234&lt;/div&gt;\n[5] &lt;div class=\"home\"&gt;555-555-2345&lt;/div&gt;\n[6] &lt;div class=\"work\"&gt;555-555-9999&lt;/div&gt;\n[7] &lt;div class=\"fax\"&gt;555-555-8888&lt;/div&gt;\n\n\n\n\n\n\nread_html(html) |&gt; html_elements(\"div\") |&gt; html_text()\n\n[1] \"John\"                                                                                  \n[2] \"Doe\"                                                                                   \n[3] \"\\n      555-555-1234\\n      555-555-2345\\n      555-555-9999\\n      555-555-8888\\n    \"\n[4] \"555-555-1234\"                                                                          \n[5] \"555-555-2345\"                                                                          \n[6] \"555-555-9999\"                                                                          \n[7] \"555-555-8888\""
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#css-selectors",
    "href": "slides/2024-11-04-webscrape.html#css-selectors",
    "title": "Web Scraping",
    "section": "CSS selectors",
    "text": "CSS selectors\n\nWe will use a tool called SelectorGadget to help us identify the HTML elements of interest by constructing a CSS selector which can be used to subset the HTML document.\n\n\n\nSome examples of basic selector syntax is below,\n\n\n\n\n\n\n\n\n\n\nSelector\nExample\nDescription\n\n\n\n\n.class\n.title\nSelect all elements with class=“title”\n\n\n#id\n#name\nSelect all elements with id=“name”\n\n\nelement\np\nSelect all &lt;p&gt; elements\n\n\nelement element\ndiv p\nSelect all &lt;p&gt; elements inside a &lt;div&gt; element\n\n\nelement&gt;element\ndiv &gt; p\nSelect all &lt;p&gt; elements with &lt;div&gt; as a direct parent\n\n\n[attribute]\n[class]\nSelect all elements with a class attribute\n\n\n[attribute=value]\n[class=title]\nSelect all elements with class=“title”"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#css-classes-and-ids",
    "href": "slides/2024-11-04-webscrape.html#css-classes-and-ids",
    "title": "Web Scraping",
    "section": "CSS classes and ids",
    "text": "CSS classes and ids\n\nclass and id are used to style elements (e.g., change their color!). They are special types of attributes.\nclass can be applied to multiple different elements (class is identified with ., for example .name)\nid is unique to each element (id is identified with #, for example, #first)\n\n\nread_html(html) |&gt; html_elements(\".name\")\n\n{xml_nodeset (2)}\n[1] &lt;div class=\"name\" id=\"first\"&gt;John&lt;/div&gt;\n[2] &lt;div class=\"name\" id=\"last\"&gt;Doe&lt;/div&gt;\n\n\n\n\nread_html(html) |&gt; html_elements(\"div.name\")\n\n{xml_nodeset (2)}\n[1] &lt;div class=\"name\" id=\"first\"&gt;John&lt;/div&gt;\n[2] &lt;div class=\"name\" id=\"last\"&gt;Doe&lt;/div&gt;\n\n\n\n\n\nread_html(html) |&gt; html_elements(\"#first\")\n\n{xml_nodeset (1)}\n[1] &lt;div class=\"name\" id=\"first\"&gt;John&lt;/div&gt;"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#text-with-html_text-vs.-html_text2",
    "href": "slides/2024-11-04-webscrape.html#text-with-html_text-vs.-html_text2",
    "title": "Web Scraping",
    "section": "Text with html_text() vs. html_text2()",
    "text": "Text with html_text() vs. html_text2()\n\nhtml = read_html(\n  \"&lt;p&gt;  \n    This is the first sentence in the paragraph.\n    This is the second sentence that should be on the same line as the first sentence.&lt;br&gt;This third sentence should start on a new line.\n  &lt;/p&gt;\"\n)\n\n\n\nhtml |&gt; html_text()\n\n[1] \"  \\n    This is the first sentence in the paragraph.\\n    This is the second sentence that should be on the same line as the first sentence.This third sentence should start on a new line.\\n  \"\n\nhtml |&gt; html_text2()\n\n[1] \"This is the first sentence in the paragraph. This is the second sentence that should be on the same line as the first sentence.\\nThis third sentence should start on a new line.\""
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#html-tables-with-html_table",
    "href": "slides/2024-11-04-webscrape.html#html-tables-with-html_table",
    "title": "Web Scraping",
    "section": "HTML tables with html_table()",
    "text": "HTML tables with html_table()\n\nhtml_table = \n'&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;This is a title&lt;/title&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;table&gt;\n      &lt;tr&gt; &lt;th&gt;a&lt;/th&gt; &lt;th&gt;b&lt;/th&gt; &lt;th&gt;c&lt;/th&gt; &lt;/tr&gt;\n      &lt;tr&gt; &lt;td&gt;1&lt;/td&gt; &lt;td&gt;2&lt;/td&gt; &lt;td&gt;3&lt;/td&gt; &lt;/tr&gt;\n      &lt;tr&gt; &lt;td&gt;2&lt;/td&gt; &lt;td&gt;3&lt;/td&gt; &lt;td&gt;4&lt;/td&gt; &lt;/tr&gt;\n      &lt;tr&gt; &lt;td&gt;3&lt;/td&gt; &lt;td&gt;4&lt;/td&gt; &lt;td&gt;5&lt;/td&gt; &lt;/tr&gt;\n    &lt;/table&gt;\n  &lt;/body&gt;\n&lt;/html&gt;'\n\n\n\nread_html(html_table) |&gt;\n  html_elements(\"table\") |&gt; \n  html_table()\n\n[[1]]\n# A tibble: 3 × 3\n      a     b     c\n  &lt;int&gt; &lt;int&gt; &lt;int&gt;\n1     1     2     3\n2     2     3     4\n3     3     4     5"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#selectorgadget",
    "href": "slides/2024-11-04-webscrape.html#selectorgadget",
    "title": "Web Scraping",
    "section": "SelectorGadget",
    "text": "SelectorGadget\nSelectorGadget (selectorgadget.com) is a javascript based tool that helps you interactively build an appropriate CSS selector for the content you are interested in."
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#recap",
    "href": "slides/2024-11-04-webscrape.html#recap",
    "title": "Web Scraping",
    "section": "Recap",
    "text": "Recap\n\nUse the SelectorGadget identify elements you want to grab\nUse the rvest R package to first read in the entire page (into R) and then parse the object you’ve read in to the elements you’re interested in\nPut the components together in a data frame (a tibble) and analyze it like you analyze any other data"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#a-new-r-workflow",
    "href": "slides/2024-11-04-webscrape.html#a-new-r-workflow",
    "title": "Web Scraping",
    "section": "A new R workflow",
    "text": "A new R workflow\n\nWhen working in a Quarto document, your analysis is re-run each time you knit\nIf web scraping in a Quarto document, you’d be re-scraping the data each time you knit, which is undesirable (and not nice)!\nAn alternative workflow:\n\nUse an R script to save your code\nSaving interim data scraped using the code in the script as CSV or RDS files\nUse the saved data in your analysis in your Quarto document"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#ethics-can-you-vs-should-you",
    "href": "slides/2024-11-04-webscrape.html#ethics-can-you-vs-should-you",
    "title": "Web Scraping",
    "section": "Ethics: “Can you?” vs “Should you?”",
    "text": "Ethics: “Can you?” vs “Should you?”\n\n\n\n\n\n\n\nSource: Brian Resnick, Researchers just released profile data on 70,000 OkCupid users without permission, Vox."
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#can-you-vs-should-you",
    "href": "slides/2024-11-04-webscrape.html#can-you-vs-should-you",
    "title": "Web Scraping",
    "section": "“Can you?” vs “Should you?”",
    "text": "“Can you?” vs “Should you?”"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#challenges-unreliable-formatting",
    "href": "slides/2024-11-04-webscrape.html#challenges-unreliable-formatting",
    "title": "Web Scraping",
    "section": "Challenges: Unreliable formatting",
    "text": "Challenges: Unreliable formatting\n\n\n\n\n\n\n\nalumni.duke.edu/news/notable-alumni"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#challenges-data-broken-into-many-pages",
    "href": "slides/2024-11-04-webscrape.html#challenges-data-broken-into-many-pages",
    "title": "Web Scraping",
    "section": "Challenges: Data broken into many pages",
    "text": "Challenges: Data broken into many pages"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#workflow-screen-scraping-vs.-apis",
    "href": "slides/2024-11-04-webscrape.html#workflow-screen-scraping-vs.-apis",
    "title": "Web Scraping",
    "section": "Workflow: Screen scraping vs. APIs",
    "text": "Workflow: Screen scraping vs. APIs\nTwo different scenarios for web scraping:\n\nScreen scraping: extract data from source code of website, with html parser (easy) or regular expression matching (less easy)\nWeb APIs (application programming interface): website offers a set of structured http requests that return JSON or XML files"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#plan",
    "href": "slides/2024-11-04-webscrape.html#plan",
    "title": "Web Scraping",
    "section": "Plan",
    "text": "Plan\n\nRead in the entire page\nScrape opinion title and save as title\nScrape author and save as author\nScrape date and save as date\nCreate a new data frame called tsl_opinion with variables title, author, and date"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#read-the-whole-page",
    "href": "slides/2024-11-04-webscrape.html#read-the-whole-page",
    "title": "Web Scraping",
    "section": "Read the whole page",
    "text": "Read the whole page\n\ntsl_page &lt;- read_html(\"https://tsl.news/category/opinions/\")\ntsl_page\n\n{html_document}\n&lt;html lang=\"en-US\"&gt;\n[1] &lt;head&gt;\\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8 ...\n[2] &lt;body class=\"archive category category-opinions category-2244 custom-back ...\n\n\n\n\ntypeof(tsl_page)\n\n[1] \"list\"\n\nclass(tsl_page)\n\n[1] \"xml_document\" \"xml_node\"    \n\n\n\nwe need to convert into something more familiar, like a data frame"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#scrape-opinion-title-and-save-as-title",
    "href": "slides/2024-11-04-webscrape.html#scrape-opinion-title-and-save-as-title",
    "title": "Web Scraping",
    "section": "Scrape opinion title and save as title",
    "text": "Scrape opinion title and save as title\n\ntsl_page |&gt; \nhtml_elements(\".entry-title a\") \n\n{xml_nodeset (10)}\n [1] &lt;a href=\"https://tsl.news/opinion-elon-musks-million-dollar-a-day-reward ...\n [2] &lt;a href=\"https://tsl.news/opinion-the-politics-behind-apolitical-acts/\"  ...\n [3] &lt;a href=\"https://tsl.news/opinion-in-defense-of-the-pomona-college-judic ...\n [4] &lt;a href=\"https://tsl.news/yakking-isnt-a-cannon-event/\" title=\"OPINION:  ...\n [5] &lt;a href=\"https://tsl.news/opinion-the-if-he-wanted-to-he-would-mentality ...\n [6] &lt;a href=\"https://tsl.news/you-cant-silence-us-a-united-front-against-pom ...\n [7] &lt;a href=\"https://tsl.news/suspended-students-speak-out/\" title=\"OPINION: ...\n [8] &lt;a href=\"https://tsl.news/opinion-a-guide-to-ballot-propositions/\" title ...\n [9] &lt;a href=\"https://tsl.news/opinion-pomona-will-protest-or-perish/\" title= ...\n[10] &lt;a href=\"https://tsl.news/guest-editorial-pomonas-culpability-under-inte ...\n\n\n\n\ntitle &lt;- tsl_page |&gt; \nhtml_elements(\".entry-title a\") |&gt; \nhtml_text()\ntitle\n\n [1] \"OPINION: Elon Musk’s million-dollar-a-day rewards are undemocratic\"               \n [2] \"OPINION: The politics behind apolitical acts\"                                     \n [3] \"OPINION: In Defense of the Pomona College Judicial Council\"                       \n [4] \"OPINION: ‘Yakking’ isn’t a canon event, party responsibly\"                        \n [5] \"OPINION: The ‘if he wanted to, he would’ mentality is holding women back\"         \n [6] \"You can’t silence us: A united front against Pomona’s repression\"                 \n [7] \"OPINION: We will not tolerate collective punishment: Suspended students speak out\"\n [8] \"OPINION: A guide to ballot propositions\"                                          \n [9] \"OPINION: Pomona will protest or perish\"                                           \n[10] \"GUEST EDITORIAL: Pomona’s culpability under International Humanitarian Law\"       \n\ntitle &lt;- title |&gt; \nstr_remove(\"OPINION: \")\n\ntitle\n\n [1] \"Elon Musk’s million-dollar-a-day rewards are undemocratic\"                 \n [2] \"The politics behind apolitical acts\"                                       \n [3] \"In Defense of the Pomona College Judicial Council\"                         \n [4] \"‘Yakking’ isn’t a canon event, party responsibly\"                          \n [5] \"The ‘if he wanted to, he would’ mentality is holding women back\"           \n [6] \"You can’t silence us: A united front against Pomona’s repression\"          \n [7] \"We will not tolerate collective punishment: Suspended students speak out\"  \n [8] \"A guide to ballot propositions\"                                            \n [9] \"Pomona will protest or perish\"                                             \n[10] \"GUEST EDITORIAL: Pomona’s culpability under International Humanitarian Law\""
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#scrape-opinion-author-and-save-as-author",
    "href": "slides/2024-11-04-webscrape.html#scrape-opinion-author-and-save-as-author",
    "title": "Web Scraping",
    "section": "Scrape opinion author and save as author",
    "text": "Scrape opinion author and save as author\n\nauthor &lt;- tsl_page |&gt; \nhtml_elements(\".author\") |&gt; \nhtml_text()\nauthor\n\n [1] \"By Celeste Cariker\"                                                     \n [2] \"Celeste Cariker\"                                                        \n [3] \"By Eric Lu\"                                                             \n [4] \"Eric Lu\"                                                                \n [5] \"By Henri Prevost\"                                                       \n [6] \"Henri Prevost\"                                                          \n [7] \"By Kabir Raina\"                                                         \n [8] \"Kabir Raina\"                                                            \n [9] \"By Tess McHugh\"                                                         \n[10] \"Tess McHugh\"                                                            \n[11] \"By Outback Editors, Undercurrents Editors and The Scripps Voice Editors\"\n[12] \"Outback Editors\"                                                        \n[13] \"Undercurrents Editors\"                                                  \n[14] \"The Scripps Voice Editors\"                                              \n[15] \"By Suspended Students\"                                                  \n[16] \"Suspended Students\"                                                     \n[17] \"By Akshay Seetharam\"                                                    \n[18] \"Akshay Seetharam\"                                                       \n[19] \"By Maggie Zhang\"                                                        \n[20] \"Maggie Zhang\"                                                           \n[21] \"By Mike Withey\"                                                         \n[22] \"Mike Withey\"                                                            \n\n\n\nauthor &lt;- tsl_page |&gt; \nhtml_elements(\".author\") |&gt; \nhtml_text() |&gt; \ntibble() |&gt; \nset_names(nm = \"authors\") |&gt; \nfilter(str_detect(authors, \"By \"))\nauthor \n\n# A tibble: 10 × 1\n   authors                                                                \n   &lt;chr&gt;                                                                  \n 1 By Celeste Cariker                                                     \n 2 By Eric Lu                                                             \n 3 By Henri Prevost                                                       \n 4 By Kabir Raina                                                         \n 5 By Tess McHugh                                                         \n 6 By Outback Editors, Undercurrents Editors and The Scripps Voice Editors\n 7 By Suspended Students                                                  \n 8 By Akshay Seetharam                                                    \n 9 By Maggie Zhang                                                        \n10 By Mike Withey                                                         \n\nauthor &lt;- author |&gt; \nmutate(authors = str_replace(authors, \"By \", \"\")) \n\nauthor\n\n# A tibble: 10 × 1\n   authors                                                             \n   &lt;chr&gt;                                                               \n 1 Celeste Cariker                                                     \n 2 Eric Lu                                                             \n 3 Henri Prevost                                                       \n 4 Kabir Raina                                                         \n 5 Tess McHugh                                                         \n 6 Outback Editors, Undercurrents Editors and The Scripps Voice Editors\n 7 Suspended Students                                                  \n 8 Akshay Seetharam                                                    \n 9 Maggie Zhang                                                        \n10 Mike Withey"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#scrape-opinion-date-and-save-as-date",
    "href": "slides/2024-11-04-webscrape.html#scrape-opinion-date-and-save-as-date",
    "title": "Web Scraping",
    "section": "Scrape opinion date and save as date",
    "text": "Scrape opinion date and save as date\n\ndate &lt;- tsl_page |&gt; \nhtml_elements(\".published\") |&gt; \nhtml_text()\ndate\n\n [1] \"November 1, 2024 9:27 am\"  \"November 1, 2024 9:21 am\" \n [3] \"November 1, 2024 9:15 am\"  \"November 1, 2024 9:10 am\" \n [5] \"November 1, 2024 9:01 am\"  \"October 25, 2024 4:23 am\" \n [7] \"October 25, 2024 2:04 am\"  \"October 24, 2024 11:37 pm\"\n [9] \"October 22, 2024 11:00 pm\" \"October 11, 2024 1:23 am\" \n\ndate &lt;- date |&gt; \nlubridate::mdy_hm(tz = \"America/Los_Angeles\")\ndate\n\n [1] \"2024-11-01 09:27:00 PDT\" \"2024-11-01 09:21:00 PDT\"\n [3] \"2024-11-01 09:15:00 PDT\" \"2024-11-01 09:10:00 PDT\"\n [5] \"2024-11-01 09:01:00 PDT\" \"2024-10-25 04:23:00 PDT\"\n [7] \"2024-10-25 02:04:00 PDT\" \"2024-10-24 23:37:00 PDT\"\n [9] \"2024-10-22 23:00:00 PDT\" \"2024-10-11 01:23:00 PDT\""
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#create-a-new-data-frame",
    "href": "slides/2024-11-04-webscrape.html#create-a-new-data-frame",
    "title": "Web Scraping",
    "section": "Create a new data frame",
    "text": "Create a new data frame\n\ntsl_opinion &lt;- tibble(\n    title,\n    author,\n    date\n)\n\ntsl_opinion\n\n# A tibble: 10 × 3\n   title                                              author date               \n   &lt;chr&gt;                                              &lt;chr&gt;  &lt;dttm&gt;             \n 1 Confronting food anxiety at the 5Cs                Sarah… 2025-03-07 00:34:00\n 2 Our duty to protest                                Alex … 2025-03-07 00:13:00\n 3 Social media is ruining our relationship with the… Vir P… 2025-03-06 23:54:00\n 4 Wendy Williams, please save the internet!          Celes… 2025-03-06 23:29:00\n 5 Test scores don’t define us: Why test-optional mu… Danie… 2025-02-27 23:45:00\n 6 Whatever we think rap is, Ceechynaa is expanding … Zena … 2025-02-27 23:39:00\n 7 Cashing paychecks or passions? The cost of fear a… Lisa … 2025-02-27 21:12:00\n 8 You vape because the world is on fire              Alex … 2025-02-27 21:05:00\n 9 The new cosmetic dystopia                          Zena … 2025-02-20 22:46:00\n10 Contemporary art must put individual before ident… Elias… 2025-02-20 22:44:00"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#opinion-titles",
    "href": "slides/2024-11-04-webscrape.html#opinion-titles",
    "title": "Web Scraping",
    "section": "Opinion titles",
    "text": "Opinion titles\n\ntsl_opinions &lt;- function(i){\ntsl_page &lt;- rvest::read_html(paste0(\"https://tsl.news/category/opinions/page/\",i))\n  \ntitle &lt;- tsl_page |&gt; \nhtml_elements(\".entry-title a\") |&gt; \nhtml_text() |&gt; \nstr_remove(\"OPINION: \")\n  \nauthor &lt;- tsl_page |&gt; \nhtml_elements(\"span.author\") |&gt; \nhtml_text() |&gt; \ntibble() |&gt; \nset_names(nm = \"authors\") |&gt; \nmutate(authors = str_replace(authors, \"By \", \"\")) \n  \ndate &lt;- tsl_page |&gt; \nhtml_elements(\".published\") |&gt; \nhtml_text() |&gt; \nlubridate::mdy_hm(tz = \"America/Los_Angeles\")\n\nfirst_p &lt;- tsl_page |&gt; \n  html_elements(\".entry-content p:nth-child(1)\") |&gt; \n  html_text() |&gt; \n  tolower()\n  \ntibble(\n    title,\n    author,\n    date,\n    first_p\n)  \n}\n\ntsl_opinion_titles &lt;- c(1:50) |&gt; purrr::map(tsl_opinions) |&gt; \nlist_rbind()"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#check-if-you-are-allowed",
    "href": "slides/2024-11-04-webscrape.html#check-if-you-are-allowed",
    "title": "Web Scraping",
    "section": "Check if you are allowed!",
    "text": "Check if you are allowed!\n\nlibrary(robotstxt)\npaths_allowed(\"https://tsl.news/category/opinions/\")\n\n[1] TRUE\n\n\n\npaths_allowed(\"http://www.facebook.com\")\n\n[1] FALSE"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#avg-sentiment-scores-of-first-paragraph",
    "href": "slides/2024-11-04-webscrape.html#avg-sentiment-scores-of-first-paragraph",
    "title": "Web Scraping",
    "section": "Avg sentiment scores of first paragraph",
    "text": "Avg sentiment scores of first paragraph\nCode for the earlier plot:\n\nafinn_sentiments &lt;- get_sentiments(\"afinn\")  # need tidytext and textdata\ntsl_opinion_titles |&gt;\n  tidytext::unnest_tokens(word, first_p) |&gt;\n  anti_join(stop_words) |&gt;\n  left_join(afinn_sentiments) |&gt; \n  group_by(authors, title) |&gt;\n  summarize(total_sentiment = sum(value, na.rm = TRUE), .groups = \"drop\") |&gt;\n  group_by(authors) |&gt;\n  summarize(\n    n_articles = n(),\n    avg_sentiment = mean(total_sentiment, na.rm = TRUE),\n  ) |&gt;\n  filter(n_articles &gt; 1 & !is.na(authors)) |&gt;\n  arrange(desc(avg_sentiment)) |&gt;\n  slice(c(1:10, 69:78)) |&gt;\n  mutate(\n    authors = fct_reorder(authors, avg_sentiment),\n    neg_pos = if_else(avg_sentiment &lt; 0, \"neg\", \"pos\"),\n    label_position = if_else(neg_pos == \"neg\", 0.25, -0.25)\n  ) |&gt;\n  ggplot(aes(y = authors, x = avg_sentiment)) +\n  geom_col(aes(fill = neg_pos), show.legend = FALSE) +\n  geom_text(\n    aes(x = label_position, label = authors, color = neg_pos),\n    hjust = c(rep(1,10), rep(0, 10)),\n    show.legend = FALSE,\n    fontface = \"bold\"\n  ) +\n  geom_text(\n    aes(label = round(avg_sentiment, 1)),\n    hjust = c(rep(1.25,10), rep(-0.25, 10)),\n    color = \"white\",\n    fontface = \"bold\"\n  ) +\n  scale_fill_manual(values = c(\"neg\" = \"#4d4009\", \"pos\" = \"#FF4B91\")) +\n  scale_color_manual(values = c(\"neg\" = \"#4d4009\", \"pos\" = \"#FF4B91\")) +\n  scale_x_continuous(breaks = -5:5, minor_breaks = NULL) +\n  scale_y_discrete(breaks = NULL) +\n  coord_cartesian(xlim = c(-5, 5)) +\n  labs(\n    x = \"negative  ←     Average sentiment score (AFINN)     →  positive\",\n    y = NULL,\n    title = \"The Student Life - Opinion pieces\\nAverage sentiment scores of first paragraph by author\",\n    subtitle = \"Top 10 average positive and negative scores\",\n    caption = \"Source: Data scraped from The Student Life on Nov 4, 2024\"\n  ) +\n  theme_void(base_size = 16) +\n  theme(\n    plot.title = element_text(hjust = 0.5),\n    plot.subtitle = element_text(hjust = 0.5, margin = unit(c(0.5, 0, 1, 0), \"lines\")),\n    axis.text.y = element_blank(),\n    plot.caption = element_text(color = \"gray30\")\n  )"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#scrape-title-and-save-as-title",
    "href": "slides/2024-11-04-webscrape.html#scrape-title-and-save-as-title",
    "title": "Web Scraping",
    "section": "Scrape title and save as title",
    "text": "Scrape title and save as title\n\ntsl_page |&gt; \nhtml_elements(\".entry-title a\") \n\n{xml_nodeset (10)}\n [1] &lt;a href=\"https://tsl.news/opinion-food-anxiety/\" title=\"OPINION: Confron ...\n [2] &lt;a href=\"https://tsl.news/opinion-our-duty-to-protest/\" title=\"OPINION:  ...\n [3] &lt;a href=\"https://tsl.news/opinion-social-media-is-ruining-our-relationsh ...\n [4] &lt;a href=\"https://tsl.news/opinion-wendy-williams-please-save-the-interne ...\n [5] &lt;a href=\"https://tsl.news/opinion-test-scores-dont-define-us-why-test-op ...\n [6] &lt;a href=\"https://tsl.news/opinion-whatever-we-think-rap-is-ceechynaa-is- ...\n [7] &lt;a href=\"https://tsl.news/opinion-cashing-paychecks-or-passions-the-cost ...\n [8] &lt;a href=\"https://tsl.news/opinion-you-vape-because-the-world-is-on-fire/ ...\n [9] &lt;a href=\"https://tsl.news/opinion-the-new-cosmetic-dystopia/\" title=\"OPI ...\n[10] &lt;a href=\"https://tsl.news/opinion-contemporary-art-must-put-individual-b ...\n\n\n\n\ntitle &lt;- tsl_page |&gt; \nhtml_elements(\".entry-title a\") |&gt; \nhtml_text()\ntitle\n\n [1] \"OPINION: Confronting food anxiety at the 5Cs\"                     \n [2] \"OPINION: Our duty to protest\"                                     \n [3] \"OPINION: Social media is ruining our relationship with the gym\"   \n [4] \"OPINION: Wendy Williams, please save the internet!\"               \n [5] \"OPINION: Test scores don’t define us: Why test-optional must stay\"\n [6] \"OPINION: Whatever we think rap is, Ceechynaa is expanding it\"     \n [7] \"OPINION: Cashing paychecks or passions? The cost of fear at CMC\"  \n [8] \"OPINION: You vape because the world is on fire\"                   \n [9] \"OPINION: The new cosmetic dystopia\"                               \n[10] \"OPINION: Contemporary art must put individual before identity\"    \n\ntitle &lt;- title |&gt; \nstr_remove(\"OPINION: \")\n\ntitle\n\n [1] \"Confronting food anxiety at the 5Cs\"                     \n [2] \"Our duty to protest\"                                     \n [3] \"Social media is ruining our relationship with the gym\"   \n [4] \"Wendy Williams, please save the internet!\"               \n [5] \"Test scores don’t define us: Why test-optional must stay\"\n [6] \"Whatever we think rap is, Ceechynaa is expanding it\"     \n [7] \"Cashing paychecks or passions? The cost of fear at CMC\"  \n [8] \"You vape because the world is on fire\"                   \n [9] \"The new cosmetic dystopia\"                               \n[10] \"Contemporary art must put individual before identity\""
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#scrape-author-and-save-as-author",
    "href": "slides/2024-11-04-webscrape.html#scrape-author-and-save-as-author",
    "title": "Web Scraping",
    "section": "Scrape author and save as author",
    "text": "Scrape author and save as author\n\nauthor &lt;- tsl_page |&gt; \nhtml_elements(\"span.author\") |&gt; \nhtml_text()\nauthor\n\n [1] \"By Sarah Russo\"                      \n [2] \"By Alex Benach\"                      \n [3] \"By Vir Patwardhan\"                   \n [4] \"By Celeste Cariker\"                  \n [5] \"By Daniel Han Tae Choi\"              \n [6] \"By Zena Almeida-Warwin\"              \n [7] \"By Lisa Gorelik\"                     \n [8] \"By Alex Benach\"                      \n [9] \"By Zena Almeida-Warwin and Anna Yost\"\n[10] \"By Elias Diwan\"                      \n\n\n\nauthor &lt;- author |&gt; \nstr_replace(\"By \", \"\")\n\nauthor\n\n [1] \"Sarah Russo\"                       \"Alex Benach\"                      \n [3] \"Vir Patwardhan\"                    \"Celeste Cariker\"                  \n [5] \"Daniel Han Tae Choi\"               \"Zena Almeida-Warwin\"              \n [7] \"Lisa Gorelik\"                      \"Alex Benach\"                      \n [9] \"Zena Almeida-Warwin and Anna Yost\" \"Elias Diwan\""
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#scrape-date-and-save-as-date",
    "href": "slides/2024-11-04-webscrape.html#scrape-date-and-save-as-date",
    "title": "Web Scraping",
    "section": "Scrape date and save as date",
    "text": "Scrape date and save as date\n\ndate &lt;- tsl_page |&gt; \nhtml_elements(\".published\") |&gt; \nhtml_text()\ndate\n\n [1] \"March 7, 2025 12:34 am\"     \"March 7, 2025 12:13 am\"    \n [3] \"March 6, 2025 11:54 pm\"     \"March 6, 2025 11:29 pm\"    \n [5] \"February 27, 2025 11:45 pm\" \"February 27, 2025 11:39 pm\"\n [7] \"February 27, 2025 9:12 pm\"  \"February 27, 2025 9:05 pm\" \n [9] \"February 20, 2025 10:46 pm\" \"February 20, 2025 10:44 pm\"\n\ndate &lt;- date |&gt; \nlubridate::mdy_hm(tz = \"America/Los_Angeles\")\ndate\n\n [1] \"2025-03-07 00:34:00 PST\" \"2025-03-07 00:13:00 PST\"\n [3] \"2025-03-06 23:54:00 PST\" \"2025-03-06 23:29:00 PST\"\n [5] \"2025-02-27 23:45:00 PST\" \"2025-02-27 23:39:00 PST\"\n [7] \"2025-02-27 21:12:00 PST\" \"2025-02-27 21:05:00 PST\"\n [9] \"2025-02-20 22:46:00 PST\" \"2025-02-20 22:44:00 PST\""
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#some-html-elements",
    "href": "slides/2024-11-04-webscrape.html#some-html-elements",
    "title": "Web Scraping",
    "section": "Some HTML elements",
    "text": "Some HTML elements\n\n&lt;html&gt;: start of the HTML page\n&lt;head&gt;: header information (metadata about the page)\n&lt;body&gt;: everything that is on the page\n&lt;p&gt;: paragraphs\n&lt;b&gt;: bold\n&lt;table&gt;: table\n&lt;div&gt;: a container to group content together"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#data-acquisition",
    "href": "slides/2024-11-04-webscrape.html#data-acquisition",
    "title": "Web Scraping",
    "section": "Data Acquisition",
    "text": "Data Acquisition\n\nBased on https://www.effectivedatastorytelling.com/post/a-deeper-dive-into-lego-bricks-and-data-stories, original source: https://www.linkedin.com/learning/instructors/bill-shander"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#read-in-the-entire-page",
    "href": "slides/2024-11-04-webscrape.html#read-in-the-entire-page",
    "title": "Web Scraping",
    "section": "Read in the entire page",
    "text": "Read in the entire page\n\ntsl_page &lt;- read_html(\"https://tsl.news/category/opinions/\")\ntsl_page\n\n{html_document}\n&lt;html lang=\"en-US\"&gt;\n[1] &lt;head&gt;\\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8 ...\n[2] &lt;body class=\"archive category category-opinions category-2244 custom-back ...\n\n\n\n\ntypeof(tsl_page)\n\n[1] \"list\"\n\nclass(tsl_page)\n\n[1] \"xml_document\" \"xml_node\"    \n\n\n\nwe need to convert into something more familiar, like a data frame"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#more-selecting-elements",
    "href": "slides/2024-11-04-webscrape.html#more-selecting-elements",
    "title": "Web Scraping",
    "section": "More selecting elements",
    "text": "More selecting elements\n\n\nread_html(html) |&gt; html_elements(\"div\")\n\n{xml_nodeset (7)}\n[1] &lt;div class=\"name\" id=\"first\"&gt;John&lt;/div&gt;\n[2] &lt;div class=\"name\" id=\"last\"&gt;Doe&lt;/div&gt;\n[3] &lt;div class=\"contact\"&gt;\\n      &lt;div class=\"home\"&gt;555-555-1234&lt;/div&gt;\\n       ...\n[4] &lt;div class=\"home\"&gt;555-555-1234&lt;/div&gt;\n[5] &lt;div class=\"home\"&gt;555-555-2345&lt;/div&gt;\n[6] &lt;div class=\"work\"&gt;555-555-9999&lt;/div&gt;\n[7] &lt;div class=\"fax\"&gt;555-555-8888&lt;/div&gt;\n\n\n\n\n\n\nread_html(html) |&gt; html_elements(\"div\") |&gt; html_text()\n\n[1] \"John\"                                                                                  \n[2] \"Doe\"                                                                                   \n[3] \"\\n      555-555-1234\\n      555-555-2345\\n      555-555-9999\\n      555-555-8888\\n    \"\n[4] \"555-555-1234\"                                                                          \n[5] \"555-555-2345\"                                                                          \n[6] \"555-555-9999\"                                                                          \n[7] \"555-555-8888\""
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#div-p-vs-div-p",
    "href": "slides/2024-11-04-webscrape.html#div-p-vs-div-p",
    "title": "Web Scraping",
    "section": "div p vs div > p",
    "text": "div p vs div &gt; p\n\ndiv p selects all &lt;p&gt; elements within &lt;div&gt;, regardless of depth.\ndiv &gt; p selects only direct child &lt;p&gt; elements of &lt;div&gt;.\n\n&lt;div&gt;\n  &lt;p&gt;This will be selected by both `div p` and `div &gt; p`.&lt;/p&gt; \n  &lt;section&gt;\n    &lt;p&gt;This will be selected only by `div p`, not by `div &gt; p`.&lt;/p&gt;\n  &lt;/section&gt;\n&lt;/div&gt;"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#html-rvest",
    "href": "slides/2024-11-04-webscrape.html#html-rvest",
    "title": "Web Scraping",
    "section": "html & rvest",
    "text": "html & rvest\n\nhtml &lt;- \n'&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;This is a title&lt;/title&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;p align=\"center\"&gt;Hello world!&lt;/p&gt;\n    &lt;br/&gt;\n    &lt;div class=\"name\" id=\"first\"&gt;John&lt;/div&gt;\n    &lt;div class=\"name\" id=\"last\"&gt;Doe&lt;/div&gt;\n    &lt;div class=\"contact\"&gt;\n      &lt;div class=\"home\"&gt;555-555-1234&lt;/div&gt;\n      &lt;div class=\"home\"&gt;555-555-2345&lt;/div&gt;\n      &lt;div class=\"work\"&gt;555-555-9999&lt;/div&gt;\n      &lt;div class=\"fax\"&gt;555-555-8888&lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/body&gt;\n&lt;/html&gt;'\n\n\n\nread_html(html)\n\n{html_document}\n&lt;html&gt;\n[1] &lt;head&gt;\\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8 ...\n[2] &lt;body&gt;\\n    &lt;p align=\"center\"&gt;Hello world!&lt;/p&gt;\\n    &lt;br&gt;&lt;div class=\"name\" ..."
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#html_attr",
    "href": "slides/2024-11-04-webscrape.html#html_attr",
    "title": "Web Scraping",
    "section": "html_attr()",
    "text": "html_attr()\nextracts data from attributes:\n\nhtml &lt;- minimal_html(\"\n  &lt;p&gt;&lt;a href='https://en.wikipedia.org/wiki/Cat'&gt;cats&lt;/a&gt;&lt;/p&gt;\n  &lt;p&gt;&lt;a href='https://en.wikipedia.org/wiki/Dog'&gt;dogs&lt;/a&gt;&lt;/p&gt;\n\")\nhtml\n\n{html_document}\n&lt;html&gt;\n[1] &lt;head&gt;\\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8 ...\n[2] &lt;body&gt;\\n&lt;p&gt;&lt;a href=\"https://en.wikipedia.org/wiki/Cat\"&gt;cats&lt;/a&gt;&lt;/p&gt;\\n  &lt;p ...\n\n\n\nhtml |&gt; \nhtml_attr(\"href\")\n\n[1] NA\n\n\n\nhtml |&gt; \nhtml_elements(\"[href]\") |&gt; \nhtml_attr(\"href\")\n\n[1] \"https://en.wikipedia.org/wiki/Cat\" \"https://en.wikipedia.org/wiki/Dog\"\n\n\n\nhtml |&gt; \n  html_elements(\"p\") \n\n{xml_nodeset (2)}\n[1] &lt;p&gt;&lt;a href=\"https://en.wikipedia.org/wiki/Cat\"&gt;cats&lt;/a&gt;&lt;/p&gt;\n[2] &lt;p&gt;&lt;a href=\"https://en.wikipedia.org/wiki/Dog\"&gt;dogs&lt;/a&gt;&lt;/p&gt;\n\n\n\nhtml |&gt; \n  html_elements(\"p\") |&gt; \n  html_element(\"a\") \n\n{xml_nodeset (2)}\n[1] &lt;a href=\"https://en.wikipedia.org/wiki/Cat\"&gt;cats&lt;/a&gt;\n[2] &lt;a href=\"https://en.wikipedia.org/wiki/Dog\"&gt;dogs&lt;/a&gt;\n\n\n\nhtml |&gt; \n  html_elements(\"p\") |&gt; \n  html_element(\"a\") |&gt; \n  html_attr(\"href\")\n\n[1] \"https://en.wikipedia.org/wiki/Cat\" \"https://en.wikipedia.org/wiki/Dog\"\n\n\n\nhtml |&gt; \n  html_element(\"a\") |&gt; \n  html_attr(\"href\")\n\n[1] \"https://en.wikipedia.org/wiki/Cat\"\n\n\n\nhtml |&gt; \n  html_elements(\"a\") |&gt; \n  html_attr(\"href\")\n\n[1] \"https://en.wikipedia.org/wiki/Cat\" \"https://en.wikipedia.org/wiki/Dog\"\n\n\n\nhtml_attr() always returns a string, so if you’re extracting numbers or dates, you’ll need to do some post-processing."
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#more-ethics",
    "href": "slides/2024-11-04-webscrape.html#more-ethics",
    "title": "Web Scraping",
    "section": "More ethics…",
    "text": "More ethics…\nConsider the following image. What do you think is wrong? (Hint: examine the y-axis carefully)\n\nReproduction of a data graphic reporting the number of gun deaths in Florida over time. The original image was published by Reuters. (Baumer, Kaplan, and Horton 2021)"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#references",
    "href": "slides/2024-11-04-webscrape.html#references",
    "title": "Web Scraping",
    "section": "References",
    "text": "References\n\n\n\n\nBaumer, Ben, Daniel Kaplan, and Nicholas Horton. 2021. Modern Data Science with r. CRC Press. https://mdsr-book.github.io/mdsr2e/."
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#more-ethics-graphics",
    "href": "slides/2024-11-04-webscrape.html#more-ethics-graphics",
    "title": "Web Scraping",
    "section": "More ethics: graphics",
    "text": "More ethics: graphics\nConsider the following image. What do you think is wrong? (Hint: examine the y-axis carefully)\n\nReproduction of a data graphic reporting the number of gun deaths in Florida over time. The original image was published by Reuters. (Baumer, Kaplan, and Horton 2021)"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#more-ethics-graphics-1",
    "href": "slides/2024-11-04-webscrape.html#more-ethics-graphics-1",
    "title": "Web Scraping",
    "section": "More ethics: graphics",
    "text": "More ethics: graphics\n\n\n\n\n\n\n\nMay 10, 2020, Georgia Department of Health, COVID-19 cases for 5 counties across time. https://dph.georgia.gov/covid-19-daily-status-report\n\n\n\n\n\n\n\n\n\n\nMay 17, 2020, Georgia Department of Health, COVID-19 cases for 5 counties across time. https://dph.georgia.gov/covid-19-daily-status-report"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#more-ethics-graphics-2",
    "href": "slides/2024-11-04-webscrape.html#more-ethics-graphics-2",
    "title": "Web Scraping",
    "section": "More ethics: graphics",
    "text": "More ethics: graphics\nA few weeks later, the Georgia Department of Health came out with the following two plots where, despite cases skyrocketing, they display images where the visual doesn’t really change.\n\n\n\n\n\n\n\nJuly 2, 2020, Georgia Department of Health, COVID-19 cases per 100K https://dph.georgia.gov/covid-19-daily-status-report\n\n\n\n\n\n\n\n\n\n\nJuly 17, 2020, Georgia Department of Health, COVID-19 cases per 100K https://dph.georgia.gov/covid-19-daily-status-report"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#more-ethics-algorithms",
    "href": "slides/2024-11-04-webscrape.html#more-ethics-algorithms",
    "title": "Web Scraping",
    "section": "More ethics: algorithms",
    "text": "More ethics: algorithms\n\ndisparate treatment \\(\\rightarrow\\) means that the differential treatment is intentional\ndisparate impact \\(\\rightarrow\\) means that the differential treatment is unintentional or implicit (some examples include advancing mortgage credit, employment selection, predictive policing)"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#more-ethics-compas",
    "href": "slides/2024-11-04-webscrape.html#more-ethics-compas",
    "title": "Web Scraping",
    "section": "More ethics: COMPAS",
    "text": "More ethics: COMPAS\n\nDylan Fugett had three subsequent arrests for drug possession. Bernard Parker had no subsequent offenses."
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#more-ethics-compas-1",
    "href": "slides/2024-11-04-webscrape.html#more-ethics-compas-1",
    "title": "Web Scraping",
    "section": "More ethics: COMPAS",
    "text": "More ethics: COMPAS\n\n\n\nDYLAN FUGETT\nBERNARD PARKER\n\n\n\n\nPrior Offense\nPrior Offense\n\n\n1 attempted burglary\n1 resisting arrest without violence\n\n\nLOW RISK - 3\nHIGH RISK - 10\n\n\nSubsequent Offenses\nSubsequent Offenses\n\n\n3 drug possessions\nNone"
  },
  {
    "objectID": "slides/2024-11-04-webscrape.html#more-ethics-compas-2",
    "href": "slides/2024-11-04-webscrape.html#more-ethics-compas-2",
    "title": "Web Scraping",
    "section": "More ethics: COMPAS",
    "text": "More ethics: COMPAS\n\nFalse positive and false negative rates broken down by race."
  },
  {
    "objectID": "slides/2024-11-11-db.html#what-is-a-database",
    "href": "slides/2024-11-11-db.html#what-is-a-database",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "What is a database?",
    "text": "What is a database?\n\nstructured collection of data organized with\n\nefficient storage\neasy retrieval\nconsistent management\n\ndata stored in tables which are linked to one another via keys (called a relational database, think join)"
  },
  {
    "objectID": "slides/2024-11-11-db.html#tidy-data",
    "href": "slides/2024-11-11-db.html#tidy-data",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "Tidy data",
    "text": "Tidy data\n\ndata frame (R) or table (SQL)\ncolumns of variables\nrows of observational units"
  },
  {
    "objectID": "slides/2024-11-11-db.html#differences-between-r-and-sql",
    "href": "slides/2024-11-11-db.html#differences-between-r-and-sql",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "Differences between R and SQL",
    "text": "Differences between R and SQL\n\ntables in SQL databases can be arbitrarily large\n\nlive in storage, computer’s hard drive (usually remote)\n\ndata frames in R\n\nlive in memory (RAM) on your personal computer\n\ntables in a database are linked via a key"
  },
  {
    "objectID": "slides/2024-11-11-db.html#the-airlines-database",
    "href": "slides/2024-11-11-db.html#the-airlines-database",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "The airlines database",
    "text": "The airlines database\nConsider a database of US flights between 2013 and 2015. The flights are downloaded from the Bureau of Transportation Statistics, US Department of Transportation. The database is a superset of the nycflights13 R package that tracks only flights in and out of airports serving New York City in 2013."
  },
  {
    "objectID": "slides/2024-11-11-db.html#sql-connection",
    "href": "slides/2024-11-11-db.html#sql-connection",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "SQL connection",
    "text": "SQL connection\nTo set up a SQL connection, you need the location of the server (host) as well as a username and password.\n\ncon_air &lt;- DBI::dbConnect(\n  RMariaDB::MariaDB(),\n  dbname = \"airlines\",\n  host = Sys.getenv(\"MDSR_HOST\"),\n  user = Sys.getenv(\"MDSR_USER\"),\n  password = Sys.getenv(\"MDSR_PWD\")\n)\n\nHadley Wickham discusses how to use Sys.getenv: https://cran.r-project.org/web/packages/httr/vignettes/secrets.html"
  },
  {
    "objectID": "slides/2024-11-11-db.html#tables-in-airlines-database",
    "href": "slides/2024-11-11-db.html#tables-in-airlines-database",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "Tables in airlines database",
    "text": "Tables in airlines database\n\nDBI::dbListTables(con_air)\n\n[1] \"planes\"          \"carriers\"        \"airports\"        \"flights_summary\"\n[5] \"flights\""
  },
  {
    "objectID": "slides/2024-11-11-db.html#sql-tables-as-tbl",
    "href": "slides/2024-11-11-db.html#sql-tables-as-tbl",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "SQL tables as tbl",
    "text": "SQL tables as tbl\n\ncarriers &lt;- dplyr::tbl(con_air, \"carriers\")\ndim(carriers)\n\n[1] NA  2\n\nhead(carriers)\n\n# Source:   SQL [6 x 2]\n# Database: mysql  [mdsr_public@mdsr.cdc7tgkkqd0n.us-east-1.rds.amazonaws.com:3306/airlines]\n  carrier name                         \n  &lt;chr&gt;   &lt;chr&gt;                        \n1 02Q     Titan Airways                \n2 04Q     Tradewind Aviation           \n3 05Q     Comlux Aviation, AG          \n4 06Q     Master Top Linhas Aereas Ltd.\n5 07Q     Flair Airlines Ltd.          \n6 09Q     Swift Air, LLC"
  },
  {
    "objectID": "slides/2024-11-11-db.html#sql-tables-as-tibble",
    "href": "slides/2024-11-11-db.html#sql-tables-as-tibble",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "SQL tables as tibble",
    "text": "SQL tables as tibble\nThe function collect() copies a SQL table from its server location on disk to your local memory location in R.\n\ncarriers_tibble &lt;- carriers |&gt;\n  dplyr::collect()\n\ndim(carriers_tibble)\n\n[1] 1610    2\n\nhead(carriers_tibble)\n\n# A tibble: 6 × 2\n  carrier name                         \n  &lt;chr&gt;   &lt;chr&gt;                        \n1 02Q     Titan Airways                \n2 04Q     Tradewind Aviation           \n3 05Q     Comlux Aviation, AG          \n4 06Q     Master Top Linhas Aereas Ltd.\n5 07Q     Flair Airlines Ltd.          \n6 09Q     Swift Air, LLC"
  },
  {
    "objectID": "slides/2024-11-11-db.html#how-much-space-does-carriers-take-up",
    "href": "slides/2024-11-11-db.html#how-much-space-does-carriers-take-up",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "How much space does carriers take up?",
    "text": "How much space does carriers take up?\nThe data frame in R takes up 2 orders of magnitude of memory more than the table which just points to the object in SQL.\n\ncarriers |&gt;\n  object.size() |&gt;\n  print(units = \"Kb\")\n\n5.3 Kb\n\ncarriers_tibble |&gt;\n  object.size() |&gt;\n  print(units = \"Kb\")\n\n234.8 Kb"
  },
  {
    "objectID": "slides/2024-11-11-db.html#what-is-sql",
    "href": "slides/2024-11-11-db.html#what-is-sql",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "What is SQL?",
    "text": "What is SQL?\n\nSQL is a programming language for working with relational databases.\nSQL has been around since the 1970s, but has, unfortunately, many different dialects.\nTo connect to the mdsr database (via R and DBeaver), use MySQL.\nTo connect to DuckDB, use the dialect native to DuckDB."
  },
  {
    "objectID": "slides/2024-11-11-db.html#translating-dplyr-code-into-sql",
    "href": "slides/2024-11-11-db.html#translating-dplyr-code-into-sql",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "1. Translating dplyr code into SQL",
    "text": "1. Translating dplyr code into SQL\nThe function dbListTables() in the DBI package will tell us what tables exist in the airlines database.\n\nDBI::dbListTables(con_air)\n\n[1] \"planes\"          \"carriers\"        \"airports\"        \"flights_summary\"\n[5] \"flights\"        \n\nflights &lt;- dplyr::tbl(con_air, \"flights\")\ncarriers &lt;- dplyr::tbl(con_air, \"carriers\")"
  },
  {
    "objectID": "slides/2024-11-11-db.html#translating-dplyr-code-into-sql-1",
    "href": "slides/2024-11-11-db.html#translating-dplyr-code-into-sql-1",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "1. Translating dplyr code into SQL",
    "text": "1. Translating dplyr code into SQL\n\nOver what years is the flights data taken?\n\n\nyrs &lt;- flights |&gt;\n  summarize(min_year = min(year), max_year = max(year))\n\nyrs\n\n# Source:   SQL [1 x 2]\n# Database: mysql  [mdsr_public@mdsr.cdc7tgkkqd0n.us-east-1.rds.amazonaws.com:3306/airlines]\n  min_year max_year\n     &lt;int&gt;    &lt;int&gt;\n1     2013     2015"
  },
  {
    "objectID": "slides/2024-11-11-db.html#translating-dplyr-code-into-sql-2",
    "href": "slides/2024-11-11-db.html#translating-dplyr-code-into-sql-2",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "1. Translating dplyr code into SQL",
    "text": "1. Translating dplyr code into SQL\nBecause flights is not actually a data.frame in R (but instead a tbl in SQL), the work that was done above was actually performed in SQL. To see the SQL code, we can use the function show_query.\n\ndplyr::show_query(yrs)\n\n&lt;SQL&gt;\nSELECT MIN(`year`) AS `min_year`, MAX(`year`) AS `max_year`\nFROM `flights`"
  },
  {
    "objectID": "slides/2024-11-11-db.html#translating-dplyr-code-into-sql-3",
    "href": "slides/2024-11-11-db.html#translating-dplyr-code-into-sql-3",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "1. Translating dplyr code into SQL",
    "text": "1. Translating dplyr code into SQL\n\nCreate a data set containing only flights between LAX and BOS in 2015.\n\n\nla_bos &lt;- flights |&gt;\n  filter(year == 2015 & ((origin == \"LAX\" & dest == \"BOS\") | \n           (origin == \"BOS\" & dest == \"LAX\"))) \n\ndplyr::show_query(la_bos)\n\n&lt;SQL&gt;\nSELECT `flights`.*\nFROM `flights`\nWHERE (`year` = 2015.0 AND ((`origin` = 'LAX' AND `dest` = 'BOS') OR (`origin` = 'BOS' AND `dest` = 'LAX')))"
  },
  {
    "objectID": "slides/2024-11-11-db.html#translating-dplyr-code-into-sql-4",
    "href": "slides/2024-11-11-db.html#translating-dplyr-code-into-sql-4",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "1. Translating dplyr code into SQL",
    "text": "1. Translating dplyr code into SQL\n\ndbplyr doesn’t translate every R command into SQL.\nSQL is not a statistical software and doesn’t, for example, have a mechanism for creating data visualizations.\ntrack which R commands are connected to SQL at the dbplyr reference sheet."
  },
  {
    "objectID": "slides/2024-11-11-db.html#sql-queries-via-the-dbi-package",
    "href": "slides/2024-11-11-db.html#sql-queries-via-the-dbi-package",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "2. SQL queries via the DBI package",
    "text": "2. SQL queries via the DBI package\n\nLook at the first few rows of the flights data.\n\n\nDBI::dbGetQuery(con_air,\n                \"SELECT * FROM flights LIMIT 8;\")\n\n  year month day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n1 2013    10   1        2             10        -8      453            505\n2 2013    10   1        4           2359         5      730            729\n3 2013    10   1       11             15        -4      528            530\n4 2013    10   1       14           2355        19      544            540\n5 2013    10   1       16             17        -1      515            525\n6 2013    10   1       22             20         2      552            554\n7 2013    10   1       29             35        -6      808            816\n8 2013    10   1       29             35        -6      449            458\n  arr_delay carrier tailnum flight origin dest air_time distance cancelled\n1       -12      AA  N201AA   2400    LAX  DFW      149     1235         0\n2         1      FL  N344AT    710    SFO  ATL      247     2139         0\n3        -2      AA  N3KMAA   1052    SFO  DFW      182     1464         0\n4         4      AA  N3ENAA   2392    SEA  ORD      191     1721         0\n5       -10      UA  N38473   1614    LAX  IAH      157     1379         0\n6        -2      UA  N458UA    291    SFO  IAH      188     1635         0\n7        -8      US  N551UW    436    LAX  CLT      256     2125         0\n8        -9      AS  N402AS    108    ANC  SEA      181     1448         0\n  diverted hour minute           time_hour\n1        0    0     10 2013-10-01 00:10:00\n2        0   23     59 2013-10-01 23:59:00\n3        0    0     15 2013-10-01 00:15:00\n4        0   23     55 2013-10-01 23:55:00\n5        0    0     17 2013-10-01 00:17:00\n6        0    0     20 2013-10-01 00:20:00\n7        0    0     35 2013-10-01 00:35:00\n8        0    0     35 2013-10-01 00:35:00"
  },
  {
    "objectID": "slides/2024-11-11-db.html#sql-queries-via-the-dbi-package-1",
    "href": "slides/2024-11-11-db.html#sql-queries-via-the-dbi-package-1",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "2. SQL queries via the DBI package",
    "text": "2. SQL queries via the DBI package\n\nHow many flights per year are in the flights table?\n\n\nDBI::dbGetQuery(con_air, \n  \"SELECT year, count(*) AS num_flights FROM flights GROUP BY year ORDER BY num_flights;\")\n\n  year num_flights\n1 2015     5819079\n2 2014     5819811\n3 2013     6369482"
  },
  {
    "objectID": "slides/2024-11-11-db.html#direct-sql-queries-via-sql-chunks",
    "href": "slides/2024-11-11-db.html#direct-sql-queries-via-sql-chunks",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "3. Direct SQL queries via sql chunks",
    "text": "3. Direct SQL queries via sql chunks\nSQL queries can be written directly inside a sql chunk in RStudio.\n\n```{sql}\n#| connection: con_air\n\nSELECT * FROM flights LIMIT 8;\n```\n\n\n8 records\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nyear\nmonth\nday\ndep_time\nsched_dep_time\ndep_delay\narr_time\nsched_arr_time\narr_delay\ncarrier\ntailnum\nflight\norigin\ndest\nair_time\ndistance\ncancelled\ndiverted\nhour\nminute\ntime_hour\n\n\n\n\n2013\n10\n1\n2\n10\n-8\n453\n505\n-12\nAA\nN201AA\n2400\nLAX\nDFW\n149\n1235\n0\n0\n0\n10\n2013-10-01 00:10:00\n\n\n2013\n10\n1\n4\n2359\n5\n730\n729\n1\nFL\nN344AT\n710\nSFO\nATL\n247\n2139\n0\n0\n23\n59\n2013-10-01 23:59:00\n\n\n2013\n10\n1\n11\n15\n-4\n528\n530\n-2\nAA\nN3KMAA\n1052\nSFO\nDFW\n182\n1464\n0\n0\n0\n15\n2013-10-01 00:15:00\n\n\n2013\n10\n1\n14\n2355\n19\n544\n540\n4\nAA\nN3ENAA\n2392\nSEA\nORD\n191\n1721\n0\n0\n23\n55\n2013-10-01 23:55:00\n\n\n2013\n10\n1\n16\n17\n-1\n515\n525\n-10\nUA\nN38473\n1614\nLAX\nIAH\n157\n1379\n0\n0\n0\n17\n2013-10-01 00:17:00\n\n\n2013\n10\n1\n22\n20\n2\n552\n554\n-2\nUA\nN458UA\n291\nSFO\nIAH\n188\n1635\n0\n0\n0\n20\n2013-10-01 00:20:00\n\n\n2013\n10\n1\n29\n35\n-6\n808\n816\n-8\nUS\nN551UW\n436\nLAX\nCLT\n256\n2125\n0\n0\n0\n35\n2013-10-01 00:35:00\n\n\n2013\n10\n1\n29\n35\n-6\n449\n458\n-9\nAS\nN402AS\n108\nANC\nSEA\n181\n1448\n0\n0\n0\n35\n2013-10-01 00:35:00"
  },
  {
    "objectID": "slides/2024-11-11-db.html#direct-sql-queries-via-sql-chunks-1",
    "href": "slides/2024-11-11-db.html#direct-sql-queries-via-sql-chunks-1",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "3. Direct SQL queries via sql chunks",
    "text": "3. Direct SQL queries via sql chunks\nSQL queries can be written directly inside a sql chunk in RStudio.\n\n```{sql}\n#| connection: con_air\n\nSELECT year, count(*) AS num_flights \n       FROM flights \n       GROUP BY year \n       ORDER BY num_flights;\n```\n\n\n3 records\n\n\nyear\nnum_flights\n\n\n\n\n2015\n5819079\n\n\n2014\n5819811\n\n\n2013\n6369482"
  },
  {
    "objectID": "slides/2024-11-11-db.html#good-practice",
    "href": "slides/2024-11-11-db.html#good-practice",
    "title": "Databases and dbplyr and SQL, oh my!",
    "section": "Good practice",
    "text": "Good practice\nAlways a good idea to terminate the SQL connection when you are done with it.\n\ndbDisconnect(con_air, shutdown = TRUE)"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#imdb",
    "href": "slides/2024-11-13-clauses.html#imdb",
    "title": "SQL clauses",
    "section": "IMDb",
    "text": "IMDb\n88 tables in the traffic database! Lots of details on traffic stops across cities and highway patrols.\n\nSHOW TABLES;\n\n\nDisplaying records 1 - 10\n\n\nTables_in_traffic\n\n\n\n\nar_little_rock_2020_04_01\n\n\naz_gilbert_2020_04_01\n\n\naz_mesa_2023_01_26\n\n\naz_statewide_2020_04_01\n\n\nca_anaheim_2020_04_01\n\n\nca_bakersfield_2020_04_01\n\n\nca_long_beach_2020_04_01\n\n\nca_los_angeles_2020_04_01\n\n\nca_oakland_2020_04_01\n\n\nca_san_bernardino_2020_04_01"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#establishing-a-sql-connection",
    "href": "slides/2024-11-13-clauses.html#establishing-a-sql-connection",
    "title": "SQL clauses",
    "section": "Establishing a SQL connection",
    "text": "Establishing a SQL connection\n\ncon_traffic &lt;- DBI::dbConnect(\n  RMariaDB::MariaDB(),\n  dbname = \"traffic\",\n  host = Sys.getenv(\"TRAFFIC_HOST\"),\n  user = Sys.getenv(\"TRAFFIC_USER\"),\n  password = Sys.getenv(\"TRAFFIC_PWD\")\n)"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#imdb-1",
    "href": "slides/2024-11-13-clauses.html#imdb-1",
    "title": "SQL clauses",
    "section": "IMDb",
    "text": "IMDb\n88 tables in the traffic database! Lots of details on traffic stops across cities and highway patrols.\n\nSHOW TABLES;\n\n\nDisplaying records 1 - 10\n\n\nTables_in_traffic\n\n\n\n\nar_little_rock_2020_04_01\n\n\naz_gilbert_2020_04_01\n\n\naz_mesa_2023_01_26\n\n\naz_statewide_2020_04_01\n\n\nca_anaheim_2020_04_01\n\n\nca_bakersfield_2020_04_01\n\n\nca_long_beach_2020_04_01\n\n\nca_los_angeles_2020_04_01\n\n\nca_oakland_2020_04_01\n\n\nca_san_bernardino_2020_04_01"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#imdb---glance-through-tables",
    "href": "slides/2024-11-13-clauses.html#imdb---glance-through-tables",
    "title": "SQL clauses",
    "section": "IMDb - glance through tables",
    "text": "IMDb - glance through tables\n\nSELECT * FROM ca_los_angeles_2020_04_01\nLIMIT 0, 10;\n\n\nDisplaying records 1 - 10\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nraw_row_number\ndate\ntime\ndistrict\nregion\nsubject_race\nsubject_sex\nofficer_id_hash\ntype\nraw_descent_description\n\n\n\n\n5692933\n\n13:59:00\n0753\nWILSHIRE\nhispanic\nmale\n15ecd81b00\npedestrian\nHISPANIC\n\n\n240731\n2010-01-01\n00:05:00\n665\nWEST TRAFFIC\nother\nmale\nb707de41e0\nvehicular\nOTHER\n\n\n240592|240593\n2010-01-01\n00:10:00\n1258\nSEVENTY-SEVENTH\nhispanic\nmale\nb49ae7078c\npedestrian\nHISPANIC\n\n\n241116\n2010-01-01\n00:10:00\n1635\nFOOTHILL\nhispanic\nmale\ne70ce46248\nvehicular\nHISPANIC\n\n\n240681\n2010-01-01\n00:15:00\n882\nWEST LA\nother\nmale\n8587bd743c\nvehicular\nOTHER\n\n\n240602\n2010-01-01\n00:20:00\n559\nHARBOR\nhispanic\nmale\n601bf1fdff\nvehicular\nHISPANIC\n\n\n240594\n2010-01-01\n00:20:00\n667\nHOLLYWOOD\nhispanic\nmale\nfb2e6d8ab3\npedestrian\nHISPANIC\n\n\n241434\n2010-01-01\n00:25:00\n1658\nFOOTHILL\nhispanic\nfemale\n5100c8c759\nvehicular\nHISPANIC\n\n\n240582\n2010-01-01\n00:30:00\n1041\nWEST VALLEY\nblack\nfemale\nd54d90a4d0\nvehicular\nBLACK\n\n\n240642\n2010-01-01\n00:30:00\n1162\nNORTH EAST\nhispanic\nmale\n5d6fbef1d3\npedestrian\nHISPANIC"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#describe-tables",
    "href": "slides/2024-11-13-clauses.html#describe-tables",
    "title": "SQL clauses",
    "section": "DESCRIBE tables",
    "text": "DESCRIBE tables\nStill using a {sql} chunk. The DESCRIBE command shows the 10 field names (variables) in the ca_los_angeles_2020_04_01 table. Some of the variables are characters (text) and some are date or time.\n\nDESCRIBE ca_los_angeles_2020_04_01;\n\n\nDisplaying records 1 - 10\n\n\nField\nType\nNull\nKey\nDefault\nExtra\n\n\n\n\nraw_row_number\ntext\nYES\n\n\n\n\n\ndate\ndate\nYES\n\n\n\n\n\ntime\ntime\nYES\n\n\n\n\n\ndistrict\ntext\nYES\n\n\n\n\n\nregion\ntext\nYES\n\n\n\n\n\nsubject_race\ntext\nYES\n\n\n\n\n\nsubject_sex\ntext\nYES\n\n\n\n\n\nofficer_id_hash\ntext\nYES\n\n\n\n\n\ntype\ntext\nYES\n\n\n\n\n\nraw_descent_description\ntext\nYES"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#parts-of-a-sql-table",
    "href": "slides/2024-11-13-clauses.html#parts-of-a-sql-table",
    "title": "SQL clauses",
    "section": "Parts of a SQL table",
    "text": "Parts of a SQL table\n\nField is the name of the variable\nType is the type of the variable (numeric, character, etc.)\nNull indicates whether or not NULL values are acceptable. NULL values are never allowed for a Primary Key.\nKey designates whether the variable is a Primary Key. PRI is a primary key, all unique, no NULL values. UNI is a unique key, but NULL values are allowed. MUL is a non-unique (“Multiple”) key, allowing for duplicates, can speed up queries.\nDefault provides the default value of the variable if no value is provided when a row is added to the database."
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#order-of-clauses",
    "href": "slides/2024-11-13-clauses.html#order-of-clauses",
    "title": "SQL clauses",
    "section": "Order of clauses",
    "text": "Order of clauses\nQueries in SQL start with the SELECT keyword and consist of several clauses, which must be written in the following order:\n\n\n\nSELECT\nFROM\nJOIN\nWHERE\n\n\n\nGROUP BY\nHAVING\nORDER BY\nLIMIT\n\n\nThe clauses are similar to data wrangling verbs in R, but the order in SQL is super important!"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#select-from",
    "href": "slides/2024-11-13-clauses.html#select-from",
    "title": "SQL clauses",
    "section": "SELECT … FROM",
    "text": "SELECT … FROM\n\nstart with a SELECT, include a corresponding FROM\ncolumns may be specified or * returns every column\n\nThe shortest SQL query is the following SELECT command. Do not run this command!!! The ca_los_angeles_2020_04_01 table has 5 million rows, and we do not want to look at them (print to screen) simultaneously.\n\nDO NOT RUN:  SELECT * FROM ca_los_angeles_2020_04_01;"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#select-from-1",
    "href": "slides/2024-11-13-clauses.html#select-from-1",
    "title": "SQL clauses",
    "section": "SELECT … FROM",
    "text": "SELECT … FROM\nMuch better for big tables:\n\nSELECT * FROM ca_los_angeles_2020_04_01 LIMIT 0, 10;\n\n\nDisplaying records 1 - 10\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nraw_row_number\ndate\ntime\ndistrict\nregion\nsubject_race\nsubject_sex\nofficer_id_hash\ntype\nraw_descent_description\n\n\n\n\n5692933\n\n13:59:00\n0753\nWILSHIRE\nhispanic\nmale\n15ecd81b00\npedestrian\nHISPANIC\n\n\n240731\n2010-01-01\n00:05:00\n665\nWEST TRAFFIC\nother\nmale\nb707de41e0\nvehicular\nOTHER\n\n\n240592|240593\n2010-01-01\n00:10:00\n1258\nSEVENTY-SEVENTH\nhispanic\nmale\nb49ae7078c\npedestrian\nHISPANIC\n\n\n241116\n2010-01-01\n00:10:00\n1635\nFOOTHILL\nhispanic\nmale\ne70ce46248\nvehicular\nHISPANIC\n\n\n240681\n2010-01-01\n00:15:00\n882\nWEST LA\nother\nmale\n8587bd743c\nvehicular\nOTHER\n\n\n240602\n2010-01-01\n00:20:00\n559\nHARBOR\nhispanic\nmale\n601bf1fdff\nvehicular\nHISPANIC\n\n\n240594\n2010-01-01\n00:20:00\n667\nHOLLYWOOD\nhispanic\nmale\nfb2e6d8ab3\npedestrian\nHISPANIC\n\n\n241434\n2010-01-01\n00:25:00\n1658\nFOOTHILL\nhispanic\nfemale\n5100c8c759\nvehicular\nHISPANIC\n\n\n240582\n2010-01-01\n00:30:00\n1041\nWEST VALLEY\nblack\nfemale\nd54d90a4d0\nvehicular\nBLACK\n\n\n240642\n2010-01-01\n00:30:00\n1162\nNORTH EAST\nhispanic\nmale\n5d6fbef1d3\npedestrian\nHISPANIC"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#select-from-2",
    "href": "slides/2024-11-13-clauses.html#select-from-2",
    "title": "SQL clauses",
    "section": "SELECT … FROM",
    "text": "SELECT … FROM\nHow do we know how many traffic stops are in the database? Two different ways of counting the rows (that produce the same number):\n\nSELECT COUNT(*), SUM(1) FROM ca_los_angeles_2020_04_01 LIMIT 0, 10;\n\n\n1 records\n\n\nCOUNT(*)\nSUM(1)\n\n\n\n\n5418402\n5418402\n\n\n\n\n\nMore than 5.4 million LAPD traffic stops."
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#select-from-3",
    "href": "slides/2024-11-13-clauses.html#select-from-3",
    "title": "SQL clauses",
    "section": "SELECT … FROM",
    "text": "SELECT … FROM\nLet’s look at New Orleans, LA\n\nDESCRIBE la_new_orleans_2020_04_01;\n\n\nDisplaying records 1 - 10\n\n\nField\nType\nNull\nKey\nDefault\nExtra\n\n\n\n\nraw_row_number\ntext\nYES\n\n\n\n\n\ndate\ndate\nYES\n\n\n\n\n\ntime\ntime\nYES\n\n\n\n\n\nlocation\ntext\nYES\n\n\n\n\n\nlat\ndouble\nYES\n\n\n\n\n\nlng\ndouble\nYES\n\n\n\n\n\ndistrict\ndouble\nYES\n\n\n\n\n\nzone\ntext\nYES\n\n\n\n\n\nsubject_age\nbigint(20)\nYES\n\n\n\n\n\nsubject_race\ntext\nYES"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#select-from-4",
    "href": "slides/2024-11-13-clauses.html#select-from-4",
    "title": "SQL clauses",
    "section": "SELECT … FROM",
    "text": "SELECT … FROM\nHow old was the car being driven?\nUnfortunately, date is saved as a date variable, and vehicle_year is saved as a double. Fortunately, we can convert vehicle_year to a date variable.\n\nSELECT\n      date, vehicle_year,\n      STR_TO_DATE(CONCAT(vehicle_year, '-01-01'), '%Y-%m-%d') AS vehicle_date\n   FROM la_new_orleans_2020_04_01\n   LIMIT 0, 10;\n\n\nDisplaying records 1 - 10\n\n\ndate\nvehicle_year\nvehicle_date\n\n\n\n\n2010-01-01\n2005\n2005-01-01\n\n\n2010-01-01\n2005\n2005-01-01\n\n\n2010-01-01\n2005\n2005-01-01\n\n\n2010-01-01\n2003\n2003-01-01\n\n\n2010-01-01\n\n\n\n\n2010-01-01\n\n\n\n\n2010-01-01\n\n\n\n\n2010-01-01\n\n\n\n\n2010-01-01\n\n\n\n\n2010-01-01"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#select-from-5",
    "href": "slides/2024-11-13-clauses.html#select-from-5",
    "title": "SQL clauses",
    "section": "SELECT … FROM",
    "text": "SELECT … FROM\nWhy can’t we find the difference between the two time variables?\n\nSELECT\n      date, vehicle_year,\n      STR_TO_DATE(CONCAT(vehicle_year, '-01-01'), '%Y-%m-%d') AS vehicle_date\n      TIMESTAMPDIFF(YEAR, vehicle_date, date) AS car_age\n   FROM la_new_orleans_2020_04_01\n   LIMIT 0, 10;\n\nError: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TIMESTAMPDIFF(YEAR, vehicle_date, date) AS car_age\n   FROM la_new_orleans_2020_0' at line 4 [1064]"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#select-from-6",
    "href": "slides/2024-11-13-clauses.html#select-from-6",
    "title": "SQL clauses",
    "section": "SELECT … FROM",
    "text": "SELECT … FROM\nSolution 1: two layers of SELECT\n\nfirst SELECT (i.e., inside) layer creates the new variables\nsecond SELECT (i.e., outside) layer subtracts the two times\n\n\nSELECT \n   date,\n   vehicle_date, \n   TIMESTAMPDIFF(YEAR, vehicle_date, date) AS car_age \nFROM (\n   SELECT\n      date,\n      STR_TO_DATE(CONCAT(vehicle_year, '-01-01'), '%Y-%m-%d') AS vehicle_date\n   FROM la_new_orleans_2020_04_01)\n   AS subquery_table\nLIMIT 0, 10;\n\n\nDisplaying records 1 - 10\n\n\ndate\nvehicle_date\ncar_age\n\n\n\n\n2010-01-01\n2005-01-01\n5\n\n\n2010-01-01\n2005-01-01\n5\n\n\n2010-01-01\n2005-01-01\n5\n\n\n2010-01-01\n2003-01-01\n7\n\n\n2010-01-01\n\n\n\n\n2010-01-01\n\n\n\n\n2010-01-01\n\n\n\n\n2010-01-01\n\n\n\n\n2010-01-01\n\n\n\n\n2010-01-01"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#select-from-7",
    "href": "slides/2024-11-13-clauses.html#select-from-7",
    "title": "SQL clauses",
    "section": "SELECT … FROM",
    "text": "SELECT … FROM\nSolution 2: apply the STR_TO_DATE() function inside the TIMESTAMPDIFF() function\n\nSELECT \n   date,\n   vehicle_year,\n   TIMESTAMPDIFF(YEAR, \n                 STR_TO_DATE(CONCAT(vehicle_year, '-01-01'), '%Y-%m-%d'),\n                 date) AS car_age \nFROM la_new_orleans_2020_04_01\nLIMIT 0, 10;\n\n\nDisplaying records 1 - 10\n\n\ndate\nvehicle_year\ncar_age\n\n\n\n\n2010-01-01\n2005\n5\n\n\n2010-01-01\n2005\n5\n\n\n2010-01-01\n2005\n5\n\n\n2010-01-01\n2003\n7\n\n\n2010-01-01\n\n\n\n\n2010-01-01\n\n\n\n\n2010-01-01\n\n\n\n\n2010-01-01\n\n\n\n\n2010-01-01\n\n\n\n\n2010-01-01"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#important-note",
    "href": "slides/2024-11-13-clauses.html#important-note",
    "title": "SQL clauses",
    "section": "Important note:",
    "text": "Important note:\nThere is a distinction between clauses that operate on the variables of the original table versus those that operate on the variables of the results set.\ndate and vehicle_year are columns in the original table - they are written to disk on the SQL server.\ncar_age exist only in the results set, which is passed from the server (SQL server) to the client (e.g., RStudio or DBeaver) in your computer’s memory and is not written to disk."
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#select-distinct",
    "href": "slides/2024-11-13-clauses.html#select-distinct",
    "title": "SQL clauses",
    "section": "SELECT DISTINCT",
    "text": "SELECT DISTINCT\nReturns only unique rows.\n\nSELECT DISTINCT raw_actions_taken\nFROM la_new_orleans_2020_04_01\nLIMIT 0, 200;\n\n\nDisplaying records 1 - 10\n\n\n\n\n\nraw_actions_taken\n\n\n\n\n\n\n\nStop Results: Citation Issued;Subject Type: Driver\n\n\nStop Results: Verbal Warning;Search Occurred: Yes;Search Types: Vehicle;Search Types: Pat-down;Search Types: Driver;Legal Basises: Consent to search;Legal Basises: Probable cause\n\n\nStop Results: Verbal Warning;Subject Type: Driver;Search Occurred: No;Evidence Seized: No\n\n\nStop Results: Verbal Warning;Subject Type: Driver\n\n\nStop Results: Verbal Warning;Subject Type: Driver;Search Occurred: No\n\n\nStop Results: No action taken;Search Occurred: No\n\n\nStop Results: Citation Issued;Subject Type: Driver;Search Occurred: No\n\n\nStop Results: Citation Issued;Subject Type: Driver;Search Occurred: No;Evidence Seized: No\n\n\nStop Results: No action taken;Search Occurred: No;Search Types: Pat-down\n\n\n\n\n\n\nSELECT DISTINCT outcome\nFROM la_new_orleans_2020_04_01\nLIMIT 0, 10;\n\n\n4 records\n\n\noutcome\n\n\n\n\n\n\n\ncitation\n\n\nwarning\n\n\narrest\n\n\n\n\n\n\nSELECT DISTINCT vehicle_make, vehicle_color\nFROM la_new_orleans_2020_04_01\nLIMIT 0, 10;\n\n\nDisplaying records 1 - 10\n\n\nvehicle_make\nvehicle_color\n\n\n\n\nDODGE\nBLACK\n\n\nNISSAN\nBLUE\n\n\nJEEP\nGRAY\n\n\n\n\n\n\nGMC - GENERAL MOTORS CORP.\nBLUE\n\n\nCHEVROLET\nYELLOW\n\n\nOLDSMOBILE\nSILVER\n\n\nTOYOTA\nGREEN\n\n\nPONTIAC\nBRONZE\n\n\nCHEVROLET\nWHITE\n\n\n\n\n\n(note that we haven’t yet arranged the distinct values!)"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#where",
    "href": "slides/2024-11-13-clauses.html#where",
    "title": "SQL clauses",
    "section": "WHERE",
    "text": "WHERE\nThe WHERE clause is analogous to the filter() function in dplyr. However, keep in mind that there are two SQL commands that resemble the dplyr filter() function. WHERE operates on the original data in the table and HAVING operates on the result set."
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#where-1",
    "href": "slides/2024-11-13-clauses.html#where-1",
    "title": "SQL clauses",
    "section": "WHERE",
    "text": "WHERE\nWhat was the time of day for those traffic stops search_conducted was true and vehicle_make was Subaru?\nNote that in SQL the equality logical is = and in R the equality logical is ==. Note also that the WHERE command is case-insensitive!\n\nSELECT time, search_conducted, vehicle_year, vehicle_make\nFROM la_new_orleans_2020_04_01\nWHERE search_conducted = 1\n   AND vehicle_make = \"Subaru\"\nLIMIT 0, 10;\n\n\nDisplaying records 1 - 10\n\n\ntime\nsearch_conducted\nvehicle_year\nvehicle_make\n\n\n\n\n21:05:00\n1\n1996\nSUBARU\n\n\n21:05:00\n1\n1996\nSUBARU\n\n\n03:27:00\n1\n1998\nSUBARU\n\n\n19:28:00\n1\n2012\nSUBARU\n\n\n21:40:00\n1\n1998\nSUBARU\n\n\n10:38:00\n1\n2014\nSUBARU\n\n\n05:01:00\n1\n1998\nSUBARU\n\n\n22:00:00\n1\n1998\nSUBARU\n\n\n13:46:00\n1\n2007\nSUBARU\n\n\n22:50:00\n1\n1999\nSUBARU"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#where-2",
    "href": "slides/2024-11-13-clauses.html#where-2",
    "title": "SQL clauses",
    "section": "WHERE",
    "text": "WHERE\nBETWEEN can be used to specify a range of values for a numeric value. BETWEEN is inclusive.\n\nSELECT time, search_conducted, vehicle_year, vehicle_make\nFROM la_new_orleans_2020_04_01\nWHERE vehicle_year BETWEEN 1970 and 1999\n   AND vehicle_make = \"Subaru\"\nLIMIT 0, 10;\n\n\nDisplaying records 1 - 10\n\n\ntime\nsearch_conducted\nvehicle_year\nvehicle_make\n\n\n\n\n20:16:00\n0\n1991\nSUBARU\n\n\n20:54:00\n0\n1998\nSUBARU\n\n\n17:09:00\n0\n1999\nSUBARU\n\n\n13:20:00\n0\n1996\nSUBARU\n\n\n20:44:00\n0\n1998\nSUBARU\n\n\n21:05:00\n1\n1996\nSUBARU\n\n\n21:05:00\n1\n1996\nSUBARU\n\n\n18:52:00\n0\n1995\nSUBARU\n\n\n17:36:00\n0\n1996\nSUBARU\n\n\n08:40:00\n0\n1999\nSUBARU"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#where-3",
    "href": "slides/2024-11-13-clauses.html#where-3",
    "title": "SQL clauses",
    "section": "WHERE",
    "text": "WHERE\nIN is similar to the dplyr %in% function which specifies distinct values for the variable.\n\nSELECT time, search_conducted, vehicle_year, vehicle_make\nFROM la_new_orleans_2020_04_01\nWHERE vehicle_make IN (\"Subaru\", \"Dodge\")\n   AND search_conducted = 1\nLIMIT 0, 10;\n\n\nDisplaying records 1 - 10\n\n\ntime\nsearch_conducted\nvehicle_year\nvehicle_make\n\n\n\n\n03:45:00\n1\n2010\nDODGE\n\n\n20:29:00\n1\n2012\nDODGE\n\n\n21:12:00\n1\n2011\nDODGE\n\n\n21:12:00\n1\n2011\nDODGE\n\n\n02:00:00\n1\n2014\nDODGE\n\n\n20:46:00\n1\n2008\nDODGE\n\n\n20:46:00\n1\n2008\nDODGE\n\n\n04:47:00\n1\n2014\nDODGE\n\n\n19:16:00\n1\n1995\nDODGE\n\n\n09:43:00\n1\n2009\nDODGE"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#where-4",
    "href": "slides/2024-11-13-clauses.html#where-4",
    "title": "SQL clauses",
    "section": "WHERE",
    "text": "WHERE\nAND takes precedent over OR in the order of operations, when there are no parentheses.\n\nSELECT time, search_conducted, vehicle_year, vehicle_make\nFROM la_new_orleans_2020_04_01\nWHERE vehicle_year BETWEEN 1970 and 1999 OR\n      vehicle_make IN (\"Subaru\", \"Dodge\") AND \n      search_conducted = 1\nLIMIT 0, 10;\n\n\nDisplaying records 1 - 10\n\n\ntime\nsearch_conducted\nvehicle_year\nvehicle_make\n\n\n\n\n16:03:00\n0\n1997\nGMC - GENERAL MOTORS CORP.\n\n\n16:03:00\n0\n1997\nGMC - GENERAL MOTORS CORP.\n\n\n07:54:00\n0\n1995\nTOYOTA\n\n\n21:01:00\n0\n1997\nGMC - GENERAL MOTORS CORP.\n\n\n21:06:00\n0\n1996\nDODGE\n\n\n21:16:00\n0\n1996\nDODGE\n\n\n10:20:00\n0\n1994\nMERCEDES-BENZ\n\n\n10:35:00\n0\n1998\nPONTIAC\n\n\n12:46:00\n0\n1996\nACURA\n\n\n15:17:00\n0\n1997\nOLDSMOBILE\n\n\n\n\n\nsame as:\n\nSELECT time, search_conducted, vehicle_year, vehicle_make\nFROM la_new_orleans_2020_04_01\nWHERE vehicle_year BETWEEN 1970 and 1999 OR\n      (vehicle_make IN (\"Subaru\", \"Dodge\") AND \n      search_conducted = 1)\nLIMIT 0, 10;\n\n\nDisplaying records 1 - 10\n\n\ntime\nsearch_conducted\nvehicle_year\nvehicle_make\n\n\n\n\n16:03:00\n0\n1997\nGMC - GENERAL MOTORS CORP.\n\n\n16:03:00\n0\n1997\nGMC - GENERAL MOTORS CORP.\n\n\n07:54:00\n0\n1995\nTOYOTA\n\n\n21:01:00\n0\n1997\nGMC - GENERAL MOTORS CORP.\n\n\n21:06:00\n0\n1996\nDODGE\n\n\n21:16:00\n0\n1996\nDODGE\n\n\n10:20:00\n0\n1994\nMERCEDES-BENZ\n\n\n10:35:00\n0\n1998\nPONTIAC\n\n\n12:46:00\n0\n1996\nACURA\n\n\n15:17:00\n0\n1997\nOLDSMOBILE"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#where-5",
    "href": "slides/2024-11-13-clauses.html#where-5",
    "title": "SQL clauses",
    "section": "WHERE",
    "text": "WHERE\nParentheses take precedent over AND and OR.\n\nSELECT time, search_conducted, vehicle_year, vehicle_make\nFROM la_new_orleans_2020_04_01\nWHERE (vehicle_year BETWEEN 1970 and 1999 OR\n      vehicle_make IN (\"Subaru\", \"Dodge\") ) AND \n      search_conducted = 1\nLIMIT 0, 10;\n\n\nDisplaying records 1 - 10\n\n\ntime\nsearch_conducted\nvehicle_year\nvehicle_make\n\n\n\n\n03:45:00\n1\n2010\nDODGE\n\n\n07:11:00\n1\n1999\nCADILLAC\n\n\n20:21:00\n1\n1999\nMERCURY\n\n\n20:29:00\n1\n2012\nDODGE\n\n\n20:31:00\n1\n1993\nINFINITY\n\n\n21:12:00\n1\n2011\nDODGE\n\n\n21:12:00\n1\n2011\nDODGE\n\n\n02:00:00\n1\n2014\nDODGE\n\n\n14:31:00\n1\n1994\nJEEP\n\n\n04:39:00\n1\n1995\nCHEVROLET"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#where-6",
    "href": "slides/2024-11-13-clauses.html#where-6",
    "title": "SQL clauses",
    "section": "WHERE",
    "text": "WHERE\nIS NULL not = NULL (because NULL indicates unknown). (Just like how we need to use is.na() in R!)\n\nSELECT time, search_conducted, vehicle_year, vehicle_make\nFROM la_new_orleans_2020_04_01\nWHERE vehicle_make IS NULL\nLIMIT 0, 10;\n\n\nDisplaying records 1 - 10\n\n\ntime\nsearch_conducted\nvehicle_year\nvehicle_make\n\n\n\n\n02:06:00\n0\n\n\n\n\n02:06:00\n0\n\n\n\n\n02:06:00\n0\n\n\n\n\n02:06:00\n0\n\n\n\n\n02:06:00\n0\n\n\n\n\n02:06:00\n0\n\n\n\n\n02:06:00\n0\n\n\n\n\n08:02:00\n0\n\n\n\n\n20:05:00\n0\n\n\n\n\n20:05:00\n0\n\n\n\n\n\n\n\n\nSELECT time, search_conducted, vehicle_year, vehicle_make\nFROM la_new_orleans_2020_04_01\nWHERE vehicle_make = NULL\nLIMIT 0, 10;"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#a-null-example",
    "href": "slides/2024-11-13-clauses.html#a-null-example",
    "title": "SQL clauses",
    "section": "A NULL example",
    "text": "A NULL example\nThe logic of NULL:1\n\nIf you do anything with NULL, you’ll just get NULL. For instance if \\(x\\) is NULL, then \\(x &gt; 3\\), \\(1 = x\\), and \\(x + 4\\) all evaluate to NULL. Even \\(x =\\) NULL evaluates to NULL! if you want to check whether \\(x\\) is NULL, use x IS NULL or x IS NOT NULL.\nNULL short-circuits with boolean operators. That means a boolean expression involving NULL will evaluate to:\n\nTRUE, if it’d evaluate to TRUE regardless of whether the NULL value is really TRUE or FALSE.\nFALSE, if it’d evaluate to FALSE regardless of whether the NULL value is really TRUE or FALSE.\nOr NULL, if it depends on the NULL value.\n\n\ntaken from: https://cs186berkeley.net/notes/note1/#filtering-null-values"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#a-null-example-1",
    "href": "slides/2024-11-13-clauses.html#a-null-example-1",
    "title": "SQL clauses",
    "section": "A NULL example",
    "text": "A NULL example\nConsider the following table and SQL query to evaluate WHERE age &lt;= 20 OR num_dogs = 3:\n\nSELECT * FROM (\n   SELECT 'Ace' AS name, 20 AS age, 4 as num_dogs\n   UNION\n   SELECT 'Ada' AS name, NULL AS age, 3 as num_dogs   \n   UNION\n   SELECT 'Ben' AS name, NULL AS age, NULL as num_dogs\n   UNION\n   SELECT 'Cho' AS name, 27 AS age, NULL as num_dogs\n   ) AS temptable;\n\n\n4 records\n\n\nname\nage\nnum_dogs\n\n\n\n\nAce\n20\n4\n\n\nAda\n\n3\n\n\nBen\n\n\n\n\nCho\n27"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#a-null-example-2",
    "href": "slides/2024-11-13-clauses.html#a-null-example-2",
    "title": "SQL clauses",
    "section": "A NULL example",
    "text": "A NULL example\nWhere does the WHERE clause do? It tells us that we only want to keep the rows satisfying the age &lt;= 20 OR num_dogs = 3. Let’s consider each row one at a time:\n\nFor Ace, age &lt;= 20 evaluates to TRUE so the claim is satisfied.\nFor Ada, age &lt;= 20 evaluates to NULL but num_dogs = 3 evaluates to TRUE so the claim is satisfied.\nFor Ben, age &lt;= 20 evaluates to NULL and num_dogs = 3 evaluates to NULL so the overall expression is NULL which has a FALSE value.\nFor Cho, age &lt;= 20 evaluates to FALSE and num_dogs = 3 evaluates to NULL so the overall expression evaluates to NULL (because it depends on the value of the NULL).\n\nThus we keep only Ace and Ada."
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#a-null-example-3",
    "href": "slides/2024-11-13-clauses.html#a-null-example-3",
    "title": "SQL clauses",
    "section": "A NULL example",
    "text": "A NULL example\n\nSELECT * FROM (\n   SELECT 'Ace' AS name, 20 AS age, 4 as num_dogs\n   UNION\n   SELECT 'Ada' AS name, NULL AS age, 3 as num_dogs   \n   UNION\n   SELECT 'Ben' AS name, NULL AS age, NULL as num_dogs\n   UNION\n   SELECT 'Cho' AS name, 27 AS age, NULL as num_dogs\n   ) AS temptable\nWHERE age &lt;= 20 OR num_dogs = 3;\n\n\n2 records\n\n\nname\nage\nnum_dogs\n\n\n\n\nAce\n20\n4\n\n\nAda\n\n3"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#group-by",
    "href": "slides/2024-11-13-clauses.html#group-by",
    "title": "SQL clauses",
    "section": "GROUP BY",
    "text": "GROUP BY\nThe GROUP BY clause will direct SQL to carry out the query separately for each category in the grouped variable.\n\naggregate functions include COUNT(), SUM(), MAX(), MIN(), and AVG().\n\n\nSELECT subject_race,\n       COUNT(*) AS num_stops, \n       SUM(1) AS num_stops_also,\n       SUM(2) AS double_stops\nFROM la_new_orleans_2020_04_01\nWHERE vehicle_year BETWEEN 1970 and 1999\nGROUP BY subject_race;\n\n\n7 records\n\n\nsubject_race\nnum_stops\nnum_stops_also\ndouble_stops\n\n\n\n\n\n2217\n2217\n4434\n\n\nasian/pacific islander\n315\n315\n630\n\n\nblack\n31586\n31586\n63172\n\n\nhispanic\n2347\n2347\n4694\n\n\nother\n23\n23\n46\n\n\nunknown\n211\n211\n422\n\n\nwhite\n11475\n11475\n22950"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#group-by-1",
    "href": "slides/2024-11-13-clauses.html#group-by-1",
    "title": "SQL clauses",
    "section": "GROUP BY",
    "text": "GROUP BY\nFor those people whose cars are between 1970 and 1999, how old is the youngest and oldest person for each subject_race?\n\nSELECT subject_race,\n       COUNT(*) AS num_stops, \n       MIN(subject_age) AS min_age,\n       MAX(subject_age) AS max_age\nFROM la_new_orleans_2020_04_01\nWHERE vehicle_year BETWEEN 1970 and 1999\nGROUP BY subject_race;\n\n\n7 records\n\n\nsubject_race\nnum_stops\nmin_age\nmax_age\n\n\n\n\n\n2217\n\n\n\n\nasian/pacific islander\n315\n17\n78\n\n\nblack\n31586\n10\n100\n\n\nhispanic\n2347\n13\n87\n\n\nother\n23\n19\n68\n\n\nunknown\n211\n17\n81\n\n\nwhite\n11475\n12\n99"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#group-by-2",
    "href": "slides/2024-11-13-clauses.html#group-by-2",
    "title": "SQL clauses",
    "section": "GROUP BY",
    "text": "GROUP BY\nGROUP BY will work applied to multiple columns.\n\nSELECT subject_race,\n       COUNT(*) AS num_stops, \n       MIN(subject_age) AS min_age,\n       MAX(subject_age) AS max_age,\n       DAYNAME(date) AS wday\nFROM la_new_orleans_2020_04_01\nGROUP BY subject_race, wday;\n\n\nDisplaying records 1 - 10\n\n\nsubject_race\nnum_stops\nmin_age\nmax_age\nwday\n\n\n\n\n\n1800\n\n\nFriday\n\n\n\n1590\n\n\nMonday\n\n\n\n1332\n\n\nSaturday\n\n\n\n1172\n\n\nSunday\n\n\n\n1953\n\n\nThursday\n\n\n\n1877\n\n\nTuesday\n\n\n\n2006\n\n\nWednesday\n\n\nasian/pacific islander\n551\n16\n78\nFriday\n\n\nasian/pacific islander\n484\n13\n78\nMonday\n\n\nasian/pacific islander\n475\n15\n78\nSaturday"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#order-by",
    "href": "slides/2024-11-13-clauses.html#order-by",
    "title": "SQL clauses",
    "section": "ORDER BY",
    "text": "ORDER BY\nORDER BY allows us to look at interesting aspects of the data by sorting the data.\n\nSELECT subject_race,\n       COUNT(*) AS num_stops, \n       MIN(subject_age) AS min_age,\n       MAX(subject_age) AS max_age,\n       DAYNAME(date) AS wday\nFROM la_new_orleans_2020_04_01\nGROUP BY subject_race, wday\nORDER BY min_age ASC;\n\n\nDisplaying records 1 - 10\n\n\nsubject_race\nnum_stops\nmin_age\nmax_age\nwday\n\n\n\n\n\n1332\n\n\nSaturday\n\n\n\n1172\n\n\nSunday\n\n\n\n1877\n\n\nTuesday\n\n\n\n2006\n\n\nWednesday\n\n\n\n1953\n\n\nThursday\n\n\n\n1800\n\n\nFriday\n\n\n\n1590\n\n\nMonday\n\n\nblack\n49945\n10\n110\nFriday\n\n\nblack\n42593\n10\n106\nSaturday\n\n\nblack\n39252\n10\n92\nSunday\n\n\n\n\n\nWHAT?!?!! How are 10 year olds getting pulled over for traffic stops?"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#order-by-1",
    "href": "slides/2024-11-13-clauses.html#order-by-1",
    "title": "SQL clauses",
    "section": "ORDER BY",
    "text": "ORDER BY\n\nSELECT subject_race,\n       COUNT(*) AS num_stops, \n       MIN(subject_age) AS min_age,\n       MAX(subject_age) AS max_age,\n       DAYNAME(date) AS wday\nFROM la_new_orleans_2020_04_01\nGROUP BY subject_race, wday\nORDER BY max_age DESC;\n\n\nDisplaying records 1 - 10\n\n\nsubject_race\nnum_stops\nmin_age\nmax_age\nwday\n\n\n\n\nblack\n49945\n10\n110\nFriday\n\n\nblack\n56459\n10\n110\nTuesday\n\n\nblack\n57153\n10\n110\nWednesday\n\n\nblack\n54858\n10\n110\nThursday\n\n\nhispanic\n2007\n11\n110\nThursday\n\n\nblack\n49557\n10\n110\nMonday\n\n\nwhite\n18494\n11\n107\nFriday\n\n\nblack\n42593\n10\n106\nSaturday\n\n\nwhite\n20764\n11\n105\nWednesday\n\n\nwhite\n15778\n11\n104\nSunday\n\n\n\n\n\nSo many people over 100 years old… the data seem fishy!"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#order-by-2",
    "href": "slides/2024-11-13-clauses.html#order-by-2",
    "title": "SQL clauses",
    "section": "ORDER BY",
    "text": "ORDER BY\n\nSELECT subject_race,\n       COUNT(*) AS num_stops, \n       MIN(subject_age) AS min_age,\n       MAX(subject_age) AS max_age,\n       DAYNAME(date) AS wday\nFROM la_new_orleans_2020_04_01\nGROUP BY subject_race, wday\nORDER BY wday, subject_race;\n\n\nDisplaying records 1 - 10\n\n\nsubject_race\nnum_stops\nmin_age\nmax_age\nwday\n\n\n\n\nblack\n2\n17\n24\n\n\n\nwhite\n2\n23\n57\n\n\n\n\n1800\n\n\nFriday\n\n\nasian/pacific islander\n551\n16\n78\nFriday\n\n\nblack\n49945\n10\n110\nFriday\n\n\nhispanic\n1851\n11\n83\nFriday\n\n\nother\n61\n19\n66\nFriday\n\n\nunknown\n510\n17\n75\nFriday\n\n\nwhite\n18494\n11\n107\nFriday\n\n\n\n1590\n\n\nMonday"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#order-by-3",
    "href": "slides/2024-11-13-clauses.html#order-by-3",
    "title": "SQL clauses",
    "section": "ORDER BY",
    "text": "ORDER BY\n\n\n\nNote that both GROUP BY and ORDER BY evaluate the data after it has been retrieved. Therefore, the functions operate on the results set, not the original rows of the data.\n\n\n\nWe are able to GROUP BY and ORDER BY on the new variables we had created, wday."
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#having",
    "href": "slides/2024-11-13-clauses.html#having",
    "title": "SQL clauses",
    "section": "HAVING",
    "text": "HAVING\nRecall that WHERE acts only on the original data. If we are interested in traffic stops that happened on Friday, we need to use the derived variable wday instead of the raw variable date. Fortunately, HAVING works on the results set."
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#having-1",
    "href": "slides/2024-11-13-clauses.html#having-1",
    "title": "SQL clauses",
    "section": "HAVING",
    "text": "HAVING\n\nSELECT subject_race,\n       COUNT(*) AS num_stops, \n       MIN(subject_age) AS min_age,\n       MAX(subject_age) AS max_age,\n       DAYNAME(date) AS wday\nFROM la_new_orleans_2020_04_01\nGROUP BY subject_race, wday\nHAVING wday = 'Friday';\n\n\n7 records\n\n\nsubject_race\nnum_stops\nmin_age\nmax_age\nwday\n\n\n\n\n\n1800\n\n\nFriday\n\n\nasian/pacific islander\n551\n16\n78\nFriday\n\n\nblack\n49945\n10\n110\nFriday\n\n\nhispanic\n1851\n11\n83\nFriday\n\n\nother\n61\n19\n66\nFriday\n\n\nunknown\n510\n17\n75\nFriday\n\n\nwhite\n18494\n11\n107\nFriday"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#having-2",
    "href": "slides/2024-11-13-clauses.html#having-2",
    "title": "SQL clauses",
    "section": "HAVING",
    "text": "HAVING\nWhile it worked out quite well for us that HAVING was able to filter the data based on the results set, the use of HAVING was quite onerous because the entire data set was considered before the filter was applied. That is, if the filter can be done on the original data using WHERE, the query will be much faster and more efficient.\nNote: HAVING requires a GROUP BY clause. And the variable(s) used in HAVING must also be part of the GROUP BY clause."
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#limit",
    "href": "slides/2024-11-13-clauses.html#limit",
    "title": "SQL clauses",
    "section": "LIMIT",
    "text": "LIMIT\nLIMIT truncates the query to specified rows. The first number is the offset (i.e., the number of rows to skip), the second number is the (maximum) number of rows to return. Here, we return rows 154219 through 154228.\nThe first number is optional.\n\nSELECT * FROM la_new_orleans_2020_04_01 LIMIT 154218, 10;\n\n\nDisplaying records 1 - 10\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nraw_row_number\ndate\ntime\nlocation\nlat\nlng\ndistrict\nzone\nsubject_age\nsubject_race\nsubject_sex\nofficer_assignment\ntype\narrest_made\ncitation_issued\nwarning_issued\noutcome\ncontraband_found\ncontraband_drugs\ncontraband_weapons\nfrisk_performed\nsearch_conducted\nsearch_person\nsearch_vehicle\nsearch_basis\nreason_for_stop\nvehicle_color\nvehicle_make\nvehicle_model\nvehicle_year\nraw_actions_taken\nraw_subject_race\n\n\n\n\n442170\n2017-04-20\n13:15:00\nGentilly Blvd & Franklin Ave\n30.0\n-90.0\n3\nY\n31\nblack\nmale\n3rd District\nvehicular\n0\n0\n1\nwarning\n\n\n\n0\n0\n0\n0\n\nTRAFFIC VIOLATION\nBLACK\nDODGE\nCHARGER\n2008\nStop Results: Verbal Warning;Subject Type: Driver;Search Occurred: No;Evidence Seized: No;Consent To Search: No;Exit Vehicle: No\nBLACK\n\n\n442169\n2017-04-20\n13:15:00\nGentilly Blvd & Franklin Ave\n30.0\n-90.0\n3\nY\n32\nblack\nmale\n3rd District\nvehicular\n1\n0\n0\narrest\n\n\n\n0\n0\n0\n0\n\nTRAFFIC VIOLATION\nBLACK\nDODGE\nCHARGER\n2008\nStop Results: Physical Arrest;Subject Type: Passenger;Search Occurred: No;Evidence Seized: No;Consent To Search: No;Exit Vehicle: No\nBLACK\n\n\n442094\n2017-04-20\n01:16:00\nBroadway & Freret St\n29.9\n-90.1\n2\nH\n41\nblack\nmale\n2nd District\npedestrian\n0\n0\n0\n\n0\n0\n0\n1\n1\n1\n1\nconsent\nSUSPECT PERSON\n\n\n\n\nStop Results: No action taken;Subject Type: Pedestrian;Search Occurred: Yes;Search Types: Pat-down;Evidence Seized: No;Legal Basises: Consent to search;Consent To Search: Yes;Exit Vehicle: No\nBLACK\n\n\n442171\n2017-04-20\n13:17:00\nFranklin Ave & Gentilly Blvd\n30.0\n-90.0\n3\nY\n27\nblack\nmale\n3rd District\nvehicular\n0\n1\n0\ncitation\n\n\n\n0\n0\n0\n0\n\nTRAFFIC VIOLATION\nGRAY\nPONTIAC\nGRAND PRIX\n2008\nStop Results: Citation Issued;Subject Type: Driver;Search Occurred: No;Evidence Seized: No;Consent To Search: No;Exit Vehicle: Yes\nBLACK\n\n\n442093\n2017-04-20\n01:22:00\nS Claiborne Ave & Thalia St\n29.9\n-90.1\n6\nJ\n28\nwhite\nfemale\n6th District\nvehicular\n0\n0\n1\nwarning\n\n\n\n0\n0\n0\n0\n\nTRAFFIC VIOLATION\nBLUE\nJEEP\nGRAND CHEROKEE\n2002\nStop Results: Verbal Warning;Subject Type: Driver;Search Occurred: No;Evidence Seized: No;Consent To Search: No;Exit Vehicle: No\nWHITE\n\n\n442162\n2017-04-20\n13:27:00\n007XX Saint Charles Ave\n\n\n8\nH\n30\nwhite\nmale\n8th District\nvehicular\n0\n1\n0\ncitation\n\n\n\n0\n0\n0\n0\n\nTRAFFIC VIOLATION\nYELLOW\nDODGE\nGRAND CARAVAN\n2013\nStop Results: Citation Issued;Subject Type: Driver;Search Occurred: No;Evidence Seized: No;Consent To Search: No;Exit Vehicle: No\nWHITE\n\n\n442160\n2017-04-20\n13:27:00\nTulane Ave & S Jefferson Davis Pkwy\n30.0\n-90.1\n1\nL\n22\nblack\nfemale\n1st District\nvehicular\n0\n1\n1\ncitation\n\n\n\n0\n0\n0\n0\n\nTRAFFIC VIOLATION\nWHITE\nCHEVROLET\nOTHER\n2007\nStop Results: Citation Issued;Stop Results: Verbal Warning;Subject Type: Driver;Search Occurred: No;Evidence Seized: No;Consent To Search: No;Exit Vehicle: No\nBLACK\n\n\n442159\n2017-04-20\n13:31:00\nDiana St & Wagner St\n29.9\n-90.0\n4\nH\n20\nblack\nfemale\n4th District\nvehicular\n0\n0\n1\nwarning\n\n\n\n0\n0\n0\n0\n\nTRAFFIC VIOLATION\nWHITE\nNISSAN\nALTIMA\n2003\nStop Results: Verbal Warning;Subject Type: Driver;Search Occurred: No;Evidence Seized: No;Consent To Search: No;Exit Vehicle: No\nBLACK\n\n\n442161\n2017-04-20\n13:35:00\nS Jefferson Davis Pkwy & Tulane Ave\n30.0\n-90.1\n1\nL\n28\nblack\nmale\n1st District\nvehicular\n0\n1\n0\ncitation\n0\n0\n0\n0\n1\n1\n1\nconsent\nTRAFFIC VIOLATION\nBLACK\nHONDA\nACCORD\n1991\nStop Results: Citation Issued;Subject Type: Driver;Search Occurred: Yes;Search Types: Vehicle;Evidence Seized: No;Legal Basises: Consent to search;Consent To Search: Yes;Exit Vehicle: Yes\nBLACK\n\n\n442650\n2017-04-20\n13:37:00\nSaint Louis St & N Peters St\n30.0\n-90.1\n8\nD\n57\nblack\nmale\n8th District\n\n0\n1\n0\ncitation\n\n\n\n0\n0\n0\n0\n\nCRIMINAL VIOLATION\n\n\n\n\nStop Results: Citation Issued;Subject Type: Pedestrian;Search Occurred: No;Evidence Seized: No;Consent To Search: No;Exit Vehicle: No\nBLACK"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#saving-sql-queries-as-r-objects",
    "href": "slides/2024-11-13-clauses.html#saving-sql-queries-as-r-objects",
    "title": "SQL clauses",
    "section": "Saving SQL queries as R objects",
    "text": "Saving SQL queries as R objects\nIf you are working in R to run SQL commands, you may want to use the query output for further analysis or visualizations.\n\nuse #| output.var: \"name_of_variable\" inside the {sql} chunk.\nname_of_variable will then be available to be used in the R environment.\n\n\n```{sql}\n#| connection: con_traffic\n#| output.var: \"new_table\"\n\nSELECT *, DAYNAME(date) AS wday\nFROM la_new_orleans_2020_04_01\nLIMIT 0, 1000;\n```"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#saving-sql-queries-as-r-objects-1",
    "href": "slides/2024-11-13-clauses.html#saving-sql-queries-as-r-objects-1",
    "title": "SQL clauses",
    "section": "Saving SQL queries as R objects",
    "text": "Saving SQL queries as R objects\n\n```{r}\nnew_table |&gt;\n  drop_na(wday) |&gt;\n  ggplot(aes(x = vehicle_year, y = subject_age, color = wday)) + \n  geom_point() +\n  xlim(1985, 2025)\n```"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#good-practice",
    "href": "slides/2024-11-13-clauses.html#good-practice",
    "title": "SQL clauses",
    "section": "Good practice",
    "text": "Good practice\nAlways a good idea to terminate the SQL connection when you are done with it.\n\ndbDisconnect(con_traffic, shutdown = TRUE)"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#traffic-stops",
    "href": "slides/2024-11-13-clauses.html#traffic-stops",
    "title": "SQL clauses",
    "section": "Traffic Stops",
    "text": "Traffic Stops\nConsider a database of information from Stanford Open Policing Project on over 200 million traffic stops in the US."
  },
  {
    "objectID": "slides/2024-11-18-joins.html#imdb",
    "href": "slides/2024-11-18-joins.html#imdb",
    "title": "SQL joins",
    "section": "IMDb",
    "text": "IMDb\nConsider a database of information from IMDb."
  },
  {
    "objectID": "slides/2024-11-18-joins.html#imdb-1",
    "href": "slides/2024-11-18-joins.html#imdb-1",
    "title": "SQL joins",
    "section": "IMDb",
    "text": "IMDb\n21 tables in the imdb database! Lots of details on movies, TV series, video games, and more. Today interest is in movies (and details within, like actors and ratings).\n\nSHOW TABLES;\n\n\nDisplaying records 1 - 10\n\n\nTables_in_imdb\n\n\n\n\naka_name\n\n\naka_title\n\n\ncast_info\n\n\nchar_name\n\n\ncomp_cast_type\n\n\ncompany_name\n\n\ncompany_type\n\n\ncomplete_cast\n\n\ninfo_type\n\n\nkeyword"
  },
  {
    "objectID": "slides/2024-11-18-joins.html#imdb---glance-through-tables",
    "href": "slides/2024-11-18-joins.html#imdb---glance-through-tables",
    "title": "SQL joins",
    "section": "IMDb - glance through tables",
    "text": "IMDb - glance through tables\n\nSELECT * FROM kind_type\nLIMIT 0, 10;\n\n\n7 records\n\n\nid\nkind\n\n\n\n\n1\nmovie\n\n\n2\ntv series\n\n\n3\ntv movie\n\n\n4\nvideo movie\n\n\n5\ntv mini series\n\n\n6\nvideo game\n\n\n7\nepisode"
  },
  {
    "objectID": "slides/2024-11-18-joins.html#all-the-joins",
    "href": "slides/2024-11-18-joins.html#all-the-joins",
    "title": "SQL joins",
    "section": "All the JOINs",
    "text": "All the JOINs\n\nJOIN (aka INNER JOIN): include all of the rows that exist in both tables\nLEFT JOIN: include all of the rows in the first table.\n\nRIGHT JOIN: include all of the rows in the second table.\nFULL OUTER JOIN: include all rows in either table. (The functionality doesn’t exist in MySQL but can be created using joins and UNION.)\nCROSS JOIN: match each row of the first table with each row in the second table."
  },
  {
    "objectID": "slides/2024-11-18-joins.html#all-the-joins-1",
    "href": "slides/2024-11-18-joins.html#all-the-joins-1",
    "title": "SQL joins",
    "section": "All the JOINs",
    "text": "All the JOINs\nVenn diagrams of the different types of joins.\n\nVenn diagrams describing different JOINs, image credit: phoenixNAP https://phoenixnap.com/kb/mysql-join"
  },
  {
    "objectID": "slides/2024-11-18-joins.html#all-the-joins-2",
    "href": "slides/2024-11-18-joins.html#all-the-joins-2",
    "title": "SQL joins",
    "section": "All the JOINs",
    "text": "All the JOINs\nMini data tables of the different types of JOIN. (In SQL the missing values will be labeled as NULL (not NA).)\n\nMini data tables describing different JOINs, image credit: Statistics Globe blog, https://statisticsglobe.com/r-dplyr-join-inner-left-right-full-semi-anti"
  },
  {
    "objectID": "slides/2024-11-18-joins.html#all-the-joins-3",
    "href": "slides/2024-11-18-joins.html#all-the-joins-3",
    "title": "SQL joins",
    "section": "All the JOINs",
    "text": "All the JOINs\nEach JOIN clause needs four specific pieces of information:\n\nThe name of the first table you want to JOIN.\nThe type of JOIN being used.\nThe name of the second table you want to JOIN.\nThe condition(s) under which you want the records in the first table to match records in the second table."
  },
  {
    "objectID": "slides/2024-11-18-joins.html#a-toy-example",
    "href": "slides/2024-11-18-joins.html#a-toy-example",
    "title": "SQL joins",
    "section": "A toy example",
    "text": "A toy example\nRock bands from the 60s.\n\nband_members\n\n# A tibble: 3 × 2\n  name  band   \n  &lt;chr&gt; &lt;chr&gt;  \n1 Mick  Stones \n2 John  Beatles\n3 Paul  Beatles\n\nband_instruments\n\n# A tibble: 3 × 2\n  name  plays \n  &lt;chr&gt; &lt;chr&gt; \n1 John  guitar\n2 Paul  bass  \n3 Keith guitar\n\n\nThe function sqldf() in the sqldf R package allows for SQL commands on R objects."
  },
  {
    "objectID": "slides/2024-11-18-joins.html#rock-bands---inner-join",
    "href": "slides/2024-11-18-joins.html#rock-bands---inner-join",
    "title": "SQL joins",
    "section": "Rock bands - INNER JOIN",
    "text": "Rock bands - INNER JOIN\nAn inner join combines two datasets returning only the observations that exist in both of the original datasets.\n\nsqldf::sqldf(\"SELECT star.name,\n                     star.band,\n                     inst.plays\n              FROM band_members AS star\n              JOIN band_instruments AS inst ON star.name = inst.name\")\n\n  name    band  plays\n1 John Beatles guitar\n2 Paul Beatles   bass"
  },
  {
    "objectID": "slides/2024-11-18-joins.html#rock-bands---full-join",
    "href": "slides/2024-11-18-joins.html#rock-bands---full-join",
    "title": "SQL joins",
    "section": "Rock bands - FULL JOIN",
    "text": "Rock bands - FULL JOIN\nA full join combines two datasets returning every observation that exists in either one of the original datasets.\n\nband_members |&gt;\n  full_join(band_instruments)\n\n# A tibble: 4 × 3\n  name  band    plays \n  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; \n1 Mick  Stones  &lt;NA&gt;  \n2 John  Beatles guitar\n3 Paul  Beatles bass  \n4 Keith &lt;NA&gt;    guitar\n\n\nThe full_join() function does not have an equivalent in MySQL. See notes for using JOINs and UNIONs to produce a full join."
  },
  {
    "objectID": "slides/2024-11-18-joins.html#rock-bands---left-join",
    "href": "slides/2024-11-18-joins.html#rock-bands---left-join",
    "title": "SQL joins",
    "section": "Rock bands - LEFT JOIN",
    "text": "Rock bands - LEFT JOIN\nA left join combines two datasets returning every observation that exists in the left (or first) original dataset.\n\nsqldf::sqldf(\"SELECT star.name,\n                     star.band,\n                      inst.plays\n              FROM band_members AS star\n              LEFT JOIN band_instruments AS inst \n              ON star.name = inst.name\")\n\n  name    band  plays\n1 Mick  Stones   &lt;NA&gt;\n2 John Beatles guitar\n3 Paul Beatles   bass"
  },
  {
    "objectID": "slides/2024-11-18-joins.html#rock-bands---right-join",
    "href": "slides/2024-11-18-joins.html#rock-bands---right-join",
    "title": "SQL joins",
    "section": "Rock bands - RIGHT JOIN",
    "text": "Rock bands - RIGHT JOIN\nA right join combines two datasets returning every observation that exists in the right (or second) original dataset.\n\nsqldf::sqldf(\"SELECT inst.name,\n                     star.band,\n                      inst.plays\n              FROM band_members AS star\n              RIGHT JOIN band_instruments AS inst \n              ON star.name = inst.name\")\n\n   name    band  plays\n1  John Beatles guitar\n2  Paul Beatles   bass\n3 Keith    &lt;NA&gt; guitar"
  },
  {
    "objectID": "slides/2024-11-18-joins.html#rock-bands---cross-join",
    "href": "slides/2024-11-18-joins.html#rock-bands---cross-join",
    "title": "SQL joins",
    "section": "Rock bands - CROSS JOIN",
    "text": "Rock bands - CROSS JOIN\nA cross join combines every row from one table with every row from another table to produce the Cartesian product of the two tables.\n\nsqldf::sqldf(\"SELECT *\n              FROM band_members AS star\n              CROSS JOIN band_instruments AS inst\")\n\n  name    band  name  plays\n1 Mick  Stones  John guitar\n2 Mick  Stones  Paul   bass\n3 Mick  Stones Keith guitar\n4 John Beatles  John guitar\n5 John Beatles  Paul   bass\n6 John Beatles Keith guitar\n7 Paul Beatles  John guitar\n8 Paul Beatles  Paul   bass\n9 Paul Beatles Keith guitar"
  },
  {
    "objectID": "slides/2024-11-18-joins.html#join-imdb-title-votes",
    "href": "slides/2024-11-18-joins.html#join-imdb-title-votes",
    "title": "SQL joins",
    "section": "JOIN IMDb title + votes",
    "text": "JOIN IMDb title + votes\nIn the imdb database, the title table includes information about the 4,626,322 titles in the database, including the id, title, kind_id (indicator for the kind of ID it is), and production_year. It does not, however, include the review of the title.\n\nSELECT * FROM title LIMIT 0, 10;\n\n\nDisplaying records 1 - 10\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nid\ntitle\nimdb_index\nkind_id\nproduction_year\nimdb_id\nphonetic_code\nepisode_of_id\nseason_nr\nepisode_nr\nseries_years\nmd5sum\n\n\n\n\n78460\nAdults Recat to the Simpsons (30th Anniversary)\n\n7\n2017\n\nA3432\n78406\n\n\n\n2ae09eed7d576cc2c24774fed5b18168\n\n\n70273\n(2016-05-18)\n\n7\n2016\n\n\n68058\n\n\n\n511dfc14cfff7589d29a95abb30cd66a\n\n\n60105\n(2014-04-11)\n\n7\n2014\n\n\n59138\n\n\n\nc6cdce7e667e07713e431805c407feed\n\n\n32120\n(2008-05-01)\n\n7\n2008\n\n\n32060\n\n\n\n100df65742caf5afd092b2e0ead67d8e\n\n\n97554\nSchmÃ¶lders Traum\n\n7\n2001\n\nS2543\n97302\n10\n1\n\n46862a2f96f9fb2d59e8c9a11ecfdd28\n\n\n57966\n(#1.1)\n\n7\n2013\n\n\n57965\n1\n1\n\n409c37703766c4b24f8a86162fd9cf85\n\n\n76391\nAnniversary\n\n7\n1971\n\nA5162\n76385\n4\n9\n\n5e12ce73fac1d1dcf94136b6e9acd8f8\n\n\n11952\nAngus Black/Lester Barrie/DC Curry\n\n7\n2009\n\nA5214\n11937\n4\n7\n\n9c38b9e5601dc154444b73b518034aa1\n\n\n1554\nNew Orleans\n\n7\n2003\n\nN6452\n1508\n2\n11\n\n621bea735740a547e862e4a3226f35d2\n\n\n58442\nKiss Me Kate\n\n7\n2011\n\nK2523\n58436\n1\n10\n\n293e8c75c7f35a4035abf617962be5a9"
  },
  {
    "objectID": "slides/2024-11-18-joins.html#join-imdb-title-votes-1",
    "href": "slides/2024-11-18-joins.html#join-imdb-title-votes-1",
    "title": "SQL joins",
    "section": "JOIN IMDb title + votes",
    "text": "JOIN IMDb title + votes\nThe movie_info_idx table does not contain much information about each particular film. It does, however, have an indicator for the movie ID (given by movie_id) as well as the number of votes (given by info where type_id = 100).\n\nSELECT * FROM movie_info_idx LIMIT 0, 6;\n\n\n6 records\n\n\nid\nmovie_id\ninfo_type_id\ninfo\nnote\n\n\n\n\n1\n1\n99\n31.2.1..2.\n\n\n\n2\n1\n100\n9\n\n\n\n3\n1\n101\n4.1\n\n\n\n4\n2\n99\n1000000102\n\n\n\n5\n2\n100\n61\n\n\n\n6\n2\n101\n6.4"
  },
  {
    "objectID": "slides/2024-11-18-joins.html#join-imdb-title-votes-2",
    "href": "slides/2024-11-18-joins.html#join-imdb-title-votes-2",
    "title": "SQL joins",
    "section": "JOIN IMDb title + votes",
    "text": "JOIN IMDb title + votes\n\ncombine the titles with the number of votes so that each title with user votes is included (INNER JOIN)\n\n\nSELECT title.id,\n       title.title,\n       movie_info_idx.info\nFROM title\nJOIN movie_info_idx ON title.id = movie_info_idx.movie_id \nWHERE title.production_year = 2015 \n    AND title.kind_id = 1                  # movies only\n    AND movie_info_idx.info_type_id = 100  # info_type is votes\n    AND movie_info_idx.info &gt; 150000       # at least 150,000 votes\nORDER BY movie_info_idx.info DESC\nLIMIT 0, 20;\n\n\nDisplaying records 1 - 10\n\n\nid\ntitle\ninfo\n\n\n\n\n4260166\nStar Wars: Episode VII - The Force Awakens\n691691\n\n\n3915213\nMad Max: Fury Road\n666484\n\n\n4389619\nThe Martian\n583987\n\n\n3313672\nAvengers: Age of Ultron\n540606\n\n\n4414139\nThe Revenant\n526189\n\n\n3787790\nJurassic World\n471237\n\n\n3752999\nInside Out\n443051\n\n\n3292159\nAnt-Man\n390965\n\n\n4364483\nThe Hateful Eight\n363199\n\n\n4251736\nSpectre\n319875\n\n\n\n\n\nSome aspects of the query are worth pointing out:\n\nThe variables in the output are given in the SELECT clause. The id and title (both from the title table) and the info from the movie_info_idx which represents the number of IMDb votes.\nThe variables are preceded by the table from which they came. While not always necessary, it is good practice so as to avoid confusion.\nThe JOIN happens by linking the id variable in the title table with the movie_id variable in the movie_info_idx table.\nThe LIMIT wasn’t necessary (there are only 12 observations), but it’s good practice so that we don’t end up with unwieldy query results.\nThe WHERE clause happens before the JOIN action, despite being written after.\nIn the WHERE clause, we keep only movies, only 2015 production year, and only at least 150,000 votes."
  },
  {
    "objectID": "slides/2024-11-18-joins.html#join-imdb-title-actress",
    "href": "slides/2024-11-18-joins.html#join-imdb-title-actress",
    "title": "SQL joins",
    "section": "JOIN IMDb title + actress",
    "text": "JOIN IMDb title + actress\ncast_info contains the person_id and the movie_id\n\nSELECT * FROM cast_info LIMIT 0, 10;\n\n\nDisplaying records 1 - 10\n\n\n\n\n\n\n\n\n\n\n\nid\nperson_id\nmovie_id\nperson_role_id\nnote\nnr_order\nrole_id\n\n\n\n\n1\n1\n3432997\n1\n\n31\n1\n\n\n2\n2\n1901690\n2\n\n\n1\n\n\n3\n3\n4027567\n2\n\n25\n1\n\n\n4\n3\n4282876\n3\n\n22\n1\n\n\n5\n4\n3542672\n\n\n12\n1\n\n\n6\n5\n3331520\n4\n(as $hutter Boy)\n10\n1\n\n\n7\n5\n4027191\n2\n(as $hutter Boy)\n1\n1\n\n\n8\n5\n4195731\n5\n(uncredited)\n\n1\n\n\n9\n5\n4263956\n6\n(uncredited)\n\n1\n\n\n10\n5\n4267787\n7\n(uncredited)\n\n1\n\n\n\n\n\nperson_role_id is 1 if actor and 2 if actress"
  },
  {
    "objectID": "slides/2024-11-18-joins.html#join-imdb-title-actress-1",
    "href": "slides/2024-11-18-joins.html#join-imdb-title-actress-1",
    "title": "SQL joins",
    "section": "JOIN IMDb title + actress",
    "text": "JOIN IMDb title + actress\naka_name contains person_id and name (of actor)\n\nSELECT * FROM aka_name LIMIT 0, 10;\n\n\nDisplaying records 1 - 10\n\n\n\n\n\n\n\n\n\n\n\n\nid\nperson_id\nname\nimdb_index\nname_pcode_cf\nname_pcode_nf\nsurname_pcode\nmd5sum\n\n\n\n\n1\n6188450\nSmith, Jessica Noel\n\nS5325\nJ2542\nS53\n25c9d464e3ff2957533546aa92b397ed\n\n\n2\n5125059\nPain, L. $ham\n\nP545\nL515\nP5\n569b1e885ccb51211c01753f0dad9b2c\n\n\n3\n5\nBoy, \\(hutter               |           |B36           |H361          |B             |35092b5604ce378fc48c8a6fc0038a49 |\n|4  |   4152053|Dollasign, Ty              |           |D4253         |T3425         |D425          |0f565a2d8027cfb8ed6c5f4bba719fcd |\n|5  |   4152053|Sign, Ty Dolla             |           |S2534         |T3425         |S25           |2eded1b021b96333b4b74e0fec959650 |\n|6  |         6|Moore, Brandon             |           |M6165         |B6535         |M6            |193a6f5adf4756320f622162d2475608 |\n|7  |         8|\\)torm, Country\n\nT6525\nC5363\nT65\n1654400b707d34323ea392b87060e6cc\n\n\n8\n19\n‘Hooper’, Simon P.J. Kelly\n\nH1625\nS5124\nH16\n3fd8885372c23f8c74e583da91d1fd05\n\n\n9\n19\nHooper\n\nH16\n\n\n24ddc68ab605ee95857ad45b65ffa2d8\n\n\n10\n19\nKelly, Simon P.J.\n\nK4251\nS5124\nK4\n33d976f22e276b73c61513bc5f6e72a6"
  },
  {
    "objectID": "slides/2024-11-18-joins.html#join-imdb-title-actress-2",
    "href": "slides/2024-11-18-joins.html#join-imdb-title-actress-2",
    "title": "SQL joins",
    "section": "JOIN IMDb title + actress",
    "text": "JOIN IMDb title + actress\ntitle contains id and title (of the movie)\n\nSELECT * FROM title LIMIT 0, 10;\n\n\nDisplaying records 1 - 10\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nid\ntitle\nimdb_index\nkind_id\nproduction_year\nimdb_id\nphonetic_code\nepisode_of_id\nseason_nr\nepisode_nr\nseries_years\nmd5sum\n\n\n\n\n78460\nAdults Recat to the Simpsons (30th Anniversary)\n\n7\n2017\n\nA3432\n78406\n\n\n\n2ae09eed7d576cc2c24774fed5b18168\n\n\n70273\n(2016-05-18)\n\n7\n2016\n\n\n68058\n\n\n\n511dfc14cfff7589d29a95abb30cd66a\n\n\n60105\n(2014-04-11)\n\n7\n2014\n\n\n59138\n\n\n\nc6cdce7e667e07713e431805c407feed\n\n\n32120\n(2008-05-01)\n\n7\n2008\n\n\n32060\n\n\n\n100df65742caf5afd092b2e0ead67d8e\n\n\n97554\nSchmÃ¶lders Traum\n\n7\n2001\n\nS2543\n97302\n10\n1\n\n46862a2f96f9fb2d59e8c9a11ecfdd28\n\n\n57966\n(#1.1)\n\n7\n2013\n\n\n57965\n1\n1\n\n409c37703766c4b24f8a86162fd9cf85\n\n\n76391\nAnniversary\n\n7\n1971\n\nA5162\n76385\n4\n9\n\n5e12ce73fac1d1dcf94136b6e9acd8f8\n\n\n11952\nAngus Black/Lester Barrie/DC Curry\n\n7\n2009\n\nA5214\n11937\n4\n7\n\n9c38b9e5601dc154444b73b518034aa1\n\n\n1554\nNew Orleans\n\n7\n2003\n\nN6452\n1508\n2\n11\n\n621bea735740a547e862e4a3226f35d2\n\n\n58442\nKiss Me Kate\n\n7\n2011\n\nK2523\n58436\n1\n10\n\n293e8c75c7f35a4035abf617962be5a9"
  },
  {
    "objectID": "slides/2024-11-18-joins.html#join-imdb-title-actress-3",
    "href": "slides/2024-11-18-joins.html#join-imdb-title-actress-3",
    "title": "SQL joins",
    "section": "JOIN IMDb title + actress",
    "text": "JOIN IMDb title + actress\nGoal: identify the actresses in those movies with the highest number of votes.\n\nSELECT DISTINCT t.title,\n       idx.info,\n       a.person_id,\n       n.name\nFROM title AS t\nJOIN movie_info_idx AS idx ON t.id = idx.movie_id \nJOIN cast_info AS a ON idx.movie_id = a.movie_id\nJOIN aka_name AS n ON a.person_id = n.person_id\nWHERE t.production_year = 2015 \n    AND t.kind_id = 1           # movies only\n    AND idx.info_type_id = 100  # info_type is votes\n    AND idx.info &gt; 150000       # at least 150,000 votes\n    AND a.role_id = 2           # actresses only\nORDER BY a.person_id\nLIMIT 0, 50;\n\n\nDisplaying records 1 - 10\n\n\n\n\n\n\n\n\ntitle\ninfo\nperson_id\nname\n\n\n\n\nMission: Impossible - Rogue Nation\n266759\n2674172\nSofz\n\n\nMission: Impossible - Rogue Nation\n266759\n2674172\nSof\n\n\nFocus\n172680\n2678594\nLabouisse, Kate\n\n\nMad Max: Fury Road\n666484\n2681098\nMichelle, Debra\n\n\nThe Hunger Games: Mockingjay - Part 2\n214569\n2685496\nHarris, Ahnie\n\n\nThe Hunger Games: Mockingjay - Part 2\n214569\n2685496\nHarris, Jasmine\n\n\nCreed\n183904\n2686218\nKareema, Kiana A.\n\n\nAnt-Man\n390965\n2687271\nAkana, Anna Kay\n\n\nInside Out\n443051\n2689505\nAllen, Lori\n\n\nInside Out\n443051\n2689505\nDenniberg, Lori Alan\n\n\n\n\n\nConnecting the most popular movies of 2015 with the actresses in those movies requires a series of JOINs. Note that to make the code less onerous, the title table has been aliased by t, the movie_info_idx table has been aliased by idx, the cast_info table has been aliased by a, and the aka_name table has been aliased by n.\nThere is a lot of data cleaning to do as some of the person_id values are one to many!! That is, the person_id matches multiple names in the aka_name database."
  },
  {
    "objectID": "slides/2024-11-18-joins.html#other-joins",
    "href": "slides/2024-11-18-joins.html#other-joins",
    "title": "SQL joins",
    "section": "Other JOINs",
    "text": "Other JOINs\nLet’s look at RIGHT JOIN and LEFT JOIN using two new smaller tables.\n\nThe first has seven movies in it (from 2015 with at least 400,000 IMDb votes).\nThe second consists of almost 3 million actresses (person_role_id = 2). In order to find a subset of actresses, the person_id &gt; 3900000 was set arbitrarily (in order to have a smaller group with which to work).\n\nUsing subqueries, we can JOIN the two datasets using different JOIN techniques."
  },
  {
    "objectID": "slides/2024-11-18-joins.html#movies",
    "href": "slides/2024-11-18-joins.html#movies",
    "title": "SQL joins",
    "section": "movies:",
    "text": "movies:\n\nSELECT t.id,\n       t.title,\n       idx.info,\n       (SELECT COUNT(*)\n       FROM title AS t\n       JOIN movie_info_idx AS idx ON idx.movie_id = t.id\n       WHERE t.production_year = 2015  \n             AND t.kind_id = 1\n             AND idx.info_type_id = 100\n             AND idx.info &gt; 400000) AS row_count\nFROM title AS t\nJOIN movie_info_idx AS idx ON idx.movie_id = t.id\nWHERE t.production_year = 2015  \n    AND t.kind_id = 1             # movies only\n    AND idx.info_type_id = 100    # info_type is votes\n    AND idx.info &gt; 400000         # at least 400,000 votes\nORDER BY idx.info DESC;\n\n\n7 records\n\n\n\n\n\n\n\n\nid\ntitle\ninfo\nrow_count\n\n\n\n\n4260166\nStar Wars: Episode VII - The Force Awakens\n691691\n7\n\n\n3915213\nMad Max: Fury Road\n666484\n7\n\n\n4389619\nThe Martian\n583987\n7\n\n\n3313672\nAvengers: Age of Ultron\n540606\n7\n\n\n4414139\nThe Revenant\n526189\n7\n\n\n3787790\nJurassic World\n471237\n7\n\n\n3752999\nInside Out\n443051\n7"
  },
  {
    "objectID": "slides/2024-11-18-joins.html#actresses",
    "href": "slides/2024-11-18-joins.html#actresses",
    "title": "SQL joins",
    "section": "actresses:",
    "text": "actresses:\n\n\nSELECT a.person_id,\n       a.movie_id,\n       n.name,\n       (SELECT COUNT(*)\n       FROM cast_info AS a\n       JOIN aka_name AS n ON a.person_id = n.person_id\n       WHERE a.person_role_id = 2  \n             AND a.person_id &gt; 390000) AS row_count\nFROM cast_info AS a\nJOIN aka_name AS n ON a.person_id = n.person_id\n       WHERE a.person_role_id = 2  \n             AND a.person_id &gt; 3900000\nLIMIT 0, 20;\n\n\nDisplaying records 1 - 10\n\n\nperson_id\nmovie_id\nname\nrow_count\n\n\n\n\n3900141\n759802\nSimons, Rita Joanne\n2904759\n\n\n3902258\n4365829\nSinger, Rabbi Tovia\n2904759\n\n\n3902699\n3109788\nSingh, Sabine Erika\n2904759\n\n\n3903035\n3215866\nVal\n2904759\n\n\n3904831\n2468067\nMasha\n2904759\n\n\n3904928\n3654347\nFei, Siu Yin\n2904759\n\n\n3904928\n3654347\nHsiao, Yen-fei\n2904759\n\n\n3904928\n3654347\nSiu, Yinfei\n2904759\n\n\n3904928\n3654347\nXiao, Yanfei\n2904759\n\n\n3904928\n3654347\nYin-Fai, Siu\n2904759"
  },
  {
    "objectID": "slides/2024-11-18-joins.html#inner-join",
    "href": "slides/2024-11-18-joins.html#inner-join",
    "title": "SQL joins",
    "section": "Inner JOIN",
    "text": "Inner JOIN\nWith an inner JOIN, there are 32 rows corresponding to all the actresses in the seven 2015 films with the most votes. Because the JOIN is an intersection of the two tables, only the actresses with person_id above 3900000 are included.\n\nSELECT * FROM\n(SELECT t.id,\n       t.title\nFROM title AS t\nJOIN movie_info_idx AS idx ON idx.movie_id = t.id\nWHERE t.production_year = 2015  \n    AND t.kind_id = 1               # movies only\n    AND idx.info_type_id = 100      # info_type is votes\n    AND idx.info &gt; 400000) AS movs  # at least 400,000 votes     \nINNER JOIN (SELECT a.person_id,\n       a.movie_id,\n       n.name\n    FROM cast_info AS a\n    JOIN aka_name AS n ON a.person_id = n.person_id\n    WHERE a.role_id = 2             # acresses only\n        AND a.person_id &gt; 3900000) AS acts ON acts.movie_id = movs.id\nLIMIT 0, 300;\n\n\nDisplaying records 1 - 10\n\n\n\n\n\n\n\n\n\nid\ntitle\nperson_id\nmovie_id\nname\n\n\n\n\n3313672\nAvengers: Age of Ultron\n3916648\n3313672\nSmulders, Jacoba Francisca Maria\n\n\n3752999\nInside Out\n4122876\n3752999\nKuzniar, Lennon Wynn\n\n\n3787790\nJurassic World\n3938423\n3787790\nNorvell, Ingrid\n\n\n3787790\nJurassic World\n3938423\n3787790\nNorvell, Ingrid\n\n\n3787790\nJurassic World\n3950111\n3787790\nSallaway, Seannon Jane\n\n\n3787790\nJurassic World\n4079047\n3787790\nWashington, Kelly Lynn\n\n\n3787790\nJurassic World\n4079047\n3787790\nWashington, Kelly Lynn\n\n\n3787790\nJurassic World\n4084626\n3787790\nWeeks, Jency\n\n\n3787790\nJurassic World\n4084626\n3787790\nJenc\n\n\n3787790\nJurassic World\n4084626\n3787790\nLittle J"
  },
  {
    "objectID": "slides/2024-11-18-joins.html#right-join",
    "href": "slides/2024-11-18-joins.html#right-join",
    "title": "SQL joins",
    "section": "RIGHT JOIN",
    "text": "RIGHT JOIN\nWith a RIGHT JOIN, there are more than 300 rows (the LIMIT clause keeps us from knowing how many rows, but there are a LOT!) corresponding to all the actresses whose person_id above 3900000 are included. Those actresses who acted in one of the seven top 2015 films are also included in the full results table, but they don’t happen to be in the truncated output here.\n\nSELECT * FROM\n(SELECT t.id,\n       t.title\nFROM title AS t\nJOIN movie_info_idx AS idx ON idx.movie_id = t.id\nWHERE t.production_year = 2015  \n    AND t.kind_id = 1               # movies only\n    AND idx.info_type_id = 100      # info_type is votes\n    AND idx.info &gt; 400000) AS movs  # at least 400,000 votes     \nRIGHT JOIN (SELECT a.person_id,\n       a.movie_id,\n       n.name\n    FROM cast_info AS a\n    JOIN aka_name AS n ON a.person_id = n.person_id\n    WHERE a.role_id = 2             # acresses only\n        AND a.person_id &gt; 3900000) AS acts ON acts.movie_id = movs.id\nLIMIT 0, 300;\n\n\nDisplaying records 1 - 10\n\n\nid\ntitle\nperson_id\nmovie_id\nname\n\n\n\n\n\n\n3900001\n3355298\nSimonis, Heidi\n\n\n\n\n3900001\n3509490\nSimonis, Heidi\n\n\n\n\n3900001\n3739780\nSimonis, Heidi\n\n\n\n\n3900001\n3943329\nSimonis, Heidi\n\n\n\n\n3900001\n165963\nSimonis, Heidi\n\n\n\n\n3900001\n268249\nSimonis, Heidi\n\n\n\n\n3900001\n268370\nSimonis, Heidi\n\n\n\n\n3900001\n268406\nSimonis, Heidi\n\n\n\n\n3900001\n268475\nSimonis, Heidi\n\n\n\n\n3900001\n279082\nSimonis, Heidi"
  },
  {
    "objectID": "slides/2024-11-18-joins.html#left-join",
    "href": "slides/2024-11-18-joins.html#left-join",
    "title": "SQL joins",
    "section": "LEFT JOIN",
    "text": "LEFT JOIN\nWith a LEFT JOIN, there are 33 rows corresponding to the actresses in the seven top 2015 movies. Only The Revenant did not have any actresses whose person_id is greater than 3900000.\n\nSELECT * FROM\n(SELECT t.id,\n       t.title\nFROM title AS t\nJOIN movie_info_idx AS idx ON idx.movie_id = t.id\nWHERE t.production_year = 2015  \n    AND t.kind_id = 1               # movies only\n    AND idx.info_type_id = 100      # info_type is votes\n    AND idx.info &gt; 400000) AS movs  # at least 400,000 votes     \nLEFT JOIN (SELECT a.person_id,\n       a.movie_id,\n       n.name\n    FROM cast_info AS a\n    JOIN aka_name AS n ON a.person_id = n.person_id\n    WHERE a.role_id = 2             # acresses only\n        AND a.person_id &gt; 3900000) AS acts ON acts.movie_id = movs.id\nLIMIT 0, 300;\n\n\nDisplaying records 1 - 10\n\n\n\n\n\n\n\n\n\nid\ntitle\nperson_id\nmovie_id\nname\n\n\n\n\n3313672\nAvengers: Age of Ultron\n3916648\n3313672\nSmulders, Jacoba Francisca Maria\n\n\n3752999\nInside Out\n4122876\n3752999\nKuzniar, Lennon Wynn\n\n\n3787790\nJurassic World\n3938423\n3787790\nNorvell, Ingrid\n\n\n3787790\nJurassic World\n3938423\n3787790\nNorvell, Ingrid\n\n\n3787790\nJurassic World\n3950111\n3787790\nSallaway, Seannon Jane\n\n\n3787790\nJurassic World\n4079047\n3787790\nWashington, Kelly Lynn\n\n\n3787790\nJurassic World\n4079047\n3787790\nWashington, Kelly Lynn\n\n\n3787790\nJurassic World\n4084626\n3787790\nWeeks, Jency\n\n\n3787790\nJurassic World\n4084626\n3787790\nJenc\n\n\n3787790\nJurassic World\n4084626\n3787790\nLittle J"
  },
  {
    "objectID": "slides/2024-11-18-joins.html#counting-repeat-actresses",
    "href": "slides/2024-11-18-joins.html#counting-repeat-actresses",
    "title": "SQL joins",
    "section": "Counting repeat actresses",
    "text": "Counting repeat actresses\nWe might, for example, want to know how many names / spellings of a name with a specific person_id (above 3900000) exist for each person_id in each of the top voted seven films of 2015.\n\nSELECT acts.person_id, \n       COUNT(*) AS num_repeat_names\nFROM (SELECT t.id,\n       t.title\nFROM title AS t\nJOIN movie_info_idx AS idx ON idx.movie_id = t.id\nWHERE t.production_year = 2015  \n    AND t.kind_id = 1               # movies only\n    AND idx.info_type_id = 100      # info_type is votes\n    AND idx.info &gt; 400000) AS movs  # at least 400,000 votes\nJOIN (SELECT a.person_id,\n       a.movie_id,\n       n.name\n    FROM cast_info AS a\n    JOIN aka_name AS n ON a.person_id = n.person_id\n    WHERE a.role_id = 2             # acresses only\n        AND a.person_id &gt; 3900000) AS acts ON acts.movie_id = movs.id\nGROUP BY acts.person_id;\n\n\nDisplaying records 1 - 10\n\n\nperson_id\nnum_repeat_names\n\n\n\n\n3916648\n1\n\n\n4122876\n1\n\n\n3938423\n2\n\n\n3950111\n1\n\n\n4079047\n2\n\n\n4084626\n3\n\n\n4099458\n1\n\n\n3958614\n1\n\n\n3990819\n2\n\n\n4081131\n2"
  },
  {
    "objectID": "slides/2024-11-18-joins.html#counting-number-of-actresses-per-film",
    "href": "slides/2024-11-18-joins.html#counting-number-of-actresses-per-film",
    "title": "SQL joins",
    "section": "Counting number of actresses per film",
    "text": "Counting number of actresses per film\nWe might, for example, want to know how many actresses with a specific person_id (above 3900000) are in each of the top voted seven films of 2015.\n\nSELECT movs.id, \n       movs.title,\n       COUNT(*) AS num_actress\nFROM (SELECT t.id,\n       t.title\nFROM title AS t\nJOIN movie_info_idx AS idx ON idx.movie_id = t.id\nWHERE t.production_year = 2015  \n    AND t.kind_id = 1               # movies only\n    AND idx.info_type_id = 100      # info_type is votes\n    AND idx.info &gt; 400000) AS movs  # at least 400,000 votes\nJOIN (SELECT a.person_id,\n       a.movie_id,\n       n.name\n    FROM cast_info AS a\n    JOIN aka_name AS n ON a.person_id = n.person_id\n    WHERE a.role_id = 2             # acresses only\n        AND a.person_id &gt; 3900000) AS acts ON acts.movie_id = movs.id\nGROUP BY movs.id;\n\n\n6 records\n\n\nid\ntitle\nnum_actress\n\n\n\n\n3313672\nAvengers: Age of Ultron\n1\n\n\n3752999\nInside Out\n1\n\n\n3787790\nJurassic World\n9\n\n\n3915213\nMad Max: Fury Road\n5\n\n\n4260166\nStar Wars: Episode VII - The Force Awakens\n15\n\n\n4389619\nThe Martian\n1"
  },
  {
    "objectID": "slides/2024-11-18-joins.html#unioning",
    "href": "slides/2024-11-18-joins.html#unioning",
    "title": "SQL joins",
    "section": "UNIONing",
    "text": "UNIONing\nIn SQL a UNION clause combines two different tables by their rows (whereas JOIN combines two tables by columns). Think about UNION similarly to the bind_rows() command in R.\n\nUNION binds rows while JOIN appends columns, image credit: Jane Williams https://blog.devart.com/mysql-union-tutorial-html.html"
  },
  {
    "objectID": "slides/2024-11-18-joins.html#unions",
    "href": "slides/2024-11-18-joins.html#unions",
    "title": "SQL joins",
    "section": "UNIONs",
    "text": "UNIONs\nSilly example where the column names are ignored.\n\nSELECT \n    1 AS bar,\n    2 AS foo\n\nUNION\n\nSELECT \n    10 AS foo,\n    20 AS bar;\n\n\n2 records\n\n\nbar\nfoo\n\n\n\n\n1\n2\n\n\n10\n20"
  },
  {
    "objectID": "slides/2024-11-18-joins.html#union",
    "href": "slides/2024-11-18-joins.html#union",
    "title": "SQL joins",
    "section": "UNION",
    "text": "UNION\nUNION is specifically designed to bind rows from two different SELECT queries where the variables have been selected in the same order.\nCombine the top voted movies from 2015 with the top voted movies from 2019.\nHowever, to account for time, we require the movies from 2015 to have more votes (400,000) than the movies from 2017 (200,000).\nThat is, the WHERE clause is different for the two subqueries."
  },
  {
    "objectID": "slides/2024-11-18-joins.html#union-1",
    "href": "slides/2024-11-18-joins.html#union-1",
    "title": "SQL joins",
    "section": "UNION",
    "text": "UNION\n\n(SELECT t.title, \n        t.production_year, \n        idx.info AS num_votes\n    FROM title AS t\nJOIN movie_info_idx AS idx ON idx.movie_id = t.id\nWHERE t.production_year = 2015  \n    AND t.kind_id = 1               \n    AND idx.info_type_id = 100      \n    AND idx.info &gt; 400000)\n\nUNION\n\n(SELECT t.title, \n        t.production_year, \n        idx.info AS num_votes\n    FROM title AS t\nJOIN movie_info_idx AS idx ON idx.movie_id = t.id\nWHERE t.production_year = 2017  \n    AND t.kind_id = 1               \n    AND idx.info_type_id = 100      \n    AND idx.info &gt; 200000)\nLIMIT 0, 100;\n\n\nDisplaying records 1 - 10\n\n\n\n\n\n\n\ntitle\nproduction_year\nnum_votes\n\n\n\n\nAvengers: Age of Ultron\n2015\n540606\n\n\nInside Out\n2015\n443051\n\n\nJurassic World\n2015\n471237\n\n\nMad Max: Fury Road\n2015\n666484\n\n\nStar Wars: Episode VII - The Force Awakens\n2015\n691691\n\n\nThe Martian\n2015\n583987\n\n\nThe Revenant\n2015\n526189\n\n\nDunkirk\n2017\n229089\n\n\nGuardians of the Galaxy Vol. 2\n2017\n281845\n\n\nLogan\n2017\n397056"
  },
  {
    "objectID": "slides/2024-11-18-joins.html#union-all",
    "href": "slides/2024-11-18-joins.html#union-all",
    "title": "SQL joins",
    "section": "UNION ALL",
    "text": "UNION ALL\nIf the goal is to include duplicates across two tables, use UNION ALL instead of UNION.\nLet’s say that the first table is all movies with production year after 2012 and number of votes greater than 500,000. The second table is movies with production year equal to 2015 and number of votes greater than 400,000.\nThe Martian would be in both tables."
  },
  {
    "objectID": "slides/2024-11-18-joins.html#union-all-1",
    "href": "slides/2024-11-18-joins.html#union-all-1",
    "title": "SQL joins",
    "section": "UNION ALL",
    "text": "UNION ALL\nWith just UNION\n\n(SELECT t.title,\n        t.production_year, \n        idx.info AS num_votes\n    FROM title AS t\nJOIN movie_info_idx AS idx ON idx.movie_id = t.id\nWHERE t.production_year &gt; 2012  \n    AND t.kind_id = 1               \n    AND idx.info_type_id = 100      \n    AND idx.info &gt; 500000)\n\nUNION\n\n(SELECT t.title, \n        t.production_year, \n        idx.info AS num_votes\n    FROM title AS t\nJOIN movie_info_idx AS idx ON idx.movie_id = t.id\nWHERE t.production_year = 2015  \n    AND t.kind_id = 1               \n    AND idx.info_type_id = 100      \n    AND idx.info &gt; 400000)\nORDER BY production_year DESC, num_votes;\n\n\nDisplaying records 1 - 10\n\n\n\n\n\n\n\ntitle\nproduction_year\nnum_votes\n\n\n\n\nBatman v Superman: Dawn of Justice\n2016\n500037\n\n\nDeadpool\n2016\n673887\n\n\nInside Out\n2015\n443051\n\n\nJurassic World\n2015\n471237\n\n\nThe Revenant\n2015\n526189\n\n\nAvengers: Age of Ultron\n2015\n540606\n\n\nThe Martian\n2015\n583987\n\n\nMad Max: Fury Road\n2015\n666484\n\n\nStar Wars: Episode VII - The Force Awakens\n2015\n691691\n\n\nInterstellar\n2014\n1102826"
  },
  {
    "objectID": "slides/2024-11-18-joins.html#union-all-2",
    "href": "slides/2024-11-18-joins.html#union-all-2",
    "title": "SQL joins",
    "section": "UNION ALL",
    "text": "UNION ALL\nWhen UNION ALL is applied, The Martian is listed twice in the results table.\n\n(SELECT t.title,\n        t.production_year, \n        idx.info AS num_votes\n    FROM title AS t\nJOIN movie_info_idx AS idx ON idx.movie_id = t.id\nWHERE t.production_year &gt; 2012  \n    AND t.kind_id = 1               \n    AND idx.info_type_id = 100      \n    AND idx.info &gt; 500000)\n\nUNION ALL\n\n(SELECT t.title, \n        t.production_year, \n        idx.info AS num_votes\n    FROM title AS t\nJOIN movie_info_idx AS idx ON idx.movie_id = t.id\nWHERE t.production_year = 2015  \n    AND t.kind_id = 1               \n    AND idx.info_type_id = 100      \n    AND idx.info &gt; 400000)\nORDER BY production_year DESC, num_votes;\n\n\nDisplaying records 1 - 10\n\n\ntitle\nproduction_year\nnum_votes\n\n\n\n\nBatman v Superman: Dawn of Justice\n2016\n500037\n\n\nDeadpool\n2016\n673887\n\n\nInside Out\n2015\n443051\n\n\nJurassic World\n2015\n471237\n\n\nThe Revenant\n2015\n526189\n\n\nThe Revenant\n2015\n526189\n\n\nAvengers: Age of Ultron\n2015\n540606\n\n\nAvengers: Age of Ultron\n2015\n540606\n\n\nThe Martian\n2015\n583987\n\n\nThe Martian\n2015\n583987"
  },
  {
    "objectID": "slides/2024-11-18-joins.html#best-practice",
    "href": "slides/2024-11-18-joins.html#best-practice",
    "title": "SQL joins",
    "section": "Best practice",
    "text": "Best practice\nIt is always a good idea to terminate the SQL connection when you are done with it.\n\nDBI::dbDisconnect(con_imdb, shutdown = TRUE)"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#traffic-stops-1",
    "href": "slides/2024-11-13-clauses.html#traffic-stops-1",
    "title": "SQL clauses",
    "section": "Traffic Stops",
    "text": "Traffic Stops\n88 tables in the traffic database! Lots of details on traffic stops across cities and highway patrols.\n\nSHOW TABLES;\n\n\nDisplaying records 1 - 10\n\n\nTables_in_traffic\n\n\n\n\nar_little_rock_2020_04_01\n\n\naz_gilbert_2020_04_01\n\n\naz_mesa_2023_01_26\n\n\naz_statewide_2020_04_01\n\n\nca_anaheim_2020_04_01\n\n\nca_bakersfield_2020_04_01\n\n\nca_long_beach_2020_04_01\n\n\nca_los_angeles_2020_04_01\n\n\nca_oakland_2020_04_01\n\n\nca_san_bernardino_2020_04_01"
  },
  {
    "objectID": "slides/2024-11-13-clauses.html#lapd---glance-through-tables",
    "href": "slides/2024-11-13-clauses.html#lapd---glance-through-tables",
    "title": "SQL clauses",
    "section": "LAPD - glance through tables",
    "text": "LAPD - glance through tables\n\nSELECT * FROM ca_los_angeles_2020_04_01\nLIMIT 0, 10;\n\n\nDisplaying records 1 - 10\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nraw_row_number\ndate\ntime\ndistrict\nregion\nsubject_race\nsubject_sex\nofficer_id_hash\ntype\nraw_descent_description\n\n\n\n\n5692933\n\n13:59:00\n0753\nWILSHIRE\nhispanic\nmale\n15ecd81b00\npedestrian\nHISPANIC\n\n\n240731\n2010-01-01\n00:05:00\n665\nWEST TRAFFIC\nother\nmale\nb707de41e0\nvehicular\nOTHER\n\n\n240592|240593\n2010-01-01\n00:10:00\n1258\nSEVENTY-SEVENTH\nhispanic\nmale\nb49ae7078c\npedestrian\nHISPANIC\n\n\n241116\n2010-01-01\n00:10:00\n1635\nFOOTHILL\nhispanic\nmale\ne70ce46248\nvehicular\nHISPANIC\n\n\n240681\n2010-01-01\n00:15:00\n882\nWEST LA\nother\nmale\n8587bd743c\nvehicular\nOTHER\n\n\n240602\n2010-01-01\n00:20:00\n559\nHARBOR\nhispanic\nmale\n601bf1fdff\nvehicular\nHISPANIC\n\n\n240594\n2010-01-01\n00:20:00\n667\nHOLLYWOOD\nhispanic\nmale\nfb2e6d8ab3\npedestrian\nHISPANIC\n\n\n241434\n2010-01-01\n00:25:00\n1658\nFOOTHILL\nhispanic\nfemale\n5100c8c759\nvehicular\nHISPANIC\n\n\n240582\n2010-01-01\n00:30:00\n1041\nWEST VALLEY\nblack\nfemale\nd54d90a4d0\nvehicular\nBLACK\n\n\n240642\n2010-01-01\n00:30:00\n1162\nNORTH EAST\nhispanic\nmale\n5d6fbef1d3\npedestrian\nHISPANIC"
  },
  {
    "objectID": "project4.html#timeline",
    "href": "project4.html#timeline",
    "title": "Project 4",
    "section": "Timeline",
    "text": "Timeline\nMini-Project 4 must be submitted on Canvas (not Gradescope) by 11:59 PM on Tuesday November 26. You will add a tab to your Quarto webpage for Mini-Project 4 and submit the new page’s URL."
  },
  {
    "objectID": "project4.html#hints",
    "href": "project4.html#hints",
    "title": "Project 4",
    "section": "Hints",
    "text": "Hints\n\nParse the caption from Figure 1 carefully to determine how mean absorbances are calculated: “Mean absorbances for the 12 studies within the WAI database as of July 1, 2019. Noted in the legend are the peer-reviewed publications associated with the datasets, the number of individual ears, and the equipment used in the study. When multiple measurements were made on the same ear, the average from those measurements was used in the calculation across subjects for a given study. Some subjects have measurements on both a right and a left ear, and some subjects have measurements from only one ear; this figure includes every ear in the database and does not control for the effect of number of ears from each subject.”\nfilter for only the 12 studies shown in Figure 1 (and also for frequencies shown in Figure 1)\nstudy the patterns of frequencies. It seems that most researchers used the same set of frequencies for each subject, ear, and session.\nnote the scale of the x-axis\nthe labels on the legend contains AuthorsShortList, Year, and Instrument, in addition to the number of unique ears (I think Werner’s N may be incorrect?). To get the number of unique ears, you might want something like this inside your SELECT query: COUNT(DISTINCT SubjectNumber, Ear) AS Unique_Ears\nwhen creating the labels, you’ll need to GROUP BY Identifier, Instrument. That is, group by both the Identifier and the Instrument. The Instrument will not perfectly match the labels in the plot.\n\nLogistics:\n\nstart by describing what you plan to do (3-4 sentences). end with a description of what you did (3-4 sentences). That is, use words to guide the reader through your analysis.\nplease include all your code used in the analysis.\nmake sure that all graphs are well-labeled (including x and y axes, title of the graph, and accurate and succinct labels for color and fill).\ndo not include superfluous error or warning messages.\ninclude a few sentences describing each of your plots or tables. That is, tell the reader what they see when they look at the plot. Your narrative description should be in the text part of the qmd file, not as a comment in an R chunk.\ninclude the source of the data."
  },
  {
    "objectID": "project4.html#starter-code",
    "href": "project4.html#starter-code",
    "title": "Project 4",
    "section": "Starter Code",
    "text": "Starter Code\n\nlibrary(RMariaDB)\ncon_wai &lt;- dbConnect(\n  MariaDB(), host = \"scidb.smith.edu\",\n  user = \"waiuser\", password = \"smith_waiDB\", \n  dbname = \"wai\"\n)\nMeasurements &lt;- tbl(con_wai, \"Measurements\")\nPI_Info &lt;- tbl(con_wai, \"PI_Info\")\nSubjects &lt;- tbl(con_wai, \"Subjects\")\n\n# collect(Measurements)\n\n\nSHOW TABLES;\n\n\n7 records\n\n\nTables_in_wai\n\n\n\n\nCodebook\n\n\nMeasurements\n\n\nMeasurements_pre2020\n\n\nPI_Info\n\n\nPI_Info_OLD\n\n\nSubjects\n\n\nSubjects_pre2020\n\n\n\n\n\n\nDESCRIBE Measurements;\n\n\nDisplaying records 1 - 10\n\n\nField\nType\nNull\nKey\nDefault\nExtra\n\n\n\n\nIdentifier\nvarchar(50)\nNO\nPRI\nNA\n\n\n\nSubjectNumber\nint\nNO\nPRI\nNA\n\n\n\nSession\nint\nNO\nPRI\nNA\n\n\n\nEar\nvarchar(50)\nNO\nPRI\n\n\n\n\nInstrument\nvarchar(50)\nNO\nPRI\n\n\n\n\nAge\nfloat\nYES\n\nNA\n\n\n\nAgeCategory\nvarchar(50)\nYES\n\nNA\n\n\n\nEarStatus\nvarchar(50)\nYES\n\nNA\n\n\n\nTPP\nfloat\nYES\n\nNA\n\n\n\nAreaCanal\nfloat\nYES\n\nNA\n\n\n\n\n\n\n\nSELECT *\nFROM Measurements\nLIMIT 0, 5;\n\n\n5 records\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nIdentifier\nSubjectNumber\nSession\nEar\nInstrument\nAge\nAgeCategory\nEarStatus\nTPP\nAreaCanal\nPressureCanal\nSweepDirection\nFrequency\nAbsorbance\nZmag\nZang\n\n\n\n\nAbur_2014\n1\n1\nLeft\nHearID\n20\nAdult\nNormal\n-5\n4.42e-05\n0\nAmbient\n210.938\n0.0333379\n113780000\n-0.233504\n\n\nAbur_2014\n1\n1\nLeft\nHearID\n20\nAdult\nNormal\n-5\n4.42e-05\n0\nAmbient\n234.375\n0.0315705\n103585000\n-0.235778\n\n\nAbur_2014\n1\n1\nLeft\nHearID\n20\nAdult\nNormal\n-5\n4.42e-05\n0\nAmbient\n257.812\n0.0405751\n92951696\n-0.233482\n\n\nAbur_2014\n1\n1\nLeft\nHearID\n20\nAdult\nNormal\n-5\n4.42e-05\n0\nAmbient\n281.250\n0.0438399\n86058000\n-0.233421\n\n\nAbur_2014\n1\n1\nLeft\nHearID\n20\nAdult\nNormal\n-5\n4.42e-05\n0\nAmbient\n304.688\n0.0486400\n79492800\n-0.232931"
  },
  {
    "objectID": "project4.html#footnotes",
    "href": "project4.html#footnotes",
    "title": "Project 4",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nhttps://data-feminism.mitpress.mit.edu/pub/vi8obxh7#nhrgx0zws6h↩︎\nhttps://data-feminism.mitpress.mit.edu/pub/vi8obxh7#nifnaq2jmn9↩︎"
  },
  {
    "objectID": "slides/2024-11-25-shiny.html#a-simple-shiny-app",
    "href": "slides/2024-11-25-shiny.html#a-simple-shiny-app",
    "title": "Shiny",
    "section": "A simple Shiny App",
    "text": "A simple Shiny App\nPut the following into a Shiny App using File \\(\\rightarrow\\) New File \\(\\rightarrow\\) Shiny Web App ... as a file called app.R.\n\nlibrary(shiny)\n\nui &lt;- fluidPage(\n  \"Hello, world!\"\n)\n\nserver &lt;- function(input, output, session) {\n}\n\nshinyApp(ui, server)"
  },
  {
    "objectID": "slides/2024-11-25-shiny.html#what-are-the-parts-of-a-shiny-app",
    "href": "slides/2024-11-25-shiny.html#what-are-the-parts-of-a-shiny-app",
    "title": "Shiny",
    "section": "What are the parts of a Shiny App?",
    "text": "What are the parts of a Shiny App?\nLooking closely at the code above, the app.R does four things:\n\nIt calls library(shiny) to load the shiny package.\nIt defines the user interface, the HTML webpage that humans interact with. In this case, it’s a page containing the words “Hello, world!”.\nIt specifies the behaviour of our app by defining a server function. It’s currently empty, so our app doesn’t do anything, but we’ll be back to revisit this shortly.\nIt executes shinyApp(ui, server) to construct and start a Shiny application from UI and server."
  },
  {
    "objectID": "slides/2024-11-25-shiny.html#how-to-run-a-shiny-app",
    "href": "slides/2024-11-25-shiny.html#how-to-run-a-shiny-app",
    "title": "Shiny",
    "section": "How to run a Shiny App?",
    "text": "How to run a Shiny App?\n\n\n\nTo run Shiny\n\n\n\nClick the Run App button in the document toolbar.\n\n\n\n\n\n\n\n\n\n\n\nUse a keyboard shortcut: Cmd/Ctrl + Shift + Enter.\nIf you’re not using RStudio, you can (source()) the whole document, or call shiny::runApp() with the path to the directory containing app.R."
  },
  {
    "objectID": "slides/2024-11-25-shiny.html#shiny",
    "href": "slides/2024-11-25-shiny.html#shiny",
    "title": "Shiny",
    "section": "Shiny",
    "text": "Shiny\n\nShiny is an R package that allows you to easily create rich, interactive web apps. Shiny allows you to take your work in R and expose it via a web browser so that anyone can use it."
  },
  {
    "objectID": "slides/2024-11-25-shiny.html#examples",
    "href": "slides/2024-11-25-shiny.html#examples",
    "title": "Shiny",
    "section": "Examples",
    "text": "Examples\nSee the following gallery of Shiny example from Posit: https://shiny.posit.co/r/gallery/"
  },
  {
    "objectID": "slides/2024-11-25-shiny.html#what-does-it-look-like",
    "href": "slides/2024-11-25-shiny.html#what-does-it-look-like",
    "title": "Shiny",
    "section": "What does it look like?",
    "text": "What does it look like?"
  },
  {
    "objectID": "slides/2024-11-25-shiny.html#back-in-r",
    "href": "slides/2024-11-25-shiny.html#back-in-r",
    "title": "Shiny",
    "section": "Back in R…",
    "text": "Back in R…\nGo back and look at the console. You will see something like:\nListening on http://127.0.0.1:7521\nR is busy! It is running your Shiny App. You can’t do anything in R because the processes are engaged with the Shiny App."
  },
  {
    "objectID": "slides/2024-11-25-shiny.html#pieces",
    "href": "slides/2024-11-25-shiny.html#pieces",
    "title": "Shiny",
    "section": "Pieces",
    "text": "Pieces\nShiny applications will be contained in one app.R file. The file contains two key components:\nui: code for the user interface. The user interface is the webpage that your user will interact with.\nserver: code for the computer part. What should the computer/server do with your inputs as the user changes them.\nThe last code at the bottom, shinyApp(ui = ui, server = server), will compile everything together to result in the interactive webpage.\nPress Run App at the top of RStudio and see what happens!"
  },
  {
    "objectID": "slides/2024-11-25-shiny.html#pieces-1",
    "href": "slides/2024-11-25-shiny.html#pieces-1",
    "title": "Shiny",
    "section": "Pieces",
    "text": "Pieces\n\nlibrary(shiny)\n\nshinyApp(\n  ui = list(\n    # new (to you) widgets go here\n  ),\n  \n  server = function(input, output, session) {\n    # somewhat familiar (to you) code goes here\n  }\n)"
  },
  {
    "objectID": "slides/2024-11-25-shiny.html#a-brief-widget-tour",
    "href": "slides/2024-11-25-shiny.html#a-brief-widget-tour",
    "title": "Shiny",
    "section": "A brief widget tour",
    "text": "A brief widget tour\nhttps://rundel.shinyapps.io/widgets/"
  },
  {
    "objectID": "slides/2024-11-25-shiny.html#the-default-shinny-app",
    "href": "slides/2024-11-25-shiny.html#the-default-shinny-app",
    "title": "Shiny",
    "section": "The default Shinny App",
    "text": "The default Shinny App\n\n#\n# This is a Shiny web application. You can run the application by clicking\n# the 'Run App' button above.\n#\n# Find out more about building applications with Shiny here:\n#\n#    https://shiny.posit.co/\n#\n\nlibrary(shiny)\n\n# Define UI for application that draws a histogram\nui &lt;- fluidPage(\n\n    # Application title\n    titlePanel(\"Old Faithful Geyser Data\"),\n\n    # Sidebar with a slider input for number of bins \n    sidebarLayout(\n        sidebarPanel(\n            sliderInput(\"bins\",\n                        \"Number of bins:\",\n                        min = 1,\n                        max = 50,\n                        value = 30)\n        ),\n\n        # Show a plot of the generated distribution\n        mainPanel(\n           plotOutput(\"distPlot\")\n        )\n    )\n)\n\n# Define server logic required to draw a histogram\nserver &lt;- function(input, output) {\n\n    output$distPlot &lt;- renderPlot({\n        # generate bins based on input$bins from ui.R\n        x    &lt;- faithful[, 2]\n        bins &lt;- seq(min(x), max(x), length.out = input$bins + 1)\n\n        # draw the histogram with the specified number of bins\n        hist(x, breaks = bins, col = 'darkgray', border = 'white',\n             xlab = 'Waiting time to next eruption (in mins)',\n             main = 'Histogram of waiting times')\n    })\n}\n\n# Run the application \nshinyApp(ui = ui, server = server)"
  },
  {
    "objectID": "slides/2024-11-25-shiny.html#running-old-faithful",
    "href": "slides/2024-11-25-shiny.html#running-old-faithful",
    "title": "Shiny",
    "section": "Running Old Faithful",
    "text": "Running Old Faithful\n\nRun in RStudio\nSee the app in action here: https://shiny.posit.co/r/gallery/start-simple/faithful/"
  },
  {
    "objectID": "slides/2024-11-25-shiny.html#live-demo",
    "href": "slides/2024-11-25-shiny.html#live-demo",
    "title": "Shiny",
    "section": "Live demo",
    "text": "Live demo\nLet’s build a weather app! See sample files here: https://github.com/hardin47/ds002r-fds/tree/main/Shiny_weather"
  },
  {
    "objectID": "slides/2024-11-25-shiny.html#shiny-in-python",
    "href": "slides/2024-11-25-shiny.html#shiny-in-python",
    "title": "Shiny",
    "section": "Shiny in Python",
    "text": "Shiny in Python\nCheck it out!\nhttps://shiny.posit.co/py/"
  },
  {
    "objectID": "project5.html#tasks",
    "href": "project5.html#tasks",
    "title": "Project 5",
    "section": "Tasks",
    "text": "Tasks\nProject 5 has two main tasks:\n\nThe first is to re-do all the previous projects. Not only should you address all the issues that have been previously brought to light (see comments on projects on Canvas), but you should also do things like removing the warnings & messages. Making sure that all data and ideas have been properly cited. Rewriting any code so that it is actually your work (instead of, for example, copied directly from ChatGPT). Giving all graphs proper captions. Explaining your work. You will write up (and turn in, separate from your website) a document explaining what changes and updates you’ve made.\nThe second thing to do is to prepare a ~5 min presentation on some aspect of your project. It can be about any aspect of the project (or all aspects of the project), and your presentation should be as if to a client about the work. You’ll create the presentation in Quarto (formatted as revealjs) rendered to html. The presentation will be either on Friday Dec 6th during reading days (9am-noon) or during our regularly scheduled final time, Monday Dec 9th 9am-noon (your choice)."
  },
  {
    "objectID": "project5.html#timeline",
    "href": "project5.html#timeline",
    "title": "Project 5",
    "section": "Timeline",
    "text": "Timeline\nMini-Project 5 must be submitted on Canvas (not Gradescope) by 11:59 PM on Monday December 9. To Canvas submit two things: 1. the URL of your overall website, 2. a document detailing the changes you have made.\nAdditionally, you will give a ~5 min presentation to the class on some aspect(s) of your project. You can describe one of the mini-projects, the creation of the website, the entire project overall, or any other aspect of the project. (You will present either on the Friday Dec 6th during reading days (9am-noon) or during our regularly scheduled final time, Monday Dec 9th 9am-noon.)"
  },
  {
    "objectID": "project5.html#presentation",
    "href": "project5.html#presentation",
    "title": "Project 5",
    "section": "Presentation",
    "text": "Presentation\nYour slides should be created in Quarto (formatted as revealjs) and rendered to html. They should be linked to the website. A new slide is created by a second level header: ##. The YAML for the presentation slides might look like this:\n---\ntitle: \"title of presentation\"\nauthor: \"your name\"\nsubtitle: \"date of presentation\"\nformat:\n  revealjs:\n    scrollable: true\n    slide-number: true\n    show-slide-number: all\n    embed-resources: true\nexecute:\n  echo: true\n  warning: false\n  message: false\n---"
  },
  {
    "objectID": "project5.html#hints",
    "href": "project5.html#hints",
    "title": "Project 5",
    "section": "Hints",
    "text": "Hints\nIMPORTANT: you want your website to represent your knowledge. If all the code on the website is from chatGPT, you should go back and re-write the code so that it actually represents what you have learned in the class.\n\nclean up the entire website\n\nno warnings or messages\nall plots with good labeling\nalt text on all plots\ngood narrative describing\nadding a plot when you introduce the data to introduce the reader to the data / context (e.g., if you are doing a permutation test, start by providing a visualization of the data / variables of interest before you do the test so that the reader understands your context.)\nadd comments within the code to help the reader navigate what you are doing.\nmaking sure that all work, data sources, etc. are documented appropriately\n\ncreate a corresponding document (text, Word, Google doc, etc.) describing (in enough detail to receive credit!) all of the changes you’ve made from the original set of projects.\ndon’t call your analyses “my website” or “mini-project 2”, use descriptive names that will make sense after the semester is over (to someone looking at your website who doesn’t know about our class).\nmake sure that your citations are full. That is, provide more than the TidyTuesday URL. Who collected the data? Why? What is the original source of the information?\nif you didn’t put the recent projects onto your website, do so now.\nprovide a narrative setting up the analysis. Don’t just start with code.\nuse exploratory data analysis to set up the example. That is, show a plot / table of the original data. Explain the variables to your reader.\nuse the tidyverse. If you have gotten code from a different place (which uses $ for example), translate the code into a tidy pipeline."
  },
  {
    "objectID": "project5.html#extra-credit",
    "href": "project5.html#extra-credit",
    "title": "Project 5",
    "section": "Extra credit",
    "text": "Extra credit\nYou may earn one extra credit point toward the projects for doing something new / expanding extensively on one of the previous projects. To earn extra credit, please give a full explanation for what you did. Stating “I added regular expressions” is not sufficient for me to get a sense for what you did. Feel free to include before and after images in your project write-up.\nSome examples include:\n\nadd extensive regular expressions to the project on string data\nadd a shiny or plotly example to the graphs from TidyTuesday\nexpanding on the website in new ways: adding a resume, including multiple new tabs to highlight other projects you’ve worked on, changing the format of the website, etc."
  },
  {
    "objectID": "slides/2024-11-25-shiny.html#reactive",
    "href": "slides/2024-11-25-shiny.html#reactive",
    "title": "Shiny",
    "section": "reactive()",
    "text": "reactive()\nThe function reactive() is worth pointing out. It is used to create a reactive expression — an expression that is automatically recalculated when any of its inputs change.\nUse reactive() when\n\nYou want to perform calculations that depend on user input and automatically update when those inputs change.\nYou need to pass dynamically calculated values to other parts of the app (outputs, observers, etc.).\nYou need to create reactive data or state, such as subsets or transformations of input data.\n\nDo not use reactive() on the UI inputs because they are inherently reactive already!"
  },
  {
    "objectID": "slides/2024-12-02-fin.html#data-science-overview",
    "href": "slides/2024-12-02-fin.html#data-science-overview",
    "title": "Fin",
    "section": "Data Science Overview",
    "text": "Data Science Overview\n\nBased on https://www.effectivedatastorytelling.com/post/a-deeper-dive-into-lego-bricks-and-data-stories, original source: https://www.linkedin.com/learning/instructors/bill-shander"
  },
  {
    "objectID": "slides/2024-12-02-fin.html#data-science-overview-1",
    "href": "slides/2024-12-02-fin.html#data-science-overview-1",
    "title": "Fin",
    "section": "Data Science Overview",
    "text": "Data Science Overview\n\nBased on https://www.effectivedatastorytelling.com/post/a-deeper-dive-into-lego-bricks-and-data-stories, original source: https://www.linkedin.com/learning/instructors/bill-shander"
  },
  {
    "objectID": "slides/2024-12-02-fin.html#data-scientists",
    "href": "slides/2024-12-02-fin.html#data-scientists",
    "title": "Fin",
    "section": "Data Scientists",
    "text": "Data Scientists\nWho does data science?\nconnecting, uplifting, and recognizing voices – a database of statisticians and data scientists."
  },
  {
    "objectID": "slides/2024-12-02-fin.html#take-aways",
    "href": "slides/2024-12-02-fin.html#take-aways",
    "title": "Fin",
    "section": "Take-aways",
    "text": "Take-aways\n\n80-90% of data science work is data wrangling and visualization\nwrangling the data well is usually more important than modeling the data well\nthere are many choices along the way, there is no such thing as truth\nif you can’t reproduce the work, you should question whether to trust it\ncommunicating to your audience is likely the most important aspect of doing data science"
  },
  {
    "objectID": "project6.html",
    "href": "project6.html",
    "title": "Project 6",
    "section": "",
    "text": "Project instructions to come!\n\n\n\n\nReuseCC BY 4.0"
  },
  {
    "objectID": "project6.html#tasks",
    "href": "project6.html#tasks",
    "title": "Project 5",
    "section": "Tasks",
    "text": "Tasks\nProject 5 has two main tasks:\n\nThe first is to re-do all the previous projects. Not only should you address all the issues that have been previously brought to light (see comments on projects on Canvas), but you should also do things like removing the warnings & messages. Making sure that all data and ideas have been properly cited. Rewriting any code so that it is actually your work (instead of, for example, copied directly from ChatGPT). Giving all graphs proper captions. Explaining your work. You will write up (and turn in, separate from your website) a document explaining what changes and updates you’ve made.\nThe second thing to do is to prepare a ~5 min presentation on some aspect of your project. It can be about any aspect of the project (or all aspects of the project), and your presentation should be as if to a client about the work. You’ll create the presentation in Quarto (formatted as revealjs) rendered to html. The presentation will be either on Friday Dec 6th during reading days (9am-noon) or during our regularly scheduled final time, Monday Dec 9th 9am-noon (your choice)."
  },
  {
    "objectID": "project6.html#timeline",
    "href": "project6.html#timeline",
    "title": "Project 5",
    "section": "Timeline",
    "text": "Timeline\nMini-Project 5 must be submitted on Canvas (not Gradescope) by 11:59 PM on Monday December 9. To Canvas submit two things: 1. the URL of your overall website, 2. a document detailing the changes you have made.\nAdditionally, you will give a ~5 min presentation to the class on some aspect(s) of your project. You can describe one of the mini-projects, the creation of the website, the entire project overall, or any other aspect of the project. (You will present either on the Friday Dec 6th during reading days (9am-noon) or during our regularly scheduled final time, Monday Dec 9th 9am-noon.)"
  },
  {
    "objectID": "project6.html#presentation",
    "href": "project6.html#presentation",
    "title": "Project 5",
    "section": "Presentation",
    "text": "Presentation\nYour slides should be created in Quarto (formatted as revealjs) and rendered to html. They should be linked to the website. A new slide is created by a second level header: ##. The YAML for the presentation slides might look like this:\n---\ntitle: \"title of presentation\"\nauthor: \"your name\"\nsubtitle: \"date of presentation\"\nformat:\n  revealjs:\n    scrollable: true\n    slide-number: true\n    show-slide-number: all\n    embed-resources: true\nexecute:\n  echo: true\n  warning: false\n  message: false\n---"
  },
  {
    "objectID": "project6.html#hints",
    "href": "project6.html#hints",
    "title": "Project 5",
    "section": "Hints",
    "text": "Hints\nIMPORTANT: you want your website to represent your knowledge. If all the code on the website is from chatGPT, you should go back and re-write the code so that it actually represents what you have learned in the class.\n\nclean up the entire website\n\nno warnings or messages\nall plots with good labeling\nalt text on all plots\ngood narrative describing\nadding a plot when you introduce the data to introduce the reader to the data / context (e.g., if you are doing a permutation test, start by providing a visualization of the data / variables of interest before you do the test so that the reader understands your context.)\nadd comments within the code to help the reader navigate what you are doing.\nmaking sure that all work, data sources, etc. are documented appropriately\n\ncreate a corresponding document (text, Word, Google doc, etc.) describing (in enough detail to receive credit!) all of the changes you’ve made from the original set of projects.\ndon’t call your analyses “my website” or “mini-project 2”, use descriptive names that will make sense after the semester is over (to someone looking at your website who doesn’t know about our class).\nmake sure that your citations are full. That is, provide more than the TidyTuesday URL. Who collected the data? Why? What is the original source of the information?\nif you didn’t put the recent projects onto your website, do so now.\nprovide a narrative setting up the analysis. Don’t just start with code.\nuse exploratory data analysis to set up the example. That is, show a plot / table of the original data. Explain the variables to your reader.\nuse the tidyverse. If you have gotten code from a different place (which uses $ for example), translate the code into a tidy pipeline."
  },
  {
    "objectID": "project6.html#extra-credit",
    "href": "project6.html#extra-credit",
    "title": "Project 5",
    "section": "Extra credit",
    "text": "Extra credit\nYou may earn one extra credit point toward the projects for doing something new / expanding extensively on one of the previous projects. To earn extra credit, please give a full explanation for what you did. Stating “I added regular expressions” is not sufficient for me to get a sense for what you did. Feel free to include before and after images in your project write-up.\nSome examples include:\n\nadd extensive regular expressions to the project on string data\nadd a shiny or plotly example to the graphs from TidyTuesday\nexpanding on the website in new ways: adding a resume, including multiple new tabs to highlight other projects you’ve worked on, changing the format of the website, etc."
  },
  {
    "objectID": "syllabus.html#ds002r-spring-2025",
    "href": "syllabus.html#ds002r-spring-2025",
    "title": "syllabus",
    "section": "",
    "text": "Jo Hardin 2351 Estella jo.hardin@pomona.edu\nClass: Mondays & Wednesday, 11-12:15pm\nOffice Hours: (Estella 2351)\nMonday: 2:30-4:30pm\nTuesday: 9-11am\nThursday: 1:15-3pm\nMentor Sessions:\nSunday & Tuesday 6-8pm\nEstella 2141\nMentors: Maren Rusk & Taha Disbudak\n\n\n\n\n\nArtwork by @allison_horst."
  },
  {
    "objectID": "slides/2025-01-22-intro.html#course-structure",
    "href": "slides/2025-01-22-intro.html#course-structure",
    "title": "Introduction to DS002R",
    "section": "Course structure",
    "text": "Course structure\n\nbi-weekly HW (to GitHub + Gradescope)\nbi-weekly quizzes\nmini-projects\nin-class activities / clickers\nethical considerations"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#additional-details",
    "href": "slides/2025-01-22-intro.html#additional-details",
    "title": "Introduction to DS002R",
    "section": "Additional details",
    "text": "Additional details\n\nCanvas has all the links\n\ncourse website – almost everything\nclass notes\nCanvas page – solutions and assignments\n\nno computers (tablets fine)\ngood communication\nTidyTuesday"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#syllabus",
    "href": "slides/2025-01-22-intro.html#syllabus",
    "title": "Introduction to DS002R",
    "section": "Syllabus",
    "text": "Syllabus\n\n\n\noffice hours\nmentor sessions\nanonymous feedback\ndates for assignments\n\n\n\nlinks to resources\nHW grading\nproject information\n\n\n\n\n\n\n\n\nImportant\n\n\nI need your GitHub user name - please email it to me."
  },
  {
    "objectID": "slides/2025-01-22-intro.html#v1.0---drew-conway",
    "href": "slides/2025-01-22-intro.html#v1.0---drew-conway",
    "title": "Introduction to DS002R",
    "section": "V1.0 - Drew Conway",
    "text": "V1.0 - Drew Conway\n\n2010: http://drewconway.com/zia/2013/3/26/the-data-science-venn-diagram"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#v2.0---steve-geringer",
    "href": "slides/2025-01-22-intro.html#v2.0---steve-geringer",
    "title": "Introduction to DS002R",
    "section": "V2.0 - Steve Geringer",
    "text": "V2.0 - Steve Geringer\n\n2014: http://www.anlytcs.com/2014/01/data-science-venn-diagram-v20.html"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#v3.0---writuparna-banerjee",
    "href": "slides/2025-01-22-intro.html#v3.0---writuparna-banerjee",
    "title": "Introduction to DS002R",
    "section": "V3.0 - Writuparna Banerjee",
    "text": "V3.0 - Writuparna Banerjee\n\n2020: https://medium.com/@writuparnabanerjee/the-difference-in-the-career-options-in-data-science-data-scientist-vs-data-engineer-vs-data-33209d0ac880"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#v4.0---joel-grus",
    "href": "slides/2025-01-22-intro.html#v4.0---joel-grus",
    "title": "Introduction to DS002R",
    "section": "V4.0 - Joel Grus",
    "text": "V4.0 - Joel Grus\n\n2013: https://posit.co/wp-content/themes/Posit/public/markdown-blogs/role-of-the-data-scientist/index.html?wtime=%7Bseek_to_second_number%7D"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#data-science-overview",
    "href": "slides/2025-01-22-intro.html#data-science-overview",
    "title": "Introduction to DS002R",
    "section": "Data Science Overview",
    "text": "Data Science Overview\n\nBased on https://www.effectivedatastorytelling.com/post/a-deeper-dive-into-lego-bricks-and-data-stories, original source: https://www.linkedin.com/learning/instructors/bill-shander"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#data-science-in-ds-002r",
    "href": "slides/2025-01-22-intro.html#data-science-in-ds-002r",
    "title": "Introduction to DS002R",
    "section": "Data Science in DS 002R",
    "text": "Data Science in DS 002R\n\n\n\n\n\n\n\n\n\n\n\n\n\nDS workflow\nin DS002R\nbeyond DS002R\n\n\n\n\ndata acquisition\nweb scraping, relational databases\nAPIs\n\n\ndata exploration\nwrangling, strings, regular expressions\nnatural language processing\n\n\ndata visualization\ngrammar of graphics\nanimations\n\n\ndata conclusions\niteration, permutation tests\npredictive modeling, machine learning, AI\n\n\ndata communication\nyes!\nyes!"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#data-science-in-the-wild",
    "href": "slides/2025-01-22-intro.html#data-science-in-the-wild",
    "title": "Introduction to DS002R",
    "section": "Data Science in the Wild",
    "text": "Data Science in the Wild\nData science extracts knowledge from within a particular domain of inquiry. Examples from Pomona!\n\nShannon Burns (Psychological Science and Neuroscience) uses data to understand brain processes of social communication.\nCharlotte Chang (Environmental Analysis & Biology) uses data to study and improve earth stewardship.\nAnthony (Tony) Clark (Computer Science) uses data to improve the safety and reliability of mobile robots.\nManisha Goel (Economics) uses data to understand how people’s identities shape the fortunes of businesses where they work.\nJun Lang (Asian Languages and Literatures) uses data to analyze (1) the intersection of language, gender, and society, and (2) second language acquisition and pedagogy.\nFrank Pericolosi (Physical Education) uses data to improve his team’s chances on the field.\nAmi Radunskaya (Mathematics) uses data to model tumor growth and treatment.\nYuqing Zhu (Neuroscience) uses data to figure out how a jumble of neurons becomes smart."
  },
  {
    "objectID": "slides/2025-01-22-intro.html#learning-goals",
    "href": "slides/2025-01-22-intro.html#learning-goals",
    "title": "Introduction to DS002R",
    "section": "Learning goals",
    "text": "Learning goals\nBy the end of the course, you will be able to…\n\n\ngain insight from data\ngain insight from data, reproducibly\ngain insight from data, reproducibly, using modern programming tools and techniques\ngain insight from data, reproducibly (with literate programming and version control), using modern programming tools and techniques"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#activity",
    "href": "slides/2025-01-22-intro.html#activity",
    "title": "Introduction to DS002R",
    "section": "Activity",
    "text": "Activity\n\nWhat problem or task would you like to investigate using data?\nWhat would be hard about executing the project?\nWhat are the potential ethical frameworks to consider?\nHow would you define success?"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#reproducibility-checklist",
    "href": "slides/2025-01-22-intro.html#reproducibility-checklist",
    "title": "Introduction to DS002R",
    "section": "Reproducibility checklist",
    "text": "Reproducibility checklist\n\nWhat does it mean for a data analysis to be “reproducible”?\n\nShort-term goals:\n\nAre the tables and figures reproducible from the code and data?\nDoes the code actually do what you think it does?\nIn addition to what was done, is it clear why it was done?\n\nLong-term goals:\n\nCan the code be used for other data?\nCan you extend the code to do other things?"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#toolkit-for-reproducibility",
    "href": "slides/2025-01-22-intro.html#toolkit-for-reproducibility",
    "title": "Introduction to DS002R",
    "section": "Toolkit for reproducibility",
    "text": "Toolkit for reproducibility\n\nScriptability \\(\\rightarrow\\) R\nLiterate programming (code, narrative, output in one place) \\(\\rightarrow\\) Quarto\nVersion control \\(\\rightarrow\\) Git / GitHub"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#r-and-rstudio-1",
    "href": "slides/2025-01-22-intro.html#r-and-rstudio-1",
    "title": "Introduction to DS002R",
    "section": "R and RStudio",
    "text": "R and RStudio\n\n\n\n\n\n\n\n\nR is an open-source statistical programming language\nR is also an environment for statistical computing and graphics\nIt’s easily extensible with packages\n\n\n\n\nRStudio is a convenient interface for R called an IDE (integrated development environment), e.g. “I write R code in the RStudio IDE”\nRStudio is not a requirement for programming with R, but it’s very commonly used by R programmers and data scientists"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#r-vs.-rstudio",
    "href": "slides/2025-01-22-intro.html#r-vs.-rstudio",
    "title": "Introduction to DS002R",
    "section": "R vs. RStudio",
    "text": "R vs. RStudio\n\n\n\n\n\n\n\nSource: Modern Dive."
  },
  {
    "objectID": "slides/2025-01-22-intro.html#r-packages",
    "href": "slides/2025-01-22-intro.html#r-packages",
    "title": "Introduction to DS002R",
    "section": "R packages",
    "text": "R packages\n\nPackages: Fundamental units of reproducible R code, including reusable R functions, the documentation that describes how to use them, and sample data1\nAs of August 26, 2024, there are 21,145 R packages available on CRAN (the Comprehensive R Archive Network)2\nWe’re going to work with a small (but important) subset of these!\n\n\n\n1 Wickham and Bryan, R Packages.\n2 CRAN contributed packages."
  },
  {
    "objectID": "slides/2025-01-22-intro.html#tour-r-rstudio",
    "href": "slides/2025-01-22-intro.html#tour-r-rstudio",
    "title": "Introduction to DS002R",
    "section": "Tour: R + RStudio",
    "text": "Tour: R + RStudio"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#tour-recap-r-rstudio",
    "href": "slides/2025-01-22-intro.html#tour-recap-r-rstudio",
    "title": "Introduction to DS002R",
    "section": "Tour recap: R + RStudio",
    "text": "Tour recap: R + RStudio"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#a-short-list-for-now-of-r-essentials",
    "href": "slides/2025-01-22-intro.html#a-short-list-for-now-of-r-essentials",
    "title": "Introduction to DS002R",
    "section": "A short list (for now) of R essentials",
    "text": "A short list (for now) of R essentials\n\nFunctions are (most often) verbs, followed by what they will be applied to in parentheses:\n\n\ndo_this(to_this)\ndo_that(to_this, to_that, with_those)\n\n\n\nPackages are installed with the install.packages() function and loaded with the library function, once per session:\n\n\ninstall.packages(\"package_name\")\nlibrary(package_name)"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#r-essentials-continued",
    "href": "slides/2025-01-22-intro.html#r-essentials-continued",
    "title": "Introduction to DS002R",
    "section": "R essentials (continued)",
    "text": "R essentials (continued)\n\nColumns (variables) in data frames are accessed with $:\n\n\ndataframe$var_name\n\n\n\nObject documentation can be accessed with ?\n\n\n?mean"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#tidyverse",
    "href": "slides/2025-01-22-intro.html#tidyverse",
    "title": "Introduction to DS002R",
    "section": "tidyverse",
    "text": "tidyverse\n\n\n\n\ntidyverse.org\n\nThe tidyverse is an opinionated collection of R packages designed for data science\nAll packages share an underlying philosophy and a common grammar"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#quarto-1",
    "href": "slides/2025-01-22-intro.html#quarto-1",
    "title": "Introduction to DS002R",
    "section": "Quarto",
    "text": "Quarto\n\nFully reproducible reports – each time you Render, the analysis is run from the beginning\nCode goes in chunks\nNarrative goes outside of chunks"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#tour-quarto",
    "href": "slides/2025-01-22-intro.html#tour-quarto",
    "title": "Introduction to DS002R",
    "section": "Tour: Quarto",
    "text": "Tour: Quarto"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#tour-recap-quarto",
    "href": "slides/2025-01-22-intro.html#tour-recap-quarto",
    "title": "Introduction to DS002R",
    "section": "Tour recap: Quarto",
    "text": "Tour recap: Quarto"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#environments",
    "href": "slides/2025-01-22-intro.html#environments",
    "title": "Introduction to DS002R",
    "section": "Environments",
    "text": "Environments\n\n\n\n\n\n\nImportant\n\n\nThe environment of your Quarto document is separate from the Console!\n\n\n\nRemember this, and expect it to bite you a few times as you’re learning to work with Quarto!"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#environments-1",
    "href": "slides/2025-01-22-intro.html#environments-1",
    "title": "Introduction to DS002R",
    "section": "Environments",
    "text": "Environments\n\n\nFirst, run the following in the console:\n\nx &lt;- 2\nx * 3\n\n\n\nAll looks good, eh?\n\n\nThen, add the following in an R chunk in your Quarto document\n\nx * 3\n\n\n\nWhat happens? Why the error?"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#how-will-we-use-quarto",
    "href": "slides/2025-01-22-intro.html#how-will-we-use-quarto",
    "title": "Introduction to DS002R",
    "section": "How will we use Quarto?",
    "text": "How will we use Quarto?\n\nEvery assignment is an Quarto document.\nYou’ll always have a template Quarto document to start with.\nThe amount of scaffolding in the template will decrease over the semester."
  },
  {
    "objectID": "slides/2025-01-22-intro.html#git-and-github",
    "href": "slides/2025-01-22-intro.html#git-and-github",
    "title": "Introduction to DS002R",
    "section": "Git and GitHub",
    "text": "Git and GitHub\n\n\n\n\n\n\n\n\nGit is a version control system – like “Track Changes” features from Microsoft Word, on steroids\nIt’s not the only version control system, but it’s a very popular one\n\n\n\n\n\n\n\n\nGitHub is the home for your Git-based projects on the internet – like DropBox but much, much better\nWe will use GitHub as a platform for web hosting and collaboration (and as our course management system!)"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#versioning---done-badly",
    "href": "slides/2025-01-22-intro.html#versioning---done-badly",
    "title": "Introduction to DS002R",
    "section": "Versioning - done badly",
    "text": "Versioning - done badly"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#versioning---done-better",
    "href": "slides/2025-01-22-intro.html#versioning---done-better",
    "title": "Introduction to DS002R",
    "section": "Versioning - done better",
    "text": "Versioning - done better"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#versioning---done-even-better",
    "href": "slides/2025-01-22-intro.html#versioning---done-even-better",
    "title": "Introduction to DS002R",
    "section": "Versioning - done even better",
    "text": "Versioning - done even better\nwith human readable messages"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#how-will-we-use-git-and-github",
    "href": "slides/2025-01-22-intro.html#how-will-we-use-git-and-github",
    "title": "Introduction to DS002R",
    "section": "How will we use Git and GitHub?",
    "text": "How will we use Git and GitHub?"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#how-will-we-use-git-and-github-1",
    "href": "slides/2025-01-22-intro.html#how-will-we-use-git-and-github-1",
    "title": "Introduction to DS002R",
    "section": "How will we use Git and GitHub?",
    "text": "How will we use Git and GitHub?"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#how-will-we-use-git-and-github-2",
    "href": "slides/2025-01-22-intro.html#how-will-we-use-git-and-github-2",
    "title": "Introduction to DS002R",
    "section": "How will we use Git and GitHub?",
    "text": "How will we use Git and GitHub?"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#how-will-we-use-git-and-github-3",
    "href": "slides/2025-01-22-intro.html#how-will-we-use-git-and-github-3",
    "title": "Introduction to DS002R",
    "section": "How will we use Git and GitHub?",
    "text": "How will we use Git and GitHub?"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#git-and-github-tips",
    "href": "slides/2025-01-22-intro.html#git-and-github-tips",
    "title": "Introduction to DS002R",
    "section": "Git and GitHub tips",
    "text": "Git and GitHub tips\n\n\nThere are millions of git commands – ok, that’s an exaggeration, but there are a lot of them – and very few people know them all. 99% of the time you will use git to add, commit, push, and pull.\nWe will be doing Git things and interfacing with GitHub through RStudio, but if you Google for help you might come across methods for doing these things in the command line – skip that and move on to the next resource unless you feel comfortable trying it out.\nThere is a great resource for working with git and R: happygitwithr.com. Some of the content in there is beyond the scope of this course, but it’s a good place to look for help."
  },
  {
    "objectID": "slides/2025-01-22-intro.html#tour-git-github",
    "href": "slides/2025-01-22-intro.html#tour-git-github",
    "title": "Introduction to DS002R",
    "section": "Tour: Git + GitHub",
    "text": "Tour: Git + GitHub"
  },
  {
    "objectID": "slides/2025-01-22-intro.html#participation",
    "href": "slides/2025-01-22-intro.html#participation",
    "title": "Introduction to DS002R",
    "section": "Participation",
    "text": "Participation\nFor full participation points, you’ll need to share at least one R-tip-of-the day.\n\nBeginning of class, I’ll ask if anyone has ideas\nYou share the tip\nI’ll post the tip online"
  },
  {
    "objectID": "slides/ae-01-meet-the-penguins.html",
    "href": "slides/ae-01-meet-the-penguins.html",
    "title": "Meet the Penguins",
    "section": "",
    "text": "For this application exercise, we’ll use the tidyverse and palmerpenguins packages.\n\nlibrary(tidyverse)\nlibrary(palmerpenguins)\n\nThe dataset we will visualize is called penguins. Let’s glimpse() at it.\n\nYour turn: Replace #add code here with the code for “glimpse”ing at the penguins data frame – glimpse(penguins). Render the document and view the output.\n\n\nglimpse(penguins)\n\nRows: 344\nColumns: 8\n$ species           &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adel…\n$ island            &lt;fct&gt; Torgersen, Torgersen, Torgersen, Torgersen, Torgerse…\n$ bill_length_mm    &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, …\n$ bill_depth_mm     &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, …\n$ flipper_length_mm &lt;int&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186…\n$ body_mass_g       &lt;int&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, …\n$ sex               &lt;fct&gt; male, female, female, NA, female, male, female, male…\n$ year              &lt;int&gt; 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007…\n\n\n\nDemo: Replace the blank below with the number of rows in the penguins data frame based on the output of the chunk below.\n\n\nnrow(penguins)\n\n[1] 344\n\n\nThere are 344 penguins in the penguins data frame.\n\n\n\nReuseCC BY 4.0"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#nssd",
    "href": "slides/2025-01-27-dataviz.html#nssd",
    "title": "Better Data Visualizations",
    "section": "NSSD:",
    "text": "NSSD:\n\n\nWhat was Hilary trying to answer in her data collection?\nName two of Hilary’s main hurdles in gathering accurate data.\nWhich is better: high touch (manual) or low touch (automatic) data collection? Why?\nWhat additional covariates are needed / desired? Any problems with them?\nHow much data does she need?\nAre there any ethical considerations to think about?"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#grammar-of-graphics",
    "href": "slides/2025-01-27-dataviz.html#grammar-of-graphics",
    "title": "Better Data Visualizations",
    "section": "Grammar of graphics",
    "text": "Grammar of graphics\nYau (2013) gives us nine visual cues, and Wickham (2014) translates them into a language using ggplot2.\n\nVisual Cues: the aspects of the figure where we should focus.\nPosition (numerical) where in relation to other things?\nLength (numerical) how big (in one dimension)?\nAngle (numerical) how wide? parallel to something else?\nDirection (numerical) at what slope? In a time series, going up or down?\nShape (categorical) belonging to what group?\nArea (numerical) how big (in two dimensions)? Beware of improper scaling!\nVolume (numerical) how big (in three dimensions)? Beware of improper scaling!\nShade (either) to what extent? how severely?\nColor (either) to what extent? how severely? Beware of red/green color blindness.\nCoordinate System: rectangular, polar, geographic, etc.\nScale: numeric (linear? logarithmic?), categorical (ordered?), time\nContext: in comparison to what (think back to ideas from Tufte)"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#pieces-of-the-graph",
    "href": "slides/2025-01-27-dataviz.html#pieces-of-the-graph",
    "title": "Better Data Visualizations",
    "section": "Pieces of the Graph",
    "text": "Pieces of the Graph\n\n\nVisual Cues of Yau (2013):\nPosition (numerical)\nLength (numerical)\nAngle (numerical)\nDirection (numerical)\nShape (categorical)\nArea (numerical)\nVolume (numerical)\nShade (either)\nColor (either)"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#order-matters",
    "href": "slides/2025-01-27-dataviz.html#order-matters",
    "title": "Better Data Visualizations",
    "section": "Order Matters",
    "text": "Order Matters"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#cues-together",
    "href": "slides/2025-01-27-dataviz.html#cues-together",
    "title": "Better Data Visualizations",
    "section": "Cues Together",
    "text": "Cues Together"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#attributes",
    "href": "slides/2025-01-27-dataviz.html#attributes",
    "title": "Better Data Visualizations",
    "section": "Attributes",
    "text": "Attributes\nAttributes can focus your reader’s attention.1\n\n\n\n\n\n\n\n\n\nimage credit: Better Data Visualization by Schwabish"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#advice-for-plotting",
    "href": "slides/2025-01-27-dataviz.html#advice-for-plotting",
    "title": "Better Data Visualizations",
    "section": "Advice for Plotting",
    "text": "Advice for Plotting\n\n\n\nBasic plotting\n\n\n\nAvoid having other graph elements interfere with data\nUse visually prominent symbols\nAvoid over-plotting (One way to avoid over plotting: jitter the values)\nDifferent values of data may obscure each other\nInclude all or nearly all of the data\nFill data region"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#advice-for-plotting-1",
    "href": "slides/2025-01-27-dataviz.html#advice-for-plotting-1",
    "title": "Better Data Visualizations",
    "section": "Advice for Plotting",
    "text": "Advice for Plotting\n\n\n\nBasic plotting\nEliminate superfluous material\n\n\n\nChart junk & stuff that adds no meaning, e.g. butterflies on top of barplots, background images\nExtra tick marks and grid lines\nUnnecessary text and arrows\nDecimal places beyond the measurement error or the level of difference"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#advice-for-plotting-2",
    "href": "slides/2025-01-27-dataviz.html#advice-for-plotting-2",
    "title": "Better Data Visualizations",
    "section": "Advice for Plotting",
    "text": "Advice for Plotting\n\n\n\nBasic plotting\nEliminate superfluous material\nFacilitate comparisons\n\n\n\nPut juxtaposed plots on same scale\nMake it easy to distinguish elements of superposed plots (e.g. color)\nEmphasizes the important difference\nComparison: volume, area, height (be careful, volume can seem bigger than you mean it to)"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#advice-for-plotting-3",
    "href": "slides/2025-01-27-dataviz.html#advice-for-plotting-3",
    "title": "Better Data Visualizations",
    "section": "Advice for Plotting",
    "text": "Advice for Plotting\n\n\n\nBasic plotting\nEliminate superfluous material\nFacilitate comparisons\nChoosing the scale\n\n\n\nKeep scales on x and y axes the same for both plots to facilitate the comparison\nZoom in to focus on the region that contains the bulk of the data\nKeep the scale the same throughout the plot (i.e. don’t change it mid-axis)\nOrigin need not be on the scale\nChoose a scale that improves resolution\nAvoid jiggling the baseline"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#advice-for-plotting-4",
    "href": "slides/2025-01-27-dataviz.html#advice-for-plotting-4",
    "title": "Better Data Visualizations",
    "section": "Advice for Plotting",
    "text": "Advice for Plotting\n\n\n\nBasic plotting\nEliminate superfluous material\nFacilitate comparisons\nChoosing the scale\nHow to make a plot information rich\n\n\n\nDescribe what you see in the caption\nAdd context with reference markers (lines and points) including text\nAdd legends and labels\nUse color and plotting symbols to add more information\nPlot the same thing more than once in different ways/scales\nReduce clutter"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#advice-for-plotting-5",
    "href": "slides/2025-01-27-dataviz.html#advice-for-plotting-5",
    "title": "Better Data Visualizations",
    "section": "Advice for Plotting",
    "text": "Advice for Plotting\n\n\n\nBasic plotting\nEliminate superfluous material\nFacilitate comparisons\nChoosing the scale\nHow to make a plot information rich\nCaptions should\n\n\n\nBe comprehensive\nSelf-contained\nDescribe what has been graphed\nDraw attention to important features\nDescribe conclusions drawn from graph"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#advice-for-plotting-6",
    "href": "slides/2025-01-27-dataviz.html#advice-for-plotting-6",
    "title": "Better Data Visualizations",
    "section": "Advice for Plotting",
    "text": "Advice for Plotting\n\n\n\nBasic plotting\nEliminate superfluous material\nFacilitate comparisons\nChoosing the scale\nHow to make a plot information rich\nCaptions should\nGood Plot Making Practice\n\n\n\nPut major conclusions in graphical form\nProvide reference information\nProof read for clarity and consistency\nGraphing is an iterative process\nMultiplicity is OK, i.e. two plots of the same variable may provide different messages\nMake plots data rich"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#getting-help",
    "href": "slides/2025-01-27-dataviz.html#getting-help",
    "title": "Better Data Visualizations",
    "section": "Getting help",
    "text": "Getting help\n\nOne of the best ways to get started with ggplot is to Google what you want to do with the word ggplot. Then look through the images that come up. More often than not, the associated code is there. There are also ggplot galleries of images, one of them is here: https://plot.ly/ggplot2/\nLook at the end of this presentation and the syllabus. More help options there."
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#what-are-the-visual-cues-on-this-plot",
    "href": "slides/2025-01-27-dataviz.html#what-are-the-visual-cues-on-this-plot",
    "title": "Better Data Visualizations",
    "section": "What are the visual cues on this plot?",
    "text": "What are the visual cues on this plot?\n\n\n\n\n\n\n\n\n\n\n\n\n\nposition\nlength\nshape\narea/volume\nshade/color"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#what-are-the-visual-cues-on-this-plot-1",
    "href": "slides/2025-01-27-dataviz.html#what-are-the-visual-cues-on-this-plot-1",
    "title": "Better Data Visualizations",
    "section": "What are the visual cues on this plot?",
    "text": "What are the visual cues on this plot?\n\n\n\n\n\n\n\n\n\n\n\n\n\nposition\nlength\nshape\narea/volume\nshade/color"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#what-are-the-visual-cues-on-this-plot-2",
    "href": "slides/2025-01-27-dataviz.html#what-are-the-visual-cues-on-this-plot-2",
    "title": "Better Data Visualizations",
    "section": "What are the visual cues on this plot?",
    "text": "What are the visual cues on this plot?\n\n\n\n\n\n\n\n\n\n\n\n\n\nposition\nlength\nshape\narea/volume\nshade/color"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#the-grammar-of-graphics-ggplot",
    "href": "slides/2025-01-27-dataviz.html#the-grammar-of-graphics-ggplot",
    "title": "Better Data Visualizations",
    "section": "The grammar of graphics ggplot",
    "text": "The grammar of graphics ggplot\ngeom: the geometric “shape” used to display data\n\nbar, point, line, ribbon, text, etc.\n\naesthetic: an attribute controlling how geom is displayed with respect to variables\n\nx position, y position, color, fill, shape, size, etc.\n\n\nguide: helps user convert visual data back into raw data (legends, axes)\nstat: a transformation applied to data before geom gets it\n\nexample: histograms work on binned data"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#set-up",
    "href": "slides/2025-01-27-dataviz.html#set-up",
    "title": "Better Data Visualizations",
    "section": "Set up",
    "text": "Set up\n\nlibrary(mosaic)\ndata(Births78)\n\n\nhead(Births78)\n\n\n\n\n\n\n\n\n\ndate\nbirths\nwday\nyear\nmonth\nday_of_year\nday_of_month\nday_of_week\n\n\n\n\n1978-01-01\n7701\nSun\n1978\n1\n1\n1\n1\n\n\n1978-01-02\n7527\nMon\n1978\n1\n2\n2\n2\n\n\n1978-01-03\n8825\nTue\n1978\n1\n3\n3\n3\n\n\n1978-01-04\n8859\nWed\n1978\n1\n4\n4\n4\n\n\n1978-01-05\n9043\nThu\n1978\n1\n5\n5\n5\n\n\n1978-01-06\n9208\nFri\n1978\n1\n6\n6\n6"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#how-do-we-make-this-plot",
    "href": "slides/2025-01-27-dataviz.html#how-do-we-make-this-plot",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?\n\n\n\n\n\n\n\n\n\n\n\n\nTwo Questions:\n\nWhat do we want R to do? (What is the goal?)\nWhat does R need to know?"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#how-do-we-make-this-plot-1",
    "href": "slides/2025-01-27-dataviz.html#how-do-we-make-this-plot-1",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?\n\n\n\n\n\n\n\n\n\n\n\n\n\nGoal: scatterplot = a plot with points\nWhat does R need to know?\n\ndata source: Births78\naesthetics:\n\ndate -&gt; x\nbirths -&gt; y\npoints (!)"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#how-do-we-make-this-plot-2",
    "href": "slides/2025-01-27-dataviz.html#how-do-we-make-this-plot-2",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot(data = Births78, \n       aes(x = date, y = births)) + \n  geom_point() +\n  labs(title = \"US Births in 1978\")\n\nggplot() +\n  geom_point(data = Births78, \n             aes(x = date, y = births)) +\n  labs(title = \"US Births in 1978\")"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#layers",
    "href": "slides/2025-01-27-dataviz.html#layers",
    "title": "Better Data Visualizations",
    "section": "Layers",
    "text": "Layers\nLayer 1\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot(data = Births78, \n       aes(x = date, y = births))"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#layers-1",
    "href": "slides/2025-01-27-dataviz.html#layers-1",
    "title": "Better Data Visualizations",
    "section": "Layers",
    "text": "Layers\nLayer 2\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot(data = Births78, \n       aes(x = date, y = births)) + \n  geom_point()"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#layers-2",
    "href": "slides/2025-01-27-dataviz.html#layers-2",
    "title": "Better Data Visualizations",
    "section": "Layers",
    "text": "Layers\nLayer 3\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot(data = Births78, \n       aes(x = date, y = births)) + \n  geom_point() +\n  labs(title = \"US Births in 1978\")"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#how-do-we-make-this-plot-3",
    "href": "slides/2025-01-27-dataviz.html#how-do-we-make-this-plot-3",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?\n\n\n\n\n\n\n\n\n\n\n\n\nWhat has changed?\n\nnew aesthetic: mapping color to day of week"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#how-do-we-make-this-plot-4",
    "href": "slides/2025-01-27-dataviz.html#how-do-we-make-this-plot-4",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot(data = Births78,\n       aes(x = date,\n           y = births, \n           color = wday)) +\n  geom_point() +\n  labs(title = \"US Births in 1978\")"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#how-do-we-make-this-plot-5",
    "href": "slides/2025-01-27-dataviz.html#how-do-we-make-this-plot-5",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#how-do-we-make-this-plot-6",
    "href": "slides/2025-01-27-dataviz.html#how-do-we-make-this-plot-6",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?\n\n\n\n\n\n\n\n\n\n\n\n\nlines instead of dots!\n\nggplot(data = Births78,\n         aes(x = date, \n             y = births,\n             color = wday)) +\n  geom_line() +\n  labs(title = \"US Births in 1978\")"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#how-do-we-make-this-plot-7",
    "href": "slides/2025-01-27-dataviz.html#how-do-we-make-this-plot-7",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#how-do-we-make-this-plot-8",
    "href": "slides/2025-01-27-dataviz.html#how-do-we-make-this-plot-8",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?\n\n\n\n\n\n\n\n\n\n\n\n\nNow there are two layers: one with points and one with lines\n\nggplot(data = Births78,\n       aes(x = date,\n           y = births,\n           color = wday)) + \n  geom_point() +  \n  geom_line()+\n  labs(title = \"US Births in 1978\")\n\n\nThe layers are placed one on top of the other: the points are below and the lines are above.\ndata and aes specified in ggplot() affect all geoms"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#what-does-this-code-do",
    "href": "slides/2025-01-27-dataviz.html#what-does-this-code-do",
    "title": "Better Data Visualizations",
    "section": "What does this code do?",
    "text": "What does this code do?\n\nggplot(data = Births78,\n       aes(x = date, y = births, color = \"navy\")) + \n  geom_point() +\n  labs(title = \"US Births in 1978\")"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#what-does-this-code-do-1",
    "href": "slides/2025-01-27-dataviz.html#what-does-this-code-do-1",
    "title": "Better Data Visualizations",
    "section": "What does this code do?",
    "text": "What does this code do?\n\nggplot(data = Births78,\n       aes(x = date, y = births, color = \"navy\")) + \n  geom_point()  +\n  labs(title = \"US Births in 1978\")\n\n\nThis is mapping the color aesthetic to a new variable with only one value (“navy”).\nSo all the dots get set to the same color, but it’s not navy."
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#setting-vs.-mapping",
    "href": "slides/2025-01-27-dataviz.html#setting-vs.-mapping",
    "title": "Better Data Visualizations",
    "section": "Setting vs. Mapping",
    "text": "Setting vs. Mapping\nIf we want to set the color to be navy for all of the dots, we do it outside the aes() designation:\n\nggplot(data = Births78,\n       aes(x = date, y = births)) +   # map variables \n  geom_point(color = \"navy\")    +   # set attributes\n  labs(title = \"US Births in 1978\")\n\n\n\nNote that color = \"navy\" is now outside of the aesthetics list. That’s how ggplot2 distinguishes between mapping and setting."
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#how-do-we-make-this-plot-9",
    "href": "slides/2025-01-27-dataviz.html#how-do-we-make-this-plot-9",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#how-do-we-make-this-plot-10",
    "href": "slides/2025-01-27-dataviz.html#how-do-we-make-this-plot-10",
    "title": "Better Data Visualizations",
    "section": "How do we make this plot?",
    "text": "How do we make this plot?\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot(data = Births78,\n       aes(x = date,\n           y = births)) + \n  geom_line(aes(color = wday)) +      \n  geom_point(color = \"navy\")  +         \n  labs(title = \"US Births in 1978\")\n\n\nggplot() establishes the default data and aesthetics for the geoms, but each geom may change these defaults.\ngood practice: put into ggplot() the things that affect all (or most) of the layers; rest in geom_XXXX()"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#setting-vs.-mapping-again",
    "href": "slides/2025-01-27-dataviz.html#setting-vs.-mapping-again",
    "title": "Better Data Visualizations",
    "section": "Setting vs. Mapping (again)",
    "text": "Setting vs. Mapping (again)\nInformation gets passed to the plot via:\n\nmap the variable information inside the aes (aesthetic) command\nset the non-variable information outside the aes (aesthetic) command"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#other-geoms",
    "href": "slides/2025-01-27-dataviz.html#other-geoms",
    "title": "Better Data Visualizations",
    "section": "Other geoms",
    "text": "Other geoms\n\napropos(\"^geom_\")\n\n [1] \"geom_abline\"                  \"geom_area\"                   \n [3] \"geom_ash\"                     \"geom_bar\"                    \n [5] \"geom_bin_2d\"                  \"geom_bin2d\"                  \n [7] \"geom_blank\"                   \"geom_boxplot\"                \n [9] \"geom_bracket\"                 \"geom_col\"                    \n[11] \"geom_contour\"                 \"geom_contour_filled\"         \n[13] \"geom_count\"                   \"geom_crossbar\"               \n[15] \"geom_curve\"                   \"geom_density\"                \n[17] \"geom_density_2d\"              \"geom_density_2d_filled\"      \n[19] \"geom_density_line\"            \"geom_density_ridges\"         \n[21] \"geom_density_ridges_gradient\" \"geom_density_ridges2\"        \n[23] \"geom_density2d\"               \"geom_density2d_filled\"       \n[25] \"geom_dotplot\"                 \"geom_errorbar\"               \n[27] \"geom_errorbarh\"               \"geom_exec\"                   \n[29] \"geom_freqpoly\"                \"geom_function\"               \n[31] \"geom_hex\"                     \"geom_histogram\"              \n[33] \"geom_hline\"                   \"geom_jitter\"                 \n[35] \"geom_label\"                   \"geom_label_repel\"            \n[37] \"geom_line\"                    \"geom_linerange\"              \n[39] \"geom_lm\"                      \"geom_map\"                    \n[41] \"geom_mosaic\"                  \"geom_mosaic_jitter\"          \n[43] \"geom_mosaic_text\"             \"geom_path\"                   \n[45] \"geom_pictogram\"               \"geom_point\"                  \n[47] \"geom_pointrange\"              \"geom_polygon\"                \n[49] \"geom_pwc\"                     \"geom_qq\"                     \n[51] \"geom_qq_line\"                 \"geom_quantile\"               \n[53] \"geom_rangeframe\"              \"geom_raster\"                 \n[55] \"geom_rect\"                    \"geom_ribbon\"                 \n[57] \"geom_ridgeline\"               \"geom_ridgeline_gradient\"     \n[59] \"geom_rug\"                     \"geom_segment\"                \n[61] \"geom_sf\"                      \"geom_sf_label\"               \n[63] \"geom_sf_text\"                 \"geom_signif\"                 \n[65] \"geom_smooth\"                  \"geom_spline\"                 \n[67] \"geom_spoke\"                   \"geom_step\"                   \n[69] \"geom_stripped_cols\"           \"geom_stripped_rows\"          \n[71] \"geom_text\"                    \"geom_text_repel\"             \n[73] \"geom_tile\"                    \"geom_tufteboxplot\"           \n[75] \"geom_violin\"                  \"geom_vline\"                  \n[77] \"geom_vridgeline\"              \"geom_waffle\""
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#other-geoms-1",
    "href": "slides/2025-01-27-dataviz.html#other-geoms-1",
    "title": "Better Data Visualizations",
    "section": "Other geoms",
    "text": "Other geoms\nhelp pages will tell you their aesthetics, default stats, etc.\n\n?geom_area             # for example"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#lets-try-geom_area",
    "href": "slides/2025-01-27-dataviz.html#lets-try-geom_area",
    "title": "Better Data Visualizations",
    "section": "Let’s try geom_area",
    "text": "Let’s try geom_area\n\n\n\nggplot(data = Births78,\n       aes(x = date,\n           y = births, \n           fill = wday)) + \n  geom_area()+\n  labs(title = \"US Births in 1978\")"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#lets-try-geom_area-1",
    "href": "slides/2025-01-27-dataviz.html#lets-try-geom_area-1",
    "title": "Better Data Visualizations",
    "section": "Let’s try geom_area",
    "text": "Let’s try geom_area\n\n\n\nggplot(data = Births78,\n       aes(x = date, y = births, fill = wday)) + \n  geom_area()+\n  labs(title = \"US Births in 1978\")\n\n\n\n\n\n\n\n\n\n… not a good plot\n\noverplotting is hiding much of the data\nextending y-axis to 0 may or may not be desirable."
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#side-note-what-makes-a-plot-good",
    "href": "slides/2025-01-27-dataviz.html#side-note-what-makes-a-plot-good",
    "title": "Better Data Visualizations",
    "section": "Side note: what makes a plot good?",
    "text": "Side note: what makes a plot good?\nMost (all?) graphics are intended to help us make comparisons\n\nHow does something change over time?\nDo my treatments matter? How much?\nDo treatment and control respond the same way?\n\n\n\n\n\n\n\nKey plot metric\n\n\nDoes my plot make the comparisons I am interested in:\n\neasily, and\naccurately?"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#time-for-some-different-data",
    "href": "slides/2025-01-27-dataviz.html#time-for-some-different-data",
    "title": "Better Data Visualizations",
    "section": "Time for some different data",
    "text": "Time for some different data\nHELPrct: Health Evaluation and Linkage to Primary care randomized clinical trial. Subjects admitted for treatment for addiction to one of three substances.\n\nhead(HELPrct)\n\n\n\n\n\n\n\n\n\nage\nanysubstatus\nanysub\ncesd\nd1\ndaysanysub\ndayslink\ndrugrisk\ne2b\nfemale\nsex\ng1b\nhomeless\ni1\ni2\nid\nindtot\nlinkstatus\nlink\nmcs\npcs\npss_fr\nracegrp\nsatreat\nsexrisk\nsubstance\ntreat\navg_drinks\nmax_drinks\nhospitalizations\n\n\n\n\n37\n1\nyes\n49\n3\n177\n225\n0\nNA\n0\nmale\nyes\nhoused\n13\n26\n1\n39\n1\nyes\n25.11\n58.4\n0\nblack\nno\n4\ncocaine\nyes\n13\n26\n3\n\n\n37\n1\nyes\n30\n22\n2\nNA\n0\nNA\n0\nmale\nyes\nhomeless\n56\n62\n2\n43\nNA\nNA\n26.67\n36.0\n1\nwhite\nno\n7\nalcohol\nyes\n56\n62\n22\n\n\n26\n1\nyes\n39\n0\n3\n365\n20\nNA\n0\nmale\nno\nhoused\n0\n0\n3\n41\n0\nno\n6.76\n74.8\n13\nblack\nno\n2\nheroin\nno\n0\n0\n0\n\n\n39\n1\nyes\n15\n2\n189\n343\n0\n1\n1\nfemale\nno\nhoused\n5\n5\n4\n28\n0\nno\n43.97\n61.9\n11\nwhite\nyes\n4\nheroin\nno\n5\n5\n2\n\n\n32\n1\nyes\n39\n12\n2\n57\n0\n1\n0\nmale\nno\nhomeless\n10\n13\n5\n38\n1\nyes\n21.68\n37.3\n10\nblack\nno\n6\ncocaine\nno\n10\n13\n12\n\n\n47\n1\nyes\n6\n1\n31\n365\n0\nNA\n1\nfemale\nno\nhoused\n4\n4\n6\n29\n0\nno\n55.51\n46.5\n5\nblack\nno\n5\ncocaine\nyes\n4\n4\n1"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#who-are-the-people-in-the-study",
    "href": "slides/2025-01-27-dataviz.html#who-are-the-people-in-the-study",
    "title": "Better Data Visualizations",
    "section": "Who are the people in the study?",
    "text": "Who are the people in the study?\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot(data = HELP_data,\n       aes(x = substance)) + \n  geom_bar()+\n  labs(title = \"HELP trial\")\n\n\nHmm. What’s up with y?\n\nstat_bin() is being applied to the data before the geom_bar() gets to do its thing. Binning creates the y values."
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#who-are-the-people-in-the-study-1",
    "href": "slides/2025-01-27-dataviz.html#who-are-the-people-in-the-study-1",
    "title": "Better Data Visualizations",
    "section": "Who are the people in the study?",
    "text": "Who are the people in the study?\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot(data = HELP_data,\n       aes(x = substance,\n           fill = children)) + \n  geom_bar()+\n  labs(title = \"HELP trial\")"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#who-are-the-people-in-the-study-2",
    "href": "slides/2025-01-27-dataviz.html#who-are-the-people-in-the-study-2",
    "title": "Better Data Visualizations",
    "section": "Who are the people in the study?",
    "text": "Who are the people in the study?\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot(HELP_data,\n       aes(x = substance,\n           fill = children)) + \n  geom_bar(position = \"fill\") +\n  labs(title = \"HELP trial\",\n       y = \"actually, percent\")"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#how-old-are-people-in-the-help-study",
    "href": "slides/2025-01-27-dataviz.html#how-old-are-people-in-the-help-study",
    "title": "Better Data Visualizations",
    "section": "How old are people in the HELP study?",
    "text": "How old are people in the HELP study?\n\n\n\n\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n\n\n\n\n\n\n\n\n\n\n\nggplot(data = HELP_data,\n       aes(x = age)) + \n  geom_histogram()+\n  labs(title = \"HELP trial\")\n\nNotice the messages\n\nstat_bin: Histograms are not mapping the raw data but binned data.\nstat_bin() performs the data transformation.\nbinwidth: a default binwidth has been selected, but we should really choose our own."
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#setting-the-binwidth-manually",
    "href": "slides/2025-01-27-dataviz.html#setting-the-binwidth-manually",
    "title": "Better Data Visualizations",
    "section": "Setting the binwidth manually",
    "text": "Setting the binwidth manually\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot(data = HELP_data,\n       aes(x = age)) + \n  geom_histogram(binwidth = 2)+\n  labs(title = \"HELP trial\")"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#how-old-are-people-in-the-help-study-other-geoms",
    "href": "slides/2025-01-27-dataviz.html#how-old-are-people-in-the-help-study-other-geoms",
    "title": "Better Data Visualizations",
    "section": "How old are people in the HELP study? – Other geoms",
    "text": "How old are people in the HELP study? – Other geoms\n\nggplot(data = HELP_data,\n       aes(x = age)) + \n  geom_freqpoly(binwidth = 2)+\n  labs(title = \"HELP clinical trial at detoxification unit\")\n\n\n\n\n\n\n\n\n\nggplot(data = HELP_data,\n       aes(x = age)) + \n  geom_density()+\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#selecting-stat-and-geom-manually",
    "href": "slides/2025-01-27-dataviz.html#selecting-stat-and-geom-manually",
    "title": "Better Data Visualizations",
    "section": "Selecting stat and geom manually",
    "text": "Selecting stat and geom manually\nEvery geom comes with a default stat\n\nfor simple cases, the stat is stat_identity() which does nothing\nwe can mix and match geoms and stats however we like\n\n\nggplot(data = HELP_data,\n       aes(x = age)) + \n  geom_line(stat = \"density\")+\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#selecting-stat-and-geom-manually-1",
    "href": "slides/2025-01-27-dataviz.html#selecting-stat-and-geom-manually-1",
    "title": "Better Data Visualizations",
    "section": "Selecting stat and geom manually",
    "text": "Selecting stat and geom manually\nEvery stat comes with a default geom, every geom with a default stat\n\nwe can specify stats instead of geom, if we prefer\nwe can mix and match geoms and stats however we like\n\n\nggplot(data = HELP_data,\n       aes(x = age)) + \n  stat_density(geom = \"line\")+\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#more-combinations",
    "href": "slides/2025-01-27-dataviz.html#more-combinations",
    "title": "Better Data Visualizations",
    "section": "More combinations",
    "text": "More combinations\n\nggplot(data = HELP_data,\n       aes(x = age)) + \n  geom_point(stat = \"bin\", binwidth = 3) + \n  geom_line(stat = \"bin\", binwidth = 3)  +\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#more-combinations-1",
    "href": "slides/2025-01-27-dataviz.html#more-combinations-1",
    "title": "Better Data Visualizations",
    "section": "More combinations",
    "text": "More combinations\n\nggplot(data = HELP_data,\n       aes(x = age)) + \n  geom_area(stat = \"bin\", binwidth = 3)  +\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#more-combinations-2",
    "href": "slides/2025-01-27-dataviz.html#more-combinations-2",
    "title": "Better Data Visualizations",
    "section": "More combinations",
    "text": "More combinations\n\nggplot(data = HELP_data,\n       aes(x = age)) + \n  geom_point(stat = \"bin\", \n             binwidth = 3, \n             aes(size = ..count..)) +\n  geom_line(stat = \"bin\", binwidth = 3) +\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#how-much-drinking-i1",
    "href": "slides/2025-01-27-dataviz.html#how-much-drinking-i1",
    "title": "Better Data Visualizations",
    "section": "How much drinking? (i1)",
    "text": "How much drinking? (i1)\n\nHELP_data |&gt; \n  ggplot(aes(x = i1)) + geom_histogram()+\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#how-much-drinking-i1-1",
    "href": "slides/2025-01-27-dataviz.html#how-much-drinking-i1-1",
    "title": "Better Data Visualizations",
    "section": "How much drinking? (i1)",
    "text": "How much drinking? (i1)\n\nHELP_data |&gt; \n  ggplot(aes(x = i1)) + geom_density()+\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#how-much-drinking-i1-2",
    "href": "slides/2025-01-27-dataviz.html#how-much-drinking-i1-2",
    "title": "Better Data Visualizations",
    "section": "How much drinking? (i1)",
    "text": "How much drinking? (i1)\n\nHELP_data |&gt; \n  ggplot(aes(x = i1)) + geom_area(stat = \"density\")+\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#covariates-adding-in-more-variables",
    "href": "slides/2025-01-27-dataviz.html#covariates-adding-in-more-variables",
    "title": "Better Data Visualizations",
    "section": "Covariates: Adding in more variables",
    "text": "Covariates: Adding in more variables\nUsing color and linetype:\n\nggplot(data = HELP_data,\n       aes(x = i1,\n           color = substance,\n           linetype = children)) + \n  geom_line(stat = \"density\")+\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#using-color-and-facets",
    "href": "slides/2025-01-27-dataviz.html#using-color-and-facets",
    "title": "Better Data Visualizations",
    "section": "Using color and facets",
    "text": "Using color and facets\n\nggplot(data = HELP_data,\n       aes(x = i1, color = substance)) + \n  geom_line(stat = \"density\") + \n  facet_grid( . ~ children )+\n  labs(title = \"HELP clinical trial at detoxification unit\")\n\n\n\n\n\n\n\n\n\nggplot(data = HELP_data,\n       aes(x = i1, color = substance)) + \n  geom_line(stat = \"density\") + \n  facet_grid( children ~ . )+\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#boxplots",
    "href": "slides/2025-01-27-dataviz.html#boxplots",
    "title": "Better Data Visualizations",
    "section": "Boxplots",
    "text": "Boxplots\nBoxplots use stat_quantile() (five number summary).\nThe quantitative variable must be y, and there must be an additional x variable.\n\nHELP_data |&gt; \n  ggplot(aes(x = substance, y = age, color = children)) + \n  geom_boxplot()+\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#horizontal-boxplots",
    "href": "slides/2025-01-27-dataviz.html#horizontal-boxplots",
    "title": "Better Data Visualizations",
    "section": "Horizontal boxplots",
    "text": "Horizontal boxplots\nHorizontal boxplots are obtained by flipping the coordinate system:\n\ncoord_flip() may be used with other plots as well to reverse the roles of x and y on the plot.\n\n\nggplot(data = HELP_data,\n       aes(x = substance, \n           y = age, \n           color = children)) + \n  geom_boxplot() +\n  coord_flip()+\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#axes-scaling-with-boxplots",
    "href": "slides/2025-01-27-dataviz.html#axes-scaling-with-boxplots",
    "title": "Better Data Visualizations",
    "section": "Axes scaling with boxplots",
    "text": "Axes scaling with boxplots\nWe can scale the continuous axis\n\nggplot(data = HELP_data,\n       aes(x = substance, \n           y = age, \n           color = children)) + \n  geom_boxplot() +\n  coord_trans(y = \"exp\")+\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#give-me-some-space",
    "href": "slides/2025-01-27-dataviz.html#give-me-some-space",
    "title": "Better Data Visualizations",
    "section": "Give me some space",
    "text": "Give me some space\nWe’ve triggered a new feature: dodge (for dodging things left/right). We can control how much if we set the dodge manually.\n\nggplot(data = HELP_data,\n       aes(x = substance, \n           y = age, \n           color = children)) + \n  geom_boxplot(position = position_dodge(width=1)) +\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#issues-with-bigger-data",
    "href": "slides/2025-01-27-dataviz.html#issues-with-bigger-data",
    "title": "Better Data Visualizations",
    "section": "Issues with bigger data",
    "text": "Issues with bigger data\n\nAlthough we can see a generally positive association (as we would expect), the overplotting may be hiding information.\n\n\nlibrary(NHANES)\ndim(NHANES)\n\n[1] 10000    76\n\nggplot(data = NHANES,\n       aes(x = Height, y = Weight)) +\n  geom_point() + \n  facet_grid( Gender ~ PregnantNow )"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#using-alpha-opacity",
    "href": "slides/2025-01-27-dataviz.html#using-alpha-opacity",
    "title": "Better Data Visualizations",
    "section": "Using alpha (opacity)",
    "text": "Using alpha (opacity)\nOne way to deal with overplotting is to set the opacity low.\n\nggplot(data = NHANES,\n       aes(x = Height, y = Weight)) +\n  geom_point(alpha=0.01) + \n  facet_grid( Gender ~ PregnantNow )"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#geom_density2d",
    "href": "slides/2025-01-27-dataviz.html#geom_density2d",
    "title": "Better Data Visualizations",
    "section": "geom_density2d",
    "text": "geom_density2d\nAlternatively (or simultaneously) we might prefer a different geom altogether.\n\nggplot(data = NHANES,\n       aes(x = Height, y = Weight)) +\n  geom_density2d() + \n  facet_grid( Gender ~ PregnantNow )"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#multiple-layers",
    "href": "slides/2025-01-27-dataviz.html#multiple-layers",
    "title": "Better Data Visualizations",
    "section": "Multiple layers",
    "text": "Multiple layers\n\n\n\nggplot(data = HELP_data, \n       aes(x = children, y = age)) +\n  geom_boxplot(outlier.size = 0) +\n  geom_point(alpha=.6) +\n  coord_flip()+\n  labs(title = \"HELP clinical trial at detoxification unit\")\n\n\n\n\n\n\n\n\n\n\nggplot(data = HELP_data,\n       aes(x = children, y = age)) +\n  geom_boxplot(outlier.size = 0) +\n  geom_jitter(alpha=.6, width = 0.1) +\n  coord_flip()+\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#multiple-layers-1",
    "href": "slides/2025-01-27-dataviz.html#multiple-layers-1",
    "title": "Better Data Visualizations",
    "section": "Multiple layers",
    "text": "Multiple layers\n\nggplot(data = HELP_data,\n       aes(x = children, y = age)) +\n  geom_boxplot(outlier.size = 0) +\n  geom_point(alpha=.6, \n             position = position_jitter(width=.1, height=0)) +\n  coord_flip()+\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#things-i-havent-mentioned-much",
    "href": "slides/2025-01-27-dataviz.html#things-i-havent-mentioned-much",
    "title": "Better Data Visualizations",
    "section": "Things I haven’t mentioned (much)",
    "text": "Things I haven’t mentioned (much)\n\ncoords (coord_flip() is good to know about)\nthemes (for customizing appearance)\nposition (position_dodge(), position_jitterdodge(), position_stack(), etc.)\ntransforming axes"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#themes",
    "href": "slides/2025-01-27-dataviz.html#themes",
    "title": "Better Data Visualizations",
    "section": "themes",
    "text": "themes\n\nlibrary(ggthemes)\nggplot(Births78, aes(x = date, y = births)) + \n  geom_point() + \n  theme_wsj()"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#jitterdodge",
    "href": "slides/2025-01-27-dataviz.html#jitterdodge",
    "title": "Better Data Visualizations",
    "section": "jitterdodge()",
    "text": "jitterdodge()\n\nggplot(data = HELP_data, \n       aes(x = substance, y = age, color = children)) +\n  geom_boxplot(coef = 10, position = position_dodge()) +\n  geom_point(aes(color = children, \n                 fill = children), \n             position = position_jitterdodge()) +\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#a-little-bit-of-everything",
    "href": "slides/2025-01-27-dataviz.html#a-little-bit-of-everything",
    "title": "Better Data Visualizations",
    "section": "A little bit of everything",
    "text": "A little bit of everything\n\nggplot(data = HELP_data, aes(x = substance, y = age, color = children)) +\n  geom_boxplot(coef = 10, position = position_dodge(width=1)) +\n  geom_point(aes(fill = children), alpha=.5, \n             position = position_jitterdodge(dodge.width=1, jitter.width = 0.2)) + \n  facet_wrap(~homeless)+\n  labs(title = \"HELP clinical trial at detoxification unit\")"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#want-to-learn-more",
    "href": "slides/2025-01-27-dataviz.html#want-to-learn-more",
    "title": "Better Data Visualizations",
    "section": "Want to learn more?",
    "text": "Want to learn more?\n\ndocs.ggplot2.org/\nR for Data Science by Hadley Wickham and Garrett Grolemund"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#whats-around-the-corner",
    "href": "slides/2025-01-27-dataviz.html#whats-around-the-corner",
    "title": "Better Data Visualizations",
    "section": "What’s around the corner?",
    "text": "What’s around the corner?\nshiny\n\ninteractive graphics / modeling\nhttps://shiny.rstudio.com/\n\nplotly\n\nPlotly is an R package for creating interactive web-based graphs via plotly’s JavaScript graphing library, plotly.js. The plotly R libary contains the ggplotly function , which will convert ggplot2 figures into a Plotly object. Furthermore, you have the option of manipulating the Plotly object with the style function.\n\n\nhttps://plot.ly/ggplot2/getting-started/\n\ngganimate\n\ngganimate tutorial"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#preliminaries",
    "href": "slides/2025-01-27-dataviz.html#preliminaries",
    "title": "Better Data Visualizations",
    "section": "Preliminaries",
    "text": "Preliminaries\n\nMake the data stand out\nFacilitate comparison\nAdd information\n\n(Nolan & Perrrett, 2016)"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#preliminaries-1",
    "href": "slides/2025-01-27-dataviz.html#preliminaries-1",
    "title": "Better Data Visualizations",
    "section": "Preliminaries",
    "text": "Preliminaries\nTufte lists two main motivational steps to working with graphics as part of an argument.\n\n“An essential analytic task in making decisions based on evidence is to understand how things work.”\nMaking decisions based on evidence requires the appropriate display of that evidence.”"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#cholera---a-picture-tells-1000-words",
    "href": "slides/2025-01-27-dataviz.html#cholera---a-picture-tells-1000-words",
    "title": "Better Data Visualizations",
    "section": "Cholera - a picture tells 1000 words",
    "text": "Cholera - a picture tells 1000 words\n\nHow many aspects of this graph can you point out which are relevant to figuring out that cholera infection was coming from a single pump? Are there any distracting aspects?"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#cholera---difficult-to-interpret",
    "href": "slides/2025-01-27-dataviz.html#cholera---difficult-to-interpret",
    "title": "Better Data Visualizations",
    "section": "Cholera - difficult to interpret",
    "text": "Cholera - difficult to interpret\n\nWhy would the outbreak already have begun to decline before the pump handle was removed?"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#challenger---problematic",
    "href": "slides/2025-01-27-dataviz.html#challenger---problematic",
    "title": "Better Data Visualizations",
    "section": "Challenger - Problematic",
    "text": "Challenger - Problematic\n\nOne of the graphics which was particularly unconvincing in trying to explain that O-rings fail in the cold."
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#challenger---better",
    "href": "slides/2025-01-27-dataviz.html#challenger---better",
    "title": "Better Data Visualizations",
    "section": "Challenger - Better????",
    "text": "Challenger - Better????\n\nA different graph of the Challenger information, now sorted by temperature"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#challenger---improved",
    "href": "slides/2025-01-27-dataviz.html#challenger---improved",
    "title": "Better Data Visualizations",
    "section": "Challenger - Improved",
    "text": "Challenger - Improved\n\nThe graphic the engineers should have led with in trying to persuade the administrators not to launch. It is evident that the number of O-ring failures is quite highly associated with the ambient temperature. Note the vital information on the x-axis associated with the large number of launches at warm temperatures that had zero O-ring failures.Note that the “improved” Challenger graphic was made by Tufte, not by the engineers working on the problem at the time."
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#fonts-matter",
    "href": "slides/2025-01-27-dataviz.html#fonts-matter",
    "title": "Better Data Visualizations",
    "section": "Fonts matter",
    "text": "Fonts matter"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#advice-on-plotting-specific",
    "href": "slides/2025-01-27-dataviz.html#advice-on-plotting-specific",
    "title": "Better Data Visualizations",
    "section": "Advice on plotting, specific",
    "text": "Advice on plotting, specific\n\nAvoid having other graph elements interfere with data\nUse visually prominent symbols\nAvoid over-plotting (One way to avoid over plotting: jitter the values)\nDifferent values of data may obscure each other\nInclude all or nearly all of the data\nFill data region"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#advice-on-plotting-general",
    "href": "slides/2025-01-27-dataviz.html#advice-on-plotting-general",
    "title": "Better Data Visualizations",
    "section": "Advice on plotting, general",
    "text": "Advice on plotting, general\n\nEliminate superfluous material\nFacilitate comparisons\nChoose the best scale\nMake the plot data / information rich\nUse good captions, alt text, conclusions"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#simplify",
    "href": "slides/2025-01-27-dataviz.html#simplify",
    "title": "Better Data Visualizations",
    "section": "Simplify",
    "text": "Simplify\n\nimage credit: https://www.darkhorseanalytics.com/portfolio-data-looks-better-naked"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#simplified",
    "href": "slides/2025-01-27-dataviz.html#simplified",
    "title": "Better Data Visualizations",
    "section": "Simplified",
    "text": "Simplified\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimage credit: https://www.darkhorseanalytics.com/portfolio-data-looks-better-naked"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#nyt-9721",
    "href": "slides/2025-01-27-dataviz.html#nyt-9721",
    "title": "Better Data Visualizations",
    "section": "NYT 9/7/21",
    "text": "NYT 9/7/21\n\nData VizWhat they did well\n\n\n\n\n\n\n\nOne in 5,000, NYT, D. Leonhardt 9/7/21; image credit: https://www.nytimes.com/2021/09/07/briefing/risk-breakthrough-infections-delta.html\n\n\n\n\n\n\n\nlighter grid lines\nno extra information\ngood caption\nregression line to give context to the trend\ny axes labels horizontal, not vertical\na few states (and the US) are highlighted to draw the reader’s eye"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#worth-a-mention",
    "href": "slides/2025-01-27-dataviz.html#worth-a-mention",
    "title": "Better Data Visualizations",
    "section": "Worth a Mention",
    "text": "Worth a Mention\n\n\nW.E.B. Du Bois (1868-1963)\n\nsociologist\ndata scientist\n\n\n\n\n\n\n\nimage credit: wikipedia\n\n\n\n\n\nIn 1900 Du Bois contributed approximately 60 data visualizations to an exhibit at the Exposition Universelle in Paris, an exhibit designed to illustrate the progress made by African Americans since the end of slavery (only 37 years prior, in 1863)."
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#beautiful-informative-graphics",
    "href": "slides/2025-01-27-dataviz.html#beautiful-informative-graphics",
    "title": "Better Data Visualizations",
    "section": "Beautiful & Informative Graphics",
    "text": "Beautiful & Informative Graphics\nhttps://drawingmatter.org/w-e-b-du-bois-visionary-infographics/"
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#tidy-data",
    "href": "slides/2024-02-05-verbs.html#tidy-data",
    "title": "Data Wrangling",
    "section": "Tidy data",
    "text": "Tidy data\n\neach row = a unit of observation (here, a penguin)\neach column = a measure on some variable of interest, either quantitative (numbers with units) or categorical (discrete possibilities or categories)\neach entry contains a single data value; no analysis, summaries, footnotes, comments, etc, and only one value per cell"
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#definition-of-datum",
    "href": "slides/2024-02-05-verbs.html#definition-of-datum",
    "title": "Data Wrangling",
    "section": "Definition of datum",
    "text": "Definition of datum\nThe definition of datum can be much broader:\n\nDefinition of datum from the Oxford English Dictionary"
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#tidying-data",
    "href": "slides/2024-02-05-verbs.html#tidying-data",
    "title": "Data Wrangling",
    "section": "Tidying data",
    "text": "Tidying data\nHow would you wrangle each data example into a tidy format?\n\nthe emails in your inbox\n\nsocial media texts\n\nimages\n\nvideos\n\naudio files"
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#not-tidy-active-duty-military",
    "href": "slides/2024-02-05-verbs.html#not-tidy-active-duty-military",
    "title": "Data Wrangling",
    "section": "Not tidy – Active Duty Military",
    "text": "Not tidy – Active Duty Military\nThe Active Duty data are not tidy! What are the cases? How are the data not tidy? What might the data look like in tidy form? Suppose that the case was “an individual in the armed forces.” What variables would you use to capture the information in the following table?"
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#tidy-packages-the-tidyverse",
    "href": "slides/2024-02-05-verbs.html#tidy-packages-the-tidyverse",
    "title": "Data Wrangling",
    "section": "Tidy packages: the tidyverse",
    "text": "Tidy packages: the tidyverse\n\nimage credit: https://www.tidyverse.org/."
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#some-basic-verbs",
    "href": "slides/2024-02-05-verbs.html#some-basic-verbs",
    "title": "Data Wrangling",
    "section": "Some Basic Verbs",
    "text": "Some Basic Verbs\n\nfilter()\narrange()\nselect()\ndistinct()\nmutate()\nsummarize()\nsample_n()"
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#filter",
    "href": "slides/2024-02-05-verbs.html#filter",
    "title": "Data Wrangling",
    "section": "filter()",
    "text": "filter()\nAllows you to select a subset of the rows of a data frame. The first argument is the name of the data frame, the following arguments are the filters that you’d like to apply\nFor all flights on January 1st:\n\nfilter(flights, month == 1, day == 1)\n\n# A tibble: 842 × 19\n    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n 1  2013     1     1      517            515         2      830            819\n 2  2013     1     1      533            529         4      850            830\n 3  2013     1     1      542            540         2      923            850\n 4  2013     1     1      544            545        -1     1004           1022\n 5  2013     1     1      554            600        -6      812            837\n 6  2013     1     1      554            558        -4      740            728\n 7  2013     1     1      555            600        -5      913            854\n 8  2013     1     1      557            600        -3      709            723\n 9  2013     1     1      557            600        -3      838            846\n10  2013     1     1      558            600        -2      753            745\n# ℹ 832 more rows\n# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,\n#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,\n#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;"
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#constructing-filters",
    "href": "slides/2024-02-05-verbs.html#constructing-filters",
    "title": "Data Wrangling",
    "section": "Constructing filters",
    "text": "Constructing filters\nFilters are constructed of logical operators: &lt;, &gt;, &lt;=, &gt;=, ==, != (and some others).\nAdding them one by one to filter() is akin to saying “this AND that”. To say “this OR that OR both”, use |.\n\nfilter(flights, month == 1 | month == 2)\n\n# A tibble: 51,955 × 19\n    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n 1  2013     1     1      517            515         2      830            819\n 2  2013     1     1      533            529         4      850            830\n 3  2013     1     1      542            540         2      923            850\n 4  2013     1     1      544            545        -1     1004           1022\n 5  2013     1     1      554            600        -6      812            837\n 6  2013     1     1      554            558        -4      740            728\n 7  2013     1     1      555            600        -5      913            854\n 8  2013     1     1      557            600        -3      709            723\n 9  2013     1     1      557            600        -3      838            846\n10  2013     1     1      558            600        -2      753            745\n# ℹ 51,945 more rows\n# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,\n#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,\n#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;"
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#practice",
    "href": "slides/2024-02-05-verbs.html#practice",
    "title": "Data Wrangling",
    "section": "Practice",
    "text": "Practice\nConstruct filters to isolate:\n\nFlights that left on St. Patrick’s Day.\nFlights that were destined for Chicago’s primary airport.\nFlights that were destined for Chicago’s primary airport and were operated by United Airlines.\nFlights with flight times more than 2000 miles or that were in the air more than 5 hours."
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#solution",
    "href": "slides/2024-02-05-verbs.html#solution",
    "title": "Data Wrangling",
    "section": "Solution",
    "text": "Solution\n\nFlights that left on St. Patrick’s Day.\nFlights that were destined for Chicago’s primary airport.\nFlights that were destined for Chicago’s primary airport and were operated by United Airlines.\nFlights with flight times more than 2000 miles or that were in the air more than 5 hours.\n\n\nfilter(flights, month == 3, day == 17)\nfilter(flights, dest == \"ORD\")\nfilter(flights, dest == \"ORD\", carrier == \"UA\")\nfilter(flights, distance &gt; 2000 | air_time &gt; 5*60)"
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#arrange",
    "href": "slides/2024-02-05-verbs.html#arrange",
    "title": "Data Wrangling",
    "section": "arrange()",
    "text": "arrange()\narrange() reorders the rows: It takes a data frame, and a set of column names (or more complicated expressions) to order by. If you provide more than one column name, each additional column will be used to break ties in the values of preceding columns:\n\narrange(flights, year, month, day)\n\nUse desc() to sort in descending order.\n\narrange(flights, desc(arr_delay))"
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#select",
    "href": "slides/2024-02-05-verbs.html#select",
    "title": "Data Wrangling",
    "section": "select()",
    "text": "select()\nOften you work with large datasets with many columns where only a few are actually of interest to you. select() allows you to rapidly zoom in on a useful subset using operations that usually only work on numeric variable positions:\n\nselect(flights, year, month, day)\n\nYou can exclude columns using - and specify a range using :.\n\nselect(flights, -(year:day))"
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#distinct",
    "href": "slides/2024-02-05-verbs.html#distinct",
    "title": "Data Wrangling",
    "section": "distinct()",
    "text": "distinct()\nA common use of select() is to find out which values a set of variables takes. This is particularly useful in conjunction with the distinct() verb which only returns the unique values in a table.\nWhat do the following data correspond to?\n\ndistinct(select(flights, origin, dest))\n\n# A tibble: 224 × 2\n   origin dest \n   &lt;chr&gt;  &lt;chr&gt;\n 1 EWR    IAH  \n 2 LGA    IAH  \n 3 JFK    MIA  \n 4 JFK    BQN  \n 5 LGA    ATL  \n 6 EWR    ORD  \n 7 EWR    FLL  \n 8 LGA    IAD  \n 9 JFK    MCO  \n10 LGA    ORD  \n# ℹ 214 more rows"
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#mutate",
    "href": "slides/2024-02-05-verbs.html#mutate",
    "title": "Data Wrangling",
    "section": "mutate()",
    "text": "mutate()\nAs well as selecting from the set of existing columns, it’s often useful to add new columns that are functions of existing columns. This is the job of mutate():\n\nselect(mutate(flights, gain = dep_delay - arr_delay), \n       flight, dep_delay, arr_delay, gain)\n\n# A tibble: 336,776 × 4\n   flight dep_delay arr_delay  gain\n    &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;\n 1   1545         2        11    -9\n 2   1714         4        20   -16\n 3   1141         2        33   -31\n 4    725        -1       -18    17\n 5    461        -6       -25    19\n 6   1696        -4        12   -16\n 7    507        -5        19   -24\n 8   5708        -3       -14    11\n 9     79        -3        -8     5\n10    301        -2         8   -10\n# ℹ 336,766 more rows"
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#summarize-and-sample_n",
    "href": "slides/2024-02-05-verbs.html#summarize-and-sample_n",
    "title": "Data Wrangling",
    "section": "summarize() and sample_n()",
    "text": "summarize() and sample_n()\nsummarize() collapses a data frame to a single row based on some function. It’s not very useful yet, but it will be.\nsample_n() provides you with a random sample of rows.\n\nsummarize(flights, delay = mean(dep_delay, na.rm = TRUE))\n\n# A tibble: 1 × 1\n  delay\n  &lt;dbl&gt;\n1  12.6\n\nsample_n(flights, 10)\n\n# A tibble: 10 × 19\n    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n 1  2013    11    21     1741           1740         1     1856           1900\n 2  2013    10    15      901            852         9     1151           1208\n 3  2013    12     1     1957           2000        -3     2251           2315\n 4  2013    11     3      624            625        -1      719            735\n 5  2013     9    17     1345           1345         0     1622           1650\n 6  2013     1    26     1942           1945        -3     2218           2241\n 7  2013     1    30      605            610        -5      858            910\n 8  2013    10    14     1841           1742        59     2050           1940\n 9  2013     6     7      923            925        -2     1109           1110\n10  2013     8    19     2119           2119         0     2356           2354\n# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,\n#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,\n#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;"
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#practice-1",
    "href": "slides/2024-02-05-verbs.html#practice-1",
    "title": "Data Wrangling",
    "section": "Practice",
    "text": "Practice\nMutate the data to create a new column that contains the average speed traveled by the plane for each flight.\nSelect the new variable and save it, along with tailnum, as a new data frame object."
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#practice-2",
    "href": "slides/2024-02-05-verbs.html#practice-2",
    "title": "Data Wrangling",
    "section": "Practice",
    "text": "Practice\nMutate the data to create a new column that contains the average speed traveled by the plane for each flight.\nSelect the new variable and save it, along with tailnum, as a new data frame object.\n\nflights2 &lt;- mutate(flights, speed = distance/(air_time/60))\nspeed_data &lt;- select(flights2, tailnum, speed)"
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#group_by",
    "href": "slides/2024-02-05-verbs.html#group_by",
    "title": "Data Wrangling",
    "section": "group_by()",
    "text": "group_by()\nsummarize() and sample_n() are even more powerful when combined with the idea of “group by”, repeating the operation separately on groups of observations within the dataset.\nThe group_by() function describes how to break a dataset down into groups of rows."
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#group_by-1",
    "href": "slides/2024-02-05-verbs.html#group_by-1",
    "title": "Data Wrangling",
    "section": "group_by()",
    "text": "group_by()\nFind the fastest airplanes in the bunch, measured as the average speed per airplane.\n\nby_tailnum &lt;- group_by(speed_data, tailnum)\navg_speed &lt;- summarize(by_tailnum, \n                       count = n(), \n                       avg_speed = mean(speed, na.rm = TRUE))\narrange(avg_speed, desc(avg_speed))\n\n# A tibble: 4,044 × 3\n   tailnum count avg_speed\n   &lt;chr&gt;   &lt;int&gt;     &lt;dbl&gt;\n 1 N228UA      1      501.\n 2 N315AS      1      499.\n 3 N654UA      1      499.\n 4 N819AW      1      490.\n 5 N382HA     26      486.\n 6 N388HA     36      484.\n 7 N391HA     21      484.\n 8 N777UA      1      483.\n 9 N385HA     28      483.\n10 N392HA     13      482.\n# ℹ 4,034 more rows"
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#chaining",
    "href": "slides/2024-02-05-verbs.html#chaining",
    "title": "Data Wrangling",
    "section": "Chaining",
    "text": "Chaining\nInstead of applying each verb step-by-step, we can chain them into a single data pipeline, connected with the |&gt; operator. You start the pipeline with a data frame and then pass it to each function in turn.\nThe pipe syntax (|&gt;) takes a data frame and sends it to the argument of a function. The mapping goes to the first available argument in the function. For example:\nx |&gt;  f() is the same as f(x)\nx |&gt;  f(y) is the same as f(x, y)"
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#mornings",
    "href": "slides/2024-02-05-verbs.html#mornings",
    "title": "Data Wrangling",
    "section": "Mornings",
    "text": "Mornings\n\nme_step1 &lt;- dress(me, what = sports)  \nme_step2 &lt;- exercise(me_step1, how = running)  \nme_step3 &lt;- eat(me_step2, choice = cereal)  \nme_step4 &lt;- dress(me_step3, what = school)  \nme_step5 &lt;- commute(me_step4, transportation = bike)"
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#mornings-1",
    "href": "slides/2024-02-05-verbs.html#mornings-1",
    "title": "Data Wrangling",
    "section": "Mornings",
    "text": "Mornings\n\ncommute(dress(eat(exercise(dress(me, what = sports), how = running), choice = cereal), what = school), transportation = bike)"
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#morning",
    "href": "slides/2024-02-05-verbs.html#morning",
    "title": "Data Wrangling",
    "section": "Morning",
    "text": "Morning\n(better??)\n\ncommute(\n  dress(\n    eat(\n      exercise(\n        dress(me, \n              what = sports), \n        how = running), \n      choice = cereal), \n    what = school), \n  transportation = bike)"
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#mornings-2",
    "href": "slides/2024-02-05-verbs.html#mornings-2",
    "title": "Data Wrangling",
    "section": "Mornings",
    "text": "Mornings\n\nme |&gt; \n  dress(what = sports) |&gt; \n  exercise(how = running) |&gt; \n  eat(choice = cereal) |&gt; \n  dress(what = school) |&gt; \n  commute(transportation = bike)"
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#little-bunny-foo-foo",
    "href": "slides/2024-02-05-verbs.html#little-bunny-foo-foo",
    "title": "Data Wrangling",
    "section": "Little Bunny Foo Foo",
    "text": "Little Bunny Foo Foo\nFrom Hadley Wickham, how to think about tidy data.\n\nLittle bunny Foo Foo\n\n\nWent hopping through the forest\n\n\nScooping up the field mice\n\n\nAnd bopping them on the head"
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#little-bunny-foo-foo-1",
    "href": "slides/2024-02-05-verbs.html#little-bunny-foo-foo-1",
    "title": "Data Wrangling",
    "section": "Little Bunny Foo Foo",
    "text": "Little Bunny Foo Foo\nThe nursery rhyme could be created by a series of steps where the output from each step is saved as an object along the way.\n\nfoo_foo &lt;- little_bunny()\nfoo_foo_1 &lt;- hop(foo_foo, through = forest)\nfoo_foo_2 &lt;- scoop(foo_foo_2, up = field_mice)\nfoo_foo_3 &lt;- bop(foo_foo_2, on = head)"
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#little-bunny-foo-foo-2",
    "href": "slides/2024-02-05-verbs.html#little-bunny-foo-foo-2",
    "title": "Data Wrangling",
    "section": "Little Bunny Foo Foo",
    "text": "Little Bunny Foo Foo\nAnother approach is to concatenate the functions so that there is only one output.\n\nbop(\n   scoop(\n      hop(foo_foo, through = forest),\n      up = field_mice),\n   on = head)"
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#little-bunny-foo-foo-3",
    "href": "slides/2024-02-05-verbs.html#little-bunny-foo-foo-3",
    "title": "Data Wrangling",
    "section": "Little Bunny Foo Foo",
    "text": "Little Bunny Foo Foo\nOr even worse, as one line:\n\nbop(scoop(hop(foo_foo, through = forest), up = field_mice), on = head)))"
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#little-bunny-foo-foo-4",
    "href": "slides/2024-02-05-verbs.html#little-bunny-foo-foo-4",
    "title": "Data Wrangling",
    "section": "Little Bunny Foo Foo",
    "text": "Little Bunny Foo Foo\nInstead, the code can be written using the pipe in the order in which the function is evaluated:\n\nfoo_foo |&gt; \n   hop(through = forest) |&gt; \n       scoop(up = field_mice) |&gt; \n           bop(on = head)"
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#flights",
    "href": "slides/2024-02-05-verbs.html#flights",
    "title": "Data Wrangling",
    "section": "Flights",
    "text": "Flights\n\nNo pipePipe\n\n\n\nflights2 &lt;- mutate(flights, speed = distance/(air_time/60))\ntail_speed &lt;- select(flights2, tailnum, speed)\ntail_speed_grp &lt;- group_by(tail_speed, tailnum)\ntail_ave &lt;- summarize(tail_speed_grp, number = n(),\n                      avg_speed = mean(speed, na.rm = TRUE))\narrange(tail_ave, desc(avg_speed))\n\n# A tibble: 4,044 × 3\n   tailnum number avg_speed\n   &lt;chr&gt;    &lt;int&gt;     &lt;dbl&gt;\n 1 N228UA       1      501.\n 2 N315AS       1      499.\n 3 N654UA       1      499.\n 4 N819AW       1      490.\n 5 N382HA      26      486.\n 6 N388HA      36      484.\n 7 N391HA      21      484.\n 8 N777UA       1      483.\n 9 N385HA      28      483.\n10 N392HA      13      482.\n# ℹ 4,034 more rows\n\n\n\n\n\nflights |&gt; \n  mutate(speed = distance / (air_time/60)) |&gt; \n  select(tailnum, speed) |&gt; \n  group_by(tailnum) |&gt;  \n  summarize(number = n(), \n            avg_speed = mean(speed, na.rm = TRUE)) |&gt; \n  arrange(desc(avg_speed))\n\n# A tibble: 4,044 × 3\n   tailnum number avg_speed\n   &lt;chr&gt;    &lt;int&gt;     &lt;dbl&gt;\n 1 N228UA       1      501.\n 2 N315AS       1      499.\n 3 N654UA       1      499.\n 4 N819AW       1      490.\n 5 N382HA      26      486.\n 6 N388HA      36      484.\n 7 N391HA      21      484.\n 8 N777UA       1      483.\n 9 N385HA      28      483.\n10 N392HA      13      482.\n# ℹ 4,034 more rows"
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#practice-3",
    "href": "slides/2024-02-05-verbs.html#practice-3",
    "title": "Data Wrangling",
    "section": "Practice",
    "text": "Practice\nForm a chain that creates a data frame containing only carrier and the mean departure delay time. Which carriers have the highest and lowest mean delays?"
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#practice-4",
    "href": "slides/2024-02-05-verbs.html#practice-4",
    "title": "Data Wrangling",
    "section": "Practice",
    "text": "Practice\nForm a chain that creates a data frame containing only carrier and the mean departure delay time. Which carriers have the highest and lowest mean delays?\n\nflights |&gt; \n  group_by(carrier) |&gt; \n  summarize(avg_delay = mean(dep_delay, na.rm = TRUE)) |&gt; \n  arrange(desc(avg_delay))\n\n# A tibble: 16 × 2\n   carrier avg_delay\n   &lt;chr&gt;       &lt;dbl&gt;\n 1 F9          20.2 \n 2 EV          20.0 \n 3 YV          19.0 \n 4 FL          18.7 \n 5 WN          17.7 \n 6 9E          16.7 \n 7 B6          13.0 \n 8 VX          12.9 \n 9 OO          12.6 \n10 UA          12.1 \n11 MQ          10.6 \n12 DL           9.26\n13 AA           8.59\n14 AS           5.80\n15 HA           4.90\n16 US           3.78"
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#practice-again",
    "href": "slides/2024-02-05-verbs.html#practice-again",
    "title": "Data Wrangling",
    "section": "Practice again",
    "text": "Practice again\nSay you’re curious about the relationship between the number of flights that each plane made in 2013, the mean distance that each of those planes flew, and the mean arrival delay. You also want to exclude the edge cases from your analysis, so focus on the planes that have logged more than 20 flights and flown an average distance of less than 2000 miles. Please form the chain that creates this dataset."
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#solution-1",
    "href": "slides/2024-02-05-verbs.html#solution-1",
    "title": "Data Wrangling",
    "section": "Solution",
    "text": "Solution\n\ndelay_data &lt;- flights |&gt; \n  group_by(tailnum) |&gt; \n  summarize(number = n(),\n            dist = mean(distance, na.rm = TRUE), \n            delay = mean(arr_delay, na.rm = TRUE)) |&gt; \n  filter(number &gt; 20, dist &lt; 2000)"
  },
  {
    "objectID": "slides/2024-02-05-verbs.html#visualizing-the-data",
    "href": "slides/2024-02-05-verbs.html#visualizing-the-data",
    "title": "Data Wrangling",
    "section": "Visualizing the data",
    "text": "Visualizing the data\n\nVizCode\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ndelay_data |&gt; \n ggplot(aes(dist, delay)) +\n geom_point(aes(size = number), \n            alpha = 1/2) +\n geom_smooth() +\n scale_size_area()\n\nWhen scale_size_area is used, the default behavior is to scale the area of points to be proportional to the value."
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#tidy-data",
    "href": "slides/2025-02-05-verbs.html#tidy-data",
    "title": "Data Wrangling",
    "section": "Tidy data",
    "text": "Tidy data\n\neach row = a unit of observation (here, a penguin)\neach column = a measure on some variable of interest, either quantitative (numbers with units) or categorical (discrete possibilities or categories)\neach entry contains a single data value; no analysis, summaries, footnotes, comments, etc, and only one value per cell"
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#definition-of-datum",
    "href": "slides/2025-02-05-verbs.html#definition-of-datum",
    "title": "Data Wrangling",
    "section": "Definition of datum",
    "text": "Definition of datum\nThe definition of datum can be much broader:\n\nDefinition of datum from the Oxford English Dictionary"
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#tidying-data",
    "href": "slides/2025-02-05-verbs.html#tidying-data",
    "title": "Data Wrangling",
    "section": "Tidying data",
    "text": "Tidying data\nHow would you wrangle each data example into a tidy format?\n\nthe emails in your inbox\n\nsocial media texts\n\nimages\n\nvideos\n\naudio files"
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#not-tidy-active-duty-military",
    "href": "slides/2025-02-05-verbs.html#not-tidy-active-duty-military",
    "title": "Data Wrangling",
    "section": "Not tidy – Active Duty Military",
    "text": "Not tidy – Active Duty Military\nThe Active Duty data are not tidy! What are the cases? How are the data not tidy? What might the data look like in tidy form? Suppose that the case was “an individual in the armed forces.” What variables would you use to capture the information in the following table?"
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#tidy-packages-the-tidyverse",
    "href": "slides/2025-02-05-verbs.html#tidy-packages-the-tidyverse",
    "title": "Data Wrangling",
    "section": "Tidy packages: the tidyverse",
    "text": "Tidy packages: the tidyverse\n\nimage credit: https://www.tidyverse.org/."
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#some-basic-verbs",
    "href": "slides/2025-02-05-verbs.html#some-basic-verbs",
    "title": "Data Wrangling",
    "section": "Some Basic Verbs",
    "text": "Some Basic Verbs\n\nfilter()\\(^*\\)\narrange()\nselect()\\(^*\\)\ndistinct()\nmutate()\\(^*\\)\nsummarize()\\(^*\\)\nsample_n()\ngroup_by()\\(^*\\)\n\nThe most used verbs are denoted with \\(^*\\)."
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#filter",
    "href": "slides/2025-02-05-verbs.html#filter",
    "title": "Data Wrangling",
    "section": "filter()",
    "text": "filter()\nAllows you to select a subset of the rows of a data frame. The first argument is the name of the data frame, the following arguments are the filters that you’d like to apply\nFor all flights on January 1st:\n\nfilter(flights, month == 1, day == 1)"
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#constructing-filters",
    "href": "slides/2025-02-05-verbs.html#constructing-filters",
    "title": "Data Wrangling",
    "section": "Constructing filters",
    "text": "Constructing filters\nFilters are constructed of logical operators: &lt;, &gt;, &lt;=, &gt;=, ==, != (and some others).\nAdding them one by one to filter() is akin to saying “this AND that”. To say “this OR that OR both”, use |.\n\nfilter(flights, month == 1 | month == 2)"
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#practice",
    "href": "slides/2025-02-05-verbs.html#practice",
    "title": "Data Wrangling",
    "section": "Practice",
    "text": "Practice\nConstruct filters to isolate:\n\nFlights that left on St. Patrick’s Day.\nFlights that were destined for Chicago’s primary airport.\nFlights that were destined for Chicago’s primary airport and were operated by United Airlines.\nFlights with flight times more than 2000 miles or that were in the air more than 5 hours."
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#solution",
    "href": "slides/2025-02-05-verbs.html#solution",
    "title": "Data Wrangling",
    "section": "Solution",
    "text": "Solution\n\nFlights that left on St. Patrick’s Day.\nFlights that were destined for Chicago’s primary airport.\nFlights that were destined for Chicago’s primary airport and were operated by United Airlines.\nFlights with flight times more than 2000 miles or that were in the air more than 5 hours.\n\n\nfilter(flights, month == 3, day == 17)\nfilter(flights, dest == \"ORD\")\nfilter(flights, dest == \"ORD\", carrier == \"UA\")\nfilter(flights, distance &gt; 2000 | air_time &gt; 5*60)"
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#arrange",
    "href": "slides/2025-02-05-verbs.html#arrange",
    "title": "Data Wrangling",
    "section": "arrange()",
    "text": "arrange()\narrange() reorders the rows: It takes a data frame, and a set of column names (or more complicated expressions) to order by. If you provide more than one column name, each additional column will be used to break ties in the values of preceding columns:\n\narrange(flights, year, month, day)\n\n\n  \n\n\n\nUse desc() to sort in descending order.\n\narrange(flights, desc(dep_delay))"
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#select",
    "href": "slides/2025-02-05-verbs.html#select",
    "title": "Data Wrangling",
    "section": "select()",
    "text": "select()\nOften you work with large datasets with many columns where only a few are actually of interest to you. select() allows you to rapidly zoom in on a useful subset using operations that usually only work on numeric variable positions:\n\nselect(flights, year, month, day)\n\n\n  \n\n\n\nYou can exclude columns using - and specify a range using :.\n\nselect(flights, -(year:day))"
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#distinct",
    "href": "slides/2025-02-05-verbs.html#distinct",
    "title": "Data Wrangling",
    "section": "distinct()",
    "text": "distinct()\nA common use of select() is to find out which values a set of variables takes. This is particularly useful in conjunction with the distinct() verb which only returns the unique values in a table.\nWhat do the following data correspond to?\n\ndistinct(select(flights, origin, dest))"
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#mutate",
    "href": "slides/2025-02-05-verbs.html#mutate",
    "title": "Data Wrangling",
    "section": "mutate()",
    "text": "mutate()\nAs well as selecting from the set of existing columns, it’s often useful to add new columns that are functions of existing columns. This is the job of mutate():\n\nselect(mutate(flights, gain = dep_delay - arr_delay), \n       flight, dep_delay, arr_delay, gain)"
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#summarize-and-sample_n",
    "href": "slides/2025-02-05-verbs.html#summarize-and-sample_n",
    "title": "Data Wrangling",
    "section": "summarize() and sample_n()",
    "text": "summarize() and sample_n()\nsummarize() collapses a data frame to a single row based on some function. It’s not very useful yet, but it will be.\nsample_n() provides you with a random sample of rows.\n\nsummarize(flights, delay = mean(dep_delay, na.rm = TRUE))\n\n\n  \n\n\nsample_n(flights, 10)"
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#practice-1",
    "href": "slides/2025-02-05-verbs.html#practice-1",
    "title": "Data Wrangling",
    "section": "Practice",
    "text": "Practice\nMutate the data to create a new column that contains the average speed traveled by the plane for each flight.\nSelect the new variable and save it, along with tailnum, as a new data frame object."
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#practice-2",
    "href": "slides/2025-02-05-verbs.html#practice-2",
    "title": "Data Wrangling",
    "section": "Practice",
    "text": "Practice\nMutate the data to create a new column that contains the average speed traveled by the plane for each flight.\nSelect the new variable and save it, along with tailnum, as a new data frame object.\n\nflights2 &lt;- mutate(flights, speed = distance/(air_time/60))\nspeed_data &lt;- select(flights2, tailnum, speed)"
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#group_by",
    "href": "slides/2025-02-05-verbs.html#group_by",
    "title": "Data Wrangling",
    "section": "group_by()",
    "text": "group_by()\nsummarize() and sample_n() are even more powerful when combined with the idea of “group by”, repeating the operation separately on groups of observations within the dataset.\nThe group_by() function describes how to break a dataset down into groups of rows.\ngroup_by() does not change anything about the data frame. Rather, it holds the rows of the data frame separately so that any future verbs applied to the data frame are done separately per group being held."
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#group_by-1",
    "href": "slides/2025-02-05-verbs.html#group_by-1",
    "title": "Data Wrangling",
    "section": "group_by()",
    "text": "group_by()\nFind the fastest airplanes in the bunch, measured as the average speed per airplane.\n\nby_tailnum &lt;- group_by(speed_data, tailnum)\navg_speed &lt;- summarize(by_tailnum, \n                       count = n(), \n                       avg_speed = mean(speed, na.rm = TRUE))\narrange(avg_speed, desc(avg_speed))"
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#chaining",
    "href": "slides/2025-02-05-verbs.html#chaining",
    "title": "Data Wrangling",
    "section": "Chaining",
    "text": "Chaining\nInstead of applying each verb step-by-step, we can chain them into a single data pipeline, connected with the |&gt; operator. You start the pipeline with a data frame and then pass it to each function in turn.\nThe pipe syntax (|&gt;) takes a data frame and sends it to the argument of a function. The mapping goes to the first available argument in the function. For example:\nx |&gt;  f() is the same as f(x)\nx |&gt;  f(y) is the same as f(x, y)"
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#mornings",
    "href": "slides/2025-02-05-verbs.html#mornings",
    "title": "Data Wrangling",
    "section": "Mornings",
    "text": "Mornings\n\nme_step1 &lt;- dress(me, what = sports)  \nme_step2 &lt;- exercise(me_step1, how = running)  \nme_step3 &lt;- eat(me_step2, choice = cereal)  \nme_step4 &lt;- dress(me_step3, what = school)  \nme_step5 &lt;- commute(me_step4, transportation = bike)"
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#mornings-1",
    "href": "slides/2025-02-05-verbs.html#mornings-1",
    "title": "Data Wrangling",
    "section": "Mornings",
    "text": "Mornings\n\ncommute(dress(eat(exercise(dress(me, what = sports), how = running), choice = cereal), what = school), transportation = bike)"
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#morning",
    "href": "slides/2025-02-05-verbs.html#morning",
    "title": "Data Wrangling",
    "section": "Morning",
    "text": "Morning\n(better??)\n\ncommute(\n  dress(\n    eat(\n      exercise(\n        dress(me, \n              what = sports), \n        how = running), \n      choice = cereal), \n    what = school), \n  transportation = bike)"
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#mornings-2",
    "href": "slides/2025-02-05-verbs.html#mornings-2",
    "title": "Data Wrangling",
    "section": "Mornings",
    "text": "Mornings\n\nme |&gt; \n  dress(what = sports) |&gt; \n  exercise(how = running) |&gt; \n  eat(choice = cereal) |&gt; \n  dress(what = school) |&gt; \n  commute(transportation = bike)"
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#little-bunny-foo-foo",
    "href": "slides/2025-02-05-verbs.html#little-bunny-foo-foo",
    "title": "Data Wrangling",
    "section": "Little Bunny Foo Foo",
    "text": "Little Bunny Foo Foo\nFrom Hadley Wickham, how to think about tidy data.\n\nLittle bunny Foo Foo\n\n\nWent hopping through the forest\n\n\nScooping up the field mice\n\n\nAnd bopping them on the head"
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#little-bunny-foo-foo-1",
    "href": "slides/2025-02-05-verbs.html#little-bunny-foo-foo-1",
    "title": "Data Wrangling",
    "section": "Little Bunny Foo Foo",
    "text": "Little Bunny Foo Foo\nThe nursery rhyme could be created by a series of steps where the output from each step is saved as an object along the way.\n\nfoo_foo &lt;- little_bunny()\nfoo_foo_1 &lt;- hop(foo_foo, through = forest)\nfoo_foo_2 &lt;- scoop(foo_foo_2, up = field_mice)\nfoo_foo_3 &lt;- bop(foo_foo_2, on = head)"
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#little-bunny-foo-foo-2",
    "href": "slides/2025-02-05-verbs.html#little-bunny-foo-foo-2",
    "title": "Data Wrangling",
    "section": "Little Bunny Foo Foo",
    "text": "Little Bunny Foo Foo\nAnother approach is to concatenate the functions so that there is only one output.\n\nbop(\n   scoop(\n      hop(foo_foo, through = forest),\n      up = field_mice),\n   on = head)"
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#little-bunny-foo-foo-3",
    "href": "slides/2025-02-05-verbs.html#little-bunny-foo-foo-3",
    "title": "Data Wrangling",
    "section": "Little Bunny Foo Foo",
    "text": "Little Bunny Foo Foo\nOr even worse, as one line:\n\nbop(scoop(hop(foo_foo, through = forest), up = field_mice), on = head)))"
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#little-bunny-foo-foo-4",
    "href": "slides/2025-02-05-verbs.html#little-bunny-foo-foo-4",
    "title": "Data Wrangling",
    "section": "Little Bunny Foo Foo",
    "text": "Little Bunny Foo Foo\nInstead, the code can be written using the pipe in the order in which the function is evaluated:\n\nfoo_foo |&gt; \n   hop(through = forest) |&gt; \n       scoop(up = field_mice) |&gt; \n           bop(on = head)"
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#flights",
    "href": "slides/2025-02-05-verbs.html#flights",
    "title": "Data Wrangling",
    "section": "Flights",
    "text": "Flights\n\nNo pipePipe\n\n\n\nflights2 &lt;- mutate(flights, speed = distance/(air_time/60))\ntail_speed &lt;- select(flights2, tailnum, speed)\ntail_speed_grp &lt;- group_by(tail_speed, tailnum)\ntail_ave &lt;- summarize(tail_speed_grp, number = n(),\n                      avg_speed = mean(speed, na.rm = TRUE))\narrange(tail_ave, desc(avg_speed))\n\n\n  \n\n\n\n\n\n\nflights |&gt; \n  mutate(speed = distance / (air_time/60)) |&gt; \n  select(tailnum, speed) |&gt; \n  group_by(tailnum) |&gt;  \n  summarize(number = n(), \n            avg_speed = mean(speed, na.rm = TRUE)) |&gt; \n  arrange(desc(avg_speed))"
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#practice-3",
    "href": "slides/2025-02-05-verbs.html#practice-3",
    "title": "Data Wrangling",
    "section": "Practice",
    "text": "Practice\nForm a chain that creates a data frame containing only carrier and the mean departure delay time. Which carriers have the highest and lowest mean delays?"
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#practice-4",
    "href": "slides/2025-02-05-verbs.html#practice-4",
    "title": "Data Wrangling",
    "section": "Practice",
    "text": "Practice\nForm a chain that creates a data frame containing only carrier and the mean departure delay time. Which carriers have the highest and lowest mean delays?\n\nflights |&gt; \n  group_by(carrier) |&gt; \n  summarize(avg_delay = mean(dep_delay, na.rm = TRUE)) |&gt; \n  arrange(desc(avg_delay))"
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#practice-again",
    "href": "slides/2025-02-05-verbs.html#practice-again",
    "title": "Data Wrangling",
    "section": "Practice again",
    "text": "Practice again\nSay you’re curious about the relationship between the number of flights that each plane made in 2013, the mean distance that each of those planes flew, and the mean arrival delay. You also want to exclude the edge cases from your analysis, so focus on the planes that have logged more than 20 flights and flown an average distance of less than 2000 miles. Please form the chain that creates this dataset."
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#solution-1",
    "href": "slides/2025-02-05-verbs.html#solution-1",
    "title": "Data Wrangling",
    "section": "Solution",
    "text": "Solution\n\ndelay_data &lt;- flights |&gt; \n  group_by(tailnum) |&gt; \n  summarize(number = n(),\n            dist = mean(distance, na.rm = TRUE), \n            delay = mean(arr_delay, na.rm = TRUE)) |&gt; \n  filter(number &gt; 20, dist &lt; 2000)"
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#visualizing-the-data",
    "href": "slides/2025-02-05-verbs.html#visualizing-the-data",
    "title": "Data Wrangling",
    "section": "Visualizing the data",
    "text": "Visualizing the data\n\nVizCode\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ndelay_data |&gt; \n ggplot(aes(dist, delay)) +\n geom_point(aes(size = number), \n            alpha = 1/2) +\n geom_smooth() +\n scale_size_area()\n\nWhen scale_size_area is used, the default behavior is to scale the area of points to be proportional to the value."
  },
  {
    "objectID": "slides/2025-02-05-verbs.html#out-of-nyc-flights-data-2013",
    "href": "slides/2025-02-05-verbs.html#out-of-nyc-flights-data-2013",
    "title": "Data Wrangling",
    "section": "(out of) NYC, flights data (2013)",
    "text": "(out of) NYC, flights data (2013)\n\nlibrary(nycflights13)\nflights"
  },
  {
    "objectID": "project1.html#footnotes",
    "href": "project1.html#footnotes",
    "title": "Mini-Project 1",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nOne option is to use code folding so that the user can see the code if they want to: https://quarto.org/docs/output-formats/html-code.html#folding-code.↩︎"
  },
  {
    "objectID": "superfluous_material.html",
    "href": "superfluous_material.html",
    "title": "superfluous material examples",
    "section": "",
    "text": "library(tidyverse)"
  },
  {
    "objectID": "superfluous_material.html#solutions",
    "href": "superfluous_material.html#solutions",
    "title": "superfluous material examples",
    "section": "Solutions",
    "text": "Solutions\nOne way to print only the top of the data frame is to use the head() function:\n\nsmokecancer |&gt; \n  head()\n\n      action     outcome\n1 non-smoker lung_cancer\n2 non-smoker lung_cancer\n3 non-smoker lung_cancer\n4 non-smoker lung_cancer\n5 non-smoker lung_cancer\n6 non-smoker lung_cancer\n\n\nAnother way to print only the top few rows is to change the object from a data.frame into a tibble (a tibble is like a data.frame but it has nice printing options). Note that one benefit of tibble() over head() is that the reader can see the size of the data frame (number of rows and columns).\n\nsmokecancer |&gt; \n  tibble()\n\n# A tibble: 120 × 2\n   action     outcome    \n   &lt;chr&gt;      &lt;chr&gt;      \n 1 non-smoker lung_cancer\n 2 non-smoker lung_cancer\n 3 non-smoker lung_cancer\n 4 non-smoker lung_cancer\n 5 non-smoker lung_cancer\n 6 non-smoker lung_cancer\n 7 non-smoker lung_cancer\n 8 non-smoker lung_cancer\n 9 non-smoker lung_cancer\n10 non-smoker lung_cancer\n# ℹ 110 more rows"
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#from-wide-to-long-and-long-to-wide",
    "href": "slides/2024-02-10-pivotjoin.html#from-wide-to-long-and-long-to-wide",
    "title": "Pivoting and Joining",
    "section": "From wide to long and long to wide",
    "text": "From wide to long and long to wide\n\npivot_longer() makes the data frame “longer” – many columns into a few columns (more rows):\n\npivot_longer(data,cols,names_to=,value_to=)\n\npivot_wider() makes the data frame “wider” – a few columns into many columns (fewer rows):\n\npivot_wider(data,names_from=,values_from=)"
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#from-wide-to-long-and-long-to-wide-1",
    "href": "slides/2024-02-10-pivotjoin.html#from-wide-to-long-and-long-to-wide-1",
    "title": "Pivoting and Joining",
    "section": "From wide to long and long to wide",
    "text": "From wide to long and long to wide"
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#pivot_longer",
    "href": "slides/2024-02-10-pivotjoin.html#pivot_longer",
    "title": "Pivoting and Joining",
    "section": "pivot_longer",
    "text": "pivot_longer\npivot_longer will be demonstrated using datasets from GapMinder.\nlitF represents country, year, and female literacy rate.\n\nlibrary(googlesheets4)\ngs4_deauth()\nlitF &lt;- read_sheet(\"https://docs.google.com/spreadsheets/d/1hDinTIRHQIaZg1RUn6Z_6mo12PtKwEPFIz_mJVF6P5I/pub?gid=0\")\n\nlitF\n\n# A tibble: 260 × 38\n   Adult (15+) literacy rate …¹ `1975` `1976` `1977` `1978` `1979` `1980` `1981`\n   &lt;chr&gt;                         &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;\n 1 Afghanistan                      NA     NA     NA     NA   4.99   NA       NA\n 2 Albania                          NA     NA     NA     NA  NA      NA       NA\n 3 Algeria                          NA     NA     NA     NA  NA      NA       NA\n 4 Andorra                          NA     NA     NA     NA  NA      NA       NA\n 5 Angola                           NA     NA     NA     NA  NA      NA       NA\n 6 Anguilla                         NA     NA     NA     NA  NA      NA       NA\n 7 Antigua and Barbuda              NA     NA     NA     NA  NA      NA       NA\n 8 Argentina                        NA     NA     NA     NA  NA      93.6     NA\n 9 Armenia                          NA     NA     NA     NA  NA      NA       NA\n10 Aruba                            NA     NA     NA     NA  NA      NA       NA\n# ℹ 250 more rows\n# ℹ abbreviated name: ¹​`Adult (15+) literacy rate (%). Female`\n# ℹ 30 more variables: `1982` &lt;dbl&gt;, `1983` &lt;dbl&gt;, `1984` &lt;dbl&gt;, `1985` &lt;dbl&gt;,\n#   `1986` &lt;dbl&gt;, `1987` &lt;dbl&gt;, `1988` &lt;dbl&gt;, `1989` &lt;dbl&gt;, `1990` &lt;dbl&gt;,\n#   `1991` &lt;dbl&gt;, `1992` &lt;dbl&gt;, `1993` &lt;dbl&gt;, `1994` &lt;dbl&gt;, `1995` &lt;dbl&gt;,\n#   `1996` &lt;dbl&gt;, `1997` &lt;dbl&gt;, `1998` &lt;dbl&gt;, `1999` &lt;dbl&gt;, `2000` &lt;dbl&gt;,\n#   `2001` &lt;dbl&gt;, `2002` &lt;dbl&gt;, `2003` &lt;dbl&gt;, `2004` &lt;dbl&gt;, `2005` &lt;dbl&gt;, …"
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#pivot_longer-1",
    "href": "slides/2024-02-10-pivotjoin.html#pivot_longer-1",
    "title": "Pivoting and Joining",
    "section": "pivot_longer",
    "text": "pivot_longer\n\nlitF &lt;- litF |&gt; \n  select(country = starts_with(\"Adult\"), everything()) |&gt; \n  pivot_longer(cols = -country,\n               names_to = \"year\", \n               values_to = \"litRateF\") |&gt; \n  filter(!is.na(litRateF))\n\nlitF\n\n# A tibble: 571 × 3\n   country     year  litRateF\n   &lt;chr&gt;       &lt;chr&gt;    &lt;dbl&gt;\n 1 Afghanistan 1979      4.99\n 2 Afghanistan 2011     13   \n 3 Albania     2001     98.3 \n 4 Albania     2008     94.7 \n 5 Albania     2011     95.7 \n 6 Algeria     1987     35.8 \n 7 Algeria     2002     60.1 \n 8 Algeria     2006     63.9 \n 9 Angola      2001     54.2 \n10 Angola      2011     58.6 \n# ℹ 561 more rows"
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#pivot_longer-2",
    "href": "slides/2024-02-10-pivotjoin.html#pivot_longer-2",
    "title": "Pivoting and Joining",
    "section": "pivot_longer",
    "text": "pivot_longer\nGDP represents country, year, and gdp (in fixed 2000 US$).\n\nGDP &lt;- read_sheet(\"https://docs.google.com/spreadsheets/d/1RctTQmKB0hzbm1E8rGcufYdMshRdhmYdeL29nXqmvsc/pub?gid=0\")\n\nGDP &lt;- GDP |&gt;  \n  select(country = starts_with(\"Income\"), everything()) |&gt; \n  pivot_longer(cols = -country, \n               names_to = \"year\",\n               values_to = \"gdp\") |&gt; \n  filter(!is.na(gdp))\n\nGDP\n\n# A tibble: 7,988 × 3\n   country year    gdp\n   &lt;chr&gt;   &lt;chr&gt; &lt;dbl&gt;\n 1 Albania 1980  1061.\n 2 Albania 1981  1100.\n 3 Albania 1982  1111.\n 4 Albania 1983  1101.\n 5 Albania 1984  1065.\n 6 Albania 1985  1060.\n 7 Albania 1986  1092.\n 8 Albania 1987  1054.\n 9 Albania 1988  1014.\n10 Albania 1989  1092.\n# ℹ 7,978 more rows"
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#pivot_wider",
    "href": "slides/2024-02-10-pivotjoin.html#pivot_wider",
    "title": "Pivoting and Joining",
    "section": "pivot_wider",
    "text": "pivot_wider\npivot_wider will be demonstrated using the babynames dataset.\n\nlibrary(babynames)\n\nbabynames\n\n# A tibble: 1,924,665 × 5\n    year sex   name          n   prop\n   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;int&gt;  &lt;dbl&gt;\n 1  1880 F     Mary       7065 0.0724\n 2  1880 F     Anna       2604 0.0267\n 3  1880 F     Emma       2003 0.0205\n 4  1880 F     Elizabeth  1939 0.0199\n 5  1880 F     Minnie     1746 0.0179\n 6  1880 F     Margaret   1578 0.0162\n 7  1880 F     Ida        1472 0.0151\n 8  1880 F     Alice      1414 0.0145\n 9  1880 F     Bertha     1320 0.0135\n10  1880 F     Sarah      1288 0.0132\n# ℹ 1,924,655 more rows"
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#pivot_wider-babynames",
    "href": "slides/2024-02-10-pivotjoin.html#pivot_wider-babynames",
    "title": "Pivoting and Joining",
    "section": "pivot_wider babynames",
    "text": "pivot_wider babynames\n\nbabynames |&gt;  \n  select(-prop) |&gt; \n  pivot_wider(names_from = sex, values_from = n) \n\n# A tibble: 1,756,284 × 4\n    year name          F     M\n   &lt;dbl&gt; &lt;chr&gt;     &lt;int&gt; &lt;int&gt;\n 1  1880 Mary       7065    27\n 2  1880 Anna       2604    12\n 3  1880 Emma       2003    10\n 4  1880 Elizabeth  1939     9\n 5  1880 Minnie     1746     9\n 6  1880 Margaret   1578    NA\n 7  1880 Ida        1472     8\n 8  1880 Alice      1414    NA\n 9  1880 Bertha     1320    NA\n10  1880 Sarah      1288    NA\n# ℹ 1,756,274 more rows"
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#pivot_wider-babynames-1",
    "href": "slides/2024-02-10-pivotjoin.html#pivot_wider-babynames-1",
    "title": "Pivoting and Joining",
    "section": "pivot_wider babynames",
    "text": "pivot_wider babynames\n\nbabynames |&gt;  \n  select(-prop) |&gt;  \n  pivot_wider(names_from = sex, values_from = n) |&gt; \n  filter(!is.na(F), !is.na(M)) |&gt; \n  arrange(desc(year), desc(F))\n\n# A tibble: 168,381 × 4\n    year name          F     M\n   &lt;dbl&gt; &lt;chr&gt;     &lt;int&gt; &lt;int&gt;\n 1  2017 Emma      19738    14\n 2  2017 Olivia    18632    10\n 3  2017 Ava       15902    12\n 4  2017 Isabella  15100    12\n 5  2017 Sophia    14831    17\n 6  2017 Mia       13437    16\n 7  2017 Charlotte 12893     7\n 8  2017 Amelia    11800    11\n 9  2017 Evelyn    10675    11\n10  2017 Abigail   10551     6\n# ℹ 168,371 more rows"
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#pivot_wider-babynames-2",
    "href": "slides/2024-02-10-pivotjoin.html#pivot_wider-babynames-2",
    "title": "Pivoting and Joining",
    "section": "pivot_wider babynames",
    "text": "pivot_wider babynames\n\nbabynames |&gt;  \n  pivot_wider(names_from = sex, values_from = n) |&gt; \n  mutate(maxcount = pmax(F, M, na.rm = TRUE)) |&gt; \n  arrange(desc(maxcount))\n\n# A tibble: 1,924,653 × 6\n    year name      prop     F     M maxcount\n   &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;\n 1  1947 Linda   0.0548 99686    NA    99686\n 2  1948 Linda   0.0552 96209    NA    96209\n 3  1947 James   0.0510    NA 94756    94756\n 4  1957 Michael 0.0424    NA 92695    92695\n 5  1947 Robert  0.0493    NA 91642    91642\n 6  1949 Linda   0.0518 91016    NA    91016\n 7  1956 Michael 0.0423    NA 90620    90620\n 8  1958 Michael 0.0420    NA 90520    90520\n 9  1948 James   0.0497    NA 88588    88588\n10  1954 Michael 0.0428    NA 88514    88514\n# ℹ 1,924,643 more rows"
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#relational-data-multiple-data-frames",
    "href": "slides/2024-02-10-pivotjoin.html#relational-data-multiple-data-frames",
    "title": "Pivoting and Joining",
    "section": "Relational data (multiple data frames)",
    "text": "Relational data (multiple data frames)\n\nSee the Posit cheatsheets on wrangling & joining and pivoting."
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#joining-two-or-more-data-frames",
    "href": "slides/2024-02-10-pivotjoin.html#joining-two-or-more-data-frames",
    "title": "Pivoting and Joining",
    "section": "Joining two (or more) data frames:",
    "text": "Joining two (or more) data frames:\n\nleft_join returns all rows from the left table, and any rows with matching keys from the right table.\ninner_join returns only the rows in which the left table have matching keys in the right table (i.e., matching rows in both sets).\nfull_join returns all rows from both tables, join records from the left which have matching keys in the right table.\n\nGood practice: always specify the by argument when joining data frames."
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#women-in-science",
    "href": "slides/2024-02-10-pivotjoin.html#women-in-science",
    "title": "Pivoting and Joining",
    "section": "Women in Science",
    "text": "Women in Science\n10 women in science who changed the world (source: Discover Magazine)1\n\n\n\n\n\nname\nprofession\n\n\n\n\nAda Lovelace\nMathematician\n\n\nMarie Curie\nPhysicist and Chemist\n\n\nJanaki Ammal\nBotanist\n\n\nChien-Shiung Wu\nPhysicist\n\n\nKatherine Johnson\nMathematician\n\n\nRosalind Franklin\nChemist\n\n\nVera Rubin\nAstronomer\n\n\nGladys West\nMathematician\n\n\nFlossie Wong-Staal\nVirologist and Molecular Biologist\n\n\nJennifer Doudna\nBiochemist\n\n\n\n\n\nExample from DataScience in a Box"
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#inputs",
    "href": "slides/2024-02-10-pivotjoin.html#inputs",
    "title": "Pivoting and Joining",
    "section": "Inputs",
    "text": "Inputs\n\nProfessionsDatesWorks\n\n\n\nprofessions\n\n# A tibble: 10 × 2\n   name               profession                        \n   &lt;chr&gt;              &lt;chr&gt;                             \n 1 Ada Lovelace       Mathematician                     \n 2 Marie Curie        Physicist and Chemist             \n 3 Janaki Ammal       Botanist                          \n 4 Chien-Shiung Wu    Physicist                         \n 5 Katherine Johnson  Mathematician                     \n 6 Rosalind Franklin  Chemist                           \n 7 Vera Rubin         Astronomer                        \n 8 Gladys West        Mathematician                     \n 9 Flossie Wong-Staal Virologist and Molecular Biologist\n10 Jennifer Doudna    Biochemist                        \n\n\n\n\n\ndates\n\n# A tibble: 8 × 3\n  name               birth_year death_year\n  &lt;chr&gt;                   &lt;dbl&gt;      &lt;dbl&gt;\n1 Janaki Ammal             1897       1984\n2 Chien-Shiung Wu          1912       1997\n3 Katherine Johnson        1918       2020\n4 Rosalind Franklin        1920       1958\n5 Vera Rubin               1928       2016\n6 Gladys West              1930         NA\n7 Flossie Wong-Staal       1947       2020\n8 Jennifer Doudna          1964         NA\n\n\n\n\n\nworks\n\n# A tibble: 9 × 2\n  name               known_for                                                  \n  &lt;chr&gt;              &lt;chr&gt;                                                      \n1 Ada Lovelace       first computer algorithm                                   \n2 Marie Curie        theory of radioactivity,  discovery of elements polonium a…\n3 Janaki Ammal       hybrid species, biodiversity protection                    \n4 Chien-Shiung Wu    confim and refine theory of radioactive beta decy, Wu expe…\n5 Katherine Johnson  calculations of orbital mechanics critical to sending the …\n6 Vera Rubin         existence of dark matter                                   \n7 Gladys West        mathematical modeling of the shape of the Earth which serv…\n8 Flossie Wong-Staal first scientist to clone HIV and create a map of its genes…\n9 Jennifer Doudna    one of the primary developers of CRISPR, a ground-breaking…"
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#desired-output",
    "href": "slides/2024-02-10-pivotjoin.html#desired-output",
    "title": "Pivoting and Joining",
    "section": "Desired output",
    "text": "Desired output\nWe’d like to put together the data to look like:\n\n\n# A tibble: 10 × 5\n   name               profession                 birth_year death_year known_for\n   &lt;chr&gt;              &lt;chr&gt;                           &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;    \n 1 Ada Lovelace       Mathematician                      NA         NA first co…\n 2 Marie Curie        Physicist and Chemist              NA         NA theory o…\n 3 Janaki Ammal       Botanist                         1897       1984 hybrid s…\n 4 Chien-Shiung Wu    Physicist                        1912       1997 confim a…\n 5 Katherine Johnson  Mathematician                    1918       2020 calculat…\n 6 Rosalind Franklin  Chemist                          1920       1958 &lt;NA&gt;     \n 7 Vera Rubin         Astronomer                       1928       2016 existenc…\n 8 Gladys West        Mathematician                    1930         NA mathemat…\n 9 Flossie Wong-Staal Virologist and Molecular …       1947       2020 first sc…\n10 Jennifer Doudna    Biochemist                       1964         NA one of t…"
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#inputs-reminder",
    "href": "slides/2024-02-10-pivotjoin.html#inputs-reminder",
    "title": "Pivoting and Joining",
    "section": "Inputs, reminder",
    "text": "Inputs, reminder\n\n\n\nnrow(professions)\n\n[1] 10\n\nnrow(dates)\n\n[1] 8\n\nnrow(works)\n\n[1] 9\n\n\n\n\nnames(professions)\n\n[1] \"name\"       \"profession\"\n\nnames(dates)\n\n[1] \"name\"       \"birth_year\" \"death_year\"\n\nnames(works)\n\n[1] \"name\"      \"known_for\""
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#setup",
    "href": "slides/2024-02-10-pivotjoin.html#setup",
    "title": "Pivoting and Joining",
    "section": "Setup",
    "text": "Setup\nFor the next few slides…\n\n\n\nx\n\n# A tibble: 3 × 2\n     id value_x\n  &lt;dbl&gt; &lt;chr&gt;  \n1     1 x1     \n2     2 x2     \n3     3 x3     \n\n\n\n\ny\n\n# A tibble: 3 × 2\n     id value_y\n  &lt;dbl&gt; &lt;chr&gt;  \n1     1 y1     \n2     2 y2     \n3     4 y4"
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#left_join",
    "href": "slides/2024-02-10-pivotjoin.html#left_join",
    "title": "Pivoting and Joining",
    "section": "left_join()",
    "text": "left_join()\n\n\n\n\n\n\n\nimage credit: https://www.garrickadenbuie.com/project/tidyexplain/\n\n\n\n\n\n\nleft_join(x, y, by = \"id\")\n\n# A tibble: 3 × 3\n     id value_x value_y\n  &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;  \n1     1 x1      y1     \n2     2 x2      y2     \n3     3 x3      &lt;NA&gt;"
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#left_join-1",
    "href": "slides/2024-02-10-pivotjoin.html#left_join-1",
    "title": "Pivoting and Joining",
    "section": "left_join()",
    "text": "left_join()\n\nprofessions |&gt; \n  left_join(dates, by = \"name\") \n\n# A tibble: 10 × 4\n   name               profession                         birth_year death_year\n   &lt;chr&gt;              &lt;chr&gt;                                   &lt;dbl&gt;      &lt;dbl&gt;\n 1 Ada Lovelace       Mathematician                              NA         NA\n 2 Marie Curie        Physicist and Chemist                      NA         NA\n 3 Janaki Ammal       Botanist                                 1897       1984\n 4 Chien-Shiung Wu    Physicist                                1912       1997\n 5 Katherine Johnson  Mathematician                            1918       2020\n 6 Rosalind Franklin  Chemist                                  1920       1958\n 7 Vera Rubin         Astronomer                               1928       2016\n 8 Gladys West        Mathematician                            1930         NA\n 9 Flossie Wong-Staal Virologist and Molecular Biologist       1947       2020\n10 Jennifer Doudna    Biochemist                               1964         NA"
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#right_join",
    "href": "slides/2024-02-10-pivotjoin.html#right_join",
    "title": "Pivoting and Joining",
    "section": "right_join()",
    "text": "right_join()\n\n\n\n\n\n\n\nimage credit: https://www.garrickadenbuie.com/project/tidyexplain/\n\n\n\n\n\n\nright_join(x, y, by = \"id\")\n\n# A tibble: 3 × 3\n     id value_x value_y\n  &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;  \n1     1 x1      y1     \n2     2 x2      y2     \n3     4 &lt;NA&gt;    y4"
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#right_join-1",
    "href": "slides/2024-02-10-pivotjoin.html#right_join-1",
    "title": "Pivoting and Joining",
    "section": "right_join()",
    "text": "right_join()\n\nprofessions |&gt; \n  right_join(dates, by = \"name\") \n\n# A tibble: 8 × 4\n  name               profession                         birth_year death_year\n  &lt;chr&gt;              &lt;chr&gt;                                   &lt;dbl&gt;      &lt;dbl&gt;\n1 Janaki Ammal       Botanist                                 1897       1984\n2 Chien-Shiung Wu    Physicist                                1912       1997\n3 Katherine Johnson  Mathematician                            1918       2020\n4 Rosalind Franklin  Chemist                                  1920       1958\n5 Vera Rubin         Astronomer                               1928       2016\n6 Gladys West        Mathematician                            1930         NA\n7 Flossie Wong-Staal Virologist and Molecular Biologist       1947       2020\n8 Jennifer Doudna    Biochemist                               1964         NA"
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#full_join",
    "href": "slides/2024-02-10-pivotjoin.html#full_join",
    "title": "Pivoting and Joining",
    "section": "full_join()",
    "text": "full_join()\n\n\n\n\n\n\n\nimage credit: https://www.garrickadenbuie.com/project/tidyexplain/\n\n\n\n\n\n\nfull_join(x, y, by = \"id\")\n\n# A tibble: 4 × 3\n     id value_x value_y\n  &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;  \n1     1 x1      y1     \n2     2 x2      y2     \n3     3 x3      &lt;NA&gt;   \n4     4 &lt;NA&gt;    y4"
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#full_join-1",
    "href": "slides/2024-02-10-pivotjoin.html#full_join-1",
    "title": "Pivoting and Joining",
    "section": "full_join()",
    "text": "full_join()\n\ndates |&gt; \n  full_join(works, by = \"name\") \n\n# A tibble: 10 × 4\n   name               birth_year death_year known_for                           \n   &lt;chr&gt;                   &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;                               \n 1 Janaki Ammal             1897       1984 hybrid species, biodiversity protec…\n 2 Chien-Shiung Wu          1912       1997 confim and refine theory of radioac…\n 3 Katherine Johnson        1918       2020 calculations of orbital mechanics c…\n 4 Rosalind Franklin        1920       1958 &lt;NA&gt;                                \n 5 Vera Rubin               1928       2016 existence of dark matter            \n 6 Gladys West              1930         NA mathematical modeling of the shape …\n 7 Flossie Wong-Staal       1947       2020 first scientist to clone HIV and cr…\n 8 Jennifer Doudna          1964         NA one of the primary developers of CR…\n 9 Ada Lovelace               NA         NA first computer algorithm            \n10 Marie Curie                NA         NA theory of radioactivity,  discovery…"
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#inner_join",
    "href": "slides/2024-02-10-pivotjoin.html#inner_join",
    "title": "Pivoting and Joining",
    "section": "inner_join()",
    "text": "inner_join()\n\n\n\n\n\n\n\nimage credit: https://www.garrickadenbuie.com/project/tidyexplain/\n\n\n\n\n\n\ninner_join(x, y, by = \"id\")\n\n# A tibble: 2 × 3\n     id value_x value_y\n  &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;  \n1     1 x1      y1     \n2     2 x2      y2"
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#inner_join-1",
    "href": "slides/2024-02-10-pivotjoin.html#inner_join-1",
    "title": "Pivoting and Joining",
    "section": "inner_join()",
    "text": "inner_join()\n\ndates |&gt; \n  inner_join(works, by = \"name\") \n\n# A tibble: 7 × 4\n  name               birth_year death_year known_for                            \n  &lt;chr&gt;                   &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;                                \n1 Janaki Ammal             1897       1984 hybrid species, biodiversity protect…\n2 Chien-Shiung Wu          1912       1997 confim and refine theory of radioact…\n3 Katherine Johnson        1918       2020 calculations of orbital mechanics cr…\n4 Vera Rubin               1928       2016 existence of dark matter             \n5 Gladys West              1930         NA mathematical modeling of the shape o…\n6 Flossie Wong-Staal       1947       2020 first scientist to clone HIV and cre…\n7 Jennifer Doudna          1964         NA one of the primary developers of CRI…"
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#semi_join",
    "href": "slides/2024-02-10-pivotjoin.html#semi_join",
    "title": "Pivoting and Joining",
    "section": "semi_join()",
    "text": "semi_join()\n\n\n\n\n\n\n\nimage credit: https://www.garrickadenbuie.com/project/tidyexplain/\n\n\n\n\n\n\nsemi_join(x, y, by = \"id\")\n\n# A tibble: 2 × 2\n     id value_x\n  &lt;dbl&gt; &lt;chr&gt;  \n1     1 x1     \n2     2 x2"
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#semi_join-1",
    "href": "slides/2024-02-10-pivotjoin.html#semi_join-1",
    "title": "Pivoting and Joining",
    "section": "semi_join()",
    "text": "semi_join()\n\ndates |&gt; \n  semi_join(works, by = \"name\") \n\n# A tibble: 7 × 3\n  name               birth_year death_year\n  &lt;chr&gt;                   &lt;dbl&gt;      &lt;dbl&gt;\n1 Janaki Ammal             1897       1984\n2 Chien-Shiung Wu          1912       1997\n3 Katherine Johnson        1918       2020\n4 Vera Rubin               1928       2016\n5 Gladys West              1930         NA\n6 Flossie Wong-Staal       1947       2020\n7 Jennifer Doudna          1964         NA"
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#anti_join",
    "href": "slides/2024-02-10-pivotjoin.html#anti_join",
    "title": "Pivoting and Joining",
    "section": "anti_join()",
    "text": "anti_join()\n\n\n\n\n\n\n\nimage credit: https://www.garrickadenbuie.com/project/tidyexplain/\n\n\n\n\n\n\nanti_join(x, y, by = \"id\")\n\n# A tibble: 1 × 2\n     id value_x\n  &lt;dbl&gt; &lt;chr&gt;  \n1     3 x3"
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#anti_join-1",
    "href": "slides/2024-02-10-pivotjoin.html#anti_join-1",
    "title": "Pivoting and Joining",
    "section": "anti_join()",
    "text": "anti_join()\n\ndates |&gt; \n  anti_join(works, by = \"name\") \n\n# A tibble: 1 × 3\n  name              birth_year death_year\n  &lt;chr&gt;                  &lt;dbl&gt;      &lt;dbl&gt;\n1 Rosalind Franklin       1920       1958"
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#putting-it-all-together",
    "href": "slides/2024-02-10-pivotjoin.html#putting-it-all-together",
    "title": "Pivoting and Joining",
    "section": "Putting it all together",
    "text": "Putting it all together\n\nprofessions |&gt; \n  left_join(dates, by = \"name\") |&gt; \n  left_join(works, by = \"name\")\n\n# A tibble: 10 × 5\n   name               profession                 birth_year death_year known_for\n   &lt;chr&gt;              &lt;chr&gt;                           &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;    \n 1 Ada Lovelace       Mathematician                      NA         NA first co…\n 2 Marie Curie        Physicist and Chemist              NA         NA theory o…\n 3 Janaki Ammal       Botanist                         1897       1984 hybrid s…\n 4 Chien-Shiung Wu    Physicist                        1912       1997 confim a…\n 5 Katherine Johnson  Mathematician                    1918       2020 calculat…\n 6 Rosalind Franklin  Chemist                          1920       1958 &lt;NA&gt;     \n 7 Vera Rubin         Astronomer                       1928       2016 existenc…\n 8 Gladys West        Mathematician                    1930         NA mathemat…\n 9 Flossie Wong-Staal Virologist and Molecular …       1947       2020 first sc…\n10 Jennifer Doudna    Biochemist                       1964         NA one of t…"
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#practice-litf-and-gdp-from-gapminder.",
    "href": "slides/2024-02-10-pivotjoin.html#practice-litf-and-gdp-from-gapminder.",
    "title": "Pivoting and Joining",
    "section": "Practice litF and GDP from Gapminder.",
    "text": "Practice litF and GDP from Gapminder."
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#left",
    "href": "slides/2024-02-10-pivotjoin.html#left",
    "title": "Pivoting and Joining",
    "section": "left",
    "text": "left\n\nlitGDPleft &lt;- left_join(litF, GDP, by=c(\"country\", \"year\"))\ndim(litGDPleft)\n\n[1] 571   4\n\nlitGDPleft\n\n# A tibble: 571 × 4\n   country     year  litRateF   gdp\n   &lt;chr&gt;       &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;\n 1 Afghanistan 1979      4.99   NA \n 2 Afghanistan 2011     13      NA \n 3 Albania     2001     98.3  1282.\n 4 Albania     2008     94.7  1804.\n 5 Albania     2011     95.7  1966.\n 6 Algeria     1987     35.8  1902.\n 7 Algeria     2002     60.1  1872.\n 8 Algeria     2006     63.9  2125.\n 9 Angola      2001     54.2   298.\n10 Angola      2011     58.6   630.\n# ℹ 561 more rows"
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#right",
    "href": "slides/2024-02-10-pivotjoin.html#right",
    "title": "Pivoting and Joining",
    "section": "right",
    "text": "right\n\nlitGDPright &lt;- right_join(litF, GDP, by=c(\"country\", \"year\"))\ndim(litGDPright)\n\n[1] 7988    4\n\nlitGDPright\n\n# A tibble: 7,988 × 4\n   country             year  litRateF   gdp\n   &lt;chr&gt;               &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;\n 1 Albania             2001      98.3 1282.\n 2 Albania             2008      94.7 1804.\n 3 Albania             2011      95.7 1966.\n 4 Algeria             1987      35.8 1902.\n 5 Algeria             2002      60.1 1872.\n 6 Algeria             2006      63.9 2125.\n 7 Angola              2001      54.2  298.\n 8 Angola              2011      58.6  630.\n 9 Antigua and Barbuda 2001      99.4 9640.\n10 Antigua and Barbuda 2011      99.4 9978.\n# ℹ 7,978 more rows"
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#inner",
    "href": "slides/2024-02-10-pivotjoin.html#inner",
    "title": "Pivoting and Joining",
    "section": "inner",
    "text": "inner\n\nlitGDPinner &lt;- inner_join(litF, GDP, by=c(\"country\", \"year\"))\ndim(litGDPinner)\n\n[1] 505   4\n\nlitGDPinner\n\n# A tibble: 505 × 4\n   country             year  litRateF   gdp\n   &lt;chr&gt;               &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;\n 1 Albania             2001      98.3 1282.\n 2 Albania             2008      94.7 1804.\n 3 Albania             2011      95.7 1966.\n 4 Algeria             1987      35.8 1902.\n 5 Algeria             2002      60.1 1872.\n 6 Algeria             2006      63.9 2125.\n 7 Angola              2001      54.2  298.\n 8 Angola              2011      58.6  630.\n 9 Antigua and Barbuda 2001      99.4 9640.\n10 Antigua and Barbuda 2011      99.4 9978.\n# ℹ 495 more rows"
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#full",
    "href": "slides/2024-02-10-pivotjoin.html#full",
    "title": "Pivoting and Joining",
    "section": "full",
    "text": "full\n\nlitGDPfull &lt;- full_join(litF, GDP, by=c(\"country\", \"year\"))\ndim(litGDPfull)\n\n[1] 8054    4\n\nlitGDPfull\n\n# A tibble: 8,054 × 4\n   country     year  litRateF   gdp\n   &lt;chr&gt;       &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;\n 1 Afghanistan 1979      4.99   NA \n 2 Afghanistan 2011     13      NA \n 3 Albania     2001     98.3  1282.\n 4 Albania     2008     94.7  1804.\n 5 Albania     2011     95.7  1966.\n 6 Algeria     1987     35.8  1902.\n 7 Algeria     2002     60.1  1872.\n 8 Algeria     2006     63.9  2125.\n 9 Angola      2001     54.2   298.\n10 Angola      2011     58.6   630.\n# ℹ 8,044 more rows"
  },
  {
    "objectID": "slides/2024-02-10-pivotjoin.html#join-to-merge-two-datasets",
    "href": "slides/2024-02-10-pivotjoin.html#join-to-merge-two-datasets",
    "title": "Pivoting and Joining",
    "section": "join to merge two datasets",
    "text": "join to merge two datasets\n\nIf you ever need to understand which join is the right join for you, try to find an image that will lay out what the function is doing. I found this one that is quite good and is taken from the Statistics Globe blog."
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#from-wide-to-long-and-long-to-wide",
    "href": "slides/2025-02-10-pivotjoin.html#from-wide-to-long-and-long-to-wide",
    "title": "Pivoting and Joining",
    "section": "From wide to long and long to wide",
    "text": "From wide to long and long to wide\n\npivot_longer() makes the data frame “longer” – many columns into a few columns (more rows):\n\npivot_longer(data,cols,names_to=,value_to=)\n\npivot_wider() makes the data frame “wider” – a few columns into many columns (fewer rows):\n\npivot_wider(data,names_from=,values_from=)"
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#from-wide-to-long-and-long-to-wide-1",
    "href": "slides/2025-02-10-pivotjoin.html#from-wide-to-long-and-long-to-wide-1",
    "title": "Pivoting and Joining",
    "section": "From wide to long and long to wide",
    "text": "From wide to long and long to wide"
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#pivot_longer",
    "href": "slides/2025-02-10-pivotjoin.html#pivot_longer",
    "title": "Pivoting and Joining",
    "section": "pivot_longer",
    "text": "pivot_longer\npivot_longer will be demonstrated using datasets from GapMinder.\nlitF represents country, year, and female literacy rate.\n\nlibrary(googlesheets4)\ngs4_deauth()\nlitF &lt;- read_sheet(\"https://docs.google.com/spreadsheets/d/1hDinTIRHQIaZg1RUn6Z_6mo12PtKwEPFIz_mJVF6P5I/pub?gid=0\")\n\nlitF\n\n# A tibble: 260 × 38\n   Adult (15+) literacy ra…¹ `1975` `1976` `1977` `1978` `1979` `1980`\n   &lt;chr&gt;                      &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;\n 1 Afghanistan                   NA     NA     NA     NA   4.99   NA  \n 2 Albania                       NA     NA     NA     NA  NA      NA  \n 3 Algeria                       NA     NA     NA     NA  NA      NA  \n 4 Andorra                       NA     NA     NA     NA  NA      NA  \n 5 Angola                        NA     NA     NA     NA  NA      NA  \n 6 Anguilla                      NA     NA     NA     NA  NA      NA  \n 7 Antigua and Barbuda           NA     NA     NA     NA  NA      NA  \n 8 Argentina                     NA     NA     NA     NA  NA      93.6\n 9 Armenia                       NA     NA     NA     NA  NA      NA  \n10 Aruba                         NA     NA     NA     NA  NA      NA  \n# ℹ 250 more rows\n# ℹ abbreviated name: ¹​`Adult (15+) literacy rate (%). Female`\n# ℹ 31 more variables: `1981` &lt;dbl&gt;, `1982` &lt;dbl&gt;, `1983` &lt;dbl&gt;,\n#   `1984` &lt;dbl&gt;, `1985` &lt;dbl&gt;, `1986` &lt;dbl&gt;, `1987` &lt;dbl&gt;,\n#   `1988` &lt;dbl&gt;, `1989` &lt;dbl&gt;, `1990` &lt;dbl&gt;, `1991` &lt;dbl&gt;,\n#   `1992` &lt;dbl&gt;, `1993` &lt;dbl&gt;, `1994` &lt;dbl&gt;, `1995` &lt;dbl&gt;,\n#   `1996` &lt;dbl&gt;, `1997` &lt;dbl&gt;, `1998` &lt;dbl&gt;, `1999` &lt;dbl&gt;, …"
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#pivot_longer-1",
    "href": "slides/2025-02-10-pivotjoin.html#pivot_longer-1",
    "title": "Pivoting and Joining",
    "section": "pivot_longer",
    "text": "pivot_longer\n\nlitF &lt;- litF |&gt; \n  select(country = starts_with(\"Adult\"), everything()) |&gt; \n  pivot_longer(cols = -country,\n               names_to = \"year\", \n               values_to = \"litRateF\") |&gt; \n  filter(!is.na(litRateF))\n\nlitF \n\n# A tibble: 571 × 3\n   country     year  litRateF\n   &lt;chr&gt;       &lt;chr&gt;    &lt;dbl&gt;\n 1 Afghanistan 1979      4.99\n 2 Afghanistan 2011     13   \n 3 Albania     2001     98.3 \n 4 Albania     2008     94.7 \n 5 Albania     2011     95.7 \n 6 Algeria     1987     35.8 \n 7 Algeria     2002     60.1 \n 8 Algeria     2006     63.9 \n 9 Angola      2001     54.2 \n10 Angola      2011     58.6 \n# ℹ 561 more rows"
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#pivot_longer-2",
    "href": "slides/2025-02-10-pivotjoin.html#pivot_longer-2",
    "title": "Pivoting and Joining",
    "section": "pivot_longer",
    "text": "pivot_longer\nGDP represents country, year, and gdp (in fixed 2000 US$).\n\nGDP &lt;- read_sheet(\"https://docs.google.com/spreadsheets/d/1RctTQmKB0hzbm1E8rGcufYdMshRdhmYdeL29nXqmvsc/pub?gid=0\")\n\nGDP &lt;- GDP |&gt;  \n  select(country = starts_with(\"Income\"), everything()) |&gt; \n  pivot_longer(cols = -country, \n               names_to = \"year\",\n               values_to = \"gdp\") |&gt; \n  filter(!is.na(gdp))\n\nGDP\n\n# A tibble: 7,988 × 3\n   country year    gdp\n   &lt;chr&gt;   &lt;chr&gt; &lt;dbl&gt;\n 1 Albania 1980  1061.\n 2 Albania 1981  1100.\n 3 Albania 1982  1111.\n 4 Albania 1983  1101.\n 5 Albania 1984  1065.\n 6 Albania 1985  1060.\n 7 Albania 1986  1092.\n 8 Albania 1987  1054.\n 9 Albania 1988  1014.\n10 Albania 1989  1092.\n# ℹ 7,978 more rows"
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#pivot_wider",
    "href": "slides/2025-02-10-pivotjoin.html#pivot_wider",
    "title": "Pivoting and Joining",
    "section": "pivot_wider",
    "text": "pivot_wider\npivot_wider will be demonstrated using the babynames dataset.\n\nlibrary(babynames)\n\nbabynames\n\n# A tibble: 1,924,665 × 5\n    year sex   name          n   prop\n   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;int&gt;  &lt;dbl&gt;\n 1  1880 F     Mary       7065 0.0724\n 2  1880 F     Anna       2604 0.0267\n 3  1880 F     Emma       2003 0.0205\n 4  1880 F     Elizabeth  1939 0.0199\n 5  1880 F     Minnie     1746 0.0179\n 6  1880 F     Margaret   1578 0.0162\n 7  1880 F     Ida        1472 0.0151\n 8  1880 F     Alice      1414 0.0145\n 9  1880 F     Bertha     1320 0.0135\n10  1880 F     Sarah      1288 0.0132\n# ℹ 1,924,655 more rows"
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#pivot_wider-babynames",
    "href": "slides/2025-02-10-pivotjoin.html#pivot_wider-babynames",
    "title": "Pivoting and Joining",
    "section": "pivot_wider babynames",
    "text": "pivot_wider babynames\n\nbabynames |&gt;  \n  select(-prop) |&gt; \n  pivot_wider(names_from = sex, values_from = n) \n\n# A tibble: 1,756,284 × 4\n    year name          F     M\n   &lt;dbl&gt; &lt;chr&gt;     &lt;int&gt; &lt;int&gt;\n 1  1880 Mary       7065    27\n 2  1880 Anna       2604    12\n 3  1880 Emma       2003    10\n 4  1880 Elizabeth  1939     9\n 5  1880 Minnie     1746     9\n 6  1880 Margaret   1578    NA\n 7  1880 Ida        1472     8\n 8  1880 Alice      1414    NA\n 9  1880 Bertha     1320    NA\n10  1880 Sarah      1288    NA\n# ℹ 1,756,274 more rows"
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#pivot_wider-babynames-1",
    "href": "slides/2025-02-10-pivotjoin.html#pivot_wider-babynames-1",
    "title": "Pivoting and Joining",
    "section": "pivot_wider babynames",
    "text": "pivot_wider babynames\n\nbabynames |&gt;  \n  select(-prop) |&gt;  \n  pivot_wider(names_from = sex, values_from = n) |&gt; \n  filter(!is.na(F), !is.na(M)) |&gt; \n  arrange(desc(year), desc(F))\n\n# A tibble: 168,381 × 4\n    year name          F     M\n   &lt;dbl&gt; &lt;chr&gt;     &lt;int&gt; &lt;int&gt;\n 1  2017 Emma      19738    14\n 2  2017 Olivia    18632    10\n 3  2017 Ava       15902    12\n 4  2017 Isabella  15100    12\n 5  2017 Sophia    14831    17\n 6  2017 Mia       13437    16\n 7  2017 Charlotte 12893     7\n 8  2017 Amelia    11800    11\n 9  2017 Evelyn    10675    11\n10  2017 Abigail   10551     6\n# ℹ 168,371 more rows"
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#pivot_wider-babynames-2",
    "href": "slides/2025-02-10-pivotjoin.html#pivot_wider-babynames-2",
    "title": "Pivoting and Joining",
    "section": "pivot_wider babynames",
    "text": "pivot_wider babynames\n\nbabynames |&gt;  \n  pivot_wider(names_from = sex, values_from = n) |&gt; \n  mutate(maxcount = pmax(F, M, na.rm = TRUE)) |&gt; \n  arrange(desc(maxcount))\n\n# A tibble: 1,924,653 × 6\n    year name      prop     F     M maxcount\n   &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;\n 1  1947 Linda   0.0548 99686    NA    99686\n 2  1948 Linda   0.0552 96209    NA    96209\n 3  1947 James   0.0510    NA 94756    94756\n 4  1957 Michael 0.0424    NA 92695    92695\n 5  1947 Robert  0.0493    NA 91642    91642\n 6  1949 Linda   0.0518 91016    NA    91016\n 7  1956 Michael 0.0423    NA 90620    90620\n 8  1958 Michael 0.0420    NA 90520    90520\n 9  1948 James   0.0497    NA 88588    88588\n10  1954 Michael 0.0428    NA 88514    88514\n# ℹ 1,924,643 more rows"
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#relational-data-multiple-data-frames",
    "href": "slides/2025-02-10-pivotjoin.html#relational-data-multiple-data-frames",
    "title": "Pivoting and Joining",
    "section": "Relational data (multiple data frames)",
    "text": "Relational data (multiple data frames)\n\nSee the Posit cheatsheets on wrangling & joining and pivoting."
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#joining-two-or-more-data-frames",
    "href": "slides/2025-02-10-pivotjoin.html#joining-two-or-more-data-frames",
    "title": "Pivoting and Joining",
    "section": "Joining two (or more) data frames:",
    "text": "Joining two (or more) data frames:\n\nleft_join returns all rows from the left table, and any rows with matching keys from the right table.\ninner_join returns only the rows in which the left table have matching keys in the right table (i.e., matching rows in both sets).\nfull_join returns all rows from both tables, join records from the left which have matching keys in the right table.\n\nGood practice: always specify the by argument when joining data frames."
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#women-in-science",
    "href": "slides/2025-02-10-pivotjoin.html#women-in-science",
    "title": "Pivoting and Joining",
    "section": "Women in Science",
    "text": "Women in Science\n10 women in science who changed the world (source: Discover Magazine)1\n\n\n\n\n\nname\nprofession\n\n\n\n\nAda Lovelace\nMathematician\n\n\nMarie Curie\nPhysicist and Chemist\n\n\nJanaki Ammal\nBotanist\n\n\nChien-Shiung Wu\nPhysicist\n\n\nKatherine Johnson\nMathematician\n\n\nRosalind Franklin\nChemist\n\n\nVera Rubin\nAstronomer\n\n\nGladys West\nMathematician\n\n\nFlossie Wong-Staal\nVirologist and Molecular Biologist\n\n\nJennifer Doudna\nBiochemist\n\n\n\n\n\nExample from DataScience in a Box"
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#inputs",
    "href": "slides/2025-02-10-pivotjoin.html#inputs",
    "title": "Pivoting and Joining",
    "section": "Inputs",
    "text": "Inputs\n\nProfessionsDatesWorks\n\n\n\nprofessions\n\n# A tibble: 10 × 2\n   name               profession                        \n   &lt;chr&gt;              &lt;chr&gt;                             \n 1 Ada Lovelace       Mathematician                     \n 2 Marie Curie        Physicist and Chemist             \n 3 Janaki Ammal       Botanist                          \n 4 Chien-Shiung Wu    Physicist                         \n 5 Katherine Johnson  Mathematician                     \n 6 Rosalind Franklin  Chemist                           \n 7 Vera Rubin         Astronomer                        \n 8 Gladys West        Mathematician                     \n 9 Flossie Wong-Staal Virologist and Molecular Biologist\n10 Jennifer Doudna    Biochemist                        \n\n\n\n\n\ndates\n\n# A tibble: 8 × 3\n  name               birth_year death_year\n  &lt;chr&gt;                   &lt;dbl&gt;      &lt;dbl&gt;\n1 Janaki Ammal             1897       1984\n2 Chien-Shiung Wu          1912       1997\n3 Katherine Johnson        1918       2020\n4 Rosalind Franklin        1920       1958\n5 Vera Rubin               1928       2016\n6 Gladys West              1930         NA\n7 Flossie Wong-Staal       1947       2020\n8 Jennifer Doudna          1964         NA\n\n\n\n\n\nworks\n\n# A tibble: 9 × 2\n  name               known_for                                        \n  &lt;chr&gt;              &lt;chr&gt;                                            \n1 Ada Lovelace       first computer algorithm                         \n2 Marie Curie        theory of radioactivity,  discovery of elements …\n3 Janaki Ammal       hybrid species, biodiversity protection          \n4 Chien-Shiung Wu    confim and refine theory of radioactive beta dec…\n5 Katherine Johnson  calculations of orbital mechanics critical to se…\n6 Vera Rubin         existence of dark matter                         \n7 Gladys West        mathematical modeling of the shape of the Earth …\n8 Flossie Wong-Staal first scientist to clone HIV and create a map of…\n9 Jennifer Doudna    one of the primary developers of CRISPR, a groun…"
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#desired-output",
    "href": "slides/2025-02-10-pivotjoin.html#desired-output",
    "title": "Pivoting and Joining",
    "section": "Desired output",
    "text": "Desired output\nWe’d like to put together the data to look like:\n\n\n# A tibble: 10 × 5\n   name               profession       birth_year death_year known_for\n   &lt;chr&gt;              &lt;chr&gt;                 &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;    \n 1 Ada Lovelace       Mathematician            NA         NA first co…\n 2 Marie Curie        Physicist and C…         NA         NA theory o…\n 3 Janaki Ammal       Botanist               1897       1984 hybrid s…\n 4 Chien-Shiung Wu    Physicist              1912       1997 confim a…\n 5 Katherine Johnson  Mathematician          1918       2020 calculat…\n 6 Rosalind Franklin  Chemist                1920       1958 &lt;NA&gt;     \n 7 Vera Rubin         Astronomer             1928       2016 existenc…\n 8 Gladys West        Mathematician          1930         NA mathemat…\n 9 Flossie Wong-Staal Virologist and …       1947       2020 first sc…\n10 Jennifer Doudna    Biochemist             1964         NA one of t…"
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#inputs-reminder",
    "href": "slides/2025-02-10-pivotjoin.html#inputs-reminder",
    "title": "Pivoting and Joining",
    "section": "Inputs, reminder",
    "text": "Inputs, reminder\n\n\n\nnrow(professions)\n\n[1] 10\n\nnrow(dates)\n\n[1] 8\n\nnrow(works)\n\n[1] 9\n\n\n\n\nnames(professions)\n\n[1] \"name\"       \"profession\"\n\nnames(dates)\n\n[1] \"name\"       \"birth_year\" \"death_year\"\n\nnames(works)\n\n[1] \"name\"      \"known_for\""
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#setup",
    "href": "slides/2025-02-10-pivotjoin.html#setup",
    "title": "Pivoting and Joining",
    "section": "Setup",
    "text": "Setup\nFor the next few slides…\n\n\n\nx\n\n# A tibble: 3 × 2\n     id value_x\n  &lt;dbl&gt; &lt;chr&gt;  \n1     1 x1     \n2     2 x2     \n3     3 x3     \n\n\n\n\ny\n\n# A tibble: 3 × 2\n     id value_y\n  &lt;dbl&gt; &lt;chr&gt;  \n1     1 y1     \n2     2 y2     \n3     4 y4"
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#left_join",
    "href": "slides/2025-02-10-pivotjoin.html#left_join",
    "title": "Pivoting and Joining",
    "section": "left_join()",
    "text": "left_join()\n\n\n\n\n\n\n\nimage credit: https://www.garrickadenbuie.com/project/tidyexplain/\n\n\n\n\n\n\nleft_join(x, y, by = \"id\")\n\n# A tibble: 3 × 3\n     id value_x value_y\n  &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;  \n1     1 x1      y1     \n2     2 x2      y2     \n3     3 x3      &lt;NA&gt;"
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#left_join-1",
    "href": "slides/2025-02-10-pivotjoin.html#left_join-1",
    "title": "Pivoting and Joining",
    "section": "left_join()",
    "text": "left_join()\n\nprofessions |&gt; \n  left_join(dates, by = \"name\") \n\n# A tibble: 10 × 4\n   name               profession                 birth_year death_year\n   &lt;chr&gt;              &lt;chr&gt;                           &lt;dbl&gt;      &lt;dbl&gt;\n 1 Ada Lovelace       Mathematician                      NA         NA\n 2 Marie Curie        Physicist and Chemist              NA         NA\n 3 Janaki Ammal       Botanist                         1897       1984\n 4 Chien-Shiung Wu    Physicist                        1912       1997\n 5 Katherine Johnson  Mathematician                    1918       2020\n 6 Rosalind Franklin  Chemist                          1920       1958\n 7 Vera Rubin         Astronomer                       1928       2016\n 8 Gladys West        Mathematician                    1930         NA\n 9 Flossie Wong-Staal Virologist and Molecular …       1947       2020\n10 Jennifer Doudna    Biochemist                       1964         NA"
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#right_join",
    "href": "slides/2025-02-10-pivotjoin.html#right_join",
    "title": "Pivoting and Joining",
    "section": "right_join()",
    "text": "right_join()\n\n\n\n\n\n\n\nimage credit: https://www.garrickadenbuie.com/project/tidyexplain/\n\n\n\n\n\n\nright_join(x, y, by = \"id\")\n\n# A tibble: 3 × 3\n     id value_x value_y\n  &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;  \n1     1 x1      y1     \n2     2 x2      y2     \n3     4 &lt;NA&gt;    y4"
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#right_join-1",
    "href": "slides/2025-02-10-pivotjoin.html#right_join-1",
    "title": "Pivoting and Joining",
    "section": "right_join()",
    "text": "right_join()\n\nprofessions |&gt; \n  right_join(dates, by = \"name\") \n\n# A tibble: 8 × 4\n  name               profession                  birth_year death_year\n  &lt;chr&gt;              &lt;chr&gt;                            &lt;dbl&gt;      &lt;dbl&gt;\n1 Janaki Ammal       Botanist                          1897       1984\n2 Chien-Shiung Wu    Physicist                         1912       1997\n3 Katherine Johnson  Mathematician                     1918       2020\n4 Rosalind Franklin  Chemist                           1920       1958\n5 Vera Rubin         Astronomer                        1928       2016\n6 Gladys West        Mathematician                     1930         NA\n7 Flossie Wong-Staal Virologist and Molecular B…       1947       2020\n8 Jennifer Doudna    Biochemist                        1964         NA"
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#full_join",
    "href": "slides/2025-02-10-pivotjoin.html#full_join",
    "title": "Pivoting and Joining",
    "section": "full_join()",
    "text": "full_join()\n\n\n\n\n\n\n\nimage credit: https://www.garrickadenbuie.com/project/tidyexplain/\n\n\n\n\n\n\nfull_join(x, y, by = \"id\")\n\n# A tibble: 4 × 3\n     id value_x value_y\n  &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;  \n1     1 x1      y1     \n2     2 x2      y2     \n3     3 x3      &lt;NA&gt;   \n4     4 &lt;NA&gt;    y4"
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#full_join-1",
    "href": "slides/2025-02-10-pivotjoin.html#full_join-1",
    "title": "Pivoting and Joining",
    "section": "full_join()",
    "text": "full_join()\n\ndates |&gt; \n  full_join(works, by = \"name\") \n\n# A tibble: 10 × 4\n   name               birth_year death_year known_for                 \n   &lt;chr&gt;                   &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;                     \n 1 Janaki Ammal             1897       1984 hybrid species, biodivers…\n 2 Chien-Shiung Wu          1912       1997 confim and refine theory …\n 3 Katherine Johnson        1918       2020 calculations of orbital m…\n 4 Rosalind Franklin        1920       1958 &lt;NA&gt;                      \n 5 Vera Rubin               1928       2016 existence of dark matter  \n 6 Gladys West              1930         NA mathematical modeling of …\n 7 Flossie Wong-Staal       1947       2020 first scientist to clone …\n 8 Jennifer Doudna          1964         NA one of the primary develo…\n 9 Ada Lovelace               NA         NA first computer algorithm  \n10 Marie Curie                NA         NA theory of radioactivity, …"
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#inner_join",
    "href": "slides/2025-02-10-pivotjoin.html#inner_join",
    "title": "Pivoting and Joining",
    "section": "inner_join()",
    "text": "inner_join()\n\n\n\n\n\n\n\nimage credit: https://www.garrickadenbuie.com/project/tidyexplain/\n\n\n\n\n\n\ninner_join(x, y, by = \"id\")\n\n# A tibble: 2 × 3\n     id value_x value_y\n  &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;  \n1     1 x1      y1     \n2     2 x2      y2"
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#inner_join-1",
    "href": "slides/2025-02-10-pivotjoin.html#inner_join-1",
    "title": "Pivoting and Joining",
    "section": "inner_join()",
    "text": "inner_join()\n\ndates |&gt; \n  inner_join(works, by = \"name\") \n\n# A tibble: 7 × 4\n  name               birth_year death_year known_for                  \n  &lt;chr&gt;                   &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;                      \n1 Janaki Ammal             1897       1984 hybrid species, biodiversi…\n2 Chien-Shiung Wu          1912       1997 confim and refine theory o…\n3 Katherine Johnson        1918       2020 calculations of orbital me…\n4 Vera Rubin               1928       2016 existence of dark matter   \n5 Gladys West              1930         NA mathematical modeling of t…\n6 Flossie Wong-Staal       1947       2020 first scientist to clone H…\n7 Jennifer Doudna          1964         NA one of the primary develop…"
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#semi_join",
    "href": "slides/2025-02-10-pivotjoin.html#semi_join",
    "title": "Pivoting and Joining",
    "section": "semi_join()",
    "text": "semi_join()\n\n\n\n\n\n\n\nimage credit: https://www.garrickadenbuie.com/project/tidyexplain/\n\n\n\n\n\n\nsemi_join(x, y, by = \"id\")\n\n# A tibble: 2 × 2\n     id value_x\n  &lt;dbl&gt; &lt;chr&gt;  \n1     1 x1     \n2     2 x2"
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#semi_join-1",
    "href": "slides/2025-02-10-pivotjoin.html#semi_join-1",
    "title": "Pivoting and Joining",
    "section": "semi_join()",
    "text": "semi_join()\n\ndates |&gt; \n  semi_join(works, by = \"name\") \n\n# A tibble: 7 × 3\n  name               birth_year death_year\n  &lt;chr&gt;                   &lt;dbl&gt;      &lt;dbl&gt;\n1 Janaki Ammal             1897       1984\n2 Chien-Shiung Wu          1912       1997\n3 Katherine Johnson        1918       2020\n4 Vera Rubin               1928       2016\n5 Gladys West              1930         NA\n6 Flossie Wong-Staal       1947       2020\n7 Jennifer Doudna          1964         NA"
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#anti_join",
    "href": "slides/2025-02-10-pivotjoin.html#anti_join",
    "title": "Pivoting and Joining",
    "section": "anti_join()",
    "text": "anti_join()\n\n\n\n\n\n\n\nimage credit: https://www.garrickadenbuie.com/project/tidyexplain/\n\n\n\n\n\n\nanti_join(x, y, by = \"id\")\n\n# A tibble: 1 × 2\n     id value_x\n  &lt;dbl&gt; &lt;chr&gt;  \n1     3 x3"
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#anti_join-1",
    "href": "slides/2025-02-10-pivotjoin.html#anti_join-1",
    "title": "Pivoting and Joining",
    "section": "anti_join()",
    "text": "anti_join()\n\ndates |&gt; \n  anti_join(works, by = \"name\") \n\n# A tibble: 1 × 3\n  name              birth_year death_year\n  &lt;chr&gt;                  &lt;dbl&gt;      &lt;dbl&gt;\n1 Rosalind Franklin       1920       1958"
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#putting-it-all-together",
    "href": "slides/2025-02-10-pivotjoin.html#putting-it-all-together",
    "title": "Pivoting and Joining",
    "section": "Putting it all together",
    "text": "Putting it all together\n\nprofessions |&gt; \n  left_join(dates, by = \"name\") |&gt; \n  left_join(works, by = \"name\")\n\n# A tibble: 10 × 5\n   name               profession       birth_year death_year known_for\n   &lt;chr&gt;              &lt;chr&gt;                 &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;    \n 1 Ada Lovelace       Mathematician            NA         NA first co…\n 2 Marie Curie        Physicist and C…         NA         NA theory o…\n 3 Janaki Ammal       Botanist               1897       1984 hybrid s…\n 4 Chien-Shiung Wu    Physicist              1912       1997 confim a…\n 5 Katherine Johnson  Mathematician          1918       2020 calculat…\n 6 Rosalind Franklin  Chemist                1920       1958 &lt;NA&gt;     \n 7 Vera Rubin         Astronomer             1928       2016 existenc…\n 8 Gladys West        Mathematician          1930         NA mathemat…\n 9 Flossie Wong-Staal Virologist and …       1947       2020 first sc…\n10 Jennifer Doudna    Biochemist             1964         NA one of t…"
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#practice-litf-and-gdp-from-gapminder.",
    "href": "slides/2025-02-10-pivotjoin.html#practice-litf-and-gdp-from-gapminder.",
    "title": "Pivoting and Joining",
    "section": "Practice litF and GDP from Gapminder.",
    "text": "Practice litF and GDP from Gapminder."
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#left",
    "href": "slides/2025-02-10-pivotjoin.html#left",
    "title": "Pivoting and Joining",
    "section": "left",
    "text": "left\n\nlitGDPleft &lt;- left_join(litF, GDP, by=c(\"country\", \"year\"))\ndim(litGDPleft)\n\n[1] 571   4\n\nlitGDPleft\n\n# A tibble: 571 × 4\n   country     year  litRateF   gdp\n   &lt;chr&gt;       &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;\n 1 Afghanistan 1979      4.99   NA \n 2 Afghanistan 2011     13      NA \n 3 Albania     2001     98.3  1282.\n 4 Albania     2008     94.7  1804.\n 5 Albania     2011     95.7  1966.\n 6 Algeria     1987     35.8  1902.\n 7 Algeria     2002     60.1  1872.\n 8 Algeria     2006     63.9  2125.\n 9 Angola      2001     54.2   298.\n10 Angola      2011     58.6   630.\n# ℹ 561 more rows"
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#right",
    "href": "slides/2025-02-10-pivotjoin.html#right",
    "title": "Pivoting and Joining",
    "section": "right",
    "text": "right\n\nlitGDPright &lt;- right_join(litF, GDP, by=c(\"country\", \"year\"))\ndim(litGDPright)\n\n[1] 7988    4\n\nlitGDPright\n\n# A tibble: 7,988 × 4\n   country             year  litRateF   gdp\n   &lt;chr&gt;               &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;\n 1 Albania             2001      98.3 1282.\n 2 Albania             2008      94.7 1804.\n 3 Albania             2011      95.7 1966.\n 4 Algeria             1987      35.8 1902.\n 5 Algeria             2002      60.1 1872.\n 6 Algeria             2006      63.9 2125.\n 7 Angola              2001      54.2  298.\n 8 Angola              2011      58.6  630.\n 9 Antigua and Barbuda 2001      99.4 9640.\n10 Antigua and Barbuda 2011      99.4 9978.\n# ℹ 7,978 more rows"
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#inner",
    "href": "slides/2025-02-10-pivotjoin.html#inner",
    "title": "Pivoting and Joining",
    "section": "inner",
    "text": "inner\n\nlitGDPinner &lt;- inner_join(litF, GDP, by=c(\"country\", \"year\"))\ndim(litGDPinner)\n\n[1] 505   4\n\nlitGDPinner\n\n# A tibble: 505 × 4\n   country             year  litRateF   gdp\n   &lt;chr&gt;               &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;\n 1 Albania             2001      98.3 1282.\n 2 Albania             2008      94.7 1804.\n 3 Albania             2011      95.7 1966.\n 4 Algeria             1987      35.8 1902.\n 5 Algeria             2002      60.1 1872.\n 6 Algeria             2006      63.9 2125.\n 7 Angola              2001      54.2  298.\n 8 Angola              2011      58.6  630.\n 9 Antigua and Barbuda 2001      99.4 9640.\n10 Antigua and Barbuda 2011      99.4 9978.\n# ℹ 495 more rows"
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#full",
    "href": "slides/2025-02-10-pivotjoin.html#full",
    "title": "Pivoting and Joining",
    "section": "full",
    "text": "full\n\nlitGDPfull &lt;- full_join(litF, GDP, by=c(\"country\", \"year\"))\ndim(litGDPfull)\n\n[1] 8054    4\n\nlitGDPfull\n\n# A tibble: 8,054 × 4\n   country     year  litRateF   gdp\n   &lt;chr&gt;       &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;\n 1 Afghanistan 1979      4.99   NA \n 2 Afghanistan 2011     13      NA \n 3 Albania     2001     98.3  1282.\n 4 Albania     2008     94.7  1804.\n 5 Albania     2011     95.7  1966.\n 6 Algeria     1987     35.8  1902.\n 7 Algeria     2002     60.1  1872.\n 8 Algeria     2006     63.9  2125.\n 9 Angola      2001     54.2   298.\n10 Angola      2011     58.6   630.\n# ℹ 8,044 more rows"
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#join-to-merge-two-datasets",
    "href": "slides/2025-02-10-pivotjoin.html#join-to-merge-two-datasets",
    "title": "Pivoting and Joining",
    "section": "join to merge two datasets",
    "text": "join to merge two datasets\n\nIf you ever need to understand which join is the right join for you, try to find an image that will lay out what the function is doing. I found this one that is quite good and is taken from the Statistics Globe blog."
  },
  {
    "objectID": "slides/2025-02-17-types.html#creating-strings",
    "href": "slides/2025-02-17-types.html#creating-strings",
    "title": "Variable Types",
    "section": "Creating strings",
    "text": "Creating strings\nCreating strings by hand is useful for testing out regular expressions.\nTo create a string, type any text in either double quotes \" or single quotes '. Using double or single quotes doesn’t matter unless your string itself has single or double quotes.\n\nstring1 &lt;- \"This is a string\"\nstring2 &lt;- 'If I want to include a \"quote\" inside a string, I use single quotes'\n\nstring1\n\n[1] \"This is a string\"\n\nstring2\n\n[1] \"If I want to include a \\\"quote\\\" inside a string, I use single quotes\""
  },
  {
    "objectID": "slides/2025-02-17-types.html#str_view",
    "href": "slides/2025-02-17-types.html#str_view",
    "title": "Variable Types",
    "section": "str_view()",
    "text": "str_view()\nWe can view these strings “naturally” (without the opening and closing quotes) with str_view():\n\nstr_view(string1)\n\n[1] │ This is a string\n\nstr_view(string2)\n\n[1] │ If I want to include a \"quote\" inside a string, I use single quotes"
  },
  {
    "objectID": "slides/2025-02-17-types.html#str_c",
    "href": "slides/2025-02-17-types.html#str_c",
    "title": "Variable Types",
    "section": "str_c",
    "text": "str_c\nSimilar to paste() (gluing strings together), but works well in a tidy pipeline.\n\ndf &lt;- tibble(name = c(\"Flora\", \"David\", \"Terra\", NA))\ndf |&gt; mutate(greeting = str_c(\"Hi \", name, \"!\"))\n\n# A tibble: 4 × 2\n  name  greeting \n  &lt;chr&gt; &lt;chr&gt;    \n1 Flora Hi Flora!\n2 David Hi David!\n3 Terra Hi Terra!\n4 &lt;NA&gt;  &lt;NA&gt;"
  },
  {
    "objectID": "slides/2025-02-17-types.html#str_sub",
    "href": "slides/2025-02-17-types.html#str_sub",
    "title": "Variable Types",
    "section": "str_sub()",
    "text": "str_sub()\nstr_sub(string, start, end) will extract parts of a string where start and end are the positions where the substring starts and ends.\n\nfruits &lt;- c(\"Apple\", \"Banana\", \"Pear\")\nstr_sub(fruits, 1, 3)\n\n[1] \"App\" \"Ban\" \"Pea\"\n\nstr_sub(fruits, -3, -1)\n\n[1] \"ple\" \"ana\" \"ear\"\n\n\nWon’t fail if the string is too short.\n\nstr_sub(fruits, 1, 5)\n\n[1] \"Apple\" \"Banan\" \"Pear\""
  },
  {
    "objectID": "slides/2025-02-17-types.html#str_sub-in-a-pipeline",
    "href": "slides/2025-02-17-types.html#str_sub-in-a-pipeline",
    "title": "Variable Types",
    "section": "str_sub() in a pipeline",
    "text": "str_sub() in a pipeline\nWe can use the str_*() functions inside the mutate() function.\n\ntitanic |&gt; \n  mutate(class1 = str_sub(Class, 1, 1))\n\n   Class    Sex   Age Survived Freq class1\n1    1st   Male Child       No    0      1\n2    2nd   Male Child       No    0      2\n3    3rd   Male Child       No   35      3\n4   Crew   Male Child       No    0      C\n5    1st Female Child       No    0      1\n6    2nd Female Child       No    0      2\n7    3rd Female Child       No   17      3\n8   Crew Female Child       No    0      C\n9    1st   Male Adult       No  118      1\n10   2nd   Male Adult       No  154      2\n11   3rd   Male Adult       No  387      3\n12  Crew   Male Adult       No  670      C\n13   1st Female Adult       No    4      1\n14   2nd Female Adult       No   13      2\n15   3rd Female Adult       No   89      3\n16  Crew Female Adult       No    3      C\n17   1st   Male Child      Yes    5      1\n18   2nd   Male Child      Yes   11      2\n19   3rd   Male Child      Yes   13      3\n20  Crew   Male Child      Yes    0      C\n21   1st Female Child      Yes    1      1\n22   2nd Female Child      Yes   13      2\n23   3rd Female Child      Yes   14      3\n24  Crew Female Child      Yes    0      C\n25   1st   Male Adult      Yes   57      1\n26   2nd   Male Adult      Yes   14      2\n27   3rd   Male Adult      Yes   75      3\n28  Crew   Male Adult      Yes  192      C\n29   1st Female Adult      Yes  140      1\n30   2nd Female Adult      Yes   80      2\n31   3rd Female Adult      Yes   76      3\n32  Crew Female Adult      Yes   20      C"
  },
  {
    "objectID": "slides/2025-02-17-types.html#str_replace",
    "href": "slides/2025-02-17-types.html#str_replace",
    "title": "Variable Types",
    "section": "str_replace*()",
    "text": "str_replace*()\nstr_replace() replaces the first match of a pattern. str_replace_all() replaces all the matches of a pattern.\n\nfruits\n\n[1] \"Apple\"  \"Banana\" \"Pear\"  \n\nstr_replace(fruits, \"a\", \"x\")\n\n[1] \"Apple\"  \"Bxnana\" \"Pexr\"  \n\nstr_replace_all(fruits, \"a\", \"x\")\n\n[1] \"Apple\"  \"Bxnxnx\" \"Pexr\""
  },
  {
    "objectID": "slides/2025-02-17-types.html#str_detect",
    "href": "slides/2025-02-17-types.html#str_detect",
    "title": "Variable Types",
    "section": "str_detect()",
    "text": "str_detect()\n\nfruits\n\n[1] \"Apple\"  \"Banana\" \"Pear\"  \n\nstr_detect(fruits, \"a\")\n\n[1] FALSE  TRUE  TRUE"
  },
  {
    "objectID": "slides/2025-02-17-types.html#str_detect-in-pipeline",
    "href": "slides/2025-02-17-types.html#str_detect-in-pipeline",
    "title": "Variable Types",
    "section": "str_detect() in pipeline",
    "text": "str_detect() in pipeline\nstr_detect() used in a filter() pipeline.\n\noriginal dataunnested datafiltered unnested data\n\n\n\nstarwars |&gt; \n  select(name, films) \n\n# A tibble: 87 × 2\n   name               films    \n   &lt;chr&gt;              &lt;list&gt;   \n 1 Luke Skywalker     &lt;chr [5]&gt;\n 2 C-3PO              &lt;chr [6]&gt;\n 3 R2-D2              &lt;chr [7]&gt;\n 4 Darth Vader        &lt;chr [4]&gt;\n 5 Leia Organa        &lt;chr [5]&gt;\n 6 Owen Lars          &lt;chr [3]&gt;\n 7 Beru Whitesun Lars &lt;chr [3]&gt;\n 8 R5-D4              &lt;chr [1]&gt;\n 9 Biggs Darklighter  &lt;chr [1]&gt;\n10 Obi-Wan Kenobi     &lt;chr [6]&gt;\n# ℹ 77 more rows\n\n\n\n\n\nstarwars |&gt; \n  select(name, films) |&gt; \n  unnest_wider(films, names_sep = \"\")\n\n# A tibble: 87 × 8\n   name               films1 films2 films3 films4 films5 films6 films7\n   &lt;chr&gt;              &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; \n 1 Luke Skywalker     A New… The E… Retur… Reven… The F… &lt;NA&gt;   &lt;NA&gt;  \n 2 C-3PO              A New… The E… Retur… The P… Attac… Reven… &lt;NA&gt;  \n 3 R2-D2              A New… The E… Retur… The P… Attac… Reven… The F…\n 4 Darth Vader        A New… The E… Retur… Reven… &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;  \n 5 Leia Organa        A New… The E… Retur… Reven… The F… &lt;NA&gt;   &lt;NA&gt;  \n 6 Owen Lars          A New… Attac… Reven… &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;  \n 7 Beru Whitesun Lars A New… Attac… Reven… &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;  \n 8 R5-D4              A New… &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;  \n 9 Biggs Darklighter  A New… &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;  \n10 Obi-Wan Kenobi     A New… The E… Retur… The P… Attac… Reven… &lt;NA&gt;  \n# ℹ 77 more rows\n\n\n\n\n\nstarwars |&gt; \n  filter(str_detect(films, \"Empire\")) |&gt; \n  select(name, films) |&gt; \n  unnest_wider(films, names_sep = \"\")\n\n# A tibble: 16 × 8\n   name             films1   films2 films3 films4 films5 films6 films7\n   &lt;chr&gt;            &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; \n 1 Luke Skywalker   A New H… The E… Retur… Reven… The F… &lt;NA&gt;   &lt;NA&gt;  \n 2 C-3PO            A New H… The E… Retur… The P… Attac… Reven… &lt;NA&gt;  \n 3 R2-D2            A New H… The E… Retur… The P… Attac… Reven… The F…\n 4 Darth Vader      A New H… The E… Retur… Reven… &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;  \n 5 Leia Organa      A New H… The E… Retur… Reven… The F… &lt;NA&gt;   &lt;NA&gt;  \n 6 Obi-Wan Kenobi   A New H… The E… Retur… The P… Attac… Reven… &lt;NA&gt;  \n 7 Chewbacca        A New H… The E… Retur… Reven… The F… &lt;NA&gt;   &lt;NA&gt;  \n 8 Han Solo         A New H… The E… Retur… The F… &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;  \n 9 Wedge Antilles   A New H… The E… Retur… &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;  \n10 Yoda             The Emp… Retur… The P… Attac… Reven… &lt;NA&gt;   &lt;NA&gt;  \n11 Palpatine        The Emp… Retur… The P… Attac… Reven… &lt;NA&gt;   &lt;NA&gt;  \n12 Boba Fett        The Emp… Retur… Attac… &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;  \n13 IG-88            The Emp… &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;  \n14 Bossk            The Emp… &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;  \n15 Lando Calrissian The Emp… Retur… &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;  \n16 Lobot            The Emp… &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;"
  },
  {
    "objectID": "slides/2025-02-17-types.html#stringr-functions",
    "href": "slides/2025-02-17-types.html#stringr-functions",
    "title": "Variable Types",
    "section": "stringr functions",
    "text": "stringr functions\nThe stringr package within tidyverse contains lots of functions to help process strings. Letting x be a string variable…\n\n\n\n\n\n\n\n\n\n\nstr function\narguments\nreturns\n\n\n\n\nstr_view()\nx\nthe string\n\n\nstr_c()\n…, sep, collapse\na new concatenated string\n\n\nstr_sub()\nx, start, end\na modified string\n\n\nstr_replace()\nx, pattern, replacement\na modified string\n\n\nstr_replace_all()\nx, pattern, replacement\na modified string\n\n\nstr_detect()\nx, pattern\nTRUE/FALSE\n\n\nstr_to_lower()\nx\na modified string\n\n\nstr_to_upper()\nx\na modified string\n\n\nstr_length()\nx\na number\n\n\n\n\n\nUse the stringr cheatsheet."
  },
  {
    "objectID": "slides/2025-02-17-types.html#where-do-we-order",
    "href": "slides/2025-02-17-types.html#where-do-we-order",
    "title": "Variable Types",
    "section": "Where do we order?",
    "text": "Where do we order?\nThe ordering of the factor variable is important in:\n\nplots (e.g., barplots)\ntables (e.g., group_by())\nmodeling (e.g., the baseline level in a linear regression)"
  },
  {
    "objectID": "slides/2025-02-17-types.html#order-matters",
    "href": "slides/2025-02-17-types.html#order-matters",
    "title": "Variable Types",
    "section": "Order matters",
    "text": "Order matters\nSurveyUSA poll from 2012 on views of the DREAM Act.\nWhat is off about the data viz part of the report?\n\nDataPlotLevels\n\n\n\nopenintro::dream\n\n# A tibble: 910 × 2\n   ideology     stance\n   &lt;fct&gt;        &lt;fct&gt; \n 1 Conservative Yes   \n 2 Conservative Yes   \n 3 Conservative Yes   \n 4 Conservative Yes   \n 5 Conservative Yes   \n 6 Conservative Yes   \n 7 Conservative Yes   \n 8 Conservative Yes   \n 9 Conservative Yes   \n10 Conservative Yes   \n# ℹ 900 more rows\n\n\n\n\n\ndream |&gt; \n  ggplot(aes(x = ideology, fill = stance)) + \n  geom_bar()\n\n\n\n\n\n\n\n\n\n\nThe levels() function reports the levels and their order.\n\ndream |&gt; \n  select(ideology) |&gt; \n  pull() |&gt;  # because levels() works only on vectors, not data frames\n  levels()\n\n[1] \"Conservative\" \"Liberal\"      \"Moderate\""
  },
  {
    "objectID": "slides/2025-02-17-types.html#change-the-order",
    "href": "slides/2025-02-17-types.html#change-the-order",
    "title": "Variable Types",
    "section": "Change the order",
    "text": "Change the order\nWe can fix the order of the ideology variable.\n\nCodePlot\n\n\n\ndream |&gt; \n  mutate(ideology = fct_relevel(ideology, \n                                c(\"Liberal\", \"Moderate\", \"Conservative\"))) |&gt; \n  ggplot(aes(x = ideology, fill = stance)) + \n  geom_bar()"
  },
  {
    "objectID": "slides/2025-02-17-types.html#factor-and-character-variables",
    "href": "slides/2025-02-17-types.html#factor-and-character-variables",
    "title": "Variable Types",
    "section": "Factor and character variables",
    "text": "Factor and character variables\n\nDataPlot\n\n\n\nstarbucks |&gt; \n  select(item, type, calories)\n\n# A tibble: 77 × 3\n   item                          type   calories\n   &lt;chr&gt;                         &lt;fct&gt;     &lt;int&gt;\n 1 \"8-Grain Roll\"                bakery      350\n 2 \"Apple Bran Muffin\"           bakery      350\n 3 \"Apple Fritter\"               bakery      420\n 4 \"Banana Nut Loaf\"             bakery      490\n 5 \"Birthday Cake Mini Doughnut\" bakery      130\n 6 \"Blueberry Oat Bar\"           bakery      370\n 7 \"Blueberry Scone\"             bakery      460\n 8 \"Bountiful Blueberry Muffin\"  bakery      370\n 9 \"Butter Croissant \"           bakery      310\n10 \"Cheese Danish\"               bakery      420\n# ℹ 67 more rows"
  },
  {
    "objectID": "slides/2025-02-17-types.html#reorder-according-to-another-variable",
    "href": "slides/2025-02-17-types.html#reorder-according-to-another-variable",
    "title": "Variable Types",
    "section": "Reorder according to another variable",
    "text": "Reorder according to another variable\nLets say that we wanted to order the type of food item based on the average number of calories in that food.\n\nCodePlotFor funzies\n\n\n\nstarbucks |&gt; \n  mutate(type = fct_reorder(type, calories, .fun = \"mean\", .desc = TRUE)) |&gt; \n  ggplot(aes(x = type, y = calories)) + \n  geom_point() + \n  labs(x = \"type of food\",\n       y = \"\",\n       title = \"Calories for food items at Starbucks\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nstarbucks |&gt; \n  mutate(type = fct_reorder(fiber, calories, .fun = \"mean\", .desc = TRUE)) \n\nError in `mutate()`:\nℹ In argument: `type = fct_reorder(fiber, calories, .fun = \"mean\", .desc\n  = TRUE)`.\nCaused by error in `fct_reorder()`:\n! `.f` must be a factor or character vector, not an integer vector."
  },
  {
    "objectID": "slides/2025-02-17-types.html#change-character-to-factor",
    "href": "slides/2025-02-17-types.html#change-character-to-factor",
    "title": "Variable Types",
    "section": "Change character to factor",
    "text": "Change character to factor\n\nOG dataNew factor\n\n\n\nstarbucks\n\n# A tibble: 77 × 7\n   item                       calories   fat  carb fiber protein type \n   &lt;chr&gt;                         &lt;int&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt;   &lt;int&gt; &lt;fct&gt;\n 1 \"8-Grain Roll\"                  350     8    67     5      10 bake…\n 2 \"Apple Bran Muffin\"             350     9    64     7       6 bake…\n 3 \"Apple Fritter\"                 420    20    59     0       5 bake…\n 4 \"Banana Nut Loaf\"               490    19    75     4       7 bake…\n 5 \"Birthday Cake Mini Dough…      130     6    17     0       0 bake…\n 6 \"Blueberry Oat Bar\"             370    14    47     5       6 bake…\n 7 \"Blueberry Scone\"               460    22    61     2       7 bake…\n 8 \"Bountiful Blueberry Muff…      370    14    55     0       6 bake…\n 9 \"Butter Croissant \"             310    18    32     0       5 bake…\n10 \"Cheese Danish\"                 420    25    39     0       7 bake…\n# ℹ 67 more rows\n\n\n\n\n\nstarbucks |&gt; \n  mutate(item = as.factor(item))\n\n# A tibble: 77 × 7\n   item                       calories   fat  carb fiber protein type \n   &lt;fct&gt;                         &lt;int&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt;   &lt;int&gt; &lt;fct&gt;\n 1 \"8-Grain Roll\"                  350     8    67     5      10 bake…\n 2 \"Apple Bran Muffin\"             350     9    64     7       6 bake…\n 3 \"Apple Fritter\"                 420    20    59     0       5 bake…\n 4 \"Banana Nut Loaf\"               490    19    75     4       7 bake…\n 5 \"Birthday Cake Mini Dough…      130     6    17     0       0 bake…\n 6 \"Blueberry Oat Bar\"             370    14    47     5       6 bake…\n 7 \"Blueberry Scone\"               460    22    61     2       7 bake…\n 8 \"Bountiful Blueberry Muff…      370    14    55     0       6 bake…\n 9 \"Butter Croissant \"             310    18    32     0       5 bake…\n10 \"Cheese Danish\"                 420    25    39     0       7 bake…\n# ℹ 67 more rows"
  },
  {
    "objectID": "slides/2025-02-17-types.html#forcats-functions",
    "href": "slides/2025-02-17-types.html#forcats-functions",
    "title": "Variable Types",
    "section": "forcats functions",
    "text": "forcats functions\nThe forcats package within tidyverse contains lots of functions to help process factor variables Use the forcats cheatsheet. We’ll focus on the most common functions.\n\nfunctions for changing the order of factor levels\n\nfct_relevel() = manually reorder levels\nfct_reorder() = reorder levels according to values of another variable\nfct_infreq() = order levels from highest to lowest frequency\nfct_rev() = reverse the current order\n\nfunctions for changing the labels or values of factor levels\n\nfct_recode() = manually change levels\nfct_lump() = group together least common levels\nfct_other() = manually replace some levels with “other”"
  },
  {
    "objectID": "slides/2025-02-17-types.html#formatting-time-variablse",
    "href": "slides/2025-02-17-types.html#formatting-time-variablse",
    "title": "Variable Types",
    "section": "Formatting time variablse",
    "text": "Formatting time variablse\n\nimage credit: https://xkcd.com/1179/"
  },
  {
    "objectID": "slides/2025-02-17-types.html#what-time-is-it",
    "href": "slides/2025-02-17-types.html#what-time-is-it",
    "title": "Variable Types",
    "section": "What time is it?",
    "text": "What time is it?\n\ntoday()\n\n[1] \"2025-02-19\"\n\nnow()\n\n[1] \"2025-02-19 10:27:20 PST\""
  },
  {
    "objectID": "slides/2025-02-17-types.html#creating-dates",
    "href": "slides/2025-02-17-types.html#creating-dates",
    "title": "Variable Types",
    "section": "Creating dates",
    "text": "Creating dates\nymd() and friends create dates\n\nymd(\"2025-02-19\")\n\n[1] \"2025-02-19\"\n\nmdy(\"February 19th, 2025\")\n\n[1] \"2025-02-19\"\n\ndmy(\"19-Feb-2025\")\n\n[1] \"2025-02-19\""
  },
  {
    "objectID": "slides/2025-02-17-types.html#with-times",
    "href": "slides/2025-02-17-types.html#with-times",
    "title": "Variable Types",
    "section": "… with times",
    "text": "… with times\nTo create a date-time, add an underscore and one or more of “h”, “m”, and “s” to the name of the parsing function:\n\nymd_hms(\"2025-02-19 11:45:59\", tz = \"America/Los_Angeles\")\n\n[1] \"2025-02-19 11:45:59 PST\"\n\nmdy_hm(\"02/19/2025 15:01\")  # default is UTC = GMT\n\n[1] \"2025-02-19 15:01:00 UTC\"\n\n\nMore information about time zones in R."
  },
  {
    "objectID": "slides/2025-02-17-types.html#lubridate",
    "href": "slides/2025-02-17-types.html#lubridate",
    "title": "Variable Types",
    "section": "lubridate",
    "text": "lubridate\nlubridate is a another R package meant for data wrangling!\nIn particular, lubridate makes it very easy to work with days, times, and dates. The base idea is to start with dates in a ymd (year month day) format and transform the information into whatever you want.\nExamples from the lubridate vignette."
  },
  {
    "objectID": "slides/2025-02-17-types.html#if-anyone-drove-a-time-machine-they-would-crash",
    "href": "slides/2025-02-17-types.html#if-anyone-drove-a-time-machine-they-would-crash",
    "title": "Variable Types",
    "section": "If anyone drove a time machine, they would crash",
    "text": "If anyone drove a time machine, they would crash\nThe length of months and years change so often that doing arithmetic with them can be unintuitive.\nConsider a simple operation: January 31st + one month."
  },
  {
    "objectID": "slides/2025-02-17-types.html#if-anyone-drove-a-time-machine-they-would-crash-1",
    "href": "slides/2025-02-17-types.html#if-anyone-drove-a-time-machine-they-would-crash-1",
    "title": "Variable Types",
    "section": "If anyone drove a time machine, they would crash",
    "text": "If anyone drove a time machine, they would crash\nThe length of months and years change so often that doing arithmetic with them can be unintuitive.\nConsider a simple operation: January 31st + one month.\nShould the answer be:\n\nFebruary 31st (which doesn’t exist)?\nMarch 3rd (31 days after January 31)?\nFebruary 28th (assuming its not a leap year)?"
  },
  {
    "objectID": "slides/2025-02-17-types.html#if-anyone-drove-a-time-machine-they-would-crash-2",
    "href": "slides/2025-02-17-types.html#if-anyone-drove-a-time-machine-they-would-crash-2",
    "title": "Variable Types",
    "section": "If anyone drove a time machine, they would crash",
    "text": "If anyone drove a time machine, they would crash\nA basic property of arithmetic is that a + b - b = a. Only solution 1 obeys the mathematical property, but it is an invalid date. Wickham wants to make lubridate as consistent as possible by invoking the following rule: if adding or subtracting a month or a year creates an invalid date, lubridate will return an NA. \nIf you thought solution 2 or 3 was more useful, no problem. You can still get those results with clever arithmetic, or by using the special %m+% and %m-% operators. %m+% and %m-% automatically roll dates back to the last day of the month, should that be necessary."
  },
  {
    "objectID": "slides/2025-02-17-types.html#basics-in-lubridate",
    "href": "slides/2025-02-17-types.html#basics-in-lubridate",
    "title": "Variable Types",
    "section": "basics in lubridate",
    "text": "basics in lubridate\n\nlibrary(lubridate)\nrightnow &lt;- now()\nrightnow\n\n[1] \"2025-02-19 10:27:20 PST\"\n\nday(rightnow)\n\n[1] 19\n\nweek(rightnow)\n\n[1] 8\n\nmonth(rightnow, label=FALSE)\n\n[1] 2\n\nmonth(rightnow, label=TRUE)\n\n[1] Feb\n12 Levels: Jan &lt; Feb &lt; Mar &lt; Apr &lt; May &lt; Jun &lt; Jul &lt; Aug &lt; Sep &lt; ... &lt; Dec\n\nyear(rightnow)\n\n[1] 2025"
  },
  {
    "objectID": "slides/2025-02-17-types.html#basics-in-lubridate-1",
    "href": "slides/2025-02-17-types.html#basics-in-lubridate-1",
    "title": "Variable Types",
    "section": "basics in lubridate",
    "text": "basics in lubridate\n\nminute(rightnow)\n\n[1] 27\n\nhour(rightnow)\n\n[1] 10\n\nyday(rightnow)\n\n[1] 50\n\nmday(rightnow)\n\n[1] 19\n\nwday(rightnow, label=FALSE)\n\n[1] 4\n\nwday(rightnow, label=TRUE)\n\n[1] Wed\nLevels: Sun &lt; Mon &lt; Tue &lt; Wed &lt; Thu &lt; Fri &lt; Sat"
  },
  {
    "objectID": "slides/2025-02-17-types.html#working-with-a-date-object",
    "href": "slides/2025-02-17-types.html#working-with-a-date-object",
    "title": "Variable Types",
    "section": "Working with a date object",
    "text": "Working with a date object\n\njan31 &lt;- ymd(\"2025-01-31\")\njan31 + months(0:11)\n\n [1] \"2025-01-31\" NA           \"2025-03-31\" NA           \"2025-05-31\"\n [6] NA           \"2025-07-31\" \"2025-08-31\" NA           \"2025-10-31\"\n[11] NA           \"2025-12-31\"\n\n\n\n\nfloor_date(jan31, \"month\")\n\n[1] \"2025-01-01\"\n\nfloor_date(jan31, \"month\") + months(0:11) + days(31)\n\n [1] \"2025-02-01\" \"2025-03-04\" \"2025-04-01\" \"2025-05-02\" \"2025-06-01\"\n [6] \"2025-07-02\" \"2025-08-01\" \"2025-09-01\" \"2025-10-02\" \"2025-11-01\"\n[11] \"2025-12-02\" \"2026-01-01\"\n\n\n\n\n\njan31 + months(0:11) + days(31)\n\n [1] \"2025-03-03\" NA           \"2025-05-01\" NA           \"2025-07-01\"\n [6] NA           \"2025-08-31\" \"2025-10-01\" NA           \"2025-12-01\"\n[11] NA           \"2026-01-31\"\n\n\n\n\n\njan31 %m+% months(0:11)\n\n [1] \"2025-01-31\" \"2025-02-28\" \"2025-03-31\" \"2025-04-30\" \"2025-05-31\"\n [6] \"2025-06-30\" \"2025-07-31\" \"2025-08-31\" \"2025-09-30\" \"2025-10-31\"\n[11] \"2025-11-30\" \"2025-12-31\""
  },
  {
    "objectID": "slides/2025-02-17-types.html#nyc-flights",
    "href": "slides/2025-02-17-types.html#nyc-flights",
    "title": "Variable Types",
    "section": "NYC flights",
    "text": "NYC flights\n\nlibrary(nycflights13)\nnames(flights)\n\n [1] \"year\"           \"month\"          \"day\"            \"dep_time\"      \n [5] \"sched_dep_time\" \"dep_delay\"      \"arr_time\"       \"sched_arr_time\"\n [9] \"arr_delay\"      \"carrier\"        \"flight\"         \"tailnum\"       \n[13] \"origin\"         \"dest\"           \"air_time\"       \"distance\"      \n[17] \"hour\"           \"minute\"         \"time_hour\""
  },
  {
    "objectID": "slides/2025-02-17-types.html#nyc-flights-1",
    "href": "slides/2025-02-17-types.html#nyc-flights-1",
    "title": "Variable Types",
    "section": "NYC flights",
    "text": "NYC flights\nCreating a date object from variables.\n\nflightsWK &lt;- flights |&gt;  \n   mutate(ymdday = ymd(str_c(year, month, day, sep=\"-\"))) |&gt; \n   mutate(weekdy = wday(ymdday, label=TRUE), \n          whichweek = week(ymdday)) \n\nflightsWK |&gt;  select(year, month, day, ymdday, weekdy, whichweek, \n                     dep_time, arr_time) \n\n# A tibble: 336,776 × 8\n    year month   day ymdday     weekdy whichweek dep_time arr_time\n   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;date&gt;     &lt;ord&gt;      &lt;dbl&gt;    &lt;int&gt;    &lt;int&gt;\n 1  2013     1     1 2013-01-01 Tue            1      517      830\n 2  2013     1     1 2013-01-01 Tue            1      533      850\n 3  2013     1     1 2013-01-01 Tue            1      542      923\n 4  2013     1     1 2013-01-01 Tue            1      544     1004\n 5  2013     1     1 2013-01-01 Tue            1      554      812\n 6  2013     1     1 2013-01-01 Tue            1      554      740\n 7  2013     1     1 2013-01-01 Tue            1      555      913\n 8  2013     1     1 2013-01-01 Tue            1      557      709\n 9  2013     1     1 2013-01-01 Tue            1      557      838\n10  2013     1     1 2013-01-01 Tue            1      558      753\n# ℹ 336,766 more rows"
  },
  {
    "objectID": "slides/2025-02-17-types.html#starbucks-data",
    "href": "slides/2025-02-17-types.html#starbucks-data",
    "title": "Variable Types",
    "section": "Starbucks data",
    "text": "Starbucks data\n\ndataon factoron numericon integers\n\n\n\nset.seed(47)\nstarbucks |&gt; \n  sample_n(10) |&gt; \n  select(item, calories, fat, type)\n\n# A tibble: 10 × 4\n   item                          calories   fat type    \n   &lt;chr&gt;                            &lt;int&gt; &lt;dbl&gt; &lt;fct&gt;   \n 1 \"Morning Bun\"                      350    16 bakery  \n 2 \"Red Velvet Whoopie Pie\"           190    11 petite  \n 3 \"Chonga Bagel\"                     310     5 bakery  \n 4 \"8-Grain Roll\"                     350     8 bakery  \n 5 \"Marshmallow Dream Bar\"            210     4 bakery  \n 6 \"Chocolate Croissant\"              300    17 bakery  \n 7 \"Mallorca Sweet Bread\"             420    25 bakery  \n 8 \"Ham & Swiss Panini\"               360     9 sandwich\n 9 \"Butter Croissant \"                310    18 bakery  \n10 \"Chocolate Creme Whoopie Pie\"      190    11 petite  \n\n\n\n\n\nset.seed(47)\nstarbucks |&gt; \n  sample_n(10) |&gt; \n  select(item, calories, fat, type) |&gt; \n  mutate(TYPE = str_to_upper(type))\n\n# A tibble: 10 × 5\n   item                          calories   fat type     TYPE    \n   &lt;chr&gt;                            &lt;int&gt; &lt;dbl&gt; &lt;fct&gt;    &lt;chr&gt;   \n 1 \"Morning Bun\"                      350    16 bakery   BAKERY  \n 2 \"Red Velvet Whoopie Pie\"           190    11 petite   PETITE  \n 3 \"Chonga Bagel\"                     310     5 bakery   BAKERY  \n 4 \"8-Grain Roll\"                     350     8 bakery   BAKERY  \n 5 \"Marshmallow Dream Bar\"            210     4 bakery   BAKERY  \n 6 \"Chocolate Croissant\"              300    17 bakery   BAKERY  \n 7 \"Mallorca Sweet Bread\"             420    25 bakery   BAKERY  \n 8 \"Ham & Swiss Panini\"               360     9 sandwich SANDWICH\n 9 \"Butter Croissant \"                310    18 bakery   BAKERY  \n10 \"Chocolate Creme Whoopie Pie\"      190    11 petite   PETITE  \n\n\n\n\n\nset.seed(47)\nstarbucks |&gt; \n  sample_n(10) |&gt; \n  select(item, calories, fat, type) |&gt; \n  filter(str_detect(fat, \"1\"))\n\n# A tibble: 5 × 4\n  item                          calories   fat type  \n  &lt;chr&gt;                            &lt;int&gt; &lt;dbl&gt; &lt;fct&gt; \n1 \"Morning Bun\"                      350    16 bakery\n2 \"Red Velvet Whoopie Pie\"           190    11 petite\n3 \"Chocolate Croissant\"              300    17 bakery\n4 \"Butter Croissant \"                310    18 bakery\n5 \"Chocolate Creme Whoopie Pie\"      190    11 petite\n\n\n\n\n\nset.seed(47)\nstarbucks |&gt; \n  sample_n(10) |&gt; \n  select(item, calories, fat, type) |&gt; \n  mutate(newcal = str_replace(calories, \"0\", \"&\"))\n\n# A tibble: 10 × 5\n   item                          calories   fat type     newcal\n   &lt;chr&gt;                            &lt;int&gt; &lt;dbl&gt; &lt;fct&gt;    &lt;chr&gt; \n 1 \"Morning Bun\"                      350    16 bakery   35&   \n 2 \"Red Velvet Whoopie Pie\"           190    11 petite   19&   \n 3 \"Chonga Bagel\"                     310     5 bakery   31&   \n 4 \"8-Grain Roll\"                     350     8 bakery   35&   \n 5 \"Marshmallow Dream Bar\"            210     4 bakery   21&   \n 6 \"Chocolate Croissant\"              300    17 bakery   3&0   \n 7 \"Mallorca Sweet Bread\"             420    25 bakery   42&   \n 8 \"Ham & Swiss Panini\"               360     9 sandwich 36&   \n 9 \"Butter Croissant \"                310    18 bakery   31&   \n10 \"Chocolate Creme Whoopie Pie\"      190    11 petite   19&"
  },
  {
    "objectID": "slides/2025-02-17-types.html#what-can-you-even-do-with-strings",
    "href": "slides/2025-02-17-types.html#what-can-you-even-do-with-strings",
    "title": "Variable Types",
    "section": "What can you even do with strings???",
    "text": "What can you even do with strings???\n\nyes, lots of code to learn\nno, the code doesn’t really matter\nlearning goal for today:\n\n\nwhat can you even do with string variables???"
  },
  {
    "objectID": "slides/2025-02-17-types.html#working-with-strings",
    "href": "slides/2025-02-17-types.html#working-with-strings",
    "title": "Variable Types",
    "section": "Working with strings",
    "text": "Working with strings\n\nyes, lots of code to learn\nno, the code doesn’t really matter\nlearning goal for today:\n\n\nwhat can you even do with string variables???"
  },
  {
    "objectID": "slides/2025-02-17-types.html#what-really-are-levels",
    "href": "slides/2025-02-17-types.html#what-really-are-levels",
    "title": "Variable Types",
    "section": "What really are levels?",
    "text": "What really are levels?\n\nrecoderewritemistakeNULLspecial variables\n\n\n\nx &lt;- factor(c(\"apple\", \"bear\", \"dear\", \"banana\"))\nx\n\n[1] apple  bear   dear   banana\nLevels: apple banana bear dear\n\nfct_recode(x, fruit = \"apple\", fruit = \"banana\")\n\n[1] fruit bear  dear  fruit\nLevels: fruit bear dear\n\n\n\n\n\ndata.frame(words = x) |&gt; \n  mutate(x_recode = fct_recode(words, fruit = \"apple\", fruit = \"banana\"),\n         x_rewrite = ifelse(words == \"apple\", \"fruit\",\n                            ifelse(words == \"banana\", \"fruit\", words))) |&gt; \n  str()\n\n'data.frame':   4 obs. of  3 variables:\n $ words    : Factor w/ 4 levels \"apple\",\"banana\",..: 1 3 4 2\n $ x_recode : Factor w/ 3 levels \"fruit\",\"bear\",..: 1 2 3 1\n $ x_rewrite: chr  \"fruit\" \"3\" \"4\" \"fruit\"\n\n\n\n\n\n# If you make a mistake you'll get a warning\nfct_recode(x, fruit = \"apple\", fruit = \"bananana\")\n\n[1] fruit  bear   dear   banana\nLevels: fruit banana bear dear\n\n\n\n\n\n# If you name the level NULL it will be removed\nfct_recode(x, NULL = \"apple\", fruit = \"banana\")\n\n[1] &lt;NA&gt;  bear  dear  fruit\nLevels: fruit bear dear\n\n\n\n\n\n# Wrap the left hand side in quotes if it contains special variables\nfct_recode(x, \"an apple\" = \"apple\", \"a bear\" = \"bear\")\n\n[1] an apple a bear   dear     banana  \nLevels: an apple banana a bear dear"
  },
  {
    "objectID": "slides/2025-02-24-regex.html#regular-expressions",
    "href": "slides/2025-02-24-regex.html#regular-expressions",
    "title": "Regular Expressions",
    "section": "Regular Expressions",
    "text": "Regular Expressions\n\nA regular expression … is a sequence of characters that define a search pattern. Usually such patterns are used by string searching algorithms for “find” or “find and replace” operations on strings, or for input validation. It is a technique developed in theoretical computer science and formal language theory."
  },
  {
    "objectID": "slides/2025-02-24-regex.html#escape-sequences",
    "href": "slides/2025-02-24-regex.html#escape-sequences",
    "title": "Regular Expressions",
    "section": "Escape sequences",
    "text": "Escape sequences\nJust to scratch the surface, here are a few special characters that cannot be directly coded. Therefore, they are escaped with a backslash, \\.\n\n\\': single quote.\n\n\\\": double quote.\n\n\\n: new line.\n\n\\r: carriage return.\n\n\\t: tab character."
  },
  {
    "objectID": "slides/2025-02-24-regex.html#quantifiers",
    "href": "slides/2025-02-24-regex.html#quantifiers",
    "title": "Regular Expressions",
    "section": "Quantifiers",
    "text": "Quantifiers\nQuantifiers specify how many repetitions of the pattern.\n\n*: matches at least 0 times.\n\n+: matches at least 1 times.\n\n?: matches at most 1 times.\n\n{n}: matches exactly n times.\n\n{n,}: matches at least n times.\n\n{n,m}: matches between n and m times."
  },
  {
    "objectID": "slides/2025-02-24-regex.html#examples-of-quantifiers",
    "href": "slides/2025-02-24-regex.html#examples-of-quantifiers",
    "title": "Regular Expressions",
    "section": "Examples of quantifiers",
    "text": "Examples of quantifiers\n\nstrings &lt;- c(\"a\", \"ab\", \"acb\", \"accb\", \"acccb\", \"accccb\")\nstr_subset(strings, \"ac*b\") \nstr_subset(strings, \"ac+b\") \nstr_subset(strings, \"ac*b\", negate = TRUE)\nstr_subset(strings, \"ac?b\") \nstr_subset(strings, \"ac{2}b\") \nstr_subset(strings, \"ac{2,}b\") \nstr_subset(strings, \"ac{2,3}b\")"
  },
  {
    "objectID": "slides/2025-02-24-regex.html#examples-of-quantifiers---solution",
    "href": "slides/2025-02-24-regex.html#examples-of-quantifiers---solution",
    "title": "Regular Expressions",
    "section": "Examples of quantifiers - solution",
    "text": "Examples of quantifiers - solution\n\nstrings &lt;- c(\"a\", \"ab\", \"acb\", \"accb\", \"acccb\", \"accccb\")\nstr_subset(strings, \"ac*b\") \n\n[1] \"ab\"     \"acb\"    \"accb\"   \"acccb\"  \"accccb\"\n\nstr_subset(strings, \"ac+b\") \n\n[1] \"acb\"    \"accb\"   \"acccb\"  \"accccb\"\n\nstr_subset(strings, \"ac*b\", negate = TRUE)\n\n[1] \"a\"\n\nstr_subset(strings, \"ac?b\") \n\n[1] \"ab\"  \"acb\"\n\nstr_subset(strings, \"ac{2}b\") \n\n[1] \"accb\"\n\nstr_subset(strings, \"ac{2,}b\") \n\n[1] \"accb\"   \"acccb\"  \"accccb\"\n\nstr_subset(strings, \"ac{2,3}b\")\n\n[1] \"accb\"  \"acccb\""
  },
  {
    "objectID": "slides/2025-02-24-regex.html#position-of-pattern-within-the-string",
    "href": "slides/2025-02-24-regex.html#position-of-pattern-within-the-string",
    "title": "Regular Expressions",
    "section": "Position of pattern within the string",
    "text": "Position of pattern within the string\n\n^: matches the start of the string.\n\n$: matches the end of the string.\n\n\\b: matches the boundary of a word. Don’t confuse it with ^ $ which marks the edge of a string.1\n\nA word boundary is a position between a word character (typically [A-Za-z0-9_]) and a non-word character (anything that is not a word character, such as whitespace, punctuation, etc.)."
  },
  {
    "objectID": "slides/2025-02-24-regex.html#examples-of-positions",
    "href": "slides/2025-02-24-regex.html#examples-of-positions",
    "title": "Regular Expressions",
    "section": "Examples of positions",
    "text": "Examples of positions\n\nstrings &lt;- c(\"abcd\", \"cdab\", \"cabd\", \"c abd\")\nstr_subset(strings, \"ab\")\nstr_subset(strings, \"^ab\")\nstr_subset(strings, \"ab$\")\nstr_subset(strings, \"\\\\bab\")"
  },
  {
    "objectID": "slides/2025-02-24-regex.html#examples-of-positions---solution",
    "href": "slides/2025-02-24-regex.html#examples-of-positions---solution",
    "title": "Regular Expressions",
    "section": "Examples of positions - solution",
    "text": "Examples of positions - solution\n\nstrings &lt;- c(\"abcd\", \"cdab\", \"cabd\", \"c abd\")\nstr_subset(strings, \"ab\")\n\n[1] \"abcd\"  \"cdab\"  \"cabd\"  \"c abd\"\n\nstr_subset(strings, \"^ab\")\n\n[1] \"abcd\"\n\nstr_subset(strings, \"ab$\")\n\n[1] \"cdab\"\n\nstr_subset(strings, \"\\\\bab\")\n\n[1] \"abcd\"  \"c abd\""
  },
  {
    "objectID": "slides/2025-02-24-regex.html#bounding-words-vs.-phrases",
    "href": "slides/2025-02-24-regex.html#bounding-words-vs.-phrases",
    "title": "Regular Expressions",
    "section": "Bounding words vs. phrases",
    "text": "Bounding words vs. phrases\n\nstrings &lt;- c(\"apple\", \"applet\", \"pineapple\", \"apple pie\",\n             \"I love apple pie\")\n\nstr_subset(strings, \"\\\\bapple\\\\b\")\nstr_subset(strings, \"^apple$\")\nstr_subset(strings, \"\\\\bapple pie\\\\b\")\nstr_subset(strings, \"^apple pie$\")"
  },
  {
    "objectID": "slides/2025-02-24-regex.html#bounding-words-vs.-phrases---solutions",
    "href": "slides/2025-02-24-regex.html#bounding-words-vs.-phrases---solutions",
    "title": "Regular Expressions",
    "section": "Bounding words vs. phrases - solutions",
    "text": "Bounding words vs. phrases - solutions\n\nstrings &lt;- c(\"apple\", \"applet\", \"pineapple\", \"apple pie\",\n             \"I love apple pie\")\n\nstr_subset(strings, \"\\\\bapple\\\\b\")\n\n[1] \"apple\"            \"apple pie\"        \"I love apple pie\"\n\nstr_subset(strings, \"^apple$\")\n\n[1] \"apple\"\n\nstr_subset(strings, \"\\\\bapple pie\\\\b\")\n\n[1] \"apple pie\"        \"I love apple pie\"\n\nstr_subset(strings, \"^apple pie$\")\n\n[1] \"apple pie\"\n\nstr_extract(strings, \"\\\\bapple\\\\b\")\n\n[1] \"apple\" NA      NA      \"apple\" \"apple\"\n\nstr_extract(strings, \"^apple$\")\n\n[1] \"apple\" NA      NA      NA      NA     \n\nstr_extract(strings, \"\\\\bapple pie\\\\b\")\n\n[1] NA          NA          NA          \"apple pie\" \"apple pie\"\n\nstr_extract(strings, \"^apple pie$\")\n\n[1] NA          NA          NA          \"apple pie\" NA"
  },
  {
    "objectID": "slides/2025-02-24-regex.html#operators",
    "href": "slides/2025-02-24-regex.html#operators",
    "title": "Regular Expressions",
    "section": "Operators",
    "text": "Operators\n\n.: matches any single character,\n[...]: a character list, matches any one of the characters inside the square brackets. A - inside the brackets specifies a range of characters.\n\n[^...]: an inverted character list, similar to [...], but matches any characters except those inside the square brackets.\n\n\\: suppress the special meaning of metacharacters in regular expression, i.e. $ * + . ? [ ] ^ { } | ( ) \\. Since \\ itself needs to be escaped in R, we need to escape metacharacters with double backslash like \\\\$.\n\n|: an “or” operator, matches patterns on either side of the |.\n\n(...): grouping in regular expressions. This allows you to retrieve the bits that matched various parts of your regular expression so you can alter them or use them for building up a new string.\nnote: both (ab|cde) or ab|cde match either the string ab or the string cde. However, ab | cde matches ab cde (and does not match either of ab or cde) because the “or” is now whitespace on either side of |."
  },
  {
    "objectID": "slides/2025-02-24-regex.html#examples-of-operators",
    "href": "slides/2025-02-24-regex.html#examples-of-operators",
    "title": "Regular Expressions",
    "section": "Examples of operators",
    "text": "Examples of operators\n\nstrings &lt;- c(\"^ab\", \"ab\", \"abc\", \"abd\", \"abe\", \"ab 12\", \"a|b\")\nstr_subset(strings, \"ab.\")\nstr_subset(strings, \"ab[c-e]\")\nstr_subset(strings, \"ab[^c]\")\nstr_subset(strings, \"^ab\")\nstr_subset(strings, \"\\\\^ab\")\nstr_subset(strings, \"abc|abd\")\nstr_subset(strings, \"ab|c\")\nstr_subset(strings, \"ab | c\")\nstr_subset(strings, \"(ab)|c\")\nstr_subset(strings, \"(ab|c)\")\nstr_subset(strings, \"a(b|c)\")\nstr_subset(strings, \"a[b|c]\")\nstr_extract(strings, \"a[b|c]\")"
  },
  {
    "objectID": "slides/2025-02-24-regex.html#examples-of-operators---solution",
    "href": "slides/2025-02-24-regex.html#examples-of-operators---solution",
    "title": "Regular Expressions",
    "section": "Examples of operators - solution1",
    "text": "Examples of operators - solution1\n\nstrings &lt;- c(\"^ab\", \"ab\", \"abc\", \"abd\", \"abe\", \"ab 12\", \"a|b\")\nstr_subset(strings, \"ab.\")\n\n[1] \"abc\"   \"abd\"   \"abe\"   \"ab 12\"\n\nstr_subset(strings, \"ab[c-e]\")\n\n[1] \"abc\" \"abd\" \"abe\"\n\nstr_subset(strings, \"ab[^c]\")\n\n[1] \"abd\"   \"abe\"   \"ab 12\"\n\nstr_subset(strings, \"^ab\")\n\n[1] \"ab\"    \"abc\"   \"abd\"   \"abe\"   \"ab 12\"\n\nstr_subset(strings, \"\\\\^ab\")\n\n[1] \"^ab\"\n\nstr_subset(strings, \"abc|abd\")\n\n[1] \"abc\" \"abd\"\n\nstr_subset(strings, \"ab|c\")\n\n[1] \"^ab\"   \"ab\"    \"abc\"   \"abd\"   \"abe\"   \"ab 12\"\n\nstr_subset(strings, \"ab | c\")\n\n[1] \"ab 12\"\n\nstr_subset(strings, \"(ab)|c\")\n\n[1] \"^ab\"   \"ab\"    \"abc\"   \"abd\"   \"abe\"   \"ab 12\"\n\nstr_subset(strings, \"(ab|c)\")\n\n[1] \"^ab\"   \"ab\"    \"abc\"   \"abd\"   \"abe\"   \"ab 12\"\n\nstr_subset(strings, \"a(b|c)\")\n\n[1] \"^ab\"   \"ab\"    \"abc\"   \"abd\"   \"abe\"   \"ab 12\"\n\nstr_subset(strings, \"a[b|c]\")\n\n[1] \"^ab\"   \"ab\"    \"abc\"   \"abd\"   \"abe\"   \"ab 12\" \"a|b\"  \n\nstr_extract(strings, \"a[b|c]\")\n\n[1] \"ab\" \"ab\" \"ab\" \"ab\" \"ab\" \"ab\" \"a|\"\n\n\nit turns out that “ab|c” and “(ab)|c” and “(ab|c)” are all equivalent! Additionally, different regular expression parsers will treat spaces differently."
  },
  {
    "objectID": "slides/2025-02-24-regex.html#character-classes",
    "href": "slides/2025-02-24-regex.html#character-classes",
    "title": "Regular Expressions",
    "section": "Character classes",
    "text": "Character classes\nCharacter classes allow specifying entire classes of characters, such as numbers, letters, etc. There are two flavors of character classes, one uses [: and :] around a predefined name inside square brackets and the other uses \\ and a special character. They are sometimes interchangeable.\n\n(?i) before the string indicates that the match should be case insensitive (will make the entire string case insensitive).\n[:digit:] or \\d: digits, 0 1 2 3 4 5 6 7 8 9, equivalent to [0-9].\n\n\\D: non-digits, equivalent to [^0-9].\n\n[:lower:]: lower-case letters, equivalent to [a-z].\n\n[:upper:]: upper-case letters, equivalent to [A-Z].\n\n[:alpha:]: alphabetic characters, equivalent to [[:lower:][:upper:]] or [A-z].\n\n[:alnum:]: alphanumeric characters, equivalent to [[:alpha:][:digit:]] or [A-z0-9].\n\n\\w: word characters, equivalent to [[:alnum:]_] or [A-z0-9_] (letter, number, or underscore).\n\n\\W: not word, equivalent to [^A-z0-9_].\n\n[:blank:]: blank characters, i.e. space and tab.\n\n[:space:]: space characters: tab, new line, vertical tab, form feed, carriage return, space.\n\\s: whitespace.\n\n\\S: not whitespace.\n\n[:punct:]: punctuation characters, ! ” # $ % & ’ ( ) * + , - . / : ; &lt; = &gt; ? @ [  ] ^ _ ` { | } ~.\n[:graph:]: graphical (human readable) characters: equivalent to [[:alnum:][:punct:]].\n[:print:]: printable characters, equivalent to [[:alnum:][:punct:]\\\\s]."
  },
  {
    "objectID": "slides/2025-02-24-regex.html#thoughts-on-characters-and-spaces",
    "href": "slides/2025-02-24-regex.html#thoughts-on-characters-and-spaces",
    "title": "Regular Expressions",
    "section": "Thoughts on characters and spaces",
    "text": "Thoughts on characters and spaces\n\n. matches any single character except a newline \\n.\n. does match whitespace (e.g., a space or tab)\n\\s matches any whitespace including: spaces, tabs, new lines, and carriage returns\n[ \\t] matches spaces and tabs only (not new lines or carriage returns)\n[^\\s] matches any character except whitespace (including spaces, tabs, and new lines)\n[^\\s] and [\\S] are functionally equivalent\nThe pattern [\\s\\S] matches any character including newlines and tabs.\n\\w matches any single word character (including letters, digits, and the underscore character _)\n\\B: matches the empty string provided it is not at an edge of a word."
  },
  {
    "objectID": "slides/2025-02-24-regex.html#case-insenstive",
    "href": "slides/2025-02-24-regex.html#case-insenstive",
    "title": "Regular Expressions",
    "section": "Case insenstive",
    "text": "Case insenstive\n\nMatch only the word meter in “The cemetery is 1 meter from the stop sign.”\nAlso match Meter in “The cemetery is 1 Meter from the stop sign.”"
  },
  {
    "objectID": "slides/2025-02-24-regex.html#case-insenstive-1",
    "href": "slides/2025-02-24-regex.html#case-insenstive-1",
    "title": "Regular Expressions",
    "section": "Case insenstive",
    "text": "Case insenstive\n\nMatch only the word meter in “The cemetery is 1 meter from the stop sign.”\nAlso match Meter and meTer …\n\n\nstring &lt;- c(\"The cemetery is 1 meter from the stop sign.\", \n            \"The cemetery is 1 Meter from the stop sign.\",\n            \"The cemetery is 1 meTer from the stop sign.\")\n\nstr_extract(string, \"(?i)\\\\bmeter\\\\b\")\n\n[1] \"meter\" \"Meter\" \"meTer\""
  },
  {
    "objectID": "slides/2025-02-24-regex.html#proper-times-and-dates",
    "href": "slides/2025-02-24-regex.html#proper-times-and-dates",
    "title": "Regular Expressions",
    "section": "Proper times and dates",
    "text": "Proper times and dates\n\nMatch dates like 01/15/24 and also like 01.15.24 and like 01-15-24.\n\n\nstring &lt;- c(\"01/15/24\", \"01.15.24\", \"01-15-24\", \"011524\", \n            \"January 15, 2024\")"
  },
  {
    "objectID": "slides/2025-02-24-regex.html#proper-times-and-dates-1",
    "href": "slides/2025-02-24-regex.html#proper-times-and-dates-1",
    "title": "Regular Expressions",
    "section": "Proper times and dates",
    "text": "Proper times and dates\n\nMatch dates like 01/15/24 and also like 01.15.24 and like 01-15-24.\n\n\nstring &lt;- c(\"01/15/24\", \"01.15.24\", \"01-15-24\", \"01 15 24\", \n            \"011524\", \"January 15, 2024\")\n\nstr_extract(string, \"\\\\d\\\\d.\\\\d\\\\d.\\\\d\\\\d\")\n\n[1] \"01/15/24\" \"01.15.24\" \"01-15-24\" \"01 15 24\" NA         NA        \n\nstr_extract(string, \"\\\\d\\\\d[/.\\\\-]\\\\d\\\\d[/.\\\\-]\\\\d\\\\d\")\n\n[1] \"01/15/24\" \"01.15.24\" \"01-15-24\" NA         NA         NA        \n\nstr_extract(string, \"\\\\d{2}[/.\\\\-]\\\\d{2}[/.\\\\-]\\\\d{2}\")\n\n[1] \"01/15/24\" \"01.15.24\" \"01-15-24\" NA         NA         NA"
  },
  {
    "objectID": "slides/2025-02-24-regex.html#proper-times-and-dates-2",
    "href": "slides/2025-02-24-regex.html#proper-times-and-dates-2",
    "title": "Regular Expressions",
    "section": "Proper times and dates",
    "text": "Proper times and dates\n\nMatch a time of day such as “9:17 am” or “12:30 pm”. Require that the time be a valid time (not “99:99 pm”). Assume no leading zeros (i.e., “09:17 am”).\n\n\nstring &lt;- c(\"9:17 am\", \"12:30 pm\", \"99:99 pm\", \"09:17 am\")"
  },
  {
    "objectID": "slides/2025-02-24-regex.html#proper-times-and-dates-3",
    "href": "slides/2025-02-24-regex.html#proper-times-and-dates-3",
    "title": "Regular Expressions",
    "section": "Proper times and dates",
    "text": "Proper times and dates\n\nMatch a time of day such as “9:17 am” or “12:30 pm”. Require that the time be a valid time (not “99:99 pm”). Assume no leading zeros (i.e., “09:17 am”).\n\n^(1[012]|[1-9]):[0-5][0-9] (am|pm)$\n\nstring &lt;- c(\"9:17 am\", \"12:30 pm\", \"99:99 pm\", \"09:17 am\")\n\nstr_extract(string, \"(1[012]|[1-9]):[0-5][0-9] (am|pm)\")\n\n[1] \"9:17 am\"  \"12:30 pm\" NA         \"9:17 am\" \n\nstr_extract(string, \"^(1[012]|[1-9]):[0-5][0-9] (am|pm)$\")\n\n[1] \"9:17 am\"  \"12:30 pm\" NA         NA"
  },
  {
    "objectID": "slides/2025-02-24-regex.html#alternation-operator",
    "href": "slides/2025-02-24-regex.html#alternation-operator",
    "title": "Regular Expressions",
    "section": "Alternation operator",
    "text": "Alternation operator\nThe “or” operator, | has the lowest precedence and parentheses have the highest precedence, which means that parentheses get evaluated before “or”.\n\nWhat is the difference between \\bMary|Jane|Sue\\b and \\b(Mary|Jane|Sue)\\b?\n\n\nstring &lt;- c(\"Mary\", \"Mar\", \"Janet\", \"jane\", \"Susan\", \"Sue\")\n\nstr_extract(string, \"\\\\bMary|Jane|Sue\\\\b\")\nstr_extract(string, \"\\\\b(Mary|Jane|Sue)\\\\b\")"
  },
  {
    "objectID": "slides/2025-02-24-regex.html#alternation-operator-1",
    "href": "slides/2025-02-24-regex.html#alternation-operator-1",
    "title": "Regular Expressions",
    "section": "Alternation operator",
    "text": "Alternation operator\nThe “or” operator, | has the lowest precedence and parentheses have the highest precedence, which means that parentheses get evaluated before “or”.\n\nWhat is the difference between \\bMary|Jane|Sue\\b and \\b(Mary|Jane|Sue)\\b?\n\n\nstring &lt;- c(\"Mary\", \"Mar\", \"Janet\", \"jane\", \"Susan\", \"Sue\")\n\nstr_extract(string, \"\\\\bMary|Jane|Sue\\\\b\")\n\n[1] \"Mary\" NA     \"Jane\" NA     NA     \"Sue\" \n\nstr_extract(string, \"\\\\b(Mary|Jane|Sue)\\\\b\")\n\n[1] \"Mary\" NA     NA     NA     NA     \"Sue\""
  },
  {
    "objectID": "slides/2025-02-24-regex.html#lookaround",
    "href": "slides/2025-02-24-regex.html#lookaround",
    "title": "Regular Expressions",
    "section": "Lookaround",
    "text": "Lookaround\nA lookaround specifies a place in the regular expression that will anchor the string you’d like to match.\n\n“x(?=y)” – positive lookahead (matches ‘x’ when it is followed by ‘y’)\n“x(?!y)” – negative lookahead (matches ‘x’ when it is not followed by ‘y’)\n“(?&lt;=y)x” – positive lookbehind (matches ‘x’ when it is preceded by ‘y’)\n“(?&lt;!y)x” – negative lookbehind (matches ‘x’ when it is not preceded by ‘y’)"
  },
  {
    "objectID": "slides/2025-02-24-regex.html#lookaround-1",
    "href": "slides/2025-02-24-regex.html#lookaround-1",
    "title": "Regular Expressions",
    "section": "Lookaround",
    "text": "Lookaround\n\n\nFigure 1: Image credit: Stefan Judis https://www.stefanjudis.com/blog/a-regular-expression-lookahead-lookbehind-cheat-sheet/"
  },
  {
    "objectID": "slides/2025-02-24-regex.html#example---taskmaster",
    "href": "slides/2025-02-24-regex.html#example---taskmaster",
    "title": "Regular Expressions",
    "section": "Example - Taskmaster",
    "text": "Example - Taskmaster\nData scraped from the wiki site for the TV series, Taskmaster.\n\n\nFigure 2: Taskmaster Wiki https://taskmaster.fandom.com/wiki/Series_11"
  },
  {
    "objectID": "slides/2025-02-24-regex.html#scraping-and-wrangling-taskmaster",
    "href": "slides/2025-02-24-regex.html#scraping-and-wrangling-taskmaster",
    "title": "Regular Expressions",
    "section": "Scraping and wrangling Taskmaster",
    "text": "Scraping and wrangling Taskmaster\nGoal: to scrape the Taskmaster wiki into a data frame including task, description, episode, episode name, air date, contestant, score, and series.1\n\nresults &lt;- read_html(\"https://taskmaster.fandom.com/wiki/Series_11\") |&gt;\n  html_element(\".tmtable\") |&gt; \n  html_table() |&gt;\n  mutate(episode = ifelse(startsWith(Task, \"Episode\"), Task, NA)) |&gt;\n  fill(episode, .direction = \"down\") |&gt;\n  filter(!startsWith(Task, \"Episode\"), \n         !(Task %in% c(\"Total\", \"Grand Total\"))) |&gt;\n  pivot_longer(cols = -c(Task, Description, episode),\n               names_to = \"contestant\",\n               values_to = \"score\") |&gt;\n  mutate(series = 11)\n\nThanks to Ciaran Evans at Wake Forest University for example and code, https://sta279-f23.github.io/"
  },
  {
    "objectID": "slides/2025-02-24-regex.html#scraping-and-wrangling-taskmaster-data---results",
    "href": "slides/2025-02-24-regex.html#scraping-and-wrangling-taskmaster-data---results",
    "title": "Regular Expressions",
    "section": "Scraping and wrangling Taskmaster data - results",
    "text": "Scraping and wrangling Taskmaster data - results\n\nresults |&gt; \n  select(Task, Description, episode, contestant, score, series) |&gt;\n  head(10)\n\n# A tibble: 10 × 6\n   Task  Description                   episode contestant score series\n   &lt;chr&gt; &lt;chr&gt;                         &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;  &lt;dbl&gt;\n 1 1     Prize: Best thing you can ca… Episod… Charlotte… 1         11\n 2 1     Prize: Best thing you can ca… Episod… Jamali Ma… 2         11\n 3 1     Prize: Best thing you can ca… Episod… Lee Mack   4         11\n 4 1     Prize: Best thing you can ca… Episod… Mike Wozn… 5         11\n 5 1     Prize: Best thing you can ca… Episod… Sarah Ken… 3         11\n 6 2     Do the most impressive thing… Episod… Charlotte… 2         11\n 7 2     Do the most impressive thing… Episod… Jamali Ma… 3[1]      11\n 8 2     Do the most impressive thing… Episod… Lee Mack   3         11\n 9 2     Do the most impressive thing… Episod… Mike Wozn… 5         11\n10 2     Do the most impressive thing… Episod… Sarah Ken… 4         11"
  },
  {
    "objectID": "slides/2025-02-24-regex.html#more-succinct-results",
    "href": "slides/2025-02-24-regex.html#more-succinct-results",
    "title": "Regular Expressions",
    "section": "more succinct results",
    "text": "more succinct results\n\n   Task  Description         episode   contestant score series\n  1     Prize: Best thing…  Episode 1… Charlotte… 1         11\n  1     Prize: Best thing…  Episode 1… Jamali Ma… 2         11\n  1     Prize: Best thing…  Episode 1… Lee Mack   4         11\n  1     Prize: Best thing…  Episode 1… Mike Wozn… 5         11\n  1     Prize: Best thing…  Episode 1… Sarah Ken… 3         11\n  2     Do the most…        Episode 1… Charlotte… 2         11\n  2     Do the most…        Episode 1… Jamali Ma… 3[1]      11\n  2     Do the most…        Episode 1… Lee Mack   3         11\n  2     Do the most…        Episode 1… Mike Wozn… 5         11\n  2     Do the most…        Episode 1… Sarah Ken… 4         11\n\nCurrently, the episode column contains entries like\n\n\"Episode 1: It's not your fault. (18 March 2021)\""
  },
  {
    "objectID": "slides/2025-02-24-regex.html#cleaning-the-score-column",
    "href": "slides/2025-02-24-regex.html#cleaning-the-score-column",
    "title": "Regular Expressions",
    "section": "Cleaning the score column",
    "text": "Cleaning the score column\n\nresults |&gt; select(score) |&gt; table()\n\nscore\n   –    ✔    ✘    0    1    2    3 3[1] 3[2] 3[3]    4 4[2] 4[3]    5   DQ \n   7    1    1   11   37   42   47    1    3    1   49    1    1   55   13 \n\n\nHow should the scores be stored? What is the cleaning task?\n\n\nFigure 3: Taskmaster Wiki https://taskmaster.fandom.com/wiki/Series_11"
  },
  {
    "objectID": "slides/2025-02-24-regex.html#extracting-numeric-information",
    "href": "slides/2025-02-24-regex.html#extracting-numeric-information",
    "title": "Regular Expressions",
    "section": "Extracting numeric information",
    "text": "Extracting numeric information\nSuppose we have the following string:\n\n\"3[1]\"\n\nAnd we want to extract just the number “3”:\n\nstr_extract(\"3[1]\", \"3\")\n\n[1] \"3\""
  },
  {
    "objectID": "slides/2025-02-24-regex.html#extracting-numeric-information-1",
    "href": "slides/2025-02-24-regex.html#extracting-numeric-information-1",
    "title": "Regular Expressions",
    "section": "Extracting numeric information",
    "text": "Extracting numeric information\nWhat if we don’t know which number to extract?\n\nstr_extract(\"3[1]\", \"\\\\d\")\n\n[1] \"3\"\n\n\n\nstr_extract(\"4[1]\", \"\\\\d\")\n\n[1] \"4\"\n\n\n\nstr_extract(\"10[1]\", \"\\\\d\")\n\n[1] \"1\"\n\n\n\nstr_extract(\"10[1]\", \"\\\\d+\")\n\n[1] \"10\"\n\n\n\nstr_extract(\"DQ\", \"\\\\d\")\n\n[1] NA"
  },
  {
    "objectID": "slides/2025-02-24-regex.html#str_extract",
    "href": "slides/2025-02-24-regex.html#str_extract",
    "title": "Regular Expressions",
    "section": "str_extract()",
    "text": "str_extract()\nstr_extract() is an R function in the stringr package which can find regular expressions in strings of text.\n\nstr_extract(\"My cat is 3 years old\", \"cat\")\n\n[1] \"cat\"\n\n\n\nstr_extract(\"My cat is 3 years old\", \"3\")\n\n[1] \"3\""
  },
  {
    "objectID": "slides/2025-02-24-regex.html#matching-multiple-options",
    "href": "slides/2025-02-24-regex.html#matching-multiple-options",
    "title": "Regular Expressions",
    "section": "Matching multiple options",
    "text": "Matching multiple options\nstr_extract() returns the first match; str_extract_all() allows more than one match.\n\nstr_extract(\"My cat is 3 years old\", \"cat|dog\")\n\n[1] \"cat\"\n\nstr_extract(\"My dog is 10 years old\", \"cat|dog\")\n\n[1] \"dog\"\n\nstr_extract(\"My dog is 10 years old, my cat is 3 years old\", \n            \"cat|dog\")\n\n[1] \"dog\"\n\nstr_extract_all(\"My dog is 10 years old, my cat is 3 years old\", \n                \"cat|dog\")\n\n[[1]]\n[1] \"dog\" \"cat\""
  },
  {
    "objectID": "slides/2025-02-24-regex.html#matching-groups-of-characters",
    "href": "slides/2025-02-24-regex.html#matching-groups-of-characters",
    "title": "Regular Expressions",
    "section": "Matching groups of characters",
    "text": "Matching groups of characters\nWhat if I want to extract a number?\n\nstr_extract(\"My cat is 3 years old\", \"\\\\d\")\n\n[1] \"3\"\n\n\nWhat will the result be for the following code?\n\nstr_extract(\"My dog is 10 years old\", \"\\\\d\")"
  },
  {
    "objectID": "slides/2025-02-24-regex.html#matching-groups-of-characters-1",
    "href": "slides/2025-02-24-regex.html#matching-groups-of-characters-1",
    "title": "Regular Expressions",
    "section": "Matching groups of characters",
    "text": "Matching groups of characters\nWhat if I want to extract a number?\n\nstr_extract(\"My cat is 3 years old\", \"\\\\d\")\n\n[1] \"3\"\n\n\nWhat will the result be for the following code?\n\nstr_extract(\"My dog is 10 years old\", \"\\\\d\")\n\n[1] \"1\""
  },
  {
    "objectID": "slides/2025-02-24-regex.html#matching-groups-of-characters-2",
    "href": "slides/2025-02-24-regex.html#matching-groups-of-characters-2",
    "title": "Regular Expressions",
    "section": "Matching groups of characters",
    "text": "Matching groups of characters\nWhat if I want to extract a number?\n\nstr_extract(\"My cat is 3 years old\", \"\\\\d\")\n\n[1] \"3\"\n\n\nWhat will the result be for the following code?\n\nstr_extract(\"My dog is 10 years old\", \"\\\\d\")\n\n[1] \"1\"\n\n\nThe + symbol in a regular expression means “repeated one or more times”\n\nstr_extract(\"My dog is 10 years old\", \"\\\\d+\")\n\n[1] \"10\""
  },
  {
    "objectID": "slides/2025-02-24-regex.html#extracting-from-multiple-strings",
    "href": "slides/2025-02-24-regex.html#extracting-from-multiple-strings",
    "title": "Regular Expressions",
    "section": "Extracting from multiple strings",
    "text": "Extracting from multiple strings\n\nstrings &lt;- c(\"My cat is 3 years old\", \"My dog is 10 years old\")\nstr_extract(strings, \"\\\\d+\")\n\n[1] \"3\"  \"10\""
  },
  {
    "objectID": "slides/2025-02-24-regex.html#extracting-from-multiple-strings-1",
    "href": "slides/2025-02-24-regex.html#extracting-from-multiple-strings-1",
    "title": "Regular Expressions",
    "section": "Extracting from multiple strings",
    "text": "Extracting from multiple strings\nWhat if we have multiple instances across multiple strings? We need to be careful working with lists (instead of vectors).\n\nstrings &lt;- c(\"My cat is 3 years old\", \"My dog is 10 years old\")\nstr_extract(strings, \"\\\\w\")\nstr_extract_all(strings, \"\\\\w\")\nstr_extract(strings, \"\\\\w+\")\nstr_extract_all(strings, \"\\\\w+\")"
  },
  {
    "objectID": "slides/2025-02-24-regex.html#extracting-from-multiple-strings-2",
    "href": "slides/2025-02-24-regex.html#extracting-from-multiple-strings-2",
    "title": "Regular Expressions",
    "section": "Extracting from multiple strings",
    "text": "Extracting from multiple strings\nWhat if we have multiple instances across multiple strings? We need to be careful working with lists (instead of vectors).\n\nstrings &lt;- c(\"My cat is 3 years old\", \"My dog is 10 years old\")\nstr_extract(strings, \"\\\\w\")\n\n[1] \"M\" \"M\"\n\nstr_extract_all(strings, \"\\\\w\")\n\n[[1]]\n [1] \"M\" \"y\" \"c\" \"a\" \"t\" \"i\" \"s\" \"3\" \"y\" \"e\" \"a\" \"r\" \"s\" \"o\" \"l\" \"d\"\n\n[[2]]\n [1] \"M\" \"y\" \"d\" \"o\" \"g\" \"i\" \"s\" \"1\" \"0\" \"y\" \"e\" \"a\" \"r\" \"s\" \"o\" \"l\" \"d\"\n\nstr_extract(strings, \"\\\\w+\")\n\n[1] \"My\" \"My\"\n\nstr_extract_all(strings, \"\\\\w+\")\n\n[[1]]\n[1] \"My\"    \"cat\"   \"is\"    \"3\"     \"years\" \"old\"  \n\n[[2]]\n[1] \"My\"    \"dog\"   \"is\"    \"10\"    \"years\" \"old\""
  },
  {
    "objectID": "slides/2025-02-24-regex.html#extracting-episode-information",
    "href": "slides/2025-02-24-regex.html#extracting-episode-information",
    "title": "Regular Expressions",
    "section": "Extracting episode information",
    "text": "Extracting episode information\nCurrently, the episode column contains entries like:\n\n\"Episode 2: The pie whisperer. (4 August 2015)\"\n\nHow would I extract just the episode number?"
  },
  {
    "objectID": "slides/2025-02-24-regex.html#extracting-episode-information-1",
    "href": "slides/2025-02-24-regex.html#extracting-episode-information-1",
    "title": "Regular Expressions",
    "section": "Extracting episode information",
    "text": "Extracting episode information\nCurrently, the episode column contains entries like:\n\n\"Episode 2: The pie whisperer. (4 August 2015)\"\n\nHow would I extract just the episode number?\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \"\\\\d+\")\n\n[1] \"2\""
  },
  {
    "objectID": "slides/2025-02-24-regex.html#extracting-episode-information-2",
    "href": "slides/2025-02-24-regex.html#extracting-episode-information-2",
    "title": "Regular Expressions",
    "section": "Extracting episode information",
    "text": "Extracting episode information\nCurrently, the episode column contains entries like:\n\n\"Episode 2: The pie whisperer. (4 August 2015)\"\n\nHow would I extract the episode name?\nGoal: find a pattern to match: anything that starts with a :, ends with a .\nLet’s break down that task into pieces."
  },
  {
    "objectID": "slides/2025-02-24-regex.html#extracting-episode-information-3",
    "href": "slides/2025-02-24-regex.html#extracting-episode-information-3",
    "title": "Regular Expressions",
    "section": "Extracting episode information",
    "text": "Extracting episode information\nHow can we find the period at the end of the sentence? What does each of these lines of code return?\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \".\")\n\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \".+\")\n\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \"\\\\.\")"
  },
  {
    "objectID": "slides/2025-02-24-regex.html#extracting-episode-information---solution",
    "href": "slides/2025-02-24-regex.html#extracting-episode-information---solution",
    "title": "Regular Expressions",
    "section": "Extracting episode information - solution",
    "text": "Extracting episode information - solution\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \".\")\n\n[1] \"E\"\n\n\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \".+\")\n\n[1] \"Episode 2: The pie whisperer. (4 August 2015)\"\n\n\nWe use an escape character when we actually want to choose a period:\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \"\\\\.\")\n\n[1] \".\""
  },
  {
    "objectID": "slides/2025-02-24-regex.html#extracting-episode-information-4",
    "href": "slides/2025-02-24-regex.html#extracting-episode-information-4",
    "title": "Regular Expressions",
    "section": "Extracting episode information",
    "text": "Extracting episode information\nGoal: find a pattern to match: anything that starts with a :, ends with a .\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\",\n            \":.+\\\\.\")\n\n[1] \": The pie whisperer.\""
  },
  {
    "objectID": "slides/2025-02-24-regex.html#lookaround-again",
    "href": "slides/2025-02-24-regex.html#lookaround-again",
    "title": "Regular Expressions",
    "section": "Lookaround (again)",
    "text": "Lookaround (again)\n\n\nFigure 4: Image credit: Stefan Judis https://www.stefanjudis.com/blog/a-regular-expression-lookahead-lookbehind-cheat-sheet/"
  },
  {
    "objectID": "slides/2025-02-24-regex.html#lookbehinds",
    "href": "slides/2025-02-24-regex.html#lookbehinds",
    "title": "Regular Expressions",
    "section": "Lookbehinds",
    "text": "Lookbehinds\n(?&lt;=y)x – positive lookbehind (matches ‘x’ when it is preceded by ‘y’)\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \n            \"(?&lt;=: ).+\")\n\n[1] \"The pie whisperer. (4 August 2015)\"\n\n\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \n            \"(?&lt;=\\\\. ).+\")\n\n[1] \"(4 August 2015)\""
  },
  {
    "objectID": "slides/2025-02-24-regex.html#lookaheads",
    "href": "slides/2025-02-24-regex.html#lookaheads",
    "title": "Regular Expressions",
    "section": "Lookaheads",
    "text": "Lookaheads\nx(?=y) – positive lookahead (matches ‘x’ when it is followed by ‘y’)\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \n            \".+(?=\\\\.)\")\n\n[1] \"Episode 2: The pie whisperer\"\n\n\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \n            \".+(?=:)\")\n\n[1] \"Episode 2\""
  },
  {
    "objectID": "slides/2025-02-24-regex.html#extracting-episode-information-5",
    "href": "slides/2025-02-24-regex.html#extracting-episode-information-5",
    "title": "Regular Expressions",
    "section": "Extracting episode information",
    "text": "Extracting episode information\nGetting everything between the : and the .\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \n            \"(?&lt;=: ).+(?=\\\\.)\")\n\n[1] \"The pie whisperer\""
  },
  {
    "objectID": "slides/2025-02-24-regex.html#extracting-air-date",
    "href": "slides/2025-02-24-regex.html#extracting-air-date",
    "title": "Regular Expressions",
    "section": "Extracting air date",
    "text": "Extracting air date\nI want to extract just the air date. What pattern do I want to match?\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", ...)"
  },
  {
    "objectID": "slides/2025-02-24-regex.html#extracting-air-date-1",
    "href": "slides/2025-02-24-regex.html#extracting-air-date-1",
    "title": "Regular Expressions",
    "section": "Extracting air date",
    "text": "Extracting air date\n\nstr_extract(\"Episode 2: The pie whisperer. (4 August 2015)\", \n            \"(?&lt;=\\\\().+(?=\\\\))\")\n\n[1] \"4 August 2015\""
  },
  {
    "objectID": "slides/2025-02-24-regex.html#wrangling-the-episode-info",
    "href": "slides/2025-02-24-regex.html#wrangling-the-episode-info",
    "title": "Regular Expressions",
    "section": "Wrangling the episode info",
    "text": "Wrangling the episode info\nCurrently:\n\n\n# A tibble: 270 × 1\n   episode                                        \n   &lt;chr&gt;                                          \n 1 Episode 1: It's not your fault. (18 March 2021)\n 2 Episode 1: It's not your fault. (18 March 2021)\n 3 Episode 1: It's not your fault. (18 March 2021)\n 4 Episode 1: It's not your fault. (18 March 2021)\n 5 Episode 1: It's not your fault. (18 March 2021)\n 6 Episode 1: It's not your fault. (18 March 2021)\n 7 Episode 1: It's not your fault. (18 March 2021)\n 8 Episode 1: It's not your fault. (18 March 2021)\n 9 Episode 1: It's not your fault. (18 March 2021)\n10 Episode 1: It's not your fault. (18 March 2021)\n# ℹ 260 more rows"
  },
  {
    "objectID": "slides/2025-02-24-regex.html#wrangling-the-episode-info-1",
    "href": "slides/2025-02-24-regex.html#wrangling-the-episode-info-1",
    "title": "Regular Expressions",
    "section": "Wrangling the episode info",
    "text": "Wrangling the episode info\nOne option:\n\nresults |&gt;\n  select(episode) |&gt;\n  mutate(episode_name = str_extract(episode, \"(?&lt;=: ).+(?=\\\\.)\"),\n         air_date = str_extract(episode, \"(?&lt;=\\\\().+(?=\\\\))\"),\n         episode = str_extract(episode, \"\\\\d+\")) |&gt; \n  mutate(air_date2 = dmy(air_date))\n\n# A tibble: 270 × 4\n   episode episode_name        air_date      air_date2 \n   &lt;chr&gt;   &lt;chr&gt;               &lt;chr&gt;         &lt;date&gt;    \n 1 1       It's not your fault 18 March 2021 2021-03-18\n 2 1       It's not your fault 18 March 2021 2021-03-18\n 3 1       It's not your fault 18 March 2021 2021-03-18\n 4 1       It's not your fault 18 March 2021 2021-03-18\n 5 1       It's not your fault 18 March 2021 2021-03-18\n 6 1       It's not your fault 18 March 2021 2021-03-18\n 7 1       It's not your fault 18 March 2021 2021-03-18\n 8 1       It's not your fault 18 March 2021 2021-03-18\n 9 1       It's not your fault 18 March 2021 2021-03-18\n10 1       It's not your fault 18 March 2021 2021-03-18\n# ℹ 260 more rows"
  },
  {
    "objectID": "slides/2025-02-24-regex.html#wrangling-the-episode-info-2",
    "href": "slides/2025-02-24-regex.html#wrangling-the-episode-info-2",
    "title": "Regular Expressions",
    "section": "Wrangling the episode info",
    "text": "Wrangling the episode info\nAnother option:\n\nresults |&gt;\n  separate_wider_regex(episode, \n                       patterns = c(\".+ \", \n                                    episode = \"\\\\d+\", \n                                    \": \", \n                                    episode_name = \".+\", \n                                    \"\\\\. \\\\(\", \n                                    air_date = \".+\", \n                                    \"\\\\)\")) |&gt; \n  mutate(air_date2 = dmy(air_date))\n\n\n\n# A tibble: 270 × 4\n   episode episode_name        air_date      air_date2 \n   &lt;chr&gt;   &lt;chr&gt;               &lt;chr&gt;         &lt;date&gt;    \n 1 1       It's not your fault 18 March 2021 2021-03-18\n 2 1       It's not your fault 18 March 2021 2021-03-18\n 3 1       It's not your fault 18 March 2021 2021-03-18\n 4 1       It's not your fault 18 March 2021 2021-03-18\n 5 1       It's not your fault 18 March 2021 2021-03-18\n 6 1       It's not your fault 18 March 2021 2021-03-18\n 7 1       It's not your fault 18 March 2021 2021-03-18\n 8 1       It's not your fault 18 March 2021 2021-03-18\n 9 1       It's not your fault 18 March 2021 2021-03-18\n10 1       It's not your fault 18 March 2021 2021-03-18\n# ℹ 260 more rows"
  },
  {
    "objectID": "slides/2025-02-24-regex.html#examples-of-operators---solution-.scrollable",
    "href": "slides/2025-02-24-regex.html#examples-of-operators---solution-.scrollable",
    "title": "Regular Expressions",
    "section": "Examples of operators - solution {.scrollable}1",
    "text": "Examples of operators - solution {.scrollable}1\n\nstrings &lt;- c(\"^ab\", \"ab\", \"abc\", \"abd\", \"abe\", \"ab 12\", \"a|b\")\nstr_subset(strings, \"ab.\")\n\n[1] \"abc\"   \"abd\"   \"abe\"   \"ab 12\"\n\nstr_subset(strings, \"ab[c-e]\")\n\n[1] \"abc\" \"abd\" \"abe\"\n\nstr_subset(strings, \"ab[^c]\")\n\n[1] \"abd\"   \"abe\"   \"ab 12\"\n\nstr_subset(strings, \"^ab\")\n\n[1] \"ab\"    \"abc\"   \"abd\"   \"abe\"   \"ab 12\"\n\nstr_subset(strings, \"\\\\^ab\")\n\n[1] \"^ab\"\n\nstr_subset(strings, \"abc|abd\")\n\n[1] \"abc\" \"abd\"\n\nstr_subset(strings, \"ab|c\")\n\n[1] \"^ab\"   \"ab\"    \"abc\"   \"abd\"   \"abe\"   \"ab 12\"\n\nstr_subset(strings, \"(ab)|c\")\n\n[1] \"^ab\"   \"ab\"    \"abc\"   \"abd\"   \"abe\"   \"ab 12\"\n\nstr_subset(strings, \"(ab|c)\")\n\n[1] \"^ab\"   \"ab\"    \"abc\"   \"abd\"   \"abe\"   \"ab 12\"\n\nstr_subset(strings, \"a(b|c)\")\n\n[1] \"^ab\"   \"ab\"    \"abc\"   \"abd\"   \"abe\"   \"ab 12\"\n\nstr_subset(strings, \"a[b|c]\")\n\n[1] \"^ab\"   \"ab\"    \"abc\"   \"abd\"   \"abe\"   \"ab 12\" \"a|b\"  \n\nstr_extract(strings, \"a[b|c]\")\n\n[1] \"ab\" \"ab\" \"ab\" \"ab\" \"ab\" \"ab\" \"a|\"\n\n\nit turns out that “ab|c” and “(ab)|c” and “(ab|c)” are all equivalent!"
  },
  {
    "objectID": "project2.html#footnotes",
    "href": "project2.html#footnotes",
    "title": "Project 2",
    "section": "Footnotes",
    "text": "Footnotes\n\n\ncode folding allows the user can see the code if they want to: https://quarto.org/docs/output-formats/html-code.html#folding-code↩︎"
  },
  {
    "objectID": "slides/2025-03-03-funcmap.html#function-components",
    "href": "slides/2025-03-03-funcmap.html#function-components",
    "title": "Functions + Iteration",
    "section": "Function components",
    "text": "Function components\nHere is a simple function to compute the absolute value.\n\nmy_abs &lt;- function(x){\n  return(ifelse(x &gt;= 0, x, -1*x))\n}\n\nmy_abs(-3)\n\n[1] 3\n\nmy_abs(c(-2, 5))\n\n[1] 2 5\n\n\n\nname: my_abs\narguments: x\nbody: everything inside the { }"
  },
  {
    "objectID": "slides/2025-03-03-funcmap.html#ordering-and-arguments",
    "href": "slides/2025-03-03-funcmap.html#ordering-and-arguments",
    "title": "Functions + Iteration",
    "section": "Ordering and arguments",
    "text": "Ordering and arguments\n\nmy_power &lt;- function(x, y){\n  return(x^y)\n}\n\nmy_power(x = 2, y = 3)\n\n[1] 8\n\nmy_power(y = 3, x = 2)\n\n[1] 8\n\nmy_power(2, 3)\n\n[1] 8\n\nmy_power(3, 2)\n\n[1] 9\n\n\n\nWhen calling the function, if you don’t name the arguments, R assumes that you passed them in the order defined inside the function."
  },
  {
    "objectID": "slides/2025-03-03-funcmap.html#function-defaults",
    "href": "slides/2025-03-03-funcmap.html#function-defaults",
    "title": "Functions + Iteration",
    "section": "Function defaults",
    "text": "Function defaults\n\nfunctionresult\n\n\n\nmy_power &lt;- function(x, y){\n  return(x^y)\n}\n\nWhat will happen when I run the following code?\n\nmy_power(3)\n\n\n\n\nmy_power(3)\n\nError in my_power(3): argument \"y\" is missing, with no default"
  },
  {
    "objectID": "slides/2025-03-03-funcmap.html#function-defaults-1",
    "href": "slides/2025-03-03-funcmap.html#function-defaults-1",
    "title": "Functions + Iteration",
    "section": "Function defaults",
    "text": "Function defaults\n\nfunctionresult\n\n\n\nmy_power &lt;- function(x, y = 2){\n  return(x^y)\n}\n\nWhat will happen when I run the following code?\n\nmy_power(3)\n\n\n\n\nmy_power(3)\n\n[1] 9"
  },
  {
    "objectID": "slides/2025-03-03-funcmap.html#function-defaults-2",
    "href": "slides/2025-03-03-funcmap.html#function-defaults-2",
    "title": "Functions + Iteration",
    "section": "Function defaults",
    "text": "Function defaults\n\nfunctionresult\n\n\n\nmy_power &lt;- function(x, y = 2){\n  return(x^y)\n}\n\nWhat will happen when I run the following code?\n\nmy_power(2, 3)\n\n\n\n\nmy_power(2, 3)\n\n[1] 8"
  },
  {
    "objectID": "slides/2025-03-03-funcmap.html#function-defaults-3",
    "href": "slides/2025-03-03-funcmap.html#function-defaults-3",
    "title": "Functions + Iteration",
    "section": "Function defaults",
    "text": "Function defaults\n\nfunctionresult\n\n\n\nmy_power &lt;- function(x = 2, y = 3){\n  return(x^y)\n}\n\nWhat will happen when I run the following code?\n\nmy_power()\n\n\n\n\nmy_power()\n\n[1] 8"
  },
  {
    "objectID": "slides/2025-03-03-funcmap.html#returning-a-value",
    "href": "slides/2025-03-03-funcmap.html#returning-a-value",
    "title": "Functions + Iteration",
    "section": "Returning a value",
    "text": "Returning a value\n\nfunctionsresults\n\n\n\naverage1 &lt;- function(x, remove_nas) {\n    sum(x, na.rm = remove_nas)/sum(!is.na(x))\n}\n\naverage2 &lt;- function(x, remove_nas) {\n    return(sum(x, na.rm = remove_nas)/sum(!is.na(x)))\n}\n\naverage3 &lt;- function(x, remove_nas = TRUE) {\n    sum(x, na.rm = remove_nas)/sum(!is.na(x))\n}\n\n\n\n\nsome_data &lt;- c(3, NA, 2, 13, 2, NA, 47)\n\naverage1(some_data)\n\nError in average1(some_data): argument \"remove_nas\" is missing, with no default\n\naverage1(some_data, remove_nas = TRUE)\n\n[1] 13.4\n\naverage2(some_data)\n\nError in average2(some_data): argument \"remove_nas\" is missing, with no default\n\naverage2(some_data, remove_nas = TRUE)\n\n[1] 13.4\n\naverage3(some_data)\n\n[1] 13.4"
  },
  {
    "objectID": "slides/2025-03-03-funcmap.html#returning-a-value-1",
    "href": "slides/2025-03-03-funcmap.html#returning-a-value-1",
    "title": "Functions + Iteration",
    "section": "Returning a value",
    "text": "Returning a value\n\nwithout return(): the function returns the last value which gets computed and isn’t stored as an object (using &lt;-).\nwith return(): the function will return an object that is explicitly included in the return() call. (Note: if you (accidentally?) have two return() calls, the function will return the object in the first return() call.)"
  },
  {
    "objectID": "slides/2025-03-03-funcmap.html#control-flow",
    "href": "slides/2025-03-03-funcmap.html#control-flow",
    "title": "Functions + Iteration",
    "section": "Control flow",
    "text": "Control flow\nOften in functions, you will want to execute code conditionally. Consider the if-else if-else structure.\n\nif (logical_condition) {\n    # some code\n} else if (other_logical_condition) {\n    # some other code\n} else {\n    # yet more code\n}"
  },
  {
    "objectID": "slides/2025-03-03-funcmap.html#control-flow-1",
    "href": "slides/2025-03-03-funcmap.html#control-flow-1",
    "title": "Functions + Iteration",
    "section": "Control flow",
    "text": "Control flow\n\nfunctionresult\n\n\n\nmiddle &lt;- function(x) {\n    mean_x &lt;- mean(x, na.rm = TRUE)\n    median_x &lt;- median(x, na.rm = TRUE)\n    seems_skewed &lt;- (mean_x &gt; 1.5*median_x) | (mean_x &lt; (1/1.5)*median_x)\n    if (seems_skewed) {\n        median_x\n    } else {\n        mean_x\n    }\n}\n\nNote that (mean_x &gt; 1.5*median_x) | (mean_x &lt; (1/1.5)*median_x) is a TRUE or FALSE question.\n\n\n\nsome_data &lt;- c(3, NA, 2, 13, 2, NA, 47)\n\n\nmean(some_data, na.rm = TRUE)\n\n[1] 13.4\n\nmedian(some_data, na.rm = TRUE)\n\n[1] 3\n\nmiddle(some_data)\n\n[1] 3"
  },
  {
    "objectID": "slides/2025-03-03-funcmap.html#functions-in-the-tidyverse",
    "href": "slides/2025-03-03-funcmap.html#functions-in-the-tidyverse",
    "title": "Functions + Iteration",
    "section": "Functions in the tidyverse",
    "text": "Functions in the tidyverse\nDon’t collapse\nFunctions that return the same number of rows as the original data frame are good to use inside mutate() and filter(). For example, you might want to capitalize the first word of every string:\n\nfirst_upper &lt;- function(x) {\n  str_sub(x, 1, 1) &lt;- str_to_upper(str_sub(x, 1, 1))\n  x\n}\n\nfirst_upper(c(\"hello\", \"goodbye\"))\n\n[1] \"Hello\"   \"Goodbye\""
  },
  {
    "objectID": "slides/2025-03-03-funcmap.html#functions-in-the-tidyverse-1",
    "href": "slides/2025-03-03-funcmap.html#functions-in-the-tidyverse-1",
    "title": "Functions + Iteration",
    "section": "Functions in the tidyverse",
    "text": "Functions in the tidyverse\nCollapse\nFunctions that collapse into a single value will work well in the summarize() step of the pipeline. For example, you may want to calculate the coefficient of variation which is the standard deviation divided by the mean.\n\ncv &lt;- function(x, na.rm = FALSE) {\n  sd(x, na.rm = na.rm) / mean(x, na.rm = na.rm)\n}\n\ncv(runif(100, min = 0, max = 50))\n\n[1] 0.5465207\n\ncv(runif(100, min = 0, max = 500))\n\n[1] 0.6371292"
  },
  {
    "objectID": "slides/2025-03-03-funcmap.html#functions-summary",
    "href": "slides/2025-03-03-funcmap.html#functions-summary",
    "title": "Functions + Iteration",
    "section": "Functions summary",
    "text": "Functions summary\n\nFunctions can be used to avoid repeating code\nArguments allow us specify the inputs when we call a function\nIf inputs are not named when calling the function, R uses the ordering from the function definition\nAll arguments must be specified when calling a function\nDefault arguments can be specified when the function is defined\nThe input to a function can be a function!"
  },
  {
    "objectID": "slides/2025-03-03-funcmap.html#purrr-for-functional-programming",
    "href": "slides/2025-03-03-funcmap.html#purrr-for-functional-programming",
    "title": "Functions + Iteration",
    "section": "purrr for functional programming",
    "text": "purrr for functional programming\nfunctionals are functions that take function as input and return a vector / list / data frame as output.\n\nalternatives to loops\na functional is better than a for loop is better than while is better than repeat (in terms of computing efficiency)"
  },
  {
    "objectID": "slides/2025-03-03-funcmap.html#benefits",
    "href": "slides/2025-03-03-funcmap.html#benefits",
    "title": "Functions + Iteration",
    "section": "Benefits",
    "text": "Benefits\n\nencourages function logic to be separated from iteration logic\ncan collapse results into vectors/data frames easily"
  },
  {
    "objectID": "slides/2025-03-03-funcmap.html#map",
    "href": "slides/2025-03-03-funcmap.html#map",
    "title": "Functions + Iteration",
    "section": "Map",
    "text": "Map\nmap() has (at least) two arguments, a data object and a function. It performs the function on each element of the object and returns a list. We can also pass additional arguments into the function."
  },
  {
    "objectID": "slides/2025-03-03-funcmap.html#variations-of-map_-functions",
    "href": "slides/2025-03-03-funcmap.html#variations-of-map_-functions",
    "title": "Functions + Iteration",
    "section": "variations of map_ functions",
    "text": "variations of map_ functions\n\n\nThe map functions are named by they output the produce. For example:\n\nmap(.x, .f) is the main mapping function and returns a list\nmap_dbl(.x, .f) returns a numeric (double) vector\nmap_chr(.x, .f) returns a character vector\nmap_lgl(.x, .f) returns a logical vector\n\n\n\n\n\n\n\n\n\n\n\n\nNote that the first argument is always the data object and the second object is always the function you want to iteratively apply to each element in the input object."
  },
  {
    "objectID": "slides/2025-03-03-funcmap.html#map-variants-output",
    "href": "slides/2025-03-03-funcmap.html#map-variants-output",
    "title": "Functions + Iteration",
    "section": "map() variants (output)",
    "text": "map() variants (output)\n\ntriple &lt;- function(x) x * 3\nmap(.x = c(1:3), .f = triple)\n\n[[1]]\n[1] 3\n\n[[2]]\n[1] 6\n\n[[3]]\n[1] 9\n\nmap_dbl(.x = c(1:3), .f = triple)\n\n[1] 3 6 9\n\nmap_lgl (.x = c(1:3), .f = triple)\n\nError in `map_lgl()`:\nℹ In index: 1.\nCaused by error:\n! Can't coerce from a number to a logical.\n\nmap_lgl(.x = c(1, NA, 3), .f = is.na)\n\n[1] FALSE  TRUE FALSE"
  },
  {
    "objectID": "slides/2025-03-03-funcmap.html#fastfood-dataset-from-openintro",
    "href": "slides/2025-03-03-funcmap.html#fastfood-dataset-from-openintro",
    "title": "Functions + Iteration",
    "section": "fastfood dataset from openintro",
    "text": "fastfood dataset from openintro\n\nlibrary(openintro)\nfastfood\n\n# A tibble: 515 × 17\n   restaurant item        calories cal_fat total_fat sat_fat trans_fat\n   &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;\n 1 Mcdonalds  Artisan Gr…      380      60         7       2       0  \n 2 Mcdonalds  Single Bac…      840     410        45      17       1.5\n 3 Mcdonalds  Double Bac…     1130     600        67      27       3  \n 4 Mcdonalds  Grilled Ba…      750     280        31      10       0.5\n 5 Mcdonalds  Crispy Bac…      920     410        45      12       0.5\n 6 Mcdonalds  Big Mac          540     250        28      10       1  \n 7 Mcdonalds  Cheeseburg…      300     100        12       5       0.5\n 8 Mcdonalds  Classic Ch…      510     210        24       4       0  \n 9 Mcdonalds  Double Che…      430     190        21      11       1  \n10 Mcdonalds  Double Qua…      770     400        45      21       2.5\n# ℹ 505 more rows\n# ℹ 10 more variables: cholesterol &lt;dbl&gt;, sodium &lt;dbl&gt;,\n#   total_carb &lt;dbl&gt;, fiber &lt;dbl&gt;, sugar &lt;dbl&gt;, protein &lt;dbl&gt;,\n#   vit_a &lt;dbl&gt;, vit_c &lt;dbl&gt;, calcium &lt;dbl&gt;, salad &lt;chr&gt;\n\n\nFrom TidyTuesday Fast food entree data on September 4, 2018."
  },
  {
    "objectID": "slides/2025-03-03-funcmap.html#anonymous-functions-and-shortcuts",
    "href": "slides/2025-03-03-funcmap.html#anonymous-functions-and-shortcuts",
    "title": "Functions + Iteration",
    "section": "Anonymous functions and shortcuts",
    "text": "Anonymous functions and shortcuts\n\nuse ~ to set a formula (when the function is neither a single name nor defined by function(...) { ...})\nuse .x to reference the input map(.x = ..., .f = )\n\n\nmap_dbl(.x = fastfood, .f = function(dog) mean(dog, na.rm = TRUE))\n\n  restaurant         item     calories      cal_fat    total_fat      sat_fat \n          NA           NA  530.9126214  238.8135922   26.5902913    8.1533981 \n   trans_fat  cholesterol       sodium   total_carb        fiber        sugar \n   0.4650485   72.4563107 1246.7378641   45.6640777    4.1371769    7.2621359 \n     protein        vit_a        vit_c      calcium        salad \n  27.8910506   18.8571429   20.1704918   24.8524590           NA \n\n\n\nmap_dbl(.x = fastfood,  .f = ~mean(.x, na.rm = TRUE))\n\n  restaurant         item     calories      cal_fat    total_fat      sat_fat \n          NA           NA  530.9126214  238.8135922   26.5902913    8.1533981 \n   trans_fat  cholesterol       sodium   total_carb        fiber        sugar \n   0.4650485   72.4563107 1246.7378641   45.6640777    4.1371769    7.2621359 \n     protein        vit_a        vit_c      calcium        salad \n  27.8910506   18.8571429   20.1704918   24.8524590           NA \n\n\n\nmap_dbl(.x = fastfood, .f = mean, na.rm = TRUE)\n\n  restaurant         item     calories      cal_fat    total_fat      sat_fat \n          NA           NA  530.9126214  238.8135922   26.5902913    8.1533981 \n   trans_fat  cholesterol       sodium   total_carb        fiber        sugar \n   0.4650485   72.4563107 1246.7378641   45.6640777    4.1371769    7.2621359 \n     protein        vit_a        vit_c      calcium        salad \n  27.8910506   18.8571429   20.1704918   24.8524590           NA \n\n\n\nmap_dbl(.x = fastfood, .f = mean)\n\n  restaurant         item     calories      cal_fat    total_fat      sat_fat \n          NA           NA  530.9126214  238.8135922   26.5902913    8.1533981 \n   trans_fat  cholesterol       sodium   total_carb        fiber        sugar \n   0.4650485   72.4563107 1246.7378641   45.6640777           NA    7.2621359 \n     protein        vit_a        vit_c      calcium        salad \n          NA           NA           NA           NA           NA"
  },
  {
    "objectID": "slides/2025-03-03-funcmap.html#the-same-thing-many-ways",
    "href": "slides/2025-03-03-funcmap.html#the-same-thing-many-ways",
    "title": "Functions + Iteration",
    "section": "The same thing, many ways",
    "text": "The same thing, many ways\nNote that .x is the name of the first argument in map() (.f is the name of the second argument).\n\n# the task\nmap_dbl(fastfood, function(x) length(unique(x)))\n\n restaurant        item    calories     cal_fat   total_fat     sat_fat \n          8         505         113         117          80          40 \n  trans_fat cholesterol      sodium  total_carb       fiber       sugar \n         10          52         197         103          19          31 \n    protein       vit_a       vit_c     calcium       salad \n         71          22          24          27           1 \n\nmap_dbl(fastfood, function(unicorn) length(unique(unicorn)))\n\n restaurant        item    calories     cal_fat   total_fat     sat_fat \n          8         505         113         117          80          40 \n  trans_fat cholesterol      sodium  total_carb       fiber       sugar \n         10          52         197         103          19          31 \n    protein       vit_a       vit_c     calcium       salad \n         71          22          24          27           1 \n\nmap_dbl(fastfood, ~length(unique(.x)))\n\n restaurant        item    calories     cal_fat   total_fat     sat_fat \n          8         505         113         117          80          40 \n  trans_fat cholesterol      sodium  total_carb       fiber       sugar \n         10          52         197         103          19          31 \n    protein       vit_a       vit_c     calcium       salad \n         71          22          24          27           1 \n\nmap_dbl(fastfood, ~length(unique(..1)))\n\n restaurant        item    calories     cal_fat   total_fat     sat_fat \n          8         505         113         117          80          40 \n  trans_fat cholesterol      sodium  total_carb       fiber       sugar \n         10          52         197         103          19          31 \n    protein       vit_a       vit_c     calcium       salad \n         71          22          24          27           1 \n\nmap_dbl(fastfood, ~length(unique(.)))\n\n restaurant        item    calories     cal_fat   total_fat     sat_fat \n          8         505         113         117          80          40 \n  trans_fat cholesterol      sodium  total_carb       fiber       sugar \n         10          52         197         103          19          31 \n    protein       vit_a       vit_c     calcium       salad \n         71          22          24          27           1 \n\n# not the task\nmap_dbl(fastfood, length)\n\n restaurant        item    calories     cal_fat   total_fat     sat_fat \n        515         515         515         515         515         515 \n  trans_fat cholesterol      sodium  total_carb       fiber       sugar \n        515         515         515         515         515         515 \n    protein       vit_a       vit_c     calcium       salad \n        515         515         515         515         515 \n\n\n\n#error\nmap_dbl(fastfood, ~length)\n\nError in `map_dbl()`:\nℹ In index: 1.\nℹ With name: restaurant.\nCaused by error:\n! Can't coerce from a primitive function to a double.\n\n#error\nmap_dbl(fastfood, length(unique()))\n\nError in unique.default(): argument \"x\" is missing, with no default\n\n#error\nmap_dbl(fastfood, ~length(unique(x)))\n\nError in `map_dbl()`:\nℹ In index: 1.\nℹ With name: restaurant.\nCaused by error in `.f()`:\n! object 'x' not found"
  },
  {
    "objectID": "slides/2025-03-03-funcmap.html#mapping-to-a-data-frame",
    "href": "slides/2025-03-03-funcmap.html#mapping-to-a-data-frame",
    "title": "Functions + Iteration",
    "section": "mapping to a data frame",
    "text": "mapping to a data frame\nWould be great if the results were a data frame! If the function outputs a data frame, then we can use list_rbind() and list_cbind() to create a data frame as the final map() output.\n\nresults as rows: map() |&gt; list_rbind()\nresults as columns: map() |&gt; list_cbind()\n\n\nfunctionmap()list_rbind()list_cbind()\n\n\n\ncol_stats &lt;- function(n) {\n  head(fastfood, n) |&gt; \n    select(calories, protein, vit_c) |&gt; \n    summarise_all(mean, na.rm = TRUE) |&gt; \n    mutate(n = paste(\"N =\", n))\n}\n\n\n\n\nout1 &lt;- map(c(10,20), col_stats)\n\nout1\n\n[[1]]\n# A tibble: 1 × 4\n  calories protein vit_c n     \n     &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; \n1      657    39.5  12.3 N = 10\n\n[[2]]\n# A tibble: 1 × 4\n  calories protein vit_c n     \n     &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; \n1     582.    34.6  12.2 N = 20\n\n\n\n\n\nout2 &lt;- map(c(10,20), col_stats) |&gt; list_rbind()\n\nout2\n\n# A tibble: 2 × 4\n  calories protein vit_c n     \n     &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; \n1     657     39.5  12.3 N = 10\n2     582.    34.6  12.2 N = 20\n\n\n\n\n\nout3 &lt;- map(c(10,20), col_stats) |&gt; list_cbind()\n\nout3\n\n# A tibble: 1 × 8\n  calories...1 protein...2 vit_c...3 n...4  calories...5 protein...6\n         &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;         &lt;dbl&gt;       &lt;dbl&gt;\n1          657        39.5      12.3 N = 10         582.        34.6\n# ℹ 2 more variables: vit_c...7 &lt;dbl&gt;, n...8 &lt;chr&gt;"
  },
  {
    "objectID": "slides/2025-03-03-funcmap.html#map_-variants-input",
    "href": "slides/2025-03-03-funcmap.html#map_-variants-input",
    "title": "Functions + Iteration",
    "section": "map_*() variants (input)",
    "text": "map_*() variants (input)\n\nWe’ve already described the difference between the columns. Now we cover the difference between the rows."
  },
  {
    "objectID": "slides/2025-03-03-funcmap.html#map2_",
    "href": "slides/2025-03-03-funcmap.html#map2_",
    "title": "Functions + Iteration",
    "section": "map2_*()",
    "text": "map2_*()\n\nmap2_*() has two arguments, .x and .y\nraise each value of .x to the power of 2\n\n\nmap_dbl(\n  .x = c(1:5), \n  .f = function(x) x ^ 2\n)\n\n[1]  1  4  9 16 25\n\n\n\nraise each value .x to the power .y\n\n\nmap2_dbl(\n  .x = c(1:5), \n  .y = c(2:6), \n  .f = ~ (.x ^ .y)\n)\n\n[1]     1     8    81  1024 15625"
  },
  {
    "objectID": "slides/2025-03-03-funcmap.html#imap",
    "href": "slides/2025-03-03-funcmap.html#imap",
    "title": "Functions + Iteration",
    "section": "imap()",
    "text": "imap()\n\nimap() is like map2()except that .y is derived from names(.x) if the data frame has names.\nIf not, .y is 1, 2, 3, … \\(n\\) where \\(n\\) is the number of items in .x. (A data frame has \\(n\\) columns.)\nThese two calls produce the same result\n\n\nimap_chr(.x = fastfood, \n         .f = ~ paste(.y, \"has a mean of\", round(mean(.x), 1))) |&gt; \nhead()\n\n                    restaurant                           item \n \"restaurant has a mean of NA\"        \"item has a mean of NA\" \n                      calories                        cal_fat \n\"calories has a mean of 530.9\"  \"cal_fat has a mean of 238.8\" \n                     total_fat                        sat_fat \n\"total_fat has a mean of 26.6\"    \"sat_fat has a mean of 8.2\" \n\nmap2_chr(.x = fastfood, \n         .y = names(fastfood),\n         .f = ~ paste(.y, \"has a mean of\", round(mean(.x), 1))) |&gt; \nhead()\n\n                    restaurant                           item \n \"restaurant has a mean of NA\"        \"item has a mean of NA\" \n                      calories                        cal_fat \n\"calories has a mean of 530.9\"  \"cal_fat has a mean of 238.8\" \n                     total_fat                        sat_fat \n\"total_fat has a mean of 26.6\"    \"sat_fat has a mean of 8.2\""
  },
  {
    "objectID": "slides/2025-03-03-funcmap.html#pmap",
    "href": "slides/2025-03-03-funcmap.html#pmap",
    "title": "Functions + Iteration",
    "section": "pmap()",
    "text": "pmap()\n\nyou can pass a named list or dataframe as arguments to a function\nfor example runif() has the parameters n, min and max\n\n\nparams\n\n# A tibble: 3 × 3\n      n   min   max\n  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1     1     1    10\n2     2    10   100\n3     3   100  1000\n\npmap(params, runif)\n\n[[1]]\n[1] 7.446396\n\n[[2]]\n[1] 60.83274 38.68139\n\n[[3]]\n[1] 629.0964 659.9852 338.5960\n\n\nOr use the pipe into pmap():\n\nparams |&gt; \n  pmap(runif)\n\n[[1]]\n[1] 4.123626\n\n[[2]]\n[1] 84.71480 23.14597\n\n[[3]]\n[1] 112.7609 737.2142 499.4133"
  },
  {
    "objectID": "slides/2025-03-03-funcmap.html#an-aside",
    "href": "slides/2025-03-03-funcmap.html#an-aside",
    "title": "Functions + Iteration",
    "section": "An aside…",
    "text": "An aside…\nInterestingly, runif() will take either a scalar or a vector as its first argument. If the first argument is a vector, runif() will return N random uniforms, where N is the length of the vector.\n\nrunif(n = 3)\n\n[1] 0.9157370 0.1648976 0.3390181\n\nrunif(n = c(1,3))\n\n[1] 0.6413758 0.2424533\n\nrunif(n = c(10000,12321412424))\n\n[1] 0.8815409 0.8312196\n\nrunif(n = c(\"rainbow\", \"unicorn\"))\n\n[1] 0.5168944 0.8654120"
  },
  {
    "objectID": "slides/2025-03-03-funcmap.html#pmap-vs-map",
    "href": "slides/2025-03-03-funcmap.html#pmap-vs-map",
    "title": "Functions + Iteration",
    "section": "pmap() vs map()",
    "text": "pmap() vs map()\nWhich means that the pmap() code will “work” in map() as well:\n\nparamspmapmap\n\n\n\nparams\n\n# A tibble: 3 × 3\n      n   min   max\n  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1     1     1    10\n2     2    10   100\n3     3   100  1000\n\n\n\n\n\nparams |&gt; \n  pmap(runif)\n\n[[1]]\n[1] 6.187329\n\n[[2]]\n[1] 89.71534 86.78699\n\n[[3]]\n[1] 696.1495 444.5580 384.5848\n\n\n\n\n\nparams |&gt; \n  map(runif)\n\n$n\n[1] 0.09000531 0.45485182 0.58598002\n\n$min\n[1] 0.5829577 0.3459598 0.6738993\n\n$max\n[1] 0.9492977 0.4714861 0.1459401"
  },
  {
    "objectID": "slides/2025-03-03-funcmap.html#pmap-with-expand_grid",
    "href": "slides/2025-03-03-funcmap.html#pmap-with-expand_grid",
    "title": "Functions + Iteration",
    "section": "pmap() with expand_grid()",
    "text": "pmap() with expand_grid()\n\nI like to use expand_grid() when I want all possible parameter combinations.\n\n\nexpand_grid(n = c(1, 2, 3), \n            min = c(1, 10),\n            max = c(10, 100)) \n\n# A tibble: 12 × 3\n       n   min   max\n   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n 1     1     1    10\n 2     1     1   100\n 3     1    10    10\n 4     1    10   100\n 5     2     1    10\n 6     2     1   100\n 7     2    10    10\n 8     2    10   100\n 9     3     1    10\n10     3     1   100\n11     3    10    10\n12     3    10   100\n\nexpand_grid(n = c(1, 2, 3), \n            min = c(1, 10),\n            max = c(10, 100)) |&gt; \npmap(runif)\n\n[[1]]\n[1] 2.360601\n\n[[2]]\n[1] 24.30222\n\n[[3]]\n[1] 10\n\n[[4]]\n[1] 48.10282\n\n[[5]]\n[1] 1.357857 4.586778\n\n[[6]]\n[1] 18.88357 98.26541\n\n[[7]]\n[1] 10 10\n\n[[8]]\n[1] 89.33924 77.82788\n\n[[9]]\n[1] 1.830481 5.007201 1.018803\n\n[[10]]\n[1] 80.23881 94.16781 74.04037\n\n[[11]]\n[1] 10 10 10\n\n[[12]]\n[1] 68.32929 20.48536 41.84097"
  },
  {
    "objectID": "slides/2025-03-03-funcmap.html#data-conclusions",
    "href": "slides/2025-03-03-funcmap.html#data-conclusions",
    "title": "Functions + Iteration",
    "section": "Data Conclusions",
    "text": "Data Conclusions\n\nBased on https://www.effectivedatastorytelling.com/post/a-deeper-dive-into-lego-bricks-and-data-stories, original source: https://www.linkedin.com/learning/instructors/bill-shander"
  },
  {
    "objectID": "slides/2025-02-10-pivotjoin.html#data-exploration",
    "href": "slides/2025-02-10-pivotjoin.html#data-exploration",
    "title": "Pivoting and Joining",
    "section": "Data Exploration",
    "text": "Data Exploration\n\nBased on https://www.effectivedatastorytelling.com/post/a-deeper-dive-into-lego-bricks-and-data-stories, original source: https://www.linkedin.com/learning/instructors/bill-shander"
  },
  {
    "objectID": "slides/2025-01-27-dataviz.html#data-visualization",
    "href": "slides/2025-01-27-dataviz.html#data-visualization",
    "title": "Better Data Visualizations",
    "section": "Data Visualization",
    "text": "Data Visualization\n\nBased on https://www.effectivedatastorytelling.com/post/a-deeper-dive-into-lego-bricks-and-data-stories, original source: https://www.linkedin.com/learning/instructors/bill-shander"
  },
  {
    "objectID": "slides/2025-03-03-funcmap.html",
    "href": "slides/2025-03-03-funcmap.html",
    "title": "Functions + Iteration",
    "section": "",
    "text": "R functions\n\n\n\n\n\n\n\n\nBased on https://www.effectivedatastorytelling.com/post/a-deeper-dive-into-lego-bricks-and-data-stories, original source: https://www.linkedin.com/learning/instructors/bill-shander"
  },
  {
    "objectID": "slides/2025-03-10-help.html#how-to-reprex",
    "href": "slides/2025-03-10-help.html#how-to-reprex",
    "title": "Help me help you",
    "section": "How to reprex()?",
    "text": "How to reprex()?\nStep 1. Write some R code and copy it into the clipboard (command-c or ctrl-c).\nStep 2. Type reprex() into the Console.\nStep 3. Look at the Viewer to the right. Copy the Viewer output into GitHub, Slack, an email, Stack Overflow, Posit Community, ChatGPT, etc."
  },
  {
    "objectID": "slides/2025-03-10-help.html#reprex-example---1st-try",
    "href": "slides/2025-03-10-help.html#reprex-example---1st-try",
    "title": "Help me help you",
    "section": "reprex() example - 1st try",
    "text": "reprex() example - 1st try\nCode:\n\njan31 + months(0:11) + days(31)\n\nOutput of reprex():\n\njan31 + months(0:11) + days(31)\n#&gt; Error in eval(expr, envir, enclos): object 'jan31' not found"
  },
  {
    "objectID": "slides/2025-03-10-help.html#reprex-example---2nd-try",
    "href": "slides/2025-03-10-help.html#reprex-example---2nd-try",
    "title": "Help me help you",
    "section": "reprex() example - 2nd try",
    "text": "reprex() example - 2nd try\nCode:\n\n  jan31 &lt;- ymd(\"2021-01-31\")\n  jan31 + months(0:11) + days(31)\n\nOutput of reprex():\n\n  jan31 &lt;- ymd(\"2021-01-31\")\n#&gt; Error in ymd(\"2021-01-31\"): could not find function \"ymd\"\n  jan31 + months(0:11) + days(31)\n#&gt; Error in eval(expr, envir, enclos): object 'jan31' not found"
  },
  {
    "objectID": "slides/2025-03-10-help.html#reprex-example---3rd-try",
    "href": "slides/2025-03-10-help.html#reprex-example---3rd-try",
    "title": "Help me help you",
    "section": "reprex() example - 3rd try",
    "text": "reprex() example - 3rd try\nCode:\n\n  library(lubridate)\n  jan31 &lt;- ymd(\"2021-01-31\")\n  jan31 + months(0:11) + days(31)\n\nOutput of reprex():\n\n  library(lubridate)\n#&gt; \n#&gt; Attaching package: 'lubridate'\n#&gt; The following objects are masked from 'package:base':\n#&gt; \n#&gt;     date, intersect, setdiff, union\n  jan31 &lt;- ymd(\"2021-01-31\")\n  jan31 + months(0:11) + days(31)\n#&gt;  [1] \"2021-03-03\" NA           \"2021-05-01\" NA           \"2021-07-01\"\n#&gt;  [6] NA           \"2021-08-31\" \"2021-10-01\" NA           \"2021-12-01\"\n#&gt; [11] NA           \"2022-01-31\""
  },
  {
    "objectID": "slides/2025-03-10-help.html#reproducible-example-w-chatgpt",
    "href": "slides/2025-03-10-help.html#reproducible-example-w-chatgpt",
    "title": "Help me help you",
    "section": "Reproducible example w ChatGPT",
    "text": "Reproducible example w ChatGPT\n\ngenerate a reprex in R to demonstrate how to reorder a factor variable"
  },
  {
    "objectID": "slides/2025-03-10-help.html#checklist-for-a-good-reprex",
    "href": "slides/2025-03-10-help.html#checklist-for-a-good-reprex",
    "title": "Help me help you",
    "section": "Checklist for a good reprex()",
    "text": "Checklist for a good reprex()\n✅ Minimal\n✅ Complete\n✅ Runnable\n✅ Clearly explains the problem"
  },
  {
    "objectID": "slides/2025-03-10-help.html#object-names",
    "href": "slides/2025-03-10-help.html#object-names",
    "title": "Help me help you",
    "section": "Object names",
    "text": "Object names\n\nThere are only two hard things in Computer Science: cache invalidation and naming things.\n\n\n– Phil Karlton"
  },
  {
    "objectID": "slides/2025-03-10-help.html#object-names-1",
    "href": "slides/2025-03-10-help.html#object-names-1",
    "title": "Help me help you",
    "section": "Object names",
    "text": "Object names\nVariable and function names should use only lowercase letters, numbers, and _. Use underscores (_) (so called snake case) to separate words within a name.\n\n# Good\nday_one\nday_1\n\n# Bad\nDayOne\ndayone\n\n# Really bad\nT &lt;- FALSE\nc &lt;- 10\nmean &lt;- function(x) sum(x)"
  },
  {
    "objectID": "slides/2025-03-10-help.html#spacing",
    "href": "slides/2025-03-10-help.html#spacing",
    "title": "Help me help you",
    "section": "Spacing",
    "text": "Spacing\nDo not put spaces inside or outside parentheses for regular funtion calls.\n\n# Good\nmean(x, na.rm = TRUE)\n\n# Bad\nmean (x, na.rm = TRUE)\nmean( x, na.rm = TRUE )"
  },
  {
    "objectID": "slides/2025-03-10-help.html#infix-operators",
    "href": "slides/2025-03-10-help.html#infix-operators",
    "title": "Help me help you",
    "section": "Infix operators",
    "text": "Infix operators\nMost infix operators (==, +, -, &lt;-, etc.) should always be surrounded by spaces:\n\n# Good\nheight &lt;- (feet * 12) + inches\nmean(x, na.rm = TRUE)\n\n# Bad\nheight&lt;-feet*12+inches\nmean(x, na.rm=TRUE)"
  },
  {
    "objectID": "slides/2025-03-10-help.html#long-function-calls",
    "href": "slides/2025-03-10-help.html#long-function-calls",
    "title": "Help me help you",
    "section": "Long function calls",
    "text": "Long function calls\nIf a function call is too long to fit on a single line, use one line each for the function name, each argument, and the closing ). This makes the code easier to read and to change later.\n\n# Good\ndo_something_very_complicated(\n  something = \"that\",\n  requires = many,\n  arguments = \"some of which may be long\"\n)\n\n# Bad\ndo_something_very_complicated(\"that\", requires, many, arguments,\n                              \"some of which may be long\"\n                              )"
  },
  {
    "objectID": "slides/2025-03-10-help.html#long-lines-piping",
    "href": "slides/2025-03-10-help.html#long-lines-piping",
    "title": "Help me help you",
    "section": "Long lines (piping)",
    "text": "Long lines (piping)\nIf the arguments to a function don’t all fit on one line, put each argument on its own line and indent:1\n\n# Good\niris |&gt;\n  summarise(\n    Sepal.Length = mean(Sepal.Length),\n    Sepal.Width = mean(Sepal.Width),\n    .by = Species\n  )\n\n# Bad\niris |&gt;\n  summarise(Sepal.Length = mean(Sepal.Length), Sepal.Width = mean(Sepal.Width), .by = Species)\n\n# Also bad\nsummarise(\n  iris,\n  Sepal.Length = mean(Sepal.Length),\n  Sepal.Width = mean(Sepal.Width),\n  .by = Species\n)\n\nThe last one isn’t great because it is hard to distinguish the data frame from the other arguments (which play very different roles in the summarize() function)."
  },
  {
    "objectID": "slides/2025-03-10-help.html#short-lines-piping",
    "href": "slides/2025-03-10-help.html#short-lines-piping",
    "title": "Help me help you",
    "section": "Short lines (piping)",
    "text": "Short lines (piping)\nSometimes it’s useful to include a short pipe as an argument to a function in a longer pipe. Carefully consider whether the code is more readable with a short inline pipe or if it’s better to move the code outside the pipe and give it an evocative name.\n\n# Good\nx |&gt;\n  semi_join(y |&gt; filter(is_valid))\n\n# Ok\nx |&gt;\n  select(a, b, w) |&gt;\n  left_join(y |&gt; select(a, b, v), join_by(a, b))\n\n# Better\nx_join &lt;- x |&gt; select(a, b, w)\ny_join &lt;- y |&gt; select(a, b, v)\nleft_join(x_join, y_join, join_by(a, b))"
  },
  {
    "objectID": "slides/2025-03-10-help.html#style",
    "href": "slides/2025-03-10-help.html#style",
    "title": "Help me help you",
    "section": "Style",
    "text": "Style\n\nThe point is that coding happens in community.\n\nNot only do you want your code to run well, but you want other people to be able to understand it and use it.\nThe more that you and others use the same syntax, the better the communication will be."
  },
  {
    "objectID": "slides/2025-03-10-help.html#data-communication",
    "href": "slides/2025-03-10-help.html#data-communication",
    "title": "Help me help you",
    "section": "Data Communication",
    "text": "Data Communication\n\nBased on https://www.effectivedatastorytelling.com/post/a-deeper-dive-into-lego-bricks-and-data-stories, original source: https://www.linkedin.com/learning/instructors/bill-shander"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#goals-of-simulating-complicated-models",
    "href": "slides/2025-03-12-iters.html#goals-of-simulating-complicated-models",
    "title": "Iterations",
    "section": "Goals of Simulating Complicated Models",
    "text": "Goals of Simulating Complicated Models\nThe goal of simulating a complicated model is not only to create a program which will provide the desired results. We also hope to be able to write code such that:\n\nThe problem is broken down into small pieces.\nThe problem has checks in it to see what works (run the lines inside the functions!).\nuses simple code (as often as possible)."
  },
  {
    "objectID": "slides/2025-03-12-iters.html#simulate-to",
    "href": "slides/2025-03-12-iters.html#simulate-to",
    "title": "Iterations",
    "section": "Simulate to…",
    "text": "Simulate to…\n\n\n… estimate probabilities (easier than calculus).\n… understand complicated models."
  },
  {
    "objectID": "slides/2025-03-12-iters.html#aside-ifelse",
    "href": "slides/2025-03-12-iters.html#aside-ifelse",
    "title": "Iterations",
    "section": "Aside: ifelse()",
    "text": "Aside: ifelse()\n\ndata.frame(value = c(-2:2)) |&gt;\n  mutate(abs_value = ifelse(value &gt;=0, value, -value))  # abs val\n\n  value abs_value\n1    -2         2\n2    -1         1\n3     0         0\n4     1         1\n5     2         2"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#aside-case_when",
    "href": "slides/2025-03-12-iters.html#aside-case_when",
    "title": "Iterations",
    "section": "Aside: case_when()",
    "text": "Aside: case_when()\n\nset.seed(4747)\ndiamonds |&gt; select(carat, cut, color, price) |&gt;\n  sample_n(20) |&gt;\n  mutate(price_cat = case_when(\n    price &gt; 10000 ~ \"expensive\",\n    price &gt; 1500 ~ \"medium\", \n    TRUE ~ \"inexpensive\"))\n\n# A tibble: 20 × 5\n   carat cut       color price price_cat  \n   &lt;dbl&gt; &lt;ord&gt;     &lt;ord&gt; &lt;int&gt; &lt;chr&gt;      \n 1  1.23 Very Good F     10276 expensive  \n 2  0.35 Premium   H       706 inexpensive\n 3  0.7  Good      E      2782 medium     \n 4  0.4  Ideal     D      1637 medium     \n 5  0.53 Ideal     G      1255 inexpensive\n 6  2.22 Ideal     G     14637 expensive  \n 7  0.3  Ideal     G       878 inexpensive\n 8  1.05 Ideal     H      4223 medium     \n 9  0.53 Premium   E      1654 medium     \n10  1.7  Ideal     H      7068 medium     \n11  0.31 Good      E       698 inexpensive\n12  0.31 Ideal     F       840 inexpensive\n13  1.03 Ideal     H      4900 medium     \n14  0.31 Premium   G       698 inexpensive\n15  1.56 Premium   G      8858 medium     \n16  1.71 Premium   G     11032 expensive  \n17  1    Good      E      5345 medium     \n18  1.86 Ideal     J     10312 expensive  \n19  1.08 Very Good E      3726 medium     \n20  0.31 Premium   E       698 inexpensive"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#aside-sample",
    "href": "slides/2025-03-12-iters.html#aside-sample",
    "title": "Iterations",
    "section": "Aside: sample()",
    "text": "Aside: sample()\nsampling, shuffling, and resampling: sample()\n\nset.seed(47)\nalph &lt;- letters[1:10]\nalph\n\n [1] \"a\" \"b\" \"c\" \"d\" \"e\" \"f\" \"g\" \"h\" \"i\" \"j\"\n\nsample(alph, 5, replace = FALSE) # sample (from a population)\n\n[1] \"i\" \"b\" \"g\" \"d\" \"a\"\n\nsample(alph, 5, replace = TRUE) # sample (from a population)\n\n[1] \"j\" \"g\" \"f\" \"i\" \"f\"\n\nsample(alph, 10, replace = FALSE)  # shuffle\n\n [1] \"f\" \"h\" \"i\" \"e\" \"g\" \"d\" \"c\" \"j\" \"b\" \"a\"\n\nsample(alph, 10, replace = TRUE)  # resample\n\n [1] \"e\" \"j\" \"e\" \"b\" \"e\" \"c\" \"f\" \"a\" \"e\" \"a\""
  },
  {
    "objectID": "slides/2025-03-12-iters.html#aside-set.seed",
    "href": "slides/2025-03-12-iters.html#aside-set.seed",
    "title": "Iterations",
    "section": "Aside: set.seed()",
    "text": "Aside: set.seed()\nWhat if we want to be able to generate the same random numbers (here on the interval from 0 to 1) over and over?\n\nset.seed(4747)\nrunif(4, 0, 1) # random uniform numbers\n\n[1] 0.1949071 0.3390270 0.5147919 0.4516470\n\nset.seed(123)\nrunif(4, 0, 1) # random uniform numbers\n\n[1] 0.2875775 0.7883051 0.4089769 0.8830174\n\nset.seed(4747)\nrunif(4, 0, 1) # random uniform numbers\n\n[1] 0.1949071 0.3390270 0.5147919 0.4516470"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#step-1-representing-the-hats",
    "href": "slides/2025-03-12-iters.html#step-1-representing-the-hats",
    "title": "Iterations",
    "section": "Step 1: representing the hats",
    "text": "Step 1: representing the hats\n\nhats &lt;- c(1:10)\nhats\n\n [1]  1  2  3  4  5  6  7  8  9 10"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#step-2-everyone-draws-a-hat",
    "href": "slides/2025-03-12-iters.html#step-2-everyone-draws-a-hat",
    "title": "Iterations",
    "section": "Step 2: everyone draws a hat",
    "text": "Step 2: everyone draws a hat\n\nset.seed(47)\nrandom_hats &lt;- sample(hats, size = 10, replace = FALSE)\n\nhats\n\n [1]  1  2  3  4  5  6  7  8  9 10\n\nrandom_hats\n\n [1]  9  2  7  4  1 10  6  3  5  8"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#step-3-who-got-their-original-hat",
    "href": "slides/2025-03-12-iters.html#step-3-who-got-their-original-hat",
    "title": "Iterations",
    "section": "Step 3: who got their original hat?",
    "text": "Step 3: who got their original hat?\n\nhats == random_hats\n\n [1] FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE\n\n# TRUE is 1, FALSE is 0\nsum(hats == random_hats)\n\n[1] 2\n\n# did at least one person get their hat?\nsum(hats == random_hats) &gt; 0\n\n[1] TRUE"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#code-so-far",
    "href": "slides/2025-03-12-iters.html#code-so-far",
    "title": "Iterations",
    "section": "Code so far",
    "text": "Code so far\n\nset.seed(47)\nhats &lt;- c(1:10)\nrandom_hats &lt;- sample(hats, size = 10, replace = FALSE)\nsum(hats == random_hats) &gt; 0\n\n[1] TRUE\n\n\n\nDo we have a good estimate of the probability of interest?"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#function",
    "href": "slides/2025-03-12-iters.html#function",
    "title": "Iterations",
    "section": "Function",
    "text": "Function\n\nremove the magic number 10\n\n\nhat_match &lt;- function(n){\n  hats &lt;- 1:n\n  random_hats &lt;- sample(hats, size = n, replace = FALSE)\n  sum(hats == random_hats) &gt; 0\n}\n\nhat_match(10)\n\n[1] TRUE\n\nhat_match(47)\n\n[1] FALSE"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#iterate",
    "href": "slides/2025-03-12-iters.html#iterate",
    "title": "Iterations",
    "section": "Iterate",
    "text": "Iterate\n\nmap_lgl(c(1:10), ~hat_match(n = 10))\n\n [1]  TRUE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE\n\nmap_lgl(c(1:10), ~hat_match(n = 10)) |&gt; \n  mean()\n\n[1] 0.5"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#reproducible",
    "href": "slides/2025-03-12-iters.html#reproducible",
    "title": "Iterations",
    "section": "Reproducible",
    "text": "Reproducible\n\nset.seed(4747)\nnum_iter &lt;- 10000\n\nmap_lgl(c(1:num_iter), ~hat_match(n = 10)) |&gt; \n  mean()\n\n[1] 0.6329\n\n\n\nset.seed(123)\nnum_iter &lt;- 10000\n\nmap_lgl(c(1:num_iter), ~hat_match(n = 10)) |&gt; \n  mean()\n\n[1] 0.6333"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#vary-number-of-hats",
    "href": "slides/2025-03-12-iters.html#vary-number-of-hats",
    "title": "Iterations",
    "section": "Vary number of hats",
    "text": "Vary number of hats\n\nhat_match_prob &lt;- function(n, reps){\n  prob &lt;- map_lgl(c(1:reps), ~hat_match(n = n)) |&gt; \n    mean()\n  return(data.frame(match_prob = prob, num_hats = n))\n}\n\nhat_match_prob(47, 200)\n\n  match_prob num_hats\n1       0.62       47"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#visualizing",
    "href": "slides/2025-03-12-iters.html#visualizing",
    "title": "Iterations",
    "section": "Visualizing",
    "text": "Visualizing\n\nset.seed(47)\nnum_iter &lt;- 10000\nmap(c(1:20), hat_match_prob, reps = num_iter) |&gt; \n  list_rbind() |&gt; \n  ggplot(aes(x = num_hats, y = match_prob)) + \n  geom_line() + \n  labs(y = \"probability of at least one match\",\n       x = \"number of hats\")"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#example-2-birthday-problem",
    "href": "slides/2025-03-12-iters.html#example-2-birthday-problem",
    "title": "Iterations",
    "section": "Example 2: Birthday Problem",
    "text": "Example 2: Birthday Problem\nWhat is the probability that in a room of 29 people, at least 2 of them have the same birthday?"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#step-1-representing-the-birthdays",
    "href": "slides/2025-03-12-iters.html#step-1-representing-the-birthdays",
    "title": "Iterations",
    "section": "Step 1: representing the birthdays",
    "text": "Step 1: representing the birthdays\n\nset.seed(7474)\nclass_birthdays &lt;- sample(c(1:365), size = 28, replace = TRUE)\nclass_birthdays \n\n [1]  65 340 246 244 355 248 298 271 363 173 307 260 195 300 189 154 319  51 139\n[20] 241 275 271 102 363 201 165  35  13"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#step-2-any-duplicates",
    "href": "slides/2025-03-12-iters.html#step-2-any-duplicates",
    "title": "Iterations",
    "section": "Step 2: any duplicates?",
    "text": "Step 2: any duplicates?\n\nduplicated(class_birthdays)\n\n [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE\n[13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE  TRUE\n[25] FALSE FALSE FALSE FALSE\n\nsum(duplicated(class_birthdays))\n\n[1] 2"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#function-1",
    "href": "slides/2025-03-12-iters.html#function-1",
    "title": "Iterations",
    "section": "Function",
    "text": "Function\n\nremove the magic number 10\n\n\nhat_match &lt;- function(n){\n  hats &lt;- c(1:n)\n  random_hats &lt;- sample(hats, size = n, replace = FALSE)\n  sum(hats == random_hats) &gt; 0\n}\n\nhat_match(10)\n\n[1] TRUE\n\nhat_match(47)\n\n[1] TRUE"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#iterate-1",
    "href": "slides/2025-03-12-iters.html#iterate-1",
    "title": "Iterations",
    "section": "Iterate",
    "text": "Iterate\n\nmap_dbl(c(1:10), class_duplicates)\n\n [1] 0 1 0 0 0 0 0 0 1 0"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#improve",
    "href": "slides/2025-03-12-iters.html#improve",
    "title": "Iterations",
    "section": "Improve",
    "text": "Improve\n\nclass_duplicates &lt;- function(class_size){\n  class_birthdays &lt;- sample(c(1:365), size = class_size, replace = TRUE)\n  num_duplicates &lt;- sum(duplicated(class_birthdays))\n  return(ifelse(num_duplicates &gt; 0, 1, 0))\n}\n\nset.seed(47)\nnum_stud &lt;- 28\nmap_dbl(c(1:10), ~class_duplicates(class_size = num_stud))\n\n [1] 0 1 0 1 1 1 1 0 1 0"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#many-classrooms",
    "href": "slides/2025-03-12-iters.html#many-classrooms",
    "title": "Iterations",
    "section": "Many classrooms",
    "text": "Many classrooms\n\nset.seed(47)\nnum_stud &lt;- 28\nnum_class &lt;- 1000\nmap_dbl(c(1:num_class), ~class_duplicates(class_size = num_stud)) |&gt; \n  mean()\n\n[1] 0.649"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#vary-number-of-students",
    "href": "slides/2025-03-12-iters.html#vary-number-of-students",
    "title": "Iterations",
    "section": "Vary number of students",
    "text": "Vary number of students\n\nset.seed(47)\nnum_stud_upper &lt;- 28\nnum_class &lt;- 100\n\nbirth_match_prob &lt;- function(num_stud, reps){\n  prob &lt;- map_dbl(c(1:reps), ~class_duplicates(class_size = num_stud)) |&gt; \n    mean()\n  return(data.frame(match_prob = prob, num_stud = num_stud))\n}\n\nmap(c(1:num_stud_upper), birth_match_prob, reps = num_class) |&gt; \n  list_rbind()\n\n   match_prob num_stud\n1        0.00        1\n2        0.00        2\n3        0.00        3\n4        0.00        4\n5        0.03        5\n6        0.03        6\n7        0.04        7\n8        0.06        8\n9        0.11        9\n10       0.13       10\n11       0.14       11\n12       0.18       12\n13       0.18       13\n14       0.25       14\n15       0.25       15\n16       0.32       16\n17       0.37       17\n18       0.43       18\n19       0.44       19\n20       0.40       20\n21       0.43       21\n22       0.47       22\n23       0.48       23\n24       0.47       24\n25       0.61       25\n26       0.67       26\n27       0.63       27\n28       0.66       28"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#visualize",
    "href": "slides/2025-03-12-iters.html#visualize",
    "title": "Iterations",
    "section": "Visualize",
    "text": "Visualize\n\nset.seed(123)\nnum_stud_upper &lt;- 40\nnum_class &lt;- 1000\n\nmap(c(1:num_stud_upper), birth_match_prob, reps = num_class) |&gt; \n  list_rbind()  |&gt; \n  ggplot(aes(x = num_stud, y = match_prob)) + \n  geom_line() + \n  labs(y = \"probability of birthday match\",\n       x = \"number of students in class\")"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#simulate-to-1",
    "href": "slides/2025-03-12-iters.html#simulate-to-1",
    "title": "Iterations",
    "section": "Simulate to…",
    "text": "Simulate to…\n\n… estimate probabilities (easier than calculus).\n… understand complicated models."
  },
  {
    "objectID": "slides/2025-03-12-iters.html#bias-in-a-model",
    "href": "slides/2025-03-12-iters.html#bias-in-a-model",
    "title": "Iterations",
    "section": "Bias in a model",
    "text": "Bias in a model\nPopulation:\ntalent ~ Normal (100, 15)\ngrades ~ Normal (talent, 15)\nSAT ~ Normal (talent, 15)\nThe example is taken directly (and mostly verbatim) from a blog by Aaron Roth Algorithmic Unfairness Without Any Bias Baked In."
  },
  {
    "objectID": "slides/2025-03-12-iters.html#goal-for-admitting-students",
    "href": "slides/2025-03-12-iters.html#goal-for-admitting-students",
    "title": "Iterations",
    "section": "Goal for admitting students",
    "text": "Goal for admitting students\nCollege wants to admit students with\n\ntalent &gt; 115\n\n… but they only have access to grades and SAT which are noisy estimates of talent."
  },
  {
    "objectID": "slides/2025-03-12-iters.html#plan-for-accepting-students",
    "href": "slides/2025-03-12-iters.html#plan-for-accepting-students",
    "title": "Iterations",
    "section": "Plan for accepting students",
    "text": "Plan for accepting students\n\nRun a regression on a training dataset (talent is known for existing students)\nFind a model which predicts talent based on grades and SAT\nChoose students for whom predicted talent is above 115"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#flaw-in-the-plan",
    "href": "slides/2025-03-12-iters.html#flaw-in-the-plan",
    "title": "Iterations",
    "section": "Flaw in the plan …",
    "text": "Flaw in the plan …\n\nthere are two populations of students, the Reds and Blues.\nReds are the majority population (99%), and Blues are a small minority population (1%)\nthe Reds and the Blues are no different when it comes to talent: they both have the same talent distribution, as described above.\nthere is no bias baked into the grading or the exams: both the Reds and the Blues also have exactly the same grade and exam score distributions"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#what-is-really-different",
    "href": "slides/2025-03-12-iters.html#what-is-really-different",
    "title": "Iterations",
    "section": "What is really different?",
    "text": "What is really different?\n\nBut there is one difference: the Blues have more money than the Reds, so they each take the SAT twice, and report only the highest of the two scores to the college. This results in a small but noticeable bump in their average SAT scores, compared to the Reds."
  },
  {
    "objectID": "slides/2025-03-12-iters.html#key-aspect",
    "href": "slides/2025-03-12-iters.html#key-aspect",
    "title": "Iterations",
    "section": "Key aspect:",
    "text": "Key aspect:\n\nThe value of SAT means something different for the Reds versus the Blues\n\n(They have different feature distributions.)"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#lets-see-what-happens",
    "href": "slides/2025-03-12-iters.html#lets-see-what-happens",
    "title": "Iterations",
    "section": "Let’s see what happens …",
    "text": "Let’s see what happens …"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#two-models",
    "href": "slides/2025-03-12-iters.html#two-models",
    "title": "Iterations",
    "section": "Two models:",
    "text": "Two models:\nRed model (SAT taken once):\n\n\n# A tibble: 3 × 5\n  term        estimate std.error statistic p.value\n  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;\n1 (Intercept)   33.2     0.152        218.       0\n2 SAT            0.334   0.00149      224.       0\n3 grades         0.334   0.00149      225.       0\n\n\nBlue model (SAT is max score of two):\n\n\n# A tibble: 3 × 5\n  term        estimate std.error statistic   p.value\n  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;\n1 (Intercept)   25.3      1.60        15.8 2.04e- 50\n2 SAT            0.432    0.0161      26.7 3.35e-119\n3 grades         0.277    0.0154      18.0 6.83e- 63"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#new-data",
    "href": "slides/2025-03-12-iters.html#new-data",
    "title": "Iterations",
    "section": "New data",
    "text": "New data\n\nGenerate new data, use the two models separately.\nCan the models predict if a student has talent &gt; 115?"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#new-data-1",
    "href": "slides/2025-03-12-iters.html#new-data-1",
    "title": "Iterations",
    "section": "New data",
    "text": "New data\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n# A tibble: 2 × 5\n  color   tpr    fpr   fnr error\n  &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 blue  0.503 0.0379 0.497 0.109\n2 red   0.509 0.0378 0.491 0.109"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#two-models-doesnt-seem-right",
    "href": "slides/2025-03-12-iters.html#two-models-doesnt-seem-right",
    "title": "Iterations",
    "section": "TWO models doesn’t seem right????",
    "text": "TWO models doesn’t seem right????\nWhat if we fit only one model to the entire dataset?\nAfter all, there are laws against using protected classes to make decisions (housing, jobs, money loans, college, etc.)\n\n\n# A tibble: 3 × 5\n  term        estimate std.error statistic p.value\n  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;\n1 (Intercept)   33.1     0.151        219.       0\n2 SAT            0.334   0.00148      225.       0\n3 grades         0.334   0.00148      226.       0\n\n\n(The coefficients kinda look like the red model…)"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#how-do-the-error-rates-change",
    "href": "slides/2025-03-12-iters.html#how-do-the-error-rates-change",
    "title": "Iterations",
    "section": "How do the error rates change?",
    "text": "How do the error rates change?\n\n\n\n\n\n\n\n\n\n\n\n\nOne model:\n\n\n# A tibble: 2 × 5\n  color   tpr    fpr   fnr error\n  &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 blue  0.619 0.0627 0.381 0.112\n2 red   0.507 0.0375 0.493 0.109\n\n\nTwo separate models:\n\n\n# A tibble: 2 × 5\n  color   tpr    fpr   fnr error\n  &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 blue  0.503 0.0379 0.497 0.109\n2 red   0.509 0.0378 0.491 0.109"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#what-did-we-learn",
    "href": "slides/2025-03-12-iters.html#what-did-we-learn",
    "title": "Iterations",
    "section": "What did we learn?",
    "text": "What did we learn?\n\nwith two populations that have different feature distributions, learning a single classifier (that is prohibited from discriminating based on population) will fit the bigger of the two populations\n\n\ndepending on the nature of the distribution difference, it can be either to the benefit or the detriment of the minority population\nno explicit human bias, either on the part of the algorithm designer or the data gathering process\nthe problem is exacerbated if we artificially force the algorithm to be group blind\nwell-intentioned “fairness” regulations prohibiting decision makers form taking sensitive attributes into account can actually make things less fair and less accurate at the same time"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#simulate",
    "href": "slides/2025-03-12-iters.html#simulate",
    "title": "Iterations",
    "section": "Simulate?",
    "text": "Simulate?\n\ndifferent varying proportions\neffect due to variability\neffect due to SAT coefficient\ndifferent number of times the blues get to take the test\netc."
  },
  {
    "objectID": "slides/2025-03-12-iters.html#aside-rnorm",
    "href": "slides/2025-03-12-iters.html#aside-rnorm",
    "title": "Iterations",
    "section": "Aside: rnorm()",
    "text": "Aside: rnorm()\nrnorm() calculates random normal values\n\nrnorm(3)\n\n[1] 1.0598770 0.2813142 0.1483487\n\nrnorm(3, mean = 0, sd = 1)\n\n[1] -1.5222088 -0.2609479  0.1393759\n\nrnorm(4, mean = 47, sd = 5)\n\n[1] 48.91283 45.11651 50.69179 42.14037"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#asset-allocation-1",
    "href": "slides/2025-03-12-iters.html#asset-allocation-1",
    "title": "Iterations",
    "section": "Asset allocation",
    "text": "Asset allocation\nTask: to model an asset allocation problem where you decide what portion of wealth should be allocated to risk-free investment or high-risk investment\n\nthe function calculates returns based on different asset allocations.\n\n\ncalculate_return &lt;- function(step, alpha) {\n  risk_free_rate &lt;- 1.03\n  risky_rate &lt;- rnorm(1, mean = 0, sd = 1) * 0.05 + 1\n  return(data.frame(step = step, \n                    return = (1 - alpha) * risk_free_rate + alpha * risky_rate))\n}\n\ncalculate_return(\"unicorn\", 0.47)\n\n     step   return\n1 unicorn 1.034815"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#let-alpha-0.5",
    "href": "slides/2025-03-12-iters.html#let-alpha-0.5",
    "title": "Iterations",
    "section": "Let alpha = 0.5",
    "text": "Let alpha = 0.5\n(half risky, half risk free)\n\ndecision_steps &lt;- 12\n\npmap(data.frame(step = c(1:decision_steps),\n                alpha = rep(0.5, decision_steps)),\n     calculate_return) |&gt; \n  list_rbind()\n\n   step    return\n1     1 1.0244265\n2     2 0.9740712\n3     3 1.0111959\n4     4 1.0382488\n5     5 1.0019058\n6     6 0.9847674\n7     7 1.0296142\n8     8 0.9924038\n9     9 1.0381949\n10   10 1.0088956\n11   11 1.0370043\n12   12 1.0107057"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#many-runs",
    "href": "slides/2025-03-12-iters.html#many-runs",
    "title": "Iterations",
    "section": "Many runs",
    "text": "Many runs\n\nruns &lt;- 10\ndecision_steps &lt;- 12\n\nrun_func &lt;- function(run, steps, alpha){\n  pmap(data.frame(step = c(1:steps),\n                  alpha = rep(alpha, steps)),\n       calculate_return) |&gt; \n    list_rbind() |&gt; \n    cbind(run_number = as.factor(run))\n}\n\nrun_func(\"happy\", 12, 0.5)\n\n   step    return run_number\n1     1 0.9972576      happy\n2     2 1.0503818      happy\n3     3 1.0133106      happy\n4     4 1.0305766      happy\n5     5 1.0424264      happy\n6     6 1.0278066      happy\n7     7 1.0088744      happy\n8     8 1.0280513      happy\n9     9 1.0270015      happy\n10   10 1.0495620      happy\n11   11 1.0483569      happy\n12   12 1.0089000      happy\n\nmap(c(1:runs), run_func, \n    steps = decision_steps,\n    alpha = 0.5) |&gt; \n  list_rbind()\n\n    step    return run_number\n1      1 1.0037332          1\n2      2 1.0305053          1\n3      3 1.0177365          1\n4      4 0.9851848          1\n5      5 1.0200471          1\n6      6 0.9777514          1\n7      7 1.0139097          1\n8      8 1.0394459          1\n9      9 1.0311656          1\n10    10 1.0111325          1\n11    11 1.0600142          1\n12    12 0.9529528          1\n13     1 1.0511925          2\n14     2 1.0188551          2\n15     3 1.0546398          2\n16     4 1.0286009          2\n17     5 1.0090312          2\n18     6 1.0116230          2\n19     7 0.9982508          2\n20     8 1.0397553          2\n21     9 0.9748453          2\n22    10 0.9994628          2\n23    11 1.0325967          2\n24    12 1.0265163          2\n25     1 0.9846161          3\n26     2 1.0106626          3\n27     3 1.0085478          3\n28     4 1.0253148          3\n29     5 0.9879959          3\n30     6 1.0761028          3\n31     7 1.0095107          3\n32     8 1.0417969          3\n33     9 1.0299429          3\n34    10 1.0483370          3\n35    11 1.0039636          3\n36    12 1.0177251          3\n37     1 0.9957903          4\n38     2 1.0446025          4\n39     3 1.0151633          4\n40     4 1.0208127          4\n41     5 1.0138992          4\n42     6 1.0241599          4\n43     7 0.9636553          4\n44     8 1.0330971          4\n45     9 1.0707355          4\n46    10 1.0341161          4\n47    11 1.0076286          4\n48    12 1.0437015          4\n49     1 1.0166442          5\n50     2 1.0424126          5\n51     3 0.9944647          5\n52     4 0.9669553          5\n53     5 1.0152975          5\n54     6 1.0145272          5\n55     7 1.0372179          5\n56     8 1.0407917          5\n57     9 0.9811040          5\n58    10 1.0213106          5\n59    11 0.9962674          5\n60    12 1.0518327          5\n61     1 0.9804384          6\n62     2 1.0313983          6\n63     3 1.0456102          6\n64     4 1.0019782          6\n65     5 0.9848773          6\n66     6 1.0166534          6\n67     7 1.0338028          6\n68     8 1.0222348          6\n69     9 0.9802758          6\n70    10 1.0156817          6\n71    11 1.0424656          6\n72    12 1.0575701          6\n73     1 1.0750144          7\n74     2 1.0058097          7\n75     3 0.9927478          7\n76     4 1.0009444          7\n77     5 1.0055233          7\n78     6 1.0573874          7\n79     7 0.9575212          7\n80     8 0.9957913          7\n81     9 1.0893832          7\n82    10 1.0135442          7\n83    11 1.0152496          7\n84    12 1.0331392          7\n85     1 1.0304361          8\n86     2 1.0111527          8\n87     3 1.0077437          8\n88     4 1.0031964          8\n89     5 1.0507032          8\n90     6 0.9713326          8\n91     7 1.0101054          8\n92     8 1.0556004          8\n93     9 0.9991680          8\n94    10 1.0232786          8\n95    11 1.0182200          8\n96    12 0.9987042          8\n97     1 1.0250592          9\n98     2 1.0300056          9\n99     3 0.9890955          9\n100    4 1.0395173          9\n101    5 1.0147912          9\n102    6 1.0243437          9\n103    7 0.9964191          9\n104    8 1.0782102          9\n105    9 0.9746246          9\n106   10 1.0194040          9\n107   11 1.0383502          9\n108   12 1.0508320          9\n109    1 1.0563048         10\n110    2 0.9850083         10\n111    3 1.0395162         10\n112    4 0.9711030         10\n113    5 1.0193429         10\n114    6 1.0259306         10\n115    7 0.9889117         10\n116    8 1.0418063         10\n117    9 1.0055857         10\n118   10 1.0155720         10\n119   11 1.0350093         10\n120   12 0.9916229         10"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#cummulative-product",
    "href": "slides/2025-03-12-iters.html#cummulative-product",
    "title": "Iterations",
    "section": "Cummulative product",
    "text": "Cummulative product\n\nnumbers &lt;- sample(1:5)\nnumbers\n\n[1] 5 4 2 1 3\n\ncumprod(numbers)\n\n[1]   5  20  40  40 120"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#cummulative-rates",
    "href": "slides/2025-03-12-iters.html#cummulative-rates",
    "title": "Iterations",
    "section": "Cummulative rates",
    "text": "Cummulative rates\n\nmap(c(1:runs), run_func, \n    steps = decision_steps,\n    alpha = 0.5) |&gt; \n  list_rbind() |&gt; \n  group_by(run_number) |&gt; \n  mutate(compound_return = cumprod(return))\n\n# A tibble: 120 × 4\n# Groups:   run_number [10]\n    step return run_number compound_return\n   &lt;int&gt;  &lt;dbl&gt; &lt;fct&gt;                &lt;dbl&gt;\n 1     1  0.984 1                    0.984\n 2     2  1.01  1                    0.990\n 3     3  1.04  1                    1.03 \n 4     4  0.987 1                    1.02 \n 5     5  1.04  1                    1.05 \n 6     6  1.04  1                    1.09 \n 7     7  0.994 1                    1.09 \n 8     8  1.01  1                    1.10 \n 9     9  1.01  1                    1.12 \n10    10  0.994 1                    1.11 \n# ℹ 110 more rows"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#returns-over-time",
    "href": "slides/2025-03-12-iters.html#returns-over-time",
    "title": "Iterations",
    "section": "Returns over time",
    "text": "Returns over time\n\ngraphcode\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nruns &lt;- 20\nmap(c(1:runs), run_func, \n    steps = decision_steps,\n    alpha = 0.5) |&gt; \n  list_rbind() |&gt; \n  group_by(run_number) |&gt; \n  mutate(compound_return = cumprod(return)) |&gt; \n  ggplot(aes(x = step, y = compound_return)) +\n  geom_line(aes(color = run_number)) +\n  theme(legend.position = \"none\") +\n  scale_x_continuous(breaks = seq(1,12)) + \n  labs(title = \"Simulations of returns from asset allocation, alpha = 0.5\")"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#change-the-allocation",
    "href": "slides/2025-03-12-iters.html#change-the-allocation",
    "title": "Iterations",
    "section": "Change the allocation",
    "text": "Change the allocation\n\ngraphcode\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nruns &lt;- 20\nmap(c(1:runs), run_func, \n    steps = decision_steps, \n    alpha = 0.1) |&gt; \n  list_rbind() |&gt; \n  group_by(run_number) |&gt; \n  mutate(compound_return = cumprod(return)) |&gt; \n  ggplot(aes(x = step, y = compound_return)) +\n  geom_line(aes(color = run_number)) +\n  theme(legend.position = \"none\") +\n  scale_x_continuous(breaks = seq(1,12)) + \n  labs(title = \"Simulations of returns from asset allocation, alpha = 0.1\")"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#change-the-allocation-1",
    "href": "slides/2025-03-12-iters.html#change-the-allocation-1",
    "title": "Iterations",
    "section": "Change the allocation",
    "text": "Change the allocation\n\ngraphcode\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nruns &lt;- 20\nmap(c(1:runs), run_func, \n    steps = decision_steps, \n    alpha = 0.9) |&gt; \n  list_rbind() |&gt; \n  group_by(run_number) |&gt; \n  mutate(compound_return = cumprod(return)) |&gt; \n  ggplot(aes(x = step, y = compound_return)) +\n  geom_line(aes(color = run_number)) +\n  theme(legend.position = \"none\") +\n  scale_x_continuous(breaks = seq(1,12)) + \n  labs(title = \"Simulations of returns from asset allocation, alpha = 0.9\")"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#change-the-return",
    "href": "slides/2025-03-12-iters.html#change-the-return",
    "title": "Iterations",
    "section": "Change the return",
    "text": "Change the return\n\ncalculate returnrun function\n\n\n\ncalculate_return_sd10 &lt;- function(step, alpha) {\n  risk_free_rate &lt;- 1.03\n  risky_rate &lt;- rnorm(1, mean = 0, sd = 10) * 0.05 + 1\n  return(data.frame(step = step, \n                    return = (1 - alpha) * risk_free_rate + alpha * risky_rate))\n}\n\ncalculate_return(\"unicorn\", 0.47)\n\n     step   return\n1 unicorn 0.987021\n\n\n\n\n\nrun_func_sd10 &lt;- function(run, steps, alpha){\n  pmap(data.frame(step = c(1:steps),\n                  alpha = rep(alpha, steps)),\n       calculate_return_sd10) |&gt; \n    list_rbind() |&gt; \n    cbind(run_number = as.factor(run))\n}"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#does-the-change-impact-long-term",
    "href": "slides/2025-03-12-iters.html#does-the-change-impact-long-term",
    "title": "Iterations",
    "section": "Does the change impact long-term?",
    "text": "Does the change impact long-term?\n\ngraphcode\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nruns &lt;- 20\nmap(c(1:runs), run_func_sd10, \n    steps = decision_steps,\n    alpha = 0.5) |&gt; \n  list_rbind() |&gt; \n  group_by(run_number) |&gt; \n  mutate(compound_return = cumprod(return)) |&gt; \n  ggplot(aes(x = step, y = compound_return)) +\n  geom_line(aes(color = run_number)) +\n  theme(legend.position = \"none\") +\n  scale_x_continuous(breaks = seq(1,12)) + \n  labs(title = \"Simulations of returns from asset allocation, alpha = 0.5\")"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#example-2-sally-joan",
    "href": "slides/2025-03-12-iters.html#example-2-sally-joan",
    "title": "Iterations",
    "section": "Example 2: Sally & Joan",
    "text": "Example 2: Sally & Joan\nConsider a situation where Sally and Joan plan to meet to study in their college campus center (Mosteller 1987; Baumer, Kaplan, and Horton 2021). They are both impatient people who will wait only 10 minutes for the other before leaving.\nBut their planning was incomplete. Sally said, “Meet me between 7 and 8 tonight at the student center.” When should Joan plan to arrive at the campus center? And what is the probability that they actually meet?"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#simulate-their-meeting",
    "href": "slides/2025-03-12-iters.html#simulate-their-meeting",
    "title": "Iterations",
    "section": "Simulate their meeting",
    "text": "Simulate their meeting\nAssume that Alex and Jordan are both equally likely to arrive at the campus center anywhere between 7pm and 8pm.\n\nfunctionmap()for() loopvectorized\n\n\n\nmeet_func &lt;- function(nada){\n  data.frame(\n    alex = runif(1, min = 0, max = 60),\n    jordan = runif(1, min = 0, max = 60)) |&gt; \n    mutate(result = ifelse(abs(alex - jordan) &lt;= 10, \n                           \"They meet\", \n                           \"They do not\"\n  )\n  )\n}\n\n\n\n\nn &lt;- 100000\n\ntic()\nmeet_map &lt;- 1:n |&gt; \n  map(meet_func) |&gt; \n  list_rbind()\ntoc()\n\n32.822 sec elapsed\n\n\n\n\n\ntic()\nmeet_for &lt;- data.frame()\nfor(i in c(1:n)){\n  meet_for &lt;- meet_for |&gt; rbind(\n    data.frame(\n      alex = runif(1, min = 0, max = 60),\n      jordan = runif(1, min = 0, max = 60)) |&gt; \n      mutate(result = ifelse(abs(alex - jordan) &lt;= 10,\n                             \"They meet\", \n                             \"They do not\"\n  )))\n}\ntoc()\n\n168.08 sec elapsed\n\n\n\n\n\ntic()\nmeet_vect &lt;- data.frame(\n  alex = runif(n, min = 0, max = 60),\n  jordan = runif(n, min = 0, max = 60)) |&gt; \n  mutate(result = ifelse(abs(alex - jordan) &lt;= 10, \n                         \"They meet\", \n                         \"They do not\"\n  )\n)\ntoc()\n\n0.009 sec elapsed"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#results",
    "href": "slides/2025-03-12-iters.html#results",
    "title": "Iterations",
    "section": "Results",
    "text": "Results\nThe results themselves are equivalent. Differing values due to randomness in the simulation.\n\nmap()for() loopvectorized\n\n\n\nmeet_map |&gt; \n  group_by(result) |&gt; \n  summarize(number = n())|&gt; \n  mutate(proprotion = number / sum(number))\n\n# A tibble: 2 × 3\n  result      number proprotion\n  &lt;chr&gt;        &lt;int&gt;      &lt;dbl&gt;\n1 They do not  69600      0.696\n2 They meet    30400      0.304\n\n\n\n\n\nmeet_for |&gt; \n  group_by(result) |&gt; \n  summarize(number = n())|&gt; \n  mutate(proprotion = number / sum(number))\n\n# A tibble: 2 × 3\n  result      number proprotion\n  &lt;chr&gt;        &lt;int&gt;      &lt;dbl&gt;\n1 They do not  69408      0.694\n2 They meet    30592      0.306\n\n\n\n\n\nmeet_vect |&gt; \n  group_by(result) |&gt; \n  summarize(number = n()) |&gt; \n  mutate(proprotion = number / sum(number))\n\n# A tibble: 2 × 3\n  result      number proprotion\n  &lt;chr&gt;        &lt;int&gt;      &lt;dbl&gt;\n1 They do not  69529      0.695\n2 They meet    30471      0.305"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#visualizing-the-meet-up",
    "href": "slides/2025-03-12-iters.html#visualizing-the-meet-up",
    "title": "Iterations",
    "section": "Visualizing the meet up",
    "text": "Visualizing the meet up\n\nmeet_map |&gt; \n  ggplot(aes(x = jordan, y = alex, color = result)) +\n  geom_point(alpha = 0.3) + \n  geom_abline(intercept = 10, slope = 1) + \n  geom_abline(intercept = -10, slope = 1) + \n  scale_color_brewer(palette = \"Paired\")"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#example-3-birthday-problem",
    "href": "slides/2025-03-12-iters.html#example-3-birthday-problem",
    "title": "Iterations",
    "section": "Example 3: Birthday Problem",
    "text": "Example 3: Birthday Problem\nWhat is the probability that in a room of 28 people, at least 2 of them have the same birthday?"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#function-2",
    "href": "slides/2025-03-12-iters.html#function-2",
    "title": "Iterations",
    "section": "Function",
    "text": "Function\n\nclass_duplicates &lt;- function(unicorn){\n  class_birthdays &lt;- sample(c(1:365), size = 28, replace = TRUE)\n  num_duplicates &lt;- sum(duplicated(class_birthdays))\n  return(ifelse(num_duplicates &gt; 0, 1, 0))\n}\n\nclass_duplicates()\n\n[1] 0\n\nclass_duplicates()\n\n[1] 1"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#example-1-alex-jordan",
    "href": "slides/2025-03-12-iters.html#example-1-alex-jordan",
    "title": "Iterations",
    "section": "Example 1: Alex & Jordan",
    "text": "Example 1: Alex & Jordan\nConsider a situation where Alex and Jordan plan to meet to study in their college campus center (Mosteller 1987; Baumer, Kaplan, and Horton 2021). They are both impatient people who will wait only 10 minutes for the other before leaving.\nBut their planning was incomplete. Alex said, “Meet me between 7 and 8 tonight at the student center.” When should Jordan plan to arrive at the campus center? And what is the probability that they actually meet?"
  },
  {
    "objectID": "slides/2025-03-10-help.html",
    "href": "slides/2025-03-10-help.html",
    "title": "Help me help you",
    "section": "",
    "text": "Reproducible examples (reprex())\nCode style\n\n\n\n\n\n\n\n\nBased on https://www.effectivedatastorytelling.com/post/a-deeper-dive-into-lego-bricks-and-data-stories, original source: https://www.linkedin.com/learning/instructors/bill-shander"
  },
  {
    "objectID": "slides/2025-03-10-help.html#footnotes",
    "href": "slides/2025-03-10-help.html#footnotes",
    "title": "Help me help you",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nhttps://style.tidyverse.org/↩︎\nThe last one isn’t great because it is hard to distinguish the data frame from the other arguments (which play very different roles in the summarize() function).↩︎"
  },
  {
    "objectID": "slides/2025-03-12-iters.html#vary-number-of-hats-1",
    "href": "slides/2025-03-12-iters.html#vary-number-of-hats-1",
    "title": "Iterations",
    "section": "Vary number of hats",
    "text": "Vary number of hats\n\nhat_match_prob &lt;- function(n, reps){\n  prob &lt;- map_lgl(c(1:reps), ~hat_match(n = n)) |&gt; \n    mean()\n  return(data.frame(match_prob = prob, num_hats = n))\n}\n\nset.seed(47)\nmap(c(1:20), hat_match_prob, reps = num_iter) |&gt; \n  list_rbind()\n\n   match_prob num_hats\n1      1.0000        1\n2      0.4964        2\n3      0.6695        3\n4      0.6241        4\n5      0.6376        5\n6      0.6290        6\n7      0.6299        7\n8      0.6299        8\n9      0.6373        9\n10     0.6273       10\n11     0.6319       11\n12     0.6348       12\n13     0.6393       13\n14     0.6300       14\n15     0.6280       15\n16     0.6396       16\n17     0.6355       17\n18     0.6283       18\n19     0.6304       19\n20     0.6461       20"
  },
  {
    "objectID": "slides/2025-03-10-help.html#must-haves-for-reprex",
    "href": "slides/2025-03-10-help.html#must-haves-for-reprex",
    "title": "Help me help you",
    "section": "Must-haves for reprex()",
    "text": "Must-haves for reprex()\nThe following must be included in order for a reproducible example to work (i.e., for someone else to run the code and get the same output):\n\nR pacakges\nrelevant dataset(s)\nall of the code"
  },
  {
    "objectID": "project3.html#footnotes",
    "href": "project3.html#footnotes",
    "title": "Project 3",
    "section": "Footnotes",
    "text": "Footnotes\n\n\ncode folding allows the user can see the code if they want to: https://quarto.org/docs/output-formats/html-code.html#folding-code↩︎"
  },
  {
    "objectID": "slides/2025-03-26-perm.html#example-helper-or-hinderer",
    "href": "slides/2025-03-26-perm.html#example-helper-or-hinderer",
    "title": "Permutation Tests",
    "section": "Example: helper or hinderer",
    "text": "Example: helper or hinderer\n\nIn a study reported in the November 2007 issue of Nature, researchers investigated whether infants take into account an individual’s actions towards others in evaluating that individual as appealing or aversive, perhaps laying for the foundation for social interaction (Hamlin, Wynn, and Bloom 2007). In other words, do children who aren’t even yet talking still form impressions as to someone’s friendliness based on their actions? In one component of the study, 10-month-old infants were shown a “climber” character (a piece of wood with “googly” eyes glued onto it) that could not make it up a hill in two tries. Then the infants were shown two scenarios for the climber’s next try, one where the climber was pushed to the top of the hill by another character (the “helper” toy) and one where the climber was pushed back down the hill by another character (the “hinderer” toy). The infant was alternately shown these two scenarios several times. Then the child was presented with both pieces of wood (the helper and the hinderer characters) and asked to pick one to play with."
  },
  {
    "objectID": "slides/2025-03-26-perm.html#example-helper-or-hinderer-1",
    "href": "slides/2025-03-26-perm.html#example-helper-or-hinderer-1",
    "title": "Permutation Tests",
    "section": "Example: helper or hinderer",
    "text": "Example: helper or hinderer\n\nInfant videos\n“Social evaluation by preverbal infants”, Nature 2007"
  },
  {
    "objectID": "slides/2025-03-26-perm.html#parts-of-a-hypothesis-test",
    "href": "slides/2025-03-26-perm.html#parts-of-a-hypothesis-test",
    "title": "Permutation Tests",
    "section": "Parts of a hypothesis test",
    "text": "Parts of a hypothesis test\n\nWhat are the observational units?\n\ninfants\n\nWhat is the variable? What type of variable?\n\nchoice of helper or hindered: categorical\n\nWhat is the statistic?\n\n\\(\\hat{p}\\) = proportion of infants who chose helper = 14/16 = 0.875\n\nWhat is the parameter?\n\np = proportion of all infants who might choose helper (not measurable!)"
  },
  {
    "objectID": "slides/2025-03-26-perm.html#hypotheses",
    "href": "slides/2025-03-26-perm.html#hypotheses",
    "title": "Permutation Tests",
    "section": "Hypotheses",
    "text": "Hypotheses\n\\(H_0\\): Null hypothesis. Babies (or rather, the population of babies under consideration) have no inherent preference for the helper or the hinderer shape.\n\\(H_A\\): Alternative hypothesis. Babies (or rather, the population of babies under consideration) are more likely to prefer the helper shape over the hinderer shape."
  },
  {
    "objectID": "slides/2025-03-26-perm.html#p-value",
    "href": "slides/2025-03-26-perm.html#p-value",
    "title": "Permutation Tests",
    "section": "p-value",
    "text": "p-value\n\np-value is the probability of our data or more extreme if nothing interesting is going on.\n\n\n\n\n\n\n\n\n\ncompletely arbitrary cutoff\n\\(\\rightarrow\\)\ngenerally accepted conclusion\n\n\n\n\np-value \\(&gt;\\) 0.10\n\\(\\rightarrow\\)\nno evidence against the null model\n\n\n0.05 \\(&lt;\\) p-value \\(&lt;\\) 0.10\n\\(\\rightarrow\\)\nmoderate evidence against the null model\n\n\n0.01 \\(&lt;\\) p-value \\(&lt;\\) 0.05\n\\(\\rightarrow\\)\nstrong evidence against the null model\n\n\np-value \\(&lt;\\) 0.01\n\\(\\rightarrow\\)\nvery strong evidence against the null model"
  },
  {
    "objectID": "slides/2025-03-26-perm.html#computation",
    "href": "slides/2025-03-26-perm.html#computation",
    "title": "Permutation Tests",
    "section": "Computation",
    "text": "Computation\nFirst find the statistic\n\n# to control the randomness\nset.seed(47)\n\n# first create a data frame with the Infant data\nInfants &lt;- read.delim(\"http://www.rossmanchance.com/iscam3/data/InfantData.txt\")\n\n# find the observed number of babies who chose the helper\nhelp_obs &lt;- Infants |&gt; \n  summarize(prop_help = mean(choice == \"helper\")) |&gt; \n  pull()\nhelp_obs\n\n[1] 0.875"
  },
  {
    "objectID": "slides/2025-03-26-perm.html#computation-1",
    "href": "slides/2025-03-26-perm.html#computation-1",
    "title": "Permutation Tests",
    "section": "Computation",
    "text": "Computation\nFind the sampling distribution under the condition that the null hypothesis is true.\n\nfunctionrepeatvizviz code\n\n\n\n# write a function to simulate a set of infants who are \n# equally likely to choose the helper or the hinderer\n\nrandom_choice &lt;- function(rep, num_babies){\n  choice = sample(c(\"helper\", \"hinderer\"), size = num_babies,\n                  replace = TRUE, prob = c(0.5, 0.5))\n  return(mean(choice == \"helper\"))\n}\n\n\n\n\n# repeat the function many times\nmap_dbl(c(1:10), random_choice, num_babies = 16)\n\n [1] 0.6875 0.3750 0.4375 0.3750 0.5000 0.5000 0.6250 0.4375 0.6875 0.6250\n\nnum_exper &lt;- 5000\nhelp_random &lt;- map_dbl(c(1:num_exper), random_choice, \n                            num_babies = 16)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n# visualize null sampling distribution\nhelp_random |&gt; \n  data.frame() |&gt; \n  ggplot(aes(x = help_random)) + \n  geom_histogram() + \n  labs(x = \"proportion of babies who chose the helper\",\n       title = \"sampling distribution when null hypothesis is true\",\n       subtitle = \"that is, no inherent preference for helper or hinderer\")"
  },
  {
    "objectID": "slides/2025-03-26-perm.html#computation-2",
    "href": "slides/2025-03-26-perm.html#computation-2",
    "title": "Permutation Tests",
    "section": "Computation",
    "text": "Computation\nAre the null values consistent with the observed value?\n\nvizp-valueviz code\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n# the p-value!\nsum(help_random &gt;= help_obs) / num_exper\n\n[1] 0.0022\n\n\n\n\n\n# visualize null sampling distribution\nhelp_random |&gt; \n  data.frame() |&gt; \n  ggplot(aes(x = help_random)) + \n  geom_histogram() + \n  geom_vline(xintercept = help_obs, color = \"red\") + \n  labs(x = \"proportion of babies who chose the helper\",\n       title = \"sampling distribution when null hypothesis is true\",\n       subtitle = \"that is, no inherent preference for helper or hinderer\")"
  },
  {
    "objectID": "slides/2025-03-26-perm.html#all-together-structure-of-a-hypothesis-test",
    "href": "slides/2025-03-26-perm.html#all-together-structure-of-a-hypothesis-test",
    "title": "Permutation Tests",
    "section": "All together: structure of a hypothesis test",
    "text": "All together: structure of a hypothesis test\n\ndecide on a research question (which will determine the test)\ncollect data, specify the variables of interest\nstate the null (and alternative) hypothesis values (often statements about parameters)\n\nthe null claim is the science we want to reject\nthe alternative claim is the science we want to demonstrate\n\ngenerate a (null) sampling distribution to describe the variability of the statistic that was calculated along the way\nvisualize the distribution of the statistics under the null model\nget p-value to measure the consistency of the observed statistic and the possible values of the statistic under the null model\nmake a conclusion using words that describe the research setting"
  },
  {
    "objectID": "slides/2025-03-26-perm.html#hypotheses-1",
    "href": "slides/2025-03-26-perm.html#hypotheses-1",
    "title": "Permutation Tests",
    "section": "Hypotheses",
    "text": "Hypotheses\n\nHypothesis Testing compares data to the expectation of a specific null hypothesis. If the data are unusual, assuming that the null hypothesis is true, then the null hypothesis is rejected.\nThe Null Hypothesis, \\(H_0\\), is a specific statement about a population made for the purposes of argument. A good null hypothesis is a statement that would be interesting to reject.\nThe Alternative Hypothesis, \\(H_A\\), is a specific statement about a population that is in the researcher’s interest to demonstrate. Typically, the alternative hypothesis contains all the values of the population that are not included in the null hypothesis.\nIn a two-sided (or two-tailed) test, the alternative hypothesis includes values on both sides of the value specified by the null hypothesis.\nIn a one-sided (or one-tailed) test, the alternative hypothesis includes parameter values on only one side of the value specified by the null hypothesis. \\(H_0\\) is rejected only if the data depart from it in the direction stated by \\(H_A\\)."
  },
  {
    "objectID": "slides/2025-03-26-perm.html#statistics-without-the-agonizing-pain",
    "href": "slides/2025-03-26-perm.html#statistics-without-the-agonizing-pain",
    "title": "Permutation Tests",
    "section": "Statistics Without the Agonizing Pain",
    "text": "Statistics Without the Agonizing Pain\n\nJohn Rauser of Pintrest (now Amazon), speaking at Strata + Hadoop 2014. https://blog.revolutionanalytics.com/2014/10/statistics-doesnt-have-to-be-that-hard.html"
  },
  {
    "objectID": "slides/2025-03-26-perm.html#logic-of-hypothesis-tests",
    "href": "slides/2025-03-26-perm.html#logic-of-hypothesis-tests",
    "title": "Permutation Tests",
    "section": "Logic of hypothesis tests",
    "text": "Logic of hypothesis tests\n\nChoose a statistic that measures the effect.\nConstruct the sampling distribution under \\(H_0\\).\nLocate the observed statistic in the null sampling distribution.\np-value is the probability of the observed data or more extreme if the null hypothesis is true"
  },
  {
    "objectID": "slides/2025-03-26-perm.html#logic-of-permutation-tests",
    "href": "slides/2025-03-26-perm.html#logic-of-permutation-tests",
    "title": "Permutation Tests",
    "section": "Logic of permutation tests",
    "text": "Logic of permutation tests\n\nChoose a test statistic.\nShuffle the data (force the null hypothesis to be true). Using the shuffled statistics, create a null sampling distribution of the test statistic (under \\(H_0\\)).\nFind the observed test statistic on the null sampling distribution.\nCompute the p-value (observed data or more extreme). The p-value can be one or two-sided."
  },
  {
    "objectID": "slides/2025-03-26-perm.html#applet-for-two-sample-permutation-tests",
    "href": "slides/2025-03-26-perm.html#applet-for-two-sample-permutation-tests",
    "title": "Permutation Tests",
    "section": "Applet for two sample permutation tests",
    "text": "Applet for two sample permutation tests\n\npermutation test for two samples from Rossman Chance applets."
  },
  {
    "objectID": "slides/2025-03-26-perm.html#high-school-beyond-survey",
    "href": "slides/2025-03-26-perm.html#high-school-beyond-survey",
    "title": "Permutation Tests",
    "section": "High School & Beyond survey",
    "text": "High School & Beyond survey\nData: 200 randomly selected observations from the High School and Beyond survey, conducted on high school seniors by the National Center for Educational Statistics.\nResearch Question: in the population, do private school kids have a higher math score on average?\n\\[H_0: \\mu_{private} = \\mu_{public}\\] \\[H_A: \\mu_{private} &gt; \\mu_{public}\\]\n\\(\\mu\\) is the average math score in the population.\n\nlibrary(openintro)\nhsb2\n\n# A tibble: 200 × 11\n      id gender race      ses   schtyp prog   read write  math science\n   &lt;int&gt; &lt;chr&gt;  &lt;chr&gt;     &lt;fct&gt; &lt;fct&gt;  &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;   &lt;int&gt;\n 1    70 male   white     low   public gene…    57    52    41      47\n 2   121 female white     midd… public voca…    68    59    53      63\n 3    86 male   white     high  public gene…    44    33    54      58\n 4   141 male   white     high  public voca…    63    44    47      53\n 5   172 male   white     midd… public acad…    47    52    57      53\n 6   113 male   white     midd… public acad…    44    52    51      63\n 7    50 male   african … midd… public gene…    50    59    42      53\n 8    11 male   hispanic  midd… public acad…    34    46    45      39\n 9    84 male   white     midd… public gene…    63    57    54      58\n10    48 male   african … midd… public acad…    57    55    52      50\n# ℹ 190 more rows\n# ℹ 1 more variable: socst &lt;int&gt;"
  },
  {
    "objectID": "slides/2025-03-26-perm.html#summary-of-the-variables",
    "href": "slides/2025-03-26-perm.html#summary-of-the-variables",
    "title": "Permutation Tests",
    "section": "Summary of the variables",
    "text": "Summary of the variables\n\nhsb2 |&gt; \n  group_by(schtyp) |&gt; \n  summarize(ave_math = mean(math),\n            med_math = median(math))\n\n# A tibble: 2 × 3\n  schtyp  ave_math med_math\n  &lt;fct&gt;      &lt;dbl&gt;    &lt;dbl&gt;\n1 public      52.2     52  \n2 private     54.8     53.5"
  },
  {
    "objectID": "slides/2025-03-26-perm.html#visualize-the-relationship-of-interest",
    "href": "slides/2025-03-26-perm.html#visualize-the-relationship-of-interest",
    "title": "Permutation Tests",
    "section": "Visualize the relationship of interest",
    "text": "Visualize the relationship of interest\n\nhsb2 |&gt; \n  ggplot(aes(x = schtyp, y = math)) + \n  geom_boxplot()"
  },
  {
    "objectID": "slides/2025-03-26-perm.html#calculate-the-observed-statistics",
    "href": "slides/2025-03-26-perm.html#calculate-the-observed-statistics",
    "title": "Permutation Tests",
    "section": "Calculate the observed statistic(s)",
    "text": "Calculate the observed statistic(s)\nFor fun, we are calculating both the difference in averages as well as the difference in medians. That is, we have two different observed summary statistics to work with.\n\nhsb2 |&gt; \n  group_by(schtyp) |&gt; \n  summarize(ave_math = mean(math),\n            med_math = median(math))\n\n# A tibble: 2 × 3\n  schtyp  ave_math med_math\n  &lt;fct&gt;      &lt;dbl&gt;    &lt;dbl&gt;\n1 public      52.2     52  \n2 private     54.8     53.5\n\nhsb2 |&gt; \n  group_by(schtyp) |&gt; \n  summarize(ave_math = mean(math),\n            med_math = median(math)) |&gt; \n  summarize(ave_diff = diff(ave_math),\n            med_diff = diff(med_math))\n\n# A tibble: 1 × 2\n  ave_diff med_diff\n     &lt;dbl&gt;    &lt;dbl&gt;\n1     2.51      1.5"
  },
  {
    "objectID": "slides/2025-03-26-perm.html#generate-a-null-sampling-distribution.",
    "href": "slides/2025-03-26-perm.html#generate-a-null-sampling-distribution.",
    "title": "Permutation Tests",
    "section": "Generate a null sampling distribution.",
    "text": "Generate a null sampling distribution.\n\nperm_data &lt;- function(rep, data){\n  data |&gt; \n    select(schtyp, math) |&gt; \n    mutate(math_perm = sample(math, replace = FALSE)) |&gt; \n    group_by(schtyp) |&gt; \n    summarize(obs_ave = mean(math),\n              obs_med = median(math),\n              perm_ave = mean(math_perm),\n              perm_med = median(math_perm)) |&gt; \n    summarize(obs_ave_diff = diff(obs_ave),\n              obs_med_diff = diff(obs_med),\n              perm_ave_diff = diff(perm_ave),\n              perm_med_diff = diff(perm_med),\n              rep = rep)\n}\n\nmap(c(1:10), perm_data, data = hsb2) |&gt; \n  list_rbind()\n\n# A tibble: 10 × 5\n   obs_ave_diff obs_med_diff perm_ave_diff perm_med_diff   rep\n          &lt;dbl&gt;        &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt; &lt;int&gt;\n 1         2.51          1.5         2.62            2.5     1\n 2         2.51          1.5         0.757          -1       2\n 3         2.51          1.5         1.65            2       3\n 4         2.51          1.5        -0.805          -0.5     4\n 5         2.51          1.5         1.80            2.5     5\n 6         2.51          1.5         2.92            3       6\n 7         2.51          1.5         1.91            2.5     7\n 8         2.51          1.5        -2.55           -3.5     8\n 9         2.51          1.5        -1.21           -3       9\n10         2.51          1.5         1.32            1      10"
  },
  {
    "objectID": "slides/2025-03-26-perm.html#visualize-the-null-sampling-distribution-average",
    "href": "slides/2025-03-26-perm.html#visualize-the-null-sampling-distribution-average",
    "title": "Permutation Tests",
    "section": "Visualize the null sampling distribution (average)",
    "text": "Visualize the null sampling distribution (average)\n\nset.seed(47)\nperm_stats &lt;- \n  map(c(1:500), perm_data, data = hsb2) |&gt; \n  list_rbind() \n\nperm_stats |&gt; \n  ggplot(aes(x = perm_ave_diff)) + \n  geom_histogram() + \n  geom_vline(aes(xintercept = obs_ave_diff), color = \"red\")"
  },
  {
    "objectID": "slides/2025-03-26-perm.html#visualize-the-null-sampling-distribution-median",
    "href": "slides/2025-03-26-perm.html#visualize-the-null-sampling-distribution-median",
    "title": "Permutation Tests",
    "section": "Visualize the null sampling distribution (median)",
    "text": "Visualize the null sampling distribution (median)\n\nperm_stats |&gt; \n  ggplot(aes(x = perm_med_diff)) + \n  geom_histogram() + \n  geom_vline(aes(xintercept = obs_med_diff), color = \"red\")"
  },
  {
    "objectID": "slides/2025-03-26-perm.html#p-value-2",
    "href": "slides/2025-03-26-perm.html#p-value-2",
    "title": "Permutation Tests",
    "section": "p-value",
    "text": "p-value\n\nperm_stats |&gt; \n  summarize(p_val_ave = mean(perm_ave_diff &gt; obs_ave_diff),\n            p_val_med = mean(perm_med_diff &gt; obs_med_diff))\n\n# A tibble: 1 × 2\n  p_val_ave p_val_med\n      &lt;dbl&gt;     &lt;dbl&gt;\n1     0.086      0.27"
  },
  {
    "objectID": "slides/2025-03-26-perm.html#conclusion",
    "href": "slides/2025-03-26-perm.html#conclusion",
    "title": "Permutation Tests",
    "section": "Conclusion",
    "text": "Conclusion\nFrom these data, the observed differences seem to be consistent with the distribution of differences in the null sampling distribution.\nThere is no evidence to reject the null hypothesis.\nWe cannot claim that in the population the average math scores for private school kids is larger than the average math scores for public school kids (p-value = 0.086).\nWe cannot claim that in the population the median math scores for private school kids is larger than the median math scores for public school kids (p-value = 0.27)."
  },
  {
    "objectID": "slides/2025-03-26-perm.html#two-sided-test",
    "href": "slides/2025-03-26-perm.html#two-sided-test",
    "title": "Permutation Tests",
    "section": "Two-sided test:",
    "text": "Two-sided test:\n\\(H_0: \\mu_{private} = \\mu_{public}\\) and \\(H_A: \\mu_{private} \\ne \\mu_{public}\\)"
  },
  {
    "objectID": "slides/2025-03-26-perm.html#two-sided-p-value",
    "href": "slides/2025-03-26-perm.html#two-sided-p-value",
    "title": "Permutation Tests",
    "section": "Two-sided p-value",
    "text": "Two-sided p-value\n\nperm_stats |&gt; \n    summarize(p_val_ave = \n                mean(perm_ave_diff &gt; obs_ave_diff | \n                       perm_ave_diff &lt; -obs_ave_diff),\n              p_val_med = \n              mean(perm_med_diff &gt; obs_med_diff | \n                     perm_med_diff &lt; -obs_med_diff))\n\n# A tibble: 1 × 2\n  p_val_ave p_val_med\n      &lt;dbl&gt;     &lt;dbl&gt;\n1     0.154     0.534"
  },
  {
    "objectID": "slides/2025-03-26-perm.html#two-sided-conclusion",
    "href": "slides/2025-03-26-perm.html#two-sided-conclusion",
    "title": "Permutation Tests",
    "section": "Two-sided conclusion",
    "text": "Two-sided conclusion\nFrom these data, the observed differences seem to be consistent with the distribution of differences in the null sampling distribution.\nThere is no evidence to reject the null hypothesis.\nWe cannot claim that there is a difference in average math scores in the population (p-value = 0.154).\nWe cannot claim that there is a difference in median math scores int he population (p-value = 0.534)."
  },
  {
    "objectID": "slides/2025-03-26-perm.html#references",
    "href": "slides/2025-03-26-perm.html#references",
    "title": "Permutation Tests",
    "section": "References",
    "text": "References\n\n\n\n\nHamlin, J. Kiley, Karen Wynn, and Paul Bloom. 2007. “Social Evaluation by Preverbal Infants.” Nature 450: 557–59."
  },
  {
    "objectID": "slides/2025-03-12-iters.html#section",
    "href": "slides/2025-03-12-iters.html#section",
    "title": "Iterations",
    "section": "",
    "text": "Baumer, Ben, Daniel Kaplan, and Nicholas Horton. 2021. Modern Data Science with r. CRC Press. https://mdsr-book.github.io/mdsr2e/.\n\n\nMosteller, Frederick. 1987. Fifty Challenging Problems in Probability with Solutions. Dover Publications: Mineola, NY."
  },
  {
    "objectID": "slides/2025-04-02-ethics.html#stand-your-ground",
    "href": "slides/2025-04-02-ethics.html#stand-your-ground",
    "title": "Ethics in Data Science",
    "section": "Stand Your Ground",
    "text": "Stand Your Ground\n\nReproduction of a data graphic reporting the number of gun deaths in Florida over time. The original image was published by Reuters. (Baumer, Kaplan, and Horton 2021)"
  },
  {
    "objectID": "slides/2025-04-02-ethics.html#climate",
    "href": "slides/2025-04-02-ethics.html#climate",
    "title": "Ethics in Data Science",
    "section": "Climate",
    "text": "Climate\n\nA tweet by National Review on December 14, 2015 showing the change in global temperature over time. (Baumer, Kaplan, and Horton 2021)"
  },
  {
    "objectID": "slides/2025-04-02-ethics.html#ga-covid-19-confirmed-cases",
    "href": "slides/2025-04-02-ethics.html#ga-covid-19-confirmed-cases",
    "title": "Ethics in Data Science",
    "section": "GA COVID-19 confirmed cases",
    "text": "GA COVID-19 confirmed cases\n\n\n\n\n\nMay 10, 2020, Georgia Department of Health, COVID-19 cases for 5 counties across time. https://dph.georgia.gov/covid-19-daily-status-report\n\n\n\n\n\n\n\n\n\nMay 17, 2020, Georgia Department of Health, COVID-19 cases for 5 counties across time. https://dph.georgia.gov/covid-19-daily-status-report"
  },
  {
    "objectID": "slides/2025-04-02-ethics.html#ga-covid-19-cases-per-100k",
    "href": "slides/2025-04-02-ethics.html#ga-covid-19-cases-per-100k",
    "title": "Ethics in Data Science",
    "section": "GA COVID-19 cases per 100K",
    "text": "GA COVID-19 cases per 100K\n\n\n\n\n\n\n\nJuly 2, 2020, Georgia Department of Health, COVID-19 cases per 100K\n\n\n\n\n\n\n\n\n\n\nJuly 17, 2020, https://dph.georgia.gov/covid-19-daily-status-report"
  },
  {
    "objectID": "slides/2025-04-02-ethics.html#principles-1",
    "href": "slides/2025-04-02-ethics.html#principles-1",
    "title": "Ethics in Data Science",
    "section": "12 principles",
    "text": "12 principles\nAs data teams, we aim to…\n\nUse data to improve life for our users, customers, organizations, and communities.\nCreate reproducible and extensible work.\nBuild teams with diverse ideas, backgrounds, and strengths.\nPrioritize the continuous collection and availability of discussions and metadata.\nClearly identify the questions and objectives that drive each project and use to guide both planning and refinement.\nBe open to changing our methods and conclusions in response to new knowledge.\nRecognize and mitigate bias in ourselves and in the data we use.\nPresent our work in ways that empower others to make better-informed decisions.\nConsider carefully the ethical implications of choices we make when using data, and the impacts of our work on individuals and society.\nRespect and invite fair criticism while promoting the identification and open discussion of errors, risks, and unintended consequences of our work.\nProtect the privacy and security of individuals represented in our data.\nHelp others to understand the most useful and appropriate applications of data to solve real-world problems."
  },
  {
    "objectID": "slides/2025-04-02-ethics.html#examples",
    "href": "slides/2025-04-02-ethics.html#examples",
    "title": "Ethics in Data Science",
    "section": "Examples",
    "text": "Examples\nIt is impossible to predict every ethical quandary that a data scientist might face.\nInstead, we tour some examples which help us think carefully about a set of guiding principles."
  },
  {
    "objectID": "slides/2025-04-02-ethics.html#references",
    "href": "slides/2025-04-02-ethics.html#references",
    "title": "Ethics in Data Science",
    "section": "References",
    "text": "References\n\n\n\n\nBaumer, Ben, Daniel Kaplan, and Nicholas Horton. 2021. Modern Data Science with r. CRC Press. https://mdsr-book.github.io/mdsr2e/.\n\n\nHerndon, Thomas, Michael Ash, and Robert Pollin. 2013. “Does High Public Debt Consistently Stifle Economic Growth? A Critique of Reinhart and Rogo ff.” Working Papers wp322. Political Economy Research Institute, University of Massachusetts at Amherst. https://ideas.repec.org/p/uma/periwp/wp322.html.\n\n\nImai, Kosuke, and Kabir Khanna. 2016. “Improving Ecological Inference by Predicting Individual Ethnicity from Voter Registration Records.” Political Analysis 24 (2): 263–72. https://doi.org/10.1093/pan/mpw001.\n\n\nKirkegaard, Emil O. W., and Julius D. Bjerrekær. 2016. “The OKCupid Dataset: A Very Large Public Dataset of Dating Site Users.” Open Differential Psychology, November. https://doi.org/10.26775/odp.2016.11.03.\n\n\nReinhart, Carmen M, and Kenneth S Rogoff. 2010. “Growth in a Time of Debt.” Working Paper 15639. Working Paper Series. National Bureau of Economic Research. https://doi.org/10.3386/w15639.\n\n\nRoose, Kevin. 2013. “Meet the 28-Year-Old Grad Student Who Just Shook the Global Austerity Movement.” New York Magazine. http://nymag.com/daily/intelligencer/2013/04/grad-student-who-shook-global-austerity-movement.html.\n\n\nWang, Y., and M. Kosinski. 2018. “Deep Neural Networks Are More Accurate Than Humans at Detecting Sexual Orientation from Facial Images.” Journal of Personality and Social Psychology 114 (2): 246–57."
  },
  {
    "objectID": "slides/2025-04-02-ethics.html#predicting-race",
    "href": "slides/2025-04-02-ethics.html#predicting-race",
    "title": "Ethics in Data Science",
    "section": "Predicting race",
    "text": "Predicting race\nConsider a racial prediction algorithm including published software for the classier under an open-source license as the R package wru (Imai and Khanna 2016). (Trained using US Census Surname Data.)\nThe main function predict_race() returns predicted probabilities for a person’s race based on either their last name alone, or their last name and their address.\n\nlibrary(tidyverse)\nlibrary(wru)\npredict_race(voter.file = voters, surname.only = TRUE) |&gt;\n  select(surname, pred.whi, pred.bla, pred.his, pred.asi, pred.oth)\n\n      surname    pred.whi    pred.bla     pred.his    pred.asi    pred.oth\n1      Khanna 0.045110474 0.003067623 0.0068522723 0.860411906 0.084557725\n2        Imai 0.052645440 0.001334812 0.0558160072 0.719376581 0.170827160\n3      Rivera 0.043285692 0.008204605 0.9136195794 0.024316883 0.010573240\n4     Fifield 0.895405704 0.001911388 0.0337464844 0.011079323 0.057857101\n5        Zhou 0.006572555 0.001298962 0.0005388581 0.982365594 0.009224032\n6    Ratkovic 0.861236727 0.008212824 0.0095395642 0.011334635 0.109676251\n7     Johnson 0.543815322 0.344128607 0.0272403940 0.007405765 0.077409913\n8       Lopez 0.038939877 0.004920643 0.9318797791 0.012154125 0.012105576\n10 Wantchekon 0.330697188 0.194700665 0.4042849478 0.021379541 0.048937658\n9       Morse 0.866360147 0.044429853 0.0246568086 0.010219712 0.054333479\n\n\nGiven the long history of systemic racism in the United States, it is clear how this software could be used to discriminate against people of color.\nWhat if we partnered with a progressive voting rights organization that wanted to use racial prediction to target members of a particular ethnic group to help them register to vote?\nWas the publication of this model ethical? Does the open-source nature of the code affect your answer? Is it ethical to use this software? Does your answer change depending on the intended use?"
  },
  {
    "objectID": "slides/2025-04-02-ethics.html#data-scraping",
    "href": "slides/2025-04-02-ethics.html#data-scraping",
    "title": "Ethics in Data Science",
    "section": "Data scraping",
    "text": "Data scraping\n“The OkCupid data set: A very large public data set of dating site users” (Kirkegaard and Bjerrekær 2016):\n\n2,620 variables\nincluding usernames, gender, and dating preferences\n68,371 people scraped from the OkCupid dating website\n\nThe data scraping did not involve any illicit technology such as breaking passwords. Nonetheless, the author received many challenges to the work as an ethical breach and accusing him of doxing people by releasing personal data.\nDoes the work raise ethical issues?"
  },
  {
    "objectID": "slides/2025-04-02-ethics.html#reproducible-spreadsheet",
    "href": "slides/2025-04-02-ethics.html#reproducible-spreadsheet",
    "title": "Ethics in Data Science",
    "section": "Reproducible spreadsheet",
    "text": "Reproducible spreadsheet\n“Growth in a Time of Debt” (Reinhart and Rogoff 2010) argued that countries which pursued austerity measures did not necessarily suffer from slow economic growth.\nThomas Herndon requested access to the data and analysis contained in the paper. After receiving the original spreadsheet from Reinhart, Herndon found several errors.\n\nI clicked on cell L51, and saw that they had only averaged rows 30 through 44, instead of rows 30 through 49.” —Thomas Herndon (Roose 2013)\n\nIn a critique of the paper, Herndon, Ash, and Pollin (2013) point out coding errors, selective inclusion of data, and odd weighting of summary statistics that shaped the conclusions of Reinhart and Rogoff (2010).\nWhat ethical questions does publishing a flawed analysis raise?"
  },
  {
    "objectID": "slides/2025-04-02-ethics.html#predicting-sexuality",
    "href": "slides/2025-04-02-ethics.html#predicting-sexuality",
    "title": "Ethics in Data Science",
    "section": "Predicting Sexuality",
    "text": "Predicting Sexuality\nWang and Kosinski (2018) used a deep neural network and logistic regression to build a classifier for sexual orientation based on pictures of people’s faces. The authors claim that if given five images of a person’s face, their model would correctly predict the sexual orientation of 91% of men and 83% of women. The authors highlight the potential harm that their work could do in their abstract:\n\nAdditionally, given that companies and governments are increasingly using computer vision algorithms to detect people’s intimate traits, our findings expose a threat to the privacy and safety of gay men and women.\n\nA subsequent article in The New Yorker also notes that:\n\nthe study consisted entirely of white faces, but only because the dating site had served up too few faces of color to provide for meaningful analysis.\n\nWas the research ethical? Were the authors justified in creating and publishing this model?"
  },
  {
    "objectID": "slides/2025-04-02-ethics.html#principles-in-action",
    "href": "slides/2025-04-02-ethics.html#principles-in-action",
    "title": "Ethics in Data Science",
    "section": "Principles in action",
    "text": "Principles in action\nTo think clearly about ethics, we need to apply principles directly to the examples…"
  },
  {
    "objectID": "slides/2025-04-02-ethics.html#predicting-sexuality-1",
    "href": "slides/2025-04-02-ethics.html#predicting-sexuality-1",
    "title": "Ethics in Data Science",
    "section": "Predicting sexuality",
    "text": "Predicting sexuality\n\nprinciple 1: Does the prediction of sexual orientation based on facial recognition improve life for communities?\nprinciple 9: As noted in the abstract, the researchers did consider the ethical implications of their work,\nprinciple 11: but did they protect the privacy and security of the individuals presented in their data?\nprinciple 7: The exclusion of non-white faces from the study casts doubt on whether the authors recognized their own biases."
  },
  {
    "objectID": "slides/2025-04-02-ethics.html#predicting-race-1",
    "href": "slides/2025-04-02-ethics.html#predicting-race-1",
    "title": "Ethics in Data Science",
    "section": "Predicting race",
    "text": "Predicting race\n\nusing this software to discriminate against historically marginalized people would violate some combination of principles 3, 7, and 9.\nis it ethical to use this software to try and help underrepresented groups if those same principles are not violated?\nThe authors of the wru package admirably met principle 2, but they may not have fully adhered to principle 9."
  },
  {
    "objectID": "slides/2025-04-02-ethics.html#data-scraping-1",
    "href": "slides/2025-04-02-ethics.html#data-scraping-1",
    "title": "Ethics in Data Science",
    "section": "Data scraping",
    "text": "Data scraping\nstakeholders: OKCupid users (principles 1, 9, 11)\n\nresearch involving humans requires that the human not be exposed to any risk for which consent has not been explicitly given. The OkCupid members did not provide such consent.\nthe data contain information that makes it possible to identify individual humans, there is a realistic risk of the release of potentially embarrassing information, or worse, information that jeopardizes the physical safety of certain users.\n\nstakeholders: OKCupid itself (principle 4)\n\nwere the terms of agreement (set by OKCupid) violated?"
  },
  {
    "objectID": "slides/2025-04-02-ethics.html#reproducible-spreadsheet-1",
    "href": "slides/2025-04-02-ethics.html#reproducible-spreadsheet-1",
    "title": "Ethics in Data Science",
    "section": "Reproducible spreadsheet",
    "text": "Reproducible spreadsheet\n\nprinciple 10 was met: Reinhart and Rogoff shared their work when it was challenged\nprinciple 2 is violated: Microsoft Excel, the tool used by Reinhart and Rogoff, is an unfortunate choice because it mixes the data with the analysis."
  },
  {
    "objectID": "slides/2025-04-02-ethics.html#your-role",
    "href": "slides/2025-04-02-ethics.html#your-role",
    "title": "Ethics in Data Science",
    "section": "Your role",
    "text": "Your role\nIndividual control:\n\n\ncreate reproducible and extensible work\n\n\nClearly identify the questions and objectives that drive each project and use to guide both planning and refinement.\n\n\nBe open to changing our methods and conclusions in response to new knowledge.\n\n\nPresent our work in ways that empower others to make better-informed decisions.\n\n\nInstitutional control:\n\n\nBuild teams with diverse ideas, backgrounds, and strengths.\n\n\nProtect the privacy and security of individuals represented in our data."
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#important-tool",
    "href": "slides/2025-04-07-webscrape.html#important-tool",
    "title": "Web Scraping",
    "section": "Important tool",
    "text": "Important tool\nOur approach to web scraping relies on the Chrome browser and an extension called a Selector Gadget. Download them here:\n\nChrome\nSelectorGadget from Chrome or SelectorGadget vignette etc."
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#data-acquisition",
    "href": "slides/2025-04-07-webscrape.html#data-acquisition",
    "title": "Web Scraping",
    "section": "Data Acquisition",
    "text": "Data Acquisition\n\nBased on https://www.effectivedatastorytelling.com/post/a-deeper-dive-into-lego-bricks-and-data-stories, original source: https://www.linkedin.com/learning/instructors/bill-shander"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#reading-the-student-life",
    "href": "slides/2025-04-07-webscrape.html#reading-the-student-life",
    "title": "Web Scraping",
    "section": "Reading The Student Life",
    "text": "Reading The Student Life\n\nHow often do you read The Student Life?\na. Every day\nb. 3-5 times a week\nc. Once a week\nd. Rarely"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#reading-the-student-life-1",
    "href": "slides/2025-04-07-webscrape.html#reading-the-student-life-1",
    "title": "Web Scraping",
    "section": "Reading The Student Life",
    "text": "Reading The Student Life\n\nWhat do you think is the most common word in the titles of The Student Life opinion pieces?"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#analyzing-the-student-life",
    "href": "slides/2025-04-07-webscrape.html#analyzing-the-student-life",
    "title": "Web Scraping",
    "section": "Analyzing The Student Life",
    "text": "Analyzing The Student Life"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#reading-the-student-life-2",
    "href": "slides/2025-04-07-webscrape.html#reading-the-student-life-2",
    "title": "Web Scraping",
    "section": "Reading The Student Life",
    "text": "Reading The Student Life\n\nHow do you think the sentiments in opinion pieces in The Student Life compare across authors?\nRoughly the same?\nWildly different?\nSomewhere in between?"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#analyzing-the-student-life-1",
    "href": "slides/2025-04-07-webscrape.html#analyzing-the-student-life-1",
    "title": "Web Scraping",
    "section": "Analyzing The Student Life",
    "text": "Analyzing The Student Life"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#all-of-this-analysis-is-done-in-r",
    "href": "slides/2025-04-07-webscrape.html#all-of-this-analysis-is-done-in-r",
    "title": "Web Scraping",
    "section": "All of this analysis is done in R!",
    "text": "All of this analysis is done in R!\n\n(mostly) with tools you already know!"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#common-words-in-the-student-life-titles",
    "href": "slides/2025-04-07-webscrape.html#common-words-in-the-student-life-titles",
    "title": "Web Scraping",
    "section": "Common words in The Student Life titles",
    "text": "Common words in The Student Life titles\nCode for the earlier plot:\n\ndata(stop_words)  # from tidytext\ntsl_opinion_titles |&gt;\n  tidytext::unnest_tokens(word, title) |&gt;\n  anti_join(stop_words) |&gt;\n  count(word, sort = TRUE) |&gt;\n  slice_head(n = 20) |&gt;\n  mutate(word = fct_reorder(word, n)) |&gt;\n  ggplot(aes(y = word, x = n, fill = log(n))) +\n  geom_col(show.legend = FALSE) +\n  theme_minimal(base_size = 16) +\n  labs(\n    x = \"Number of mentions\",\n    y = \"Word\",\n    title = \"The Student Life - Opinion pieces\",\n    subtitle = \"Common words in the 500 most recent opinion pieces\",\n    caption = \"Source: Data scraped from The Student Life on April 6, 2025\"\n  ) +\n  theme(\n    plot.title.position = \"plot\",\n    plot.caption = element_text(color = \"gray30\")\n  )"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#avg-sentiment-scores-of-first-paragraph",
    "href": "slides/2025-04-07-webscrape.html#avg-sentiment-scores-of-first-paragraph",
    "title": "Web Scraping",
    "section": "Avg sentiment scores of first paragraph",
    "text": "Avg sentiment scores of first paragraph\nCode for the earlier plot:\n\nafinn_sentiments &lt;- get_sentiments(\"afinn\")  # need tidytext and textdata\ntsl_opinion_titles |&gt;\n  tidytext::unnest_tokens(word, first_p) |&gt;\n  anti_join(stop_words) |&gt;\n  left_join(afinn_sentiments) |&gt; \n  group_by(authors, title) |&gt;\n  summarize(total_sentiment = sum(value, na.rm = TRUE), .groups = \"drop\") |&gt;\n  group_by(authors) |&gt;\n  summarize(\n    n_articles = n(),\n    avg_sentiment = mean(total_sentiment, na.rm = TRUE),\n  ) |&gt;\n  filter(n_articles &gt; 1 & !is.na(authors)) |&gt;\n  arrange(desc(avg_sentiment)) |&gt;\n  slice(c(1:10, 69:78)) |&gt;\n  mutate(\n    authors = fct_reorder(authors, avg_sentiment),\n    neg_pos = if_else(avg_sentiment &lt; 0, \"neg\", \"pos\"),\n    label_position = if_else(neg_pos == \"neg\", 0.25, -0.25)\n  ) |&gt;\n  ggplot(aes(y = authors, x = avg_sentiment)) +\n  geom_col(aes(fill = neg_pos), show.legend = FALSE) +\n  geom_text(\n    aes(x = label_position, label = authors, color = neg_pos),\n    hjust = c(rep(1,10), rep(0, 10)),\n    show.legend = FALSE,\n    fontface = \"bold\"\n  ) +\n  geom_text(\n    aes(label = round(avg_sentiment, 1)),\n    hjust = c(rep(1.25,10), rep(-0.25, 10)),\n    color = \"white\",\n    fontface = \"bold\"\n  ) +\n  scale_fill_manual(values = c(\"neg\" = \"#4d4009\", \"pos\" = \"#FF4B91\")) +\n  scale_color_manual(values = c(\"neg\" = \"#4d4009\", \"pos\" = \"#FF4B91\")) +\n  scale_x_continuous(breaks = -5:5, minor_breaks = NULL) +\n  scale_y_discrete(breaks = NULL) +\n  coord_cartesian(xlim = c(-5, 5)) +\n  labs(\n    x = \"negative  ←     Average sentiment score (AFINN)     →  positive\",\n    y = NULL,\n    title = \"The Student Life - Opinion pieces\\nAverage sentiment scores of first paragraph by author\",\n    subtitle = \"Top 10 average positive and negative scores\",\n    caption = \"Source: Data scraped from The Student Life on April 6, 2025\"\n  ) +\n  theme_void(base_size = 16) +\n  theme(\n    plot.title = element_text(hjust = 0.5),\n    plot.subtitle = element_text(hjust = 0.5, margin = unit(c(0.5, 0, 1, 0), \"lines\")),\n    axis.text.y = element_blank(),\n    plot.caption = element_text(color = \"gray30\")\n  )"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#where-is-the-data-coming-from",
    "href": "slides/2025-04-07-webscrape.html#where-is-the-data-coming-from",
    "title": "Web Scraping",
    "section": "Where is the data coming from?",
    "text": "Where is the data coming from?\n\nhttps://tsl.news/category/opinions/"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#where-is-the-data-coming-from-1",
    "href": "slides/2025-04-07-webscrape.html#where-is-the-data-coming-from-1",
    "title": "Web Scraping",
    "section": "Where is the data coming from?",
    "text": "Where is the data coming from?\n\n\n\n\n\n\n\n\n\ntsl_opinion_titles\n\n# A tibble: 500 × 4\n   title                           authors date                first_p\n   &lt;chr&gt;                           &lt;chr&gt;   &lt;dttm&gt;              &lt;chr&gt;  \n 1 Stop buying your books          Sarah … 2025-04-04 08:03:00 from b…\n 2 The case for fleeing the count… Alex B… 2025-04-04 07:27:00 when t…\n 3 Tolerate thy neighbor           Parker… 2025-04-04 07:22:00 it’s s…\n 4 Confronting furry hate          Xavier… 2025-04-04 07:16:00 furrie…\n 5 Shame on the governor: Gavin N… Akshay… 2025-03-28 06:56:00 gavin …\n 6 Accessibility at the 5Cs requi… Zena A… 2025-03-28 06:42:00 althou…\n 7 Your spring break destination … Nicole… 2025-03-15 04:44:00 spring…\n 8 Pomona College’s Merritt Field… Katie … 2025-03-15 03:03:00 with l…\n 9 Seminars should be tech-free s… Elias … 2025-03-14 09:15:00 we hav…\n10 The bitter truth to the bitter… Daniel… 2025-03-14 09:13:00 have y…\n# ℹ 490 more rows"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#scraping-the-web-what-why",
    "href": "slides/2025-04-07-webscrape.html#scraping-the-web-what-why",
    "title": "Web Scraping",
    "section": "Scraping the web: what? why?",
    "text": "Scraping the web: what? why?\n\nIncreasing amount of data is available on the web\nThese data are provided in an unstructured format: you can always copy & paste, but it’s time-consuming and prone to errors\nWeb scraping is the process of extracting this information automatically and transform it into a structured dataset\nTwo different scenarios:\n\nScreen scraping: extract data from source code of website, with html parser (easy) or regular expression matching (less easy).\nWeb APIs (application programming interface): website offers a set of structured http requests that return JSON or XML files."
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#hypertext-markup-language",
    "href": "slides/2025-04-07-webscrape.html#hypertext-markup-language",
    "title": "Web Scraping",
    "section": "Hypertext Markup Language",
    "text": "Hypertext Markup Language\nMost of the data on the web is largely available as HTML - while it is structured (hierarchical) it often is not available in a form useful for analysis (flat / tidy).\n\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;This is a title&lt;/title&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;p align=\"center\"&gt;Hello world!&lt;/p&gt;\n    &lt;br/&gt;\n    &lt;div class=\"name\" id=\"first\"&gt;John&lt;/div&gt;\n    &lt;div class=\"name\" id=\"last\"&gt;Doe&lt;/div&gt;\n    &lt;div class=\"contact\"&gt;\n      &lt;div class=\"home\"&gt;555-555-1234&lt;/div&gt;\n      &lt;div class=\"home\"&gt;555-555-2345&lt;/div&gt;\n      &lt;div class=\"work\"&gt;555-555-9999&lt;/div&gt;\n      &lt;div class=\"fax\"&gt;555-555-8888&lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/body&gt;\n&lt;/html&gt;"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#some-html-elements",
    "href": "slides/2025-04-07-webscrape.html#some-html-elements",
    "title": "Web Scraping",
    "section": "Some HTML elements",
    "text": "Some HTML elements\n\n&lt;html&gt;: start of the HTML page\n&lt;head&gt;: header information (metadata about the page)\n&lt;body&gt;: everything that is on the page\n&lt;p&gt;: paragraphs\n&lt;b&gt;: bold\n&lt;table&gt;: table\n&lt;div&gt;: a container to group content together"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#rvest",
    "href": "slides/2025-04-07-webscrape.html#rvest",
    "title": "Web Scraping",
    "section": "rvest",
    "text": "rvest\n\n\n\nThe rvest package makes basic processing and manipulation of HTML data straight forward\nIt is designed to work with pipelines built with |&gt;\nrvest.tidyverse.org\n\n\nlibrary(rvest)"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#rvest-1",
    "href": "slides/2025-04-07-webscrape.html#rvest-1",
    "title": "Web Scraping",
    "section": "rvest",
    "text": "rvest\nCore functions:\n\nread_html() - read HTML data from a url or character string.\nhtml_elements() - select specified elements from the HTML document using CSS selectors.\nhtml_element() - select a single element from the HTML document using CSS selectors.\nhtml_table() - parse an HTML table into a data frame.\nhtml_text() / html_text2() - extract element’s text content.\nhtml_name - extract a element’s name(s).\nhtml_attrs - extract all attributes.\nhtml_attr - extract attribute value(s) by name."
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#html-rvest",
    "href": "slides/2025-04-07-webscrape.html#html-rvest",
    "title": "Web Scraping",
    "section": "html & rvest",
    "text": "html & rvest\n\nhtml &lt;- \n'&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;This is a title&lt;/title&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;p align=\"center\"&gt;Hello world!&lt;/p&gt;\n    &lt;br/&gt;\n    &lt;div class=\"name\" id=\"first\"&gt;John&lt;/div&gt;\n    &lt;div class=\"name\" id=\"last\"&gt;Doe&lt;/div&gt;\n    &lt;div class=\"contact\"&gt;\n      &lt;div class=\"home\"&gt;555-555-1234&lt;/div&gt;\n      &lt;div class=\"home\"&gt;555-555-2345&lt;/div&gt;\n      &lt;div class=\"work\"&gt;555-555-9999&lt;/div&gt;\n      &lt;div class=\"fax\"&gt;555-555-8888&lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/body&gt;\n&lt;/html&gt;'\n\n\n\nread_html(html)\n\n{html_document}\n&lt;html&gt;\n[1] &lt;head&gt;\\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8 ...\n[2] &lt;body&gt;\\n    &lt;p align=\"center\"&gt;Hello world!&lt;/p&gt;\\n    &lt;br&gt;&lt;div class=\"name\" ..."
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#selecting-elements",
    "href": "slides/2025-04-07-webscrape.html#selecting-elements",
    "title": "Web Scraping",
    "section": "Selecting elements",
    "text": "Selecting elements\n\nread_html(html) |&gt; html_elements(\"p\")\n\n{xml_nodeset (1)}\n[1] &lt;p align=\"center\"&gt;Hello world!&lt;/p&gt;\n\n\n\n\nread_html(html) |&gt; html_elements(\"p\") |&gt; html_text()\n\n[1] \"Hello world!\"\n\n\n\n\n\nread_html(html) |&gt; html_elements(\"p\") |&gt; html_name()\n\n[1] \"p\"\n\n\n\n\n\nread_html(html) |&gt; html_elements(\"p\") |&gt; html_attrs()\n\n[[1]]\n   align \n\"center\" \n\n\n\n\n\nread_html(html) |&gt; html_elements(\"p\") |&gt; html_attr(\"align\")\n\n[1] \"center\""
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#more-selecting-elements",
    "href": "slides/2025-04-07-webscrape.html#more-selecting-elements",
    "title": "Web Scraping",
    "section": "More selecting elements",
    "text": "More selecting elements\n\n\nread_html(html) |&gt; html_elements(\"div\")\n\n{xml_nodeset (7)}\n[1] &lt;div class=\"name\" id=\"first\"&gt;John&lt;/div&gt;\n[2] &lt;div class=\"name\" id=\"last\"&gt;Doe&lt;/div&gt;\n[3] &lt;div class=\"contact\"&gt;\\n      &lt;div class=\"home\"&gt;555-555-1234&lt;/div&gt;\\n       ...\n[4] &lt;div class=\"home\"&gt;555-555-1234&lt;/div&gt;\n[5] &lt;div class=\"home\"&gt;555-555-2345&lt;/div&gt;\n[6] &lt;div class=\"work\"&gt;555-555-9999&lt;/div&gt;\n[7] &lt;div class=\"fax\"&gt;555-555-8888&lt;/div&gt;\n\n\n\n\n\n\nread_html(html) |&gt; html_elements(\"div\") |&gt; html_text()\n\n[1] \"John\"                                                                                  \n[2] \"Doe\"                                                                                   \n[3] \"\\n      555-555-1234\\n      555-555-2345\\n      555-555-9999\\n      555-555-8888\\n    \"\n[4] \"555-555-1234\"                                                                          \n[5] \"555-555-2345\"                                                                          \n[6] \"555-555-9999\"                                                                          \n[7] \"555-555-8888\""
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#css-selectors",
    "href": "slides/2025-04-07-webscrape.html#css-selectors",
    "title": "Web Scraping",
    "section": "CSS selectors",
    "text": "CSS selectors\n\nWe will use a tool called SelectorGadget to help us identify the HTML elements of interest by constructing a CSS selector which can be used to subset the HTML document.\n\n\n\nSome examples of basic selector syntax is below,\n\n\n\n\n\n\n\n\n\n\nSelector\nExample\nDescription\n\n\n\n\n.class\n.title\nSelect all elements with class=“title”\n\n\n#id\n#name\nSelect all elements with id=“name”\n\n\nelement\np\nSelect all &lt;p&gt; elements\n\n\nelement element\ndiv p\nSelect all &lt;p&gt; elements inside a &lt;div&gt; element\n\n\nelement&gt;element\ndiv &gt; p\nSelect all &lt;p&gt; elements with &lt;div&gt; as a direct parent\n\n\n[attribute]\n[class]\nSelect all elements with a class attribute\n\n\n[attribute=value]\n[class=title]\nSelect all elements with class=“title”"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#css-classes-and-ids",
    "href": "slides/2025-04-07-webscrape.html#css-classes-and-ids",
    "title": "Web Scraping",
    "section": "CSS classes and ids",
    "text": "CSS classes and ids\n\nclass and id are used to style elements (e.g., change their color!). They are special types of attributes.\nclass can be applied to multiple different elements (class is identified with ., for example .name)\nid is unique to each element (id is identified with #, for example, #first)\n\n\nread_html(html) |&gt; html_elements(\".name\")\n\n{xml_nodeset (2)}\n[1] &lt;div class=\"name\" id=\"first\"&gt;John&lt;/div&gt;\n[2] &lt;div class=\"name\" id=\"last\"&gt;Doe&lt;/div&gt;\n\n\n\n\nread_html(html) |&gt; html_elements(\"div.name\")\n\n{xml_nodeset (2)}\n[1] &lt;div class=\"name\" id=\"first\"&gt;John&lt;/div&gt;\n[2] &lt;div class=\"name\" id=\"last\"&gt;Doe&lt;/div&gt;\n\n\n\n\n\nread_html(html) |&gt; html_elements(\"#first\")\n\n{xml_nodeset (1)}\n[1] &lt;div class=\"name\" id=\"first\"&gt;John&lt;/div&gt;"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#text-with-html_text-vs.-html_text2",
    "href": "slides/2025-04-07-webscrape.html#text-with-html_text-vs.-html_text2",
    "title": "Web Scraping",
    "section": "Text with html_text() vs. html_text2()",
    "text": "Text with html_text() vs. html_text2()\n\nhtml = read_html(\n  \"&lt;p&gt;  \n    This is the first sentence in the paragraph.\n    This is the second sentence that should be on the same line as the first sentence.&lt;br&gt;This third sentence should start on a new line.\n  &lt;/p&gt;\"\n)\n\n\n\nhtml |&gt; html_text()\n\n[1] \"  \\n    This is the first sentence in the paragraph.\\n    This is the second sentence that should be on the same line as the first sentence.This third sentence should start on a new line.\\n  \"\n\nhtml |&gt; html_text2()\n\n[1] \"This is the first sentence in the paragraph. This is the second sentence that should be on the same line as the first sentence.\\nThis third sentence should start on a new line.\""
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#html-tables-with-html_table",
    "href": "slides/2025-04-07-webscrape.html#html-tables-with-html_table",
    "title": "Web Scraping",
    "section": "HTML tables with html_table()",
    "text": "HTML tables with html_table()\n\nhtml_table = \n'&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;This is a title&lt;/title&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;table&gt;\n      &lt;tr&gt; &lt;th&gt;a&lt;/th&gt; &lt;th&gt;b&lt;/th&gt; &lt;th&gt;c&lt;/th&gt; &lt;/tr&gt;\n      &lt;tr&gt; &lt;td&gt;1&lt;/td&gt; &lt;td&gt;2&lt;/td&gt; &lt;td&gt;3&lt;/td&gt; &lt;/tr&gt;\n      &lt;tr&gt; &lt;td&gt;2&lt;/td&gt; &lt;td&gt;3&lt;/td&gt; &lt;td&gt;4&lt;/td&gt; &lt;/tr&gt;\n      &lt;tr&gt; &lt;td&gt;3&lt;/td&gt; &lt;td&gt;4&lt;/td&gt; &lt;td&gt;5&lt;/td&gt; &lt;/tr&gt;\n    &lt;/table&gt;\n  &lt;/body&gt;\n&lt;/html&gt;'\n\n\n\nread_html(html_table) |&gt;\n  html_elements(\"table\") |&gt; \n  html_table()\n\n[[1]]\n# A tibble: 3 × 3\n      a     b     c\n  &lt;int&gt; &lt;int&gt; &lt;int&gt;\n1     1     2     3\n2     2     3     4\n3     3     4     5"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#html_attr",
    "href": "slides/2025-04-07-webscrape.html#html_attr",
    "title": "Web Scraping",
    "section": "html_attr()",
    "text": "html_attr()\nextracts data from attributes:\n\nhtml &lt;- minimal_html(\"\n  &lt;p&gt;&lt;a href='https://en.wikipedia.org/wiki/Cat'&gt;cats&lt;/a&gt;&lt;/p&gt;\n  &lt;p&gt;&lt;a href='https://en.wikipedia.org/wiki/Dog'&gt;dogs&lt;/a&gt;&lt;/p&gt;\n\")\nhtml\n\n{html_document}\n&lt;html&gt;\n[1] &lt;head&gt;\\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8 ...\n[2] &lt;body&gt;\\n&lt;p&gt;&lt;a href=\"https://en.wikipedia.org/wiki/Cat\"&gt;cats&lt;/a&gt;&lt;/p&gt;\\n  &lt;p ...\n\n\n\nhtml |&gt; \nhtml_attr(\"href\")\n\n[1] NA\n\n\n\nhtml |&gt; \nhtml_elements(\"[href]\") |&gt; \nhtml_attr(\"href\")\n\n[1] \"https://en.wikipedia.org/wiki/Cat\" \"https://en.wikipedia.org/wiki/Dog\"\n\n\n\nhtml |&gt; \n  html_elements(\"p\") \n\n{xml_nodeset (2)}\n[1] &lt;p&gt;&lt;a href=\"https://en.wikipedia.org/wiki/Cat\"&gt;cats&lt;/a&gt;&lt;/p&gt;\n[2] &lt;p&gt;&lt;a href=\"https://en.wikipedia.org/wiki/Dog\"&gt;dogs&lt;/a&gt;&lt;/p&gt;\n\n\n\nhtml |&gt; \n  html_elements(\"p\") |&gt; \n  html_element(\"a\") \n\n{xml_nodeset (2)}\n[1] &lt;a href=\"https://en.wikipedia.org/wiki/Cat\"&gt;cats&lt;/a&gt;\n[2] &lt;a href=\"https://en.wikipedia.org/wiki/Dog\"&gt;dogs&lt;/a&gt;\n\n\n\nhtml |&gt; \n  html_elements(\"p\") |&gt; \n  html_element(\"a\") |&gt; \n  html_attr(\"href\")\n\n[1] \"https://en.wikipedia.org/wiki/Cat\" \"https://en.wikipedia.org/wiki/Dog\"\n\n\n\nhtml |&gt; \n  html_element(\"a\") |&gt; \n  html_attr(\"href\")\n\n[1] \"https://en.wikipedia.org/wiki/Cat\"\n\n\n\nhtml |&gt; \n  html_elements(\"a\") |&gt; \n  html_attr(\"href\")\n\n[1] \"https://en.wikipedia.org/wiki/Cat\" \"https://en.wikipedia.org/wiki/Dog\"\n\n\n\nhtml_attr() always returns a string, so if you’re extracting numbers or dates, you’ll need to do some post-processing."
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#div-p-vs-div-p",
    "href": "slides/2025-04-07-webscrape.html#div-p-vs-div-p",
    "title": "Web Scraping",
    "section": "div p vs div > p",
    "text": "div p vs div &gt; p\n\ndiv p selects all &lt;p&gt; elements within &lt;div&gt;, regardless of depth.\ndiv &gt; p selects only direct child &lt;p&gt; elements of &lt;div&gt;.\n\n&lt;div&gt;\n  &lt;p&gt;This will be selected by both `div p` and `div &gt; p`.&lt;/p&gt; \n  &lt;section&gt;\n    &lt;p&gt;This will be selected only by `div p`, not by `div &gt; p`.&lt;/p&gt;\n  &lt;/section&gt;\n&lt;/div&gt;"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#selectorgadget",
    "href": "slides/2025-04-07-webscrape.html#selectorgadget",
    "title": "Web Scraping",
    "section": "SelectorGadget",
    "text": "SelectorGadget\nSelectorGadget (selectorgadget.com) is a javascript based tool that helps you interactively build an appropriate CSS selector for the content you are interested in."
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#recap",
    "href": "slides/2025-04-07-webscrape.html#recap",
    "title": "Web Scraping",
    "section": "Recap",
    "text": "Recap\n\nUse the SelectorGadget identify elements you want to grab\nUse the rvest R package to first read in the entire page (into R) and then parse the object you’ve read in to the elements you’re interested in\nPut the components together in a data frame (a tibble) and analyze it like you analyze any other data"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#plan",
    "href": "slides/2025-04-07-webscrape.html#plan",
    "title": "Web Scraping",
    "section": "Plan",
    "text": "Plan\n\nRead in the entire page\nScrape opinion title and save as title\nScrape author and save as author\nScrape date and save as date\nCreate a new data frame called tsl_opinion with variables title, author, and date"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#read-in-the-entire-page",
    "href": "slides/2025-04-07-webscrape.html#read-in-the-entire-page",
    "title": "Web Scraping",
    "section": "Read in the entire page",
    "text": "Read in the entire page\n\ntsl_page &lt;- read_html(\"https://tsl.news/category/opinions/\")\ntsl_page\n\n{html_document}\n&lt;html lang=\"en-US\"&gt;\n[1] &lt;head&gt;\\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8 ...\n[2] &lt;body class=\"archive category category-opinions category-2244 custom-back ...\n\n\n\n\ntypeof(tsl_page)\n\n[1] \"list\"\n\nclass(tsl_page)\n\n[1] \"xml_document\" \"xml_node\"    \n\n\n\nwe need to convert into something more familiar, like a data frame"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#scrape-title-and-save-as-title",
    "href": "slides/2025-04-07-webscrape.html#scrape-title-and-save-as-title",
    "title": "Web Scraping",
    "section": "Scrape title and save as title",
    "text": "Scrape title and save as title\n\ntsl_page |&gt; \nhtml_elements(\".entry-title a\") \n\n{xml_nodeset (10)}\n [1] &lt;a href=\"https://tsl.news/opinion-stop-buying-your-books/\" title=\"OPINIO ...\n [2] &lt;a href=\"https://tsl.news/opinion-the-case-for-fleeing-the-country/\" tit ...\n [3] &lt;a href=\"https://tsl.news/opinion-tolerate-thy-neighbor/\" title=\"OPINION ...\n [4] &lt;a href=\"https://tsl.news/opinion-confronting-furry-hate/\" title=\"OPINIO ...\n [5] &lt;a href=\"https://tsl.news/shame-on-the-governor-gavin-newsom-is-his-own- ...\n [6] &lt;a href=\"https://tsl.news/opinions-accessibility-at-the-5cs-requires-mor ...\n [7] &lt;a href=\"https://tsl.news/opinion-your-spring-break-destination-isnt-rea ...\n [8] &lt;a href=\"https://tsl.news/opinion-pomona-colleges-merritt-field-transfor ...\n [9] &lt;a href=\"https://tsl.news/opinion-seminars-should-be-tech-free-spaces/\"  ...\n[10] &lt;a href=\"https://tsl.news/opinion-the-bitter-truth-to-the-bitter-brew/\"  ...\n\n\n\n\ntitle &lt;- tsl_page |&gt; \nhtml_elements(\".entry-title a\") |&gt; \nhtml_text()\ntitle\n\n [1] \"OPINION: Stop buying your books\"                                                             \n [2] \"OPINION: The case for fleeing the country\"                                                   \n [3] \"OPINION: Tolerate thy neighbor\"                                                              \n [4] \"OPINION: Confronting furry hate\"                                                             \n [5] \"Shame on the governor: Gavin Newsom is his own worst enemy\"                                  \n [6] \"OPINION: Accessibility at the 5Cs requires more than just good intentions\"                   \n [7] \"OPINION: Your spring break destination isn’t really yours\"                                   \n [8] \"OPINION: Pomona College’s Merritt Field transformation contradicts environmental commitments\"\n [9] \"OPINION: Seminars should be tech-free spaces\"                                                \n[10] \"OPINION: The bitter truth to the bitter brew\"                                                \n\ntitle &lt;- title |&gt; \nstr_remove(\"OPINION: \")\n\ntitle\n\n [1] \"Stop buying your books\"                                                             \n [2] \"The case for fleeing the country\"                                                   \n [3] \"Tolerate thy neighbor\"                                                              \n [4] \"Confronting furry hate\"                                                             \n [5] \"Shame on the governor: Gavin Newsom is his own worst enemy\"                         \n [6] \"Accessibility at the 5Cs requires more than just good intentions\"                   \n [7] \"Your spring break destination isn’t really yours\"                                   \n [8] \"Pomona College’s Merritt Field transformation contradicts environmental commitments\"\n [9] \"Seminars should be tech-free spaces\"                                                \n[10] \"The bitter truth to the bitter brew\""
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#scrape-author-and-save-as-author",
    "href": "slides/2025-04-07-webscrape.html#scrape-author-and-save-as-author",
    "title": "Web Scraping",
    "section": "Scrape author and save as author",
    "text": "Scrape author and save as author\n\nauthor &lt;- tsl_page |&gt; \nhtml_elements(\"span.author\") |&gt; \nhtml_text()\nauthor\n\n [1] \"By Sarah Russo\"                                \n [2] \"By Alex Benach\"                                \n [3] \"By Parker DeVore\"                              \n [4] \"By Xavier Callan\"                              \n [5] \"By Akshay Seetharam\"                           \n [6] \"By Zena Almeida-Warwin and Jackie Kostyuchenko\"\n [7] \"By Nicole Teh\"                                 \n [8] \"By Katie Cline\"                                \n [9] \"By Elias Diwan\"                                \n[10] \"By Daniel Han Tae Choi\"                        \n\n\n\nauthor &lt;- author |&gt; \nstr_replace(\"By \", \"\")\n\nauthor\n\n [1] \"Sarah Russo\"                                \n [2] \"Alex Benach\"                                \n [3] \"Parker DeVore\"                              \n [4] \"Xavier Callan\"                              \n [5] \"Akshay Seetharam\"                           \n [6] \"Zena Almeida-Warwin and Jackie Kostyuchenko\"\n [7] \"Nicole Teh\"                                 \n [8] \"Katie Cline\"                                \n [9] \"Elias Diwan\"                                \n[10] \"Daniel Han Tae Choi\""
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#scrape-date-and-save-as-date",
    "href": "slides/2025-04-07-webscrape.html#scrape-date-and-save-as-date",
    "title": "Web Scraping",
    "section": "Scrape date and save as date",
    "text": "Scrape date and save as date\n\ndate &lt;- tsl_page |&gt; \nhtml_elements(\".published\") |&gt; \nhtml_text()\ndate\n\n [1] \"April 4, 2025 1:03 am\"   \"April 4, 2025 12:27 am\" \n [3] \"April 4, 2025 12:22 am\"  \"April 4, 2025 12:16 am\" \n [5] \"March 27, 2025 11:56 pm\" \"March 27, 2025 11:42 pm\"\n [7] \"March 14, 2025 9:44 pm\"  \"March 14, 2025 8:03 pm\" \n [9] \"March 14, 2025 2:15 am\"  \"March 14, 2025 2:13 am\" \n\ndate &lt;- date |&gt; \nlubridate::mdy_hm(tz = \"America/Los_Angeles\")\ndate\n\n [1] \"2025-04-04 01:03:00 PDT\" \"2025-04-04 00:27:00 PDT\"\n [3] \"2025-04-04 00:22:00 PDT\" \"2025-04-04 00:16:00 PDT\"\n [5] \"2025-03-27 23:56:00 PDT\" \"2025-03-27 23:42:00 PDT\"\n [7] \"2025-03-14 21:44:00 PDT\" \"2025-03-14 20:03:00 PDT\"\n [9] \"2025-03-14 02:15:00 PDT\" \"2025-03-14 02:13:00 PDT\""
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#create-a-new-data-frame",
    "href": "slides/2025-04-07-webscrape.html#create-a-new-data-frame",
    "title": "Web Scraping",
    "section": "Create a new data frame",
    "text": "Create a new data frame\n\ntsl_opinion &lt;- tibble(\n    title,\n    author,\n    date\n)\n\ntsl_opinion\n\n# A tibble: 10 × 3\n   title                                    author date               \n   &lt;chr&gt;                                    &lt;chr&gt;  &lt;dttm&gt;             \n 1 Stop buying your books                   Sarah… 2025-04-04 01:03:00\n 2 The case for fleeing the country         Alex … 2025-04-04 00:27:00\n 3 Tolerate thy neighbor                    Parke… 2025-04-04 00:22:00\n 4 Confronting furry hate                   Xavie… 2025-04-04 00:16:00\n 5 Shame on the governor: Gavin Newsom is … Aksha… 2025-03-27 23:56:00\n 6 Accessibility at the 5Cs requires more … Zena … 2025-03-27 23:42:00\n 7 Your spring break destination isn’t rea… Nicol… 2025-03-14 21:44:00\n 8 Pomona College’s Merritt Field transfor… Katie… 2025-03-14 20:03:00\n 9 Seminars should be tech-free spaces      Elias… 2025-03-14 02:15:00\n10 The bitter truth to the bitter brew      Danie… 2025-03-14 02:13:00"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#opinion-titles",
    "href": "slides/2025-04-07-webscrape.html#opinion-titles",
    "title": "Web Scraping",
    "section": "Opinion titles",
    "text": "Opinion titles\n\ntsl_opinions &lt;- function(i){\ntsl_page &lt;- rvest::read_html(paste0(\"https://tsl.news/category/opinions/page/\",i))\n  \ntitle &lt;- tsl_page |&gt; \nhtml_elements(\".entry-title a\") |&gt; \nhtml_text() |&gt; \nstr_remove(\"OPINION: \")\n  \nauthor &lt;- tsl_page |&gt; \nhtml_elements(\"span.author\") |&gt; \nhtml_text() |&gt; \ntibble() |&gt; \nset_names(nm = \"authors\") |&gt; \nmutate(authors = str_replace(authors, \"By \", \"\")) \n  \ndate &lt;- tsl_page |&gt; \nhtml_elements(\".published\") |&gt; \nhtml_text() |&gt; \nlubridate::mdy_hm(tz = \"America/Los_Angeles\")\n\nfirst_p &lt;- tsl_page |&gt; \n  html_elements(\".entry-content p:nth-child(1)\") |&gt; \n  html_text() |&gt; \n  tolower()\n  \ntibble(\n    title,\n    author,\n    date,\n    first_p\n)  \n}\n\ntsl_opinion_titles &lt;- c(1:50) |&gt; purrr::map(tsl_opinions) |&gt; \nlist_rbind()"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#check-if-you-are-allowed",
    "href": "slides/2025-04-07-webscrape.html#check-if-you-are-allowed",
    "title": "Web Scraping",
    "section": "Check if you are allowed!",
    "text": "Check if you are allowed!\n\nlibrary(robotstxt)\npaths_allowed(\"https://tsl.news/category/opinions/\")\n\n[1] TRUE\n\n\n\npaths_allowed(\"http://www.facebook.com\")\n\n[1] FALSE"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#ethics-can-you-vs-should-you",
    "href": "slides/2025-04-07-webscrape.html#ethics-can-you-vs-should-you",
    "title": "Web Scraping",
    "section": "Ethics: “Can you?” vs “Should you?”",
    "text": "Ethics: “Can you?” vs “Should you?”\n\n\n\n\n\n\n\nSource: Brian Resnick, Researchers just released profile data on 70,000 OkCupid users without permission, Vox."
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#can-you-vs-should-you",
    "href": "slides/2025-04-07-webscrape.html#can-you-vs-should-you",
    "title": "Web Scraping",
    "section": "“Can you?” vs “Should you?”",
    "text": "“Can you?” vs “Should you?”"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#challenges-unreliable-formatting",
    "href": "slides/2025-04-07-webscrape.html#challenges-unreliable-formatting",
    "title": "Web Scraping",
    "section": "Challenges: Unreliable formatting",
    "text": "Challenges: Unreliable formatting\n\n\n\n\n\n\n\nalumni.duke.edu/news/notable-alumni"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#challenges-data-broken-into-many-pages",
    "href": "slides/2025-04-07-webscrape.html#challenges-data-broken-into-many-pages",
    "title": "Web Scraping",
    "section": "Challenges: Data broken into many pages",
    "text": "Challenges: Data broken into many pages"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#more-ethics-graphics",
    "href": "slides/2025-04-07-webscrape.html#more-ethics-graphics",
    "title": "Web Scraping",
    "section": "More ethics: graphics",
    "text": "More ethics: graphics\nConsider the following image. What do you think is wrong? (Hint: examine the y-axis carefully)\n\nReproduction of a data graphic reporting the number of gun deaths in Florida over time. The original image was published by Reuters. (Baumer, Kaplan, and Horton 2021)"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#more-ethics-graphics-1",
    "href": "slides/2025-04-07-webscrape.html#more-ethics-graphics-1",
    "title": "Web Scraping",
    "section": "More ethics: graphics",
    "text": "More ethics: graphics\n\n\n\n\n\n\n\nMay 10, 2020, Georgia Department of Health, COVID-19 cases for 5 counties across time. https://dph.georgia.gov/covid-19-daily-status-report\n\n\n\n\n\n\n\n\n\n\nMay 17, 2020, Georgia Department of Health, COVID-19 cases for 5 counties across time. https://dph.georgia.gov/covid-19-daily-status-report"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#more-ethics-graphics-2",
    "href": "slides/2025-04-07-webscrape.html#more-ethics-graphics-2",
    "title": "Web Scraping",
    "section": "More ethics: graphics",
    "text": "More ethics: graphics\nA few weeks later, the Georgia Department of Health came out with the following two plots where, despite cases skyrocketing, they display images where the visual doesn’t really change.\n\n\n\n\n\n\n\nJuly 2, 2020, Georgia Department of Health, COVID-19 cases per 100K https://dph.georgia.gov/covid-19-daily-status-report\n\n\n\n\n\n\n\n\n\n\nJuly 17, 2020, Georgia Department of Health, COVID-19 cases per 100K https://dph.georgia.gov/covid-19-daily-status-report"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#more-ethics-algorithms",
    "href": "slides/2025-04-07-webscrape.html#more-ethics-algorithms",
    "title": "Web Scraping",
    "section": "More ethics: algorithms",
    "text": "More ethics: algorithms\n\ndisparate treatment \\(\\rightarrow\\) means that the differential treatment is intentional\ndisparate impact \\(\\rightarrow\\) means that the differential treatment is unintentional or implicit (some examples include advancing mortgage credit, employment selection, predictive policing)"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#more-ethics-compas",
    "href": "slides/2025-04-07-webscrape.html#more-ethics-compas",
    "title": "Web Scraping",
    "section": "More ethics: COMPAS",
    "text": "More ethics: COMPAS\n\nDylan Fugett had three subsequent arrests for drug possession. Bernard Parker had no subsequent offenses."
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#more-ethics-compas-1",
    "href": "slides/2025-04-07-webscrape.html#more-ethics-compas-1",
    "title": "Web Scraping",
    "section": "More ethics: COMPAS",
    "text": "More ethics: COMPAS\n\n\n\nDYLAN FUGETT\nBERNARD PARKER\n\n\n\n\nPrior Offense\nPrior Offense\n\n\n1 attempted burglary\n1 resisting arrest without violence\n\n\nLOW RISK - 3\nHIGH RISK - 10\n\n\nSubsequent Offenses\nSubsequent Offenses\n\n\n3 drug possessions\nNone"
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#more-ethics-compas-2",
    "href": "slides/2025-04-07-webscrape.html#more-ethics-compas-2",
    "title": "Web Scraping",
    "section": "More ethics: COMPAS",
    "text": "More ethics: COMPAS\n\nFalse positive and false negative rates broken down by race."
  },
  {
    "objectID": "slides/2025-04-07-webscrape.html#references",
    "href": "slides/2025-04-07-webscrape.html#references",
    "title": "Web Scraping",
    "section": "References",
    "text": "References"
  },
  {
    "objectID": "slides/2025-04-02-ethics.html#compas",
    "href": "slides/2025-04-02-ethics.html#compas",
    "title": "Ethics in Data Science",
    "section": "COMPAS",
    "text": "COMPAS\n\nDylan Fugett had three subsequent arrests for drug possession. Bernard Parker had no subsequent offenses."
  },
  {
    "objectID": "slides/2025-04-02-ethics.html#compas-1",
    "href": "slides/2025-04-02-ethics.html#compas-1",
    "title": "Ethics in Data Science",
    "section": "COMPAS",
    "text": "COMPAS\n\n\n\nDYLAN FUGETT\nBERNARD PARKER\n\n\n\n\nPrior Offense\nPrior Offense\n\n\n1 attempted burglary\n1 resisting arrest without violence\n\n\nLOW RISK - 3\nHIGH RISK - 10\n\n\nSubsequent Offenses\nSubsequent Offenses\n\n\n3 drug possessions\nNone"
  },
  {
    "objectID": "slides/2025-04-02-ethics.html#compas-2",
    "href": "slides/2025-04-02-ethics.html#compas-2",
    "title": "Ethics in Data Science",
    "section": "COMPAS",
    "text": "COMPAS\n\nFalse positive and false negative rates broken down by race."
  }
]