<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jo Hardin">

<title>SQL statements – Foundations of Data Science in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../images/favicon.ico" rel="icon">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-643cb54a90563409bf607ca7ddb324ba.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/quarto-contrib/fontawesome6-1.2.0/all.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/fontawesome6-1.2.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="../site_libs/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../site_libs/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="https://ds002r-fds.netlify.app/" class="navbar-brand navbar-brand-logo">
    <img src="../images/st47s.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="https://ds002r-fds.netlify.app/">
    <span class="navbar-title">Foundations of Data Science in R</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../syllabus.html"> 
<span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../notes.html"> 
<span class="menu-text">Class Notes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../clicker_study.html"> 
<span class="menu-text">Clicker Q</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../R-tip.html"> 
<span class="menu-text">R tip</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-project" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Project</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-project">    
        <li>
    <a class="dropdown-item" href="../project.html">
 <span class="dropdown-text">semester mini-projects</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../project1.html">
 <span class="dropdown-text">project 1 - website</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../project2.html">
 <span class="dropdown-text">project 2 - text analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://hardin47.netlify.app/courses/data/">
 <span class="dropdown-text">Data Sources</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../github.html"> 
<span class="menu-text">GitHub</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    <div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="2025-04-16-clauses.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">SQL statements</h1>
<p class="subtitle lead">April 16, 2025</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jo Hardin </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="agenda-41625" class="level1">
<h1>Agenda 4/16/25</h1>
<ol type="1">
<li>structure of <strong>SQL</strong> tables</li>
<li><strong>SQL</strong> keywords</li>
<li><strong>SQL</strong> queries to <strong>R</strong> objects</li>
</ol>
</section>
<section id="todays-example" class="level1">
<h1>Today’s example</h1>
<section id="traffic-stops" class="level2">
<h2 class="anchored" data-anchor-id="traffic-stops">Traffic Stops</h2>
<p>Consider a database of information from <a href="https://openpolicing.stanford.edu/data/" target="_blank">Stanford Open Policing Project</a> on over 200 million traffic stops in the US.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../images/traffic_police.jpeg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="establishing-a-sql-connection" class="level2">
<h2 class="anchored" data-anchor-id="establishing-a-sql-connection">Establishing a SQL connection</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>con_traffic <span class="ot">&lt;-</span> DBI<span class="sc">::</span><span class="fu">dbConnect</span>(</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  RMariaDB<span class="sc">::</span><span class="fu">MariaDB</span>(),</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">dbname =</span> <span class="st">"traffic"</span>,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">host =</span> <span class="fu">Sys.getenv</span>(<span class="st">"TRAFFIC_HOST"</span>),</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">user =</span> <span class="fu">Sys.getenv</span>(<span class="st">"TRAFFIC_USER"</span>),</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">password =</span> <span class="fu">Sys.getenv</span>(<span class="st">"TRAFFIC_PWD"</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="traffic-stops-1" class="level2 scrollable">
<h2 class="scrollable anchored" data-anchor-id="traffic-stops-1">Traffic Stops</h2>
<p>88 tables in the <code>traffic</code> database! Lots of details on traffic stops across cities and highway patrols.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>SHOW <span class="kw">TABLES</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Tables_in_traffic</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">ar_little_rock_2020_04_01</td>
</tr>
<tr class="even">
<td style="text-align: left;">az_gilbert_2020_04_01</td>
</tr>
<tr class="odd">
<td style="text-align: left;">az_mesa_2023_01_26</td>
</tr>
<tr class="even">
<td style="text-align: left;">az_statewide_2020_04_01</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ca_anaheim_2020_04_01</td>
</tr>
<tr class="even">
<td style="text-align: left;">ca_bakersfield_2020_04_01</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ca_long_beach_2020_04_01</td>
</tr>
<tr class="even">
<td style="text-align: left;">ca_los_angeles_2020_04_01</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ca_oakland_2020_04_01</td>
</tr>
<tr class="even">
<td style="text-align: left;">ca_san_bernardino_2020_04_01</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="lapd---glance-through-tables" class="level2 scrollable">
<h2 class="scrollable anchored" data-anchor-id="lapd---glance-through-tables">LAPD - glance through tables</h2>
<p>(<code>0</code> is the number of rows that are skipped, <code>10</code> is the number of rows that are retrieved.)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> ca_los_angeles_2020_04_01</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">0</span>, <span class="dv">10</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<colgroup>
<col style="width: 13%">
<col style="width: 7%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 11%">
<col style="width: 9%">
<col style="width: 8%">
<col style="width: 11%">
<col style="width: 7%">
<col style="width: 17%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">raw_row_number</th>
<th style="text-align: left;">date</th>
<th style="text-align: left;">time</th>
<th style="text-align: left;">district</th>
<th style="text-align: left;">region</th>
<th style="text-align: left;">subject_race</th>
<th style="text-align: left;">subject_sex</th>
<th style="text-align: left;">officer_id_hash</th>
<th style="text-align: left;">type</th>
<th style="text-align: left;">raw_descent_description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">5692933</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">13:59:00</td>
<td style="text-align: left;">0753</td>
<td style="text-align: left;">WILSHIRE</td>
<td style="text-align: left;">hispanic</td>
<td style="text-align: left;">male</td>
<td style="text-align: left;">15ecd81b00</td>
<td style="text-align: left;">pedestrian</td>
<td style="text-align: left;">HISPANIC</td>
</tr>
<tr class="even">
<td style="text-align: left;">240731</td>
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: left;">00:05:00</td>
<td style="text-align: left;">665</td>
<td style="text-align: left;">WEST TRAFFIC</td>
<td style="text-align: left;">other</td>
<td style="text-align: left;">male</td>
<td style="text-align: left;">b707de41e0</td>
<td style="text-align: left;">vehicular</td>
<td style="text-align: left;">OTHER</td>
</tr>
<tr class="odd">
<td style="text-align: left;">240592|240593</td>
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: left;">00:10:00</td>
<td style="text-align: left;">1258</td>
<td style="text-align: left;">SEVENTY-SEVENTH</td>
<td style="text-align: left;">hispanic</td>
<td style="text-align: left;">male</td>
<td style="text-align: left;">b49ae7078c</td>
<td style="text-align: left;">pedestrian</td>
<td style="text-align: left;">HISPANIC</td>
</tr>
<tr class="even">
<td style="text-align: left;">241116</td>
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: left;">00:10:00</td>
<td style="text-align: left;">1635</td>
<td style="text-align: left;">FOOTHILL</td>
<td style="text-align: left;">hispanic</td>
<td style="text-align: left;">male</td>
<td style="text-align: left;">e70ce46248</td>
<td style="text-align: left;">vehicular</td>
<td style="text-align: left;">HISPANIC</td>
</tr>
<tr class="odd">
<td style="text-align: left;">240681</td>
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: left;">00:15:00</td>
<td style="text-align: left;">882</td>
<td style="text-align: left;">WEST LA</td>
<td style="text-align: left;">other</td>
<td style="text-align: left;">male</td>
<td style="text-align: left;">8587bd743c</td>
<td style="text-align: left;">vehicular</td>
<td style="text-align: left;">OTHER</td>
</tr>
<tr class="even">
<td style="text-align: left;">240602</td>
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: left;">00:20:00</td>
<td style="text-align: left;">559</td>
<td style="text-align: left;">HARBOR</td>
<td style="text-align: left;">hispanic</td>
<td style="text-align: left;">male</td>
<td style="text-align: left;">601bf1fdff</td>
<td style="text-align: left;">vehicular</td>
<td style="text-align: left;">HISPANIC</td>
</tr>
<tr class="odd">
<td style="text-align: left;">240594</td>
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: left;">00:20:00</td>
<td style="text-align: left;">667</td>
<td style="text-align: left;">HOLLYWOOD</td>
<td style="text-align: left;">hispanic</td>
<td style="text-align: left;">male</td>
<td style="text-align: left;">fb2e6d8ab3</td>
<td style="text-align: left;">pedestrian</td>
<td style="text-align: left;">HISPANIC</td>
</tr>
<tr class="even">
<td style="text-align: left;">241434</td>
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: left;">00:25:00</td>
<td style="text-align: left;">1658</td>
<td style="text-align: left;">FOOTHILL</td>
<td style="text-align: left;">hispanic</td>
<td style="text-align: left;">female</td>
<td style="text-align: left;">5100c8c759</td>
<td style="text-align: left;">vehicular</td>
<td style="text-align: left;">HISPANIC</td>
</tr>
<tr class="odd">
<td style="text-align: left;">240582</td>
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: left;">00:30:00</td>
<td style="text-align: left;">1041</td>
<td style="text-align: left;">WEST VALLEY</td>
<td style="text-align: left;">black</td>
<td style="text-align: left;">female</td>
<td style="text-align: left;">d54d90a4d0</td>
<td style="text-align: left;">vehicular</td>
<td style="text-align: left;">BLACK</td>
</tr>
<tr class="even">
<td style="text-align: left;">240642</td>
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: left;">00:30:00</td>
<td style="text-align: left;">1162</td>
<td style="text-align: left;">NORTH EAST</td>
<td style="text-align: left;">hispanic</td>
<td style="text-align: left;">male</td>
<td style="text-align: left;">5d6fbef1d3</td>
<td style="text-align: left;">pedestrian</td>
<td style="text-align: left;">HISPANIC</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="describe-tables" class="level2 scrollable">
<h2 class="scrollable anchored" data-anchor-id="describe-tables">DESCRIBE tables</h2>
<p>Still using a <code>{sql}</code> chunk. The <code>DESCRIBE</code> command shows the 10 field names (variables) in the <code>ca_los_angeles_2020_04_01</code> table. Some of the variables are characters (<code>text</code>) and some are <code>date</code> or <code>time</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>DESCRIBE ca_los_angeles_2020_04_01;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Field</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Null</th>
<th style="text-align: left;">Key</th>
<th style="text-align: left;">Default</th>
<th style="text-align: left;">Extra</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">raw_row_number</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">YES</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">date</td>
<td style="text-align: left;">date</td>
<td style="text-align: left;">YES</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">time</td>
<td style="text-align: left;">time</td>
<td style="text-align: left;">YES</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">district</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">YES</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">region</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">YES</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">subject_race</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">YES</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">subject_sex</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">YES</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">officer_id_hash</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">YES</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">type</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">YES</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">raw_descent_description</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">YES</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="parts-of-a-sql-table" class="level2">
<h2 class="anchored" data-anchor-id="parts-of-a-sql-table">Parts of a SQL table</h2>
<ul>
<li><code>Field</code> is the name of the variable</li>
<li><code>Type</code> is the type of the variable (numeric, character, etc.)</li>
<li><code>Null</code> indicates whether or not <code>NULL</code> values are acceptable. <code>NULL</code> values are never allowed for a Primary Key.</li>
<li><code>Key</code> designates whether the variable is a Primary Key. <code>PRI</code> is a primary key, all unique, no <code>NULL</code> values. <code>UNI</code> is a unique key, but <code>NULL</code> values are allowed. <code>MUL</code> is a non-unique (“Multiple”) key, allowing for duplicates, can speed up queries.</li>
<li><code>Default</code> provides the default value of the variable if no value is provided when a row is added to the database.</li>
</ul>
</section>
</section>
<section id="sql-bits" class="level1">
<h1><strong>SQL</strong> bits</h1>
<ul>
<li>A <strong>SQL</strong> <em>query</em> is a <strong>SQL</strong> <em>statement</em> that typically starts in <code>SELECT</code> and ends in <code>;</code></li>
<li><strong>SQL</strong> <em>keywords</em> are like data verbs in the <strong>tidyverse</strong></li>
<li>A <strong>SQL</strong> <em>clause</em> is the keyword + relevant information. E.g., <code>FROM ca_los_angeles_2020_04_01</code> or <code>WHERE search_conducted = 1 AND vehicle_make = "Subaru"</code></li>
<li>Exactly one <strong>SQL</strong> <em>statement</em> can be sent to the remote database in a <strong>SQL</strong> chunk.</li>
</ul>
<section id="order-of-keywords" class="level2">
<h2 class="anchored" data-anchor-id="order-of-keywords">Order of keywords</h2>
<p>Queries in <strong>SQL</strong> start with the <code>SELECT</code> keyword and consist of several keywords, which must be written in the following order:</p>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li><code>SELECT</code></li>
<li><code>FROM</code></li>
<li><code>JOIN</code></li>
<li><code>WHERE</code></li>
</ul>
</div><div class="column" style="width:50%;">
<ul>
<li><code>GROUP BY</code></li>
<li><code>HAVING</code></li>
<li><code>ORDER BY</code></li>
<li><code>LIMIT</code></li>
</ul>
</div>
</div>
<p>The keywords are similar to data wrangling verbs in <strong>R</strong>, but the order in <strong>SQL</strong> is super important!</p>
</section>
<section id="select-from" class="level2">
<h2 class="anchored" data-anchor-id="select-from">SELECT … FROM</h2>
<ul>
<li>start with a <code>SELECT</code>, include a corresponding <code>FROM</code></li>
<li>columns may be specified or <code>*</code> returns every column</li>
</ul>
<p>The shortest <strong>SQL</strong> query is the following <code>SELECT</code> clause. Do not run this clause!!! The <code>ca_los_angeles_2020_04_01</code> table has 5 million rows, and we do not want to look at them (print to screen) simultaneously.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>DO NOT RUN<span class="sc">:</span>  SELECT <span class="sc">*</span> FROM ca_los_angeles_2020_04_01;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="select-from-1" class="level2 scrollable">
<h2 class="scrollable anchored" data-anchor-id="select-from-1">SELECT … FROM</h2>
<p>Much better for big tables:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> ca_los_angeles_2020_04_01 <span class="kw">LIMIT</span> <span class="dv">0</span>, <span class="dv">10</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<colgroup>
<col style="width: 13%">
<col style="width: 7%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 11%">
<col style="width: 9%">
<col style="width: 8%">
<col style="width: 11%">
<col style="width: 7%">
<col style="width: 17%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">raw_row_number</th>
<th style="text-align: left;">date</th>
<th style="text-align: left;">time</th>
<th style="text-align: left;">district</th>
<th style="text-align: left;">region</th>
<th style="text-align: left;">subject_race</th>
<th style="text-align: left;">subject_sex</th>
<th style="text-align: left;">officer_id_hash</th>
<th style="text-align: left;">type</th>
<th style="text-align: left;">raw_descent_description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">5692933</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">13:59:00</td>
<td style="text-align: left;">0753</td>
<td style="text-align: left;">WILSHIRE</td>
<td style="text-align: left;">hispanic</td>
<td style="text-align: left;">male</td>
<td style="text-align: left;">15ecd81b00</td>
<td style="text-align: left;">pedestrian</td>
<td style="text-align: left;">HISPANIC</td>
</tr>
<tr class="even">
<td style="text-align: left;">240731</td>
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: left;">00:05:00</td>
<td style="text-align: left;">665</td>
<td style="text-align: left;">WEST TRAFFIC</td>
<td style="text-align: left;">other</td>
<td style="text-align: left;">male</td>
<td style="text-align: left;">b707de41e0</td>
<td style="text-align: left;">vehicular</td>
<td style="text-align: left;">OTHER</td>
</tr>
<tr class="odd">
<td style="text-align: left;">240592|240593</td>
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: left;">00:10:00</td>
<td style="text-align: left;">1258</td>
<td style="text-align: left;">SEVENTY-SEVENTH</td>
<td style="text-align: left;">hispanic</td>
<td style="text-align: left;">male</td>
<td style="text-align: left;">b49ae7078c</td>
<td style="text-align: left;">pedestrian</td>
<td style="text-align: left;">HISPANIC</td>
</tr>
<tr class="even">
<td style="text-align: left;">241116</td>
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: left;">00:10:00</td>
<td style="text-align: left;">1635</td>
<td style="text-align: left;">FOOTHILL</td>
<td style="text-align: left;">hispanic</td>
<td style="text-align: left;">male</td>
<td style="text-align: left;">e70ce46248</td>
<td style="text-align: left;">vehicular</td>
<td style="text-align: left;">HISPANIC</td>
</tr>
<tr class="odd">
<td style="text-align: left;">240681</td>
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: left;">00:15:00</td>
<td style="text-align: left;">882</td>
<td style="text-align: left;">WEST LA</td>
<td style="text-align: left;">other</td>
<td style="text-align: left;">male</td>
<td style="text-align: left;">8587bd743c</td>
<td style="text-align: left;">vehicular</td>
<td style="text-align: left;">OTHER</td>
</tr>
<tr class="even">
<td style="text-align: left;">240602</td>
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: left;">00:20:00</td>
<td style="text-align: left;">559</td>
<td style="text-align: left;">HARBOR</td>
<td style="text-align: left;">hispanic</td>
<td style="text-align: left;">male</td>
<td style="text-align: left;">601bf1fdff</td>
<td style="text-align: left;">vehicular</td>
<td style="text-align: left;">HISPANIC</td>
</tr>
<tr class="odd">
<td style="text-align: left;">240594</td>
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: left;">00:20:00</td>
<td style="text-align: left;">667</td>
<td style="text-align: left;">HOLLYWOOD</td>
<td style="text-align: left;">hispanic</td>
<td style="text-align: left;">male</td>
<td style="text-align: left;">fb2e6d8ab3</td>
<td style="text-align: left;">pedestrian</td>
<td style="text-align: left;">HISPANIC</td>
</tr>
<tr class="even">
<td style="text-align: left;">241434</td>
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: left;">00:25:00</td>
<td style="text-align: left;">1658</td>
<td style="text-align: left;">FOOTHILL</td>
<td style="text-align: left;">hispanic</td>
<td style="text-align: left;">female</td>
<td style="text-align: left;">5100c8c759</td>
<td style="text-align: left;">vehicular</td>
<td style="text-align: left;">HISPANIC</td>
</tr>
<tr class="odd">
<td style="text-align: left;">240582</td>
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: left;">00:30:00</td>
<td style="text-align: left;">1041</td>
<td style="text-align: left;">WEST VALLEY</td>
<td style="text-align: left;">black</td>
<td style="text-align: left;">female</td>
<td style="text-align: left;">d54d90a4d0</td>
<td style="text-align: left;">vehicular</td>
<td style="text-align: left;">BLACK</td>
</tr>
<tr class="even">
<td style="text-align: left;">240642</td>
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: left;">00:30:00</td>
<td style="text-align: left;">1162</td>
<td style="text-align: left;">NORTH EAST</td>
<td style="text-align: left;">hispanic</td>
<td style="text-align: left;">male</td>
<td style="text-align: left;">5d6fbef1d3</td>
<td style="text-align: left;">pedestrian</td>
<td style="text-align: left;">HISPANIC</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="select-from-2" class="level2 scrollable">
<h2 class="scrollable anchored" data-anchor-id="select-from-2">SELECT … FROM</h2>
<p>What if I switch the order of SQL keywords?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">LIMIT</span> <span class="dv">0</span>, <span class="dv">10</span> <span class="kw">FROM</span> ca_los_angeles_2020_04_01;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'FROM ca_los_angeles_2020_04_01' at line 1 [1064]</code></pre>
</div>
</div>
</section>
<section id="select-from-3" class="level2">
<h2 class="anchored" data-anchor-id="select-from-3">SELECT … FROM</h2>
<p>How do we know how many traffic stops are in the database? Two different ways of counting the rows (that produce the same number):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="fu">COUNT</span>(<span class="op">*</span>), <span class="fu">SUM</span>(<span class="dv">1</span>) <span class="kw">FROM</span> ca_los_angeles_2020_04_01 <span class="kw">LIMIT</span> <span class="dv">0</span>, <span class="dv">10</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>1 records</caption>
<thead>
<tr class="header">
<th style="text-align: right;">COUNT(*)</th>
<th style="text-align: right;">SUM(1)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">5418402</td>
<td style="text-align: right;">5418402</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>More than 5.4 million LAPD traffic stops.</p>
</section>
<section id="select-from-4" class="level2">
<h2 class="anchored" data-anchor-id="select-from-4">SELECT … FROM</h2>
<p>Let’s look at New Orleans, LA</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>DESCRIBE la_new_orleans_2020_04_01;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Field</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Null</th>
<th style="text-align: left;">Key</th>
<th style="text-align: left;">Default</th>
<th style="text-align: left;">Extra</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">raw_row_number</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">YES</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">date</td>
<td style="text-align: left;">date</td>
<td style="text-align: left;">YES</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">time</td>
<td style="text-align: left;">time</td>
<td style="text-align: left;">YES</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">location</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">YES</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">lat</td>
<td style="text-align: left;">double</td>
<td style="text-align: left;">YES</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">lng</td>
<td style="text-align: left;">double</td>
<td style="text-align: left;">YES</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">district</td>
<td style="text-align: left;">double</td>
<td style="text-align: left;">YES</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">zone</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">YES</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">subject_age</td>
<td style="text-align: left;">bigint(20)</td>
<td style="text-align: left;">YES</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">subject_race</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">YES</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="select-from-5" class="level2">
<h2 class="anchored" data-anchor-id="select-from-5">SELECT … FROM</h2>
<p>How old was the car being driven?</p>
<p>Unfortunately, <code>date</code> is saved as a date variable, and <code>vehicle_year</code> is saved as a double. Fortunately, we can convert <code>vehicle_year</code> to a date variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>      <span class="dt">date</span>, vehicle_year,</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>      STR_TO_DATE(<span class="fu">CONCAT</span>(vehicle_year, <span class="st">'-01-01'</span>), <span class="st">'%Y-%m-%d'</span>) <span class="kw">AS</span> vehicle_date</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>   <span class="kw">FROM</span> la_new_orleans_2020_04_01</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>   <span class="kw">LIMIT</span> <span class="dv">0</span>, <span class="dv">10</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th style="text-align: left;">date</th>
<th style="text-align: right;">vehicle_year</th>
<th style="text-align: left;">vehicle_date</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: right;">2005</td>
<td style="text-align: left;">2005-01-01</td>
</tr>
<tr class="even">
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: right;">2005</td>
<td style="text-align: left;">2005-01-01</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: right;">2005</td>
<td style="text-align: left;">2005-01-01</td>
</tr>
<tr class="even">
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: right;">2003</td>
<td style="text-align: left;">2003-01-01</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="select-from-6" class="level2">
<h2 class="anchored" data-anchor-id="select-from-6">SELECT … FROM</h2>
<p>Why can’t we find the difference between the two time variables?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>      <span class="dt">date</span>, vehicle_year,</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>      STR_TO_DATE(<span class="fu">CONCAT</span>(vehicle_year, <span class="st">'-01-01'</span>), <span class="st">'%Y-%m-%d'</span>) <span class="kw">AS</span> vehicle_date</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>      TIMESTAMPDIFF(<span class="dt">YEAR</span>, vehicle_date, <span class="dt">date</span>) <span class="kw">AS</span> car_age</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>   <span class="kw">FROM</span> la_new_orleans_2020_04_01</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>   <span class="kw">LIMIT</span> <span class="dv">0</span>, <span class="dv">10</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TIMESTAMPDIFF(YEAR, vehicle_date, date) AS car_age
   FROM la_new_orleans_2020_0' at line 4 [1064]</code></pre>
</div>
</div>
</section>
<section id="select-from-7" class="level2 scrollable">
<h2 class="scrollable anchored" data-anchor-id="select-from-7">SELECT … FROM</h2>
<p>Solution 1: apply the <code>STR_TO_DATE()</code> function inside the <code>TIMESTAMPDIFF()</code> function</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>   <span class="dt">date</span>,</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>   vehicle_year,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>   TIMESTAMPDIFF(<span class="dt">YEAR</span>, </span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>                 STR_TO_DATE(<span class="fu">CONCAT</span>(vehicle_year, <span class="st">'-01-01'</span>), <span class="st">'%Y-%m-%d'</span>),</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>                 <span class="dt">date</span>) <span class="kw">AS</span> car_age </span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> la_new_orleans_2020_04_01</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">0</span>, <span class="dv">10</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th style="text-align: left;">date</th>
<th style="text-align: right;">vehicle_year</th>
<th style="text-align: right;">car_age</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: right;">2005</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: right;">2005</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: right;">2005</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: right;">2003</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="select-from-8" class="level2 scrollable">
<h2 class="scrollable anchored" data-anchor-id="select-from-8">SELECT … FROM</h2>
<p>Solution 2: two layers of <code>SELECT</code></p>
<ul>
<li>first <code>SELECT</code> (i.e., inside) layer creates the new variables</li>
<li>second <code>SELECT</code> (i.e., outside) layer subtracts the two times</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>   <span class="dt">date</span>,</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>   vehicle_date, </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>   TIMESTAMPDIFF(<span class="dt">YEAR</span>, vehicle_date, <span class="dt">date</span>) <span class="kw">AS</span> car_age </span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> (</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>   <span class="kw">SELECT</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">date</span>,</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>      STR_TO_DATE(<span class="fu">CONCAT</span>(vehicle_year, <span class="st">'-01-01'</span>), <span class="st">'%Y-%m-%d'</span>) <span class="kw">AS</span> vehicle_date</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>   <span class="kw">FROM</span> la_new_orleans_2020_04_01)</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>   <span class="kw">AS</span> subquery_table</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">0</span>, <span class="dv">10</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th style="text-align: left;">date</th>
<th style="text-align: left;">vehicle_date</th>
<th style="text-align: right;">car_age</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: left;">2005-01-01</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: left;">2005-01-01</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: left;">2005-01-01</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: left;">2003-01-01</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: left;"></td>
<td style="text-align: right;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: left;"></td>
<td style="text-align: right;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: left;"></td>
<td style="text-align: right;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: left;"></td>
<td style="text-align: right;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: left;"></td>
<td style="text-align: right;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">2010-01-01</td>
<td style="text-align: left;"></td>
<td style="text-align: right;"></td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="important-note" class="level2">
<h2 class="anchored" data-anchor-id="important-note">Important note:</h2>
<p>There is a distinction between keywords that operate on the <em>variables of the original table</em> versus those that operate on the <em>variables of the results set</em>.</p>
<p><code>date</code> and <code>vehicle_year</code> are columns in the <em>original table</em> - they are written to disk on the <strong>SQL</strong> server.</p>
<p><code>car_age</code> (and previously, <code>vehicle_date</code>) exist only in the <em>results set</em>, which is passed from the server (<strong>SQL</strong> server) to the client (e.g., <strong>Quarto</strong> or <strong>DBeaver</strong>) in your computer’s memory and is not written to disk.</p>
</section>
<section id="select-distinct" class="level2 scrollable">
<h2 class="scrollable anchored" data-anchor-id="select-distinct">SELECT DISTINCT</h2>
<p>Returns only unique rows.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> raw_actions_taken</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> la_new_orleans_2020_04_01</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">0</span>, <span class="dv">200</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<colgroup>
<col style="width: 100%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">raw_actions_taken</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Stop Results: Citation Issued;Subject Type: Driver</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Stop Results: Verbal Warning;Search Occurred: Yes;Search Types: Vehicle;Search Types: Pat-down;Search Types: Driver;Legal Basises: Consent to search;Legal Basises: Probable cause</td>
</tr>
<tr class="even">
<td style="text-align: left;">Stop Results: Verbal Warning;Subject Type: Driver;Search Occurred: No;Evidence Seized: No</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Stop Results: Verbal Warning;Subject Type: Driver</td>
</tr>
<tr class="even">
<td style="text-align: left;">Stop Results: Verbal Warning;Subject Type: Driver;Search Occurred: No</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Stop Results: No action taken;Search Occurred: No</td>
</tr>
<tr class="even">
<td style="text-align: left;">Stop Results: Citation Issued;Subject Type: Driver;Search Occurred: No</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Stop Results: Citation Issued;Subject Type: Driver;Search Occurred: No;Evidence Seized: No</td>
</tr>
<tr class="even">
<td style="text-align: left;">Stop Results: No action taken;Search Occurred: No;Search Types: Pat-down</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> outcome</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> la_new_orleans_2020_04_01</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">0</span>, <span class="dv">10</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>4 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">outcome</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">citation</td>
</tr>
<tr class="odd">
<td style="text-align: left;">warning</td>
</tr>
<tr class="even">
<td style="text-align: left;">arrest</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> vehicle_make, vehicle_color</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> la_new_orleans_2020_04_01</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">0</span>, <span class="dv">10</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th style="text-align: left;">vehicle_make</th>
<th style="text-align: left;">vehicle_color</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">DODGE</td>
<td style="text-align: left;">BLACK</td>
</tr>
<tr class="even">
<td style="text-align: left;">NISSAN</td>
<td style="text-align: left;">BLUE</td>
</tr>
<tr class="odd">
<td style="text-align: left;">JEEP</td>
<td style="text-align: left;">GRAY</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">GMC - GENERAL MOTORS CORP.</td>
<td style="text-align: left;">BLUE</td>
</tr>
<tr class="even">
<td style="text-align: left;">CHEVROLET</td>
<td style="text-align: left;">YELLOW</td>
</tr>
<tr class="odd">
<td style="text-align: left;">OLDSMOBILE</td>
<td style="text-align: left;">SILVER</td>
</tr>
<tr class="even">
<td style="text-align: left;">TOYOTA</td>
<td style="text-align: left;">GREEN</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PONTIAC</td>
<td style="text-align: left;">BRONZE</td>
</tr>
<tr class="even">
<td style="text-align: left;">CHEVROLET</td>
<td style="text-align: left;">WHITE</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>(note that we haven’t yet arranged the distinct values!)</p>
</section>
<section id="where" class="level2">
<h2 class="anchored" data-anchor-id="where">WHERE</h2>
<p>The <code>WHERE</code> keyword is analogous to the <code>filter()</code> function in <strong>dplyr</strong>. However, keep in mind that there are two <strong>SQL</strong> keywords that resemble the <strong>dplyr</strong> <code>filter()</code> function. <code>WHERE</code> operates on the <u>original data</u> in the table and <code>HAVING</code> operates on the <u>result set</u>.</p>
</section>
<section id="where-1" class="level2 scrollable">
<h2 class="scrollable anchored" data-anchor-id="where-1">WHERE</h2>
<p>What was the time of day for those traffic stops <code>search_conducted</code> was true and <code>vehicle_make</code> was Subaru?</p>
<p>Note that in <strong>SQL</strong> the equality logical is <code>=</code> and in <strong>R</strong> the equality logical is <code>==</code>. Note also that the WHERE keyword is case-insensitive!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="dt">time</span>, search_conducted, vehicle_year, vehicle_make</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> la_new_orleans_2020_04_01</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> search_conducted <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>   <span class="kw">AND</span> vehicle_make <span class="op">=</span> <span class="ot">"Subaru"</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">0</span>, <span class="dv">10</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th style="text-align: left;">time</th>
<th style="text-align: right;">search_conducted</th>
<th style="text-align: right;">vehicle_year</th>
<th style="text-align: left;">vehicle_make</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">21:05:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1996</td>
<td style="text-align: left;">SUBARU</td>
</tr>
<tr class="even">
<td style="text-align: left;">21:05:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1996</td>
<td style="text-align: left;">SUBARU</td>
</tr>
<tr class="odd">
<td style="text-align: left;">03:27:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1998</td>
<td style="text-align: left;">SUBARU</td>
</tr>
<tr class="even">
<td style="text-align: left;">19:28:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2012</td>
<td style="text-align: left;">SUBARU</td>
</tr>
<tr class="odd">
<td style="text-align: left;">21:40:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1998</td>
<td style="text-align: left;">SUBARU</td>
</tr>
<tr class="even">
<td style="text-align: left;">10:38:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2014</td>
<td style="text-align: left;">SUBARU</td>
</tr>
<tr class="odd">
<td style="text-align: left;">05:01:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1998</td>
<td style="text-align: left;">SUBARU</td>
</tr>
<tr class="even">
<td style="text-align: left;">22:00:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1998</td>
<td style="text-align: left;">SUBARU</td>
</tr>
<tr class="odd">
<td style="text-align: left;">13:46:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2007</td>
<td style="text-align: left;">SUBARU</td>
</tr>
<tr class="even">
<td style="text-align: left;">22:50:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">SUBARU</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="where-2" class="level2">
<h2 class="anchored" data-anchor-id="where-2">WHERE</h2>
<p><code>BETWEEN</code> can be used to specify a range of values for a numeric value. <code>BETWEEN</code> is inclusive.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="dt">time</span>, search_conducted, vehicle_year, vehicle_make</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> la_new_orleans_2020_04_01</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> vehicle_year <span class="kw">BETWEEN</span> <span class="dv">1970</span> <span class="kw">and</span> <span class="dv">1999</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>   <span class="kw">AND</span> vehicle_make <span class="op">=</span> <span class="ot">"Subaru"</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">0</span>, <span class="dv">10</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th style="text-align: left;">time</th>
<th style="text-align: right;">search_conducted</th>
<th style="text-align: right;">vehicle_year</th>
<th style="text-align: left;">vehicle_make</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">20:16:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1991</td>
<td style="text-align: left;">SUBARU</td>
</tr>
<tr class="even">
<td style="text-align: left;">20:54:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1998</td>
<td style="text-align: left;">SUBARU</td>
</tr>
<tr class="odd">
<td style="text-align: left;">17:09:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">SUBARU</td>
</tr>
<tr class="even">
<td style="text-align: left;">13:20:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1996</td>
<td style="text-align: left;">SUBARU</td>
</tr>
<tr class="odd">
<td style="text-align: left;">20:44:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1998</td>
<td style="text-align: left;">SUBARU</td>
</tr>
<tr class="even">
<td style="text-align: left;">21:05:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1996</td>
<td style="text-align: left;">SUBARU</td>
</tr>
<tr class="odd">
<td style="text-align: left;">21:05:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1996</td>
<td style="text-align: left;">SUBARU</td>
</tr>
<tr class="even">
<td style="text-align: left;">18:52:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1995</td>
<td style="text-align: left;">SUBARU</td>
</tr>
<tr class="odd">
<td style="text-align: left;">17:36:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1996</td>
<td style="text-align: left;">SUBARU</td>
</tr>
<tr class="even">
<td style="text-align: left;">08:40:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">SUBARU</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="where-3" class="level2">
<h2 class="anchored" data-anchor-id="where-3">WHERE</h2>
<p><code>IN</code> is similar to the <strong>dplyr</strong> <code>%in%</code> function which specifies distinct values for the variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="dt">time</span>, search_conducted, vehicle_year, vehicle_make</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> la_new_orleans_2020_04_01</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> vehicle_make <span class="kw">IN</span> (<span class="ot">"Subaru"</span>, <span class="ot">"Dodge"</span>)</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>   <span class="kw">AND</span> search_conducted <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">0</span>, <span class="dv">10</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th style="text-align: left;">time</th>
<th style="text-align: right;">search_conducted</th>
<th style="text-align: right;">vehicle_year</th>
<th style="text-align: left;">vehicle_make</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">03:45:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2010</td>
<td style="text-align: left;">DODGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">20:29:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2012</td>
<td style="text-align: left;">DODGE</td>
</tr>
<tr class="odd">
<td style="text-align: left;">21:12:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2011</td>
<td style="text-align: left;">DODGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">21:12:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2011</td>
<td style="text-align: left;">DODGE</td>
</tr>
<tr class="odd">
<td style="text-align: left;">02:00:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2014</td>
<td style="text-align: left;">DODGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">20:46:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2008</td>
<td style="text-align: left;">DODGE</td>
</tr>
<tr class="odd">
<td style="text-align: left;">20:46:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2008</td>
<td style="text-align: left;">DODGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">04:47:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2014</td>
<td style="text-align: left;">DODGE</td>
</tr>
<tr class="odd">
<td style="text-align: left;">19:16:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1995</td>
<td style="text-align: left;">DODGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">09:43:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2009</td>
<td style="text-align: left;">DODGE</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="where-4" class="level2">
<h2 class="anchored" data-anchor-id="where-4">WHERE</h2>
<p><code>AND</code> takes precedence over <code>OR</code> in the order of operations, when there are no parentheses.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="dt">time</span>, search_conducted, vehicle_year, vehicle_make</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> la_new_orleans_2020_04_01</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> vehicle_year <span class="kw">BETWEEN</span> <span class="dv">1970</span> <span class="kw">and</span> <span class="dv">1999</span> <span class="kw">OR</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>      vehicle_make <span class="kw">IN</span> (<span class="ot">"Subaru"</span>, <span class="ot">"Dodge"</span>) <span class="kw">AND</span> </span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>      search_conducted <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">0</span>, <span class="dv">10</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th style="text-align: left;">time</th>
<th style="text-align: right;">search_conducted</th>
<th style="text-align: right;">vehicle_year</th>
<th style="text-align: left;">vehicle_make</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">16:03:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1997</td>
<td style="text-align: left;">GMC - GENERAL MOTORS CORP.</td>
</tr>
<tr class="even">
<td style="text-align: left;">16:03:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1997</td>
<td style="text-align: left;">GMC - GENERAL MOTORS CORP.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">07:54:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1995</td>
<td style="text-align: left;">TOYOTA</td>
</tr>
<tr class="even">
<td style="text-align: left;">21:01:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1997</td>
<td style="text-align: left;">GMC - GENERAL MOTORS CORP.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">21:06:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1996</td>
<td style="text-align: left;">DODGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">21:16:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1996</td>
<td style="text-align: left;">DODGE</td>
</tr>
<tr class="odd">
<td style="text-align: left;">10:20:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1994</td>
<td style="text-align: left;">MERCEDES-BENZ</td>
</tr>
<tr class="even">
<td style="text-align: left;">10:35:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1998</td>
<td style="text-align: left;">PONTIAC</td>
</tr>
<tr class="odd">
<td style="text-align: left;">12:46:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1996</td>
<td style="text-align: left;">ACURA</td>
</tr>
<tr class="even">
<td style="text-align: left;">15:17:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1997</td>
<td style="text-align: left;">OLDSMOBILE</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>same as:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="dt">time</span>, search_conducted, vehicle_year, vehicle_make</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> la_new_orleans_2020_04_01</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> vehicle_year <span class="kw">BETWEEN</span> <span class="dv">1970</span> <span class="kw">and</span> <span class="dv">1999</span> <span class="kw">OR</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>      (vehicle_make <span class="kw">IN</span> (<span class="ot">"Subaru"</span>, <span class="ot">"Dodge"</span>) <span class="kw">AND</span> </span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>      search_conducted <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">0</span>, <span class="dv">10</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th style="text-align: left;">time</th>
<th style="text-align: right;">search_conducted</th>
<th style="text-align: right;">vehicle_year</th>
<th style="text-align: left;">vehicle_make</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">16:03:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1997</td>
<td style="text-align: left;">GMC - GENERAL MOTORS CORP.</td>
</tr>
<tr class="even">
<td style="text-align: left;">16:03:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1997</td>
<td style="text-align: left;">GMC - GENERAL MOTORS CORP.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">07:54:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1995</td>
<td style="text-align: left;">TOYOTA</td>
</tr>
<tr class="even">
<td style="text-align: left;">21:01:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1997</td>
<td style="text-align: left;">GMC - GENERAL MOTORS CORP.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">21:06:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1996</td>
<td style="text-align: left;">DODGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">21:16:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1996</td>
<td style="text-align: left;">DODGE</td>
</tr>
<tr class="odd">
<td style="text-align: left;">10:20:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1994</td>
<td style="text-align: left;">MERCEDES-BENZ</td>
</tr>
<tr class="even">
<td style="text-align: left;">10:35:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1998</td>
<td style="text-align: left;">PONTIAC</td>
</tr>
<tr class="odd">
<td style="text-align: left;">12:46:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1996</td>
<td style="text-align: left;">ACURA</td>
</tr>
<tr class="even">
<td style="text-align: left;">15:17:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1997</td>
<td style="text-align: left;">OLDSMOBILE</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="where-5" class="level2">
<h2 class="anchored" data-anchor-id="where-5">WHERE</h2>
<p>Parentheses take precedence over <code>AND</code> and <code>OR</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="dt">time</span>, search_conducted, vehicle_year, vehicle_make</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> la_new_orleans_2020_04_01</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> (vehicle_year <span class="kw">BETWEEN</span> <span class="dv">1970</span> <span class="kw">and</span> <span class="dv">1999</span> <span class="kw">OR</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>      vehicle_make <span class="kw">IN</span> (<span class="ot">"Subaru"</span>, <span class="ot">"Dodge"</span>) ) <span class="kw">AND</span> </span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>      search_conducted <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">0</span>, <span class="dv">10</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th style="text-align: left;">time</th>
<th style="text-align: right;">search_conducted</th>
<th style="text-align: right;">vehicle_year</th>
<th style="text-align: left;">vehicle_make</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">03:45:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2010</td>
<td style="text-align: left;">DODGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">07:11:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">CADILLAC</td>
</tr>
<tr class="odd">
<td style="text-align: left;">20:21:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">MERCURY</td>
</tr>
<tr class="even">
<td style="text-align: left;">20:29:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2012</td>
<td style="text-align: left;">DODGE</td>
</tr>
<tr class="odd">
<td style="text-align: left;">20:31:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1993</td>
<td style="text-align: left;">INFINITY</td>
</tr>
<tr class="even">
<td style="text-align: left;">21:12:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2011</td>
<td style="text-align: left;">DODGE</td>
</tr>
<tr class="odd">
<td style="text-align: left;">21:12:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2011</td>
<td style="text-align: left;">DODGE</td>
</tr>
<tr class="even">
<td style="text-align: left;">02:00:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2014</td>
<td style="text-align: left;">DODGE</td>
</tr>
<tr class="odd">
<td style="text-align: left;">14:31:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1994</td>
<td style="text-align: left;">JEEP</td>
</tr>
<tr class="even">
<td style="text-align: left;">04:39:00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1995</td>
<td style="text-align: left;">CHEVROLET</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="where-6" class="level2">
<h2 class="anchored" data-anchor-id="where-6">WHERE</h2>
<p><code>IS NULL</code> not <code>= NULL</code> (because <code>NULL</code> indicates <em>unknown</em>). (Just like how we need to use <code>is.na()</code> in <strong>R</strong>!)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="dt">time</span>, search_conducted, vehicle_year, vehicle_make</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> la_new_orleans_2020_04_01</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> vehicle_make <span class="kw">IS</span> <span class="kw">NULL</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">0</span>, <span class="dv">10</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th style="text-align: left;">time</th>
<th style="text-align: right;">search_conducted</th>
<th style="text-align: right;">vehicle_year</th>
<th style="text-align: left;">vehicle_make</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">02:06:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">02:06:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">02:06:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">02:06:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">02:06:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">02:06:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">02:06:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">08:02:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">20:05:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">20:05:00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="dt">time</span>, search_conducted, vehicle_year, vehicle_make</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> la_new_orleans_2020_04_01</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> vehicle_make <span class="op">=</span> <span class="kw">NULL</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">0</span>, <span class="dv">10</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="a-null-example" class="level2">
<h2 class="anchored" data-anchor-id="a-null-example">A <code>NULL</code> example</h2>
<p>The logic of <code>NULL</code>:<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<ul>
<li>If you do anything with <code>NULL</code>, you’ll just get <code>NULL</code>. For instance if <span class="math inline">\(x\)</span> is <code>NULL</code>, then <span class="math inline">\(x &gt; 3\)</span>, <span class="math inline">\(1 = x\)</span>, and <span class="math inline">\(x + 4\)</span> all evaluate to <code>NULL</code>. Even <span class="math inline">\(x =\)</span> <code>NULL</code> evaluates to <code>NULL</code>! if you want to check whether <span class="math inline">\(x\)</span> is <code>NULL</code>, use <code>x IS NULL</code> or <code>x IS NOT NULL</code>.</li>
<li><code>NULL</code> short-circuits with boolean operators. That means a boolean expression involving <code>NULL</code> will evaluate to:
<ul>
<li>TRUE, if it’d evaluate to TRUE regardless of whether the <code>NULL</code> value is really TRUE or FALSE.</li>
<li>FALSE, if it’d evaluate to FALSE regardless of whether the <code>NULL</code> value is really TRUE or FALSE.</li>
<li>Or <code>NULL</code>, if it depends on the <code>NULL</code> value.</li>
</ul></li>
</ul>
</section>
<section id="a-null-example-1" class="level2">
<h2 class="anchored" data-anchor-id="a-null-example-1">A <code>NULL</code> example</h2>
<p>Evaluate <code>WHERE age &lt;= 20 OR num_dogs = 3</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> (</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>   <span class="kw">SELECT</span> <span class="st">'Ace'</span> <span class="kw">AS</span> name, <span class="dv">20</span> <span class="kw">AS</span> age, <span class="dv">4</span> <span class="kw">as</span> num_dogs</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>   <span class="kw">UNION</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>   <span class="kw">SELECT</span> <span class="st">'Ada'</span> <span class="kw">AS</span> name, <span class="kw">NULL</span> <span class="kw">AS</span> age, <span class="dv">3</span> <span class="kw">as</span> num_dogs   </span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>   <span class="kw">UNION</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>   <span class="kw">SELECT</span> <span class="st">'Ben'</span> <span class="kw">AS</span> name, <span class="kw">NULL</span> <span class="kw">AS</span> age, <span class="kw">NULL</span> <span class="kw">as</span> num_dogs</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>   <span class="kw">UNION</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>   <span class="kw">SELECT</span> <span class="st">'Cho'</span> <span class="kw">AS</span> name, <span class="dv">27</span> <span class="kw">AS</span> age, <span class="kw">NULL</span> <span class="kw">as</span> num_dogs</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>   ) <span class="kw">AS</span> temptable;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>4 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">name</th>
<th style="text-align: right;">age</th>
<th style="text-align: right;">num_dogs</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Ace</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">Ada</td>
<td style="text-align: right;"></td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Ben</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Cho</td>
<td style="text-align: right;">27</td>
<td style="text-align: right;"></td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="a-null-example-2" class="level2">
<h2 class="anchored" data-anchor-id="a-null-example-2">A <code>NULL</code> example</h2>
<p>Keep the rows satisfying: <code>age &lt;= 20</code> OR <code>num_dogs = 3</code></p>
<ul>
<li>For Ace, <code>age &lt;= 20</code> evaluates to TRUE so the claim is satisfied.</li>
<li>For Ada, <code>age &lt;= 20</code> evaluates to <code>NULL</code> but <code>num_dogs = 3</code> evaluates to TRUE so the claim is satisfied.</li>
<li>For Ben, <code>age &lt;= 20</code> evaluates to <code>NULL</code> and <code>num_dogs = 3</code> evaluates to <code>NULL</code> so the overall expression is <code>NULL</code> which has a FALSE value.</li>
<li>For Cho, <code>age &lt;= 20</code> evaluates to FALSE and <code>num_dogs = 3</code> evaluates to <code>NULL</code> so the overall expression evaluates to <code>NULL</code> (because it depends on the value of the <code>NULL</code>).</li>
</ul>
<p>Thus we keep only Ace and Ada.</p>
</section>
<section id="a-null-example-3" class="level2">
<h2 class="anchored" data-anchor-id="a-null-example-3">A <code>NULL</code> example</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> (</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>   <span class="kw">SELECT</span> <span class="st">'Ace'</span> <span class="kw">AS</span> name, <span class="dv">20</span> <span class="kw">AS</span> age, <span class="dv">4</span> <span class="kw">as</span> num_dogs</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>   <span class="kw">UNION</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>   <span class="kw">SELECT</span> <span class="st">'Ada'</span> <span class="kw">AS</span> name, <span class="kw">NULL</span> <span class="kw">AS</span> age, <span class="dv">3</span> <span class="kw">as</span> num_dogs   </span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>   <span class="kw">UNION</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>   <span class="kw">SELECT</span> <span class="st">'Ben'</span> <span class="kw">AS</span> name, <span class="kw">NULL</span> <span class="kw">AS</span> age, <span class="kw">NULL</span> <span class="kw">as</span> num_dogs</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>   <span class="kw">UNION</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>   <span class="kw">SELECT</span> <span class="st">'Cho'</span> <span class="kw">AS</span> name, <span class="dv">27</span> <span class="kw">AS</span> age, <span class="kw">NULL</span> <span class="kw">as</span> num_dogs</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>   ) <span class="kw">AS</span> temptable</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> age <span class="op">&lt;=</span> <span class="dv">20</span> <span class="kw">OR</span> num_dogs <span class="op">=</span> <span class="dv">3</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>2 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">name</th>
<th style="text-align: right;">age</th>
<th style="text-align: right;">num_dogs</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Ace</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">Ada</td>
<td style="text-align: right;"></td>
<td style="text-align: right;">3</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="group-by" class="level2 scrollable">
<h2 class="scrollable anchored" data-anchor-id="group-by">GROUP BY</h2>
<p>The <code>GROUP BY</code> keyword will direct <strong>SQL</strong> to carry out the query separately for each category in the grouped variable.</p>
<ul>
<li>aggregate functions include <code>COUNT()</code>, <code>SUM()</code>, <code>MAX()</code>, <code>MIN()</code>, and <code>AVG()</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> subject_race,</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> num_stops, </span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">SUM</span>(<span class="dv">1</span>) <span class="kw">AS</span> num_stops_also,</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>       <span class="fu">SUM</span>(<span class="dv">2</span>) <span class="kw">AS</span> double_stops</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> la_new_orleans_2020_04_01</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> vehicle_year <span class="kw">BETWEEN</span> <span class="dv">1970</span> <span class="kw">and</span> <span class="dv">1999</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> subject_race;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>7 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">subject_race</th>
<th style="text-align: right;">num_stops</th>
<th style="text-align: right;">num_stops_also</th>
<th style="text-align: right;">double_stops</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: right;">2217</td>
<td style="text-align: right;">2217</td>
<td style="text-align: right;">4434</td>
</tr>
<tr class="even">
<td style="text-align: left;">asian/pacific islander</td>
<td style="text-align: right;">315</td>
<td style="text-align: right;">315</td>
<td style="text-align: right;">630</td>
</tr>
<tr class="odd">
<td style="text-align: left;">black</td>
<td style="text-align: right;">31586</td>
<td style="text-align: right;">31586</td>
<td style="text-align: right;">63172</td>
</tr>
<tr class="even">
<td style="text-align: left;">hispanic</td>
<td style="text-align: right;">2347</td>
<td style="text-align: right;">2347</td>
<td style="text-align: right;">4694</td>
</tr>
<tr class="odd">
<td style="text-align: left;">other</td>
<td style="text-align: right;">23</td>
<td style="text-align: right;">23</td>
<td style="text-align: right;">46</td>
</tr>
<tr class="even">
<td style="text-align: left;">unknown</td>
<td style="text-align: right;">211</td>
<td style="text-align: right;">211</td>
<td style="text-align: right;">422</td>
</tr>
<tr class="odd">
<td style="text-align: left;">white</td>
<td style="text-align: right;">11475</td>
<td style="text-align: right;">11475</td>
<td style="text-align: right;">22950</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="group-by-1" class="level2">
<h2 class="anchored" data-anchor-id="group-by-1">GROUP BY</h2>
<p>For those people whose cars are between 1970 and 1999, how old is the youngest and oldest person for each <code>subject_race</code>?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> subject_race,</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> num_stops, </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">MIN</span>(subject_age) <span class="kw">AS</span> min_age,</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>       <span class="fu">MAX</span>(subject_age) <span class="kw">AS</span> max_age</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> la_new_orleans_2020_04_01</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> vehicle_year <span class="kw">BETWEEN</span> <span class="dv">1970</span> <span class="kw">and</span> <span class="dv">1999</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> subject_race;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>7 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">subject_race</th>
<th style="text-align: right;">num_stops</th>
<th style="text-align: right;">min_age</th>
<th style="text-align: right;">max_age</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: right;">2217</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">asian/pacific islander</td>
<td style="text-align: right;">315</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">78</td>
</tr>
<tr class="odd">
<td style="text-align: left;">black</td>
<td style="text-align: right;">31586</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">100</td>
</tr>
<tr class="even">
<td style="text-align: left;">hispanic</td>
<td style="text-align: right;">2347</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">87</td>
</tr>
<tr class="odd">
<td style="text-align: left;">other</td>
<td style="text-align: right;">23</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">68</td>
</tr>
<tr class="even">
<td style="text-align: left;">unknown</td>
<td style="text-align: right;">211</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">81</td>
</tr>
<tr class="odd">
<td style="text-align: left;">white</td>
<td style="text-align: right;">11475</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">99</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="group-by-2" class="level2 scrollable">
<h2 class="scrollable anchored" data-anchor-id="group-by-2">GROUP BY</h2>
<p><code>GROUP BY</code> will work applied to multiple columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> subject_race,</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> num_stops, </span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">MIN</span>(subject_age) <span class="kw">AS</span> min_age,</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>       <span class="fu">MAX</span>(subject_age) <span class="kw">AS</span> max_age,</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>       DAYNAME(<span class="dt">date</span>) <span class="kw">AS</span> wday</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> la_new_orleans_2020_04_01</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> subject_race, wday;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th style="text-align: left;">subject_race</th>
<th style="text-align: right;">num_stops</th>
<th style="text-align: right;">min_age</th>
<th style="text-align: right;">max_age</th>
<th style="text-align: left;">wday</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: right;">1800</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: left;">Friday</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: right;">1590</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: left;">Monday</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: right;">1332</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: left;">Saturday</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: right;">1172</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: left;">Sunday</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: right;">1953</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: left;">Thursday</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: right;">1877</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: left;">Tuesday</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: right;">2006</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: left;">Wednesday</td>
</tr>
<tr class="even">
<td style="text-align: left;">asian/pacific islander</td>
<td style="text-align: right;">551</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">78</td>
<td style="text-align: left;">Friday</td>
</tr>
<tr class="odd">
<td style="text-align: left;">asian/pacific islander</td>
<td style="text-align: right;">484</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">78</td>
<td style="text-align: left;">Monday</td>
</tr>
<tr class="even">
<td style="text-align: left;">asian/pacific islander</td>
<td style="text-align: right;">475</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">78</td>
<td style="text-align: left;">Saturday</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="order-by" class="level2 scrollable">
<h2 class="scrollable anchored" data-anchor-id="order-by">ORDER BY</h2>
<p><code>ORDER BY</code> allows us to look at interesting aspects of the data by sorting the data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> subject_race,</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> num_stops, </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">MIN</span>(subject_age) <span class="kw">AS</span> min_age,</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>       <span class="fu">MAX</span>(subject_age) <span class="kw">AS</span> max_age,</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>       DAYNAME(<span class="dt">date</span>) <span class="kw">AS</span> wday</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> la_new_orleans_2020_04_01</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> subject_race, wday</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> min_age <span class="kw">ASC</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th style="text-align: left;">subject_race</th>
<th style="text-align: right;">num_stops</th>
<th style="text-align: right;">min_age</th>
<th style="text-align: right;">max_age</th>
<th style="text-align: left;">wday</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: right;">1332</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: left;">Saturday</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: right;">1172</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: left;">Sunday</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: right;">1877</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: left;">Tuesday</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: right;">2006</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: left;">Wednesday</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: right;">1953</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: left;">Thursday</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: right;">1800</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: left;">Friday</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: right;">1590</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: left;">Monday</td>
</tr>
<tr class="even">
<td style="text-align: left;">black</td>
<td style="text-align: right;">49945</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">110</td>
<td style="text-align: left;">Friday</td>
</tr>
<tr class="odd">
<td style="text-align: left;">black</td>
<td style="text-align: right;">42593</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">106</td>
<td style="text-align: left;">Saturday</td>
</tr>
<tr class="even">
<td style="text-align: left;">black</td>
<td style="text-align: right;">39252</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">92</td>
<td style="text-align: left;">Sunday</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>WHAT?!?!! How are 10 year olds getting pulled over for traffic stops?</p>
</section>
<section id="order-by-1" class="level2 scrollable">
<h2 class="scrollable anchored" data-anchor-id="order-by-1">ORDER BY</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> subject_race,</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> num_stops, </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">MIN</span>(subject_age) <span class="kw">AS</span> min_age,</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>       <span class="fu">MAX</span>(subject_age) <span class="kw">AS</span> max_age,</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>       DAYNAME(<span class="dt">date</span>) <span class="kw">AS</span> wday</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> la_new_orleans_2020_04_01</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> subject_race, wday</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> max_age <span class="kw">DESC</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th style="text-align: left;">subject_race</th>
<th style="text-align: right;">num_stops</th>
<th style="text-align: right;">min_age</th>
<th style="text-align: right;">max_age</th>
<th style="text-align: left;">wday</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">black</td>
<td style="text-align: right;">49945</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">110</td>
<td style="text-align: left;">Friday</td>
</tr>
<tr class="even">
<td style="text-align: left;">black</td>
<td style="text-align: right;">56459</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">110</td>
<td style="text-align: left;">Tuesday</td>
</tr>
<tr class="odd">
<td style="text-align: left;">black</td>
<td style="text-align: right;">57153</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">110</td>
<td style="text-align: left;">Wednesday</td>
</tr>
<tr class="even">
<td style="text-align: left;">black</td>
<td style="text-align: right;">54858</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">110</td>
<td style="text-align: left;">Thursday</td>
</tr>
<tr class="odd">
<td style="text-align: left;">hispanic</td>
<td style="text-align: right;">2007</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">110</td>
<td style="text-align: left;">Thursday</td>
</tr>
<tr class="even">
<td style="text-align: left;">black</td>
<td style="text-align: right;">49557</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">110</td>
<td style="text-align: left;">Monday</td>
</tr>
<tr class="odd">
<td style="text-align: left;">white</td>
<td style="text-align: right;">18494</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">107</td>
<td style="text-align: left;">Friday</td>
</tr>
<tr class="even">
<td style="text-align: left;">black</td>
<td style="text-align: right;">42593</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">106</td>
<td style="text-align: left;">Saturday</td>
</tr>
<tr class="odd">
<td style="text-align: left;">white</td>
<td style="text-align: right;">20764</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">105</td>
<td style="text-align: left;">Wednesday</td>
</tr>
<tr class="even">
<td style="text-align: left;">white</td>
<td style="text-align: right;">15778</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">104</td>
<td style="text-align: left;">Sunday</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>So many people over 100 years old… the data seem fishy!</p>
</section>
<section id="order-by-2" class="level2 scrollable">
<h2 class="scrollable anchored" data-anchor-id="order-by-2">ORDER BY</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> subject_race,</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> num_stops, </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">MIN</span>(subject_age) <span class="kw">AS</span> min_age,</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>       <span class="fu">MAX</span>(subject_age) <span class="kw">AS</span> max_age,</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>       DAYNAME(<span class="dt">date</span>) <span class="kw">AS</span> wday</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> la_new_orleans_2020_04_01</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> subject_race, wday</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> wday, subject_race;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th style="text-align: left;">subject_race</th>
<th style="text-align: right;">num_stops</th>
<th style="text-align: right;">min_age</th>
<th style="text-align: right;">max_age</th>
<th style="text-align: left;">wday</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">black</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">24</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">white</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">23</td>
<td style="text-align: right;">57</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: right;">1800</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: left;">Friday</td>
</tr>
<tr class="even">
<td style="text-align: left;">asian/pacific islander</td>
<td style="text-align: right;">551</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">78</td>
<td style="text-align: left;">Friday</td>
</tr>
<tr class="odd">
<td style="text-align: left;">black</td>
<td style="text-align: right;">49945</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">110</td>
<td style="text-align: left;">Friday</td>
</tr>
<tr class="even">
<td style="text-align: left;">hispanic</td>
<td style="text-align: right;">1851</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">83</td>
<td style="text-align: left;">Friday</td>
</tr>
<tr class="odd">
<td style="text-align: left;">other</td>
<td style="text-align: right;">61</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">66</td>
<td style="text-align: left;">Friday</td>
</tr>
<tr class="even">
<td style="text-align: left;">unknown</td>
<td style="text-align: right;">510</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">75</td>
<td style="text-align: left;">Friday</td>
</tr>
<tr class="odd">
<td style="text-align: left;">white</td>
<td style="text-align: right;">18494</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">107</td>
<td style="text-align: left;">Friday</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: right;">1590</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: left;">Monday</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="order-by-3" class="level2">
<h2 class="anchored" data-anchor-id="order-by-3">ORDER BY</h2>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>Note that both <code>GROUP BY</code> and <code>ORDER BY</code> evaluate the data after it has been retrieved. Therefore, the functions operate on the <em>results set</em>, not the original rows of the data.</p>
</div>
</div>
</div>
<p>We are able to <code>GROUP BY</code> and <code>ORDER BY</code> on the new variables we had created, <code>wday</code>.</p>
</section>
<section id="having" class="level2">
<h2 class="anchored" data-anchor-id="having">HAVING</h2>
<p>Recall that <code>WHERE</code> acts only on the original data. If we are interested in traffic stops that happened on <code>Friday</code>, we need to use the derived variable <code>wday</code> instead of the raw variable <code>date</code>. Fortunately, <code>HAVING</code> works on the <u>results set</u>.</p>
</section>
<section id="having-1" class="level2">
<h2 class="anchored" data-anchor-id="having-1">HAVING</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> subject_race,</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> num_stops, </span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">MIN</span>(subject_age) <span class="kw">AS</span> min_age,</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>       <span class="fu">MAX</span>(subject_age) <span class="kw">AS</span> max_age,</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>       DAYNAME(<span class="dt">date</span>) <span class="kw">AS</span> wday</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> la_new_orleans_2020_04_01</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> subject_race, wday</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="kw">HAVING</span> wday <span class="op">=</span> <span class="st">'Friday'</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>7 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">subject_race</th>
<th style="text-align: right;">num_stops</th>
<th style="text-align: right;">min_age</th>
<th style="text-align: right;">max_age</th>
<th style="text-align: left;">wday</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: right;">1800</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: left;">Friday</td>
</tr>
<tr class="even">
<td style="text-align: left;">asian/pacific islander</td>
<td style="text-align: right;">551</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">78</td>
<td style="text-align: left;">Friday</td>
</tr>
<tr class="odd">
<td style="text-align: left;">black</td>
<td style="text-align: right;">49945</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">110</td>
<td style="text-align: left;">Friday</td>
</tr>
<tr class="even">
<td style="text-align: left;">hispanic</td>
<td style="text-align: right;">1851</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">83</td>
<td style="text-align: left;">Friday</td>
</tr>
<tr class="odd">
<td style="text-align: left;">other</td>
<td style="text-align: right;">61</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">66</td>
<td style="text-align: left;">Friday</td>
</tr>
<tr class="even">
<td style="text-align: left;">unknown</td>
<td style="text-align: right;">510</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">75</td>
<td style="text-align: left;">Friday</td>
</tr>
<tr class="odd">
<td style="text-align: left;">white</td>
<td style="text-align: right;">18494</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">107</td>
<td style="text-align: left;">Friday</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="having-2" class="level2">
<h2 class="anchored" data-anchor-id="having-2">HAVING</h2>
<p>While it worked out quite well for us that <code>HAVING</code> was able to filter the data based on the results set, the use of <code>HAVING</code> was quite onerous because the entire data set was considered before the filter was applied. That is, if the filter can be done on the original data using <code>WHERE</code>, the query will be much faster and more efficient.</p>
<p>Note: <code>HAVING</code> requires a <code>GROUP BY</code> clause. And the variable(s) used in <code>HAVING</code> must also be part of the <code>GROUP BY</code> clause.</p>
</section>
<section id="limit" class="level2 scrollable">
<h2 class="scrollable anchored" data-anchor-id="limit">LIMIT</h2>
<p><code>LIMIT</code> truncates the query to specified rows. The first number is the offset (i.e., the number of rows to skip), the second number is the (maximum) number of rows to return. Here, we return rows 154219 through 154228.</p>
<p>The first number is optional.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> la_new_orleans_2020_04_01 <span class="kw">LIMIT</span> <span class="dv">154218</span>, <span class="dv">10</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<colgroup>
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 5%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 1%">
<col style="width: 0%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 3%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 30%">
<col style="width: 2%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">raw_row_number</th>
<th style="text-align: left;">date</th>
<th style="text-align: left;">time</th>
<th style="text-align: left;">location</th>
<th style="text-align: right;">lat</th>
<th style="text-align: right;">lng</th>
<th style="text-align: right;">district</th>
<th style="text-align: left;">zone</th>
<th style="text-align: right;">subject_age</th>
<th style="text-align: left;">subject_race</th>
<th style="text-align: left;">subject_sex</th>
<th style="text-align: left;">officer_assignment</th>
<th style="text-align: left;">type</th>
<th style="text-align: right;">arrest_made</th>
<th style="text-align: right;">citation_issued</th>
<th style="text-align: right;">warning_issued</th>
<th style="text-align: left;">outcome</th>
<th style="text-align: right;">contraband_found</th>
<th style="text-align: right;">contraband_drugs</th>
<th style="text-align: right;">contraband_weapons</th>
<th style="text-align: right;">frisk_performed</th>
<th style="text-align: right;">search_conducted</th>
<th style="text-align: right;">search_person</th>
<th style="text-align: right;">search_vehicle</th>
<th style="text-align: left;">search_basis</th>
<th style="text-align: left;">reason_for_stop</th>
<th style="text-align: left;">vehicle_color</th>
<th style="text-align: left;">vehicle_make</th>
<th style="text-align: left;">vehicle_model</th>
<th style="text-align: right;">vehicle_year</th>
<th style="text-align: left;">raw_actions_taken</th>
<th style="text-align: left;">raw_subject_race</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">442170</td>
<td style="text-align: left;">2017-04-20</td>
<td style="text-align: left;">13:15:00</td>
<td style="text-align: left;">Gentilly Blvd &amp; Franklin Ave</td>
<td style="text-align: right;">30.0</td>
<td style="text-align: right;">-90.0</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">Y</td>
<td style="text-align: right;">31</td>
<td style="text-align: left;">black</td>
<td style="text-align: left;">male</td>
<td style="text-align: left;">3rd District</td>
<td style="text-align: left;">vehicular</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">warning</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">TRAFFIC VIOLATION</td>
<td style="text-align: left;">BLACK</td>
<td style="text-align: left;">DODGE</td>
<td style="text-align: left;">CHARGER</td>
<td style="text-align: right;">2008</td>
<td style="text-align: left;">Stop Results: Verbal Warning;Subject Type: Driver;Search Occurred: No;Evidence Seized: No;Consent To Search: No;Exit Vehicle: No</td>
<td style="text-align: left;">BLACK</td>
</tr>
<tr class="even">
<td style="text-align: left;">442169</td>
<td style="text-align: left;">2017-04-20</td>
<td style="text-align: left;">13:15:00</td>
<td style="text-align: left;">Gentilly Blvd &amp; Franklin Ave</td>
<td style="text-align: right;">30.0</td>
<td style="text-align: right;">-90.0</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">Y</td>
<td style="text-align: right;">32</td>
<td style="text-align: left;">black</td>
<td style="text-align: left;">male</td>
<td style="text-align: left;">3rd District</td>
<td style="text-align: left;">vehicular</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">arrest</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">TRAFFIC VIOLATION</td>
<td style="text-align: left;">BLACK</td>
<td style="text-align: left;">DODGE</td>
<td style="text-align: left;">CHARGER</td>
<td style="text-align: right;">2008</td>
<td style="text-align: left;">Stop Results: Physical Arrest;Subject Type: Passenger;Search Occurred: No;Evidence Seized: No;Consent To Search: No;Exit Vehicle: No</td>
<td style="text-align: left;">BLACK</td>
</tr>
<tr class="odd">
<td style="text-align: left;">442094</td>
<td style="text-align: left;">2017-04-20</td>
<td style="text-align: left;">01:16:00</td>
<td style="text-align: left;">Broadway &amp; Freret St</td>
<td style="text-align: right;">29.9</td>
<td style="text-align: right;">-90.1</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">H</td>
<td style="text-align: right;">41</td>
<td style="text-align: left;">black</td>
<td style="text-align: left;">male</td>
<td style="text-align: left;">2nd District</td>
<td style="text-align: left;">pedestrian</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;"></td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">consent</td>
<td style="text-align: left;">SUSPECT PERSON</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: right;"></td>
<td style="text-align: left;">Stop Results: No action taken;Subject Type: Pedestrian;Search Occurred: Yes;Search Types: Pat-down;Evidence Seized: No;Legal Basises: Consent to search;Consent To Search: Yes;Exit Vehicle: No</td>
<td style="text-align: left;">BLACK</td>
</tr>
<tr class="even">
<td style="text-align: left;">442171</td>
<td style="text-align: left;">2017-04-20</td>
<td style="text-align: left;">13:17:00</td>
<td style="text-align: left;">Franklin Ave &amp; Gentilly Blvd</td>
<td style="text-align: right;">30.0</td>
<td style="text-align: right;">-90.0</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">Y</td>
<td style="text-align: right;">27</td>
<td style="text-align: left;">black</td>
<td style="text-align: left;">male</td>
<td style="text-align: left;">3rd District</td>
<td style="text-align: left;">vehicular</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">citation</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">TRAFFIC VIOLATION</td>
<td style="text-align: left;">GRAY</td>
<td style="text-align: left;">PONTIAC</td>
<td style="text-align: left;">GRAND PRIX</td>
<td style="text-align: right;">2008</td>
<td style="text-align: left;">Stop Results: Citation Issued;Subject Type: Driver;Search Occurred: No;Evidence Seized: No;Consent To Search: No;Exit Vehicle: Yes</td>
<td style="text-align: left;">BLACK</td>
</tr>
<tr class="odd">
<td style="text-align: left;">442093</td>
<td style="text-align: left;">2017-04-20</td>
<td style="text-align: left;">01:22:00</td>
<td style="text-align: left;">S Claiborne Ave &amp; Thalia St</td>
<td style="text-align: right;">29.9</td>
<td style="text-align: right;">-90.1</td>
<td style="text-align: right;">6</td>
<td style="text-align: left;">J</td>
<td style="text-align: right;">28</td>
<td style="text-align: left;">white</td>
<td style="text-align: left;">female</td>
<td style="text-align: left;">6th District</td>
<td style="text-align: left;">vehicular</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">warning</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">TRAFFIC VIOLATION</td>
<td style="text-align: left;">BLUE</td>
<td style="text-align: left;">JEEP</td>
<td style="text-align: left;">GRAND CHEROKEE</td>
<td style="text-align: right;">2002</td>
<td style="text-align: left;">Stop Results: Verbal Warning;Subject Type: Driver;Search Occurred: No;Evidence Seized: No;Consent To Search: No;Exit Vehicle: No</td>
<td style="text-align: left;">WHITE</td>
</tr>
<tr class="even">
<td style="text-align: left;">442162</td>
<td style="text-align: left;">2017-04-20</td>
<td style="text-align: left;">13:27:00</td>
<td style="text-align: left;">007XX Saint Charles Ave</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: right;">8</td>
<td style="text-align: left;">H</td>
<td style="text-align: right;">30</td>
<td style="text-align: left;">white</td>
<td style="text-align: left;">male</td>
<td style="text-align: left;">8th District</td>
<td style="text-align: left;">vehicular</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">citation</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">TRAFFIC VIOLATION</td>
<td style="text-align: left;">YELLOW</td>
<td style="text-align: left;">DODGE</td>
<td style="text-align: left;">GRAND CARAVAN</td>
<td style="text-align: right;">2013</td>
<td style="text-align: left;">Stop Results: Citation Issued;Subject Type: Driver;Search Occurred: No;Evidence Seized: No;Consent To Search: No;Exit Vehicle: No</td>
<td style="text-align: left;">WHITE</td>
</tr>
<tr class="odd">
<td style="text-align: left;">442160</td>
<td style="text-align: left;">2017-04-20</td>
<td style="text-align: left;">13:27:00</td>
<td style="text-align: left;">Tulane Ave &amp; S Jefferson Davis Pkwy</td>
<td style="text-align: right;">30.0</td>
<td style="text-align: right;">-90.1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">22</td>
<td style="text-align: left;">black</td>
<td style="text-align: left;">female</td>
<td style="text-align: left;">1st District</td>
<td style="text-align: left;">vehicular</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">citation</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">TRAFFIC VIOLATION</td>
<td style="text-align: left;">WHITE</td>
<td style="text-align: left;">CHEVROLET</td>
<td style="text-align: left;">OTHER</td>
<td style="text-align: right;">2007</td>
<td style="text-align: left;">Stop Results: Citation Issued;Stop Results: Verbal Warning;Subject Type: Driver;Search Occurred: No;Evidence Seized: No;Consent To Search: No;Exit Vehicle: No</td>
<td style="text-align: left;">BLACK</td>
</tr>
<tr class="even">
<td style="text-align: left;">442159</td>
<td style="text-align: left;">2017-04-20</td>
<td style="text-align: left;">13:31:00</td>
<td style="text-align: left;">Diana St &amp; Wagner St</td>
<td style="text-align: right;">29.9</td>
<td style="text-align: right;">-90.0</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">H</td>
<td style="text-align: right;">20</td>
<td style="text-align: left;">black</td>
<td style="text-align: left;">female</td>
<td style="text-align: left;">4th District</td>
<td style="text-align: left;">vehicular</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">warning</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">TRAFFIC VIOLATION</td>
<td style="text-align: left;">WHITE</td>
<td style="text-align: left;">NISSAN</td>
<td style="text-align: left;">ALTIMA</td>
<td style="text-align: right;">2003</td>
<td style="text-align: left;">Stop Results: Verbal Warning;Subject Type: Driver;Search Occurred: No;Evidence Seized: No;Consent To Search: No;Exit Vehicle: No</td>
<td style="text-align: left;">BLACK</td>
</tr>
<tr class="odd">
<td style="text-align: left;">442161</td>
<td style="text-align: left;">2017-04-20</td>
<td style="text-align: left;">13:35:00</td>
<td style="text-align: left;">S Jefferson Davis Pkwy &amp; Tulane Ave</td>
<td style="text-align: right;">30.0</td>
<td style="text-align: right;">-90.1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">L</td>
<td style="text-align: right;">28</td>
<td style="text-align: left;">black</td>
<td style="text-align: left;">male</td>
<td style="text-align: left;">1st District</td>
<td style="text-align: left;">vehicular</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">citation</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">consent</td>
<td style="text-align: left;">TRAFFIC VIOLATION</td>
<td style="text-align: left;">BLACK</td>
<td style="text-align: left;">HONDA</td>
<td style="text-align: left;">ACCORD</td>
<td style="text-align: right;">1991</td>
<td style="text-align: left;">Stop Results: Citation Issued;Subject Type: Driver;Search Occurred: Yes;Search Types: Vehicle;Evidence Seized: No;Legal Basises: Consent to search;Consent To Search: Yes;Exit Vehicle: Yes</td>
<td style="text-align: left;">BLACK</td>
</tr>
<tr class="even">
<td style="text-align: left;">442650</td>
<td style="text-align: left;">2017-04-20</td>
<td style="text-align: left;">13:37:00</td>
<td style="text-align: left;">Saint Louis St &amp; N Peters St</td>
<td style="text-align: right;">30.0</td>
<td style="text-align: right;">-90.1</td>
<td style="text-align: right;">8</td>
<td style="text-align: left;">D</td>
<td style="text-align: right;">57</td>
<td style="text-align: left;">black</td>
<td style="text-align: left;">male</td>
<td style="text-align: left;">8th District</td>
<td style="text-align: left;"></td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">citation</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">CRIMINAL VIOLATION</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: right;"></td>
<td style="text-align: left;">Stop Results: Citation Issued;Subject Type: Pedestrian;Search Occurred: No;Evidence Seized: No;Consent To Search: No;Exit Vehicle: No</td>
<td style="text-align: left;">BLACK</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="saving-sql-queries-as-r-objects" class="level2 scrollable">
<h2 class="scrollable anchored" data-anchor-id="saving-sql-queries-as-r-objects">Saving <strong>SQL</strong> queries as <strong>R</strong> objects</h2>
<p>If you are working in <strong>R</strong> to run <strong>SQL</strong> queries, you may want to use the query output for further analysis or visualizations.</p>
<ul>
<li>use <code>#| output.var: "name_of_variable"</code> inside the <code>{sql}</code> chunk.</li>
<li><code>name_of_variable</code> will then be available to be used in the R environment.</li>
</ul>
<div class="cell" data-output.var="new_table">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{sql}</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="in">#| connection: con_traffic</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="in">#| output.var: "new_table"</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="in">SELECT *, DAYNAME(date) AS wday</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="in">FROM la_new_orleans_2020_04_01</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="in">LIMIT 0, 1000;</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="saving-sql-queries-as-r-objects-1" class="level2 scrollable">
<h2 class="scrollable anchored" data-anchor-id="saving-sql-queries-as-r-objects-1">Saving <strong>SQL</strong> queries as <strong>R</strong> objects</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="in">new_table |&gt;</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="in">  drop_na(wday) |&gt;</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="in">  ggplot(aes(x = vehicle_year, y = subject_age, color = wday)) + </span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_point() +</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="in">  xlim(1985, 2025)</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="2025-04-16-clauses_files/figure-revealjs/unnamed-chunk-39-1.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="good-practice" class="level2">
<h2 class="anchored" data-anchor-id="good-practice">Good practice</h2>
<p>Always a good idea to terminate the <strong>SQL</strong> connection when you are done with it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dbDisconnect</span>(con_traffic, <span class="at">shutdown =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>taken from: https://cs186berkeley.net/notes/note1/#filtering-null-values<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div>CC-BY-SA-4.0</div></div></section></div></main> <!-- /main -->

<script>
  // htmlwidgets need to know to resize themselves when slides are shown/hidden.
  // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
  // slide changes (different for each slide format).
  (function () {
    // dispatch for htmlwidgets
    function fireSlideEnter() {
      const event = window.document.createEvent("Event");
      event.initEvent("slideenter", true, true);
      window.document.dispatchEvent(event);
    }

    function fireSlideChanged(previousSlide, currentSlide) {
      fireSlideEnter();

      // dispatch for shiny
      if (window.jQuery) {
        if (previousSlide) {
          window.jQuery(previousSlide).trigger("hidden");
        }
        if (currentSlide) {
          window.jQuery(currentSlide).trigger("shown");
        }
      }
    }

    // hookup for slidy
    if (window.w3c_slidy) {
      window.w3c_slidy.add_observer(function (slide_num) {
        // slide_num starts at position 1
        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
      });
    }

  })();
</script>

<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/ds002r-fds\.netlify\.app\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p><a href="https://hardin47.netlify.app/research/"><i class="fa-solid fa-book" aria-label="book"></i></a> <a href="https://hardin47.netlify.app/resume.pdf" target="_blank"><i class="fa-solid fa-bookmark"></i></a> <a href="mailto:jo.hardin@pomona.edu" target="_blank"><i class="fa-solid fa-at"></i></a> <a href="https://scholar.google.com/citations?user=c5Y77poAAAAJ&amp;hl=en" target="_blank"><i class="fa-brands fa-google-scholar"></i></a> <a href="https://www.researchgate.net/scientific-contributions/Johanna-Hardin-9764530" target="_blank"><i class="fa-brands fa-researchgate"></i></a><br>
<a href="https://github.com/hardin47" target="_blank"><i class="fa-brands fa-github"></i></a> <a href="https://www.linkedin.com/in/jo-hardin-b91a4b55" target="_blank"><i class="fa-brands fa-linkedin-in"></i></a></p>
</div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 <br> © Jo Hardin, 2025 -- <a href="mailto: jo.hardin@pomona.edu">jo.hardin@pomona.edu</a> -- <a href="https://hardin47.netlify.app/">https://hardin47.netlify.app/</a> <br> <br>
DS002R -- Foundations of Data Science in R -- Pomona College <br>
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>