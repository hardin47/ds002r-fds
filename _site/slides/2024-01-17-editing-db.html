<!DOCTYPE html>
<html lang="en"><head>
<link href="../images/favicon.ico" rel="icon">
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.450">

  <meta name="author" content="Jo Hardin">
  <meta name="dcterms.date" content="2024-01-17">
  <title>Data Science, the SQL - Editing Databases</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <link href="../site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
  <link href="../site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Editing Databases</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Jo Hardin 
</div>
</div>
</div>

  <p class="date">2024-01-17</p>
</section>
<section class="slide level2">


<!--

this lecture is way too short (barely an hour including clicker and worksheet).  there are a lot of things that can be expanded (see below), but it would be even better with a great example or two.

* slide 11, what is AUTO_DETECT?
* fix slide 10 to match the selector gadget
* Ivanka example, use REGEXP
* slide 9, can i input without quotes?
* can I input just **one** field?
* is epid a number or character?  look at both where it is entered (originally and with the Elon Musk insertion) as well as for example where epid > 20221231 on slide 12
* add 2 values in INSERT INTO (elon musk plus one other)
* slide 23 walk through POSITION example, breaking down the example, use more slides
* add SHOW TABLES along the way to show the temp table


-->
<!--

The slides were way to short.  Barely an hour with clicker and worksheet.  Here are some things to add, but might be good to also add another topic.


-->
</section>
<section>
<section id="todays-example" class="title-slide slide level1 center">
<h1>Today’s example</h1>
<p>We will continue to use <strong>DuckDB</strong> so that we have write access to the files we want to edit.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>con_duckdb <span class="ot">&lt;-</span> DBI<span class="sc">::</span><span class="fu">dbConnect</span>(duckdb<span class="sc">::</span><span class="fu">duckdb</span>(),</span>
<span id="cb1-2"><a href="#cb1-2"></a>                             <span class="at">dbdir =</span> <span class="st">"duck_datab"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="saturday-night-live" class="slide level2 scrollable">
<h2>Saturday Night Live</h2>

<img data-src="../images/SNL.jpg" style="width:90.0%" alt="Image says 'Saturday Night Live'." class="r-stretch quarto-figure-center"><p class="caption">Figure&nbsp;1: image credit: NBC</p><p>Consider the Saturday Night Live datasets available on the <a href="https://github.com/hhllcks/snldb/" target="_blank">snldb GitHub repo</a>.</p>
</section>
<section id="changing-data" class="slide level2 scrollable">
<h2>Changing data</h2>
<p>The <code>UPDATE</code> function allows you to change a value in a table across all rows that match a certain criteria.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> impressions </span>
<span id="cb2-2"><a href="#cb2-2"></a>   <span class="kw">WHERE</span> name <span class="kw">LIKE</span> <span class="st">'Ivanka%'</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="knitsql-table">

<table>
<caption>
5 records
</caption>
<thead>
<tr>
<th style="text-align:right;">
impid
</th>
<th style="text-align:left;">
aid
</th>
<th style="text-align:left;">
name
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
2598
</td>
<td style="text-align:left;">
Scarlett Johansson
</td>
<td style="text-align:left;">
Ivanka Trump
</td>
</tr>
<tr>
<td style="text-align:right;">
3716
</td>
<td style="text-align:left;">
Emily Blunt
</td>
<td style="text-align:left;">
Ivanka Trump
</td>
</tr>
<tr>
<td style="text-align:right;">
3694
</td>
<td style="text-align:left;">
Margot Robbie
</td>
<td style="text-align:left;">
Ivanka Trump
</td>
</tr>
<tr>
<td style="text-align:right;">
3679
</td>
<td style="text-align:left;">
Vanessa Bayer
</td>
<td style="text-align:left;">
Ivanka Trump
</td>
</tr>
<tr>
<td style="text-align:right;">
2340
</td>
<td style="text-align:left;">
Maya Rudolph
</td>
<td style="text-align:left;">
Ivanka Trump
</td>
</tr>
</tbody>

</table>
</div>
</div>
</section>
<section id="update" class="slide level2 scrollable">
<h2><code>UPDATE</code></h2>
<p>For funsies, let’s change Ivanka Trump to Ivanka Kushner.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw">UPDATE</span> impressions</span>
<span id="cb3-2"><a href="#cb3-2"></a>   <span class="kw">SET</span> name <span class="op">=</span> <span class="st">'Ivanka Kushner'</span></span>
<span id="cb3-3"><a href="#cb3-3"></a>   <span class="kw">WHERE</span> name <span class="kw">LIKE</span> <span class="st">'Ivanka%'</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> impressions </span>
<span id="cb4-2"><a href="#cb4-2"></a>   <span class="kw">WHERE</span> name <span class="kw">LIKE</span> <span class="st">'Ivanka%'</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="knitsql-table">

<table>
<caption>
5 records
</caption>
<thead>
<tr>
<th style="text-align:right;">
impid
</th>
<th style="text-align:left;">
aid
</th>
<th style="text-align:left;">
name
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
2598
</td>
<td style="text-align:left;">
Scarlett Johansson
</td>
<td style="text-align:left;">
Ivanka Kushner
</td>
</tr>
<tr>
<td style="text-align:right;">
3716
</td>
<td style="text-align:left;">
Emily Blunt
</td>
<td style="text-align:left;">
Ivanka Kushner
</td>
</tr>
<tr>
<td style="text-align:right;">
3694
</td>
<td style="text-align:left;">
Margot Robbie
</td>
<td style="text-align:left;">
Ivanka Kushner
</td>
</tr>
<tr>
<td style="text-align:right;">
3679
</td>
<td style="text-align:left;">
Vanessa Bayer
</td>
<td style="text-align:left;">
Ivanka Kushner
</td>
</tr>
<tr>
<td style="text-align:right;">
2340
</td>
<td style="text-align:left;">
Maya Rudolph
</td>
<td style="text-align:left;">
Ivanka Kushner
</td>
</tr>
</tbody>

</table>
</div>
</div>
</section>
<section id="update-1" class="slide level2 scrollable">
<h2><code>UPDATE</code></h2>
<div class="callout callout-tip no-icon callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<p><strong><i class="fas fa-triangle-exclamation"></i> Watch out!</strong></p>
</div>
<div class="callout-content">
<p>Be careful with <code>UPDATE</code>. A careless <code>UPDATE</code> could write over all of the data in your table. There is no <strong>undo</strong> function.</p>
</div>
</div>
</div>
</section>
<section id="inserting-data" class="slide level2 scrollable">
<h2>Inserting data</h2>
<p>Task: include recent hosts in the <code>hosts</code> table.</p>
<p>By searching the <a href="http://www.snlarchives.net/Episodes/" target="_blank">SNL archives</a>, we can see that the next host, chronologically was Elon Musk on May 8, 2021.</p>

<img data-src="../images/nexthost.jpg" style="width:90.0%" alt="Screenshot of the list of hosts, ordered chronologically." class="r-stretch quarto-figure-center"><p class="caption">Figure&nbsp;2: Hosts information from snlarchives.net</p></section>
<section id="inserting-data-1" class="slide level2 scrollable">
<h2>Inserting data</h2>
<p>Task: include recent hosts in the <code>hosts</code> table.</p>
<p>By searching the <a href="http://www.snlarchives.net/Episodes/" target="_blank">SNL archives</a>, we can see that the next host, chronologically was Elon Musk on May 8, 2021.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> hosts</span>
<span id="cb5-2"><a href="#cb5-2"></a>    <span class="kw">ORDER</span> <span class="kw">BY</span> epid <span class="kw">DESC</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>    <span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="knitsql-table">

<table>
<caption>
Displaying records 1 - 10
</caption>
<thead>
<tr>
<th style="text-align:right;">
epid
</th>
<th style="text-align:left;">
aid
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
20210410
</td>
<td style="text-align:left;">
Carey Mulligan
</td>
</tr>
<tr>
<td style="text-align:right;">
20210403
</td>
<td style="text-align:left;">
Daniel Kaluuya
</td>
</tr>
<tr>
<td style="text-align:right;">
20210327
</td>
<td style="text-align:left;">
Maya Rudolph
</td>
</tr>
<tr>
<td style="text-align:right;">
20210227
</td>
<td style="text-align:left;">
Nick Jonas
</td>
</tr>
<tr>
<td style="text-align:right;">
20210220
</td>
<td style="text-align:left;">
Rege-Jean Page
</td>
</tr>
<tr>
<td style="text-align:right;">
20210213
</td>
<td style="text-align:left;">
Regina King
</td>
</tr>
<tr>
<td style="text-align:right;">
20210206
</td>
<td style="text-align:left;">
Dan Levy
</td>
</tr>
<tr>
<td style="text-align:right;">
20210130
</td>
<td style="text-align:left;">
John Krasinski
</td>
</tr>
<tr>
<td style="text-align:right;">
20201219
</td>
<td style="text-align:left;">
Kristen Wiig
</td>
</tr>
<tr>
<td style="text-align:right;">
20201212
</td>
<td style="text-align:left;">
Timothee Chalamet
</td>
</tr>
</tbody>

</table>
</div>
</div>
</section>
<section id="inserting-data-2" class="slide level2 scrollable">
<h2>Inserting data</h2>
<p><code>INSERT</code> allows us to add the relevant information associated with the episode of SNL that Elon Musk hosted.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> hosts (epid, aid)</span>
<span id="cb6-2"><a href="#cb6-2"></a>   <span class="kw">VALUES</span> (<span class="st">'20210508'</span>, <span class="st">'Elon Musk'</span>);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> hosts</span>
<span id="cb7-2"><a href="#cb7-2"></a>    <span class="kw">ORDER</span> <span class="kw">BY</span> epid <span class="kw">DESC</span></span>
<span id="cb7-3"><a href="#cb7-3"></a>    <span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="knitsql-table">

<table>
<caption>
Displaying records 1 - 10
</caption>
<thead>
<tr>
<th style="text-align:right;">
epid
</th>
<th style="text-align:left;">
aid
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
20210508
</td>
<td style="text-align:left;">
Elon Musk
</td>
</tr>
<tr>
<td style="text-align:right;">
20210410
</td>
<td style="text-align:left;">
Carey Mulligan
</td>
</tr>
<tr>
<td style="text-align:right;">
20210403
</td>
<td style="text-align:left;">
Daniel Kaluuya
</td>
</tr>
<tr>
<td style="text-align:right;">
20210327
</td>
<td style="text-align:left;">
Maya Rudolph
</td>
</tr>
<tr>
<td style="text-align:right;">
20210227
</td>
<td style="text-align:left;">
Nick Jonas
</td>
</tr>
<tr>
<td style="text-align:right;">
20210220
</td>
<td style="text-align:left;">
Rege-Jean Page
</td>
</tr>
<tr>
<td style="text-align:right;">
20210213
</td>
<td style="text-align:left;">
Regina King
</td>
</tr>
<tr>
<td style="text-align:right;">
20210206
</td>
<td style="text-align:left;">
Dan Levy
</td>
</tr>
<tr>
<td style="text-align:right;">
20210130
</td>
<td style="text-align:left;">
John Krasinski
</td>
</tr>
<tr>
<td style="text-align:right;">
20201219
</td>
<td style="text-align:left;">
Kristen Wiig
</td>
</tr>
</tbody>

</table>
</div>
</div>
</section>
<section id="inserting-data-3" class="slide level2 scrollable">
<h2>Inserting data</h2>
<p>It would be tedious to <code>INSERT</code> all of the most recent host information by hand. Instead, we’ll scrape the <a href="http://www.snlarchives.net/Episodes/" target="_blank">SNL archives</a> using the <strong>R</strong> package <strong>rvest</strong>, which allows us to pull out the appropriate html elements. The <code>epid</code> and <code>aid</code> are joined together in a tibble, and <code>filter</code>ed to only include episodes which are not already in the <code>episodes</code> table.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb8-2"><a href="#cb8-2"></a></span>
<span id="cb8-3"><a href="#cb8-3"></a>recent_hosts <span class="ot">&lt;-</span> <span class="fu">read_html</span>(<span class="st">"http://www.snlarchives.net/Episodes/"</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-4"><a href="#cb8-4"></a>  <span class="fu">html_nodes</span>(<span class="st">"tr"</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-5"><a href="#cb8-5"></a>  purrr<span class="sc">::</span><span class="fu">map_df</span>( <span class="sc">~</span> <span class="fu">tibble</span>(</span>
<span id="cb8-6"><a href="#cb8-6"></a>    <span class="at">epid =</span> .x <span class="sc">|&gt;</span> <span class="fu">html_node</span>(<span class="st">"a.ms-2.me-2"</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-7"><a href="#cb8-7"></a>      <span class="fu">html_attr</span>(<span class="st">"href"</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-8"><a href="#cb8-8"></a>      <span class="fu">str_extract</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">d+"</span>),</span>
<span id="cb8-9"><a href="#cb8-9"></a>    <span class="at">aid =</span> .x <span class="sc">|&gt;</span> <span class="fu">html_node</span>(<span class="st">"td:nth-child(2)"</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-10"><a href="#cb8-10"></a>      <span class="fu">html_text2</span>() <span class="sc">|&gt;</span></span>
<span id="cb8-11"><a href="#cb8-11"></a>      <span class="fu">str_extract</span>(<span class="st">"[</span><span class="sc">\\</span><span class="st">w</span><span class="sc">\\</span><span class="st">. </span><span class="sc">\\</span><span class="st">w</span><span class="sc">\\</span><span class="st">.]+(?=/|$)"</span>)</span>
<span id="cb8-12"><a href="#cb8-12"></a>  )) <span class="sc">|&gt;</span></span>
<span id="cb8-13"><a href="#cb8-13"></a>  <span class="fu">filter</span>(epid <span class="sc">&gt;</span> <span class="dv">20210508</span>)</span>
<span id="cb8-14"><a href="#cb8-14"></a></span>
<span id="cb8-15"><a href="#cb8-15"></a></span>
<span id="cb8-16"><a href="#cb8-16"></a><span class="fu">write_csv</span>(recent_hosts, <span class="st">"data/recent_hosts.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="inserting-data-4" class="slide level2 scrollable">
<h2>Inserting data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb9-1"><a href="#cb9-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> hosts</span>
<span id="cb9-2"><a href="#cb9-2"></a>   <span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>   <span class="kw">FROM</span> READ_CSV(<span class="st">'data/recent_hosts.csv'</span>, AUTO_DETECT <span class="op">=</span> <span class="kw">TRUE</span>);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb10-1"><a href="#cb10-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> hosts</span>
<span id="cb10-2"><a href="#cb10-2"></a>  <span class="kw">ORDER</span> <span class="kw">BY</span> epid <span class="kw">DESC</span></span>
<span id="cb10-3"><a href="#cb10-3"></a>  <span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="knitsql-table">

<table>
<caption>
Displaying records 1 - 10
</caption>
<thead>
<tr>
<th style="text-align:right;">
epid
</th>
<th style="text-align:left;">
aid
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
20231216
</td>
<td style="text-align:left;">
Kate McKinnon
</td>
</tr>
<tr>
<td style="text-align:right;">
20231209
</td>
<td style="text-align:left;">
Adam Driver
</td>
</tr>
<tr>
<td style="text-align:right;">
20231202
</td>
<td style="text-align:left;">
Emma Stone
</td>
</tr>
<tr>
<td style="text-align:right;">
20231118
</td>
<td style="text-align:left;">
Jason Momoa
</td>
</tr>
<tr>
<td style="text-align:right;">
20231111
</td>
<td style="text-align:left;">
Timothée Chalamet
</td>
</tr>
<tr>
<td style="text-align:right;">
20231028
</td>
<td style="text-align:left;">
Nate Bargatze
</td>
</tr>
<tr>
<td style="text-align:right;">
20231021
</td>
<td style="text-align:left;">
Bad Bunny
</td>
</tr>
<tr>
<td style="text-align:right;">
20231014
</td>
<td style="text-align:left;">
Pete Davidson
</td>
</tr>
<tr>
<td style="text-align:right;">
20230415
</td>
<td style="text-align:left;">
Ana de Armas
</td>
</tr>
<tr>
<td style="text-align:right;">
20230408
</td>
<td style="text-align:left;">
Molly Shannon
</td>
</tr>
</tbody>

</table>
</div>
</div>
</section>
<section id="deleting-data" class="slide level2 scrollable">
<h2>Deleting data</h2>
<p>You might change your mind and decide that you really only want hosts from years up to 2022. The <code>DELETE</code> function deletes any rows specified by the <code>WHERE</code> clause.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb11-1"><a href="#cb11-1"></a><span class="kw">DELETE</span> <span class="kw">FROM</span> hosts</span>
<span id="cb11-2"><a href="#cb11-2"></a>   <span class="kw">WHERE</span> epid <span class="op">&gt;</span> <span class="dv">20221231</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb12-1"><a href="#cb12-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> hosts</span>
<span id="cb12-2"><a href="#cb12-2"></a>  <span class="kw">ORDER</span> <span class="kw">BY</span> epid <span class="kw">DESC</span></span>
<span id="cb12-3"><a href="#cb12-3"></a>  <span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="knitsql-table">

<table>
<caption>
Displaying records 1 - 10
</caption>
<thead>
<tr>
<th style="text-align:right;">
epid
</th>
<th style="text-align:left;">
aid
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
20221217
</td>
<td style="text-align:left;">
Austin Butler
</td>
</tr>
<tr>
<td style="text-align:right;">
20221210
</td>
<td style="text-align:left;">
Martin Short
</td>
</tr>
<tr>
<td style="text-align:right;">
20221203
</td>
<td style="text-align:left;">
Keke Palmer
</td>
</tr>
<tr>
<td style="text-align:right;">
20221112
</td>
<td style="text-align:left;">
Dave Chappelle
</td>
</tr>
<tr>
<td style="text-align:right;">
20221105
</td>
<td style="text-align:left;">
Amy Schumer
</td>
</tr>
<tr>
<td style="text-align:right;">
20221029
</td>
<td style="text-align:left;">
Jack Harlow
</td>
</tr>
<tr>
<td style="text-align:right;">
20221015
</td>
<td style="text-align:left;">
Megan Thee Stallion
</td>
</tr>
<tr>
<td style="text-align:right;">
20221008
</td>
<td style="text-align:left;">
Brendan Gleeson
</td>
</tr>
<tr>
<td style="text-align:right;">
20221001
</td>
<td style="text-align:left;">
Miles Teller
</td>
</tr>
<tr>
<td style="text-align:right;">
20220521
</td>
<td style="text-align:left;">
Natasha Lyonne
</td>
</tr>
</tbody>

</table>
</div>
</div>
</section>
<section id="altering-the-table" class="slide level2">
<h2>Altering the table</h2>
<p><code>ALTER TABLE</code> changes the structure of a table. For example, you can add or delete columns, create or destroy indexes, change the type of existing columns, or rename columns or the table itself.</p>
<p>Multiple <code>ADD</code>, <code>ALTER</code>, <code>DROP</code>, and <code>CHANGE</code> clauses are permitted in a single <code>ALTER TABLE</code> statement, separated by commas.</p>
<p>Caveat: I have found <strong>DuckDB</strong> to be slightly finicky in some of the operations…</p>
</section>
<section id="altering-the-table-drop-columns" class="slide level2">
<h2>Altering the table (<code>DROP</code> columns)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb13-1"><a href="#cb13-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> t1</span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="kw">DROP</span> <span class="kw">COLUMN</span> col1,</span>
<span id="cb13-3"><a href="#cb13-3"></a><span class="kw">DROP</span> <span class="kw">COLUMN</span> col2;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="altering-the-table-change-name-and-definition" class="slide level2">
<h2>Altering the table (<code>CHANGE</code> name and definition)</h2>
<ul>
<li>rename an <code>INT NOT NULL</code> column from <code>a</code> to <code>b</code> and change its definition to use the <code>BIGINT</code> data type while retaining the <code>NOT NULL</code> attribute.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb14-1"><a href="#cb14-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> t1 <span class="kw">CHANGE</span> a b BIGINT <span class="kw">NOT</span> <span class="kw">NULL</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="altering-the-table-change-definition-not-name" class="slide level2">
<h2>Altering the table (<code>CHANGE</code> definition not name)</h2>
<ul>
<li><code>CHANGE</code>, the syntax requires two column names, so you must specify the same name twice to leave the name unchanged. For example, to change the definition of column <code>b</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb15-1"><a href="#cb15-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> t1 <span class="kw">CHANGE</span> b b <span class="dt">INT</span> <span class="kw">NOT</span> <span class="kw">NULL</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="altering-the-table-modify-definition" class="slide level2">
<h2>Altering the table (<code>MODIFY</code> definition)</h2>
<ul>
<li><code>MODIFY</code> is more convenient to change the definition without changing the name because it requires the column name only once.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb16-1"><a href="#cb16-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> t1 <span class="kw">MODIFY</span> b <span class="dt">INT</span> <span class="kw">NOT</span> <span class="kw">NULL</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="altering-the-table-change-name-not-definition" class="slide level2">
<h2>Altering the table (<code>CHANGE</code> name not definition)</h2>
<ul>
<li><code>CHANGE</code>, the syntax requires a column definition, so to leave the definition unchanged, you must respecify the definition the column currently has. For example, to rename an <code>INT NOT NULL</code> column from <code>b</code> to <code>a</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb17-1"><a href="#cb17-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> t1 <span class="kw">CHANGE</span> b a <span class="dt">INT</span> <span class="kw">NOT</span> <span class="kw">NULL</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="altering-the-table-rename-column-name-not-definition" class="slide level2">
<h2>Altering the table (<code>RENAME COLUMN</code> name not definition)</h2>
<ul>
<li><code>RENAME COLUMN</code> is more convenient to change the name without changing the definition because it requires only the old and new names.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb18-1"><a href="#cb18-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> t1 <span class="kw">RENAME</span> <span class="kw">COLUMN</span> b <span class="kw">TO</span> a;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="altering-the-table-rename-column-multiple-columns" class="slide level2">
<h2>Altering the table (<code>RENAME COLUMN</code> multiple columns)</h2>
<ul>
<li>cannot <code>RENAME COLUMN</code> to a column name that already exists. The following are valid.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb19-1"><a href="#cb19-1"></a><span class="co">/* swap a and b */</span></span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> t1 <span class="kw">RENAME</span> <span class="kw">COLUMN</span> a <span class="kw">TO</span> b,</span>
<span id="cb19-3"><a href="#cb19-3"></a>               <span class="kw">RENAME</span> <span class="kw">COLUMN</span> b <span class="kw">TO</span> a;</span>
<span id="cb19-4"><a href="#cb19-4"></a></span>
<span id="cb19-5"><a href="#cb19-5"></a><span class="co">/* "rotate" a, b, c through a cycle */</span></span>
<span id="cb19-6"><a href="#cb19-6"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> t1 <span class="kw">RENAME</span> <span class="kw">COLUMN</span> a <span class="kw">TO</span> b,</span>
<span id="cb19-7"><a href="#cb19-7"></a>               <span class="kw">RENAME</span> <span class="kw">COLUMN</span> b <span class="kw">TO</span> c,</span>
<span id="cb19-8"><a href="#cb19-8"></a>               <span class="kw">RENAME</span> <span class="kw">COLUMN</span> c <span class="kw">TO</span> a;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="temporary-tables" class="slide level2">
<h2>Temporary Tables</h2>
<p>Temporary tables are used to break down complex queries into smaller, more manageable steps. For example, let’s say we want to <code>JOIN</code> two tables after each has been filtered using different <code>WHERE</code> clauses. The filtered tables can each be saved into their own temporary tables and then the temporary tables can be merged.</p>
<p>Tables in <strong>DuckDB</strong> are saved (to disk), even when the connection is closed. However, temporary tables are saved in memory (instead of on disk) and are deleted when the connection is closed.</p>
</section>
<section id="temporary-tables-episodes" class="slide level2">
<h2>Temporary Tables (episodes)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb20-1"><a href="#cb20-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> episodes <span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="knitsql-table">

<table>
<caption>
Displaying records 1 - 10
</caption>
<thead>
<tr>
<th style="text-align:right;">
sid
</th>
<th style="text-align:right;">
epid
</th>
<th style="text-align:left;">
aired
</th>
<th style="text-align:right;">
epno
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
20210410
</td>
<td style="text-align:left;">
April 10, 2021
</td>
<td style="text-align:right;">
17
</td>
</tr>
<tr>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
20210403
</td>
<td style="text-align:left;">
April 3, 2021
</td>
<td style="text-align:right;">
16
</td>
</tr>
<tr>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
20210327
</td>
<td style="text-align:left;">
March 27, 2021
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
20210227
</td>
<td style="text-align:left;">
February 27, 2021
</td>
<td style="text-align:right;">
14
</td>
</tr>
<tr>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
20210220
</td>
<td style="text-align:left;">
February 20, 2021
</td>
<td style="text-align:right;">
13
</td>
</tr>
<tr>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
20210213
</td>
<td style="text-align:left;">
February 13, 2021
</td>
<td style="text-align:right;">
12
</td>
</tr>
<tr>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
20210206
</td>
<td style="text-align:left;">
February 6, 2021
</td>
<td style="text-align:right;">
11
</td>
</tr>
<tr>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
20210130
</td>
<td style="text-align:left;">
January 30, 2021
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
20201219
</td>
<td style="text-align:left;">
December 19, 2020
</td>
<td style="text-align:right;">
9
</td>
</tr>
<tr>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
20201212
</td>
<td style="text-align:left;">
December 12, 2020
</td>
<td style="text-align:right;">
8
</td>
</tr>
</tbody>

</table>
</div>
</div>
</section>
<section id="temporary-tables-1" class="slide level2 scrollable">
<h2>Temporary Tables</h2>
<p>We wouldn’t want to wrangle the date every single time we used the data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb21-1"><a href="#cb21-1"></a><span class="kw">CREATE</span> TEMP <span class="kw">TABLE</span> episodes_date <span class="kw">AS</span></span>
<span id="cb21-2"><a href="#cb21-2"></a>    <span class="kw">SELECT</span> <span class="op">*</span>, <span class="cf">CASE</span></span>
<span id="cb21-3"><a href="#cb21-3"></a>             <span class="cf">WHEN</span> POSITION(<span class="st">','</span> <span class="kw">IN</span> aired) <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">THEN</span></span>
<span id="cb21-4"><a href="#cb21-4"></a>    <span class="fu">EXTRACT</span>(<span class="dt">YEAR</span> <span class="kw">FROM</span> <span class="fu">CAST</span>(</span>
<span id="cb21-5"><a href="#cb21-5"></a>                SUBSTRING(aired, POSITION(<span class="st">','</span> <span class="kw">IN</span> aired) <span class="op">+</span> <span class="dv">2</span>) <span class="op">||</span> <span class="st">'-'</span> <span class="op">||</span></span>
<span id="cb21-6"><a href="#cb21-6"></a>                <span class="cf">CASE</span></span>
<span id="cb21-7"><a href="#cb21-7"></a>                    <span class="cf">WHEN</span> POSITION(<span class="st">'January'</span> <span class="kw">IN</span> aired) <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">THEN</span> <span class="st">'01'</span></span>
<span id="cb21-8"><a href="#cb21-8"></a>                    <span class="cf">WHEN</span> POSITION(<span class="st">'February'</span> <span class="kw">IN</span> aired) <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">THEN</span> <span class="st">'02'</span></span>
<span id="cb21-9"><a href="#cb21-9"></a>                    <span class="cf">WHEN</span> POSITION(<span class="st">'March'</span> <span class="kw">IN</span> aired) <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">THEN</span> <span class="st">'03'</span></span>
<span id="cb21-10"><a href="#cb21-10"></a>                    <span class="cf">WHEN</span> POSITION(<span class="st">'April'</span> <span class="kw">IN</span> aired) <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">THEN</span> <span class="st">'04'</span></span>
<span id="cb21-11"><a href="#cb21-11"></a>                    <span class="cf">WHEN</span> POSITION(<span class="st">'May'</span> <span class="kw">IN</span> aired) <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">THEN</span> <span class="st">'05'</span></span>
<span id="cb21-12"><a href="#cb21-12"></a>                    <span class="cf">WHEN</span> POSITION(<span class="st">'June'</span> <span class="kw">IN</span> aired) <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">THEN</span> <span class="st">'06'</span></span>
<span id="cb21-13"><a href="#cb21-13"></a>                    <span class="cf">WHEN</span> POSITION(<span class="st">'July'</span> <span class="kw">IN</span> aired) <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">THEN</span> <span class="st">'07'</span></span>
<span id="cb21-14"><a href="#cb21-14"></a>                    <span class="cf">WHEN</span> POSITION(<span class="st">'August'</span> <span class="kw">IN</span> aired) <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">THEN</span> <span class="st">'08'</span></span>
<span id="cb21-15"><a href="#cb21-15"></a>                    <span class="cf">WHEN</span> POSITION(<span class="st">'September'</span> <span class="kw">IN</span> aired) <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">THEN</span> <span class="st">'09'</span></span>
<span id="cb21-16"><a href="#cb21-16"></a>                    <span class="cf">WHEN</span> POSITION(<span class="st">'October'</span> <span class="kw">IN</span> aired) <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">THEN</span> <span class="st">'10'</span></span>
<span id="cb21-17"><a href="#cb21-17"></a>                    <span class="cf">WHEN</span> POSITION(<span class="st">'November'</span> <span class="kw">IN</span> aired) <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">THEN</span> <span class="st">'11'</span></span>
<span id="cb21-18"><a href="#cb21-18"></a>                    <span class="cf">WHEN</span> POSITION(<span class="st">'December'</span> <span class="kw">IN</span> aired) <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">THEN</span> <span class="st">'12'</span></span>
<span id="cb21-19"><a href="#cb21-19"></a>                    <span class="cf">ELSE</span> <span class="st">'01'</span> <span class="co">-- Default to January if no month is found</span></span>
<span id="cb21-20"><a href="#cb21-20"></a>                <span class="cf">END</span> <span class="op">||</span> <span class="st">'-'</span> <span class="op">||</span></span>
<span id="cb21-21"><a href="#cb21-21"></a>                SUBSTRING(aired, POSITION(<span class="st">' '</span> <span class="kw">IN</span> aired) <span class="op">+</span> <span class="dv">1</span>, <span class="dv">2</span>) <span class="kw">AS</span> <span class="dt">DATE</span></span>
<span id="cb21-22"><a href="#cb21-22"></a>            ))</span>
<span id="cb21-23"><a href="#cb21-23"></a>            <span class="cf">END</span> <span class="kw">AS</span> <span class="dt">year</span> <span class="kw">FROM</span> episodes;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="what-does-position-do" class="slide level2 scrollable">
<h2>What does <code>POSITION</code> do?</h2>
<p>In case you are curious about the date wrangling code… consider <code>SUBSTRING(aired, POSITION(',' IN aired) + 2)</code></p>
<ol type="1">
<li><p><code>POSITION(',' IN aired)</code>: This part of the expression uses the <code>POSITION</code> function to find the position of the first occurrence of the comma (<code>,</code>) in the string <code>aired</code>. The result is the index (position) of the comma within the string.</p></li>
<li><p><code>POSITION(',' IN aired) + 2</code>: This adds 2 to the index of the comma. The <code>+ 2</code> is used to move the starting point of the substring two positions to the right of the comma. This is done to exclude the comma itself and any following spaces.</p></li>
<li><p><code>SUBSTRING(aired, POSITION(',' IN aired) + 2)</code>: This part uses the SUBSTRING function to extract a substring from the string <code>aired</code>. The starting position of the substring is determined by <code>POSITION(',' IN aired) + 2</code>, and it goes until the end of the string. This effectively removes the part of the string that comes before and including the first comma.</p></li>
</ol>
<p>In summary, the entire expression is extracting a substring from the original string <code>aired</code>, starting from two positions to the right of the first comma and continuing until the end of the string. This can be useful in scenarios where you want to remove or isolate part of a string based on the position of a specific character (in this case, the comma).</p>
</section>
<section id="temporary-table-exists" class="slide level2">
<h2>Temporary Table exists!</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb22-1"><a href="#cb22-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> episodes_date <span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="knitsql-table">

<table>
<caption>
Displaying records 1 - 10
</caption>
<thead>
<tr>
<th style="text-align:right;">
sid
</th>
<th style="text-align:right;">
epid
</th>
<th style="text-align:left;">
aired
</th>
<th style="text-align:right;">
epno
</th>
<th style="text-align:right;">
year
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
20210410
</td>
<td style="text-align:left;">
April 10, 2021
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
2021
</td>
</tr>
<tr>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
20210403
</td>
<td style="text-align:left;">
April 3, 2021
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
2021
</td>
</tr>
<tr>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
20210327
</td>
<td style="text-align:left;">
March 27, 2021
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
2021
</td>
</tr>
<tr>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
20210227
</td>
<td style="text-align:left;">
February 27, 2021
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
2021
</td>
</tr>
<tr>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
20210220
</td>
<td style="text-align:left;">
February 20, 2021
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
2021
</td>
</tr>
<tr>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
20210213
</td>
<td style="text-align:left;">
February 13, 2021
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
2021
</td>
</tr>
<tr>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
20210206
</td>
<td style="text-align:left;">
February 6, 2021
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
2021
</td>
</tr>
<tr>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
20210130
</td>
<td style="text-align:left;">
January 30, 2021
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
2021
</td>
</tr>
<tr>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
20201219
</td>
<td style="text-align:left;">
December 19, 2020
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
2020
</td>
</tr>
<tr>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
20201212
</td>
<td style="text-align:left;">
December 12, 2020
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
2020
</td>
</tr>
</tbody>

</table>
</div>
</div>
</section>
<section id="using-a-temporary-table" class="slide level2">
<h2>Using a temporary table</h2>
<p>Now that the <code>year</code> variable has been created in the new temporary table called <code>episodes_date</code>, we can use <code>episode_date</code> to query and find, for example, all of the hosts in 2019.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource sql number-lines code-with-copy"><code class="sourceCode sql"><span id="cb23-1"><a href="#cb23-1"></a><span class="kw">SELECT</span> hosts.aid, ep.aired, ep.<span class="dt">year</span> <span class="kw">FROM</span> hosts </span>
<span id="cb23-2"><a href="#cb23-2"></a><span class="kw">JOIN</span> episodes_date <span class="kw">AS</span> ep <span class="kw">ON</span> hosts.epid <span class="op">=</span> ep.epid</span>
<span id="cb23-3"><a href="#cb23-3"></a><span class="kw">WHERE</span> <span class="dt">year</span> <span class="op">=</span> <span class="dv">2019</span></span>
<span id="cb23-4"><a href="#cb23-4"></a><span class="kw">LIMIT</span> <span class="dv">25</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="knitsql-table">

<table>
<caption>
Displaying records 1 - 10
</caption>
<thead>
<tr>
<th style="text-align:left;">
aid
</th>
<th style="text-align:left;">
aired
</th>
<th style="text-align:right;">
year
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Eddie Murphy
</td>
<td style="text-align:left;">
December 21, 2019
</td>
<td style="text-align:right;">
2019
</td>
</tr>
<tr>
<td style="text-align:left;">
Scarlett Johansson
</td>
<td style="text-align:left;">
December 14, 2019
</td>
<td style="text-align:right;">
2019
</td>
</tr>
<tr>
<td style="text-align:left;">
Jennifer Lopez
</td>
<td style="text-align:left;">
December 7, 2019
</td>
<td style="text-align:right;">
2019
</td>
</tr>
<tr>
<td style="text-align:left;">
Will Ferrell
</td>
<td style="text-align:left;">
November 23, 2019
</td>
<td style="text-align:right;">
2019
</td>
</tr>
<tr>
<td style="text-align:left;">
Harry Styles
</td>
<td style="text-align:left;">
November 16, 2019
</td>
<td style="text-align:right;">
2019
</td>
</tr>
<tr>
<td style="text-align:left;">
Kristen Stewart
</td>
<td style="text-align:left;">
November 2, 2019
</td>
<td style="text-align:right;">
2019
</td>
</tr>
<tr>
<td style="text-align:left;">
Chance the Rapper
</td>
<td style="text-align:left;">
October 26, 2019
</td>
<td style="text-align:right;">
2019
</td>
</tr>
<tr>
<td style="text-align:left;">
David Harbour
</td>
<td style="text-align:left;">
October 12, 2019
</td>
<td style="text-align:right;">
2019
</td>
</tr>
<tr>
<td style="text-align:left;">
Phoebe Waller-Bridge
</td>
<td style="text-align:left;">
October 5, 2019
</td>
<td style="text-align:right;">
2019
</td>
</tr>
<tr>
<td style="text-align:left;">
Woody Harrelson
</td>
<td style="text-align:left;">
September 28, 2019
</td>
<td style="text-align:right;">
2019
</td>
</tr>
</tbody>

</table>
</div>
</div>
</section>
<section id="best-practice" class="slide level2">
<h2>Best practice</h2>
<p>It is always a good idea to terminate the <strong>SQL</strong> connection when you are done with it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="fu">dbDisconnect</span>(con_duckdb, <span class="at">shutdown =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<div class="footer footer-default">

</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>